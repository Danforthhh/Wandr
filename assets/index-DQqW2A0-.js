(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const p of c.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&o(p)}).observe(document,{childList:!0,subtree:!0});function t(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(a){if(a.ep)return;a.ep=!0;const c=t(a);fetch(a.href,c)}})();function Qy(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var mf={exports:{}},pu={},gf={exports:{}},rt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yg;function Sx(){if(Yg)return rt;Yg=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),p=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),T=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),C=Symbol.iterator;function b(B){return B===null||typeof B!="object"?null:(B=C&&B[C]||B["@@iterator"],typeof B=="function"?B:null)}var W={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$=Object.assign,Z={};function J(B,ne,Oe){this.props=B,this.context=ne,this.refs=Z,this.updater=Oe||W}J.prototype.isReactComponent={},J.prototype.setState=function(B,ne){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,ne,"setState")},J.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function he(){}he.prototype=J.prototype;function me(B,ne,Oe){this.props=B,this.context=ne,this.refs=Z,this.updater=Oe||W}var xe=me.prototype=new he;xe.constructor=me,$(xe,J.prototype),xe.isPureReactComponent=!0;var Le=Array.isArray,Te=Object.prototype.hasOwnProperty,De={current:null},F={key:!0,ref:!0,__self:!0,__source:!0};function D(B,ne,Oe){var Ae,Ie={},ye=null,Xe=null;if(ne!=null)for(Ae in ne.ref!==void 0&&(Xe=ne.ref),ne.key!==void 0&&(ye=""+ne.key),ne)Te.call(ne,Ae)&&!F.hasOwnProperty(Ae)&&(Ie[Ae]=ne[Ae]);var re=arguments.length-2;if(re===1)Ie.children=Oe;else if(1<re){for(var qe=Array(re),dt=0;dt<re;dt++)qe[dt]=arguments[dt+2];Ie.children=qe}if(B&&B.defaultProps)for(Ae in re=B.defaultProps,re)Ie[Ae]===void 0&&(Ie[Ae]=re[Ae]);return{$$typeof:r,type:B,key:ye,ref:Xe,props:Ie,_owner:De.current}}function M(B,ne){return{$$typeof:r,type:B.type,key:ne,ref:B.ref,props:B.props,_owner:B._owner}}function U(B){return typeof B=="object"&&B!==null&&B.$$typeof===r}function R(B){var ne={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(Oe){return ne[Oe]})}var O=/\/+/g;function N(B,ne){return typeof B=="object"&&B!==null&&B.key!=null?R(""+B.key):ne.toString(36)}function be(B,ne,Oe,Ae,Ie){var ye=typeof B;(ye==="undefined"||ye==="boolean")&&(B=null);var Xe=!1;if(B===null)Xe=!0;else switch(ye){case"string":case"number":Xe=!0;break;case"object":switch(B.$$typeof){case r:case e:Xe=!0}}if(Xe)return Xe=B,Ie=Ie(Xe),B=Ae===""?"."+N(Xe,0):Ae,Le(Ie)?(Oe="",B!=null&&(Oe=B.replace(O,"$&/")+"/"),be(Ie,ne,Oe,"",function(dt){return dt})):Ie!=null&&(U(Ie)&&(Ie=M(Ie,Oe+(!Ie.key||Xe&&Xe.key===Ie.key?"":(""+Ie.key).replace(O,"$&/")+"/")+B)),ne.push(Ie)),1;if(Xe=0,Ae=Ae===""?".":Ae+":",Le(B))for(var re=0;re<B.length;re++){ye=B[re];var qe=Ae+N(ye,re);Xe+=be(ye,ne,Oe,qe,Ie)}else if(qe=b(B),typeof qe=="function")for(B=qe.call(B),re=0;!(ye=B.next()).done;)ye=ye.value,qe=Ae+N(ye,re++),Xe+=be(ye,ne,Oe,qe,Ie);else if(ye==="object")throw ne=String(B),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.");return Xe}function Ke(B,ne,Oe){if(B==null)return B;var Ae=[],Ie=0;return be(B,Ae,"","",function(ye){return ne.call(Oe,ye,Ie++)}),Ae}function ge(B){if(B._status===-1){var ne=B._result;ne=ne(),ne.then(function(Oe){(B._status===0||B._status===-1)&&(B._status=1,B._result=Oe)},function(Oe){(B._status===0||B._status===-1)&&(B._status=2,B._result=Oe)}),B._status===-1&&(B._status=0,B._result=ne)}if(B._status===1)return B._result.default;throw B._result}var Ve={current:null},ee={transition:null},Pe={ReactCurrentDispatcher:Ve,ReactCurrentBatchConfig:ee,ReactCurrentOwner:De};function se(){throw Error("act(...) is not supported in production builds of React.")}return rt.Children={map:Ke,forEach:function(B,ne,Oe){Ke(B,function(){ne.apply(this,arguments)},Oe)},count:function(B){var ne=0;return Ke(B,function(){ne++}),ne},toArray:function(B){return Ke(B,function(ne){return ne})||[]},only:function(B){if(!U(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},rt.Component=J,rt.Fragment=t,rt.Profiler=a,rt.PureComponent=me,rt.StrictMode=o,rt.Suspense=x,rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Pe,rt.act=se,rt.cloneElement=function(B,ne,Oe){if(B==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+B+".");var Ae=$({},B.props),Ie=B.key,ye=B.ref,Xe=B._owner;if(ne!=null){if(ne.ref!==void 0&&(ye=ne.ref,Xe=De.current),ne.key!==void 0&&(Ie=""+ne.key),B.type&&B.type.defaultProps)var re=B.type.defaultProps;for(qe in ne)Te.call(ne,qe)&&!F.hasOwnProperty(qe)&&(Ae[qe]=ne[qe]===void 0&&re!==void 0?re[qe]:ne[qe])}var qe=arguments.length-2;if(qe===1)Ae.children=Oe;else if(1<qe){re=Array(qe);for(var dt=0;dt<qe;dt++)re[dt]=arguments[dt+2];Ae.children=re}return{$$typeof:r,type:B.type,key:Ie,ref:ye,props:Ae,_owner:Xe}},rt.createContext=function(B){return B={$$typeof:p,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},B.Provider={$$typeof:c,_context:B},B.Consumer=B},rt.createElement=D,rt.createFactory=function(B){var ne=D.bind(null,B);return ne.type=B,ne},rt.createRef=function(){return{current:null}},rt.forwardRef=function(B){return{$$typeof:y,render:B}},rt.isValidElement=U,rt.lazy=function(B){return{$$typeof:k,_payload:{_status:-1,_result:B},_init:ge}},rt.memo=function(B,ne){return{$$typeof:T,type:B,compare:ne===void 0?null:ne}},rt.startTransition=function(B){var ne=ee.transition;ee.transition={};try{B()}finally{ee.transition=ne}},rt.unstable_act=se,rt.useCallback=function(B,ne){return Ve.current.useCallback(B,ne)},rt.useContext=function(B){return Ve.current.useContext(B)},rt.useDebugValue=function(){},rt.useDeferredValue=function(B){return Ve.current.useDeferredValue(B)},rt.useEffect=function(B,ne){return Ve.current.useEffect(B,ne)},rt.useId=function(){return Ve.current.useId()},rt.useImperativeHandle=function(B,ne,Oe){return Ve.current.useImperativeHandle(B,ne,Oe)},rt.useInsertionEffect=function(B,ne){return Ve.current.useInsertionEffect(B,ne)},rt.useLayoutEffect=function(B,ne){return Ve.current.useLayoutEffect(B,ne)},rt.useMemo=function(B,ne){return Ve.current.useMemo(B,ne)},rt.useReducer=function(B,ne,Oe){return Ve.current.useReducer(B,ne,Oe)},rt.useRef=function(B){return Ve.current.useRef(B)},rt.useState=function(B){return Ve.current.useState(B)},rt.useSyncExternalStore=function(B,ne,Oe){return Ve.current.useSyncExternalStore(B,ne,Oe)},rt.useTransition=function(){return Ve.current.useTransition()},rt.version="18.3.1",rt}var Jg;function hp(){return Jg||(Jg=1,gf.exports=Sx()),gf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xg;function Px(){if(Xg)return pu;Xg=1;var r=hp(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function p(y,x,T){var k,C={},b=null,W=null;T!==void 0&&(b=""+T),x.key!==void 0&&(b=""+x.key),x.ref!==void 0&&(W=x.ref);for(k in x)o.call(x,k)&&!c.hasOwnProperty(k)&&(C[k]=x[k]);if(y&&y.defaultProps)for(k in x=y.defaultProps,x)C[k]===void 0&&(C[k]=x[k]);return{$$typeof:e,type:y,key:b,ref:W,props:C,_owner:a.current}}return pu.Fragment=t,pu.jsx=p,pu.jsxs=p,pu}var e_;function kx(){return e_||(e_=1,mf.exports=Px()),mf.exports}var _=kx(),le=hp();const Df=Qy(le);var Qc={},_f={exports:{}},rr={},yf={exports:{}},vf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t_;function Cx(){return t_||(t_=1,(function(r){function e(ee,Pe){var se=ee.length;ee.push(Pe);e:for(;0<se;){var B=se-1>>>1,ne=ee[B];if(0<a(ne,Pe))ee[B]=Pe,ee[se]=ne,se=B;else break e}}function t(ee){return ee.length===0?null:ee[0]}function o(ee){if(ee.length===0)return null;var Pe=ee[0],se=ee.pop();if(se!==Pe){ee[0]=se;e:for(var B=0,ne=ee.length,Oe=ne>>>1;B<Oe;){var Ae=2*(B+1)-1,Ie=ee[Ae],ye=Ae+1,Xe=ee[ye];if(0>a(Ie,se))ye<ne&&0>a(Xe,Ie)?(ee[B]=Xe,ee[ye]=se,B=ye):(ee[B]=Ie,ee[Ae]=se,B=Ae);else if(ye<ne&&0>a(Xe,se))ee[B]=Xe,ee[ye]=se,B=ye;else break e}}return Pe}function a(ee,Pe){var se=ee.sortIndex-Pe.sortIndex;return se!==0?se:ee.id-Pe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var p=Date,y=p.now();r.unstable_now=function(){return p.now()-y}}var x=[],T=[],k=1,C=null,b=3,W=!1,$=!1,Z=!1,J=typeof setTimeout=="function"?setTimeout:null,he=typeof clearTimeout=="function"?clearTimeout:null,me=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function xe(ee){for(var Pe=t(T);Pe!==null;){if(Pe.callback===null)o(T);else if(Pe.startTime<=ee)o(T),Pe.sortIndex=Pe.expirationTime,e(x,Pe);else break;Pe=t(T)}}function Le(ee){if(Z=!1,xe(ee),!$)if(t(x)!==null)$=!0,ge(Te);else{var Pe=t(T);Pe!==null&&Ve(Le,Pe.startTime-ee)}}function Te(ee,Pe){$=!1,Z&&(Z=!1,he(D),D=-1),W=!0;var se=b;try{for(xe(Pe),C=t(x);C!==null&&(!(C.expirationTime>Pe)||ee&&!R());){var B=C.callback;if(typeof B=="function"){C.callback=null,b=C.priorityLevel;var ne=B(C.expirationTime<=Pe);Pe=r.unstable_now(),typeof ne=="function"?C.callback=ne:C===t(x)&&o(x),xe(Pe)}else o(x);C=t(x)}if(C!==null)var Oe=!0;else{var Ae=t(T);Ae!==null&&Ve(Le,Ae.startTime-Pe),Oe=!1}return Oe}finally{C=null,b=se,W=!1}}var De=!1,F=null,D=-1,M=5,U=-1;function R(){return!(r.unstable_now()-U<M)}function O(){if(F!==null){var ee=r.unstable_now();U=ee;var Pe=!0;try{Pe=F(!0,ee)}finally{Pe?N():(De=!1,F=null)}}else De=!1}var N;if(typeof me=="function")N=function(){me(O)};else if(typeof MessageChannel<"u"){var be=new MessageChannel,Ke=be.port2;be.port1.onmessage=O,N=function(){Ke.postMessage(null)}}else N=function(){J(O,0)};function ge(ee){F=ee,De||(De=!0,N())}function Ve(ee,Pe){D=J(function(){ee(r.unstable_now())},Pe)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(ee){ee.callback=null},r.unstable_continueExecution=function(){$||W||($=!0,ge(Te))},r.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<ee?Math.floor(1e3/ee):5},r.unstable_getCurrentPriorityLevel=function(){return b},r.unstable_getFirstCallbackNode=function(){return t(x)},r.unstable_next=function(ee){switch(b){case 1:case 2:case 3:var Pe=3;break;default:Pe=b}var se=b;b=Pe;try{return ee()}finally{b=se}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(ee,Pe){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var se=b;b=ee;try{return Pe()}finally{b=se}},r.unstable_scheduleCallback=function(ee,Pe,se){var B=r.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?B+se:B):se=B,ee){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=se+ne,ee={id:k++,callback:Pe,priorityLevel:ee,startTime:se,expirationTime:ne,sortIndex:-1},se>B?(ee.sortIndex=se,e(T,ee),t(x)===null&&ee===t(T)&&(Z?(he(D),D=-1):Z=!0,Ve(Le,se-B))):(ee.sortIndex=ne,e(x,ee),$||W||($=!0,ge(Te))),ee},r.unstable_shouldYield=R,r.unstable_wrapCallback=function(ee){var Pe=b;return function(){var se=b;b=Pe;try{return ee.apply(this,arguments)}finally{b=se}}}})(vf)),vf}var n_;function Ax(){return n_||(n_=1,yf.exports=Cx()),yf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r_;function bx(){if(r_)return rr;r_=1;var r=hp(),e=Ax();function t(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,u=1;u<arguments.length;u++)s+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function c(n,s){p(n,s),p(n+"Capture",s)}function p(n,s){for(a[n]=s,n=0;n<s.length;n++)o.add(s[n])}var y=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),x=Object.prototype.hasOwnProperty,T=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,k={},C={};function b(n){return x.call(C,n)?!0:x.call(k,n)?!1:T.test(n)?C[n]=!0:(k[n]=!0,!1)}function W(n,s,u,f){if(u!==null&&u.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return f?!1:u!==null?!u.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function $(n,s,u,f){if(s===null||typeof s>"u"||W(n,s,u,f))return!0;if(f)return!1;if(u!==null)switch(u.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function Z(n,s,u,f,g,v,S){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=f,this.attributeNamespace=g,this.mustUseProperty=u,this.propertyName=n,this.type=s,this.sanitizeURL=v,this.removeEmptyString=S}var J={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){J[n]=new Z(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];J[s]=new Z(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){J[n]=new Z(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){J[n]=new Z(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){J[n]=new Z(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){J[n]=new Z(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){J[n]=new Z(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){J[n]=new Z(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){J[n]=new Z(n,5,!1,n.toLowerCase(),null,!1,!1)});var he=/[\-:]([a-z])/g;function me(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(he,me);J[s]=new Z(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(he,me);J[s]=new Z(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(he,me);J[s]=new Z(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){J[n]=new Z(n,1,!1,n.toLowerCase(),null,!1,!1)}),J.xlinkHref=new Z("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){J[n]=new Z(n,1,!1,n.toLowerCase(),null,!0,!0)});function xe(n,s,u,f){var g=J.hasOwnProperty(s)?J[s]:null;(g!==null?g.type!==0:f||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&($(s,u,g,f)&&(u=null),f||g===null?b(s)&&(u===null?n.removeAttribute(s):n.setAttribute(s,""+u)):g.mustUseProperty?n[g.propertyName]=u===null?g.type===3?!1:"":u:(s=g.attributeName,f=g.attributeNamespace,u===null?n.removeAttribute(s):(g=g.type,u=g===3||g===4&&u===!0?"":""+u,f?n.setAttributeNS(f,s,u):n.setAttribute(s,u))))}var Le=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Te=Symbol.for("react.element"),De=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),U=Symbol.for("react.provider"),R=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),be=Symbol.for("react.suspense_list"),Ke=Symbol.for("react.memo"),ge=Symbol.for("react.lazy"),Ve=Symbol.for("react.offscreen"),ee=Symbol.iterator;function Pe(n){return n===null||typeof n!="object"?null:(n=ee&&n[ee]||n["@@iterator"],typeof n=="function"?n:null)}var se=Object.assign,B;function ne(n){if(B===void 0)try{throw Error()}catch(u){var s=u.stack.trim().match(/\n( *(at )?)/);B=s&&s[1]||""}return`
`+B+n}var Oe=!1;function Ae(n,s){if(!n||Oe)return"";Oe=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(te){var f=te}Reflect.construct(n,[],s)}else{try{s.call()}catch(te){f=te}n.call(s.prototype)}else{try{throw Error()}catch(te){f=te}n()}}catch(te){if(te&&f&&typeof te.stack=="string"){for(var g=te.stack.split(`
`),v=f.stack.split(`
`),S=g.length-1,j=v.length-1;1<=S&&0<=j&&g[S]!==v[j];)j--;for(;1<=S&&0<=j;S--,j--)if(g[S]!==v[j]){if(S!==1||j!==1)do if(S--,j--,0>j||g[S]!==v[j]){var z=`
`+g[S].replace(" at new "," at ");return n.displayName&&z.includes("<anonymous>")&&(z=z.replace("<anonymous>",n.displayName)),z}while(1<=S&&0<=j);break}}}finally{Oe=!1,Error.prepareStackTrace=u}return(n=n?n.displayName||n.name:"")?ne(n):""}function Ie(n){switch(n.tag){case 5:return ne(n.type);case 16:return ne("Lazy");case 13:return ne("Suspense");case 19:return ne("SuspenseList");case 0:case 2:case 15:return n=Ae(n.type,!1),n;case 11:return n=Ae(n.type.render,!1),n;case 1:return n=Ae(n.type,!0),n;default:return""}}function ye(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case F:return"Fragment";case De:return"Portal";case M:return"Profiler";case D:return"StrictMode";case N:return"Suspense";case be:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case R:return(n.displayName||"Context")+".Consumer";case U:return(n._context.displayName||"Context")+".Provider";case O:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Ke:return s=n.displayName||null,s!==null?s:ye(n.type)||"Memo";case ge:s=n._payload,n=n._init;try{return ye(n(s))}catch{}}return null}function Xe(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ye(s);case 8:return s===D?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function re(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function qe(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function dt(n){var s=qe(n)?"checked":"value",u=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),f=""+n[s];if(!n.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,v=u.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return g.call(this)},set:function(S){f=""+S,v.call(this,S)}}),Object.defineProperty(n,s,{enumerable:u.enumerable}),{getValue:function(){return f},setValue:function(S){f=""+S},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function gn(n){n._valueTracker||(n._valueTracker=dt(n))}function jt(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var u=s.getValue(),f="";return n&&(f=qe(n)?n.checked?"true":"false":n.value),n=f,n!==u?(s.setValue(n),!0):!1}function Rn(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function di(n,s){var u=s.checked;return se({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??n._wrapperState.initialChecked})}function fi(n,s){var u=s.defaultValue==null?"":s.defaultValue,f=s.checked!=null?s.checked:s.defaultChecked;u=re(s.value!=null?s.value:u),n._wrapperState={initialChecked:f,initialValue:u,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Kr(n,s){s=s.checked,s!=null&&xe(n,"checked",s,!1)}function or(n,s){Kr(n,s);var u=re(s.value),f=s.type;if(u!=null)f==="number"?(u===0&&n.value===""||n.value!=u)&&(n.value=""+u):n.value!==""+u&&(n.value=""+u);else if(f==="submit"||f==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?kt(n,s.type,u):s.hasOwnProperty("defaultValue")&&kt(n,s.type,re(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function ar(n,s,u){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var f=s.type;if(!(f!=="submit"&&f!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,u||s===n.value||(n.value=s),n.defaultValue=s}u=n.name,u!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,u!==""&&(n.name=u)}function kt(n,s,u){(s!=="number"||Rn(n.ownerDocument)!==n)&&(u==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+u&&(n.defaultValue=""+u))}var Ct=Array.isArray;function Ln(n,s,u,f){if(n=n.options,s){s={};for(var g=0;g<u.length;g++)s["$"+u[g]]=!0;for(u=0;u<n.length;u++)g=s.hasOwnProperty("$"+n[u].value),n[u].selected!==g&&(n[u].selected=g),g&&f&&(n[u].defaultSelected=!0)}else{for(u=""+re(u),s=null,g=0;g<n.length;g++){if(n[g].value===u){n[g].selected=!0,f&&(n[g].defaultSelected=!0);return}s!==null||n[g].disabled||(s=n[g])}s!==null&&(s.selected=!0)}}function Ds(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return se({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Ms(n,s){var u=s.value;if(u==null){if(u=s.children,s=s.defaultValue,u!=null){if(s!=null)throw Error(t(92));if(Ct(u)){if(1<u.length)throw Error(t(93));u=u[0]}s=u}s==null&&(s=""),u=s}n._wrapperState={initialValue:re(u)}}function Ra(n,s){var u=re(s.value),f=re(s.defaultValue);u!=null&&(u=""+u,u!==n.value&&(n.value=u),s.defaultValue==null&&n.defaultValue!==u&&(n.defaultValue=u)),f!=null&&(n.defaultValue=""+f)}function pi(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function $i(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qi(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?$i(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Zr,La=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,u,f,g){MSApp.execUnsafeLocalFunction(function(){return n(s,u,f,g)})}:n})(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(Zr=Zr||document.createElement("div"),Zr.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Zr.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function mi(n,s){if(s){var u=n.firstChild;if(u&&u===n.lastChild&&u.nodeType===3){u.nodeValue=s;return}}n.textContent=s}var Qr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Da=["Webkit","ms","Moz","O"];Object.keys(Qr).forEach(function(n){Da.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),Qr[s]=Qr[n]})});function Yr(n,s,u){return s==null||typeof s=="boolean"||s===""?"":u||typeof s!="number"||s===0||Qr.hasOwnProperty(n)&&Qr[n]?(""+s).trim():s+"px"}function gi(n,s){n=n.style;for(var u in s)if(s.hasOwnProperty(u)){var f=u.indexOf("--")===0,g=Yr(u,s[u],f);u==="float"&&(u="cssFloat"),f?n.setProperty(u,g):n[u]=g}}var Os=se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function lr(n,s){if(s){if(Os[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function wr(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _i=null;function js(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var xr=null,Er=null,It=null;function Uo(n){if(n=ps(n)){if(typeof xr!="function")throw Error(t(280));var s=n.stateNode;s&&(s=Ya(s),xr(n.stateNode,n.type,s))}}function yi(n){Er?It?It.push(n):It=[n]:Er=n}function vi(){if(Er){var n=Er,s=It;if(It=Er=null,Uo(n),s)for(n=0;n<s.length;n++)Uo(s[n])}}function Ma(n,s){return n(s)}function Oa(){}var Tr=!1;function Vs(n,s,u){if(Tr)return n(s,u);Tr=!0;try{return Ma(n,s,u)}finally{Tr=!1,(Er!==null||It!==null)&&(Oa(),vi())}}function Gi(n,s){var u=n.stateNode;if(u===null)return null;var f=Ya(u);if(f===null)return null;u=f[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(n=n.type,f=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!f;break e;default:n=!1}if(n)return null;if(u&&typeof u!="function")throw Error(t(231,s,typeof u));return u}var wi=!1;if(y)try{var xi={};Object.defineProperty(xi,"passive",{get:function(){wi=!0}}),window.addEventListener("test",xi,xi),window.removeEventListener("test",xi,xi)}catch{wi=!1}function ja(n,s,u,f,g,v,S,j,z){var te=Array.prototype.slice.call(arguments,3);try{s.apply(u,te)}catch(ce){this.onError(ce)}}var Bt=!1,ke=null,Ki=!1,Dn=null,Bo={onError:function(n){Bt=!0,ke=n}};function Ho(n,s,u,f,g,v,S,j,z){Bt=!1,ke=null,ja.apply(Bo,arguments)}function Zi(n,s,u,f,g,v,S,j,z){if(Ho.apply(this,arguments),Bt){if(Bt){var te=ke;Bt=!1,ke=null}else throw Error(t(198));Ki||(Ki=!0,Dn=te)}}function qn(n){var s=n,u=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(u=s.return),n=s.return;while(n)}return s.tag===3?u:null}function Ir(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function Wo(n){if(qn(n)!==n)throw Error(t(188))}function Va(n){var s=n.alternate;if(!s){if(s=qn(n),s===null)throw Error(t(188));return s!==n?null:n}for(var u=n,f=s;;){var g=u.return;if(g===null)break;var v=g.alternate;if(v===null){if(f=g.return,f!==null){u=f;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===u)return Wo(g),n;if(v===f)return Wo(g),s;v=v.sibling}throw Error(t(188))}if(u.return!==f.return)u=g,f=v;else{for(var S=!1,j=g.child;j;){if(j===u){S=!0,u=g,f=v;break}if(j===f){S=!0,f=g,u=v;break}j=j.sibling}if(!S){for(j=v.child;j;){if(j===u){S=!0,u=v,f=g;break}if(j===f){S=!0,f=v,u=g;break}j=j.sibling}if(!S)throw Error(t(189))}}if(u.alternate!==f)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?n:s}function Fa(n){return n=Va(n),n!==null?Qi(n):null}function Qi(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=Qi(n);if(s!==null)return s;n=n.sibling}return null}var $o=e.unstable_scheduleCallback,Yi=e.unstable_cancelCallback,Ji=e.unstable_shouldYield,Gn=e.unstable_requestPaint,wt=e.unstable_now,Ul=e.unstable_getCurrentPriorityLevel,Fs=e.unstable_ImmediatePriority,qo=e.unstable_UserBlockingPriority,Xi=e.unstable_NormalPriority,es=e.unstable_LowPriority,Sr=e.unstable_IdlePriority,Ei=null,_n=null;function Ti(n){if(_n&&typeof _n.onCommitFiberRoot=="function")try{_n.onCommitFiberRoot(Ei,n,void 0,(n.current.flags&128)===128)}catch{}}var Ze=Math.clz32?Math.clz32:Kn,lt=Math.log,ln=Math.LN2;function Kn(n){return n>>>=0,n===0?32:31-(lt(n)/ln|0)|0}var un=64,Pr=4194304;function we(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function mt(n,s){var u=n.pendingLanes;if(u===0)return 0;var f=0,g=n.suspendedLanes,v=n.pingedLanes,S=u&268435455;if(S!==0){var j=S&~g;j!==0?f=we(j):(v&=S,v!==0&&(f=we(v)))}else S=u&~g,S!==0?f=we(S):v!==0&&(f=we(v));if(f===0)return 0;if(s!==0&&s!==f&&(s&g)===0&&(g=f&-f,v=s&-s,g>=v||g===16&&(v&4194240)!==0))return s;if((f&4)!==0&&(f|=u&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=f;0<s;)u=31-Ze(s),g=1<<u,f|=n[u],s&=~g;return f}function Jr(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kr(n,s){for(var u=n.suspendedLanes,f=n.pingedLanes,g=n.expirationTimes,v=n.pendingLanes;0<v;){var S=31-Ze(v),j=1<<S,z=g[S];z===-1?((j&u)===0||(j&f)!==0)&&(g[S]=Jr(j,s)):z<=s&&(n.expiredLanes|=j),v&=~j}}function tn(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Go(){var n=un;return un<<=1,(un&4194240)===0&&(un=64),n}function Ii(n){for(var s=[],u=0;31>u;u++)s.push(n);return s}function Mn(n,s,u){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-Ze(s),n[s]=u}function At(n,s){var u=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var f=n.eventTimes;for(n=n.expirationTimes;0<u;){var g=31-Ze(u),v=1<<g;s[g]=0,f[g]=-1,n[g]=-1,u&=~v}}function ur(n,s){var u=n.entangledLanes|=s;for(n=n.entanglements;u;){var f=31-Ze(u),g=1<<f;g&s|n[f]&s&&(n[f]|=s),u&=~g}}var tt=0;function yn(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var ts,Cr,ns,rs,Si,Zn=!1,Pi=[],On=null,cr=null,Vt=null,is=new Map,ze=new Map,bt=[],gt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Xr(n,s){switch(n){case"focusin":case"focusout":On=null;break;case"dragenter":case"dragleave":cr=null;break;case"mouseover":case"mouseout":Vt=null;break;case"pointerover":case"pointerout":is.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":ze.delete(s.pointerId)}}function jn(n,s,u,f,g,v){return n===null||n.nativeEvent!==v?(n={blockedOn:s,domEventName:u,eventSystemFlags:f,nativeEvent:v,targetContainers:[g]},s!==null&&(s=ps(s),s!==null&&Cr(s)),n):(n.eventSystemFlags|=f,s=n.targetContainers,g!==null&&s.indexOf(g)===-1&&s.push(g),n)}function zs(n,s,u,f,g){switch(s){case"focusin":return On=jn(On,n,s,u,f,g),!0;case"dragenter":return cr=jn(cr,n,s,u,f,g),!0;case"mouseover":return Vt=jn(Vt,n,s,u,f,g),!0;case"pointerover":var v=g.pointerId;return is.set(v,jn(is.get(v)||null,n,s,u,f,g)),!0;case"gotpointercapture":return v=g.pointerId,ze.set(v,jn(ze.get(v)||null,n,s,u,f,g)),!0}return!1}function ki(n){var s=fs(n.target);if(s!==null){var u=qn(s);if(u!==null){if(s=u.tag,s===13){if(s=Ir(u),s!==null){n.blockedOn=s,Si(n.priority,function(){ns(u)});return}}else if(s===3&&u.stateNode.current.memoizedState.isDehydrated){n.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}n.blockedOn=null}function at(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var u=as(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(u===null){u=n.nativeEvent;var f=new u.constructor(u.type,u);_i=f,u.target.dispatchEvent(f),_i=null}else return s=ps(u),s!==null&&Cr(s),n.blockedOn=u,!1;s.shift()}return!0}function Us(n,s,u){at(n)&&u.delete(s)}function ss(){Zn=!1,On!==null&&at(On)&&(On=null),cr!==null&&at(cr)&&(cr=null),Vt!==null&&at(Vt)&&(Vt=null),is.forEach(Us),ze.forEach(Us)}function xt(n,s){n.blockedOn===s&&(n.blockedOn=null,Zn||(Zn=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ss)))}function vn(n){function s(g){return xt(g,n)}if(0<Pi.length){xt(Pi[0],n);for(var u=1;u<Pi.length;u++){var f=Pi[u];f.blockedOn===n&&(f.blockedOn=null)}}for(On!==null&&xt(On,n),cr!==null&&xt(cr,n),Vt!==null&&xt(Vt,n),is.forEach(s),ze.forEach(s),u=0;u<bt.length;u++)f=bt[u],f.blockedOn===n&&(f.blockedOn=null);for(;0<bt.length&&(u=bt[0],u.blockedOn===null);)ki(u),u.blockedOn===null&&bt.shift()}var Ar=Le.ReactCurrentBatchConfig,br=!0;function Nr(n,s,u,f){var g=tt,v=Ar.transition;Ar.transition=null;try{tt=1,os(n,s,u,f)}finally{tt=g,Ar.transition=v}}function Ko(n,s,u,f){var g=tt,v=Ar.transition;Ar.transition=null;try{tt=4,os(n,s,u,f)}finally{tt=g,Ar.transition=v}}function os(n,s,u,f){if(br){var g=as(n,s,u,f);if(g===null)i(n,s,f,Rr,u),Xr(n,f);else if(zs(g,n,s,u,f))f.stopPropagation();else if(Xr(n,f),s&4&&-1<gt.indexOf(n)){for(;g!==null;){var v=ps(g);if(v!==null&&ts(v),v=as(n,s,u,f),v===null&&i(n,s,f,Rr,u),v===g)break;g=v}g!==null&&f.stopPropagation()}else i(n,s,f,null,u)}}var Rr=null;function as(n,s,u,f){if(Rr=null,n=js(f),n=fs(n),n!==null)if(s=qn(n),s===null)n=null;else if(u=s.tag,u===13){if(n=Ir(s),n!==null)return n;n=null}else if(u===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return Rr=n,null}function nt(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ul()){case Fs:return 1;case qo:return 4;case Xi:case es:return 16;case Sr:return 536870912;default:return 16}default:return 16}}var Vn=null,nn=null,Fn=null;function Zo(){if(Fn)return Fn;var n,s=nn,u=s.length,f,g="value"in Vn?Vn.value:Vn.textContent,v=g.length;for(n=0;n<u&&s[n]===g[n];n++);var S=u-n;for(f=1;f<=S&&s[u-f]===g[v-f];f++);return Fn=g.slice(n,1<f?1-f:void 0)}function ls(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Qn(){return!0}function Qo(){return!1}function Qt(n){function s(u,f,g,v,S){this._reactName=u,this._targetInst=g,this.type=f,this.nativeEvent=v,this.target=S,this.currentTarget=null;for(var j in n)n.hasOwnProperty(j)&&(u=n[j],this[j]=u?u(v):v[j]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Qn:Qo,this.isPropagationStopped=Qo,this}return se(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Qn)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Qn)},persist:function(){},isPersistent:Qn}),s}var Lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},us=Qt(Lr),Dr=se({},Lr,{view:0,detail:0}),Bs=Qt(Dr),cn,Hs,wn,xn=se({},Dr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:He,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==wn&&(wn&&n.type==="mousemove"?(cn=n.screenX-wn.screenX,Hs=n.screenY-wn.screenY):Hs=cn=0,wn=n),cn)},movementY:function(n){return"movementY"in n?n.movementY:Hs}}),Ws=Qt(xn),Yo=se({},xn,{dataTransfer:0}),$s=Qt(Yo),qs=se({},Dr,{relatedTarget:0}),Ht=Qt(qs),Jo=se({},Lr,{animationName:0,elapsedTime:0,pseudoElement:0}),za=Qt(Jo),Ci=se({},Lr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),h=Qt(Ci),w=se({},Lr,{data:0}),I=Qt(w),A={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},q={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Y={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pe(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=Y[n])?!!s[n]:!1}function He(){return pe}var ut=se({},Dr,{key:function(n){if(n.key){var s=A[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=ls(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?q[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:He,charCode:function(n){return n.type==="keypress"?ls(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ls(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),ft=Qt(ut),Rt=se({},xn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zn=Qt(Rt),hr=se({},Dr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:He}),Yn=Qt(hr),Mr=se({},Lr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Gs=Qt(Mr),Ks=se({},xn,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),id=Qt(Ks),dr=[9,13,27,32],Ai=y&&"CompositionEvent"in window,Xo=null;y&&"documentMode"in document&&(Xo=document.documentMode);var ei=y&&"TextEvent"in window&&!Xo,Xu=y&&(!Ai||Xo&&8<Xo&&11>=Xo),cs=" ",ec=!1;function Zs(n,s){switch(n){case"keyup":return dr.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bl(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ti=!1;function sd(n,s){switch(n){case"compositionend":return Bl(s);case"keypress":return s.which!==32?null:(ec=!0,cs);case"textInput":return n=s.data,n===cs&&ec?null:n;default:return null}}function bi(n,s){if(ti)return n==="compositionend"||!Ai&&Zs(n,s)?(n=Zo(),Fn=nn=Vn=null,ti=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Xu&&s.locale!=="ko"?null:s.data;default:return null}}var Ua={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tc(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!Ua[n.type]:s==="textarea"}function Ba(n,s,u,f){yi(f),s=d(s,"onChange"),0<s.length&&(u=new us("onChange","change",null,u,f),n.push({event:u,listeners:s}))}var ea=null,Un=null;function od(n){Yl(n,0)}function ni(n){var s=ms(n);if(jt(s))return n}function ad(n,s){if(n==="change")return s}var Or=!1;if(y){var Qs;if(y){var Ha="oninput"in document;if(!Ha){var Wa=document.createElement("div");Wa.setAttribute("oninput","return;"),Ha=typeof Wa.oninput=="function"}Qs=Ha}else Qs=!1;Or=Qs&&(!document.documentMode||9<document.documentMode)}function ta(){ea&&(ea.detachEvent("onpropertychange",$a),Un=ea=null)}function $a(n){if(n.propertyName==="value"&&ni(Un)){var s=[];Ba(s,Un,n,js(n)),Vs(od,s)}}function qa(n,s,u){n==="focusin"?(ta(),ea=s,Un=u,ea.attachEvent("onpropertychange",$a)):n==="focusout"&&ta()}function Ys(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return ni(Un)}function Ga(n,s){if(n==="click")return ni(s)}function Hl(n,s){if(n==="input"||n==="change")return ni(s)}function nc(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var fr=typeof Object.is=="function"?Object.is:nc;function Ni(n,s){if(fr(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var u=Object.keys(n),f=Object.keys(s);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var g=u[f];if(!x.call(s,g)||!fr(n[g],s[g]))return!1}return!0}function rc(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Wl(n,s){var u=rc(n);n=0;for(var f;u;){if(u.nodeType===3){if(f=n+u.textContent.length,n<=s&&f>=s)return{node:u,offset:s-n};n=f}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=rc(u)}}function ic(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?ic(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function $l(){for(var n=window,s=Rn();s instanceof n.HTMLIFrameElement;){try{var u=typeof s.contentWindow.location.href=="string"}catch{u=!1}if(u)n=s.contentWindow;else break;s=Rn(n.document)}return s}function ql(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function jr(n){var s=$l(),u=n.focusedElem,f=n.selectionRange;if(s!==u&&u&&u.ownerDocument&&ic(u.ownerDocument.documentElement,u)){if(f!==null&&ql(u)){if(s=f.start,n=f.end,n===void 0&&(n=s),"selectionStart"in u)u.selectionStart=s,u.selectionEnd=Math.min(n,u.value.length);else if(n=(s=u.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var g=u.textContent.length,v=Math.min(f.start,g);f=f.end===void 0?v:Math.min(f.end,g),!n.extend&&v>f&&(g=f,f=v,v=g),g=Wl(u,v);var S=Wl(u,f);g&&S&&(n.rangeCount!==1||n.anchorNode!==g.node||n.anchorOffset!==g.offset||n.focusNode!==S.node||n.focusOffset!==S.offset)&&(s=s.createRange(),s.setStart(g.node,g.offset),n.removeAllRanges(),v>f?(n.addRange(s),n.extend(S.node,S.offset)):(s.setEnd(S.node,S.offset),n.addRange(s)))}}for(s=[],n=u;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<s.length;u++)n=s[u],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Ka=y&&"documentMode"in document&&11>=document.documentMode,Js=null,Xs=null,na=null,Za=!1;function sc(n,s,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Za||Js==null||Js!==Rn(f)||(f=Js,"selectionStart"in f&&ql(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),na&&Ni(na,f)||(na=f,f=d(Xs,"onSelect"),0<f.length&&(s=new us("onSelect","select",null,s,u),n.push({event:s,listeners:f}),s.target=Js)))}function Ri(n,s){var u={};return u[n.toLowerCase()]=s.toLowerCase(),u["Webkit"+n]="webkit"+s,u["Moz"+n]="moz"+s,u}var eo={animationend:Ri("Animation","AnimationEnd"),animationiteration:Ri("Animation","AnimationIteration"),animationstart:Ri("Animation","AnimationStart"),transitionend:Ri("Transition","TransitionEnd")},Li={},Gl={};y&&(Gl=document.createElement("div").style,"AnimationEvent"in window||(delete eo.animationend.animation,delete eo.animationiteration.animation,delete eo.animationstart.animation),"TransitionEvent"in window||delete eo.transitionend.transition);function ra(n){if(Li[n])return Li[n];if(!eo[n])return n;var s=eo[n],u;for(u in s)if(s.hasOwnProperty(u)&&u in Gl)return Li[n]=s[u];return n}var oc=ra("animationend"),Vr=ra("animationiteration"),Kl=ra("animationstart"),Zl=ra("transitionend"),to=new Map,ac="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function pr(n,s){to.set(n,s),c(s,[n])}for(var hs=0;hs<ac.length;hs++){var Qa=ac[hs],lc=Qa.toLowerCase(),ld=Qa[0].toUpperCase()+Qa.slice(1);pr(lc,"on"+ld)}pr(oc,"onAnimationEnd"),pr(Vr,"onAnimationIteration"),pr(Kl,"onAnimationStart"),pr("dblclick","onDoubleClick"),pr("focusin","onFocus"),pr("focusout","onBlur"),pr(Zl,"onTransitionEnd"),p("onMouseEnter",["mouseout","mouseover"]),p("onMouseLeave",["mouseout","mouseover"]),p("onPointerEnter",["pointerout","pointerover"]),p("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var no="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uc=new Set("cancel close invalid load scroll toggle".split(" ").concat(no));function Ql(n,s,u){var f=n.type||"unknown-event";n.currentTarget=u,Zi(f,s,void 0,n),n.currentTarget=null}function Yl(n,s){s=(s&4)!==0;for(var u=0;u<n.length;u++){var f=n[u],g=f.event;f=f.listeners;e:{var v=void 0;if(s)for(var S=f.length-1;0<=S;S--){var j=f[S],z=j.instance,te=j.currentTarget;if(j=j.listener,z!==v&&g.isPropagationStopped())break e;Ql(g,j,te),v=z}else for(S=0;S<f.length;S++){if(j=f[S],z=j.instance,te=j.currentTarget,j=j.listener,z!==v&&g.isPropagationStopped())break e;Ql(g,j,te),v=z}}}if(Ki)throw n=Dn,Ki=!1,Dn=null,n}function vt(n,s){var u=s[oo];u===void 0&&(u=s[oo]=new Set);var f=n+"__bubble";u.has(f)||(cc(s,n,2,!1),u.add(f))}function Jl(n,s,u){var f=0;s&&(f|=4),cc(u,n,f,s)}var ia="_reactListening"+Math.random().toString(36).slice(2);function ro(n){if(!n[ia]){n[ia]=!0,o.forEach(function(u){u!=="selectionchange"&&(uc.has(u)||Jl(u,!1,n),Jl(u,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[ia]||(s[ia]=!0,Jl("selectionchange",!1,s))}}function cc(n,s,u,f){switch(nt(s)){case 1:var g=Nr;break;case 4:g=Ko;break;default:g=os}u=g.bind(null,s,u,n),g=void 0,!wi||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(g=!0),f?g!==void 0?n.addEventListener(s,u,{capture:!0,passive:g}):n.addEventListener(s,u,!0):g!==void 0?n.addEventListener(s,u,{passive:g}):n.addEventListener(s,u,!1)}function i(n,s,u,f,g){var v=f;if((s&1)===0&&(s&2)===0&&f!==null)e:for(;;){if(f===null)return;var S=f.tag;if(S===3||S===4){var j=f.stateNode.containerInfo;if(j===g||j.nodeType===8&&j.parentNode===g)break;if(S===4)for(S=f.return;S!==null;){var z=S.tag;if((z===3||z===4)&&(z=S.stateNode.containerInfo,z===g||z.nodeType===8&&z.parentNode===g))return;S=S.return}for(;j!==null;){if(S=fs(j),S===null)return;if(z=S.tag,z===5||z===6){f=v=S;continue e}j=j.parentNode}}f=f.return}Vs(function(){var te=v,ce=js(u),de=[];e:{var ue=to.get(n);if(ue!==void 0){var Ee=us,Ne=n;switch(n){case"keypress":if(ls(u)===0)break e;case"keydown":case"keyup":Ee=ft;break;case"focusin":Ne="focus",Ee=Ht;break;case"focusout":Ne="blur",Ee=Ht;break;case"beforeblur":case"afterblur":Ee=Ht;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ee=Ws;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ee=$s;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ee=Yn;break;case oc:case Vr:case Kl:Ee=za;break;case Zl:Ee=Gs;break;case"scroll":Ee=Bs;break;case"wheel":Ee=id;break;case"copy":case"cut":case"paste":Ee=h;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ee=zn}var Re=(s&4)!==0,Ft=!Re&&n==="scroll",K=Re?ue!==null?ue+"Capture":null:ue;Re=[];for(var H=te,Q;H!==null;){Q=H;var fe=Q.stateNode;if(Q.tag===5&&fe!==null&&(Q=fe,K!==null&&(fe=Gi(H,K),fe!=null&&Re.push(l(H,fe,Q)))),Ft)break;H=H.return}0<Re.length&&(ue=new Ee(ue,Ne,null,u,ce),de.push({event:ue,listeners:Re}))}}if((s&7)===0){e:{if(ue=n==="mouseover"||n==="pointerover",Ee=n==="mouseout"||n==="pointerout",ue&&u!==_i&&(Ne=u.relatedTarget||u.fromElement)&&(fs(Ne)||Ne[_t]))break e;if((Ee||ue)&&(ue=ce.window===ce?ce:(ue=ce.ownerDocument)?ue.defaultView||ue.parentWindow:window,Ee?(Ne=u.relatedTarget||u.toElement,Ee=te,Ne=Ne?fs(Ne):null,Ne!==null&&(Ft=qn(Ne),Ne!==Ft||Ne.tag!==5&&Ne.tag!==6)&&(Ne=null)):(Ee=null,Ne=te),Ee!==Ne)){if(Re=Ws,fe="onMouseLeave",K="onMouseEnter",H="mouse",(n==="pointerout"||n==="pointerover")&&(Re=zn,fe="onPointerLeave",K="onPointerEnter",H="pointer"),Ft=Ee==null?ue:ms(Ee),Q=Ne==null?ue:ms(Ne),ue=new Re(fe,H+"leave",Ee,u,ce),ue.target=Ft,ue.relatedTarget=Q,fe=null,fs(ce)===te&&(Re=new Re(K,H+"enter",Ne,u,ce),Re.target=Q,Re.relatedTarget=Ft,fe=Re),Ft=fe,Ee&&Ne)t:{for(Re=Ee,K=Ne,H=0,Q=Re;Q;Q=m(Q))H++;for(Q=0,fe=K;fe;fe=m(fe))Q++;for(;0<H-Q;)Re=m(Re),H--;for(;0<Q-H;)K=m(K),Q--;for(;H--;){if(Re===K||K!==null&&Re===K.alternate)break t;Re=m(Re),K=m(K)}Re=null}else Re=null;Ee!==null&&E(de,ue,Ee,Re,!1),Ne!==null&&Ft!==null&&E(de,Ft,Ne,Re,!0)}}e:{if(ue=te?ms(te):window,Ee=ue.nodeName&&ue.nodeName.toLowerCase(),Ee==="select"||Ee==="input"&&ue.type==="file")var Me=ad;else if(tc(ue))if(Or)Me=Hl;else{Me=Ys;var Ue=qa}else(Ee=ue.nodeName)&&Ee.toLowerCase()==="input"&&(ue.type==="checkbox"||ue.type==="radio")&&(Me=Ga);if(Me&&(Me=Me(n,te))){Ba(de,Me,u,ce);break e}Ue&&Ue(n,ue,te),n==="focusout"&&(Ue=ue._wrapperState)&&Ue.controlled&&ue.type==="number"&&kt(ue,"number",ue.value)}switch(Ue=te?ms(te):window,n){case"focusin":(tc(Ue)||Ue.contentEditable==="true")&&(Js=Ue,Xs=te,na=null);break;case"focusout":na=Xs=Js=null;break;case"mousedown":Za=!0;break;case"contextmenu":case"mouseup":case"dragend":Za=!1,sc(de,u,ce);break;case"selectionchange":if(Ka)break;case"keydown":case"keyup":sc(de,u,ce)}var Be;if(Ai)e:{switch(n){case"compositionstart":var Ge="onCompositionStart";break e;case"compositionend":Ge="onCompositionEnd";break e;case"compositionupdate":Ge="onCompositionUpdate";break e}Ge=void 0}else ti?Zs(n,u)&&(Ge="onCompositionEnd"):n==="keydown"&&u.keyCode===229&&(Ge="onCompositionStart");Ge&&(Xu&&u.locale!=="ko"&&(ti||Ge!=="onCompositionStart"?Ge==="onCompositionEnd"&&ti&&(Be=Zo()):(Vn=ce,nn="value"in Vn?Vn.value:Vn.textContent,ti=!0)),Ue=d(te,Ge),0<Ue.length&&(Ge=new I(Ge,n,null,u,ce),de.push({event:Ge,listeners:Ue}),Be?Ge.data=Be:(Be=Bl(u),Be!==null&&(Ge.data=Be)))),(Be=ei?sd(n,u):bi(n,u))&&(te=d(te,"onBeforeInput"),0<te.length&&(ce=new I("onBeforeInput","beforeinput",null,u,ce),de.push({event:ce,listeners:te}),ce.data=Be))}Yl(de,s)})}function l(n,s,u){return{instance:n,listener:s,currentTarget:u}}function d(n,s){for(var u=s+"Capture",f=[];n!==null;){var g=n,v=g.stateNode;g.tag===5&&v!==null&&(g=v,v=Gi(n,u),v!=null&&f.unshift(l(n,v,g)),v=Gi(n,s),v!=null&&f.push(l(n,v,g))),n=n.return}return f}function m(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function E(n,s,u,f,g){for(var v=s._reactName,S=[];u!==null&&u!==f;){var j=u,z=j.alternate,te=j.stateNode;if(z!==null&&z===f)break;j.tag===5&&te!==null&&(j=te,g?(z=Gi(u,v),z!=null&&S.unshift(l(u,z,j))):g||(z=Gi(u,v),z!=null&&S.push(l(u,z,j)))),u=u.return}S.length!==0&&n.push({event:s,listeners:S})}var P=/\r\n?/g,V=/\u0000|\uFFFD/g;function G(n){return(typeof n=="string"?n:""+n).replace(P,`
`).replace(V,"")}function X(n,s,u){if(s=G(s),G(n)!==s&&u)throw Error(t(425))}function ae(){}var ve=null,Fe=null;function et(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Yt=typeof setTimeout=="function"?setTimeout:void 0,Wt=typeof clearTimeout=="function"?clearTimeout:void 0,Bn=typeof Promise=="function"?Promise:void 0,En=typeof queueMicrotask=="function"?queueMicrotask:typeof Bn<"u"?function(n){return Bn.resolve(null).then(n).catch(io)}:Yt;function io(n){setTimeout(function(){throw n})}function Xl(n,s){var u=s,f=0;do{var g=u.nextSibling;if(n.removeChild(u),g&&g.nodeType===8)if(u=g.data,u==="/$"){if(f===0){n.removeChild(g),vn(s);return}f--}else u!=="$"&&u!=="$?"&&u!=="$!"||f++;u=g}while(u);vn(s)}function Di(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function hc(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var u=n.data;if(u==="$"||u==="$!"||u==="$?"){if(s===0)return n;s--}else u==="/$"&&s++}n=n.previousSibling}return null}var ds=Math.random().toString(36).slice(2),Fr="__reactFiber$"+ds,so="__reactProps$"+ds,_t="__reactContainer$"+ds,oo="__reactEvents$"+ds,ud="__reactListeners$"+ds,cd="__reactHandles$"+ds;function fs(n){var s=n[Fr];if(s)return s;for(var u=n.parentNode;u;){if(s=u[_t]||u[Fr]){if(u=s.alternate,s.child!==null||u!==null&&u.child!==null)for(n=hc(n);n!==null;){if(u=n[Fr])return u;n=hc(n)}return s}n=u,u=n.parentNode}return null}function ps(n){return n=n[Fr]||n[_t],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function ms(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function Ya(n){return n[so]||null}var hd=[],Ja=-1;function ao(n){return{current:n}}function St(n){0>Ja||(n.current=hd[Ja],hd[Ja]=null,Ja--)}function Et(n,s){Ja++,hd[Ja]=n.current,n.current=s}var lo={},Tn=ao(lo),Jn=ao(!1),sa=lo;function Xa(n,s){var u=n.type.contextTypes;if(!u)return lo;var f=n.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===s)return f.__reactInternalMemoizedMaskedChildContext;var g={},v;for(v in u)g[v]=s[v];return f&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=g),g}function Xn(n){return n=n.childContextTypes,n!=null}function dc(){St(Jn),St(Tn)}function vm(n,s,u){if(Tn.current!==lo)throw Error(t(168));Et(Tn,s),Et(Jn,u)}function wm(n,s,u){var f=n.stateNode;if(s=s.childContextTypes,typeof f.getChildContext!="function")return u;f=f.getChildContext();for(var g in f)if(!(g in s))throw Error(t(108,Xe(n)||"Unknown",g));return se({},u,f)}function fc(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||lo,sa=Tn.current,Et(Tn,n),Et(Jn,Jn.current),!0}function xm(n,s,u){var f=n.stateNode;if(!f)throw Error(t(169));u?(n=wm(n,s,sa),f.__reactInternalMemoizedMergedChildContext=n,St(Jn),St(Tn),Et(Tn,n)):St(Jn),Et(Jn,u)}var gs=null,pc=!1,dd=!1;function Em(n){gs===null?gs=[n]:gs.push(n)}function Ww(n){pc=!0,Em(n)}function uo(){if(!dd&&gs!==null){dd=!0;var n=0,s=tt;try{var u=gs;for(tt=1;n<u.length;n++){var f=u[n];do f=f(!0);while(f!==null)}gs=null,pc=!1}catch(g){throw gs!==null&&(gs=gs.slice(n+1)),$o(Fs,uo),g}finally{tt=s,dd=!1}}return null}var el=[],tl=0,mc=null,gc=0,zr=[],Ur=0,oa=null,_s=1,ys="";function aa(n,s){el[tl++]=gc,el[tl++]=mc,mc=n,gc=s}function Tm(n,s,u){zr[Ur++]=_s,zr[Ur++]=ys,zr[Ur++]=oa,oa=n;var f=_s;n=ys;var g=32-Ze(f)-1;f&=~(1<<g),u+=1;var v=32-Ze(s)+g;if(30<v){var S=g-g%5;v=(f&(1<<S)-1).toString(32),f>>=S,g-=S,_s=1<<32-Ze(s)+g|u<<g|f,ys=v+n}else _s=1<<v|u<<g|f,ys=n}function fd(n){n.return!==null&&(aa(n,1),Tm(n,1,0))}function pd(n){for(;n===mc;)mc=el[--tl],el[tl]=null,gc=el[--tl],el[tl]=null;for(;n===oa;)oa=zr[--Ur],zr[Ur]=null,ys=zr[--Ur],zr[Ur]=null,_s=zr[--Ur],zr[Ur]=null}var mr=null,gr=null,Nt=!1,ri=null;function Im(n,s){var u=$r(5,null,null,0);u.elementType="DELETED",u.stateNode=s,u.return=n,s=n.deletions,s===null?(n.deletions=[u],n.flags|=16):s.push(u)}function Sm(n,s){switch(n.tag){case 5:var u=n.type;return s=s.nodeType!==1||u.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,mr=n,gr=Di(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,mr=n,gr=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(u=oa!==null?{id:_s,overflow:ys}:null,n.memoizedState={dehydrated:s,treeContext:u,retryLane:1073741824},u=$r(18,null,null,0),u.stateNode=s,u.return=n,n.child=u,mr=n,gr=null,!0):!1;default:return!1}}function md(n){return(n.mode&1)!==0&&(n.flags&128)===0}function gd(n){if(Nt){var s=gr;if(s){var u=s;if(!Sm(n,s)){if(md(n))throw Error(t(418));s=Di(u.nextSibling);var f=mr;s&&Sm(n,s)?Im(f,u):(n.flags=n.flags&-4097|2,Nt=!1,mr=n)}}else{if(md(n))throw Error(t(418));n.flags=n.flags&-4097|2,Nt=!1,mr=n}}}function Pm(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;mr=n}function _c(n){if(n!==mr)return!1;if(!Nt)return Pm(n),Nt=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!et(n.type,n.memoizedProps)),s&&(s=gr)){if(md(n))throw km(),Error(t(418));for(;s;)Im(n,s),s=Di(s.nextSibling)}if(Pm(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var u=n.data;if(u==="/$"){if(s===0){gr=Di(n.nextSibling);break e}s--}else u!=="$"&&u!=="$!"&&u!=="$?"||s++}n=n.nextSibling}gr=null}}else gr=mr?Di(n.stateNode.nextSibling):null;return!0}function km(){for(var n=gr;n;)n=Di(n.nextSibling)}function nl(){gr=mr=null,Nt=!1}function _d(n){ri===null?ri=[n]:ri.push(n)}var $w=Le.ReactCurrentBatchConfig;function eu(n,s,u){if(n=u.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var f=u.stateNode}if(!f)throw Error(t(147,n));var g=f,v=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===v?s.ref:(s=function(S){var j=g.refs;S===null?delete j[v]:j[v]=S},s._stringRef=v,s)}if(typeof n!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,n))}return n}function yc(n,s){throw n=Object.prototype.toString.call(s),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function Cm(n){var s=n._init;return s(n._payload)}function Am(n){function s(K,H){if(n){var Q=K.deletions;Q===null?(K.deletions=[H],K.flags|=16):Q.push(H)}}function u(K,H){if(!n)return null;for(;H!==null;)s(K,H),H=H.sibling;return null}function f(K,H){for(K=new Map;H!==null;)H.key!==null?K.set(H.key,H):K.set(H.index,H),H=H.sibling;return K}function g(K,H){return K=yo(K,H),K.index=0,K.sibling=null,K}function v(K,H,Q){return K.index=Q,n?(Q=K.alternate,Q!==null?(Q=Q.index,Q<H?(K.flags|=2,H):Q):(K.flags|=2,H)):(K.flags|=1048576,H)}function S(K){return n&&K.alternate===null&&(K.flags|=2),K}function j(K,H,Q,fe){return H===null||H.tag!==6?(H=uf(Q,K.mode,fe),H.return=K,H):(H=g(H,Q),H.return=K,H)}function z(K,H,Q,fe){var Me=Q.type;return Me===F?ce(K,H,Q.props.children,fe,Q.key):H!==null&&(H.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===ge&&Cm(Me)===H.type)?(fe=g(H,Q.props),fe.ref=eu(K,H,Q),fe.return=K,fe):(fe=Bc(Q.type,Q.key,Q.props,null,K.mode,fe),fe.ref=eu(K,H,Q),fe.return=K,fe)}function te(K,H,Q,fe){return H===null||H.tag!==4||H.stateNode.containerInfo!==Q.containerInfo||H.stateNode.implementation!==Q.implementation?(H=cf(Q,K.mode,fe),H.return=K,H):(H=g(H,Q.children||[]),H.return=K,H)}function ce(K,H,Q,fe,Me){return H===null||H.tag!==7?(H=ma(Q,K.mode,fe,Me),H.return=K,H):(H=g(H,Q),H.return=K,H)}function de(K,H,Q){if(typeof H=="string"&&H!==""||typeof H=="number")return H=uf(""+H,K.mode,Q),H.return=K,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case Te:return Q=Bc(H.type,H.key,H.props,null,K.mode,Q),Q.ref=eu(K,null,H),Q.return=K,Q;case De:return H=cf(H,K.mode,Q),H.return=K,H;case ge:var fe=H._init;return de(K,fe(H._payload),Q)}if(Ct(H)||Pe(H))return H=ma(H,K.mode,Q,null),H.return=K,H;yc(K,H)}return null}function ue(K,H,Q,fe){var Me=H!==null?H.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number")return Me!==null?null:j(K,H,""+Q,fe);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case Te:return Q.key===Me?z(K,H,Q,fe):null;case De:return Q.key===Me?te(K,H,Q,fe):null;case ge:return Me=Q._init,ue(K,H,Me(Q._payload),fe)}if(Ct(Q)||Pe(Q))return Me!==null?null:ce(K,H,Q,fe,null);yc(K,Q)}return null}function Ee(K,H,Q,fe,Me){if(typeof fe=="string"&&fe!==""||typeof fe=="number")return K=K.get(Q)||null,j(H,K,""+fe,Me);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case Te:return K=K.get(fe.key===null?Q:fe.key)||null,z(H,K,fe,Me);case De:return K=K.get(fe.key===null?Q:fe.key)||null,te(H,K,fe,Me);case ge:var Ue=fe._init;return Ee(K,H,Q,Ue(fe._payload),Me)}if(Ct(fe)||Pe(fe))return K=K.get(Q)||null,ce(H,K,fe,Me,null);yc(H,fe)}return null}function Ne(K,H,Q,fe){for(var Me=null,Ue=null,Be=H,Ge=H=0,on=null;Be!==null&&Ge<Q.length;Ge++){Be.index>Ge?(on=Be,Be=null):on=Be.sibling;var pt=ue(K,Be,Q[Ge],fe);if(pt===null){Be===null&&(Be=on);break}n&&Be&&pt.alternate===null&&s(K,Be),H=v(pt,H,Ge),Ue===null?Me=pt:Ue.sibling=pt,Ue=pt,Be=on}if(Ge===Q.length)return u(K,Be),Nt&&aa(K,Ge),Me;if(Be===null){for(;Ge<Q.length;Ge++)Be=de(K,Q[Ge],fe),Be!==null&&(H=v(Be,H,Ge),Ue===null?Me=Be:Ue.sibling=Be,Ue=Be);return Nt&&aa(K,Ge),Me}for(Be=f(K,Be);Ge<Q.length;Ge++)on=Ee(Be,K,Ge,Q[Ge],fe),on!==null&&(n&&on.alternate!==null&&Be.delete(on.key===null?Ge:on.key),H=v(on,H,Ge),Ue===null?Me=on:Ue.sibling=on,Ue=on);return n&&Be.forEach(function(vo){return s(K,vo)}),Nt&&aa(K,Ge),Me}function Re(K,H,Q,fe){var Me=Pe(Q);if(typeof Me!="function")throw Error(t(150));if(Q=Me.call(Q),Q==null)throw Error(t(151));for(var Ue=Me=null,Be=H,Ge=H=0,on=null,pt=Q.next();Be!==null&&!pt.done;Ge++,pt=Q.next()){Be.index>Ge?(on=Be,Be=null):on=Be.sibling;var vo=ue(K,Be,pt.value,fe);if(vo===null){Be===null&&(Be=on);break}n&&Be&&vo.alternate===null&&s(K,Be),H=v(vo,H,Ge),Ue===null?Me=vo:Ue.sibling=vo,Ue=vo,Be=on}if(pt.done)return u(K,Be),Nt&&aa(K,Ge),Me;if(Be===null){for(;!pt.done;Ge++,pt=Q.next())pt=de(K,pt.value,fe),pt!==null&&(H=v(pt,H,Ge),Ue===null?Me=pt:Ue.sibling=pt,Ue=pt);return Nt&&aa(K,Ge),Me}for(Be=f(K,Be);!pt.done;Ge++,pt=Q.next())pt=Ee(Be,K,Ge,pt.value,fe),pt!==null&&(n&&pt.alternate!==null&&Be.delete(pt.key===null?Ge:pt.key),H=v(pt,H,Ge),Ue===null?Me=pt:Ue.sibling=pt,Ue=pt);return n&&Be.forEach(function(Ix){return s(K,Ix)}),Nt&&aa(K,Ge),Me}function Ft(K,H,Q,fe){if(typeof Q=="object"&&Q!==null&&Q.type===F&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case Te:e:{for(var Me=Q.key,Ue=H;Ue!==null;){if(Ue.key===Me){if(Me=Q.type,Me===F){if(Ue.tag===7){u(K,Ue.sibling),H=g(Ue,Q.props.children),H.return=K,K=H;break e}}else if(Ue.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===ge&&Cm(Me)===Ue.type){u(K,Ue.sibling),H=g(Ue,Q.props),H.ref=eu(K,Ue,Q),H.return=K,K=H;break e}u(K,Ue);break}else s(K,Ue);Ue=Ue.sibling}Q.type===F?(H=ma(Q.props.children,K.mode,fe,Q.key),H.return=K,K=H):(fe=Bc(Q.type,Q.key,Q.props,null,K.mode,fe),fe.ref=eu(K,H,Q),fe.return=K,K=fe)}return S(K);case De:e:{for(Ue=Q.key;H!==null;){if(H.key===Ue)if(H.tag===4&&H.stateNode.containerInfo===Q.containerInfo&&H.stateNode.implementation===Q.implementation){u(K,H.sibling),H=g(H,Q.children||[]),H.return=K,K=H;break e}else{u(K,H);break}else s(K,H);H=H.sibling}H=cf(Q,K.mode,fe),H.return=K,K=H}return S(K);case ge:return Ue=Q._init,Ft(K,H,Ue(Q._payload),fe)}if(Ct(Q))return Ne(K,H,Q,fe);if(Pe(Q))return Re(K,H,Q,fe);yc(K,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"?(Q=""+Q,H!==null&&H.tag===6?(u(K,H.sibling),H=g(H,Q),H.return=K,K=H):(u(K,H),H=uf(Q,K.mode,fe),H.return=K,K=H),S(K)):u(K,H)}return Ft}var rl=Am(!0),bm=Am(!1),vc=ao(null),wc=null,il=null,yd=null;function vd(){yd=il=wc=null}function wd(n){var s=vc.current;St(vc),n._currentValue=s}function xd(n,s,u){for(;n!==null;){var f=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,f!==null&&(f.childLanes|=s)):f!==null&&(f.childLanes&s)!==s&&(f.childLanes|=s),n===u)break;n=n.return}}function sl(n,s){wc=n,yd=il=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&s)!==0&&(er=!0),n.firstContext=null)}function Br(n){var s=n._currentValue;if(yd!==n)if(n={context:n,memoizedValue:s,next:null},il===null){if(wc===null)throw Error(t(308));il=n,wc.dependencies={lanes:0,firstContext:n}}else il=il.next=n;return s}var la=null;function Ed(n){la===null?la=[n]:la.push(n)}function Nm(n,s,u,f){var g=s.interleaved;return g===null?(u.next=u,Ed(s)):(u.next=g.next,g.next=u),s.interleaved=u,vs(n,f)}function vs(n,s){n.lanes|=s;var u=n.alternate;for(u!==null&&(u.lanes|=s),u=n,n=n.return;n!==null;)n.childLanes|=s,u=n.alternate,u!==null&&(u.childLanes|=s),u=n,n=n.return;return u.tag===3?u.stateNode:null}var co=!1;function Td(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rm(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function ws(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function ho(n,s,u){var f=n.updateQueue;if(f===null)return null;if(f=f.shared,(ht&2)!==0){var g=f.pending;return g===null?s.next=s:(s.next=g.next,g.next=s),f.pending=s,vs(n,u)}return g=f.interleaved,g===null?(s.next=s,Ed(f)):(s.next=g.next,g.next=s),f.interleaved=s,vs(n,u)}function xc(n,s,u){if(s=s.updateQueue,s!==null&&(s=s.shared,(u&4194240)!==0)){var f=s.lanes;f&=n.pendingLanes,u|=f,s.lanes=u,ur(n,u)}}function Lm(n,s){var u=n.updateQueue,f=n.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var g=null,v=null;if(u=u.firstBaseUpdate,u!==null){do{var S={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};v===null?g=v=S:v=v.next=S,u=u.next}while(u!==null);v===null?g=v=s:v=v.next=s}else g=v=s;u={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:f.shared,effects:f.effects},n.updateQueue=u;return}n=u.lastBaseUpdate,n===null?u.firstBaseUpdate=s:n.next=s,u.lastBaseUpdate=s}function Ec(n,s,u,f){var g=n.updateQueue;co=!1;var v=g.firstBaseUpdate,S=g.lastBaseUpdate,j=g.shared.pending;if(j!==null){g.shared.pending=null;var z=j,te=z.next;z.next=null,S===null?v=te:S.next=te,S=z;var ce=n.alternate;ce!==null&&(ce=ce.updateQueue,j=ce.lastBaseUpdate,j!==S&&(j===null?ce.firstBaseUpdate=te:j.next=te,ce.lastBaseUpdate=z))}if(v!==null){var de=g.baseState;S=0,ce=te=z=null,j=v;do{var ue=j.lane,Ee=j.eventTime;if((f&ue)===ue){ce!==null&&(ce=ce.next={eventTime:Ee,lane:0,tag:j.tag,payload:j.payload,callback:j.callback,next:null});e:{var Ne=n,Re=j;switch(ue=s,Ee=u,Re.tag){case 1:if(Ne=Re.payload,typeof Ne=="function"){de=Ne.call(Ee,de,ue);break e}de=Ne;break e;case 3:Ne.flags=Ne.flags&-65537|128;case 0:if(Ne=Re.payload,ue=typeof Ne=="function"?Ne.call(Ee,de,ue):Ne,ue==null)break e;de=se({},de,ue);break e;case 2:co=!0}}j.callback!==null&&j.lane!==0&&(n.flags|=64,ue=g.effects,ue===null?g.effects=[j]:ue.push(j))}else Ee={eventTime:Ee,lane:ue,tag:j.tag,payload:j.payload,callback:j.callback,next:null},ce===null?(te=ce=Ee,z=de):ce=ce.next=Ee,S|=ue;if(j=j.next,j===null){if(j=g.shared.pending,j===null)break;ue=j,j=ue.next,ue.next=null,g.lastBaseUpdate=ue,g.shared.pending=null}}while(!0);if(ce===null&&(z=de),g.baseState=z,g.firstBaseUpdate=te,g.lastBaseUpdate=ce,s=g.shared.interleaved,s!==null){g=s;do S|=g.lane,g=g.next;while(g!==s)}else v===null&&(g.shared.lanes=0);ha|=S,n.lanes=S,n.memoizedState=de}}function Dm(n,s,u){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var f=n[s],g=f.callback;if(g!==null){if(f.callback=null,f=u,typeof g!="function")throw Error(t(191,g));g.call(f)}}}var tu={},Mi=ao(tu),nu=ao(tu),ru=ao(tu);function ua(n){if(n===tu)throw Error(t(174));return n}function Id(n,s){switch(Et(ru,s),Et(nu,n),Et(Mi,tu),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:qi(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=qi(s,n)}St(Mi),Et(Mi,s)}function ol(){St(Mi),St(nu),St(ru)}function Mm(n){ua(ru.current);var s=ua(Mi.current),u=qi(s,n.type);s!==u&&(Et(nu,n),Et(Mi,u))}function Sd(n){nu.current===n&&(St(Mi),St(nu))}var Lt=ao(0);function Tc(n){for(var s=n;s!==null;){if(s.tag===13){var u=s.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Pd=[];function kd(){for(var n=0;n<Pd.length;n++)Pd[n]._workInProgressVersionPrimary=null;Pd.length=0}var Ic=Le.ReactCurrentDispatcher,Cd=Le.ReactCurrentBatchConfig,ca=0,Dt=null,Jt=null,rn=null,Sc=!1,iu=!1,su=0,qw=0;function In(){throw Error(t(321))}function Ad(n,s){if(s===null)return!1;for(var u=0;u<s.length&&u<n.length;u++)if(!fr(n[u],s[u]))return!1;return!0}function bd(n,s,u,f,g,v){if(ca=v,Dt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Ic.current=n===null||n.memoizedState===null?Qw:Yw,n=u(f,g),iu){v=0;do{if(iu=!1,su=0,25<=v)throw Error(t(301));v+=1,rn=Jt=null,s.updateQueue=null,Ic.current=Jw,n=u(f,g)}while(iu)}if(Ic.current=Cc,s=Jt!==null&&Jt.next!==null,ca=0,rn=Jt=Dt=null,Sc=!1,s)throw Error(t(300));return n}function Nd(){var n=su!==0;return su=0,n}function Oi(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rn===null?Dt.memoizedState=rn=n:rn=rn.next=n,rn}function Hr(){if(Jt===null){var n=Dt.alternate;n=n!==null?n.memoizedState:null}else n=Jt.next;var s=rn===null?Dt.memoizedState:rn.next;if(s!==null)rn=s,Jt=n;else{if(n===null)throw Error(t(310));Jt=n,n={memoizedState:Jt.memoizedState,baseState:Jt.baseState,baseQueue:Jt.baseQueue,queue:Jt.queue,next:null},rn===null?Dt.memoizedState=rn=n:rn=rn.next=n}return rn}function ou(n,s){return typeof s=="function"?s(n):s}function Rd(n){var s=Hr(),u=s.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=n;var f=Jt,g=f.baseQueue,v=u.pending;if(v!==null){if(g!==null){var S=g.next;g.next=v.next,v.next=S}f.baseQueue=g=v,u.pending=null}if(g!==null){v=g.next,f=f.baseState;var j=S=null,z=null,te=v;do{var ce=te.lane;if((ca&ce)===ce)z!==null&&(z=z.next={lane:0,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null}),f=te.hasEagerState?te.eagerState:n(f,te.action);else{var de={lane:ce,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null};z===null?(j=z=de,S=f):z=z.next=de,Dt.lanes|=ce,ha|=ce}te=te.next}while(te!==null&&te!==v);z===null?S=f:z.next=j,fr(f,s.memoizedState)||(er=!0),s.memoizedState=f,s.baseState=S,s.baseQueue=z,u.lastRenderedState=f}if(n=u.interleaved,n!==null){g=n;do v=g.lane,Dt.lanes|=v,ha|=v,g=g.next;while(g!==n)}else g===null&&(u.lanes=0);return[s.memoizedState,u.dispatch]}function Ld(n){var s=Hr(),u=s.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=n;var f=u.dispatch,g=u.pending,v=s.memoizedState;if(g!==null){u.pending=null;var S=g=g.next;do v=n(v,S.action),S=S.next;while(S!==g);fr(v,s.memoizedState)||(er=!0),s.memoizedState=v,s.baseQueue===null&&(s.baseState=v),u.lastRenderedState=v}return[v,f]}function Om(){}function jm(n,s){var u=Dt,f=Hr(),g=s(),v=!fr(f.memoizedState,g);if(v&&(f.memoizedState=g,er=!0),f=f.queue,Dd(zm.bind(null,u,f,n),[n]),f.getSnapshot!==s||v||rn!==null&&rn.memoizedState.tag&1){if(u.flags|=2048,au(9,Fm.bind(null,u,f,g,s),void 0,null),sn===null)throw Error(t(349));(ca&30)!==0||Vm(u,s,g)}return g}function Vm(n,s,u){n.flags|=16384,n={getSnapshot:s,value:u},s=Dt.updateQueue,s===null?(s={lastEffect:null,stores:null},Dt.updateQueue=s,s.stores=[n]):(u=s.stores,u===null?s.stores=[n]:u.push(n))}function Fm(n,s,u,f){s.value=u,s.getSnapshot=f,Um(s)&&Bm(n)}function zm(n,s,u){return u(function(){Um(s)&&Bm(n)})}function Um(n){var s=n.getSnapshot;n=n.value;try{var u=s();return!fr(n,u)}catch{return!0}}function Bm(n){var s=vs(n,1);s!==null&&ai(s,n,1,-1)}function Hm(n){var s=Oi();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ou,lastRenderedState:n},s.queue=n,n=n.dispatch=Zw.bind(null,Dt,n),[s.memoizedState,n]}function au(n,s,u,f){return n={tag:n,create:s,destroy:u,deps:f,next:null},s=Dt.updateQueue,s===null?(s={lastEffect:null,stores:null},Dt.updateQueue=s,s.lastEffect=n.next=n):(u=s.lastEffect,u===null?s.lastEffect=n.next=n:(f=u.next,u.next=n,n.next=f,s.lastEffect=n)),n}function Wm(){return Hr().memoizedState}function Pc(n,s,u,f){var g=Oi();Dt.flags|=n,g.memoizedState=au(1|s,u,void 0,f===void 0?null:f)}function kc(n,s,u,f){var g=Hr();f=f===void 0?null:f;var v=void 0;if(Jt!==null){var S=Jt.memoizedState;if(v=S.destroy,f!==null&&Ad(f,S.deps)){g.memoizedState=au(s,u,v,f);return}}Dt.flags|=n,g.memoizedState=au(1|s,u,v,f)}function $m(n,s){return Pc(8390656,8,n,s)}function Dd(n,s){return kc(2048,8,n,s)}function qm(n,s){return kc(4,2,n,s)}function Gm(n,s){return kc(4,4,n,s)}function Km(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Zm(n,s,u){return u=u!=null?u.concat([n]):null,kc(4,4,Km.bind(null,s,n),u)}function Md(){}function Qm(n,s){var u=Hr();s=s===void 0?null:s;var f=u.memoizedState;return f!==null&&s!==null&&Ad(s,f[1])?f[0]:(u.memoizedState=[n,s],n)}function Ym(n,s){var u=Hr();s=s===void 0?null:s;var f=u.memoizedState;return f!==null&&s!==null&&Ad(s,f[1])?f[0]:(n=n(),u.memoizedState=[n,s],n)}function Jm(n,s,u){return(ca&21)===0?(n.baseState&&(n.baseState=!1,er=!0),n.memoizedState=u):(fr(u,s)||(u=Go(),Dt.lanes|=u,ha|=u,n.baseState=!0),s)}function Gw(n,s){var u=tt;tt=u!==0&&4>u?u:4,n(!0);var f=Cd.transition;Cd.transition={};try{n(!1),s()}finally{tt=u,Cd.transition=f}}function Xm(){return Hr().memoizedState}function Kw(n,s,u){var f=go(n);if(u={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null},eg(n))tg(s,u);else if(u=Nm(n,s,u,f),u!==null){var g=Wn();ai(u,n,f,g),ng(u,s,f)}}function Zw(n,s,u){var f=go(n),g={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null};if(eg(n))tg(s,g);else{var v=n.alternate;if(n.lanes===0&&(v===null||v.lanes===0)&&(v=s.lastRenderedReducer,v!==null))try{var S=s.lastRenderedState,j=v(S,u);if(g.hasEagerState=!0,g.eagerState=j,fr(j,S)){var z=s.interleaved;z===null?(g.next=g,Ed(s)):(g.next=z.next,z.next=g),s.interleaved=g;return}}catch{}finally{}u=Nm(n,s,g,f),u!==null&&(g=Wn(),ai(u,n,f,g),ng(u,s,f))}}function eg(n){var s=n.alternate;return n===Dt||s!==null&&s===Dt}function tg(n,s){iu=Sc=!0;var u=n.pending;u===null?s.next=s:(s.next=u.next,u.next=s),n.pending=s}function ng(n,s,u){if((u&4194240)!==0){var f=s.lanes;f&=n.pendingLanes,u|=f,s.lanes=u,ur(n,u)}}var Cc={readContext:Br,useCallback:In,useContext:In,useEffect:In,useImperativeHandle:In,useInsertionEffect:In,useLayoutEffect:In,useMemo:In,useReducer:In,useRef:In,useState:In,useDebugValue:In,useDeferredValue:In,useTransition:In,useMutableSource:In,useSyncExternalStore:In,useId:In,unstable_isNewReconciler:!1},Qw={readContext:Br,useCallback:function(n,s){return Oi().memoizedState=[n,s===void 0?null:s],n},useContext:Br,useEffect:$m,useImperativeHandle:function(n,s,u){return u=u!=null?u.concat([n]):null,Pc(4194308,4,Km.bind(null,s,n),u)},useLayoutEffect:function(n,s){return Pc(4194308,4,n,s)},useInsertionEffect:function(n,s){return Pc(4,2,n,s)},useMemo:function(n,s){var u=Oi();return s=s===void 0?null:s,n=n(),u.memoizedState=[n,s],n},useReducer:function(n,s,u){var f=Oi();return s=u!==void 0?u(s):s,f.memoizedState=f.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},f.queue=n,n=n.dispatch=Kw.bind(null,Dt,n),[f.memoizedState,n]},useRef:function(n){var s=Oi();return n={current:n},s.memoizedState=n},useState:Hm,useDebugValue:Md,useDeferredValue:function(n){return Oi().memoizedState=n},useTransition:function(){var n=Hm(!1),s=n[0];return n=Gw.bind(null,n[1]),Oi().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,u){var f=Dt,g=Oi();if(Nt){if(u===void 0)throw Error(t(407));u=u()}else{if(u=s(),sn===null)throw Error(t(349));(ca&30)!==0||Vm(f,s,u)}g.memoizedState=u;var v={value:u,getSnapshot:s};return g.queue=v,$m(zm.bind(null,f,v,n),[n]),f.flags|=2048,au(9,Fm.bind(null,f,v,u,s),void 0,null),u},useId:function(){var n=Oi(),s=sn.identifierPrefix;if(Nt){var u=ys,f=_s;u=(f&~(1<<32-Ze(f)-1)).toString(32)+u,s=":"+s+"R"+u,u=su++,0<u&&(s+="H"+u.toString(32)),s+=":"}else u=qw++,s=":"+s+"r"+u.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},Yw={readContext:Br,useCallback:Qm,useContext:Br,useEffect:Dd,useImperativeHandle:Zm,useInsertionEffect:qm,useLayoutEffect:Gm,useMemo:Ym,useReducer:Rd,useRef:Wm,useState:function(){return Rd(ou)},useDebugValue:Md,useDeferredValue:function(n){var s=Hr();return Jm(s,Jt.memoizedState,n)},useTransition:function(){var n=Rd(ou)[0],s=Hr().memoizedState;return[n,s]},useMutableSource:Om,useSyncExternalStore:jm,useId:Xm,unstable_isNewReconciler:!1},Jw={readContext:Br,useCallback:Qm,useContext:Br,useEffect:Dd,useImperativeHandle:Zm,useInsertionEffect:qm,useLayoutEffect:Gm,useMemo:Ym,useReducer:Ld,useRef:Wm,useState:function(){return Ld(ou)},useDebugValue:Md,useDeferredValue:function(n){var s=Hr();return Jt===null?s.memoizedState=n:Jm(s,Jt.memoizedState,n)},useTransition:function(){var n=Ld(ou)[0],s=Hr().memoizedState;return[n,s]},useMutableSource:Om,useSyncExternalStore:jm,useId:Xm,unstable_isNewReconciler:!1};function ii(n,s){if(n&&n.defaultProps){s=se({},s),n=n.defaultProps;for(var u in n)s[u]===void 0&&(s[u]=n[u]);return s}return s}function Od(n,s,u,f){s=n.memoizedState,u=u(f,s),u=u==null?s:se({},s,u),n.memoizedState=u,n.lanes===0&&(n.updateQueue.baseState=u)}var Ac={isMounted:function(n){return(n=n._reactInternals)?qn(n)===n:!1},enqueueSetState:function(n,s,u){n=n._reactInternals;var f=Wn(),g=go(n),v=ws(f,g);v.payload=s,u!=null&&(v.callback=u),s=ho(n,v,g),s!==null&&(ai(s,n,g,f),xc(s,n,g))},enqueueReplaceState:function(n,s,u){n=n._reactInternals;var f=Wn(),g=go(n),v=ws(f,g);v.tag=1,v.payload=s,u!=null&&(v.callback=u),s=ho(n,v,g),s!==null&&(ai(s,n,g,f),xc(s,n,g))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var u=Wn(),f=go(n),g=ws(u,f);g.tag=2,s!=null&&(g.callback=s),s=ho(n,g,f),s!==null&&(ai(s,n,f,u),xc(s,n,f))}};function rg(n,s,u,f,g,v,S){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(f,v,S):s.prototype&&s.prototype.isPureReactComponent?!Ni(u,f)||!Ni(g,v):!0}function ig(n,s,u){var f=!1,g=lo,v=s.contextType;return typeof v=="object"&&v!==null?v=Br(v):(g=Xn(s)?sa:Tn.current,f=s.contextTypes,v=(f=f!=null)?Xa(n,g):lo),s=new s(u,v),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Ac,n.stateNode=s,s._reactInternals=n,f&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=g,n.__reactInternalMemoizedMaskedChildContext=v),s}function sg(n,s,u,f){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(u,f),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(u,f),s.state!==n&&Ac.enqueueReplaceState(s,s.state,null)}function jd(n,s,u,f){var g=n.stateNode;g.props=u,g.state=n.memoizedState,g.refs={},Td(n);var v=s.contextType;typeof v=="object"&&v!==null?g.context=Br(v):(v=Xn(s)?sa:Tn.current,g.context=Xa(n,v)),g.state=n.memoizedState,v=s.getDerivedStateFromProps,typeof v=="function"&&(Od(n,s,v,u),g.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(s=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),s!==g.state&&Ac.enqueueReplaceState(g,g.state,null),Ec(n,u,g,f),g.state=n.memoizedState),typeof g.componentDidMount=="function"&&(n.flags|=4194308)}function al(n,s){try{var u="",f=s;do u+=Ie(f),f=f.return;while(f);var g=u}catch(v){g=`
Error generating stack: `+v.message+`
`+v.stack}return{value:n,source:s,stack:g,digest:null}}function Vd(n,s,u){return{value:n,source:null,stack:u??null,digest:s??null}}function Fd(n,s){try{console.error(s.value)}catch(u){setTimeout(function(){throw u})}}var Xw=typeof WeakMap=="function"?WeakMap:Map;function og(n,s,u){u=ws(-1,u),u.tag=3,u.payload={element:null};var f=s.value;return u.callback=function(){Oc||(Oc=!0,ef=f),Fd(n,s)},u}function ag(n,s,u){u=ws(-1,u),u.tag=3;var f=n.type.getDerivedStateFromError;if(typeof f=="function"){var g=s.value;u.payload=function(){return f(g)},u.callback=function(){Fd(n,s)}}var v=n.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(u.callback=function(){Fd(n,s),typeof f!="function"&&(po===null?po=new Set([this]):po.add(this));var S=s.stack;this.componentDidCatch(s.value,{componentStack:S!==null?S:""})}),u}function lg(n,s,u){var f=n.pingCache;if(f===null){f=n.pingCache=new Xw;var g=new Set;f.set(s,g)}else g=f.get(s),g===void 0&&(g=new Set,f.set(s,g));g.has(u)||(g.add(u),n=fx.bind(null,n,s,u),s.then(n,n))}function ug(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function cg(n,s,u,f,g){return(n.mode&1)===0?(n===s?n.flags|=65536:(n.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(s=ws(-1,1),s.tag=2,ho(u,s,1))),u.lanes|=1),n):(n.flags|=65536,n.lanes=g,n)}var ex=Le.ReactCurrentOwner,er=!1;function Hn(n,s,u,f){s.child=n===null?bm(s,null,u,f):rl(s,n.child,u,f)}function hg(n,s,u,f,g){u=u.render;var v=s.ref;return sl(s,g),f=bd(n,s,u,f,v,g),u=Nd(),n!==null&&!er?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~g,xs(n,s,g)):(Nt&&u&&fd(s),s.flags|=1,Hn(n,s,f,g),s.child)}function dg(n,s,u,f,g){if(n===null){var v=u.type;return typeof v=="function"&&!lf(v)&&v.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(s.tag=15,s.type=v,fg(n,s,v,f,g)):(n=Bc(u.type,null,f,s,s.mode,g),n.ref=s.ref,n.return=s,s.child=n)}if(v=n.child,(n.lanes&g)===0){var S=v.memoizedProps;if(u=u.compare,u=u!==null?u:Ni,u(S,f)&&n.ref===s.ref)return xs(n,s,g)}return s.flags|=1,n=yo(v,f),n.ref=s.ref,n.return=s,s.child=n}function fg(n,s,u,f,g){if(n!==null){var v=n.memoizedProps;if(Ni(v,f)&&n.ref===s.ref)if(er=!1,s.pendingProps=f=v,(n.lanes&g)!==0)(n.flags&131072)!==0&&(er=!0);else return s.lanes=n.lanes,xs(n,s,g)}return zd(n,s,u,f,g)}function pg(n,s,u){var f=s.pendingProps,g=f.children,v=n!==null?n.memoizedState:null;if(f.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Et(ul,_r),_r|=u;else{if((u&1073741824)===0)return n=v!==null?v.baseLanes|u:u,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,Et(ul,_r),_r|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=v!==null?v.baseLanes:u,Et(ul,_r),_r|=f}else v!==null?(f=v.baseLanes|u,s.memoizedState=null):f=u,Et(ul,_r),_r|=f;return Hn(n,s,g,u),s.child}function mg(n,s){var u=s.ref;(n===null&&u!==null||n!==null&&n.ref!==u)&&(s.flags|=512,s.flags|=2097152)}function zd(n,s,u,f,g){var v=Xn(u)?sa:Tn.current;return v=Xa(s,v),sl(s,g),u=bd(n,s,u,f,v,g),f=Nd(),n!==null&&!er?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~g,xs(n,s,g)):(Nt&&f&&fd(s),s.flags|=1,Hn(n,s,u,g),s.child)}function gg(n,s,u,f,g){if(Xn(u)){var v=!0;fc(s)}else v=!1;if(sl(s,g),s.stateNode===null)Nc(n,s),ig(s,u,f),jd(s,u,f,g),f=!0;else if(n===null){var S=s.stateNode,j=s.memoizedProps;S.props=j;var z=S.context,te=u.contextType;typeof te=="object"&&te!==null?te=Br(te):(te=Xn(u)?sa:Tn.current,te=Xa(s,te));var ce=u.getDerivedStateFromProps,de=typeof ce=="function"||typeof S.getSnapshotBeforeUpdate=="function";de||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(j!==f||z!==te)&&sg(s,S,f,te),co=!1;var ue=s.memoizedState;S.state=ue,Ec(s,f,S,g),z=s.memoizedState,j!==f||ue!==z||Jn.current||co?(typeof ce=="function"&&(Od(s,u,ce,f),z=s.memoizedState),(j=co||rg(s,u,j,f,ue,z,te))?(de||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(s.flags|=4194308)):(typeof S.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=f,s.memoizedState=z),S.props=f,S.state=z,S.context=te,f=j):(typeof S.componentDidMount=="function"&&(s.flags|=4194308),f=!1)}else{S=s.stateNode,Rm(n,s),j=s.memoizedProps,te=s.type===s.elementType?j:ii(s.type,j),S.props=te,de=s.pendingProps,ue=S.context,z=u.contextType,typeof z=="object"&&z!==null?z=Br(z):(z=Xn(u)?sa:Tn.current,z=Xa(s,z));var Ee=u.getDerivedStateFromProps;(ce=typeof Ee=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(j!==de||ue!==z)&&sg(s,S,f,z),co=!1,ue=s.memoizedState,S.state=ue,Ec(s,f,S,g);var Ne=s.memoizedState;j!==de||ue!==Ne||Jn.current||co?(typeof Ee=="function"&&(Od(s,u,Ee,f),Ne=s.memoizedState),(te=co||rg(s,u,te,f,ue,Ne,z)||!1)?(ce||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(f,Ne,z),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(f,Ne,z)),typeof S.componentDidUpdate=="function"&&(s.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof S.componentDidUpdate!="function"||j===n.memoizedProps&&ue===n.memoizedState||(s.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||j===n.memoizedProps&&ue===n.memoizedState||(s.flags|=1024),s.memoizedProps=f,s.memoizedState=Ne),S.props=f,S.state=Ne,S.context=z,f=te):(typeof S.componentDidUpdate!="function"||j===n.memoizedProps&&ue===n.memoizedState||(s.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||j===n.memoizedProps&&ue===n.memoizedState||(s.flags|=1024),f=!1)}return Ud(n,s,u,f,v,g)}function Ud(n,s,u,f,g,v){mg(n,s);var S=(s.flags&128)!==0;if(!f&&!S)return g&&xm(s,u,!1),xs(n,s,v);f=s.stateNode,ex.current=s;var j=S&&typeof u.getDerivedStateFromError!="function"?null:f.render();return s.flags|=1,n!==null&&S?(s.child=rl(s,n.child,null,v),s.child=rl(s,null,j,v)):Hn(n,s,j,v),s.memoizedState=f.state,g&&xm(s,u,!0),s.child}function _g(n){var s=n.stateNode;s.pendingContext?vm(n,s.pendingContext,s.pendingContext!==s.context):s.context&&vm(n,s.context,!1),Id(n,s.containerInfo)}function yg(n,s,u,f,g){return nl(),_d(g),s.flags|=256,Hn(n,s,u,f),s.child}var Bd={dehydrated:null,treeContext:null,retryLane:0};function Hd(n){return{baseLanes:n,cachePool:null,transitions:null}}function vg(n,s,u){var f=s.pendingProps,g=Lt.current,v=!1,S=(s.flags&128)!==0,j;if((j=S)||(j=n!==null&&n.memoizedState===null?!1:(g&2)!==0),j?(v=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(g|=1),Et(Lt,g&1),n===null)return gd(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((s.mode&1)===0?s.lanes=1:n.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(S=f.children,n=f.fallback,v?(f=s.mode,v=s.child,S={mode:"hidden",children:S},(f&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=S):v=Hc(S,f,0,null),n=ma(n,f,u,null),v.return=s,n.return=s,v.sibling=n,s.child=v,s.child.memoizedState=Hd(u),s.memoizedState=Bd,n):Wd(s,S));if(g=n.memoizedState,g!==null&&(j=g.dehydrated,j!==null))return tx(n,s,S,f,j,g,u);if(v){v=f.fallback,S=s.mode,g=n.child,j=g.sibling;var z={mode:"hidden",children:f.children};return(S&1)===0&&s.child!==g?(f=s.child,f.childLanes=0,f.pendingProps=z,s.deletions=null):(f=yo(g,z),f.subtreeFlags=g.subtreeFlags&14680064),j!==null?v=yo(j,v):(v=ma(v,S,u,null),v.flags|=2),v.return=s,f.return=s,f.sibling=v,s.child=f,f=v,v=s.child,S=n.child.memoizedState,S=S===null?Hd(u):{baseLanes:S.baseLanes|u,cachePool:null,transitions:S.transitions},v.memoizedState=S,v.childLanes=n.childLanes&~u,s.memoizedState=Bd,f}return v=n.child,n=v.sibling,f=yo(v,{mode:"visible",children:f.children}),(s.mode&1)===0&&(f.lanes=u),f.return=s,f.sibling=null,n!==null&&(u=s.deletions,u===null?(s.deletions=[n],s.flags|=16):u.push(n)),s.child=f,s.memoizedState=null,f}function Wd(n,s){return s=Hc({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function bc(n,s,u,f){return f!==null&&_d(f),rl(s,n.child,null,u),n=Wd(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function tx(n,s,u,f,g,v,S){if(u)return s.flags&256?(s.flags&=-257,f=Vd(Error(t(422))),bc(n,s,S,f)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(v=f.fallback,g=s.mode,f=Hc({mode:"visible",children:f.children},g,0,null),v=ma(v,g,S,null),v.flags|=2,f.return=s,v.return=s,f.sibling=v,s.child=f,(s.mode&1)!==0&&rl(s,n.child,null,S),s.child.memoizedState=Hd(S),s.memoizedState=Bd,v);if((s.mode&1)===0)return bc(n,s,S,null);if(g.data==="$!"){if(f=g.nextSibling&&g.nextSibling.dataset,f)var j=f.dgst;return f=j,v=Error(t(419)),f=Vd(v,f,void 0),bc(n,s,S,f)}if(j=(S&n.childLanes)!==0,er||j){if(f=sn,f!==null){switch(S&-S){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(f.suspendedLanes|S))!==0?0:g,g!==0&&g!==v.retryLane&&(v.retryLane=g,vs(n,g),ai(f,n,g,-1))}return af(),f=Vd(Error(t(421))),bc(n,s,S,f)}return g.data==="$?"?(s.flags|=128,s.child=n.child,s=px.bind(null,n),g._reactRetry=s,null):(n=v.treeContext,gr=Di(g.nextSibling),mr=s,Nt=!0,ri=null,n!==null&&(zr[Ur++]=_s,zr[Ur++]=ys,zr[Ur++]=oa,_s=n.id,ys=n.overflow,oa=s),s=Wd(s,f.children),s.flags|=4096,s)}function wg(n,s,u){n.lanes|=s;var f=n.alternate;f!==null&&(f.lanes|=s),xd(n.return,s,u)}function $d(n,s,u,f,g){var v=n.memoizedState;v===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:g}:(v.isBackwards=s,v.rendering=null,v.renderingStartTime=0,v.last=f,v.tail=u,v.tailMode=g)}function xg(n,s,u){var f=s.pendingProps,g=f.revealOrder,v=f.tail;if(Hn(n,s,f.children,u),f=Lt.current,(f&2)!==0)f=f&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&wg(n,u,s);else if(n.tag===19)wg(n,u,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}f&=1}if(Et(Lt,f),(s.mode&1)===0)s.memoizedState=null;else switch(g){case"forwards":for(u=s.child,g=null;u!==null;)n=u.alternate,n!==null&&Tc(n)===null&&(g=u),u=u.sibling;u=g,u===null?(g=s.child,s.child=null):(g=u.sibling,u.sibling=null),$d(s,!1,g,u,v);break;case"backwards":for(u=null,g=s.child,s.child=null;g!==null;){if(n=g.alternate,n!==null&&Tc(n)===null){s.child=g;break}n=g.sibling,g.sibling=u,u=g,g=n}$d(s,!0,u,null,v);break;case"together":$d(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Nc(n,s){(s.mode&1)===0&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function xs(n,s,u){if(n!==null&&(s.dependencies=n.dependencies),ha|=s.lanes,(u&s.childLanes)===0)return null;if(n!==null&&s.child!==n.child)throw Error(t(153));if(s.child!==null){for(n=s.child,u=yo(n,n.pendingProps),s.child=u,u.return=s;n.sibling!==null;)n=n.sibling,u=u.sibling=yo(n,n.pendingProps),u.return=s;u.sibling=null}return s.child}function nx(n,s,u){switch(s.tag){case 3:_g(s),nl();break;case 5:Mm(s);break;case 1:Xn(s.type)&&fc(s);break;case 4:Id(s,s.stateNode.containerInfo);break;case 10:var f=s.type._context,g=s.memoizedProps.value;Et(vc,f._currentValue),f._currentValue=g;break;case 13:if(f=s.memoizedState,f!==null)return f.dehydrated!==null?(Et(Lt,Lt.current&1),s.flags|=128,null):(u&s.child.childLanes)!==0?vg(n,s,u):(Et(Lt,Lt.current&1),n=xs(n,s,u),n!==null?n.sibling:null);Et(Lt,Lt.current&1);break;case 19:if(f=(u&s.childLanes)!==0,(n.flags&128)!==0){if(f)return xg(n,s,u);s.flags|=128}if(g=s.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Et(Lt,Lt.current),f)break;return null;case 22:case 23:return s.lanes=0,pg(n,s,u)}return xs(n,s,u)}var Eg,qd,Tg,Ig;Eg=function(n,s){for(var u=s.child;u!==null;){if(u.tag===5||u.tag===6)n.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===s)break;for(;u.sibling===null;){if(u.return===null||u.return===s)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},qd=function(){},Tg=function(n,s,u,f){var g=n.memoizedProps;if(g!==f){n=s.stateNode,ua(Mi.current);var v=null;switch(u){case"input":g=di(n,g),f=di(n,f),v=[];break;case"select":g=se({},g,{value:void 0}),f=se({},f,{value:void 0}),v=[];break;case"textarea":g=Ds(n,g),f=Ds(n,f),v=[];break;default:typeof g.onClick!="function"&&typeof f.onClick=="function"&&(n.onclick=ae)}lr(u,f);var S;u=null;for(te in g)if(!f.hasOwnProperty(te)&&g.hasOwnProperty(te)&&g[te]!=null)if(te==="style"){var j=g[te];for(S in j)j.hasOwnProperty(S)&&(u||(u={}),u[S]="")}else te!=="dangerouslySetInnerHTML"&&te!=="children"&&te!=="suppressContentEditableWarning"&&te!=="suppressHydrationWarning"&&te!=="autoFocus"&&(a.hasOwnProperty(te)?v||(v=[]):(v=v||[]).push(te,null));for(te in f){var z=f[te];if(j=g!=null?g[te]:void 0,f.hasOwnProperty(te)&&z!==j&&(z!=null||j!=null))if(te==="style")if(j){for(S in j)!j.hasOwnProperty(S)||z&&z.hasOwnProperty(S)||(u||(u={}),u[S]="");for(S in z)z.hasOwnProperty(S)&&j[S]!==z[S]&&(u||(u={}),u[S]=z[S])}else u||(v||(v=[]),v.push(te,u)),u=z;else te==="dangerouslySetInnerHTML"?(z=z?z.__html:void 0,j=j?j.__html:void 0,z!=null&&j!==z&&(v=v||[]).push(te,z)):te==="children"?typeof z!="string"&&typeof z!="number"||(v=v||[]).push(te,""+z):te!=="suppressContentEditableWarning"&&te!=="suppressHydrationWarning"&&(a.hasOwnProperty(te)?(z!=null&&te==="onScroll"&&vt("scroll",n),v||j===z||(v=[])):(v=v||[]).push(te,z))}u&&(v=v||[]).push("style",u);var te=v;(s.updateQueue=te)&&(s.flags|=4)}},Ig=function(n,s,u,f){u!==f&&(s.flags|=4)};function lu(n,s){if(!Nt)switch(n.tailMode){case"hidden":s=n.tail;for(var u=null;s!==null;)s.alternate!==null&&(u=s),s=s.sibling;u===null?n.tail=null:u.sibling=null;break;case"collapsed":u=n.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:f.sibling=null}}function Sn(n){var s=n.alternate!==null&&n.alternate.child===n.child,u=0,f=0;if(s)for(var g=n.child;g!==null;)u|=g.lanes|g.childLanes,f|=g.subtreeFlags&14680064,f|=g.flags&14680064,g.return=n,g=g.sibling;else for(g=n.child;g!==null;)u|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=n,g=g.sibling;return n.subtreeFlags|=f,n.childLanes=u,s}function rx(n,s,u){var f=s.pendingProps;switch(pd(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Sn(s),null;case 1:return Xn(s.type)&&dc(),Sn(s),null;case 3:return f=s.stateNode,ol(),St(Jn),St(Tn),kd(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(n===null||n.child===null)&&(_c(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,ri!==null&&(rf(ri),ri=null))),qd(n,s),Sn(s),null;case 5:Sd(s);var g=ua(ru.current);if(u=s.type,n!==null&&s.stateNode!=null)Tg(n,s,u,f,g),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!f){if(s.stateNode===null)throw Error(t(166));return Sn(s),null}if(n=ua(Mi.current),_c(s)){f=s.stateNode,u=s.type;var v=s.memoizedProps;switch(f[Fr]=s,f[so]=v,n=(s.mode&1)!==0,u){case"dialog":vt("cancel",f),vt("close",f);break;case"iframe":case"object":case"embed":vt("load",f);break;case"video":case"audio":for(g=0;g<no.length;g++)vt(no[g],f);break;case"source":vt("error",f);break;case"img":case"image":case"link":vt("error",f),vt("load",f);break;case"details":vt("toggle",f);break;case"input":fi(f,v),vt("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!v.multiple},vt("invalid",f);break;case"textarea":Ms(f,v),vt("invalid",f)}lr(u,v),g=null;for(var S in v)if(v.hasOwnProperty(S)){var j=v[S];S==="children"?typeof j=="string"?f.textContent!==j&&(v.suppressHydrationWarning!==!0&&X(f.textContent,j,n),g=["children",j]):typeof j=="number"&&f.textContent!==""+j&&(v.suppressHydrationWarning!==!0&&X(f.textContent,j,n),g=["children",""+j]):a.hasOwnProperty(S)&&j!=null&&S==="onScroll"&&vt("scroll",f)}switch(u){case"input":gn(f),ar(f,v,!0);break;case"textarea":gn(f),pi(f);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(f.onclick=ae)}f=g,s.updateQueue=f,f!==null&&(s.flags|=4)}else{S=g.nodeType===9?g:g.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=$i(u)),n==="http://www.w3.org/1999/xhtml"?u==="script"?(n=S.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof f.is=="string"?n=S.createElement(u,{is:f.is}):(n=S.createElement(u),u==="select"&&(S=n,f.multiple?S.multiple=!0:f.size&&(S.size=f.size))):n=S.createElementNS(n,u),n[Fr]=s,n[so]=f,Eg(n,s,!1,!1),s.stateNode=n;e:{switch(S=wr(u,f),u){case"dialog":vt("cancel",n),vt("close",n),g=f;break;case"iframe":case"object":case"embed":vt("load",n),g=f;break;case"video":case"audio":for(g=0;g<no.length;g++)vt(no[g],n);g=f;break;case"source":vt("error",n),g=f;break;case"img":case"image":case"link":vt("error",n),vt("load",n),g=f;break;case"details":vt("toggle",n),g=f;break;case"input":fi(n,f),g=di(n,f),vt("invalid",n);break;case"option":g=f;break;case"select":n._wrapperState={wasMultiple:!!f.multiple},g=se({},f,{value:void 0}),vt("invalid",n);break;case"textarea":Ms(n,f),g=Ds(n,f),vt("invalid",n);break;default:g=f}lr(u,g),j=g;for(v in j)if(j.hasOwnProperty(v)){var z=j[v];v==="style"?gi(n,z):v==="dangerouslySetInnerHTML"?(z=z?z.__html:void 0,z!=null&&La(n,z)):v==="children"?typeof z=="string"?(u!=="textarea"||z!=="")&&mi(n,z):typeof z=="number"&&mi(n,""+z):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(a.hasOwnProperty(v)?z!=null&&v==="onScroll"&&vt("scroll",n):z!=null&&xe(n,v,z,S))}switch(u){case"input":gn(n),ar(n,f,!1);break;case"textarea":gn(n),pi(n);break;case"option":f.value!=null&&n.setAttribute("value",""+re(f.value));break;case"select":n.multiple=!!f.multiple,v=f.value,v!=null?Ln(n,!!f.multiple,v,!1):f.defaultValue!=null&&Ln(n,!!f.multiple,f.defaultValue,!0);break;default:typeof g.onClick=="function"&&(n.onclick=ae)}switch(u){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Sn(s),null;case 6:if(n&&s.stateNode!=null)Ig(n,s,n.memoizedProps,f);else{if(typeof f!="string"&&s.stateNode===null)throw Error(t(166));if(u=ua(ru.current),ua(Mi.current),_c(s)){if(f=s.stateNode,u=s.memoizedProps,f[Fr]=s,(v=f.nodeValue!==u)&&(n=mr,n!==null))switch(n.tag){case 3:X(f.nodeValue,u,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&X(f.nodeValue,u,(n.mode&1)!==0)}v&&(s.flags|=4)}else f=(u.nodeType===9?u:u.ownerDocument).createTextNode(f),f[Fr]=s,s.stateNode=f}return Sn(s),null;case 13:if(St(Lt),f=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Nt&&gr!==null&&(s.mode&1)!==0&&(s.flags&128)===0)km(),nl(),s.flags|=98560,v=!1;else if(v=_c(s),f!==null&&f.dehydrated!==null){if(n===null){if(!v)throw Error(t(318));if(v=s.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(t(317));v[Fr]=s}else nl(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Sn(s),v=!1}else ri!==null&&(rf(ri),ri=null),v=!0;if(!v)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=u,s):(f=f!==null,f!==(n!==null&&n.memoizedState!==null)&&f&&(s.child.flags|=8192,(s.mode&1)!==0&&(n===null||(Lt.current&1)!==0?Xt===0&&(Xt=3):af())),s.updateQueue!==null&&(s.flags|=4),Sn(s),null);case 4:return ol(),qd(n,s),n===null&&ro(s.stateNode.containerInfo),Sn(s),null;case 10:return wd(s.type._context),Sn(s),null;case 17:return Xn(s.type)&&dc(),Sn(s),null;case 19:if(St(Lt),v=s.memoizedState,v===null)return Sn(s),null;if(f=(s.flags&128)!==0,S=v.rendering,S===null)if(f)lu(v,!1);else{if(Xt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(S=Tc(n),S!==null){for(s.flags|=128,lu(v,!1),f=S.updateQueue,f!==null&&(s.updateQueue=f,s.flags|=4),s.subtreeFlags=0,f=u,u=s.child;u!==null;)v=u,n=f,v.flags&=14680066,S=v.alternate,S===null?(v.childLanes=0,v.lanes=n,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=S.childLanes,v.lanes=S.lanes,v.child=S.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=S.memoizedProps,v.memoizedState=S.memoizedState,v.updateQueue=S.updateQueue,v.type=S.type,n=S.dependencies,v.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),u=u.sibling;return Et(Lt,Lt.current&1|2),s.child}n=n.sibling}v.tail!==null&&wt()>cl&&(s.flags|=128,f=!0,lu(v,!1),s.lanes=4194304)}else{if(!f)if(n=Tc(S),n!==null){if(s.flags|=128,f=!0,u=n.updateQueue,u!==null&&(s.updateQueue=u,s.flags|=4),lu(v,!0),v.tail===null&&v.tailMode==="hidden"&&!S.alternate&&!Nt)return Sn(s),null}else 2*wt()-v.renderingStartTime>cl&&u!==1073741824&&(s.flags|=128,f=!0,lu(v,!1),s.lanes=4194304);v.isBackwards?(S.sibling=s.child,s.child=S):(u=v.last,u!==null?u.sibling=S:s.child=S,v.last=S)}return v.tail!==null?(s=v.tail,v.rendering=s,v.tail=s.sibling,v.renderingStartTime=wt(),s.sibling=null,u=Lt.current,Et(Lt,f?u&1|2:u&1),s):(Sn(s),null);case 22:case 23:return of(),f=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==f&&(s.flags|=8192),f&&(s.mode&1)!==0?(_r&1073741824)!==0&&(Sn(s),s.subtreeFlags&6&&(s.flags|=8192)):Sn(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function ix(n,s){switch(pd(s),s.tag){case 1:return Xn(s.type)&&dc(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return ol(),St(Jn),St(Tn),kd(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 5:return Sd(s),null;case 13:if(St(Lt),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(t(340));nl()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return St(Lt),null;case 4:return ol(),null;case 10:return wd(s.type._context),null;case 22:case 23:return of(),null;case 24:return null;default:return null}}var Rc=!1,Pn=!1,sx=typeof WeakSet=="function"?WeakSet:Set,Ce=null;function ll(n,s){var u=n.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(f){Ot(n,s,f)}else u.current=null}function Gd(n,s,u){try{u()}catch(f){Ot(n,s,f)}}var Sg=!1;function ox(n,s){if(ve=br,n=$l(),ql(n)){if("selectionStart"in n)var u={start:n.selectionStart,end:n.selectionEnd};else e:{u=(u=n.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var g=f.anchorOffset,v=f.focusNode;f=f.focusOffset;try{u.nodeType,v.nodeType}catch{u=null;break e}var S=0,j=-1,z=-1,te=0,ce=0,de=n,ue=null;t:for(;;){for(var Ee;de!==u||g!==0&&de.nodeType!==3||(j=S+g),de!==v||f!==0&&de.nodeType!==3||(z=S+f),de.nodeType===3&&(S+=de.nodeValue.length),(Ee=de.firstChild)!==null;)ue=de,de=Ee;for(;;){if(de===n)break t;if(ue===u&&++te===g&&(j=S),ue===v&&++ce===f&&(z=S),(Ee=de.nextSibling)!==null)break;de=ue,ue=de.parentNode}de=Ee}u=j===-1||z===-1?null:{start:j,end:z}}else u=null}u=u||{start:0,end:0}}else u=null;for(Fe={focusedElem:n,selectionRange:u},br=!1,Ce=s;Ce!==null;)if(s=Ce,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,Ce=n;else for(;Ce!==null;){s=Ce;try{var Ne=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(Ne!==null){var Re=Ne.memoizedProps,Ft=Ne.memoizedState,K=s.stateNode,H=K.getSnapshotBeforeUpdate(s.elementType===s.type?Re:ii(s.type,Re),Ft);K.__reactInternalSnapshotBeforeUpdate=H}break;case 3:var Q=s.stateNode.containerInfo;Q.nodeType===1?Q.textContent="":Q.nodeType===9&&Q.documentElement&&Q.removeChild(Q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(fe){Ot(s,s.return,fe)}if(n=s.sibling,n!==null){n.return=s.return,Ce=n;break}Ce=s.return}return Ne=Sg,Sg=!1,Ne}function uu(n,s,u){var f=s.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var g=f=f.next;do{if((g.tag&n)===n){var v=g.destroy;g.destroy=void 0,v!==void 0&&Gd(s,u,v)}g=g.next}while(g!==f)}}function Lc(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var u=s=s.next;do{if((u.tag&n)===n){var f=u.create;u.destroy=f()}u=u.next}while(u!==s)}}function Kd(n){var s=n.ref;if(s!==null){var u=n.stateNode;switch(n.tag){case 5:n=u;break;default:n=u}typeof s=="function"?s(n):s.current=n}}function Pg(n){var s=n.alternate;s!==null&&(n.alternate=null,Pg(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[Fr],delete s[so],delete s[oo],delete s[ud],delete s[cd])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function kg(n){return n.tag===5||n.tag===3||n.tag===4}function Cg(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||kg(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Zd(n,s,u){var f=n.tag;if(f===5||f===6)n=n.stateNode,s?u.nodeType===8?u.parentNode.insertBefore(n,s):u.insertBefore(n,s):(u.nodeType===8?(s=u.parentNode,s.insertBefore(n,u)):(s=u,s.appendChild(n)),u=u._reactRootContainer,u!=null||s.onclick!==null||(s.onclick=ae));else if(f!==4&&(n=n.child,n!==null))for(Zd(n,s,u),n=n.sibling;n!==null;)Zd(n,s,u),n=n.sibling}function Qd(n,s,u){var f=n.tag;if(f===5||f===6)n=n.stateNode,s?u.insertBefore(n,s):u.appendChild(n);else if(f!==4&&(n=n.child,n!==null))for(Qd(n,s,u),n=n.sibling;n!==null;)Qd(n,s,u),n=n.sibling}var hn=null,si=!1;function fo(n,s,u){for(u=u.child;u!==null;)Ag(n,s,u),u=u.sibling}function Ag(n,s,u){if(_n&&typeof _n.onCommitFiberUnmount=="function")try{_n.onCommitFiberUnmount(Ei,u)}catch{}switch(u.tag){case 5:Pn||ll(u,s);case 6:var f=hn,g=si;hn=null,fo(n,s,u),hn=f,si=g,hn!==null&&(si?(n=hn,u=u.stateNode,n.nodeType===8?n.parentNode.removeChild(u):n.removeChild(u)):hn.removeChild(u.stateNode));break;case 18:hn!==null&&(si?(n=hn,u=u.stateNode,n.nodeType===8?Xl(n.parentNode,u):n.nodeType===1&&Xl(n,u),vn(n)):Xl(hn,u.stateNode));break;case 4:f=hn,g=si,hn=u.stateNode.containerInfo,si=!0,fo(n,s,u),hn=f,si=g;break;case 0:case 11:case 14:case 15:if(!Pn&&(f=u.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){g=f=f.next;do{var v=g,S=v.destroy;v=v.tag,S!==void 0&&((v&2)!==0||(v&4)!==0)&&Gd(u,s,S),g=g.next}while(g!==f)}fo(n,s,u);break;case 1:if(!Pn&&(ll(u,s),f=u.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=u.memoizedProps,f.state=u.memoizedState,f.componentWillUnmount()}catch(j){Ot(u,s,j)}fo(n,s,u);break;case 21:fo(n,s,u);break;case 22:u.mode&1?(Pn=(f=Pn)||u.memoizedState!==null,fo(n,s,u),Pn=f):fo(n,s,u);break;default:fo(n,s,u)}}function bg(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var u=n.stateNode;u===null&&(u=n.stateNode=new sx),s.forEach(function(f){var g=mx.bind(null,n,f);u.has(f)||(u.add(f),f.then(g,g))})}}function oi(n,s){var u=s.deletions;if(u!==null)for(var f=0;f<u.length;f++){var g=u[f];try{var v=n,S=s,j=S;e:for(;j!==null;){switch(j.tag){case 5:hn=j.stateNode,si=!1;break e;case 3:hn=j.stateNode.containerInfo,si=!0;break e;case 4:hn=j.stateNode.containerInfo,si=!0;break e}j=j.return}if(hn===null)throw Error(t(160));Ag(v,S,g),hn=null,si=!1;var z=g.alternate;z!==null&&(z.return=null),g.return=null}catch(te){Ot(g,s,te)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Ng(s,n),s=s.sibling}function Ng(n,s){var u=n.alternate,f=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(oi(s,n),ji(n),f&4){try{uu(3,n,n.return),Lc(3,n)}catch(Re){Ot(n,n.return,Re)}try{uu(5,n,n.return)}catch(Re){Ot(n,n.return,Re)}}break;case 1:oi(s,n),ji(n),f&512&&u!==null&&ll(u,u.return);break;case 5:if(oi(s,n),ji(n),f&512&&u!==null&&ll(u,u.return),n.flags&32){var g=n.stateNode;try{mi(g,"")}catch(Re){Ot(n,n.return,Re)}}if(f&4&&(g=n.stateNode,g!=null)){var v=n.memoizedProps,S=u!==null?u.memoizedProps:v,j=n.type,z=n.updateQueue;if(n.updateQueue=null,z!==null)try{j==="input"&&v.type==="radio"&&v.name!=null&&Kr(g,v),wr(j,S);var te=wr(j,v);for(S=0;S<z.length;S+=2){var ce=z[S],de=z[S+1];ce==="style"?gi(g,de):ce==="dangerouslySetInnerHTML"?La(g,de):ce==="children"?mi(g,de):xe(g,ce,de,te)}switch(j){case"input":or(g,v);break;case"textarea":Ra(g,v);break;case"select":var ue=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!v.multiple;var Ee=v.value;Ee!=null?Ln(g,!!v.multiple,Ee,!1):ue!==!!v.multiple&&(v.defaultValue!=null?Ln(g,!!v.multiple,v.defaultValue,!0):Ln(g,!!v.multiple,v.multiple?[]:"",!1))}g[so]=v}catch(Re){Ot(n,n.return,Re)}}break;case 6:if(oi(s,n),ji(n),f&4){if(n.stateNode===null)throw Error(t(162));g=n.stateNode,v=n.memoizedProps;try{g.nodeValue=v}catch(Re){Ot(n,n.return,Re)}}break;case 3:if(oi(s,n),ji(n),f&4&&u!==null&&u.memoizedState.isDehydrated)try{vn(s.containerInfo)}catch(Re){Ot(n,n.return,Re)}break;case 4:oi(s,n),ji(n);break;case 13:oi(s,n),ji(n),g=n.child,g.flags&8192&&(v=g.memoizedState!==null,g.stateNode.isHidden=v,!v||g.alternate!==null&&g.alternate.memoizedState!==null||(Xd=wt())),f&4&&bg(n);break;case 22:if(ce=u!==null&&u.memoizedState!==null,n.mode&1?(Pn=(te=Pn)||ce,oi(s,n),Pn=te):oi(s,n),ji(n),f&8192){if(te=n.memoizedState!==null,(n.stateNode.isHidden=te)&&!ce&&(n.mode&1)!==0)for(Ce=n,ce=n.child;ce!==null;){for(de=Ce=ce;Ce!==null;){switch(ue=Ce,Ee=ue.child,ue.tag){case 0:case 11:case 14:case 15:uu(4,ue,ue.return);break;case 1:ll(ue,ue.return);var Ne=ue.stateNode;if(typeof Ne.componentWillUnmount=="function"){f=ue,u=ue.return;try{s=f,Ne.props=s.memoizedProps,Ne.state=s.memoizedState,Ne.componentWillUnmount()}catch(Re){Ot(f,u,Re)}}break;case 5:ll(ue,ue.return);break;case 22:if(ue.memoizedState!==null){Dg(de);continue}}Ee!==null?(Ee.return=ue,Ce=Ee):Dg(de)}ce=ce.sibling}e:for(ce=null,de=n;;){if(de.tag===5){if(ce===null){ce=de;try{g=de.stateNode,te?(v=g.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(j=de.stateNode,z=de.memoizedProps.style,S=z!=null&&z.hasOwnProperty("display")?z.display:null,j.style.display=Yr("display",S))}catch(Re){Ot(n,n.return,Re)}}}else if(de.tag===6){if(ce===null)try{de.stateNode.nodeValue=te?"":de.memoizedProps}catch(Re){Ot(n,n.return,Re)}}else if((de.tag!==22&&de.tag!==23||de.memoizedState===null||de===n)&&de.child!==null){de.child.return=de,de=de.child;continue}if(de===n)break e;for(;de.sibling===null;){if(de.return===null||de.return===n)break e;ce===de&&(ce=null),de=de.return}ce===de&&(ce=null),de.sibling.return=de.return,de=de.sibling}}break;case 19:oi(s,n),ji(n),f&4&&bg(n);break;case 21:break;default:oi(s,n),ji(n)}}function ji(n){var s=n.flags;if(s&2){try{e:{for(var u=n.return;u!==null;){if(kg(u)){var f=u;break e}u=u.return}throw Error(t(160))}switch(f.tag){case 5:var g=f.stateNode;f.flags&32&&(mi(g,""),f.flags&=-33);var v=Cg(n);Qd(n,v,g);break;case 3:case 4:var S=f.stateNode.containerInfo,j=Cg(n);Zd(n,j,S);break;default:throw Error(t(161))}}catch(z){Ot(n,n.return,z)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function ax(n,s,u){Ce=n,Rg(n)}function Rg(n,s,u){for(var f=(n.mode&1)!==0;Ce!==null;){var g=Ce,v=g.child;if(g.tag===22&&f){var S=g.memoizedState!==null||Rc;if(!S){var j=g.alternate,z=j!==null&&j.memoizedState!==null||Pn;j=Rc;var te=Pn;if(Rc=S,(Pn=z)&&!te)for(Ce=g;Ce!==null;)S=Ce,z=S.child,S.tag===22&&S.memoizedState!==null?Mg(g):z!==null?(z.return=S,Ce=z):Mg(g);for(;v!==null;)Ce=v,Rg(v),v=v.sibling;Ce=g,Rc=j,Pn=te}Lg(n)}else(g.subtreeFlags&8772)!==0&&v!==null?(v.return=g,Ce=v):Lg(n)}}function Lg(n){for(;Ce!==null;){var s=Ce;if((s.flags&8772)!==0){var u=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Pn||Lc(5,s);break;case 1:var f=s.stateNode;if(s.flags&4&&!Pn)if(u===null)f.componentDidMount();else{var g=s.elementType===s.type?u.memoizedProps:ii(s.type,u.memoizedProps);f.componentDidUpdate(g,u.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var v=s.updateQueue;v!==null&&Dm(s,v,f);break;case 3:var S=s.updateQueue;if(S!==null){if(u=null,s.child!==null)switch(s.child.tag){case 5:u=s.child.stateNode;break;case 1:u=s.child.stateNode}Dm(s,S,u)}break;case 5:var j=s.stateNode;if(u===null&&s.flags&4){u=j;var z=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":z.autoFocus&&u.focus();break;case"img":z.src&&(u.src=z.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var te=s.alternate;if(te!==null){var ce=te.memoizedState;if(ce!==null){var de=ce.dehydrated;de!==null&&vn(de)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Pn||s.flags&512&&Kd(s)}catch(ue){Ot(s,s.return,ue)}}if(s===n){Ce=null;break}if(u=s.sibling,u!==null){u.return=s.return,Ce=u;break}Ce=s.return}}function Dg(n){for(;Ce!==null;){var s=Ce;if(s===n){Ce=null;break}var u=s.sibling;if(u!==null){u.return=s.return,Ce=u;break}Ce=s.return}}function Mg(n){for(;Ce!==null;){var s=Ce;try{switch(s.tag){case 0:case 11:case 15:var u=s.return;try{Lc(4,s)}catch(z){Ot(s,u,z)}break;case 1:var f=s.stateNode;if(typeof f.componentDidMount=="function"){var g=s.return;try{f.componentDidMount()}catch(z){Ot(s,g,z)}}var v=s.return;try{Kd(s)}catch(z){Ot(s,v,z)}break;case 5:var S=s.return;try{Kd(s)}catch(z){Ot(s,S,z)}}}catch(z){Ot(s,s.return,z)}if(s===n){Ce=null;break}var j=s.sibling;if(j!==null){j.return=s.return,Ce=j;break}Ce=s.return}}var lx=Math.ceil,Dc=Le.ReactCurrentDispatcher,Yd=Le.ReactCurrentOwner,Wr=Le.ReactCurrentBatchConfig,ht=0,sn=null,$t=null,dn=0,_r=0,ul=ao(0),Xt=0,cu=null,ha=0,Mc=0,Jd=0,hu=null,tr=null,Xd=0,cl=1/0,Es=null,Oc=!1,ef=null,po=null,jc=!1,mo=null,Vc=0,du=0,tf=null,Fc=-1,zc=0;function Wn(){return(ht&6)!==0?wt():Fc!==-1?Fc:Fc=wt()}function go(n){return(n.mode&1)===0?1:(ht&2)!==0&&dn!==0?dn&-dn:$w.transition!==null?(zc===0&&(zc=Go()),zc):(n=tt,n!==0||(n=window.event,n=n===void 0?16:nt(n.type)),n)}function ai(n,s,u,f){if(50<du)throw du=0,tf=null,Error(t(185));Mn(n,u,f),((ht&2)===0||n!==sn)&&(n===sn&&((ht&2)===0&&(Mc|=u),Xt===4&&_o(n,dn)),nr(n,f),u===1&&ht===0&&(s.mode&1)===0&&(cl=wt()+500,pc&&uo()))}function nr(n,s){var u=n.callbackNode;kr(n,s);var f=mt(n,n===sn?dn:0);if(f===0)u!==null&&Yi(u),n.callbackNode=null,n.callbackPriority=0;else if(s=f&-f,n.callbackPriority!==s){if(u!=null&&Yi(u),s===1)n.tag===0?Ww(jg.bind(null,n)):Em(jg.bind(null,n)),En(function(){(ht&6)===0&&uo()}),u=null;else{switch(yn(f)){case 1:u=Fs;break;case 4:u=qo;break;case 16:u=Xi;break;case 536870912:u=Sr;break;default:u=Xi}u=$g(u,Og.bind(null,n))}n.callbackPriority=s,n.callbackNode=u}}function Og(n,s){if(Fc=-1,zc=0,(ht&6)!==0)throw Error(t(327));var u=n.callbackNode;if(hl()&&n.callbackNode!==u)return null;var f=mt(n,n===sn?dn:0);if(f===0)return null;if((f&30)!==0||(f&n.expiredLanes)!==0||s)s=Uc(n,f);else{s=f;var g=ht;ht|=2;var v=Fg();(sn!==n||dn!==s)&&(Es=null,cl=wt()+500,fa(n,s));do try{hx();break}catch(j){Vg(n,j)}while(!0);vd(),Dc.current=v,ht=g,$t!==null?s=0:(sn=null,dn=0,s=Xt)}if(s!==0){if(s===2&&(g=tn(n),g!==0&&(f=g,s=nf(n,g))),s===1)throw u=cu,fa(n,0),_o(n,f),nr(n,wt()),u;if(s===6)_o(n,f);else{if(g=n.current.alternate,(f&30)===0&&!ux(g)&&(s=Uc(n,f),s===2&&(v=tn(n),v!==0&&(f=v,s=nf(n,v))),s===1))throw u=cu,fa(n,0),_o(n,f),nr(n,wt()),u;switch(n.finishedWork=g,n.finishedLanes=f,s){case 0:case 1:throw Error(t(345));case 2:pa(n,tr,Es);break;case 3:if(_o(n,f),(f&130023424)===f&&(s=Xd+500-wt(),10<s)){if(mt(n,0)!==0)break;if(g=n.suspendedLanes,(g&f)!==f){Wn(),n.pingedLanes|=n.suspendedLanes&g;break}n.timeoutHandle=Yt(pa.bind(null,n,tr,Es),s);break}pa(n,tr,Es);break;case 4:if(_o(n,f),(f&4194240)===f)break;for(s=n.eventTimes,g=-1;0<f;){var S=31-Ze(f);v=1<<S,S=s[S],S>g&&(g=S),f&=~v}if(f=g,f=wt()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*lx(f/1960))-f,10<f){n.timeoutHandle=Yt(pa.bind(null,n,tr,Es),f);break}pa(n,tr,Es);break;case 5:pa(n,tr,Es);break;default:throw Error(t(329))}}}return nr(n,wt()),n.callbackNode===u?Og.bind(null,n):null}function nf(n,s){var u=hu;return n.current.memoizedState.isDehydrated&&(fa(n,s).flags|=256),n=Uc(n,s),n!==2&&(s=tr,tr=u,s!==null&&rf(s)),n}function rf(n){tr===null?tr=n:tr.push.apply(tr,n)}function ux(n){for(var s=n;;){if(s.flags&16384){var u=s.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var f=0;f<u.length;f++){var g=u[f],v=g.getSnapshot;g=g.value;try{if(!fr(v(),g))return!1}catch{return!1}}}if(u=s.child,s.subtreeFlags&16384&&u!==null)u.return=s,s=u;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function _o(n,s){for(s&=~Jd,s&=~Mc,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var u=31-Ze(s),f=1<<u;n[u]=-1,s&=~f}}function jg(n){if((ht&6)!==0)throw Error(t(327));hl();var s=mt(n,0);if((s&1)===0)return nr(n,wt()),null;var u=Uc(n,s);if(n.tag!==0&&u===2){var f=tn(n);f!==0&&(s=f,u=nf(n,f))}if(u===1)throw u=cu,fa(n,0),_o(n,s),nr(n,wt()),u;if(u===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,pa(n,tr,Es),nr(n,wt()),null}function sf(n,s){var u=ht;ht|=1;try{return n(s)}finally{ht=u,ht===0&&(cl=wt()+500,pc&&uo())}}function da(n){mo!==null&&mo.tag===0&&(ht&6)===0&&hl();var s=ht;ht|=1;var u=Wr.transition,f=tt;try{if(Wr.transition=null,tt=1,n)return n()}finally{tt=f,Wr.transition=u,ht=s,(ht&6)===0&&uo()}}function of(){_r=ul.current,St(ul)}function fa(n,s){n.finishedWork=null,n.finishedLanes=0;var u=n.timeoutHandle;if(u!==-1&&(n.timeoutHandle=-1,Wt(u)),$t!==null)for(u=$t.return;u!==null;){var f=u;switch(pd(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&dc();break;case 3:ol(),St(Jn),St(Tn),kd();break;case 5:Sd(f);break;case 4:ol();break;case 13:St(Lt);break;case 19:St(Lt);break;case 10:wd(f.type._context);break;case 22:case 23:of()}u=u.return}if(sn=n,$t=n=yo(n.current,null),dn=_r=s,Xt=0,cu=null,Jd=Mc=ha=0,tr=hu=null,la!==null){for(s=0;s<la.length;s++)if(u=la[s],f=u.interleaved,f!==null){u.interleaved=null;var g=f.next,v=u.pending;if(v!==null){var S=v.next;v.next=g,f.next=S}u.pending=f}la=null}return n}function Vg(n,s){do{var u=$t;try{if(vd(),Ic.current=Cc,Sc){for(var f=Dt.memoizedState;f!==null;){var g=f.queue;g!==null&&(g.pending=null),f=f.next}Sc=!1}if(ca=0,rn=Jt=Dt=null,iu=!1,su=0,Yd.current=null,u===null||u.return===null){Xt=1,cu=s,$t=null;break}e:{var v=n,S=u.return,j=u,z=s;if(s=dn,j.flags|=32768,z!==null&&typeof z=="object"&&typeof z.then=="function"){var te=z,ce=j,de=ce.tag;if((ce.mode&1)===0&&(de===0||de===11||de===15)){var ue=ce.alternate;ue?(ce.updateQueue=ue.updateQueue,ce.memoizedState=ue.memoizedState,ce.lanes=ue.lanes):(ce.updateQueue=null,ce.memoizedState=null)}var Ee=ug(S);if(Ee!==null){Ee.flags&=-257,cg(Ee,S,j,v,s),Ee.mode&1&&lg(v,te,s),s=Ee,z=te;var Ne=s.updateQueue;if(Ne===null){var Re=new Set;Re.add(z),s.updateQueue=Re}else Ne.add(z);break e}else{if((s&1)===0){lg(v,te,s),af();break e}z=Error(t(426))}}else if(Nt&&j.mode&1){var Ft=ug(S);if(Ft!==null){(Ft.flags&65536)===0&&(Ft.flags|=256),cg(Ft,S,j,v,s),_d(al(z,j));break e}}v=z=al(z,j),Xt!==4&&(Xt=2),hu===null?hu=[v]:hu.push(v),v=S;do{switch(v.tag){case 3:v.flags|=65536,s&=-s,v.lanes|=s;var K=og(v,z,s);Lm(v,K);break e;case 1:j=z;var H=v.type,Q=v.stateNode;if((v.flags&128)===0&&(typeof H.getDerivedStateFromError=="function"||Q!==null&&typeof Q.componentDidCatch=="function"&&(po===null||!po.has(Q)))){v.flags|=65536,s&=-s,v.lanes|=s;var fe=ag(v,j,s);Lm(v,fe);break e}}v=v.return}while(v!==null)}Ug(u)}catch(Me){s=Me,$t===u&&u!==null&&($t=u=u.return);continue}break}while(!0)}function Fg(){var n=Dc.current;return Dc.current=Cc,n===null?Cc:n}function af(){(Xt===0||Xt===3||Xt===2)&&(Xt=4),sn===null||(ha&268435455)===0&&(Mc&268435455)===0||_o(sn,dn)}function Uc(n,s){var u=ht;ht|=2;var f=Fg();(sn!==n||dn!==s)&&(Es=null,fa(n,s));do try{cx();break}catch(g){Vg(n,g)}while(!0);if(vd(),ht=u,Dc.current=f,$t!==null)throw Error(t(261));return sn=null,dn=0,Xt}function cx(){for(;$t!==null;)zg($t)}function hx(){for(;$t!==null&&!Ji();)zg($t)}function zg(n){var s=Wg(n.alternate,n,_r);n.memoizedProps=n.pendingProps,s===null?Ug(n):$t=s,Yd.current=null}function Ug(n){var s=n;do{var u=s.alternate;if(n=s.return,(s.flags&32768)===0){if(u=rx(u,s,_r),u!==null){$t=u;return}}else{if(u=ix(u,s),u!==null){u.flags&=32767,$t=u;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Xt=6,$t=null;return}}if(s=s.sibling,s!==null){$t=s;return}$t=s=n}while(s!==null);Xt===0&&(Xt=5)}function pa(n,s,u){var f=tt,g=Wr.transition;try{Wr.transition=null,tt=1,dx(n,s,u,f)}finally{Wr.transition=g,tt=f}return null}function dx(n,s,u,f){do hl();while(mo!==null);if((ht&6)!==0)throw Error(t(327));u=n.finishedWork;var g=n.finishedLanes;if(u===null)return null;if(n.finishedWork=null,n.finishedLanes=0,u===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var v=u.lanes|u.childLanes;if(At(n,v),n===sn&&($t=sn=null,dn=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||jc||(jc=!0,$g(Xi,function(){return hl(),null})),v=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||v){v=Wr.transition,Wr.transition=null;var S=tt;tt=1;var j=ht;ht|=4,Yd.current=null,ox(n,u),Ng(u,n),jr(Fe),br=!!ve,Fe=ve=null,n.current=u,ax(u),Gn(),ht=j,tt=S,Wr.transition=v}else n.current=u;if(jc&&(jc=!1,mo=n,Vc=g),v=n.pendingLanes,v===0&&(po=null),Ti(u.stateNode),nr(n,wt()),s!==null)for(f=n.onRecoverableError,u=0;u<s.length;u++)g=s[u],f(g.value,{componentStack:g.stack,digest:g.digest});if(Oc)throw Oc=!1,n=ef,ef=null,n;return(Vc&1)!==0&&n.tag!==0&&hl(),v=n.pendingLanes,(v&1)!==0?n===tf?du++:(du=0,tf=n):du=0,uo(),null}function hl(){if(mo!==null){var n=yn(Vc),s=Wr.transition,u=tt;try{if(Wr.transition=null,tt=16>n?16:n,mo===null)var f=!1;else{if(n=mo,mo=null,Vc=0,(ht&6)!==0)throw Error(t(331));var g=ht;for(ht|=4,Ce=n.current;Ce!==null;){var v=Ce,S=v.child;if((Ce.flags&16)!==0){var j=v.deletions;if(j!==null){for(var z=0;z<j.length;z++){var te=j[z];for(Ce=te;Ce!==null;){var ce=Ce;switch(ce.tag){case 0:case 11:case 15:uu(8,ce,v)}var de=ce.child;if(de!==null)de.return=ce,Ce=de;else for(;Ce!==null;){ce=Ce;var ue=ce.sibling,Ee=ce.return;if(Pg(ce),ce===te){Ce=null;break}if(ue!==null){ue.return=Ee,Ce=ue;break}Ce=Ee}}}var Ne=v.alternate;if(Ne!==null){var Re=Ne.child;if(Re!==null){Ne.child=null;do{var Ft=Re.sibling;Re.sibling=null,Re=Ft}while(Re!==null)}}Ce=v}}if((v.subtreeFlags&2064)!==0&&S!==null)S.return=v,Ce=S;else e:for(;Ce!==null;){if(v=Ce,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:uu(9,v,v.return)}var K=v.sibling;if(K!==null){K.return=v.return,Ce=K;break e}Ce=v.return}}var H=n.current;for(Ce=H;Ce!==null;){S=Ce;var Q=S.child;if((S.subtreeFlags&2064)!==0&&Q!==null)Q.return=S,Ce=Q;else e:for(S=H;Ce!==null;){if(j=Ce,(j.flags&2048)!==0)try{switch(j.tag){case 0:case 11:case 15:Lc(9,j)}}catch(Me){Ot(j,j.return,Me)}if(j===S){Ce=null;break e}var fe=j.sibling;if(fe!==null){fe.return=j.return,Ce=fe;break e}Ce=j.return}}if(ht=g,uo(),_n&&typeof _n.onPostCommitFiberRoot=="function")try{_n.onPostCommitFiberRoot(Ei,n)}catch{}f=!0}return f}finally{tt=u,Wr.transition=s}}return!1}function Bg(n,s,u){s=al(u,s),s=og(n,s,1),n=ho(n,s,1),s=Wn(),n!==null&&(Mn(n,1,s),nr(n,s))}function Ot(n,s,u){if(n.tag===3)Bg(n,n,u);else for(;s!==null;){if(s.tag===3){Bg(s,n,u);break}else if(s.tag===1){var f=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(po===null||!po.has(f))){n=al(u,n),n=ag(s,n,1),s=ho(s,n,1),n=Wn(),s!==null&&(Mn(s,1,n),nr(s,n));break}}s=s.return}}function fx(n,s,u){var f=n.pingCache;f!==null&&f.delete(s),s=Wn(),n.pingedLanes|=n.suspendedLanes&u,sn===n&&(dn&u)===u&&(Xt===4||Xt===3&&(dn&130023424)===dn&&500>wt()-Xd?fa(n,0):Jd|=u),nr(n,s)}function Hg(n,s){s===0&&((n.mode&1)===0?s=1:(s=Pr,Pr<<=1,(Pr&130023424)===0&&(Pr=4194304)));var u=Wn();n=vs(n,s),n!==null&&(Mn(n,s,u),nr(n,u))}function px(n){var s=n.memoizedState,u=0;s!==null&&(u=s.retryLane),Hg(n,u)}function mx(n,s){var u=0;switch(n.tag){case 13:var f=n.stateNode,g=n.memoizedState;g!==null&&(u=g.retryLane);break;case 19:f=n.stateNode;break;default:throw Error(t(314))}f!==null&&f.delete(s),Hg(n,u)}var Wg;Wg=function(n,s,u){if(n!==null)if(n.memoizedProps!==s.pendingProps||Jn.current)er=!0;else{if((n.lanes&u)===0&&(s.flags&128)===0)return er=!1,nx(n,s,u);er=(n.flags&131072)!==0}else er=!1,Nt&&(s.flags&1048576)!==0&&Tm(s,gc,s.index);switch(s.lanes=0,s.tag){case 2:var f=s.type;Nc(n,s),n=s.pendingProps;var g=Xa(s,Tn.current);sl(s,u),g=bd(null,s,f,n,g,u);var v=Nd();return s.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Xn(f)?(v=!0,fc(s)):v=!1,s.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,Td(s),g.updater=Ac,s.stateNode=g,g._reactInternals=s,jd(s,f,n,u),s=Ud(null,s,f,!0,v,u)):(s.tag=0,Nt&&v&&fd(s),Hn(null,s,g,u),s=s.child),s;case 16:f=s.elementType;e:{switch(Nc(n,s),n=s.pendingProps,g=f._init,f=g(f._payload),s.type=f,g=s.tag=_x(f),n=ii(f,n),g){case 0:s=zd(null,s,f,n,u);break e;case 1:s=gg(null,s,f,n,u);break e;case 11:s=hg(null,s,f,n,u);break e;case 14:s=dg(null,s,f,ii(f.type,n),u);break e}throw Error(t(306,f,""))}return s;case 0:return f=s.type,g=s.pendingProps,g=s.elementType===f?g:ii(f,g),zd(n,s,f,g,u);case 1:return f=s.type,g=s.pendingProps,g=s.elementType===f?g:ii(f,g),gg(n,s,f,g,u);case 3:e:{if(_g(s),n===null)throw Error(t(387));f=s.pendingProps,v=s.memoizedState,g=v.element,Rm(n,s),Ec(s,f,null,u);var S=s.memoizedState;if(f=S.element,v.isDehydrated)if(v={element:f,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},s.updateQueue.baseState=v,s.memoizedState=v,s.flags&256){g=al(Error(t(423)),s),s=yg(n,s,f,u,g);break e}else if(f!==g){g=al(Error(t(424)),s),s=yg(n,s,f,u,g);break e}else for(gr=Di(s.stateNode.containerInfo.firstChild),mr=s,Nt=!0,ri=null,u=bm(s,null,f,u),s.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(nl(),f===g){s=xs(n,s,u);break e}Hn(n,s,f,u)}s=s.child}return s;case 5:return Mm(s),n===null&&gd(s),f=s.type,g=s.pendingProps,v=n!==null?n.memoizedProps:null,S=g.children,et(f,g)?S=null:v!==null&&et(f,v)&&(s.flags|=32),mg(n,s),Hn(n,s,S,u),s.child;case 6:return n===null&&gd(s),null;case 13:return vg(n,s,u);case 4:return Id(s,s.stateNode.containerInfo),f=s.pendingProps,n===null?s.child=rl(s,null,f,u):Hn(n,s,f,u),s.child;case 11:return f=s.type,g=s.pendingProps,g=s.elementType===f?g:ii(f,g),hg(n,s,f,g,u);case 7:return Hn(n,s,s.pendingProps,u),s.child;case 8:return Hn(n,s,s.pendingProps.children,u),s.child;case 12:return Hn(n,s,s.pendingProps.children,u),s.child;case 10:e:{if(f=s.type._context,g=s.pendingProps,v=s.memoizedProps,S=g.value,Et(vc,f._currentValue),f._currentValue=S,v!==null)if(fr(v.value,S)){if(v.children===g.children&&!Jn.current){s=xs(n,s,u);break e}}else for(v=s.child,v!==null&&(v.return=s);v!==null;){var j=v.dependencies;if(j!==null){S=v.child;for(var z=j.firstContext;z!==null;){if(z.context===f){if(v.tag===1){z=ws(-1,u&-u),z.tag=2;var te=v.updateQueue;if(te!==null){te=te.shared;var ce=te.pending;ce===null?z.next=z:(z.next=ce.next,ce.next=z),te.pending=z}}v.lanes|=u,z=v.alternate,z!==null&&(z.lanes|=u),xd(v.return,u,s),j.lanes|=u;break}z=z.next}}else if(v.tag===10)S=v.type===s.type?null:v.child;else if(v.tag===18){if(S=v.return,S===null)throw Error(t(341));S.lanes|=u,j=S.alternate,j!==null&&(j.lanes|=u),xd(S,u,s),S=v.sibling}else S=v.child;if(S!==null)S.return=v;else for(S=v;S!==null;){if(S===s){S=null;break}if(v=S.sibling,v!==null){v.return=S.return,S=v;break}S=S.return}v=S}Hn(n,s,g.children,u),s=s.child}return s;case 9:return g=s.type,f=s.pendingProps.children,sl(s,u),g=Br(g),f=f(g),s.flags|=1,Hn(n,s,f,u),s.child;case 14:return f=s.type,g=ii(f,s.pendingProps),g=ii(f.type,g),dg(n,s,f,g,u);case 15:return fg(n,s,s.type,s.pendingProps,u);case 17:return f=s.type,g=s.pendingProps,g=s.elementType===f?g:ii(f,g),Nc(n,s),s.tag=1,Xn(f)?(n=!0,fc(s)):n=!1,sl(s,u),ig(s,f,g),jd(s,f,g,u),Ud(null,s,f,!0,n,u);case 19:return xg(n,s,u);case 22:return pg(n,s,u)}throw Error(t(156,s.tag))};function $g(n,s){return $o(n,s)}function gx(n,s,u,f){this.tag=n,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $r(n,s,u,f){return new gx(n,s,u,f)}function lf(n){return n=n.prototype,!(!n||!n.isReactComponent)}function _x(n){if(typeof n=="function")return lf(n)?1:0;if(n!=null){if(n=n.$$typeof,n===O)return 11;if(n===Ke)return 14}return 2}function yo(n,s){var u=n.alternate;return u===null?(u=$r(n.tag,s,n.key,n.mode),u.elementType=n.elementType,u.type=n.type,u.stateNode=n.stateNode,u.alternate=n,n.alternate=u):(u.pendingProps=s,u.type=n.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=n.flags&14680064,u.childLanes=n.childLanes,u.lanes=n.lanes,u.child=n.child,u.memoizedProps=n.memoizedProps,u.memoizedState=n.memoizedState,u.updateQueue=n.updateQueue,s=n.dependencies,u.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},u.sibling=n.sibling,u.index=n.index,u.ref=n.ref,u}function Bc(n,s,u,f,g,v){var S=2;if(f=n,typeof n=="function")lf(n)&&(S=1);else if(typeof n=="string")S=5;else e:switch(n){case F:return ma(u.children,g,v,s);case D:S=8,g|=8;break;case M:return n=$r(12,u,s,g|2),n.elementType=M,n.lanes=v,n;case N:return n=$r(13,u,s,g),n.elementType=N,n.lanes=v,n;case be:return n=$r(19,u,s,g),n.elementType=be,n.lanes=v,n;case Ve:return Hc(u,g,v,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case U:S=10;break e;case R:S=9;break e;case O:S=11;break e;case Ke:S=14;break e;case ge:S=16,f=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return s=$r(S,u,s,g),s.elementType=n,s.type=f,s.lanes=v,s}function ma(n,s,u,f){return n=$r(7,n,f,s),n.lanes=u,n}function Hc(n,s,u,f){return n=$r(22,n,f,s),n.elementType=Ve,n.lanes=u,n.stateNode={isHidden:!1},n}function uf(n,s,u){return n=$r(6,n,null,s),n.lanes=u,n}function cf(n,s,u){return s=$r(4,n.children!==null?n.children:[],n.key,s),s.lanes=u,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function yx(n,s,u,f,g){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ii(0),this.expirationTimes=Ii(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ii(0),this.identifierPrefix=f,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function hf(n,s,u,f,g,v,S,j,z){return n=new yx(n,s,u,j,z),s===1?(s=1,v===!0&&(s|=8)):s=0,v=$r(3,null,null,s),n.current=v,v.stateNode=n,v.memoizedState={element:f,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},Td(v),n}function vx(n,s,u){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:De,key:f==null?null:""+f,children:n,containerInfo:s,implementation:u}}function qg(n){if(!n)return lo;n=n._reactInternals;e:{if(qn(n)!==n||n.tag!==1)throw Error(t(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Xn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(n.tag===1){var u=n.type;if(Xn(u))return wm(n,u,s)}return s}function Gg(n,s,u,f,g,v,S,j,z){return n=hf(u,f,!0,n,g,v,S,j,z),n.context=qg(null),u=n.current,f=Wn(),g=go(u),v=ws(f,g),v.callback=s??null,ho(u,v,g),n.current.lanes=g,Mn(n,g,f),nr(n,f),n}function Wc(n,s,u,f){var g=s.current,v=Wn(),S=go(g);return u=qg(u),s.context===null?s.context=u:s.pendingContext=u,s=ws(v,S),s.payload={element:n},f=f===void 0?null:f,f!==null&&(s.callback=f),n=ho(g,s,S),n!==null&&(ai(n,g,S,v),xc(n,g,S)),S}function $c(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Kg(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var u=n.retryLane;n.retryLane=u!==0&&u<s?u:s}}function df(n,s){Kg(n,s),(n=n.alternate)&&Kg(n,s)}function wx(){return null}var Zg=typeof reportError=="function"?reportError:function(n){console.error(n)};function ff(n){this._internalRoot=n}qc.prototype.render=ff.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(t(409));Wc(n,s,null,null)},qc.prototype.unmount=ff.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;da(function(){Wc(null,n,null,null)}),s[_t]=null}};function qc(n){this._internalRoot=n}qc.prototype.unstable_scheduleHydration=function(n){if(n){var s=rs();n={blockedOn:null,target:n,priority:s};for(var u=0;u<bt.length&&s!==0&&s<bt[u].priority;u++);bt.splice(u,0,n),u===0&&ki(n)}};function pf(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Gc(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Qg(){}function xx(n,s,u,f,g){if(g){if(typeof f=="function"){var v=f;f=function(){var te=$c(S);v.call(te)}}var S=Gg(s,f,n,0,null,!1,!1,"",Qg);return n._reactRootContainer=S,n[_t]=S.current,ro(n.nodeType===8?n.parentNode:n),da(),S}for(;g=n.lastChild;)n.removeChild(g);if(typeof f=="function"){var j=f;f=function(){var te=$c(z);j.call(te)}}var z=hf(n,0,!1,null,null,!1,!1,"",Qg);return n._reactRootContainer=z,n[_t]=z.current,ro(n.nodeType===8?n.parentNode:n),da(function(){Wc(s,z,u,f)}),z}function Kc(n,s,u,f,g){var v=u._reactRootContainer;if(v){var S=v;if(typeof g=="function"){var j=g;g=function(){var z=$c(S);j.call(z)}}Wc(s,S,n,g)}else S=xx(u,s,n,g,f);return $c(S)}ts=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var u=we(s.pendingLanes);u!==0&&(ur(s,u|1),nr(s,wt()),(ht&6)===0&&(cl=wt()+500,uo()))}break;case 13:da(function(){var f=vs(n,1);if(f!==null){var g=Wn();ai(f,n,1,g)}}),df(n,1)}},Cr=function(n){if(n.tag===13){var s=vs(n,134217728);if(s!==null){var u=Wn();ai(s,n,134217728,u)}df(n,134217728)}},ns=function(n){if(n.tag===13){var s=go(n),u=vs(n,s);if(u!==null){var f=Wn();ai(u,n,s,f)}df(n,s)}},rs=function(){return tt},Si=function(n,s){var u=tt;try{return tt=n,s()}finally{tt=u}},xr=function(n,s,u){switch(s){case"input":if(or(n,u),s=u.name,u.type==="radio"&&s!=null){for(u=n;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<u.length;s++){var f=u[s];if(f!==n&&f.form===n.form){var g=Ya(f);if(!g)throw Error(t(90));jt(f),or(f,g)}}}break;case"textarea":Ra(n,u);break;case"select":s=u.value,s!=null&&Ln(n,!!u.multiple,s,!1)}},Ma=sf,Oa=da;var Ex={usingClientEntryPoint:!1,Events:[ps,ms,Ya,yi,vi,sf]},fu={findFiberByHostInstance:fs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Tx={bundleType:fu.bundleType,version:fu.version,rendererPackageName:fu.rendererPackageName,rendererConfig:fu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Le.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Fa(n),n===null?null:n.stateNode},findFiberByHostInstance:fu.findFiberByHostInstance||wx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zc.isDisabled&&Zc.supportsFiber)try{Ei=Zc.inject(Tx),_n=Zc}catch{}}return rr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ex,rr.createPortal=function(n,s){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pf(s))throw Error(t(200));return vx(n,s,null,u)},rr.createRoot=function(n,s){if(!pf(n))throw Error(t(299));var u=!1,f="",g=Zg;return s!=null&&(s.unstable_strictMode===!0&&(u=!0),s.identifierPrefix!==void 0&&(f=s.identifierPrefix),s.onRecoverableError!==void 0&&(g=s.onRecoverableError)),s=hf(n,1,!1,null,null,u,!1,f,g),n[_t]=s.current,ro(n.nodeType===8?n.parentNode:n),new ff(s)},rr.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Fa(s),n=n===null?null:n.stateNode,n},rr.flushSync=function(n){return da(n)},rr.hydrate=function(n,s,u){if(!Gc(s))throw Error(t(200));return Kc(null,n,s,!0,u)},rr.hydrateRoot=function(n,s,u){if(!pf(n))throw Error(t(405));var f=u!=null&&u.hydratedSources||null,g=!1,v="",S=Zg;if(u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(v=u.identifierPrefix),u.onRecoverableError!==void 0&&(S=u.onRecoverableError)),s=Gg(s,null,n,1,u??null,g,!1,v,S),n[_t]=s.current,ro(n),f)for(n=0;n<f.length;n++)u=f[n],g=u._getVersion,g=g(u._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[u,g]:s.mutableSourceEagerHydrationData.push(u,g);return new qc(s)},rr.render=function(n,s,u){if(!Gc(s))throw Error(t(200));return Kc(null,n,s,!1,u)},rr.unmountComponentAtNode=function(n){if(!Gc(n))throw Error(t(40));return n._reactRootContainer?(da(function(){Kc(null,null,n,!1,function(){n._reactRootContainer=null,n[_t]=null})}),!0):!1},rr.unstable_batchedUpdates=sf,rr.unstable_renderSubtreeIntoContainer=function(n,s,u,f){if(!Gc(u))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Kc(n,s,u,!1,f)},rr.version="18.3.1-next-f1338f8080-20240426",rr}var i_;function Yy(){if(i_)return _f.exports;i_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),_f.exports=bx(),_f.exports}var s_;function Nx(){if(s_)return Qc;s_=1;var r=Yy();return Qc.createRoot=r.createRoot,Qc.hydrateRoot=r.hydrateRoot,Qc}var Rx=Nx();const Lx=()=>{};var o_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jy=function(r){const e=[];let t=0;for(let o=0;o<r.length;o++){let a=r.charCodeAt(o);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&o+1<r.length&&(r.charCodeAt(o+1)&64512)===56320?(a=65536+((a&1023)<<10)+(r.charCodeAt(++o)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},Dx=function(r){const e=[];let t=0,o=0;for(;t<r.length;){const a=r[t++];if(a<128)e[o++]=String.fromCharCode(a);else if(a>191&&a<224){const c=r[t++];e[o++]=String.fromCharCode((a&31)<<6|c&63)}else if(a>239&&a<365){const c=r[t++],p=r[t++],y=r[t++],x=((a&7)<<18|(c&63)<<12|(p&63)<<6|y&63)-65536;e[o++]=String.fromCharCode(55296+(x>>10)),e[o++]=String.fromCharCode(56320+(x&1023))}else{const c=r[t++],p=r[t++];e[o++]=String.fromCharCode((a&15)<<12|(c&63)<<6|p&63)}}return e.join("")},Xy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let a=0;a<r.length;a+=3){const c=r[a],p=a+1<r.length,y=p?r[a+1]:0,x=a+2<r.length,T=x?r[a+2]:0,k=c>>2,C=(c&3)<<4|y>>4;let b=(y&15)<<2|T>>6,W=T&63;x||(W=64,p||(b=64)),o.push(t[k],t[C],t[b],t[W])}return o.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Jy(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):Dx(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let a=0;a<r.length;){const c=t[r.charAt(a++)],y=a<r.length?t[r.charAt(a)]:0;++a;const T=a<r.length?t[r.charAt(a)]:64;++a;const C=a<r.length?t[r.charAt(a)]:64;if(++a,c==null||y==null||T==null||C==null)throw new Mx;const b=c<<2|y>>4;if(o.push(b),T!==64){const W=y<<4&240|T>>2;if(o.push(W),C!==64){const $=T<<6&192|C;o.push($)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class Mx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ox=function(r){const e=Jy(r);return Xy.encodeByteArray(e,!0)},mh=function(r){return Ox(r).replace(/\./g,"")},ev=function(r){try{return Xy.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx=()=>jx().__FIREBASE_DEFAULTS__,Fx=()=>{if(typeof process>"u"||typeof o_>"u")return;const r=o_.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},zx=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&ev(r[1]);return e&&JSON.parse(e)},Mh=()=>{try{return Lx()||Vx()||Fx()||zx()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},tv=r=>{var e,t;return(t=(e=Mh())==null?void 0:e.emulatorHosts)==null?void 0:t[r]},Ux=r=>{const e=tv(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const o=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),o]:[e.substring(0,t),o]},nv=()=>{var r;return(r=Mh())==null?void 0:r.config},rv=r=>{var e;return(e=Mh())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,o)=>{t?this.reject(t):this.resolve(o),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,o))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rl(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function iv(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hx(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},o=e||"demo-project",a=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const p={iss:`https://securetoken.google.com/${o}`,aud:o,iat:a,exp:a+3600,auth_time:a,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...r};return[mh(JSON.stringify(t)),mh(JSON.stringify(p)),""].join(".")}const Tu={};function Wx(){const r={prod:[],emulator:[]};for(const e of Object.keys(Tu))Tu[e]?r.emulator.push(e):r.prod.push(e);return r}function $x(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let a_=!1;function sv(r,e){if(typeof window>"u"||typeof document>"u"||!Rl(window.location.host)||Tu[r]===e||Tu[r]||a_)return;Tu[r]=e;function t(b){return`__firebase__banner__${b}`}const o="__firebase__banner",c=Wx().prod.length>0;function p(){const b=document.getElementById(o);b&&b.remove()}function y(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function x(b,W){b.setAttribute("width","24"),b.setAttribute("id",W),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function T(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{a_=!0,p()},b}function k(b,W){b.setAttribute("id",W),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function C(){const b=$x(o),W=t("text"),$=document.getElementById(W)||document.createElement("span"),Z=t("learnmore"),J=document.getElementById(Z)||document.createElement("a"),he=t("preprendIcon"),me=document.getElementById(he)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const xe=b.element;y(xe),k(J,Z);const Le=T();x(me,he),xe.append(me,$,J,Le),document.body.appendChild(xe)}c?($.innerText="Preview backend disconnected.",me.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(me.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,$.innerText="Preview backend running in this workspace."),$.setAttribute("id",W)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",C):C()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Nn())}function Gx(){var e;const r=(e=Mh())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Kx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Zx(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function Qx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Yx(){const r=Nn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function Jx(){return!Gx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Xx(){try{return typeof indexedDB=="object"}catch{return!1}}function eE(){return new Promise((r,e)=>{try{let t=!0;const o="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(o);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(o),r(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var c;e(((c=a.error)==null?void 0:c.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE="FirebaseError";class Ls extends Error{constructor(e,t,o){super(t),this.code=e,this.customData=o,this.name=tE,Object.setPrototypeOf(this,Ls.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zu.prototype.create)}}class zu{constructor(e,t,o){this.service=e,this.serviceName=t,this.errors=o}create(e,...t){const o=t[0]||{},a=`${this.service}/${e}`,c=this.errors[e],p=c?nE(c,o):"Error",y=`${this.serviceName}: ${p} (${a}).`;return new Ls(a,y,o)}}function nE(r,e){return r.replace(rE,(t,o)=>{const a=e[o];return a!=null?String(a):`<${o}?>`})}const rE=/\{\$([^}]+)}/g;function iE(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function va(r,e){if(r===e)return!0;const t=Object.keys(r),o=Object.keys(e);for(const a of t){if(!o.includes(a))return!1;const c=r[a],p=e[a];if(l_(c)&&l_(p)){if(!va(c,p))return!1}else if(c!==p)return!1}for(const a of o)if(!t.includes(a))return!1;return!0}function l_(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uu(r){const e=[];for(const[t,o]of Object.entries(r))Array.isArray(o)?o.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(o));return e.length?"&"+e.join("&"):""}function gu(r){const e={};return r.replace(/^\?/,"").split("&").forEach(o=>{if(o){const[a,c]=o.split("=");e[decodeURIComponent(a)]=decodeURIComponent(c)}}),e}function _u(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function sE(r,e){const t=new oE(r,e);return t.subscribe.bind(t)}class oE{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(o=>{this.error(o)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,o){let a;if(e===void 0&&t===void 0&&o===void 0)throw new Error("Missing Observer.");aE(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:o},a.next===void 0&&(a.next=wf),a.error===void 0&&(a.error=wf),a.complete===void 0&&(a.complete=wf);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(o){typeof console<"u"&&console.error&&console.error(o)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function aE(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function wf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(r){return r&&r._delegate?r._delegate:r}class wa{constructor(e,t,o){this.name=e,this.instanceFactory=t,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ga="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const o=new Bx;if(this.instancesDeferred.set(t,o),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&o.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(o)return null;throw a}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(cE(e))try{this.getOrInitializeService({instanceIdentifier:ga})}catch{}for(const[t,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:a});o.resolve(c)}catch{}}}}clearInstance(e=ga){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ga){return this.instances.has(e)}getOptions(e=ga){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,o=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:o,options:t});for(const[c,p]of this.instancesDeferred.entries()){const y=this.normalizeInstanceIdentifier(c);o===y&&p.resolve(a)}return a}onInit(e,t){const o=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(o)??new Set;a.add(e),this.onInitCallbacks.set(o,a);const c=this.instances.get(o);return c&&e(c,o),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const o=this.onInitCallbacks.get(t);if(o)for(const a of o)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let o=this.instances.get(e);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:uE(e),options:t}),this.instances.set(e,o),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(o,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,o)}catch{}return o||null}normalizeInstanceIdentifier(e=ga){return this.component?this.component.multipleInstances?e:ga:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function uE(r){return r===ga?void 0:r}function cE(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new lE(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var it;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(it||(it={}));const dE={debug:it.DEBUG,verbose:it.VERBOSE,info:it.INFO,warn:it.WARN,error:it.ERROR,silent:it.SILENT},fE=it.INFO,pE={[it.DEBUG]:"log",[it.VERBOSE]:"log",[it.INFO]:"info",[it.WARN]:"warn",[it.ERROR]:"error"},mE=(r,e,...t)=>{if(e<r.logLevel)return;const o=new Date().toISOString(),a=pE[e];if(a)console[a](`[${o}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class dp{constructor(e){this.name=e,this._logLevel=fE,this._logHandler=mE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in it))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?dE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,it.DEBUG,...e),this._logHandler(this,it.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,it.VERBOSE,...e),this._logHandler(this,it.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,it.INFO,...e),this._logHandler(this,it.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,it.WARN,...e),this._logHandler(this,it.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,it.ERROR,...e),this._logHandler(this,it.ERROR,...e)}}const gE=(r,e)=>e.some(t=>r instanceof t);let u_,c_;function _E(){return u_||(u_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yE(){return c_||(c_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ov=new WeakMap,Mf=new WeakMap,av=new WeakMap,xf=new WeakMap,fp=new WeakMap;function vE(r){const e=new Promise((t,o)=>{const a=()=>{r.removeEventListener("success",c),r.removeEventListener("error",p)},c=()=>{t(Po(r.result)),a()},p=()=>{o(r.error),a()};r.addEventListener("success",c),r.addEventListener("error",p)});return e.then(t=>{t instanceof IDBCursor&&ov.set(t,r)}).catch(()=>{}),fp.set(e,r),e}function wE(r){if(Mf.has(r))return;const e=new Promise((t,o)=>{const a=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",p),r.removeEventListener("abort",p)},c=()=>{t(),a()},p=()=>{o(r.error||new DOMException("AbortError","AbortError")),a()};r.addEventListener("complete",c),r.addEventListener("error",p),r.addEventListener("abort",p)});Mf.set(r,e)}let Of={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Mf.get(r);if(e==="objectStoreNames")return r.objectStoreNames||av.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Po(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function xE(r){Of=r(Of)}function EE(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const o=r.call(Ef(this),e,...t);return av.set(o,e.sort?e.sort():[e]),Po(o)}:yE().includes(r)?function(...e){return r.apply(Ef(this),e),Po(ov.get(this))}:function(...e){return Po(r.apply(Ef(this),e))}}function TE(r){return typeof r=="function"?EE(r):(r instanceof IDBTransaction&&wE(r),gE(r,_E())?new Proxy(r,Of):r)}function Po(r){if(r instanceof IDBRequest)return vE(r);if(xf.has(r))return xf.get(r);const e=TE(r);return e!==r&&(xf.set(r,e),fp.set(e,r)),e}const Ef=r=>fp.get(r);function IE(r,e,{blocked:t,upgrade:o,blocking:a,terminated:c}={}){const p=indexedDB.open(r,e),y=Po(p);return o&&p.addEventListener("upgradeneeded",x=>{o(Po(p.result),x.oldVersion,x.newVersion,Po(p.transaction),x)}),t&&p.addEventListener("blocked",x=>t(x.oldVersion,x.newVersion,x)),y.then(x=>{c&&x.addEventListener("close",()=>c()),a&&x.addEventListener("versionchange",T=>a(T.oldVersion,T.newVersion,T))}).catch(()=>{}),y}const SE=["get","getKey","getAll","getAllKeys","count"],PE=["put","add","delete","clear"],Tf=new Map;function h_(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Tf.get(e))return Tf.get(e);const t=e.replace(/FromIndex$/,""),o=e!==t,a=PE.includes(t);if(!(t in(o?IDBIndex:IDBObjectStore).prototype)||!(a||SE.includes(t)))return;const c=async function(p,...y){const x=this.transaction(p,a?"readwrite":"readonly");let T=x.store;return o&&(T=T.index(y.shift())),(await Promise.all([T[t](...y),a&&x.done]))[0]};return Tf.set(e,c),c}xE(r=>({...r,get:(e,t,o)=>h_(e,t)||r.get(e,t,o),has:(e,t)=>!!h_(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(CE(t)){const o=t.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(t=>t).join(" ")}}function CE(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const jf="@firebase/app",d_="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cs=new dp("@firebase/app"),AE="@firebase/app-compat",bE="@firebase/analytics-compat",NE="@firebase/analytics",RE="@firebase/app-check-compat",LE="@firebase/app-check",DE="@firebase/auth",ME="@firebase/auth-compat",OE="@firebase/database",jE="@firebase/data-connect",VE="@firebase/database-compat",FE="@firebase/functions",zE="@firebase/functions-compat",UE="@firebase/installations",BE="@firebase/installations-compat",HE="@firebase/messaging",WE="@firebase/messaging-compat",$E="@firebase/performance",qE="@firebase/performance-compat",GE="@firebase/remote-config",KE="@firebase/remote-config-compat",ZE="@firebase/storage",QE="@firebase/storage-compat",YE="@firebase/firestore",JE="@firebase/ai",XE="@firebase/firestore-compat",e1="firebase",t1="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vf="[DEFAULT]",n1={[jf]:"fire-core",[AE]:"fire-core-compat",[NE]:"fire-analytics",[bE]:"fire-analytics-compat",[LE]:"fire-app-check",[RE]:"fire-app-check-compat",[DE]:"fire-auth",[ME]:"fire-auth-compat",[OE]:"fire-rtdb",[jE]:"fire-data-connect",[VE]:"fire-rtdb-compat",[FE]:"fire-fn",[zE]:"fire-fn-compat",[UE]:"fire-iid",[BE]:"fire-iid-compat",[HE]:"fire-fcm",[WE]:"fire-fcm-compat",[$E]:"fire-perf",[qE]:"fire-perf-compat",[GE]:"fire-rc",[KE]:"fire-rc-compat",[ZE]:"fire-gcs",[QE]:"fire-gcs-compat",[YE]:"fire-fst",[XE]:"fire-fst-compat",[JE]:"fire-vertex","fire-js":"fire-js",[e1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gh=new Map,r1=new Map,Ff=new Map;function f_(r,e){try{r.container.addComponent(e)}catch(t){Cs.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Sl(r){const e=r.name;if(Ff.has(e))return Cs.debug(`There were multiple attempts to register component ${e}.`),!1;Ff.set(e,r);for(const t of gh.values())f_(t,r);for(const t of r1.values())f_(t,r);return!0}function pp(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function qr(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ko=new zu("app","Firebase",i1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(e,t,o){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new wa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ko.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ll=t1;function lv(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const o={name:Vf,automaticDataCollectionEnabled:!0,...e},a=o.name;if(typeof a!="string"||!a)throw ko.create("bad-app-name",{appName:String(a)});if(t||(t=nv()),!t)throw ko.create("no-options");const c=gh.get(a);if(c){if(va(t,c.options)&&va(o,c.config))return c;throw ko.create("duplicate-app",{appName:a})}const p=new hE(a);for(const x of Ff.values())p.addComponent(x);const y=new s1(t,o,p);return gh.set(a,y),y}function uv(r=Vf){const e=gh.get(r);if(!e&&r===Vf&&nv())return lv();if(!e)throw ko.create("no-app",{appName:r});return e}function Co(r,e,t){let o=n1[r]??r;t&&(o+=`-${t}`);const a=o.match(/\s|\//),c=e.match(/\s|\//);if(a||c){const p=[`Unable to register library "${o}" with version "${e}":`];a&&p.push(`library name "${o}" contains illegal characters (whitespace or "/")`),a&&c&&p.push("and"),c&&p.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Cs.warn(p.join(" "));return}Sl(new wa(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o1="firebase-heartbeat-database",a1=1,Au="firebase-heartbeat-store";let If=null;function cv(){return If||(If=IE(o1,a1,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Au)}catch(t){console.warn(t)}}}}).catch(r=>{throw ko.create("idb-open",{originalErrorMessage:r.message})})),If}async function l1(r){try{const t=(await cv()).transaction(Au),o=await t.objectStore(Au).get(hv(r));return await t.done,o}catch(e){if(e instanceof Ls)Cs.warn(e.message);else{const t=ko.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Cs.warn(t.message)}}}async function p_(r,e){try{const o=(await cv()).transaction(Au,"readwrite");await o.objectStore(Au).put(e,hv(r)),await o.done}catch(t){if(t instanceof Ls)Cs.warn(t.message);else{const o=ko.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Cs.warn(o.message)}}}function hv(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1=1024,c1=30;class h1{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new f1(t),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=m_();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(p=>p.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:a}),this._heartbeatsCache.heartbeats.length>c1){const p=p1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(p,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(o){Cs.warn(o)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=m_(),{heartbeatsToSend:o,unsentEntries:a}=d1(this._heartbeatsCache.heartbeats),c=mh(JSON.stringify({version:2,heartbeats:o}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(t){return Cs.warn(t),""}}}function m_(){return new Date().toISOString().substring(0,10)}function d1(r,e=u1){const t=[];let o=r.slice();for(const a of r){const c=t.find(p=>p.agent===a.agent);if(c){if(c.dates.push(a.date),g_(t)>e){c.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),g_(t)>e){t.pop();break}o=o.slice(1)}return{heartbeatsToSend:t,unsentEntries:o}}class f1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Xx()?eE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await l1(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return p_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return p_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function g_(r){return mh(JSON.stringify({version:2,heartbeats:r})).length}function p1(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let o=1;o<r.length;o++)r[o].date<t&&(t=r[o].date,e=o);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m1(r){Sl(new wa("platform-logger",e=>new kE(e),"PRIVATE")),Sl(new wa("heartbeat",e=>new h1(e),"PRIVATE")),Co(jf,d_,r),Co(jf,d_,"esm2020"),Co("fire-js","")}m1("");function dv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const g1=dv,fv=new zu("auth","Firebase",dv());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _h=new dp("@firebase/auth");function _1(r,...e){_h.logLevel<=it.WARN&&_h.warn(`Auth (${Ll}): ${r}`,...e)}function ih(r,...e){_h.logLevel<=it.ERROR&&_h.error(`Auth (${Ll}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ci(r,...e){throw mp(r,...e)}function Fi(r,...e){return mp(r,...e)}function pv(r,e,t){const o={...g1(),[e]:t};return new zu("auth","Firebase",o).create(e,{appName:r.name})}function Ss(r){return pv(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function mp(r,...e){if(typeof r!="string"){const t=e[0],o=[...e.slice(1)];return o[0]&&(o[0].appName=r.name),r._errorFactory.create(t,...o)}return fv.create(r,...e)}function We(r,e,...t){if(!r)throw mp(e,...t)}function Ts(r){const e="INTERNAL ASSERTION FAILED: "+r;throw ih(e),new Error(e)}function As(r,e){r||Ts(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zf(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function y1(){return __()==="http:"||__()==="https:"}function __(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(y1()||Zx()||"connection"in navigator)?navigator.onLine:!0}function w1(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(e,t){this.shortDelay=e,this.longDelay=t,As(t>e,"Short delay should be less than long delay!"),this.isMobile=qx()||Qx()}get(){return v1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gp(r,e){As(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv{static initialize(e,t,o){this.fetchImpl=e,t&&(this.headersImpl=t),o&&(this.responseImpl=o)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ts("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ts("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ts("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],T1=new Bu(3e4,6e4);function jo(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Vo(r,e,t,o,a={}){return gv(r,a,async()=>{let c={},p={};o&&(e==="GET"?p=o:c={body:JSON.stringify(o)});const y=Uu({key:r.config.apiKey,...p}).slice(1),x=await r._getAdditionalHeaders();x["Content-Type"]="application/json",r.languageCode&&(x["X-Firebase-Locale"]=r.languageCode);const T={method:e,headers:x,...c};return Kx()||(T.referrerPolicy="no-referrer"),r.emulatorConfig&&Rl(r.emulatorConfig.host)&&(T.credentials="include"),mv.fetch()(await _v(r,r.config.apiHost,t,y),T)})}async function gv(r,e,t){r._canInitEmulator=!1;const o={...x1,...e};try{const a=new S1(r),c=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const p=await c.json();if("needConfirmation"in p)throw Yc(r,"account-exists-with-different-credential",p);if(c.ok&&!("errorMessage"in p))return p;{const y=c.ok?p.errorMessage:p.error.message,[x,T]=y.split(" : ");if(x==="FEDERATED_USER_ID_ALREADY_LINKED")throw Yc(r,"credential-already-in-use",p);if(x==="EMAIL_EXISTS")throw Yc(r,"email-already-in-use",p);if(x==="USER_DISABLED")throw Yc(r,"user-disabled",p);const k=o[x]||x.toLowerCase().replace(/[_\s]+/g,"-");if(T)throw pv(r,k,T);ci(r,k)}}catch(a){if(a instanceof Ls)throw a;ci(r,"network-request-failed",{message:String(a)})}}async function Hu(r,e,t,o,a={}){const c=await Vo(r,e,t,o,a);return"mfaPendingCredential"in c&&ci(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function _v(r,e,t,o){const a=`${e}${t}?${o}`,c=r,p=c.config.emulator?gp(r.config,a):`${r.config.apiScheme}://${a}`;return E1.includes(t)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(p).toString():p}function I1(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class S1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,o)=>{this.timer=setTimeout(()=>o(Fi(this.auth,"network-request-failed")),T1.get())})}}function Yc(r,e,t){const o={appName:r.name};t.email&&(o.email=t.email),t.phoneNumber&&(o.phoneNumber=t.phoneNumber);const a=Fi(r,e,o);return a.customData._tokenResponse=t,a}function y_(r){return r!==void 0&&r.enterprise!==void 0}class P1{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return I1(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function k1(r,e){return Vo(r,"GET","/v2/recaptchaConfig",jo(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C1(r,e){return Vo(r,"POST","/v1/accounts:delete",e)}async function yh(r,e){return Vo(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iu(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function A1(r,e=!1){const t=Ut(r),o=await t.getIdToken(e),a=_p(o);We(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const c=typeof a.firebase=="object"?a.firebase:void 0,p=c==null?void 0:c.sign_in_provider;return{claims:a,token:o,authTime:Iu(Sf(a.auth_time)),issuedAtTime:Iu(Sf(a.iat)),expirationTime:Iu(Sf(a.exp)),signInProvider:p||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function Sf(r){return Number(r)*1e3}function _p(r){const[e,t,o]=r.split(".");if(e===void 0||t===void 0||o===void 0)return ih("JWT malformed, contained fewer than 3 sections"),null;try{const a=ev(t);return a?JSON.parse(a):(ih("Failed to decode base64 JWT payload"),null)}catch(a){return ih("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function v_(r){const e=_p(r);return We(e,"internal-error"),We(typeof e.exp<"u","internal-error"),We(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bu(r,e,t=!1){if(t)return e;try{return await e}catch(o){throw o instanceof Ls&&b1(o)&&r.auth.currentUser===r&&await r.auth.signOut(),o}}function b1({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const o=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Iu(this.lastLoginAt),this.creationTime=Iu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vh(r){var C;const e=r.auth,t=await r.getIdToken(),o=await bu(r,yh(e,{idToken:t}));We(o==null?void 0:o.users.length,e,"internal-error");const a=o.users[0];r._notifyReloadListener(a);const c=(C=a.providerUserInfo)!=null&&C.length?yv(a.providerUserInfo):[],p=L1(r.providerData,c),y=r.isAnonymous,x=!(r.email&&a.passwordHash)&&!(p!=null&&p.length),T=y?x:!1,k={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:p,metadata:new Uf(a.createdAt,a.lastLoginAt),isAnonymous:T};Object.assign(r,k)}async function R1(r){const e=Ut(r);await vh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function L1(r,e){return[...r.filter(o=>!e.some(a=>a.providerId===o.providerId)),...e]}function yv(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D1(r,e){const t=await gv(r,{},async()=>{const o=Uu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:c}=r.config,p=await _v(r,a,"/v1/token",`key=${c}`),y=await r._getAdditionalHeaders();y["Content-Type"]="application/x-www-form-urlencoded";const x={method:"POST",headers:y,body:o};return r.emulatorConfig&&Rl(r.emulatorConfig.host)&&(x.credentials="include"),mv.fetch()(p,x)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function M1(r,e){return Vo(r,"POST","/v2/accounts:revokeToken",jo(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){We(e.idToken,"internal-error"),We(typeof e.idToken<"u","internal-error"),We(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):v_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){We(e.length!==0,"internal-error");const t=v_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(We(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:o,refreshToken:a,expiresIn:c}=await D1(e,t);this.updateTokensAndExpiration(o,a,Number(c))}updateTokensAndExpiration(e,t,o){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+o*1e3}static fromJSON(e,t){const{refreshToken:o,accessToken:a,expirationTime:c}=t,p=new yl;return o&&(We(typeof o=="string","internal-error",{appName:e}),p.refreshToken=o),a&&(We(typeof a=="string","internal-error",{appName:e}),p.accessToken=a),c&&(We(typeof c=="number","internal-error",{appName:e}),p.expirationTime=c),p}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new yl,this.toJSON())}_performRefresh(){return Ts("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wo(r,e){We(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class li{constructor({uid:e,auth:t,stsTokenManager:o,...a}){this.providerId="firebase",this.proactiveRefresh=new N1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Uf(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await bu(this,this.stsTokenManager.getToken(this.auth,e));return We(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return A1(this,e)}reload(){return R1(this)}_assign(e){this!==e&&(We(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new li({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){We(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let o=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),o=!0),t&&await vh(this),await this.auth._persistUserIfCurrent(this),o&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(qr(this.auth.app))return Promise.reject(Ss(this.auth));const e=await this.getIdToken();return await bu(this,C1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const o=t.displayName??void 0,a=t.email??void 0,c=t.phoneNumber??void 0,p=t.photoURL??void 0,y=t.tenantId??void 0,x=t._redirectEventId??void 0,T=t.createdAt??void 0,k=t.lastLoginAt??void 0,{uid:C,emailVerified:b,isAnonymous:W,providerData:$,stsTokenManager:Z}=t;We(C&&Z,e,"internal-error");const J=yl.fromJSON(this.name,Z);We(typeof C=="string",e,"internal-error"),wo(o,e.name),wo(a,e.name),We(typeof b=="boolean",e,"internal-error"),We(typeof W=="boolean",e,"internal-error"),wo(c,e.name),wo(p,e.name),wo(y,e.name),wo(x,e.name),wo(T,e.name),wo(k,e.name);const he=new li({uid:C,auth:e,email:a,emailVerified:b,displayName:o,isAnonymous:W,photoURL:p,phoneNumber:c,tenantId:y,stsTokenManager:J,createdAt:T,lastLoginAt:k});return $&&Array.isArray($)&&(he.providerData=$.map(me=>({...me}))),x&&(he._redirectEventId=x),he}static async _fromIdTokenResponse(e,t,o=!1){const a=new yl;a.updateFromServerResponse(t);const c=new li({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:o});return await vh(c),c}static async _fromGetAccountInfoResponse(e,t,o){const a=t.users[0];We(a.localId!==void 0,"internal-error");const c=a.providerUserInfo!==void 0?yv(a.providerUserInfo):[],p=!(a.email&&a.passwordHash)&&!(c!=null&&c.length),y=new yl;y.updateFromIdToken(o);const x=new li({uid:a.localId,auth:e,stsTokenManager:y,isAnonymous:p}),T={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new Uf(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(c!=null&&c.length)};return Object.assign(x,T),x}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w_=new Map;function Is(r){As(r instanceof Function,"Expected a class definition");let e=w_.get(r);return e?(As(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,w_.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}vv.type="NONE";const x_=vv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sh(r,e,t){return`firebase:${r}:${e}:${t}`}class vl{constructor(e,t,o){this.persistence=e,this.auth=t,this.userKey=o;const{config:a,name:c}=this.auth;this.fullUserKey=sh(this.userKey,a.apiKey,c),this.fullPersistenceKey=sh("persistence",a.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await yh(this.auth,{idToken:e}).catch(()=>{});return t?li._fromGetAccountInfoResponse(this.auth,t,e):null}return li._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,o="authUser"){if(!t.length)return new vl(Is(x_),e,o);const a=(await Promise.all(t.map(async T=>{if(await T._isAvailable())return T}))).filter(T=>T);let c=a[0]||Is(x_);const p=sh(o,e.config.apiKey,e.name);let y=null;for(const T of t)try{const k=await T._get(p);if(k){let C;if(typeof k=="string"){const b=await yh(e,{idToken:k}).catch(()=>{});if(!b)break;C=await li._fromGetAccountInfoResponse(e,b,k)}else C=li._fromJSON(e,k);T!==c&&(y=C),c=T;break}}catch{}const x=a.filter(T=>T._shouldAllowMigration);return!c._shouldAllowMigration||!x.length?new vl(c,e,o):(c=x[0],y&&await c._set(p,y.toJSON()),await Promise.all(t.map(async T=>{if(T!==c)try{await T._remove(p)}catch{}})),new vl(c,e,o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E_(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Tv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(wv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Sv(e))return"Blackberry";if(Pv(e))return"Webos";if(xv(e))return"Safari";if((e.includes("chrome/")||Ev(e))&&!e.includes("edge/"))return"Chrome";if(Iv(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,o=r.match(t);if((o==null?void 0:o.length)===2)return o[1]}return"Other"}function wv(r=Nn()){return/firefox\//i.test(r)}function xv(r=Nn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ev(r=Nn()){return/crios\//i.test(r)}function Tv(r=Nn()){return/iemobile/i.test(r)}function Iv(r=Nn()){return/android/i.test(r)}function Sv(r=Nn()){return/blackberry/i.test(r)}function Pv(r=Nn()){return/webos/i.test(r)}function yp(r=Nn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function O1(r=Nn()){var e;return yp(r)&&!!((e=window.navigator)!=null&&e.standalone)}function j1(){return Yx()&&document.documentMode===10}function kv(r=Nn()){return yp(r)||Iv(r)||Pv(r)||Sv(r)||/windows phone/i.test(r)||Tv(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cv(r,e=[]){let t;switch(r){case"Browser":t=E_(Nn());break;case"Worker":t=`${E_(Nn())}-${r}`;break;default:t=r}const o=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ll}/${o}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const o=c=>new Promise((p,y)=>{try{const x=e(c);p(x)}catch(x){y(x)}});o.onAbort=t,this.queue.push(o);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const o of this.queue)await o(e),o.onAbort&&t.push(o.onAbort)}catch(o){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:o==null?void 0:o.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F1(r,e={}){return Vo(r,"GET","/v2/passwordPolicy",jo(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1=6;class U1{constructor(e){var o;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??z1,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((o=e.allowedNonAlphanumericCharacters)==null?void 0:o.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const o=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;o&&(t.meetsMinPasswordLength=e.length>=o),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let o;for(let a=0;a<e.length;a++)o=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,o>="a"&&o<="z",o>="A"&&o<="Z",o>="0"&&o<="9",this.allowedNonAlphanumericCharacters.includes(o))}updatePasswordCharacterOptionsStatuses(e,t,o,a,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=o)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(e,t,o,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=o,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new T_(this),this.idTokenSubscription=new T_(this),this.beforeStateQueue=new V1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Is(t)),this._initializationPromise=this.queue(async()=>{var o,a,c;if(!this._deleted&&(this.persistenceManager=await vl.create(this,e),(o=this._resolvePersistenceManagerAvailable)==null||o.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((c=this.currentUser)==null?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await yh(this,{idToken:e}),o=await li._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(o)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var c;if(qr(this.app)){const p=this.app.settings.authIdToken;return p?new Promise(y=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(p).then(y,y))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let o=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const p=(c=this.redirectUser)==null?void 0:c._redirectEventId,y=o==null?void 0:o._redirectEventId,x=await this.tryRedirectSignIn(e);(!p||p===y)&&(x!=null&&x.user)&&(o=x.user,a=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(o)}catch(p){o=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(p))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return We(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await vh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=w1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(qr(this.app))return Promise.reject(Ss(this));const t=e?Ut(e):null;return t&&We(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&We(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return qr(this.app)?Promise.reject(Ss(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return qr(this.app)?Promise.reject(Ss(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Is(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await F1(this),t=new U1(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new zu("auth","Firebase",e())}onAuthStateChanged(e,t,o){return this.registerStateListener(this.authStateSubscription,e,t,o)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,o){return this.registerStateListener(this.idTokenSubscription,e,t,o)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const o=this.onAuthStateChanged(()=>{o(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),o={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(o.tenantId=this.tenantId),await M1(this,o)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const o=await this.getOrInitRedirectPersistenceManager(t);return e===null?o.removeCurrentUser():o.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Is(e)||this._popupRedirectResolver;We(t,this,"argument-error"),this.redirectPersistenceManager=await vl.create(this,[Is(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,o;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((o=this.redirectUser)==null?void 0:o._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,o,a){if(this._deleted)return()=>{};const c=typeof t=="function"?t:t.next.bind(t);let p=!1;const y=this._isInitialized?Promise.resolve():this._initializationPromise;if(We(y,this,"internal-error"),y.then(()=>{p||c(this.currentUser)}),typeof t=="function"){const x=e.addObserver(t,o,a);return()=>{p=!0,x()}}else{const x=e.addObserver(t);return()=>{p=!0,x()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return We(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Cv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const o=await this._getAppCheckToken();return o&&(e["X-Firebase-AppCheck"]=o),e}async _getAppCheckToken(){var t;if(qr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&_1(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Pa(r){return Ut(r)}class T_{constructor(e){this.auth=e,this.observer=null,this.addObserver=sE(t=>this.observer=t)}get next(){return We(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function H1(r){Oh=r}function Av(r){return Oh.loadJS(r)}function W1(){return Oh.recaptchaEnterpriseScript}function $1(){return Oh.gapiScript}function q1(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class G1{constructor(){this.enterprise=new K1}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class K1{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Z1="recaptcha-enterprise",bv="NO_RECAPTCHA";class Q1{constructor(e){this.type=Z1,this.auth=Pa(e)}async verify(e="verify",t=!1){async function o(c){if(!t){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(p,y)=>{k1(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(x=>{if(x.recaptchaKey===void 0)y(new Error("recaptcha Enterprise site key undefined"));else{const T=new P1(x);return c.tenantId==null?c._agentRecaptchaConfig=T:c._tenantRecaptchaConfigs[c.tenantId]=T,p(T.siteKey)}}).catch(x=>{y(x)})})}function a(c,p,y){const x=window.grecaptcha;y_(x)?x.enterprise.ready(()=>{x.enterprise.execute(c,{action:e}).then(T=>{p(T)}).catch(()=>{p(bv)})}):y(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new G1().execute("siteKey",{action:"verify"}):new Promise((c,p)=>{o(this.auth).then(y=>{if(!t&&y_(window.grecaptcha))a(y,c,p);else{if(typeof window>"u"){p(new Error("RecaptchaVerifier is only supported in browser"));return}let x=W1();x.length!==0&&(x+=y),Av(x).then(()=>{a(y,c,p)}).catch(T=>{p(T)})}}).catch(y=>{p(y)})})}}async function I_(r,e,t,o=!1,a=!1){const c=new Q1(r);let p;if(a)p=bv;else try{p=await c.verify(t)}catch{p=await c.verify(t,!0)}const y={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in y){const x=y.phoneEnrollmentInfo.phoneNumber,T=y.phoneEnrollmentInfo.recaptchaToken;Object.assign(y,{phoneEnrollmentInfo:{phoneNumber:x,recaptchaToken:T,captchaResponse:p,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in y){const x=y.phoneSignInInfo.recaptchaToken;Object.assign(y,{phoneSignInInfo:{recaptchaToken:x,captchaResponse:p,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return y}return o?Object.assign(y,{captchaResp:p}):Object.assign(y,{captchaResponse:p}),Object.assign(y,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(y,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),y}async function Bf(r,e,t,o,a){var c;if((c=r._getRecaptchaConfig())!=null&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const p=await I_(r,e,t,t==="getOobCode");return o(r,p)}else return o(r,e).catch(async p=>{if(p.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const y=await I_(r,e,t,t==="getOobCode");return o(r,y)}else return Promise.reject(p)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y1(r,e){const t=pp(r,"auth");if(t.isInitialized()){const a=t.getImmediate(),c=t.getOptions();if(va(c,e??{}))return a;ci(a,"already-initialized")}return t.initialize({options:e})}function J1(r,e){const t=(e==null?void 0:e.persistence)||[],o=(Array.isArray(t)?t:[t]).map(Is);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(o,e==null?void 0:e.popupRedirectResolver)}function X1(r,e,t){const o=Pa(r);We(/^https?:\/\//.test(e),o,"invalid-emulator-scheme");const a=!1,c=Nv(e),{host:p,port:y}=eT(e),x=y===null?"":`:${y}`,T={url:`${c}//${p}${x}/`},k=Object.freeze({host:p,port:y,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!o._canInitEmulator){We(o.config.emulator&&o.emulatorConfig,o,"emulator-config-failed"),We(va(T,o.config.emulator)&&va(k,o.emulatorConfig),o,"emulator-config-failed");return}o.config.emulator=T,o.emulatorConfig=k,o.settings.appVerificationDisabledForTesting=!0,Rl(p)?(iv(`${c}//${p}${x}`),sv("Auth",!0)):tT()}function Nv(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function eT(r){const e=Nv(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const o=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(o);if(a){const c=a[1];return{host:c,port:S_(o.substr(c.length+1))}}else{const[c,p]=o.split(":");return{host:c,port:S_(p)}}}function S_(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function tT(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ts("not implemented")}_getIdTokenResponse(e){return Ts("not implemented")}_linkToIdToken(e,t){return Ts("not implemented")}_getReauthenticationResolver(e){return Ts("not implemented")}}async function nT(r,e){return Vo(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rT(r,e){return Hu(r,"POST","/v1/accounts:signInWithPassword",jo(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iT(r,e){return Hu(r,"POST","/v1/accounts:signInWithEmailLink",jo(r,e))}async function sT(r,e){return Hu(r,"POST","/v1/accounts:signInWithEmailLink",jo(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu extends vp{constructor(e,t,o,a=null){super("password",o),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new Nu(e,t,"password")}static _fromEmailAndCode(e,t,o=null){return new Nu(e,t,"emailLink",o)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Bf(e,t,"signInWithPassword",rT);case"emailLink":return iT(e,{email:this._email,oobCode:this._password});default:ci(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const o={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Bf(e,o,"signUpPassword",nT);case"emailLink":return sT(e,{idToken:t,email:this._email,oobCode:this._password});default:ci(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wl(r,e){return Hu(r,"POST","/v1/accounts:signInWithIdp",jo(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT="http://localhost";class xa extends vp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new xa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ci("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:o,signInMethod:a,...c}=t;if(!o||!a)return null;const p=new xa(o,a);return p.idToken=c.idToken||void 0,p.accessToken=c.accessToken||void 0,p.secret=c.secret,p.nonce=c.nonce,p.pendingToken=c.pendingToken||null,p}_getIdTokenResponse(e){const t=this.buildRequest();return wl(e,t)}_linkToIdToken(e,t){const o=this.buildRequest();return o.idToken=t,wl(e,o)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,wl(e,t)}buildRequest(){const e={requestUri:oT,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Uu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aT(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function lT(r){const e=gu(_u(r)).link,t=e?gu(_u(e)).deep_link_id:null,o=gu(_u(r)).deep_link_id;return(o?gu(_u(o)).link:null)||o||t||e||r}class wp{constructor(e){const t=gu(_u(e)),o=t.apiKey??null,a=t.oobCode??null,c=aT(t.mode??null);We(o&&a&&c,"argument-error"),this.apiKey=o,this.operation=c,this.code=a,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=lT(e);try{return new wp(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(){this.providerId=ka.PROVIDER_ID}static credential(e,t){return Nu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const o=wp.parseLink(t);return We(o,"argument-error"),Nu._fromEmailAndCode(e,o.code,o.tenantId)}}ka.PROVIDER_ID="password";ka.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ka.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu extends Rv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo extends Wu{constructor(){super("facebook.com")}static credential(e){return xa._fromParams({providerId:xo.PROVIDER_ID,signInMethod:xo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xo.credentialFromTaggedObject(e)}static credentialFromError(e){return xo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xo.credential(e.oauthAccessToken)}catch{return null}}}xo.FACEBOOK_SIGN_IN_METHOD="facebook.com";xo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo extends Wu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return xa._fromParams({providerId:Eo.PROVIDER_ID,signInMethod:Eo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Eo.credentialFromTaggedObject(e)}static credentialFromError(e){return Eo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:o}=e;if(!t&&!o)return null;try{return Eo.credential(t,o)}catch{return null}}}Eo.GOOGLE_SIGN_IN_METHOD="google.com";Eo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To extends Wu{constructor(){super("github.com")}static credential(e){return xa._fromParams({providerId:To.PROVIDER_ID,signInMethod:To.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return To.credentialFromTaggedObject(e)}static credentialFromError(e){return To.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return To.credential(e.oauthAccessToken)}catch{return null}}}To.GITHUB_SIGN_IN_METHOD="github.com";To.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io extends Wu{constructor(){super("twitter.com")}static credential(e,t){return xa._fromParams({providerId:Io.PROVIDER_ID,signInMethod:Io.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Io.credentialFromTaggedObject(e)}static credentialFromError(e){return Io.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:o}=e;if(!t||!o)return null;try{return Io.credential(t,o)}catch{return null}}}Io.TWITTER_SIGN_IN_METHOD="twitter.com";Io.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uT(r,e){return Hu(r,"POST","/v1/accounts:signUp",jo(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,o,a=!1){const c=await li._fromIdTokenResponse(e,o,a),p=P_(o);return new Ea({user:c,providerId:p,_tokenResponse:o,operationType:t})}static async _forOperation(e,t,o){await e._updateTokensIfNecessary(o,!0);const a=P_(o);return new Ea({user:e,providerId:a,_tokenResponse:o,operationType:t})}}function P_(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh extends Ls{constructor(e,t,o,a){super(t.code,t.message),this.operationType=o,this.user=a,Object.setPrototypeOf(this,wh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:o}}static _fromErrorAndOperation(e,t,o,a){return new wh(e,t,o,a)}}function Lv(r,e,t,o){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?wh._fromErrorAndOperation(r,c,e,o):c})}async function cT(r,e,t=!1){const o=await bu(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Ea._forOperation(r,"link",o)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dv(r,e,t=!1){const{auth:o}=r;if(qr(o.app))return Promise.reject(Ss(o));const a="reauthenticate";try{const c=await bu(r,Lv(o,a,e,r),t);We(c.idToken,o,"internal-error");const p=_p(c.idToken);We(p,o,"internal-error");const{sub:y}=p;return We(r.uid===y,o,"user-mismatch"),Ea._forOperation(r,a,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&ci(o,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mv(r,e,t=!1){if(qr(r.app))return Promise.reject(Ss(r));const o="signIn",a=await Lv(r,o,e),c=await Ea._fromIdTokenResponse(r,o,a);return t||await r._updateCurrentUser(c.user),c}async function hT(r,e){return Mv(Pa(r),e)}async function dT(r,e){return Dv(Ut(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ov(r){const e=Pa(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function fT(r,e,t){if(qr(r.app))return Promise.reject(Ss(r));const o=Pa(r),p=await Bf(o,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",uT).catch(x=>{throw x.code==="auth/password-does-not-meet-requirements"&&Ov(r),x}),y=await Ea._fromIdTokenResponse(o,"signIn",p);return await o._updateCurrentUser(y.user),y}function pT(r,e,t){return qr(r.app)?Promise.reject(Ss(r)):hT(Ut(r),ka.credential(e,t)).catch(async o=>{throw o.code==="auth/password-does-not-meet-requirements"&&Ov(r),o})}function mT(r,e,t,o){return Ut(r).onIdTokenChanged(e,t,o)}function gT(r,e,t){return Ut(r).beforeAuthStateChanged(e,t)}function _T(r,e,t,o){return Ut(r).onAuthStateChanged(e,t,o)}function yT(r){return Ut(r).signOut()}async function vT(r){return Ut(r).delete()}const xh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(xh,"1"),this.storage.removeItem(xh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT=1e3,xT=10;class Vv extends jv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=kv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const o=this.storage.getItem(t),a=this.localCache[t];o!==a&&e(t,a,o)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((p,y,x)=>{this.notifyListeners(p,x)});return}const o=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const p=this.storage.getItem(o);!t&&this.localCache[o]===p||this.notifyListeners(o,p)},c=this.storage.getItem(o);j1()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,xT):a()}notifyListeners(e,t){this.localCache[e]=t;const o=this.listeners[e];if(o)for(const a of Array.from(o))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,o)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:o}),!0)})},wT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Vv.type="LOCAL";const ET=Vv;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv extends jv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Fv.type="SESSION";const zv=Fv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TT(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const o=new jh(e);return this.receivers.push(o),o}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:o,eventType:a,data:c}=t.data,p=this.handlersMap[a];if(!(p!=null&&p.size))return;t.ports[0].postMessage({status:"ack",eventId:o,eventType:a});const y=Array.from(p).map(async T=>T(t.origin,c)),x=await TT(y);t.ports[0].postMessage({status:"done",eventId:o,eventType:a,response:x})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}jh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xp(r="",e=10){let t="";for(let o=0;o<e;o++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,o=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let c,p;return new Promise((y,x)=>{const T=xp("",20);a.port1.start();const k=setTimeout(()=>{x(new Error("unsupported_event"))},o);p={messageChannel:a,onMessage(C){const b=C;if(b.data.eventId===T)switch(b.data.status){case"ack":clearTimeout(k),c=setTimeout(()=>{x(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),y(b.data.response);break;default:clearTimeout(k),clearTimeout(c),x(new Error("invalid_response"));break}}},this.handlers.add(p),a.port1.addEventListener("message",p.onMessage),this.target.postMessage({eventType:e,eventId:T,data:t},[a.port2])}).finally(()=>{p&&this.removeMessageHandler(p)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zi(){return window}function ST(r){zi().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uv(){return typeof zi().WorkerGlobalScope<"u"&&typeof zi().importScripts=="function"}async function PT(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function kT(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function CT(){return Uv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv="firebaseLocalStorageDb",AT=1,Eh="firebaseLocalStorage",Hv="fbase_key";class $u{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Vh(r,e){return r.transaction([Eh],e?"readwrite":"readonly").objectStore(Eh)}function bT(){const r=indexedDB.deleteDatabase(Bv);return new $u(r).toPromise()}function Hf(){const r=indexedDB.open(Bv,AT);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const o=r.result;try{o.createObjectStore(Eh,{keyPath:Hv})}catch(a){t(a)}}),r.addEventListener("success",async()=>{const o=r.result;o.objectStoreNames.contains(Eh)?e(o):(o.close(),await bT(),e(await Hf()))})})}async function k_(r,e,t){const o=Vh(r,!0).put({[Hv]:e,value:t});return new $u(o).toPromise()}async function NT(r,e){const t=Vh(r,!1).get(e),o=await new $u(t).toPromise();return o===void 0?null:o.value}function C_(r,e){const t=Vh(r,!0).delete(e);return new $u(t).toPromise()}const RT=800,LT=3;class Wv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Hf(),this.db)}async _withRetries(e){let t=0;for(;;)try{const o=await this._openDb();return await e(o)}catch(o){if(t++>LT)throw o;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Uv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=jh._getInstance(CT()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,o;if(this.activeServiceWorker=await PT(),!this.activeServiceWorker)return;this.sender=new IT(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(o=e[0])!=null&&o.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||kT()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Hf();return await k_(e,xh,"1"),await C_(e,xh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(o=>k_(o,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(o=>NT(o,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>C_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const c=Vh(a,!1).getAll();return new $u(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],o=new Set;if(e.length!==0)for(const{fbase_key:a,value:c}of e)o.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(c)&&(this.notifyListeners(a,c),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!o.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const o=this.listeners[e];if(o)for(const a of Array.from(o))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),RT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Wv.type="LOCAL";const DT=Wv;new Bu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MT(r,e){return e?Is(e):(We(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep extends vp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return wl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return wl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return wl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function OT(r){return Mv(r.auth,new Ep(r),r.bypassAuthState)}function jT(r){const{auth:e,user:t}=r;return We(t,e,"internal-error"),Dv(t,new Ep(r),r.bypassAuthState)}async function VT(r){const{auth:e,user:t}=r;return We(t,e,"internal-error"),cT(t,new Ep(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(e,t,o,a,c=!1){this.auth=e,this.resolver=o,this.user=a,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(o){this.reject(o)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:o,postBody:a,tenantId:c,error:p,type:y}=e;if(p){this.reject(p);return}const x={auth:this.auth,requestUri:t,sessionId:o,tenantId:c||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(y)(x))}catch(T){this.reject(T)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return OT;case"linkViaPopup":case"linkViaRedirect":return VT;case"reauthViaPopup":case"reauthViaRedirect":return jT;default:ci(this.auth,"internal-error")}}resolve(e){As(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){As(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FT=new Bu(2e3,1e4);class _l extends $v{constructor(e,t,o,a,c){super(e,t,a,c),this.provider=o,this.authWindow=null,this.pollId=null,_l.currentPopupAction&&_l.currentPopupAction.cancel(),_l.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return We(e,this.auth,"internal-error"),e}async onExecution(){As(this.filter.length===1,"Popup operations only handle one event");const e=xp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Fi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Fi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_l.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,o;if((o=(t=this.authWindow)==null?void 0:t.window)!=null&&o.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Fi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,FT.get())};e()}}_l.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zT="pendingRedirect",oh=new Map;class UT extends $v{constructor(e,t,o=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,o),this.eventId=null}async execute(){let e=oh.get(this.auth._key());if(!e){try{const o=await BT(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(o)}catch(t){e=()=>Promise.reject(t)}oh.set(this.auth._key(),e)}return this.bypassAuthState||oh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function BT(r,e){const t=$T(e),o=WT(r);if(!await o._isAvailable())return!1;const a=await o._get(t)==="true";return await o._remove(t),a}function HT(r,e){oh.set(r._key(),e)}function WT(r){return Is(r._redirectPersistence)}function $T(r){return sh(zT,r.config.apiKey,r.name)}async function qT(r,e,t=!1){if(qr(r.app))return Promise.reject(Ss(r));const o=Pa(r),a=MT(o,e),p=await new UT(o,a,t).execute();return p&&!t&&(delete p.user._redirectEventId,await o._persistUserIfCurrent(p.user),await o._setRedirectUser(null,e)),p}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GT=600*1e3;class KT{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(o=>{this.isEventForConsumer(e,o)&&(t=!0,this.sendToConsumer(e,o),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ZT(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var o;if(e.error&&!qv(e)){const a=((o=e.error.code)==null?void 0:o.split("auth/")[1])||"internal-error";t.onError(Fi(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const o=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&o}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=GT&&this.cachedEventUids.clear(),this.cachedEventUids.has(A_(e))}saveEventToCache(e){this.cachedEventUids.add(A_(e)),this.lastProcessedEventTime=Date.now()}}function A_(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function qv({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function ZT(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qv(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QT(r,e={}){return Vo(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YT=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,JT=/^https?/;async function XT(r){if(r.config.emulator)return;const{authorizedDomains:e}=await QT(r);for(const t of e)try{if(eI(t))return}catch{}ci(r,"unauthorized-domain")}function eI(r){const e=zf(),{protocol:t,hostname:o}=new URL(e);if(r.startsWith("chrome-extension://")){const p=new URL(r);return p.hostname===""&&o===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&p.hostname===o}if(!JT.test(t))return!1;if(YT.test(r))return o===r;const a=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(o)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI=new Bu(3e4,6e4);function b_(){const r=zi().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function nI(r){return new Promise((e,t)=>{var a,c,p;function o(){b_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{b_(),t(Fi(r,"network-request-failed"))},timeout:tI.get()})}if((c=(a=zi().gapi)==null?void 0:a.iframes)!=null&&c.Iframe)e(gapi.iframes.getContext());else if((p=zi().gapi)!=null&&p.load)o();else{const y=q1("iframefcb");return zi()[y]=()=>{gapi.load?o():t(Fi(r,"network-request-failed"))},Av(`${$1()}?onload=${y}`).catch(x=>t(x))}}).catch(e=>{throw ah=null,e})}let ah=null;function rI(r){return ah=ah||nI(r),ah}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI=new Bu(5e3,15e3),sI="__/auth/iframe",oI="emulator/auth/iframe",aI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function uI(r){const e=r.config;We(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?gp(e,oI):`https://${r.config.authDomain}/${sI}`,o={apiKey:e.apiKey,appName:r.name,v:Ll},a=lI.get(r.config.apiHost);a&&(o.eid=a);const c=r._getFrameworks();return c.length&&(o.fw=c.join(",")),`${t}?${Uu(o).slice(1)}`}async function cI(r){const e=await rI(r),t=zi().gapi;return We(t,r,"internal-error"),e.open({where:document.body,url:uI(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:aI,dontclear:!0},o=>new Promise(async(a,c)=>{await o.restyle({setHideOnLeave:!1});const p=Fi(r,"network-request-failed"),y=zi().setTimeout(()=>{c(p)},iI.get());function x(){zi().clearTimeout(y),a(o)}o.ping(x).then(x,()=>{c(p)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},dI=500,fI=600,pI="_blank",mI="http://localhost";class N_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function gI(r,e,t,o=dI,a=fI){const c=Math.max((window.screen.availHeight-a)/2,0).toString(),p=Math.max((window.screen.availWidth-o)/2,0).toString();let y="";const x={...hI,width:o.toString(),height:a.toString(),top:c,left:p},T=Nn().toLowerCase();t&&(y=Ev(T)?pI:t),wv(T)&&(e=e||mI,x.scrollbars="yes");const k=Object.entries(x).reduce((b,[W,$])=>`${b}${W}=${$},`,"");if(O1(T)&&y!=="_self")return _I(e||"",y),new N_(null);const C=window.open(e||"",y,k);We(C,r,"popup-blocked");try{C.focus()}catch{}return new N_(C)}function _I(r,e){const t=document.createElement("a");t.href=r,t.target=e;const o=document.createEvent("MouseEvent");o.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI="__/auth/handler",vI="emulator/auth/handler",wI=encodeURIComponent("fac");async function R_(r,e,t,o,a,c){We(r.config.authDomain,r,"auth-domain-config-required"),We(r.config.apiKey,r,"invalid-api-key");const p={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:o,v:Ll,eventId:a};if(e instanceof Rv){e.setDefaultLanguage(r.languageCode),p.providerId=e.providerId||"",iE(e.getCustomParameters())||(p.customParameters=JSON.stringify(e.getCustomParameters()));for(const[k,C]of Object.entries({}))p[k]=C}if(e instanceof Wu){const k=e.getScopes().filter(C=>C!=="");k.length>0&&(p.scopes=k.join(","))}r.tenantId&&(p.tid=r.tenantId);const y=p;for(const k of Object.keys(y))y[k]===void 0&&delete y[k];const x=await r._getAppCheckToken(),T=x?`#${wI}=${encodeURIComponent(x)}`:"";return`${xI(r)}?${Uu(y).slice(1)}${T}`}function xI({config:r}){return r.emulator?gp(r,vI):`https://${r.authDomain}/${yI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pf="webStorageSupport";class EI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=zv,this._completeRedirectFn=qT,this._overrideRedirectResult=HT}async _openPopup(e,t,o,a){var p;As((p=this.eventManagers[e._key()])==null?void 0:p.manager,"_initialize() not called before _openPopup()");const c=await R_(e,t,o,zf(),a);return gI(e,c,xp())}async _openRedirect(e,t,o,a){await this._originValidation(e);const c=await R_(e,t,o,zf(),a);return ST(c),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:c}=this.eventManagers[t];return a?Promise.resolve(a):(As(c,"If manager is not set, promise should be"),c)}const o=this.initAndGetManager(e);return this.eventManagers[t]={promise:o},o.catch(()=>{delete this.eventManagers[t]}),o}async initAndGetManager(e){const t=await cI(e),o=new KT(e);return t.register("authEvent",a=>(We(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:o.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:o},this.iframes[e._key()]=t,o}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Pf,{type:Pf},a=>{var p;const c=(p=a==null?void 0:a[0])==null?void 0:p[Pf];c!==void 0&&t(!!c),ci(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=XT(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return kv()||xv()||yp()}}const TI=EI;var L_="@firebase/auth",D_="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(o=>{e((o==null?void 0:o.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){We(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SI(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function PI(r){Sl(new wa("auth",(e,{options:t})=>{const o=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:p,authDomain:y}=o.options;We(p&&!p.includes(":"),"invalid-api-key",{appName:o.name});const x={apiKey:p,authDomain:y,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Cv(r)},T=new B1(o,a,c,x);return J1(T,t),T},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,o)=>{e.getProvider("auth-internal").initialize()})),Sl(new wa("auth-internal",e=>{const t=Pa(e.getProvider("auth").getImmediate());return(o=>new II(o))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Co(L_,D_,SI(r)),Co(L_,D_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kI=300,CI=rv("authIdTokenMaxAge")||kI;let M_=null;const AI=r=>async e=>{const t=e&&await e.getIdTokenResult(),o=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(o&&o>CI)return;const a=t==null?void 0:t.token;M_!==a&&(M_=a,await fetch(r,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function bI(r=uv()){const e=pp(r,"auth");if(e.isInitialized())return e.getImmediate();const t=Y1(r,{popupRedirectResolver:TI,persistence:[DT,ET,zv]}),o=rv("authTokenSyncURL");if(o&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(o,location.origin);if(location.origin===c.origin){const p=AI(c.toString());gT(t,p,()=>p(t.currentUser)),mT(t,y=>p(y))}}const a=tv("auth");return a&&X1(t,`http://${a}`),t}function NI(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}H1({loadJS(r){return new Promise((e,t)=>{const o=document.createElement("script");o.setAttribute("src",r),o.onload=e,o.onerror=a=>{const c=Fi("internal-error");c.customData=a,t(c)},o.type="text/javascript",o.charset="UTF-8",NI().appendChild(o)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});PI("Browser");/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RI=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Gv=(...r)=>r.filter((e,t,o)=>!!e&&e.trim()!==""&&o.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var LI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DI=le.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:o,className:a="",children:c,iconNode:p,...y},x)=>le.createElement("svg",{ref:x,...LI,width:e,height:e,stroke:r,strokeWidth:o?Number(t)*24/Number(e):t,className:Gv("lucide",a),...y},[...p.map(([T,k])=>le.createElement(T,k)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=(r,e)=>{const t=le.forwardRef(({className:o,...a},c)=>le.createElement(DI,{ref:c,iconNode:e,className:Gv(`lucide-${RI(r)}`,o),...a}));return t.displayName=`${r}`,t};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MI=Je("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wf=Je("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OI=Je("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jI=Je("Bed",[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jc=Je("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tp=Je("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fh=Je("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VI=Je("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FI=Je("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zI=Je("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UI=Je("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BI=Je("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HI=Je("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WI=Je("Coffee",[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $I=Je("Compass",[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ip=Je("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O_=Je("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j_=Je("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V_=Je("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qI=Je("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GI=Je("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KI=Je("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $n=Je("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=Je("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZI=Je("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QI=Je("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zh=Je("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F_=Je("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sp=Je("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $f=Je("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YI=Je("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z_=Je("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JI=Je("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ca=Je("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xl=Je("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XI=Je("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eS=Je("TramFront",[["rect",{width:"16",height:"16",x:"4",y:"3",rx:"2",key:"1wxw4b"}],["path",{d:"M4 11h16",key:"mpoxn0"}],["path",{d:"M12 3v8",key:"1h2ygw"}],["path",{d:"m8 19-2 3",key:"13i0xs"}],["path",{d:"m18 22-2-3",key:"1p0ohu"}],["path",{d:"M8 15h.01",key:"a7atzg"}],["path",{d:"M16 15h.01",key:"rnfrdf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uh=Je("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tS=Je("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nS=Je("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pp=Je("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rS=Je("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ru=Je("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var iS="firebase",sS="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Co(iS,sS,"app");var U_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ao,Kv;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(F,D){function M(){}M.prototype=D.prototype,F.F=D.prototype,F.prototype=new M,F.prototype.constructor=F,F.D=function(U,R,O){for(var N=Array(arguments.length-2),be=2;be<arguments.length;be++)N[be-2]=arguments[be];return D.prototype[R].apply(U,N)}}function t(){this.blockSize=-1}function o(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(o,t),o.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(F,D,M){M||(M=0);const U=Array(16);if(typeof D=="string")for(var R=0;R<16;++R)U[R]=D.charCodeAt(M++)|D.charCodeAt(M++)<<8|D.charCodeAt(M++)<<16|D.charCodeAt(M++)<<24;else for(R=0;R<16;++R)U[R]=D[M++]|D[M++]<<8|D[M++]<<16|D[M++]<<24;D=F.g[0],M=F.g[1],R=F.g[2];let O=F.g[3],N;N=D+(O^M&(R^O))+U[0]+3614090360&4294967295,D=M+(N<<7&4294967295|N>>>25),N=O+(R^D&(M^R))+U[1]+3905402710&4294967295,O=D+(N<<12&4294967295|N>>>20),N=R+(M^O&(D^M))+U[2]+606105819&4294967295,R=O+(N<<17&4294967295|N>>>15),N=M+(D^R&(O^D))+U[3]+3250441966&4294967295,M=R+(N<<22&4294967295|N>>>10),N=D+(O^M&(R^O))+U[4]+4118548399&4294967295,D=M+(N<<7&4294967295|N>>>25),N=O+(R^D&(M^R))+U[5]+1200080426&4294967295,O=D+(N<<12&4294967295|N>>>20),N=R+(M^O&(D^M))+U[6]+2821735955&4294967295,R=O+(N<<17&4294967295|N>>>15),N=M+(D^R&(O^D))+U[7]+4249261313&4294967295,M=R+(N<<22&4294967295|N>>>10),N=D+(O^M&(R^O))+U[8]+1770035416&4294967295,D=M+(N<<7&4294967295|N>>>25),N=O+(R^D&(M^R))+U[9]+2336552879&4294967295,O=D+(N<<12&4294967295|N>>>20),N=R+(M^O&(D^M))+U[10]+4294925233&4294967295,R=O+(N<<17&4294967295|N>>>15),N=M+(D^R&(O^D))+U[11]+2304563134&4294967295,M=R+(N<<22&4294967295|N>>>10),N=D+(O^M&(R^O))+U[12]+1804603682&4294967295,D=M+(N<<7&4294967295|N>>>25),N=O+(R^D&(M^R))+U[13]+4254626195&4294967295,O=D+(N<<12&4294967295|N>>>20),N=R+(M^O&(D^M))+U[14]+2792965006&4294967295,R=O+(N<<17&4294967295|N>>>15),N=M+(D^R&(O^D))+U[15]+1236535329&4294967295,M=R+(N<<22&4294967295|N>>>10),N=D+(R^O&(M^R))+U[1]+4129170786&4294967295,D=M+(N<<5&4294967295|N>>>27),N=O+(M^R&(D^M))+U[6]+3225465664&4294967295,O=D+(N<<9&4294967295|N>>>23),N=R+(D^M&(O^D))+U[11]+643717713&4294967295,R=O+(N<<14&4294967295|N>>>18),N=M+(O^D&(R^O))+U[0]+3921069994&4294967295,M=R+(N<<20&4294967295|N>>>12),N=D+(R^O&(M^R))+U[5]+3593408605&4294967295,D=M+(N<<5&4294967295|N>>>27),N=O+(M^R&(D^M))+U[10]+38016083&4294967295,O=D+(N<<9&4294967295|N>>>23),N=R+(D^M&(O^D))+U[15]+3634488961&4294967295,R=O+(N<<14&4294967295|N>>>18),N=M+(O^D&(R^O))+U[4]+3889429448&4294967295,M=R+(N<<20&4294967295|N>>>12),N=D+(R^O&(M^R))+U[9]+568446438&4294967295,D=M+(N<<5&4294967295|N>>>27),N=O+(M^R&(D^M))+U[14]+3275163606&4294967295,O=D+(N<<9&4294967295|N>>>23),N=R+(D^M&(O^D))+U[3]+4107603335&4294967295,R=O+(N<<14&4294967295|N>>>18),N=M+(O^D&(R^O))+U[8]+1163531501&4294967295,M=R+(N<<20&4294967295|N>>>12),N=D+(R^O&(M^R))+U[13]+2850285829&4294967295,D=M+(N<<5&4294967295|N>>>27),N=O+(M^R&(D^M))+U[2]+4243563512&4294967295,O=D+(N<<9&4294967295|N>>>23),N=R+(D^M&(O^D))+U[7]+1735328473&4294967295,R=O+(N<<14&4294967295|N>>>18),N=M+(O^D&(R^O))+U[12]+2368359562&4294967295,M=R+(N<<20&4294967295|N>>>12),N=D+(M^R^O)+U[5]+4294588738&4294967295,D=M+(N<<4&4294967295|N>>>28),N=O+(D^M^R)+U[8]+2272392833&4294967295,O=D+(N<<11&4294967295|N>>>21),N=R+(O^D^M)+U[11]+1839030562&4294967295,R=O+(N<<16&4294967295|N>>>16),N=M+(R^O^D)+U[14]+4259657740&4294967295,M=R+(N<<23&4294967295|N>>>9),N=D+(M^R^O)+U[1]+2763975236&4294967295,D=M+(N<<4&4294967295|N>>>28),N=O+(D^M^R)+U[4]+1272893353&4294967295,O=D+(N<<11&4294967295|N>>>21),N=R+(O^D^M)+U[7]+4139469664&4294967295,R=O+(N<<16&4294967295|N>>>16),N=M+(R^O^D)+U[10]+3200236656&4294967295,M=R+(N<<23&4294967295|N>>>9),N=D+(M^R^O)+U[13]+681279174&4294967295,D=M+(N<<4&4294967295|N>>>28),N=O+(D^M^R)+U[0]+3936430074&4294967295,O=D+(N<<11&4294967295|N>>>21),N=R+(O^D^M)+U[3]+3572445317&4294967295,R=O+(N<<16&4294967295|N>>>16),N=M+(R^O^D)+U[6]+76029189&4294967295,M=R+(N<<23&4294967295|N>>>9),N=D+(M^R^O)+U[9]+3654602809&4294967295,D=M+(N<<4&4294967295|N>>>28),N=O+(D^M^R)+U[12]+3873151461&4294967295,O=D+(N<<11&4294967295|N>>>21),N=R+(O^D^M)+U[15]+530742520&4294967295,R=O+(N<<16&4294967295|N>>>16),N=M+(R^O^D)+U[2]+3299628645&4294967295,M=R+(N<<23&4294967295|N>>>9),N=D+(R^(M|~O))+U[0]+4096336452&4294967295,D=M+(N<<6&4294967295|N>>>26),N=O+(M^(D|~R))+U[7]+1126891415&4294967295,O=D+(N<<10&4294967295|N>>>22),N=R+(D^(O|~M))+U[14]+2878612391&4294967295,R=O+(N<<15&4294967295|N>>>17),N=M+(O^(R|~D))+U[5]+4237533241&4294967295,M=R+(N<<21&4294967295|N>>>11),N=D+(R^(M|~O))+U[12]+1700485571&4294967295,D=M+(N<<6&4294967295|N>>>26),N=O+(M^(D|~R))+U[3]+2399980690&4294967295,O=D+(N<<10&4294967295|N>>>22),N=R+(D^(O|~M))+U[10]+4293915773&4294967295,R=O+(N<<15&4294967295|N>>>17),N=M+(O^(R|~D))+U[1]+2240044497&4294967295,M=R+(N<<21&4294967295|N>>>11),N=D+(R^(M|~O))+U[8]+1873313359&4294967295,D=M+(N<<6&4294967295|N>>>26),N=O+(M^(D|~R))+U[15]+4264355552&4294967295,O=D+(N<<10&4294967295|N>>>22),N=R+(D^(O|~M))+U[6]+2734768916&4294967295,R=O+(N<<15&4294967295|N>>>17),N=M+(O^(R|~D))+U[13]+1309151649&4294967295,M=R+(N<<21&4294967295|N>>>11),N=D+(R^(M|~O))+U[4]+4149444226&4294967295,D=M+(N<<6&4294967295|N>>>26),N=O+(M^(D|~R))+U[11]+3174756917&4294967295,O=D+(N<<10&4294967295|N>>>22),N=R+(D^(O|~M))+U[2]+718787259&4294967295,R=O+(N<<15&4294967295|N>>>17),N=M+(O^(R|~D))+U[9]+3951481745&4294967295,F.g[0]=F.g[0]+D&4294967295,F.g[1]=F.g[1]+(R+(N<<21&4294967295|N>>>11))&4294967295,F.g[2]=F.g[2]+R&4294967295,F.g[3]=F.g[3]+O&4294967295}o.prototype.v=function(F,D){D===void 0&&(D=F.length);const M=D-this.blockSize,U=this.C;let R=this.h,O=0;for(;O<D;){if(R==0)for(;O<=M;)a(this,F,O),O+=this.blockSize;if(typeof F=="string"){for(;O<D;)if(U[R++]=F.charCodeAt(O++),R==this.blockSize){a(this,U),R=0;break}}else for(;O<D;)if(U[R++]=F[O++],R==this.blockSize){a(this,U),R=0;break}}this.h=R,this.o+=D},o.prototype.A=function(){var F=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);F[0]=128;for(var D=1;D<F.length-8;++D)F[D]=0;D=this.o*8;for(var M=F.length-8;M<F.length;++M)F[M]=D&255,D/=256;for(this.v(F),F=Array(16),D=0,M=0;M<4;++M)for(let U=0;U<32;U+=8)F[D++]=this.g[M]>>>U&255;return F};function c(F,D){var M=y;return Object.prototype.hasOwnProperty.call(M,F)?M[F]:M[F]=D(F)}function p(F,D){this.h=D;const M=[];let U=!0;for(let R=F.length-1;R>=0;R--){const O=F[R]|0;U&&O==D||(M[R]=O,U=!1)}this.g=M}var y={};function x(F){return-128<=F&&F<128?c(F,function(D){return new p([D|0],D<0?-1:0)}):new p([F|0],F<0?-1:0)}function T(F){if(isNaN(F)||!isFinite(F))return C;if(F<0)return J(T(-F));const D=[];let M=1;for(let U=0;F>=M;U++)D[U]=F/M|0,M*=4294967296;return new p(D,0)}function k(F,D){if(F.length==0)throw Error("number format error: empty string");if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(F.charAt(0)=="-")return J(k(F.substring(1),D));if(F.indexOf("-")>=0)throw Error('number format error: interior "-" character');const M=T(Math.pow(D,8));let U=C;for(let O=0;O<F.length;O+=8){var R=Math.min(8,F.length-O);const N=parseInt(F.substring(O,O+R),D);R<8?(R=T(Math.pow(D,R)),U=U.j(R).add(T(N))):(U=U.j(M),U=U.add(T(N)))}return U}var C=x(0),b=x(1),W=x(16777216);r=p.prototype,r.m=function(){if(Z(this))return-J(this).m();let F=0,D=1;for(let M=0;M<this.g.length;M++){const U=this.i(M);F+=(U>=0?U:4294967296+U)*D,D*=4294967296}return F},r.toString=function(F){if(F=F||10,F<2||36<F)throw Error("radix out of range: "+F);if($(this))return"0";if(Z(this))return"-"+J(this).toString(F);const D=T(Math.pow(F,6));var M=this;let U="";for(;;){const R=Le(M,D).g;M=he(M,R.j(D));let O=((M.g.length>0?M.g[0]:M.h)>>>0).toString(F);if(M=R,$(M))return O+U;for(;O.length<6;)O="0"+O;U=O+U}},r.i=function(F){return F<0?0:F<this.g.length?this.g[F]:this.h};function $(F){if(F.h!=0)return!1;for(let D=0;D<F.g.length;D++)if(F.g[D]!=0)return!1;return!0}function Z(F){return F.h==-1}r.l=function(F){return F=he(this,F),Z(F)?-1:$(F)?0:1};function J(F){const D=F.g.length,M=[];for(let U=0;U<D;U++)M[U]=~F.g[U];return new p(M,~F.h).add(b)}r.abs=function(){return Z(this)?J(this):this},r.add=function(F){const D=Math.max(this.g.length,F.g.length),M=[];let U=0;for(let R=0;R<=D;R++){let O=U+(this.i(R)&65535)+(F.i(R)&65535),N=(O>>>16)+(this.i(R)>>>16)+(F.i(R)>>>16);U=N>>>16,O&=65535,N&=65535,M[R]=N<<16|O}return new p(M,M[M.length-1]&-2147483648?-1:0)};function he(F,D){return F.add(J(D))}r.j=function(F){if($(this)||$(F))return C;if(Z(this))return Z(F)?J(this).j(J(F)):J(J(this).j(F));if(Z(F))return J(this.j(J(F)));if(this.l(W)<0&&F.l(W)<0)return T(this.m()*F.m());const D=this.g.length+F.g.length,M=[];for(var U=0;U<2*D;U++)M[U]=0;for(U=0;U<this.g.length;U++)for(let R=0;R<F.g.length;R++){const O=this.i(U)>>>16,N=this.i(U)&65535,be=F.i(R)>>>16,Ke=F.i(R)&65535;M[2*U+2*R]+=N*Ke,me(M,2*U+2*R),M[2*U+2*R+1]+=O*Ke,me(M,2*U+2*R+1),M[2*U+2*R+1]+=N*be,me(M,2*U+2*R+1),M[2*U+2*R+2]+=O*be,me(M,2*U+2*R+2)}for(F=0;F<D;F++)M[F]=M[2*F+1]<<16|M[2*F];for(F=D;F<2*D;F++)M[F]=0;return new p(M,0)};function me(F,D){for(;(F[D]&65535)!=F[D];)F[D+1]+=F[D]>>>16,F[D]&=65535,D++}function xe(F,D){this.g=F,this.h=D}function Le(F,D){if($(D))throw Error("division by zero");if($(F))return new xe(C,C);if(Z(F))return D=Le(J(F),D),new xe(J(D.g),J(D.h));if(Z(D))return D=Le(F,J(D)),new xe(J(D.g),D.h);if(F.g.length>30){if(Z(F)||Z(D))throw Error("slowDivide_ only works with positive integers.");for(var M=b,U=D;U.l(F)<=0;)M=Te(M),U=Te(U);var R=De(M,1),O=De(U,1);for(U=De(U,2),M=De(M,2);!$(U);){var N=O.add(U);N.l(F)<=0&&(R=R.add(M),O=N),U=De(U,1),M=De(M,1)}return D=he(F,R.j(D)),new xe(R,D)}for(R=C;F.l(D)>=0;){for(M=Math.max(1,Math.floor(F.m()/D.m())),U=Math.ceil(Math.log(M)/Math.LN2),U=U<=48?1:Math.pow(2,U-48),O=T(M),N=O.j(D);Z(N)||N.l(F)>0;)M-=U,O=T(M),N=O.j(D);$(O)&&(O=b),R=R.add(O),F=he(F,N)}return new xe(R,F)}r.B=function(F){return Le(this,F).h},r.and=function(F){const D=Math.max(this.g.length,F.g.length),M=[];for(let U=0;U<D;U++)M[U]=this.i(U)&F.i(U);return new p(M,this.h&F.h)},r.or=function(F){const D=Math.max(this.g.length,F.g.length),M=[];for(let U=0;U<D;U++)M[U]=this.i(U)|F.i(U);return new p(M,this.h|F.h)},r.xor=function(F){const D=Math.max(this.g.length,F.g.length),M=[];for(let U=0;U<D;U++)M[U]=this.i(U)^F.i(U);return new p(M,this.h^F.h)};function Te(F){const D=F.g.length+1,M=[];for(let U=0;U<D;U++)M[U]=F.i(U)<<1|F.i(U-1)>>>31;return new p(M,F.h)}function De(F,D){const M=D>>5;D%=32;const U=F.g.length-M,R=[];for(let O=0;O<U;O++)R[O]=D>0?F.i(O+M)>>>D|F.i(O+M+1)<<32-D:F.i(O+M);return new p(R,F.h)}o.prototype.digest=o.prototype.A,o.prototype.reset=o.prototype.u,o.prototype.update=o.prototype.v,Kv=o,p.prototype.add=p.prototype.add,p.prototype.multiply=p.prototype.j,p.prototype.modulo=p.prototype.B,p.prototype.compare=p.prototype.l,p.prototype.toNumber=p.prototype.m,p.prototype.toString=p.prototype.toString,p.prototype.getBits=p.prototype.i,p.fromNumber=T,p.fromString=k,Ao=p}).apply(typeof U_<"u"?U_:typeof self<"u"?self:typeof window<"u"?window:{});var Xc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Zv,yu,Qv,lh,qf,Yv,Jv,Xv;(function(){var r,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Xc=="object"&&Xc];for(var w=0;w<h.length;++w){var I=h[w];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var o=t(this);function a(h,w){if(w)e:{var I=o;h=h.split(".");for(var A=0;A<h.length-1;A++){var q=h[A];if(!(q in I))break e;I=I[q]}h=h[h.length-1],A=I[h],w=w(A),w!=A&&w!=null&&e(I,h,{configurable:!0,writable:!0,value:w})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(w){var I=[],A;for(A in w)Object.prototype.hasOwnProperty.call(w,A)&&I.push([A,w[A]]);return I}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},p=this||self;function y(h){var w=typeof h;return w=="object"&&h!=null||w=="function"}function x(h,w,I){return h.call.apply(h.bind,arguments)}function T(h,w,I){return T=x,T.apply(null,arguments)}function k(h,w){var I=Array.prototype.slice.call(arguments,1);return function(){var A=I.slice();return A.push.apply(A,arguments),h.apply(this,A)}}function C(h,w){function I(){}I.prototype=w.prototype,h.Z=w.prototype,h.prototype=new I,h.prototype.constructor=h,h.Ob=function(A,q,Y){for(var pe=Array(arguments.length-2),He=2;He<arguments.length;He++)pe[He-2]=arguments[He];return w.prototype[q].apply(A,pe)}}var b=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function W(h){const w=h.length;if(w>0){const I=Array(w);for(let A=0;A<w;A++)I[A]=h[A];return I}return[]}function $(h,w){for(let A=1;A<arguments.length;A++){const q=arguments[A];var I=typeof q;if(I=I!="object"?I:q?Array.isArray(q)?"array":I:"null",I=="array"||I=="object"&&typeof q.length=="number"){I=h.length||0;const Y=q.length||0;h.length=I+Y;for(let pe=0;pe<Y;pe++)h[I+pe]=q[pe]}else h.push(q)}}class Z{constructor(w,I){this.i=w,this.j=I,this.h=0,this.g=null}get(){let w;return this.h>0?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function J(h){p.setTimeout(()=>{throw h},0)}function he(){var h=F;let w=null;return h.g&&(w=h.g,h.g=h.g.next,h.g||(h.h=null),w.next=null),w}class me{constructor(){this.h=this.g=null}add(w,I){const A=xe.get();A.set(w,I),this.h?this.h.next=A:this.g=A,this.h=A}}var xe=new Z(()=>new Le,h=>h.reset());class Le{constructor(){this.next=this.g=this.h=null}set(w,I){this.h=w,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let Te,De=!1,F=new me,D=()=>{const h=Promise.resolve(void 0);Te=()=>{h.then(M)}};function M(){for(var h;h=he();){try{h.h.call(h.g)}catch(I){J(I)}var w=xe;w.j(h),w.h<100&&(w.h++,h.next=w.g,w.g=h)}De=!1}function U(){this.u=this.u,this.C=this.C}U.prototype.u=!1,U.prototype.dispose=function(){this.u||(this.u=!0,this.N())},U.prototype[Symbol.dispose]=function(){this.dispose()},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function R(h,w){this.type=h,this.g=this.target=w,this.defaultPrevented=!1}R.prototype.h=function(){this.defaultPrevented=!0};var O=(function(){if(!p.addEventListener||!Object.defineProperty)return!1;var h=!1,w=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const I=()=>{};p.addEventListener("test",I,w),p.removeEventListener("test",I,w)}catch{}return h})();function N(h){return/^[\s\xa0]*$/.test(h)}function be(h,w){R.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,w)}C(be,R),be.prototype.init=function(h,w){const I=this.type=h.type,A=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=w,w=h.relatedTarget,w||(I=="mouseover"?w=h.fromElement:I=="mouseout"&&(w=h.toElement)),this.relatedTarget=w,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&be.Z.h.call(this)},be.prototype.h=function(){be.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Ke="closure_listenable_"+(Math.random()*1e6|0),ge=0;function Ve(h,w,I,A,q){this.listener=h,this.proxy=null,this.src=w,this.type=I,this.capture=!!A,this.ha=q,this.key=++ge,this.da=this.fa=!1}function ee(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Pe(h,w,I){for(const A in h)w.call(I,h[A],A,h)}function se(h,w){for(const I in h)w.call(void 0,h[I],I,h)}function B(h){const w={};for(const I in h)w[I]=h[I];return w}const ne="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Oe(h,w){let I,A;for(let q=1;q<arguments.length;q++){A=arguments[q];for(I in A)h[I]=A[I];for(let Y=0;Y<ne.length;Y++)I=ne[Y],Object.prototype.hasOwnProperty.call(A,I)&&(h[I]=A[I])}}function Ae(h){this.src=h,this.g={},this.h=0}Ae.prototype.add=function(h,w,I,A,q){const Y=h.toString();h=this.g[Y],h||(h=this.g[Y]=[],this.h++);const pe=ye(h,w,A,q);return pe>-1?(w=h[pe],I||(w.fa=!1)):(w=new Ve(w,this.src,Y,!!A,q),w.fa=I,h.push(w)),w};function Ie(h,w){const I=w.type;if(I in h.g){var A=h.g[I],q=Array.prototype.indexOf.call(A,w,void 0),Y;(Y=q>=0)&&Array.prototype.splice.call(A,q,1),Y&&(ee(w),h.g[I].length==0&&(delete h.g[I],h.h--))}}function ye(h,w,I,A){for(let q=0;q<h.length;++q){const Y=h[q];if(!Y.da&&Y.listener==w&&Y.capture==!!I&&Y.ha==A)return q}return-1}var Xe="closure_lm_"+(Math.random()*1e6|0),re={};function qe(h,w,I,A,q){if(Array.isArray(w)){for(let Y=0;Y<w.length;Y++)qe(h,w[Y],I,A,q);return null}return I=ar(I),h&&h[Ke]?h.J(w,I,y(A)?!!A.capture:!1,q):dt(h,w,I,!1,A,q)}function dt(h,w,I,A,q,Y){if(!w)throw Error("Invalid event type");const pe=y(q)?!!q.capture:!!q;let He=Kr(h);if(He||(h[Xe]=He=new Ae(h)),I=He.add(w,I,A,pe,Y),I.proxy)return I;if(A=gn(),I.proxy=A,A.src=h,A.listener=I,h.addEventListener)O||(q=pe),q===void 0&&(q=!1),h.addEventListener(w.toString(),A,q);else if(h.attachEvent)h.attachEvent(di(w.toString()),A);else if(h.addListener&&h.removeListener)h.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return I}function gn(){function h(I){return w.call(h.src,h.listener,I)}const w=fi;return h}function jt(h,w,I,A,q){if(Array.isArray(w))for(var Y=0;Y<w.length;Y++)jt(h,w[Y],I,A,q);else A=y(A)?!!A.capture:!!A,I=ar(I),h&&h[Ke]?(h=h.i,Y=String(w).toString(),Y in h.g&&(w=h.g[Y],I=ye(w,I,A,q),I>-1&&(ee(w[I]),Array.prototype.splice.call(w,I,1),w.length==0&&(delete h.g[Y],h.h--)))):h&&(h=Kr(h))&&(w=h.g[w.toString()],h=-1,w&&(h=ye(w,I,A,q)),(I=h>-1?w[h]:null)&&Rn(I))}function Rn(h){if(typeof h!="number"&&h&&!h.da){var w=h.src;if(w&&w[Ke])Ie(w.i,h);else{var I=h.type,A=h.proxy;w.removeEventListener?w.removeEventListener(I,A,h.capture):w.detachEvent?w.detachEvent(di(I),A):w.addListener&&w.removeListener&&w.removeListener(A),(I=Kr(w))?(Ie(I,h),I.h==0&&(I.src=null,w[Xe]=null)):ee(h)}}}function di(h){return h in re?re[h]:re[h]="on"+h}function fi(h,w){if(h.da)h=!0;else{w=new be(w,this);const I=h.listener,A=h.ha||h.src;h.fa&&Rn(h),h=I.call(A,w)}return h}function Kr(h){return h=h[Xe],h instanceof Ae?h:null}var or="__closure_events_fn_"+(Math.random()*1e9>>>0);function ar(h){return typeof h=="function"?h:(h[or]||(h[or]=function(w){return h.handleEvent(w)}),h[or])}function kt(){U.call(this),this.i=new Ae(this),this.M=this,this.G=null}C(kt,U),kt.prototype[Ke]=!0,kt.prototype.removeEventListener=function(h,w,I,A){jt(this,h,w,I,A)};function Ct(h,w){var I,A=h.G;if(A)for(I=[];A;A=A.G)I.push(A);if(h=h.M,A=w.type||w,typeof w=="string")w=new R(w,h);else if(w instanceof R)w.target=w.target||h;else{var q=w;w=new R(A,h),Oe(w,q)}q=!0;let Y,pe;if(I)for(pe=I.length-1;pe>=0;pe--)Y=w.g=I[pe],q=Ln(Y,A,!0,w)&&q;if(Y=w.g=h,q=Ln(Y,A,!0,w)&&q,q=Ln(Y,A,!1,w)&&q,I)for(pe=0;pe<I.length;pe++)Y=w.g=I[pe],q=Ln(Y,A,!1,w)&&q}kt.prototype.N=function(){if(kt.Z.N.call(this),this.i){var h=this.i;for(const w in h.g){const I=h.g[w];for(let A=0;A<I.length;A++)ee(I[A]);delete h.g[w],h.h--}}this.G=null},kt.prototype.J=function(h,w,I,A){return this.i.add(String(h),w,!1,I,A)},kt.prototype.K=function(h,w,I,A){return this.i.add(String(h),w,!0,I,A)};function Ln(h,w,I,A){if(w=h.i.g[String(w)],!w)return!0;w=w.concat();let q=!0;for(let Y=0;Y<w.length;++Y){const pe=w[Y];if(pe&&!pe.da&&pe.capture==I){const He=pe.listener,ut=pe.ha||pe.src;pe.fa&&Ie(h.i,pe),q=He.call(ut,A)!==!1&&q}}return q&&!A.defaultPrevented}function Ds(h,w){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=T(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(w)>2147483647?-1:p.setTimeout(h,w||0)}function Ms(h){h.g=Ds(()=>{h.g=null,h.i&&(h.i=!1,Ms(h))},h.l);const w=h.h;h.h=null,h.m.apply(null,w)}class Ra extends U{constructor(w,I){super(),this.m=w,this.l=I,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:Ms(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function pi(h){U.call(this),this.h=h,this.g={}}C(pi,U);var $i=[];function qi(h){Pe(h.g,function(w,I){this.g.hasOwnProperty(I)&&Rn(w)},h),h.g={}}pi.prototype.N=function(){pi.Z.N.call(this),qi(this)},pi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Zr=p.JSON.stringify,La=p.JSON.parse,mi=class{stringify(h){return p.JSON.stringify(h,void 0)}parse(h){return p.JSON.parse(h,void 0)}};function Qr(){}function Da(){}var Yr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function gi(){R.call(this,"d")}C(gi,R);function Os(){R.call(this,"c")}C(Os,R);var lr={},wr=null;function _i(){return wr=wr||new kt}lr.Ia="serverreachability";function js(h){R.call(this,lr.Ia,h)}C(js,R);function xr(h){const w=_i();Ct(w,new js(w))}lr.STAT_EVENT="statevent";function Er(h,w){R.call(this,lr.STAT_EVENT,h),this.stat=w}C(Er,R);function It(h){const w=_i();Ct(w,new Er(w,h))}lr.Ja="timingevent";function Uo(h,w){R.call(this,lr.Ja,h),this.size=w}C(Uo,R);function yi(h,w){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){h()},w)}function vi(){this.g=!0}vi.prototype.ua=function(){this.g=!1};function Ma(h,w,I,A,q,Y){h.info(function(){if(h.g)if(Y){var pe="",He=Y.split("&");for(let ft=0;ft<He.length;ft++){var ut=He[ft].split("=");if(ut.length>1){const Rt=ut[0];ut=ut[1];const zn=Rt.split("_");pe=zn.length>=2&&zn[1]=="type"?pe+(Rt+"="+ut+"&"):pe+(Rt+"=redacted&")}}}else pe=null;else pe=Y;return"XMLHTTP REQ ("+A+") [attempt "+q+"]: "+w+`
`+I+`
`+pe})}function Oa(h,w,I,A,q,Y,pe){h.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+q+"]: "+w+`
`+I+`
`+Y+" "+pe})}function Tr(h,w,I,A){h.info(function(){return"XMLHTTP TEXT ("+w+"): "+Gi(h,I)+(A?" "+A:"")})}function Vs(h,w){h.info(function(){return"TIMEOUT: "+w})}vi.prototype.info=function(){};function Gi(h,w){if(!h.g)return w;if(!w)return null;try{const Y=JSON.parse(w);if(Y){for(h=0;h<Y.length;h++)if(Array.isArray(Y[h])){var I=Y[h];if(!(I.length<2)){var A=I[1];if(Array.isArray(A)&&!(A.length<1)){var q=A[0];if(q!="noop"&&q!="stop"&&q!="close")for(let pe=1;pe<A.length;pe++)A[pe]=""}}}}return Zr(Y)}catch{return w}}var wi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},xi={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ja;function Bt(){}C(Bt,Qr),Bt.prototype.g=function(){return new XMLHttpRequest},ja=new Bt;function ke(h){return encodeURIComponent(String(h))}function Ki(h){var w=1;h=h.split(":");const I=[];for(;w>0&&h.length;)I.push(h.shift()),w--;return h.length&&I.push(h.join(":")),I}function Dn(h,w,I,A){this.j=h,this.i=w,this.l=I,this.S=A||1,this.V=new pi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Bo}function Bo(){this.i=null,this.g="",this.h=!1}var Ho={},Zi={};function qn(h,w,I){h.M=1,h.A=mt(ln(w)),h.u=I,h.R=!0,Ir(h,null)}function Ir(h,w){h.F=Date.now(),Qi(h),h.B=ln(h.A);var I=h.B,A=h.S;Array.isArray(A)||(A=[String(A)]),rs(I.i,"t",A),h.C=0,I=h.j.L,h.h=new Bo,h.g=Yo(h.j,I?w:null,!h.u),h.P>0&&(h.O=new Ra(T(h.Y,h,h.g),h.P)),w=h.V,I=h.g,A=h.ba;var q="readystatechange";Array.isArray(q)||(q&&($i[0]=q.toString()),q=$i);for(let Y=0;Y<q.length;Y++){const pe=qe(I,q[Y],A||w.handleEvent,!1,w.h||w);if(!pe)break;w.g[pe.key]=pe}w=h.J?B(h.J):{},h.u?(h.v||(h.v="POST"),w["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,w)):(h.v="GET",h.g.ea(h.B,h.v,null,w)),xr(),Ma(h.i,h.v,h.B,h.l,h.S,h.u)}Dn.prototype.ba=function(h){h=h.target;const w=this.O;w&&Nr(h)==3?w.j():this.Y(h)},Dn.prototype.Y=function(h){try{if(h==this.g)e:{const He=Nr(this.g),ut=this.g.ya(),ft=this.g.ca();if(!(He<3)&&(He!=3||this.g&&(this.h.h||this.g.la()||Ko(this.g)))){this.K||He!=4||ut==7||(ut==8||ft<=0?xr(3):xr(2)),Yi(this);var w=this.g.ca();this.X=w;var I=Wo(this);if(this.o=w==200,Oa(this.i,this.v,this.B,this.l,this.S,He,w),this.o){if(this.U&&!this.L){t:{if(this.g){var A,q=this.g;if((A=q.g?q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(A)){var Y=A;break t}}Y=null}if(h=Y)Tr(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,wt(this,h);else{this.o=!1,this.m=3,It(12),Gn(this),Ji(this);break e}}if(this.R){h=!0;let Rt;for(;!this.K&&this.C<I.length;)if(Rt=Fa(this,I),Rt==Zi){He==4&&(this.m=4,It(14),h=!1),Tr(this.i,this.l,null,"[Incomplete Response]");break}else if(Rt==Ho){this.m=4,It(15),Tr(this.i,this.l,I,"[Invalid Chunk]"),h=!1;break}else Tr(this.i,this.l,Rt,null),wt(this,Rt);if(Va(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),He!=4||I.length!=0||this.h.h||(this.m=1,It(16),h=!1),this.o=this.o&&h,!h)Tr(this.i,this.l,I,"[Invalid Chunked Response]"),Gn(this),Ji(this);else if(I.length>0&&!this.W){this.W=!0;var pe=this.j;pe.g==this&&pe.aa&&!pe.P&&(pe.j.info("Great, no buffering proxy detected. Bytes received: "+I.length),us(pe),pe.P=!0,It(11))}}else Tr(this.i,this.l,I,null),wt(this,I);He==4&&Gn(this),this.o&&!this.K&&(He==4?cn(this.j,this):(this.o=!1,Qi(this)))}else os(this.g),w==400&&I.indexOf("Unknown SID")>0?(this.m=3,It(12)):(this.m=0,It(13)),Gn(this),Ji(this)}}}catch{}finally{}};function Wo(h){if(!Va(h))return h.g.la();const w=Ko(h.g);if(w==="")return"";let I="";const A=w.length,q=Nr(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Gn(h),Ji(h),"";h.h.i=new p.TextDecoder}for(let Y=0;Y<A;Y++)h.h.h=!0,I+=h.h.i.decode(w[Y],{stream:!(q&&Y==A-1)});return w.length=0,h.h.g+=I,h.C=0,h.h.g}function Va(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Fa(h,w){var I=h.C,A=w.indexOf(`
`,I);return A==-1?Zi:(I=Number(w.substring(I,A)),isNaN(I)?Ho:(A+=1,A+I>w.length?Zi:(w=w.slice(A,A+I),h.C=A+I,w)))}Dn.prototype.cancel=function(){this.K=!0,Gn(this)};function Qi(h){h.T=Date.now()+h.H,$o(h,h.H)}function $o(h,w){if(h.D!=null)throw Error("WatchDog timer not null");h.D=yi(T(h.aa,h),w)}function Yi(h){h.D&&(p.clearTimeout(h.D),h.D=null)}Dn.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Vs(this.i,this.B),this.M!=2&&(xr(),It(17)),Gn(this),this.m=2,Ji(this)):$o(this,this.T-h)};function Ji(h){h.j.I==0||h.K||cn(h.j,h)}function Gn(h){Yi(h);var w=h.O;w&&typeof w.dispose=="function"&&w.dispose(),h.O=null,qi(h.V),h.g&&(w=h.g,h.g=null,w.abort(),w.dispose())}function wt(h,w){try{var I=h.j;if(I.I!=0&&(I.g==h||es(I.h,h))){if(!h.L&&es(I.h,h)&&I.I==3){try{var A=I.Ba.g.parse(w)}catch{A=null}if(Array.isArray(A)&&A.length==3){var q=A;if(q[0]==0){e:if(!I.v){if(I.g)if(I.g.F+3e3<h.F)Bs(I),Vn(I);else break e;Lr(I),It(18)}}else I.xa=q[1],0<I.xa-I.K&&q[2]<37500&&I.F&&I.A==0&&!I.C&&(I.C=yi(T(I.Va,I),6e3));Xi(I.h)<=1&&I.ta&&(I.ta=void 0)}else wn(I,11)}else if((h.L||I.g==h)&&Bs(I),!N(w))for(q=I.Ba.g.parse(w),w=0;w<q.length;w++){let ft=q[w];const Rt=ft[0];if(!(Rt<=I.K))if(I.K=Rt,ft=ft[1],I.I==2)if(ft[0]=="c"){I.M=ft[1],I.ba=ft[2];const zn=ft[3];zn!=null&&(I.ka=zn,I.j.info("VER="+I.ka));const hr=ft[4];hr!=null&&(I.za=hr,I.j.info("SVER="+I.za));const Yn=ft[5];Yn!=null&&typeof Yn=="number"&&Yn>0&&(A=1.5*Yn,I.O=A,I.j.info("backChannelRequestTimeoutMs_="+A)),A=I;const Mr=h.g;if(Mr){const Gs=Mr.g?Mr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Gs){var Y=A.h;Y.g||Gs.indexOf("spdy")==-1&&Gs.indexOf("quic")==-1&&Gs.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(Sr(Y,Y.h),Y.h=null))}if(A.G){const Ks=Mr.g?Mr.g.getResponseHeader("X-HTTP-Session-Id"):null;Ks&&(A.wa=Ks,we(A.J,A.G,Ks))}}I.I=3,I.l&&I.l.ra(),I.aa&&(I.T=Date.now()-h.F,I.j.info("Handshake RTT: "+I.T+"ms")),A=I;var pe=h;if(A.na=Ws(A,A.L?A.ba:null,A.W),pe.L){Ei(A.h,pe);var He=pe,ut=A.O;ut&&(He.H=ut),He.D&&(Yi(He),Qi(He)),A.g=pe}else Qt(A);I.i.length>0&&Fn(I)}else ft[0]!="stop"&&ft[0]!="close"||wn(I,7);else I.I==3&&(ft[0]=="stop"||ft[0]=="close"?ft[0]=="stop"?wn(I,7):nt(I):ft[0]!="noop"&&I.l&&I.l.qa(ft),I.A=0)}}xr(4)}catch{}}var Ul=class{constructor(h,w){this.g=h,this.map=w}};function Fs(h){this.l=h||10,p.PerformanceNavigationTiming?(h=p.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function qo(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Xi(h){return h.h?1:h.g?h.g.size:0}function es(h,w){return h.h?h.h==w:h.g?h.g.has(w):!1}function Sr(h,w){h.g?h.g.add(w):h.h=w}function Ei(h,w){h.h&&h.h==w?h.h=null:h.g&&h.g.has(w)&&h.g.delete(w)}Fs.prototype.cancel=function(){if(this.i=_n(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function _n(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let w=h.i;for(const I of h.g.values())w=w.concat(I.G);return w}return W(h.i)}var Ti=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ze(h,w){if(h){h=h.split("&");for(let I=0;I<h.length;I++){const A=h[I].indexOf("=");let q,Y=null;A>=0?(q=h[I].substring(0,A),Y=h[I].substring(A+1)):q=h[I],w(q,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function lt(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let w;h instanceof lt?(this.l=h.l,Kn(this,h.j),this.o=h.o,this.g=h.g,un(this,h.u),this.h=h.h,Pr(this,Si(h.i)),this.m=h.m):h&&(w=String(h).match(Ti))?(this.l=!1,Kn(this,w[1]||"",!0),this.o=Jr(w[2]||""),this.g=Jr(w[3]||"",!0),un(this,w[4]),this.h=Jr(w[5]||"",!0),Pr(this,w[6]||"",!0),this.m=Jr(w[7]||"")):(this.l=!1,this.i=new tt(null,this.l))}lt.prototype.toString=function(){const h=[];var w=this.j;w&&h.push(kr(w,Go,!0),":");var I=this.g;return(I||w=="file")&&(h.push("//"),(w=this.o)&&h.push(kr(w,Go,!0),"@"),h.push(ke(I).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.u,I!=null&&h.push(":",String(I))),(I=this.h)&&(this.g&&I.charAt(0)!="/"&&h.push("/"),h.push(kr(I,I.charAt(0)=="/"?Mn:Ii,!0))),(I=this.i.toString())&&h.push("?",I),(I=this.m)&&h.push("#",kr(I,ur)),h.join("")},lt.prototype.resolve=function(h){const w=ln(this);let I=!!h.j;I?Kn(w,h.j):I=!!h.o,I?w.o=h.o:I=!!h.g,I?w.g=h.g:I=h.u!=null;var A=h.h;if(I)un(w,h.u);else if(I=!!h.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var q=w.h.lastIndexOf("/");q!=-1&&(A=w.h.slice(0,q+1)+A)}if(q=A,q==".."||q==".")A="";else if(q.indexOf("./")!=-1||q.indexOf("/.")!=-1){A=q.lastIndexOf("/",0)==0,q=q.split("/");const Y=[];for(let pe=0;pe<q.length;){const He=q[pe++];He=="."?A&&pe==q.length&&Y.push(""):He==".."?((Y.length>1||Y.length==1&&Y[0]!="")&&Y.pop(),A&&pe==q.length&&Y.push("")):(Y.push(He),A=!0)}A=Y.join("/")}else A=q}return I?w.h=A:I=h.i.toString()!=="",I?Pr(w,Si(h.i)):I=!!h.m,I&&(w.m=h.m),w};function ln(h){return new lt(h)}function Kn(h,w,I){h.j=I?Jr(w,!0):w,h.j&&(h.j=h.j.replace(/:$/,""))}function un(h,w){if(w){if(w=Number(w),isNaN(w)||w<0)throw Error("Bad port number "+w);h.u=w}else h.u=null}function Pr(h,w,I){w instanceof tt?(h.i=w,Pi(h.i,h.l)):(I||(w=kr(w,At)),h.i=new tt(w,h.l))}function we(h,w,I){h.i.set(w,I)}function mt(h){return we(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Jr(h,w){return h?w?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function kr(h,w,I){return typeof h=="string"?(h=encodeURI(h).replace(w,tn),I&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function tn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Go=/[#\/\?@]/g,Ii=/[#\?:]/g,Mn=/[#\?]/g,At=/[#\?@]/g,ur=/#/g;function tt(h,w){this.h=this.g=null,this.i=h||null,this.j=!!w}function yn(h){h.g||(h.g=new Map,h.h=0,h.i&&Ze(h.i,function(w,I){h.add(decodeURIComponent(w.replace(/\+/g," ")),I)}))}r=tt.prototype,r.add=function(h,w){yn(this),this.i=null,h=Zn(this,h);let I=this.g.get(h);return I||this.g.set(h,I=[]),I.push(w),this.h+=1,this};function ts(h,w){yn(h),w=Zn(h,w),h.g.has(w)&&(h.i=null,h.h-=h.g.get(w).length,h.g.delete(w))}function Cr(h,w){return yn(h),w=Zn(h,w),h.g.has(w)}r.forEach=function(h,w){yn(this),this.g.forEach(function(I,A){I.forEach(function(q){h.call(w,q,A,this)},this)},this)};function ns(h,w){yn(h);let I=[];if(typeof w=="string")Cr(h,w)&&(I=I.concat(h.g.get(Zn(h,w))));else for(h=Array.from(h.g.values()),w=0;w<h.length;w++)I=I.concat(h[w]);return I}r.set=function(h,w){return yn(this),this.i=null,h=Zn(this,h),Cr(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[w]),this.h+=1,this},r.get=function(h,w){return h?(h=ns(this,h),h.length>0?String(h[0]):w):w};function rs(h,w,I){ts(h,w),I.length>0&&(h.i=null,h.g.set(Zn(h,w),W(I)),h.h+=I.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],w=Array.from(this.g.keys());for(let A=0;A<w.length;A++){var I=w[A];const q=ke(I);I=ns(this,I);for(let Y=0;Y<I.length;Y++){let pe=q;I[Y]!==""&&(pe+="="+ke(I[Y])),h.push(pe)}}return this.i=h.join("&")};function Si(h){const w=new tt;return w.i=h.i,h.g&&(w.g=new Map(h.g),w.h=h.h),w}function Zn(h,w){return w=String(w),h.j&&(w=w.toLowerCase()),w}function Pi(h,w){w&&!h.j&&(yn(h),h.i=null,h.g.forEach(function(I,A){const q=A.toLowerCase();A!=q&&(ts(this,A),rs(this,q,I))},h)),h.j=w}function On(h,w){const I=new vi;if(p.Image){const A=new Image;A.onload=k(Vt,I,"TestLoadImage: loaded",!0,w,A),A.onerror=k(Vt,I,"TestLoadImage: error",!1,w,A),A.onabort=k(Vt,I,"TestLoadImage: abort",!1,w,A),A.ontimeout=k(Vt,I,"TestLoadImage: timeout",!1,w,A),p.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=h}else w(!1)}function cr(h,w){const I=new vi,A=new AbortController,q=setTimeout(()=>{A.abort(),Vt(I,"TestPingServer: timeout",!1,w)},1e4);fetch(h,{signal:A.signal}).then(Y=>{clearTimeout(q),Y.ok?Vt(I,"TestPingServer: ok",!0,w):Vt(I,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(q),Vt(I,"TestPingServer: error",!1,w)})}function Vt(h,w,I,A,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),A(I)}catch{}}function is(){this.g=new mi}function ze(h){this.i=h.Sb||null,this.h=h.ab||!1}C(ze,Qr),ze.prototype.g=function(){return new bt(this.i,this.h)};function bt(h,w){kt.call(this),this.H=h,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}C(bt,kt),r=bt.prototype,r.open=function(h,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=w,this.readyState=1,jn(this)},r.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const w={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(w.body=h),(this.H||p).fetch(new Request(this.D,w)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Xr(this)),this.readyState=0},r.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,jn(this)),this.g&&(this.readyState=3,jn(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof p.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;gt(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function gt(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}r.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var w=h.value?h.value:new Uint8Array(0);(w=this.B.decode(w,{stream:!h.done}))&&(this.response=this.responseText+=w)}h.done?Xr(this):jn(this),this.readyState==3&&gt(this)}},r.Oa=function(h){this.g&&(this.response=this.responseText=h,Xr(this))},r.Na=function(h){this.g&&(this.response=h,Xr(this))},r.ga=function(){this.g&&Xr(this)};function Xr(h){h.readyState=4,h.l=null,h.j=null,h.B=null,jn(h)}r.setRequestHeader=function(h,w){this.A.append(h,w)},r.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],w=this.h.entries();for(var I=w.next();!I.done;)I=I.value,h.push(I[0]+": "+I[1]),I=w.next();return h.join(`\r
`)};function jn(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(bt.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function zs(h){let w="";return Pe(h,function(I,A){w+=A,w+=":",w+=I,w+=`\r
`}),w}function ki(h,w,I){e:{for(A in I){var A=!1;break e}A=!0}A||(I=zs(I),typeof h=="string"?I!=null&&ke(I):we(h,w,I))}function at(h){kt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}C(at,kt);var Us=/^https?$/i,ss=["POST","PUT"];r=at.prototype,r.Fa=function(h){this.H=h},r.ea=function(h,w,I,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);w=w?w.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ja.g(),this.g.onreadystatechange=b(T(this.Ca,this));try{this.B=!0,this.g.open(w,String(h),!0),this.B=!1}catch(Y){xt(this,Y);return}if(h=I||"",I=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var q in A)I.set(q,A[q]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const Y of A.keys())I.set(Y,A.get(Y));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(I.keys()).find(Y=>Y.toLowerCase()=="content-type"),q=p.FormData&&h instanceof p.FormData,!(Array.prototype.indexOf.call(ss,w,void 0)>=0)||A||q||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,pe]of I)this.g.setRequestHeader(Y,pe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(Y){xt(this,Y)}};function xt(h,w){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=w,h.o=5,vn(h),br(h)}function vn(h){h.A||(h.A=!0,Ct(h,"complete"),Ct(h,"error"))}r.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Ct(this,"complete"),Ct(this,"abort"),br(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),br(this,!0)),at.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Ar(this):this.Xa())},r.Xa=function(){Ar(this)};function Ar(h){if(h.h&&typeof c<"u"){if(h.v&&Nr(h)==4)setTimeout(h.Ca.bind(h),0);else if(Ct(h,"readystatechange"),Nr(h)==4){h.h=!1;try{const Y=h.ca();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var I;if(!(I=w)){var A;if(A=Y===0){let pe=String(h.D).match(Ti)[1]||null;!pe&&p.self&&p.self.location&&(pe=p.self.location.protocol.slice(0,-1)),A=!Us.test(pe?pe.toLowerCase():"")}I=A}if(I)Ct(h,"complete"),Ct(h,"success");else{h.o=6;try{var q=Nr(h)>2?h.g.statusText:""}catch{q=""}h.l=q+" ["+h.ca()+"]",vn(h)}}finally{br(h)}}}}function br(h,w){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const I=h.g;h.g=null,w||Ct(h,"ready");try{I.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Nr(h){return h.g?h.g.readyState:0}r.ca=function(){try{return Nr(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(h){if(this.g){var w=this.g.responseText;return h&&w.indexOf(h)==0&&(w=w.substring(h.length)),La(w)}};function Ko(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function os(h){const w={};h=(h.g&&Nr(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<h.length;A++){if(N(h[A]))continue;var I=Ki(h[A]);const q=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const Y=w[q]||[];w[q]=Y,Y.push(I)}se(w,function(A){return A.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Rr(h,w,I){return I&&I.internalChannelParams&&I.internalChannelParams[h]||w}function as(h){this.za=0,this.i=[],this.j=new vi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Rr("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Rr("baseRetryDelayMs",5e3,h),this.Za=Rr("retryDelaySeedMs",1e4,h),this.Ta=Rr("forwardChannelMaxRetries",2,h),this.va=Rr("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Fs(h&&h.concurrentRequestLimit),this.Ba=new is,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=as.prototype,r.ka=8,r.I=1,r.connect=function(h,w,I,A){It(0),this.W=h,this.H=w||{},I&&A!==void 0&&(this.H.OSID=I,this.H.OAID=A),this.F=this.X,this.J=Ws(this,null,this.W),Fn(this)};function nt(h){if(nn(h),h.I==3){var w=h.V++,I=ln(h.J);if(we(I,"SID",h.M),we(I,"RID",w),we(I,"TYPE","terminate"),Qn(h,I),w=new Dn(h,h.j,w),w.M=2,w.A=mt(ln(I)),I=!1,p.navigator&&p.navigator.sendBeacon)try{I=p.navigator.sendBeacon(w.A.toString(),"")}catch{}!I&&p.Image&&(new Image().src=w.A,I=!0),I||(w.g=Yo(w.j,null),w.g.ea(w.A)),w.F=Date.now(),Qi(w)}xn(h)}function Vn(h){h.g&&(us(h),h.g.cancel(),h.g=null)}function nn(h){Vn(h),h.v&&(p.clearTimeout(h.v),h.v=null),Bs(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&p.clearTimeout(h.m),h.m=null)}function Fn(h){if(!qo(h.h)&&!h.m){h.m=!0;var w=h.Ea;Te||D(),De||(Te(),De=!0),F.add(w,h),h.D=0}}function Zo(h,w){return Xi(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=w.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=yi(T(h.Ea,h,w),Hs(h,h.D)),h.D++,!0)}r.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const q=new Dn(this,this.j,h);let Y=this.o;if(this.U&&(Y?(Y=B(Y),Oe(Y,this.U)):Y=this.U),this.u!==null||this.R||(q.J=Y,Y=null),this.S)e:{for(var w=0,I=0;I<this.i.length;I++){t:{var A=this.i[I];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(w+=A,w>4096){w=I;break e}if(w===4096||I===this.i.length-1){w=I+1;break e}}w=1e3}else w=1e3;w=Qo(this,q,w),I=ln(this.J),we(I,"RID",h),we(I,"CVER",22),this.G&&we(I,"X-HTTP-Session-Id",this.G),Qn(this,I),Y&&(this.R?w="headers="+ke(zs(Y))+"&"+w:this.u&&ki(I,this.u,Y)),Sr(this.h,q),this.Ra&&we(I,"TYPE","init"),this.S?(we(I,"$req",w),we(I,"SID","null"),q.U=!0,qn(q,I,null)):qn(q,I,w),this.I=2}}else this.I==3&&(h?ls(this,h):this.i.length==0||qo(this.h)||ls(this))};function ls(h,w){var I;w?I=w.l:I=h.V++;const A=ln(h.J);we(A,"SID",h.M),we(A,"RID",I),we(A,"AID",h.K),Qn(h,A),h.u&&h.o&&ki(A,h.u,h.o),I=new Dn(h,h.j,I,h.D+1),h.u===null&&(I.J=h.o),w&&(h.i=w.G.concat(h.i)),w=Qo(h,I,1e3),I.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Sr(h.h,I),qn(I,A,w)}function Qn(h,w){h.H&&Pe(h.H,function(I,A){we(w,A,I)}),h.l&&Pe({},function(I,A){we(w,A,I)})}function Qo(h,w,I){I=Math.min(h.i.length,I);const A=h.l?T(h.l.Ka,h.l,h):null;e:{var q=h.i;let He=-1;for(;;){const ut=["count="+I];He==-1?I>0?(He=q[0].g,ut.push("ofs="+He)):He=0:ut.push("ofs="+He);let ft=!0;for(let Rt=0;Rt<I;Rt++){var Y=q[Rt].g;const zn=q[Rt].map;if(Y-=He,Y<0)He=Math.max(0,q[Rt].g-100),ft=!1;else try{Y="req"+Y+"_"||"";try{var pe=zn instanceof Map?zn:Object.entries(zn);for(const[hr,Yn]of pe){let Mr=Yn;y(Yn)&&(Mr=Zr(Yn)),ut.push(Y+hr+"="+encodeURIComponent(Mr))}}catch(hr){throw ut.push(Y+"type="+encodeURIComponent("_badmap")),hr}}catch{A&&A(zn)}}if(ft){pe=ut.join("&");break e}}pe=void 0}return h=h.i.splice(0,I),w.G=h,pe}function Qt(h){if(!h.g&&!h.v){h.Y=1;var w=h.Da;Te||D(),De||(Te(),De=!0),F.add(w,h),h.A=0}}function Lr(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=yi(T(h.Da,h),Hs(h,h.A)),h.A++,!0)}r.Da=function(){if(this.v=null,Dr(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=yi(T(this.Wa,this),h)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,It(10),Vn(this),Dr(this))};function us(h){h.B!=null&&(p.clearTimeout(h.B),h.B=null)}function Dr(h){h.g=new Dn(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var w=ln(h.na);we(w,"RID","rpc"),we(w,"SID",h.M),we(w,"AID",h.K),we(w,"CI",h.F?"0":"1"),!h.F&&h.ia&&we(w,"TO",h.ia),we(w,"TYPE","xmlhttp"),Qn(h,w),h.u&&h.o&&ki(w,h.u,h.o),h.O&&(h.g.H=h.O);var I=h.g;h=h.ba,I.M=1,I.A=mt(ln(w)),I.u=null,I.R=!0,Ir(I,h)}r.Va=function(){this.C!=null&&(this.C=null,Vn(this),Lr(this),It(19))};function Bs(h){h.C!=null&&(p.clearTimeout(h.C),h.C=null)}function cn(h,w){var I=null;if(h.g==w){Bs(h),us(h),h.g=null;var A=2}else if(es(h.h,w))I=w.G,Ei(h.h,w),A=1;else return;if(h.I!=0){if(w.o)if(A==1){I=w.u?w.u.length:0,w=Date.now()-w.F;var q=h.D;A=_i(),Ct(A,new Uo(A,I)),Fn(h)}else Qt(h);else if(q=w.m,q==3||q==0&&w.X>0||!(A==1&&Zo(h,w)||A==2&&Lr(h)))switch(I&&I.length>0&&(w=h.h,w.i=w.i.concat(I)),q){case 1:wn(h,5);break;case 4:wn(h,10);break;case 3:wn(h,6);break;default:wn(h,2)}}}function Hs(h,w){let I=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(I*=2),I*w}function wn(h,w){if(h.j.info("Error code "+w),w==2){var I=T(h.bb,h),A=h.Ua;const q=!A;A=new lt(A||"//www.google.com/images/cleardot.gif"),p.location&&p.location.protocol=="http"||Kn(A,"https"),mt(A),q?On(A.toString(),I):cr(A.toString(),I)}else It(2);h.I=0,h.l&&h.l.pa(w),xn(h),nn(h)}r.bb=function(h){h?(this.j.info("Successfully pinged google.com"),It(2)):(this.j.info("Failed to ping google.com"),It(1))};function xn(h){if(h.I=0,h.ja=[],h.l){const w=_n(h.h);(w.length!=0||h.i.length!=0)&&($(h.ja,w),$(h.ja,h.i),h.h.i.length=0,W(h.i),h.i.length=0),h.l.oa()}}function Ws(h,w,I){var A=I instanceof lt?ln(I):new lt(I);if(A.g!="")w&&(A.g=w+"."+A.g),un(A,A.u);else{var q=p.location;A=q.protocol,w=w?w+"."+q.hostname:q.hostname,q=+q.port;const Y=new lt(null);A&&Kn(Y,A),w&&(Y.g=w),q&&un(Y,q),I&&(Y.h=I),A=Y}return I=h.G,w=h.wa,I&&w&&we(A,I,w),we(A,"VER",h.ka),Qn(h,A),A}function Yo(h,w,I){if(w&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return w=h.Aa&&!h.ma?new at(new ze({ab:I})):new at(h.ma),w.Fa(h.L),w}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function $s(){}r=$s.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function qs(){}qs.prototype.g=function(h,w){return new Ht(h,w)};function Ht(h,w){kt.call(this),this.g=new as(w),this.l=h,this.h=w&&w.messageUrlParams||null,h=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(h?h["X-WebChannel-Content-Type"]=w.messageContentType:h={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.sa&&(h?h["X-WebChannel-Client-Profile"]=w.sa:h={"X-WebChannel-Client-Profile":w.sa}),this.g.U=h,(h=w&&w.Qb)&&!N(h)&&(this.g.u=h),this.A=w&&w.supportsCrossDomainXhr||!1,this.v=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!N(w)&&(this.g.G=w,h=this.h,h!==null&&w in h&&(h=this.h,w in h&&delete h[w])),this.j=new Ci(this)}C(Ht,kt),Ht.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ht.prototype.close=function(){nt(this.g)},Ht.prototype.o=function(h){var w=this.g;if(typeof h=="string"){var I={};I.__data__=h,h=I}else this.v&&(I={},I.__data__=Zr(h),h=I);w.i.push(new Ul(w.Ya++,h)),w.I==3&&Fn(w)},Ht.prototype.N=function(){this.g.l=null,delete this.j,nt(this.g),delete this.g,Ht.Z.N.call(this)};function Jo(h){gi.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var w=h.__sm__;if(w){e:{for(const I in w){h=I;break e}h=void 0}(this.i=h)&&(h=this.i,w=w!==null&&h in w?w[h]:void 0),this.data=w}else this.data=h}C(Jo,gi);function za(){Os.call(this),this.status=1}C(za,Os);function Ci(h){this.g=h}C(Ci,$s),Ci.prototype.ra=function(){Ct(this.g,"a")},Ci.prototype.qa=function(h){Ct(this.g,new Jo(h))},Ci.prototype.pa=function(h){Ct(this.g,new za)},Ci.prototype.oa=function(){Ct(this.g,"b")},qs.prototype.createWebChannel=qs.prototype.g,Ht.prototype.send=Ht.prototype.o,Ht.prototype.open=Ht.prototype.m,Ht.prototype.close=Ht.prototype.close,Xv=function(){return new qs},Jv=function(){return _i()},Yv=lr,qf={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},wi.NO_ERROR=0,wi.TIMEOUT=8,wi.HTTP_ERROR=6,lh=wi,xi.COMPLETE="complete",Qv=xi,Da.EventType=Yr,Yr.OPEN="a",Yr.CLOSE="b",Yr.ERROR="c",Yr.MESSAGE="d",kt.prototype.listen=kt.prototype.J,yu=Da,at.prototype.listenOnce=at.prototype.K,at.prototype.getLastError=at.prototype.Ha,at.prototype.getLastErrorCode=at.prototype.ya,at.prototype.getStatus=at.prototype.ca,at.prototype.getResponseJson=at.prototype.La,at.prototype.getResponseText=at.prototype.la,at.prototype.send=at.prototype.ea,at.prototype.setWithCredentials=at.prototype.Fa,Zv=at}).apply(typeof Xc<"u"?Xc:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Cn.UNAUTHENTICATED=new Cn(null),Cn.GOOGLE_CREDENTIALS=new Cn("google-credentials-uid"),Cn.FIRST_PARTY=new Cn("first-party-uid"),Cn.MOCK_USER=new Cn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dl="12.9.0";function oS(r){Dl=r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ta=new dp("@firebase/firestore");function fl(){return Ta.logLevel}function Se(r,...e){if(Ta.logLevel<=it.DEBUG){const t=e.map(kp);Ta.debug(`Firestore (${Dl}): ${r}`,...t)}}function bs(r,...e){if(Ta.logLevel<=it.ERROR){const t=e.map(kp);Ta.error(`Firestore (${Dl}): ${r}`,...t)}}function Ia(r,...e){if(Ta.logLevel<=it.WARN){const t=e.map(kp);Ta.warn(`Firestore (${Dl}): ${r}`,...t)}}function kp(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $e(r,e,t){let o="Unexpected state";typeof e=="string"?o=e:t=e,e0(r,o,t)}function e0(r,e,t){let o=`FIRESTORE (${Dl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{o+=" CONTEXT: "+JSON.stringify(t)}catch{o+=" CONTEXT: "+t}throw bs(o),new Error(o)}function yt(r,e,t,o){let a="Unexpected state";typeof t=="string"?a=t:o=t,r||e0(e,a,o)}function Ye(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _e extends Ls{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class aS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Cn.UNAUTHENTICATED)))}shutdown(){}}class lS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class uS{constructor(e){this.t=e,this.currentUser=Cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){yt(this.o===void 0,42304);let o=this.i;const a=x=>this.i!==o?(o=this.i,t(x)):Promise.resolve();let c=new ks;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new ks,e.enqueueRetryable((()=>a(this.currentUser)))};const p=()=>{const x=c;e.enqueueRetryable((async()=>{await x.promise,await a(this.currentUser)}))},y=x=>{Se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=x,this.o&&(this.auth.addAuthTokenListener(this.o),p())};this.t.onInit((x=>y(x))),setTimeout((()=>{if(!this.auth){const x=this.t.getImmediate({optional:!0});x?y(x):(Se("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new ks)}}),0),p()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((o=>this.i!==e?(Se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(yt(typeof o.accessToken=="string",31837,{l:o}),new t0(o.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return yt(e===null||typeof e=="string",2055,{h:e}),new Cn(e)}}class cS{constructor(e,t,o){this.P=e,this.T=t,this.I=o,this.type="FirstParty",this.user=Cn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class hS{constructor(e,t,o){this.P=e,this.T=t,this.I=o}getToken(){return Promise.resolve(new cS(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Cn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class B_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class dS{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,qr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){yt(this.o===void 0,3512);const o=c=>{c.error!=null&&Se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const p=c.token!==this.m;return this.m=c.token,Se("FirebaseAppCheckTokenProvider",`Received ${p?"new":"existing"} token.`),p?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>o(c)))};const a=c=>{Se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>a(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?a(c):Se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new B_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(yt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new B_(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fS(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let o=0;o<r;o++)t[o]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let o="";for(;o.length<20;){const a=fS(40);for(let c=0;c<a.length;++c)o.length<20&&a[c]<t&&(o+=e.charAt(a[c]%62))}return o}}function st(r,e){return r<e?-1:r>e?1:0}function Gf(r,e){const t=Math.min(r.length,e.length);for(let o=0;o<t;o++){const a=r.charAt(o),c=e.charAt(o);if(a!==c)return kf(a)===kf(c)?st(a,c):kf(a)?1:-1}return st(r.length,e.length)}const pS=55296,mS=57343;function kf(r){const e=r.charCodeAt(0);return e>=pS&&e<=mS}function Pl(r,e,t){return r.length===e.length&&r.every(((o,a)=>t(o,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_="__name__";class Vi{constructor(e,t,o){t===void 0?t=0:t>e.length&&$e(637,{offset:t,range:e.length}),o===void 0?o=e.length-t:o>e.length-t&&$e(1746,{length:o,range:e.length-t}),this.segments=e,this.offset=t,this.len=o}get length(){return this.len}isEqual(e){return Vi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Vi?e.forEach((o=>{t.push(o)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,o=this.limit();t<o;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const o=Math.min(e.length,t.length);for(let a=0;a<o;a++){const c=Vi.compareSegments(e.get(a),t.get(a));if(c!==0)return c}return st(e.length,t.length)}static compareSegments(e,t){const o=Vi.isNumericId(e),a=Vi.isNumericId(t);return o&&!a?-1:!o&&a?1:o&&a?Vi.extractNumericId(e).compare(Vi.extractNumericId(t)):Gf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ao.fromString(e.substring(4,e.length-2))}}class Tt extends Vi{construct(e,t,o){return new Tt(e,t,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const o of e){if(o.indexOf("//")>=0)throw new _e(ie.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);t.push(...o.split("/").filter((a=>a.length>0)))}return new Tt(t)}static emptyPath(){return new Tt([])}}const gS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pn extends Vi{construct(e,t,o){return new pn(e,t,o)}static isValidIdentifier(e){return gS.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===H_}static keyField(){return new pn([H_])}static fromServerFormat(e){const t=[];let o="",a=0;const c=()=>{if(o.length===0)throw new _e(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(o),o=""};let p=!1;for(;a<e.length;){const y=e[a];if(y==="\\"){if(a+1===e.length)throw new _e(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const x=e[a+1];if(x!=="\\"&&x!=="."&&x!=="`")throw new _e(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=x,a+=2}else y==="`"?(p=!p,a++):y!=="."||p?(o+=y,a++):(c(),a++)}if(c(),p)throw new _e(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pn(t)}static emptyPath(){return new pn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e){this.path=e}static fromPath(e){return new je(Tt.fromString(e))}static fromName(e){return new je(Tt.fromString(e).popFirst(5))}static empty(){return new je(Tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Tt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new je(new Tt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n0(r,e,t){if(!t)throw new _e(ie.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function _S(r,e,t,o){if(e===!0&&o===!0)throw new _e(ie.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function W_(r){if(!je.isDocumentKey(r))throw new _e(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function $_(r){if(je.isDocumentKey(r))throw new _e(ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function r0(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Bh(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(o){return o.constructor?o.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":$e(12329,{type:typeof r})}function Ns(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new _e(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Bh(r);throw new _e(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(r,e){const t={typeString:r};return e&&(t.value=e),t}function qu(r,e){if(!r0(r))throw new _e(ie.INVALID_ARGUMENT,"JSON must be an object");let t;for(const o in e)if(e[o]){const a=e[o].typeString,c="value"in e[o]?{value:e[o].value}:void 0;if(!(o in r)){t=`JSON missing required field: '${o}'`;break}const p=r[o];if(a&&typeof p!==a){t=`JSON field '${o}' must be a ${a}.`;break}if(c!==void 0&&p!==c.value){t=`Expected '${o}' field to equal '${c.value}'`;break}}if(t)throw new _e(ie.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q_=-62135596800,G_=1e6;class Pt{static now(){return Pt.fromMillis(Date.now())}static fromDate(e){return Pt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),o=Math.floor((e-1e3*t)*G_);return new Pt(t,o)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new _e(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new _e(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<q_)throw new _e(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _e(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/G_}_compareTo(e){return this.seconds===e.seconds?st(this.nanoseconds,e.nanoseconds):st(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Pt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(qu(e,Pt._jsonSchema))return new Pt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-q_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Pt._jsonSchemaVersion="firestore/timestamp/1.0",Pt._jsonSchema={type:Kt("string",Pt._jsonSchemaVersion),seconds:Kt("number"),nanoseconds:Kt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{static fromTimestamp(e){return new Qe(e)}static min(){return new Qe(new Pt(0,0))}static max(){return new Qe(new Pt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lu=-1;function yS(r,e){const t=r.toTimestamp().seconds,o=r.toTimestamp().nanoseconds+1,a=Qe.fromTimestamp(o===1e9?new Pt(t+1,0):new Pt(t,o));return new No(a,je.empty(),e)}function vS(r){return new No(r.readTime,r.key,Lu)}class No{constructor(e,t,o){this.readTime=e,this.documentKey=t,this.largestBatchId=o}static min(){return new No(Qe.min(),je.empty(),Lu)}static max(){return new No(Qe.max(),je.empty(),Lu)}}function wS(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=je.comparator(r.documentKey,e.documentKey),t!==0?t:st(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ES{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ml(r){if(r.code!==ie.FAILED_PRECONDITION||r.message!==xS)throw r;Se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&$e(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new oe(((o,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(o,a)},this.catchCallback=c=>{this.wrapFailure(t,c).next(o,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof oe?t:oe.resolve(t)}catch(t){return oe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):oe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):oe.reject(t)}static resolve(e){return new oe(((t,o)=>{t(e)}))}static reject(e){return new oe(((t,o)=>{o(e)}))}static waitFor(e){return new oe(((t,o)=>{let a=0,c=0,p=!1;e.forEach((y=>{++a,y.next((()=>{++c,p&&c===a&&t()}),(x=>o(x)))})),p=!0,c===a&&t()}))}static or(e){let t=oe.resolve(!1);for(const o of e)t=t.next((a=>a?oe.resolve(a):o()));return t}static forEach(e,t){const o=[];return e.forEach(((a,c)=>{o.push(t.call(this,a,c))})),this.waitFor(o)}static mapArray(e,t){return new oe(((o,a)=>{const c=e.length,p=new Array(c);let y=0;for(let x=0;x<c;x++){const T=x;t(e[T]).next((k=>{p[T]=k,++y,y===c&&o(p)}),(k=>a(k)))}}))}static doWhile(e,t){return new oe(((o,a)=>{const c=()=>{e()===!0?t().next((()=>{c()}),a):o()};c()}))}}function TS(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ol(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=o=>this.ae(o),this.ue=o=>t.writeSequenceNumber(o))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Hh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ap=-1;function Wh(r){return r==null}function Th(r){return r===0&&1/r==-1/0}function IS(r){return typeof r=="number"&&Number.isInteger(r)&&!Th(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0="";function SS(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=K_(e)),e=PS(r.get(t),e);return K_(e)}function PS(r,e){let t=e;const o=r.length;for(let a=0;a<o;a++){const c=r.charAt(a);switch(c){case"\0":t+="";break;case i0:t+="";break;default:t+=c}}return t}function K_(r){return r+i0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z_(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Fo(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function s0(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e,t){this.comparator=e,this.root=t||fn.EMPTY}insert(e,t){return new Mt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,fn.BLACK,null,null))}remove(e){return new Mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,fn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const o=this.comparator(e,t.key);if(o===0)return t.value;o<0?t=t.left:o>0&&(t=t.right)}return null}indexOf(e){let t=0,o=this.root;for(;!o.isEmpty();){const a=this.comparator(e,o.key);if(a===0)return t+o.left.size;a<0?o=o.left:(t+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,o)=>(e(t,o),!1)))}toString(){const e=[];return this.inorderTraversal(((t,o)=>(e.push(`${t}:${o}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new eh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new eh(this.root,e,this.comparator,!1)}getReverseIterator(){return new eh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new eh(this.root,e,this.comparator,!0)}}class eh{constructor(e,t,o,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?o(e.key,t):1,t&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class fn{constructor(e,t,o,a,c){this.key=e,this.value=t,this.color=o??fn.RED,this.left=a??fn.EMPTY,this.right=c??fn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,o,a,c){return new fn(e??this.key,t??this.value,o??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,o){let a=this;const c=o(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,t,o),null):c===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,o)),a.fixUp()}removeMin(){if(this.left.isEmpty())return fn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let o,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return fn.EMPTY;o=a.right.min(),a=a.copy(o.key,o.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,fn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,fn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw $e(43730,{key:this.key,value:this.value});if(this.right.isRed())throw $e(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw $e(27949);return e+(this.isRed()?0:1)}}fn.EMPTY=null,fn.RED=!0,fn.BLACK=!1;fn.EMPTY=new class{constructor(){this.size=0}get key(){throw $e(57766)}get value(){throw $e(16141)}get color(){throw $e(16727)}get left(){throw $e(29726)}get right(){throw $e(36894)}copy(e,t,o,a,c){return this}insert(e,t,o){return new fn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.comparator=e,this.data=new Mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,o)=>(e(t),!1)))}forEachInRange(e,t){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const a=o.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let o;for(o=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Q_(this.data.getIterator())}getIteratorFrom(e){return new Q_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((o=>{t=t.add(o)})),t}isEqual(e){if(!(e instanceof en)||this.size!==e.size)return!1;const t=this.data.getIterator(),o=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=o.getNext().key;if(this.comparator(a,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new en(this.comparator);return t.data=e,t}}class Q_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e){this.fields=e,e.sort(pn.comparator)}static empty(){return new yr([])}unionWith(e){let t=new en(pn.comparator);for(const o of this.fields)t=t.add(o);for(const o of e)t=t.add(o);return new yr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Pl(this.fields,e.fields,((t,o)=>t.isEqual(o)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new o0("Invalid base64 string: "+c):c}})(e);return new mn(t)}static fromUint8Array(e){const t=(function(a){let c="";for(let p=0;p<a.length;++p)c+=String.fromCharCode(a[p]);return c})(e);return new mn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const o=new Uint8Array(t.length);for(let a=0;a<t.length;a++)o[a]=t.charCodeAt(a);return o})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return st(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}mn.EMPTY_BYTE_STRING=new mn("");const kS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ro(r){if(yt(!!r,39018),typeof r=="string"){let e=0;const t=kS.exec(r);if(yt(!!t,46558,{timestamp:r}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const o=new Date(r);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:zt(r.seconds),nanos:zt(r.nanos)}}function zt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Lo(r){return typeof r=="string"?mn.fromBase64String(r):mn.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a0="server_timestamp",l0="__type__",u0="__previous_value__",c0="__local_write_time__";function bp(r){var t,o;return((o=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[l0])==null?void 0:o.stringValue)===a0}function $h(r){const e=r.mapValue.fields[u0];return bp(e)?$h(e):e}function Du(r){const e=Ro(r.mapValue.fields[c0].timestampValue);return new Pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(e,t,o,a,c,p,y,x,T,k,C){this.databaseId=e,this.appId=t,this.persistenceKey=o,this.host=a,this.ssl=c,this.forceLongPolling=p,this.autoDetectLongPolling=y,this.longPollingOptions=x,this.useFetchStreams=T,this.isUsingEmulator=k,this.apiKey=C}}const Ih="(default)";class Mu{constructor(e,t){this.projectId=e,this.database=t||Ih}static empty(){return new Mu("","")}get isDefaultDatabase(){return this.database===Ih}isEqual(e){return e instanceof Mu&&e.projectId===this.projectId&&e.database===this.database}}function AS(r,e){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new _e(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mu(r.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h0="__type__",bS="__max__",th={mapValue:{}},d0="__vector__",Sh="value";function Do(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?bp(r)?4:RS(r)?9007199254740991:NS(r)?10:11:$e(28295,{value:r})}function Wi(r,e){if(r===e)return!0;const t=Do(r);if(t!==Do(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Du(r).isEqual(Du(e));case 3:return(function(a,c){if(typeof a.timestampValue=="string"&&typeof c.timestampValue=="string"&&a.timestampValue.length===c.timestampValue.length)return a.timestampValue===c.timestampValue;const p=Ro(a.timestampValue),y=Ro(c.timestampValue);return p.seconds===y.seconds&&p.nanos===y.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(a,c){return Lo(a.bytesValue).isEqual(Lo(c.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(a,c){return zt(a.geoPointValue.latitude)===zt(c.geoPointValue.latitude)&&zt(a.geoPointValue.longitude)===zt(c.geoPointValue.longitude)})(r,e);case 2:return(function(a,c){if("integerValue"in a&&"integerValue"in c)return zt(a.integerValue)===zt(c.integerValue);if("doubleValue"in a&&"doubleValue"in c){const p=zt(a.doubleValue),y=zt(c.doubleValue);return p===y?Th(p)===Th(y):isNaN(p)&&isNaN(y)}return!1})(r,e);case 9:return Pl(r.arrayValue.values||[],e.arrayValue.values||[],Wi);case 10:case 11:return(function(a,c){const p=a.mapValue.fields||{},y=c.mapValue.fields||{};if(Z_(p)!==Z_(y))return!1;for(const x in p)if(p.hasOwnProperty(x)&&(y[x]===void 0||!Wi(p[x],y[x])))return!1;return!0})(r,e);default:return $e(52216,{left:r})}}function Ou(r,e){return(r.values||[]).find((t=>Wi(t,e)))!==void 0}function kl(r,e){if(r===e)return 0;const t=Do(r),o=Do(e);if(t!==o)return st(t,o);switch(t){case 0:case 9007199254740991:return 0;case 1:return st(r.booleanValue,e.booleanValue);case 2:return(function(c,p){const y=zt(c.integerValue||c.doubleValue),x=zt(p.integerValue||p.doubleValue);return y<x?-1:y>x?1:y===x?0:isNaN(y)?isNaN(x)?0:-1:1})(r,e);case 3:return Y_(r.timestampValue,e.timestampValue);case 4:return Y_(Du(r),Du(e));case 5:return Gf(r.stringValue,e.stringValue);case 6:return(function(c,p){const y=Lo(c),x=Lo(p);return y.compareTo(x)})(r.bytesValue,e.bytesValue);case 7:return(function(c,p){const y=c.split("/"),x=p.split("/");for(let T=0;T<y.length&&T<x.length;T++){const k=st(y[T],x[T]);if(k!==0)return k}return st(y.length,x.length)})(r.referenceValue,e.referenceValue);case 8:return(function(c,p){const y=st(zt(c.latitude),zt(p.latitude));return y!==0?y:st(zt(c.longitude),zt(p.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return J_(r.arrayValue,e.arrayValue);case 10:return(function(c,p){var b,W,$,Z;const y=c.fields||{},x=p.fields||{},T=(b=y[Sh])==null?void 0:b.arrayValue,k=(W=x[Sh])==null?void 0:W.arrayValue,C=st((($=T==null?void 0:T.values)==null?void 0:$.length)||0,((Z=k==null?void 0:k.values)==null?void 0:Z.length)||0);return C!==0?C:J_(T,k)})(r.mapValue,e.mapValue);case 11:return(function(c,p){if(c===th.mapValue&&p===th.mapValue)return 0;if(c===th.mapValue)return 1;if(p===th.mapValue)return-1;const y=c.fields||{},x=Object.keys(y),T=p.fields||{},k=Object.keys(T);x.sort(),k.sort();for(let C=0;C<x.length&&C<k.length;++C){const b=Gf(x[C],k[C]);if(b!==0)return b;const W=kl(y[x[C]],T[k[C]]);if(W!==0)return W}return st(x.length,k.length)})(r.mapValue,e.mapValue);default:throw $e(23264,{he:t})}}function Y_(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return st(r,e);const t=Ro(r),o=Ro(e),a=st(t.seconds,o.seconds);return a!==0?a:st(t.nanos,o.nanos)}function J_(r,e){const t=r.values||[],o=e.values||[];for(let a=0;a<t.length&&a<o.length;++a){const c=kl(t[a],o[a]);if(c)return c}return st(t.length,o.length)}function Cl(r){return Kf(r)}function Kf(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const o=Ro(t);return`time(${o.seconds},${o.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return Lo(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return je.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let o="[",a=!0;for(const c of t.values||[])a?a=!1:o+=",",o+=Kf(c);return o+"]"})(r.arrayValue):"mapValue"in r?(function(t){const o=Object.keys(t.fields||{}).sort();let a="{",c=!0;for(const p of o)c?c=!1:a+=",",a+=`${p}:${Kf(t.fields[p])}`;return a+"}"})(r.mapValue):$e(61005,{value:r})}function uh(r){switch(Do(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=$h(r);return e?16+uh(e):16;case 5:return 2*r.stringValue.length;case 6:return Lo(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(o){return(o.values||[]).reduce(((a,c)=>a+uh(c)),0)})(r.arrayValue);case 10:case 11:return(function(o){let a=0;return Fo(o.fields,((c,p)=>{a+=c.length+uh(p)})),a})(r.mapValue);default:throw $e(13486,{value:r})}}function X_(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Zf(r){return!!r&&"integerValue"in r}function Np(r){return!!r&&"arrayValue"in r}function ey(r){return!!r&&"nullValue"in r}function ty(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function ch(r){return!!r&&"mapValue"in r}function NS(r){var t,o;return((o=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[h0])==null?void 0:o.stringValue)===d0}function Su(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Fo(r.mapValue.fields,((t,o)=>e.mapValue.fields[t]=Su(o))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Su(r.arrayValue.values[t]);return e}return{...r}}function RS(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===bS}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e){this.value=e}static empty(){return new sr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let o=0;o<e.length-1;++o)if(t=(t.mapValue.fields||{})[e.get(o)],!ch(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Su(t)}setAll(e){let t=pn.emptyPath(),o={},a=[];e.forEach(((p,y)=>{if(!t.isImmediateParentOf(y)){const x=this.getFieldsMap(t);this.applyChanges(x,o,a),o={},a=[],t=y.popLast()}p?o[y.lastSegment()]=Su(p):a.push(y.lastSegment())}));const c=this.getFieldsMap(t);this.applyChanges(c,o,a)}delete(e){const t=this.field(e.popLast());ch(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Wi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let o=0;o<e.length;++o){let a=t.mapValue.fields[e.get(o)];ch(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(o)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,o){Fo(t,((a,c)=>e[a]=c));for(const a of o)delete e[a]}clone(){return new sr(Su(this.value))}}function f0(r){const e=[];return Fo(r.fields,((t,o)=>{const a=new pn([t]);if(ch(o)){const c=f0(o.mapValue).fields;if(c.length===0)e.push(a);else for(const p of c)e.push(a.child(p))}else e.push(a)})),new yr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e,t,o,a,c,p,y){this.key=e,this.documentType=t,this.version=o,this.readTime=a,this.createTime=c,this.data=p,this.documentState=y}static newInvalidDocument(e){return new An(e,0,Qe.min(),Qe.min(),Qe.min(),sr.empty(),0)}static newFoundDocument(e,t,o,a){return new An(e,1,t,Qe.min(),o,a,0)}static newNoDocument(e,t){return new An(e,2,t,Qe.min(),Qe.min(),sr.empty(),0)}static newUnknownDocument(e,t){return new An(e,3,t,Qe.min(),Qe.min(),sr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Qe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=sr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=sr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Qe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof An&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new An(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e,t){this.position=e,this.inclusive=t}}function ny(r,e,t){let o=0;for(let a=0;a<r.position.length;a++){const c=e[a],p=r.position[a];if(c.field.isKeyField()?o=je.comparator(je.fromName(p.referenceValue),t.key):o=kl(p,t.data.field(c.field)),c.dir==="desc"&&(o*=-1),o!==0)break}return o}function ry(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Wi(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(e,t="asc"){this.field=e,this.dir=t}}function LS(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{}class Gt extends p0{constructor(e,t,o){super(),this.field=e,this.op=t,this.value=o}static create(e,t,o){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,o):new MS(e,t,o):t==="array-contains"?new VS(e,o):t==="in"?new FS(e,o):t==="not-in"?new zS(e,o):t==="array-contains-any"?new US(e,o):new Gt(e,t,o)}static createKeyFieldInFilter(e,t,o){return t==="in"?new OS(e,o):new jS(e,o)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(kl(t,this.value)):t!==null&&Do(this.value)===Do(t)&&this.matchesComparison(kl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return $e(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hi extends p0{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new hi(e,t)}matches(e){return m0(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function m0(r){return r.op==="and"}function g0(r){return DS(r)&&m0(r)}function DS(r){for(const e of r.filters)if(e instanceof hi)return!1;return!0}function Qf(r){if(r instanceof Gt)return r.field.canonicalString()+r.op.toString()+Cl(r.value);if(g0(r))return r.filters.map((e=>Qf(e))).join(",");{const e=r.filters.map((t=>Qf(t))).join(",");return`${r.op}(${e})`}}function _0(r,e){return r instanceof Gt?(function(o,a){return a instanceof Gt&&o.op===a.op&&o.field.isEqual(a.field)&&Wi(o.value,a.value)})(r,e):r instanceof hi?(function(o,a){return a instanceof hi&&o.op===a.op&&o.filters.length===a.filters.length?o.filters.reduce(((c,p,y)=>c&&_0(p,a.filters[y])),!0):!1})(r,e):void $e(19439)}function y0(r){return r instanceof Gt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Cl(t.value)}`})(r):r instanceof hi?(function(t){return t.op.toString()+" {"+t.getFilters().map(y0).join(" ,")+"}"})(r):"Filter"}class MS extends Gt{constructor(e,t,o){super(e,t,o),this.key=je.fromName(o.referenceValue)}matches(e){const t=je.comparator(e.key,this.key);return this.matchesComparison(t)}}class OS extends Gt{constructor(e,t){super(e,"in",t),this.keys=v0("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class jS extends Gt{constructor(e,t){super(e,"not-in",t),this.keys=v0("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function v0(r,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((o=>je.fromName(o.referenceValue)))}class VS extends Gt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Np(t)&&Ou(t.arrayValue,this.value)}}class FS extends Gt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ou(this.value.arrayValue,t)}}class zS extends Gt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ou(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Ou(this.value.arrayValue,t)}}class US extends Gt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Np(t)||!t.arrayValue.values)&&t.arrayValue.values.some((o=>Ou(this.value.arrayValue,o)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(e,t=null,o=[],a=[],c=null,p=null,y=null){this.path=e,this.collectionGroup=t,this.orderBy=o,this.filters=a,this.limit=c,this.startAt=p,this.endAt=y,this.Te=null}}function iy(r,e=null,t=[],o=[],a=null,c=null,p=null){return new BS(r,e,t,o,a,c,p)}function Rp(r){const e=Ye(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((o=>Qf(o))).join(","),t+="|ob:",t+=e.orderBy.map((o=>(function(c){return c.field.canonicalString()+c.dir})(o))).join(","),Wh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((o=>Cl(o))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((o=>Cl(o))).join(",")),e.Te=t}return e.Te}function Lp(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!LS(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!_0(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!ry(r.startAt,e.startAt)&&ry(r.endAt,e.endAt)}function Yf(r){return je.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e,t=null,o=[],a=[],c=null,p="F",y=null,x=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=o,this.filters=a,this.limit=c,this.limitType=p,this.startAt=y,this.endAt=x,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function HS(r,e,t,o,a,c,p,y){return new jl(r,e,t,o,a,c,p,y)}function Dp(r){return new jl(r)}function sy(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function WS(r){return je.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function w0(r){return r.collectionGroup!==null}function Pu(r){const e=Ye(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),t.add(c.field.canonicalString());const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(p){let y=new en(pn.comparator);return p.filters.forEach((x=>{x.getFlattenedFilters().forEach((T=>{T.isInequality()&&(y=y.add(T.field))}))})),y})(e).forEach((c=>{t.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new ju(c,o))})),t.has(pn.keyField().canonicalString())||e.Ie.push(new ju(pn.keyField(),o))}return e.Ie}function Ui(r){const e=Ye(r);return e.Ee||(e.Ee=$S(e,Pu(r))),e.Ee}function $S(r,e){if(r.limitType==="F")return iy(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((a=>{const c=a.dir==="desc"?"asc":"desc";return new ju(a.field,c)}));const t=r.endAt?new Ph(r.endAt.position,r.endAt.inclusive):null,o=r.startAt?new Ph(r.startAt.position,r.startAt.inclusive):null;return iy(r.path,r.collectionGroup,e,r.filters,r.limit,t,o)}}function Jf(r,e){const t=r.filters.concat([e]);return new jl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function qS(r,e){const t=r.explicitOrderBy.concat([e]);return new jl(r.path,r.collectionGroup,t,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}function Xf(r,e,t){return new jl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function qh(r,e){return Lp(Ui(r),Ui(e))&&r.limitType===e.limitType}function x0(r){return`${Rp(Ui(r))}|lt:${r.limitType}`}function pl(r){return`Query(target=${(function(t){let o=t.path.canonicalString();return t.collectionGroup!==null&&(o+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(o+=`, filters: [${t.filters.map((a=>y0(a))).join(", ")}]`),Wh(t.limit)||(o+=", limit: "+t.limit),t.orderBy.length>0&&(o+=`, orderBy: [${t.orderBy.map((a=>(function(p){return`${p.field.canonicalString()} (${p.dir})`})(a))).join(", ")}]`),t.startAt&&(o+=", startAt: ",o+=t.startAt.inclusive?"b:":"a:",o+=t.startAt.position.map((a=>Cl(a))).join(",")),t.endAt&&(o+=", endAt: ",o+=t.endAt.inclusive?"a:":"b:",o+=t.endAt.position.map((a=>Cl(a))).join(",")),`Target(${o})`})(Ui(r))}; limitType=${r.limitType})`}function Gh(r,e){return e.isFoundDocument()&&(function(o,a){const c=a.key.path;return o.collectionGroup!==null?a.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(c):je.isDocumentKey(o.path)?o.path.isEqual(c):o.path.isImmediateParentOf(c)})(r,e)&&(function(o,a){for(const c of Pu(o))if(!c.field.isKeyField()&&a.data.field(c.field)===null)return!1;return!0})(r,e)&&(function(o,a){for(const c of o.filters)if(!c.matches(a))return!1;return!0})(r,e)&&(function(o,a){return!(o.startAt&&!(function(p,y,x){const T=ny(p,y,x);return p.inclusive?T<=0:T<0})(o.startAt,Pu(o),a)||o.endAt&&!(function(p,y,x){const T=ny(p,y,x);return p.inclusive?T>=0:T>0})(o.endAt,Pu(o),a))})(r,e)}function GS(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function E0(r){return(e,t)=>{let o=!1;for(const a of Pu(r)){const c=KS(a,e,t);if(c!==0)return c;o=o||a.field.isKeyField()}return 0}}function KS(r,e,t){const o=r.field.isKeyField()?je.comparator(e.key,t.key):(function(c,p,y){const x=p.data.field(c),T=y.data.field(c);return x!==null&&T!==null?kl(x,T):$e(42886)})(r.field,e,t);switch(r.dir){case"asc":return o;case"desc":return-1*o;default:return $e(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),o=this.inner[t];if(o!==void 0){for(const[a,c]of o)if(this.equalsFn(a,e))return c}}has(e){return this.get(e)!==void 0}set(e,t){const o=this.mapKeyFn(e),a=this.inner[o];if(a===void 0)return this.inner[o]=[[e,t]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),o=this.inner[t];if(o===void 0)return!1;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return o.length===1?delete this.inner[t]:o.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Fo(this.inner,((t,o)=>{for(const[a,c]of o)e(a,c)}))}isEmpty(){return s0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS=new Mt(je.comparator);function Rs(){return ZS}const T0=new Mt(je.comparator);function vu(...r){let e=T0;for(const t of r)e=e.insert(t.key,t);return e}function I0(r){let e=T0;return r.forEach(((t,o)=>e=e.insert(t,o.overlayedDocument))),e}function _a(){return ku()}function S0(){return ku()}function ku(){return new Aa((r=>r.toString()),((r,e)=>r.isEqual(e)))}const QS=new Mt(je.comparator),YS=new en(je.comparator);function ot(...r){let e=YS;for(const t of r)e=e.add(t);return e}const JS=new en(st);function XS(){return JS}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mp(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Th(e)?"-0":e}}function P0(r){return{integerValue:""+r}}function eP(r,e){return IS(e)?P0(e):Mp(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(){this._=void 0}}function tP(r,e,t){return r instanceof kh?(function(a,c){const p={fields:{[l0]:{stringValue:a0},[c0]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return c&&bp(c)&&(c=$h(c)),c&&(p.fields[u0]=c),{mapValue:p}})(t,e):r instanceof Vu?C0(r,e):r instanceof Fu?A0(r,e):(function(a,c){const p=k0(a,c),y=oy(p)+oy(a.Ae);return Zf(p)&&Zf(a.Ae)?P0(y):Mp(a.serializer,y)})(r,e)}function nP(r,e,t){return r instanceof Vu?C0(r,e):r instanceof Fu?A0(r,e):t}function k0(r,e){return r instanceof Ch?(function(o){return Zf(o)||(function(c){return!!c&&"doubleValue"in c})(o)})(e)?e:{integerValue:0}:null}class kh extends Kh{}class Vu extends Kh{constructor(e){super(),this.elements=e}}function C0(r,e){const t=b0(e);for(const o of r.elements)t.some((a=>Wi(a,o)))||t.push(o);return{arrayValue:{values:t}}}class Fu extends Kh{constructor(e){super(),this.elements=e}}function A0(r,e){let t=b0(e);for(const o of r.elements)t=t.filter((a=>!Wi(a,o)));return{arrayValue:{values:t}}}class Ch extends Kh{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function oy(r){return zt(r.integerValue||r.doubleValue)}function b0(r){return Np(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function rP(r,e){return r.field.isEqual(e.field)&&(function(o,a){return o instanceof Vu&&a instanceof Vu||o instanceof Fu&&a instanceof Fu?Pl(o.elements,a.elements,Wi):o instanceof Ch&&a instanceof Ch?Wi(o.Ae,a.Ae):o instanceof kh&&a instanceof kh})(r.transform,e.transform)}class iP{constructor(e,t){this.version=e,this.transformResults=t}}class vr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new vr}static exists(e){return new vr(void 0,e)}static updateTime(e){return new vr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function hh(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Zh{}function N0(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Qh(r.key,vr.none()):new Gu(r.key,r.data,vr.none());{const t=r.data,o=sr.empty();let a=new en(pn.comparator);for(let c of e.fields)if(!a.has(c)){let p=t.field(c);p===null&&c.length>1&&(c=c.popLast(),p=t.field(c)),p===null?o.delete(c):o.set(c,p),a=a.add(c)}return new zo(r.key,o,new yr(a.toArray()),vr.none())}}function sP(r,e,t){r instanceof Gu?(function(a,c,p){const y=a.value.clone(),x=ly(a.fieldTransforms,c,p.transformResults);y.setAll(x),c.convertToFoundDocument(p.version,y).setHasCommittedMutations()})(r,e,t):r instanceof zo?(function(a,c,p){if(!hh(a.precondition,c))return void c.convertToUnknownDocument(p.version);const y=ly(a.fieldTransforms,c,p.transformResults),x=c.data;x.setAll(R0(a)),x.setAll(y),c.convertToFoundDocument(p.version,x).setHasCommittedMutations()})(r,e,t):(function(a,c,p){c.convertToNoDocument(p.version).setHasCommittedMutations()})(0,e,t)}function Cu(r,e,t,o){return r instanceof Gu?(function(c,p,y,x){if(!hh(c.precondition,p))return y;const T=c.value.clone(),k=uy(c.fieldTransforms,x,p);return T.setAll(k),p.convertToFoundDocument(p.version,T).setHasLocalMutations(),null})(r,e,t,o):r instanceof zo?(function(c,p,y,x){if(!hh(c.precondition,p))return y;const T=uy(c.fieldTransforms,x,p),k=p.data;return k.setAll(R0(c)),k.setAll(T),p.convertToFoundDocument(p.version,k).setHasLocalMutations(),y===null?null:y.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((C=>C.field)))})(r,e,t,o):(function(c,p,y){return hh(c.precondition,p)?(p.convertToNoDocument(p.version).setHasLocalMutations(),null):y})(r,e,t)}function oP(r,e){let t=null;for(const o of r.fieldTransforms){const a=e.data.field(o.field),c=k0(o.transform,a||null);c!=null&&(t===null&&(t=sr.empty()),t.set(o.field,c))}return t||null}function ay(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(o,a){return o===void 0&&a===void 0||!(!o||!a)&&Pl(o,a,((c,p)=>rP(c,p)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Gu extends Zh{constructor(e,t,o,a=[]){super(),this.key=e,this.value=t,this.precondition=o,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class zo extends Zh{constructor(e,t,o,a,c=[]){super(),this.key=e,this.data=t,this.fieldMask=o,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function R0(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const o=r.data.field(t);e.set(t,o)}})),e}function ly(r,e,t){const o=new Map;yt(r.length===t.length,32656,{Ve:t.length,de:r.length});for(let a=0;a<t.length;a++){const c=r[a],p=c.transform,y=e.data.field(c.field);o.set(c.field,nP(p,y,t[a]))}return o}function uy(r,e,t){const o=new Map;for(const a of r){const c=a.transform,p=t.data.field(a.field);o.set(a.field,tP(c,p,e))}return o}class Qh extends Zh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class aP extends Zh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(e,t,o,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=o,this.mutations=a}applyToRemoteDocument(e,t){const o=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&sP(c,e,o[a])}}applyToLocalView(e,t){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(t=Cu(o,e,t,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(t=Cu(o,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const o=S0();return this.mutations.forEach((a=>{const c=e.get(a.key),p=c.overlayedDocument;let y=this.applyToLocalView(p,c.mutatedFields);y=t.has(a.key)?null:y;const x=N0(p,y);x!==null&&o.set(a.key,x),p.isValidDocument()||p.convertToNoDocument(Qe.min())})),o}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ot())}isEqual(e){return this.batchId===e.batchId&&Pl(this.mutations,e.mutations,((t,o)=>ay(t,o)))&&Pl(this.baseMutations,e.baseMutations,((t,o)=>ay(t,o)))}}class Op{constructor(e,t,o,a){this.batch=e,this.commitVersion=t,this.mutationResults=o,this.docVersions=a}static from(e,t,o){yt(e.mutations.length===o.length,58842,{me:e.mutations.length,fe:o.length});let a=(function(){return QS})();const c=e.mutations;for(let p=0;p<c.length;p++)a=a.insert(c[p].key,o[p].version);return new Op(e,t,o,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qt,ct;function hP(r){switch(r){case ie.OK:return $e(64938);case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0;default:return $e(15467,{code:r})}}function L0(r){if(r===void 0)return bs("GRPC error has no .code"),ie.UNKNOWN;switch(r){case qt.OK:return ie.OK;case qt.CANCELLED:return ie.CANCELLED;case qt.UNKNOWN:return ie.UNKNOWN;case qt.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case qt.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case qt.INTERNAL:return ie.INTERNAL;case qt.UNAVAILABLE:return ie.UNAVAILABLE;case qt.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case qt.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case qt.NOT_FOUND:return ie.NOT_FOUND;case qt.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case qt.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case qt.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case qt.ABORTED:return ie.ABORTED;case qt.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case qt.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case qt.DATA_LOSS:return ie.DATA_LOSS;default:return $e(39323,{code:r})}}(ct=qt||(qt={}))[ct.OK=0]="OK",ct[ct.CANCELLED=1]="CANCELLED",ct[ct.UNKNOWN=2]="UNKNOWN",ct[ct.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ct[ct.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ct[ct.NOT_FOUND=5]="NOT_FOUND",ct[ct.ALREADY_EXISTS=6]="ALREADY_EXISTS",ct[ct.PERMISSION_DENIED=7]="PERMISSION_DENIED",ct[ct.UNAUTHENTICATED=16]="UNAUTHENTICATED",ct[ct.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ct[ct.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ct[ct.ABORTED=10]="ABORTED",ct[ct.OUT_OF_RANGE=11]="OUT_OF_RANGE",ct[ct.UNIMPLEMENTED=12]="UNIMPLEMENTED",ct[ct.INTERNAL=13]="INTERNAL",ct[ct.UNAVAILABLE=14]="UNAVAILABLE",ct[ct.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fP=new Ao([4294967295,4294967295],0);function cy(r){const e=dP().encode(r),t=new Kv;return t.update(e),new Uint8Array(t.digest())}function hy(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),o=e.getUint32(4,!0),a=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Ao([t,o],0),new Ao([a,c],0)]}class jp{constructor(e,t,o){if(this.bitmap=e,this.padding=t,this.hashCount=o,t<0||t>=8)throw new wu(`Invalid padding: ${t}`);if(o<0)throw new wu(`Invalid hash count: ${o}`);if(e.length>0&&this.hashCount===0)throw new wu(`Invalid hash count: ${o}`);if(e.length===0&&t!==0)throw new wu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ao.fromNumber(this.ge)}ye(e,t,o){let a=e.add(t.multiply(Ao.fromNumber(o)));return a.compare(fP)===1&&(a=new Ao([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=cy(e),[o,a]=hy(t);for(let c=0;c<this.hashCount;c++){const p=this.ye(o,a,c);if(!this.we(p))return!1}return!0}static create(e,t,o){const a=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),p=new jp(c,a,t);return o.forEach((y=>p.insert(y))),p}insert(e){if(this.ge===0)return;const t=cy(e),[o,a]=hy(t);for(let c=0;c<this.hashCount;c++){const p=this.ye(o,a,c);this.be(p)}}be(e){const t=Math.floor(e/8),o=e%8;this.bitmap[t]|=1<<o}}class wu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,t,o,a,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=o,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,o){const a=new Map;return a.set(e,Ku.createSynthesizedTargetChangeForCurrentChange(e,t,o)),new Yh(Qe.min(),a,new Mt(st),Rs(),ot())}}class Ku{constructor(e,t,o,a,c){this.resumeToken=e,this.current=t,this.addedDocuments=o,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,o){return new Ku(o,t,ot(),ot(),ot())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(e,t,o,a){this.Se=e,this.removedTargetIds=t,this.key=o,this.De=a}}class D0{constructor(e,t){this.targetId=e,this.Ce=t}}class M0{constructor(e,t,o=mn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=o,this.cause=a}}class dy{constructor(){this.ve=0,this.Fe=fy(),this.Me=mn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ot(),t=ot(),o=ot();return this.Fe.forEach(((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:o=o.add(a);break;default:$e(38017,{changeType:c})}})),new Ku(this.Me,this.xe,e,t,o)}Ke(){this.Oe=!1,this.Fe=fy()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,yt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class pP{constructor(e){this.Ge=e,this.ze=new Map,this.je=Rs(),this.He=nh(),this.Je=nh(),this.Ze=new Mt(st)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const o=this.nt(t);switch(e.state){case 0:this.rt(t)&&o.Le(e.resumeToken);break;case 1:o.We(),o.Ne||o.Ke(),o.Le(e.resumeToken);break;case 2:o.We(),o.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(o.Qe(),o.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),o.Le(e.resumeToken));break;default:$e(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((o,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,o=e.Ce.count,a=this.ot(t);if(a){const c=a.target;if(Yf(c))if(o===0){const p=new je(c.path);this.et(t,p,An.newNoDocument(p,Qe.min()))}else yt(o===1,20013,{expectedCount:o});else{const p=this._t(t);if(p!==o){const y=this.ut(e),x=y?this.ct(y,e,p):1;if(x!==0){this.it(t);const T=x===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,T)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:o="",padding:a=0},hashCount:c=0}=t;let p,y;try{p=Lo(o).toUint8Array()}catch(x){if(x instanceof o0)return Ia("Decoding the base64 bloom filter in existence filter failed ("+x.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw x}try{y=new jp(p,a,c)}catch(x){return Ia(x instanceof wu?"BloomFilter error: ":"Applying bloom filter failed: ",x),null}return y.ge===0?null:y}ct(e,t,o){return t.Ce.count===o-this.Pt(e,t.targetId)?0:2}Pt(e,t){const o=this.Ge.getRemoteKeysForTarget(t);let a=0;return o.forEach((c=>{const p=this.Ge.ht(),y=`projects/${p.projectId}/databases/${p.database}/documents/${c.path.canonicalString()}`;e.mightContain(y)||(this.et(t,c,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((c,p)=>{const y=this.ot(p);if(y){if(c.current&&Yf(y.target)){const x=new je(y.target.path);this.It(x).has(p)||this.Et(p,x)||this.et(p,x,An.newNoDocument(x,e))}c.Be&&(t.set(p,c.ke()),c.Ke())}}));let o=ot();this.Je.forEach(((c,p)=>{let y=!0;p.forEachWhile((x=>{const T=this.ot(x);return!T||T.purpose==="TargetPurposeLimboResolution"||(y=!1,!1)})),y&&(o=o.add(c))})),this.je.forEach(((c,p)=>p.setReadTime(e)));const a=new Yh(e,t,this.Ze,this.je,o);return this.je=Rs(),this.He=nh(),this.Je=nh(),this.Ze=new Mt(st),a}Ye(e,t){if(!this.rt(e))return;const o=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,o),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,o){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.qe(t,1):a.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),o&&(this.je=this.je.insert(t,o))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new dy,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new en(st),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new en(st),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Se("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new dy),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function nh(){return new Mt(je.comparator)}function fy(){return new Mt(je.comparator)}const mP={asc:"ASCENDING",desc:"DESCENDING"},gP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_P={and:"AND",or:"OR"};class yP{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ep(r,e){return r.useProto3Json||Wh(e)?e:{value:e}}function Ah(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function O0(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function vP(r,e){return Ah(r,e.toTimestamp())}function Bi(r){return yt(!!r,49232),Qe.fromTimestamp((function(t){const o=Ro(t);return new Pt(o.seconds,o.nanos)})(r))}function Vp(r,e){return tp(r,e).canonicalString()}function tp(r,e){const t=(function(a){return new Tt(["projects",a.projectId,"databases",a.database])})(r).child("documents");return e===void 0?t:t.child(e)}function j0(r){const e=Tt.fromString(r);return yt(B0(e),10190,{key:e.toString()}),e}function np(r,e){return Vp(r.databaseId,e.path)}function Cf(r,e){const t=j0(e);if(t.get(1)!==r.databaseId.projectId)throw new _e(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new _e(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new je(F0(t))}function V0(r,e){return Vp(r.databaseId,e)}function wP(r){const e=j0(r);return e.length===4?Tt.emptyPath():F0(e)}function rp(r){return new Tt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function F0(r){return yt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function py(r,e,t){return{name:np(r,e),fields:t.value.mapValue.fields}}function xP(r,e){let t;if("targetChange"in e){e.targetChange;const o=(function(T){return T==="NO_CHANGE"?0:T==="ADD"?1:T==="REMOVE"?2:T==="CURRENT"?3:T==="RESET"?4:$e(39313,{state:T})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],c=(function(T,k){return T.useProto3Json?(yt(k===void 0||typeof k=="string",58123),mn.fromBase64String(k||"")):(yt(k===void 0||k instanceof Buffer||k instanceof Uint8Array,16193),mn.fromUint8Array(k||new Uint8Array))})(r,e.targetChange.resumeToken),p=e.targetChange.cause,y=p&&(function(T){const k=T.code===void 0?ie.UNKNOWN:L0(T.code);return new _e(k,T.message||"")})(p);t=new M0(o,a,c,y||null)}else if("documentChange"in e){e.documentChange;const o=e.documentChange;o.document,o.document.name,o.document.updateTime;const a=Cf(r,o.document.name),c=Bi(o.document.updateTime),p=o.document.createTime?Bi(o.document.createTime):Qe.min(),y=new sr({mapValue:{fields:o.document.fields}}),x=An.newFoundDocument(a,c,p,y),T=o.targetIds||[],k=o.removedTargetIds||[];t=new dh(T,k,x.key,x)}else if("documentDelete"in e){e.documentDelete;const o=e.documentDelete;o.document;const a=Cf(r,o.document),c=o.readTime?Bi(o.readTime):Qe.min(),p=An.newNoDocument(a,c),y=o.removedTargetIds||[];t=new dh([],y,p.key,p)}else if("documentRemove"in e){e.documentRemove;const o=e.documentRemove;o.document;const a=Cf(r,o.document),c=o.removedTargetIds||[];t=new dh([],c,a,null)}else{if(!("filter"in e))return $e(11601,{Vt:e});{e.filter;const o=e.filter;o.targetId;const{count:a=0,unchangedNames:c}=o,p=new cP(a,c),y=o.targetId;t=new D0(y,p)}}return t}function EP(r,e){let t;if(e instanceof Gu)t={update:py(r,e.key,e.value)};else if(e instanceof Qh)t={delete:np(r,e.key)};else if(e instanceof zo)t={update:py(r,e.key,e.data),updateMask:NP(e.fieldMask)};else{if(!(e instanceof aP))return $e(16599,{dt:e.type});t={verify:np(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((o=>(function(c,p){const y=p.transform;if(y instanceof kh)return{fieldPath:p.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(y instanceof Vu)return{fieldPath:p.field.canonicalString(),appendMissingElements:{values:y.elements}};if(y instanceof Fu)return{fieldPath:p.field.canonicalString(),removeAllFromArray:{values:y.elements}};if(y instanceof Ch)return{fieldPath:p.field.canonicalString(),increment:y.Ae};throw $e(20930,{transform:p.transform})})(0,o)))),e.precondition.isNone||(t.currentDocument=(function(a,c){return c.updateTime!==void 0?{updateTime:vP(a,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:$e(27497)})(r,e.precondition)),t}function TP(r,e){return r&&r.length>0?(yt(e!==void 0,14353),r.map((t=>(function(a,c){let p=a.updateTime?Bi(a.updateTime):Bi(c);return p.isEqual(Qe.min())&&(p=Bi(c)),new iP(p,a.transformResults||[])})(t,e)))):[]}function IP(r,e){return{documents:[V0(r,e.path)]}}function SP(r,e){const t={structuredQuery:{}},o=e.path;let a;e.collectionGroup!==null?(a=o,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=o.popLast(),t.structuredQuery.from=[{collectionId:o.lastSegment()}]),t.parent=V0(r,a);const c=(function(T){if(T.length!==0)return U0(hi.create(T,"and"))})(e.filters);c&&(t.structuredQuery.where=c);const p=(function(T){if(T.length!==0)return T.map((k=>(function(b){return{field:ml(b.field),direction:CP(b.dir)}})(k)))})(e.orderBy);p&&(t.structuredQuery.orderBy=p);const y=ep(r,e.limit);return y!==null&&(t.structuredQuery.limit=y),e.startAt&&(t.structuredQuery.startAt=(function(T){return{before:T.inclusive,values:T.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(T){return{before:!T.inclusive,values:T.position}})(e.endAt)),{ft:t,parent:a}}function PP(r){let e=wP(r.parent);const t=r.structuredQuery,o=t.from?t.from.length:0;let a=null;if(o>0){yt(o===1,65062);const k=t.from[0];k.allDescendants?a=k.collectionId:e=e.child(k.collectionId)}let c=[];t.where&&(c=(function(C){const b=z0(C);return b instanceof hi&&g0(b)?b.getFilters():[b]})(t.where));let p=[];t.orderBy&&(p=(function(C){return C.map((b=>(function($){return new ju(gl($.field),(function(J){switch(J){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})($.direction))})(b)))})(t.orderBy));let y=null;t.limit&&(y=(function(C){let b;return b=typeof C=="object"?C.value:C,Wh(b)?null:b})(t.limit));let x=null;t.startAt&&(x=(function(C){const b=!!C.before,W=C.values||[];return new Ph(W,b)})(t.startAt));let T=null;return t.endAt&&(T=(function(C){const b=!C.before,W=C.values||[];return new Ph(W,b)})(t.endAt)),HS(e,a,p,c,y,"F",x,T)}function kP(r,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return $e(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function z0(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const o=gl(t.unaryFilter.field);return Gt.create(o,"==",{doubleValue:NaN});case"IS_NULL":const a=gl(t.unaryFilter.field);return Gt.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=gl(t.unaryFilter.field);return Gt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const p=gl(t.unaryFilter.field);return Gt.create(p,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return $e(61313);default:return $e(60726)}})(r):r.fieldFilter!==void 0?(function(t){return Gt.create(gl(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return $e(58110);default:return $e(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return hi.create(t.compositeFilter.filters.map((o=>z0(o))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return $e(1026)}})(t.compositeFilter.op))})(r):$e(30097,{filter:r})}function CP(r){return mP[r]}function AP(r){return gP[r]}function bP(r){return _P[r]}function ml(r){return{fieldPath:r.canonicalString()}}function gl(r){return pn.fromServerFormat(r.fieldPath)}function U0(r){return r instanceof Gt?(function(t){if(t.op==="=="){if(ty(t.value))return{unaryFilter:{field:ml(t.field),op:"IS_NAN"}};if(ey(t.value))return{unaryFilter:{field:ml(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(ty(t.value))return{unaryFilter:{field:ml(t.field),op:"IS_NOT_NAN"}};if(ey(t.value))return{unaryFilter:{field:ml(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ml(t.field),op:AP(t.op),value:t.value}}})(r):r instanceof hi?(function(t){const o=t.getFilters().map((a=>U0(a)));return o.length===1?o[0]:{compositeFilter:{op:bP(t.op),filters:o}}})(r):$e(54877,{filter:r})}function NP(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function B0(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}function H0(r){return!!r&&typeof r._toProto=="function"&&r._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e,t,o,a,c=Qe.min(),p=Qe.min(),y=mn.EMPTY_BYTE_STRING,x=null){this.target=e,this.targetId=t,this.purpose=o,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=p,this.resumeToken=y,this.expectedCount=x}withSequenceNumber(e){return new So(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new So(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new So(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new So(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(e){this.yt=e}}function LP(r){const e=PP({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Xf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(){this.Sn=new MP}addToCollectionParentIndex(e,t){return this.Sn.add(t),oe.resolve()}getCollectionParents(e,t){return oe.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return oe.resolve()}deleteFieldIndex(e,t){return oe.resolve()}deleteAllFieldIndexes(e){return oe.resolve()}createTargetIndexes(e,t){return oe.resolve()}getDocumentsMatchingTarget(e,t){return oe.resolve(null)}getIndexType(e,t){return oe.resolve(0)}getFieldIndexes(e,t){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,t){return oe.resolve(No.min())}getMinOffsetFromCollectionGroup(e,t){return oe.resolve(No.min())}updateCollectionGroup(e,t,o){return oe.resolve()}updateIndexEntries(e,t){return oe.resolve()}}class MP{constructor(){this.index={}}add(e){const t=e.lastSegment(),o=e.popLast(),a=this.index[t]||new en(Tt.comparator),c=!a.has(o);return this.index[t]=a.add(o),c}has(e){const t=e.lastSegment(),o=e.popLast(),a=this.index[t];return a&&a.has(o)}getEntries(e){return(this.index[e]||new en(Tt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const my={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},W0=41943040;class ir{static withCacheSize(e){return new ir(e,ir.DEFAULT_COLLECTION_PERCENTILE,ir.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ir.DEFAULT_COLLECTION_PERCENTILE=10,ir.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ir.DEFAULT=new ir(W0,ir.DEFAULT_COLLECTION_PERCENTILE,ir.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ir.DISABLED=new ir(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Al(0)}static ar(){return new Al(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gy="LruGarbageCollector",OP=1048576;function _y([r,e],[t,o]){const a=st(r,t);return a===0?st(e,o):a}class jP{constructor(e){this.Pr=e,this.buffer=new en(_y),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const o=this.buffer.last();_y(t,o)<0&&(this.buffer=this.buffer.delete(o).add(t))}}get maxValue(){return this.buffer.last()[0]}}class VP{constructor(e,t,o){this.garbageCollector=e,this.asyncQueue=t,this.localStore=o,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Se(gy,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ol(t)?Se(gy,"Ignoring IndexedDB error during garbage collection: ",t):await Ml(t)}await this.Ar(3e5)}))}}class FP{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((o=>Math.floor(t/100*o)))}nthSequenceNumber(e,t){if(t===0)return oe.resolve(Hh.ce);const o=new jP(t);return this.Vr.forEachTarget(e,(a=>o.Er(a.sequenceNumber))).next((()=>this.Vr.mr(e,(a=>o.Er(a))))).next((()=>o.maxValue))}removeTargets(e,t,o){return this.Vr.removeTargets(e,t,o)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Se("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(my)):this.getCacheSize(e).next((o=>o<this.params.cacheSizeCollectionThreshold?(Se("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),my):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let o,a,c,p,y,x,T;const k=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((C=>(C>this.params.maximumSequenceNumbersToCollect?(Se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${C}`),a=this.params.maximumSequenceNumbersToCollect):a=C,p=Date.now(),this.nthSequenceNumber(e,a)))).next((C=>(o=C,y=Date.now(),this.removeTargets(e,o,t)))).next((C=>(c=C,x=Date.now(),this.removeOrphanedDocuments(e,o)))).next((C=>(T=Date.now(),fl()<=it.DEBUG&&Se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${p-k}ms
	Determined least recently used ${a} in `+(y-p)+`ms
	Removed ${c} targets in `+(x-y)+`ms
	Removed ${C} documents in `+(T-x)+`ms
Total Duration: ${T-k}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:C}))))}}function zP(r,e){return new FP(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{constructor(){this.changes=new Aa((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,An.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const o=this.changes.get(t);return o!==void 0?oe.resolve(o):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(e,t,o,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=o,this.indexManager=a}getDocument(e,t){let o=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(o=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(o!==null&&Cu(o.mutation,a,yr.empty(),Pt.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((o=>this.getLocalViewOfDocuments(e,o,ot()).next((()=>o))))}getLocalViewOfDocuments(e,t,o=ot()){const a=_a();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,o).next((c=>{let p=vu();return c.forEach(((y,x)=>{p=p.insert(y,x.overlayedDocument)})),p}))))}getOverlayedDocuments(e,t){const o=_a();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,ot())))}populateOverlays(e,t,o){const a=[];return o.forEach((c=>{t.has(c)||a.push(c)})),this.documentOverlayCache.getOverlays(e,a).next((c=>{c.forEach(((p,y)=>{t.set(p,y)}))}))}computeViews(e,t,o,a){let c=Rs();const p=ku(),y=(function(){return ku()})();return t.forEach(((x,T)=>{const k=o.get(T.key);a.has(T.key)&&(k===void 0||k.mutation instanceof zo)?c=c.insert(T.key,T):k!==void 0?(p.set(T.key,k.mutation.getFieldMask()),Cu(k.mutation,T,k.mutation.getFieldMask(),Pt.now())):p.set(T.key,yr.empty())})),this.recalculateAndSaveOverlays(e,c).next((x=>(x.forEach(((T,k)=>p.set(T,k))),t.forEach(((T,k)=>y.set(T,new BP(k,p.get(T)??null)))),y)))}recalculateAndSaveOverlays(e,t){const o=ku();let a=new Mt(((p,y)=>p-y)),c=ot();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((p=>{for(const y of p)y.keys().forEach((x=>{const T=t.get(x);if(T===null)return;let k=o.get(x)||yr.empty();k=y.applyToLocalView(T,k),o.set(x,k);const C=(a.get(y.batchId)||ot()).add(x);a=a.insert(y.batchId,C)}))})).next((()=>{const p=[],y=a.getReverseIterator();for(;y.hasNext();){const x=y.getNext(),T=x.key,k=x.value,C=S0();k.forEach((b=>{if(!c.has(b)){const W=N0(t.get(b),o.get(b));W!==null&&C.set(b,W),c=c.add(b)}})),p.push(this.documentOverlayCache.saveOverlays(e,T,C))}return oe.waitFor(p)})).next((()=>o))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((o=>this.recalculateAndSaveOverlays(e,o)))}getDocumentsMatchingQuery(e,t,o,a){return WS(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):w0(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,o,a):this.getDocumentsMatchingCollectionQuery(e,t,o,a)}getNextDocuments(e,t,o,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,o,a).next((c=>{const p=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,o.largestBatchId,a-c.size):oe.resolve(_a());let y=Lu,x=c;return p.next((T=>oe.forEach(T,((k,C)=>(y<C.largestBatchId&&(y=C.largestBatchId),c.get(k)?oe.resolve():this.remoteDocumentCache.getEntry(e,k).next((b=>{x=x.insert(k,b)}))))).next((()=>this.populateOverlays(e,T,c))).next((()=>this.computeViews(e,x,T,ot()))).next((k=>({batchId:y,changes:I0(k)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new je(t)).next((o=>{let a=vu();return o.isFoundDocument()&&(a=a.insert(o.key,o)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,o,a){const c=t.collectionGroup;let p=vu();return this.indexManager.getCollectionParents(e,c).next((y=>oe.forEach(y,(x=>{const T=(function(C,b){return new jl(b,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt)})(t,x.child(c));return this.getDocumentsMatchingCollectionQuery(e,T,o,a).next((k=>{k.forEach(((C,b)=>{p=p.insert(C,b)}))}))})).next((()=>p))))}getDocumentsMatchingCollectionQuery(e,t,o,a){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,o.largestBatchId).next((p=>(c=p,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,o,c,a)))).next((p=>{c.forEach(((x,T)=>{const k=T.getKey();p.get(k)===null&&(p=p.insert(k,An.newInvalidDocument(k)))}));let y=vu();return p.forEach(((x,T)=>{const k=c.get(x);k!==void 0&&Cu(k.mutation,T,yr.empty(),Pt.now()),Gh(t,T)&&(y=y.insert(x,T))})),y}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return oe.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:Bi(a.createTime)}})(t)),oe.resolve()}getNamedQuery(e,t){return oe.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(a){return{name:a.name,query:LP(a.bundledQuery),readTime:Bi(a.readTime)}})(t)),oe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P{constructor(){this.overlays=new Mt(je.comparator),this.Lr=new Map}getOverlay(e,t){return oe.resolve(this.overlays.get(t))}getOverlays(e,t){const o=_a();return oe.forEach(t,(a=>this.getOverlay(e,a).next((c=>{c!==null&&o.set(a,c)})))).next((()=>o))}saveOverlays(e,t,o){return o.forEach(((a,c)=>{this.bt(e,t,c)})),oe.resolve()}removeOverlaysForBatchId(e,t,o){const a=this.Lr.get(o);return a!==void 0&&(a.forEach((c=>this.overlays=this.overlays.remove(c))),this.Lr.delete(o)),oe.resolve()}getOverlaysForCollection(e,t,o){const a=_a(),c=t.length+1,p=new je(t.child("")),y=this.overlays.getIteratorFrom(p);for(;y.hasNext();){const x=y.getNext().value,T=x.getKey();if(!t.isPrefixOf(T.path))break;T.path.length===c&&x.largestBatchId>o&&a.set(x.getKey(),x)}return oe.resolve(a)}getOverlaysForCollectionGroup(e,t,o,a){let c=new Mt(((T,k)=>T-k));const p=this.overlays.getIterator();for(;p.hasNext();){const T=p.getNext().value;if(T.getKey().getCollectionGroup()===t&&T.largestBatchId>o){let k=c.get(T.largestBatchId);k===null&&(k=_a(),c=c.insert(T.largestBatchId,k)),k.set(T.getKey(),T)}}const y=_a(),x=c.getIterator();for(;x.hasNext()&&(x.getNext().value.forEach(((T,k)=>y.set(T,k))),!(y.size()>=a)););return oe.resolve(y)}bt(e,t,o){const a=this.overlays.get(o.key);if(a!==null){const p=this.Lr.get(a.largestBatchId).delete(o.key);this.Lr.set(a.largestBatchId,p)}this.overlays=this.overlays.insert(o.key,new uP(t,o));let c=this.Lr.get(t);c===void 0&&(c=ot(),this.Lr.set(t,c)),this.Lr.set(t,c.add(o.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(){this.sessionToken=mn.EMPTY_BYTE_STRING}getSessionToken(e){return oe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,oe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp{constructor(){this.kr=new en(an.Kr),this.qr=new en(an.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const o=new an(e,t);this.kr=this.kr.add(o),this.qr=this.qr.add(o)}$r(e,t){e.forEach((o=>this.addReference(o,t)))}removeReference(e,t){this.Wr(new an(e,t))}Qr(e,t){e.forEach((o=>this.removeReference(o,t)))}Gr(e){const t=new je(new Tt([])),o=new an(t,e),a=new an(t,e+1),c=[];return this.qr.forEachInRange([o,a],(p=>{this.Wr(p),c.push(p.key)})),c}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new je(new Tt([])),o=new an(t,e),a=new an(t,e+1);let c=ot();return this.qr.forEachInRange([o,a],(p=>{c=c.add(p.key)})),c}containsKey(e){const t=new an(e,0),o=this.kr.firstAfterOrEqual(t);return o!==null&&e.isEqual(o.key)}}class an{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return je.comparator(e.key,t.key)||st(e.Hr,t.Hr)}static Ur(e,t){return st(e.Hr,t.Hr)||je.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new en(an.Kr)}checkEmpty(e){return oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,o,a){const c=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const p=new lP(c,t,o,a);this.mutationQueue.push(p);for(const y of a)this.Jr=this.Jr.add(new an(y.key,c)),this.indexManager.addToCollectionParentIndex(e,y.key.path.popLast());return oe.resolve(p)}lookupMutationBatch(e,t){return oe.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const o=t+1,a=this.Xr(o),c=a<0?0:a;return oe.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(this.mutationQueue.length===0?Ap:this.Yn-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const o=new an(t,0),a=new an(t,Number.POSITIVE_INFINITY),c=[];return this.Jr.forEachInRange([o,a],(p=>{const y=this.Zr(p.Hr);c.push(y)})),oe.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new en(st);return t.forEach((a=>{const c=new an(a,0),p=new an(a,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([c,p],(y=>{o=o.add(y.Hr)}))})),oe.resolve(this.Yr(o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,a=o.length+1;let c=o;je.isDocumentKey(c)||(c=c.child(""));const p=new an(new je(c),0);let y=new en(st);return this.Jr.forEachWhile((x=>{const T=x.key.path;return!!o.isPrefixOf(T)&&(T.length===a&&(y=y.add(x.Hr)),!0)}),p),oe.resolve(this.Yr(y))}Yr(e){const t=[];return e.forEach((o=>{const a=this.Zr(o);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){yt(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let o=this.Jr;return oe.forEach(t.mutations,(a=>{const c=new an(a.key,t.batchId);return o=o.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Jr=o}))}nr(e){}containsKey(e,t){const o=new an(t,0),a=this.Jr.firstAfterOrEqual(o);return oe.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,oe.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(e){this.ti=e,this.docs=(function(){return new Mt(je.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const o=t.key,a=this.docs.get(o),c=a?a.size:0,p=this.ti(t);return this.docs=this.docs.insert(o,{document:t.mutableCopy(),size:p}),this.size+=p-c,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const o=this.docs.get(t);return oe.resolve(o?o.document.mutableCopy():An.newInvalidDocument(t))}getEntries(e,t){let o=Rs();return t.forEach((a=>{const c=this.docs.get(a);o=o.insert(a,c?c.document.mutableCopy():An.newInvalidDocument(a))})),oe.resolve(o)}getDocumentsMatchingQuery(e,t,o,a){let c=Rs();const p=t.path,y=new je(p.child("__id-9223372036854775808__")),x=this.docs.getIteratorFrom(y);for(;x.hasNext();){const{key:T,value:{document:k}}=x.getNext();if(!p.isPrefixOf(T.path))break;T.path.length>p.length+1||wS(vS(k),o)<=0||(a.has(k.key)||Gh(t,k))&&(c=c.insert(k.key,k.mutableCopy()))}return oe.resolve(c)}getAllFromCollectionGroup(e,t,o,a){$e(9500)}ni(e,t){return oe.forEach(this.docs,(o=>t(o)))}newChangeBuffer(e){return new ZP(this)}getSize(e){return oe.resolve(this.size)}}class ZP extends UP{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((o,a)=>{a.isValidDocument()?t.push(this.Mr.addEntry(e,a)):this.Mr.removeEntry(o)})),oe.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(e){this.persistence=e,this.ri=new Aa((t=>Rp(t)),Lp),this.lastRemoteSnapshotVersion=Qe.min(),this.highestTargetId=0,this.ii=0,this.si=new Fp,this.targetCount=0,this.oi=Al._r()}forEachTarget(e,t){return this.ri.forEach(((o,a)=>t(a))),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,o){return o&&(this.lastRemoteSnapshotVersion=o),t>this.ii&&(this.ii=t),oe.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Al(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,oe.resolve()}updateTargetData(e,t){return this.lr(t),oe.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,t,o){let a=0;const c=[];return this.ri.forEach(((p,y)=>{y.sequenceNumber<=t&&o.get(y.targetId)===null&&(this.ri.delete(p),c.push(this.removeMatchingKeysForTargetId(e,y.targetId)),a++)})),oe.waitFor(c).next((()=>a))}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,t){const o=this.ri.get(t)||null;return oe.resolve(o)}addMatchingKeys(e,t,o){return this.si.$r(t,o),oe.resolve()}removeMatchingKeys(e,t,o){this.si.Qr(t,o);const a=this.persistence.referenceDelegate,c=[];return a&&t.forEach((p=>{c.push(a.markPotentiallyOrphaned(e,p))})),oe.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),oe.resolve()}getMatchingKeysForTargetId(e,t){const o=this.si.jr(t);return oe.resolve(o)}containsKey(e,t){return oe.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(e,t){this._i={},this.overlays={},this.ai=new Hh(0),this.ui=!1,this.ui=!0,this.ci=new qP,this.referenceDelegate=e(this),this.li=new QP(this),this.indexManager=new DP,this.remoteDocumentCache=(function(a){return new KP(a)})((o=>this.referenceDelegate.hi(o))),this.serializer=new RP(t),this.Pi=new WP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new $P,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let o=this._i[e.toKey()];return o||(o=new GP(t,this.referenceDelegate),this._i[e.toKey()]=o),o}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,o){Se("MemoryPersistence","Starting transaction:",e);const a=new YP(this.ai.next());return this.referenceDelegate.Ti(),o(a).next((c=>this.referenceDelegate.Ii(a).next((()=>c)))).toPromise().then((c=>(a.raiseOnCommittedEvent(),c)))}Ei(e,t){return oe.or(Object.values(this._i).map((o=>()=>o.containsKey(e,t))))}}class YP extends ES{constructor(e){super(),this.currentSequenceNumber=e}}class zp{constructor(e){this.persistence=e,this.Ri=new Fp,this.Ai=null}static Vi(e){return new zp(e)}get di(){if(this.Ai)return this.Ai;throw $e(60996)}addReference(e,t,o){return this.Ri.addReference(o,t),this.di.delete(o.toString()),oe.resolve()}removeReference(e,t,o){return this.Ri.removeReference(o,t),this.di.add(o.toString()),oe.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),oe.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((a=>this.di.add(a.toString())));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((c=>this.di.add(c.toString())))})).next((()=>o.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.di,(o=>{const a=je.fromPath(o);return this.mi(e,a).next((c=>{c||t.removeEntry(a,Qe.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((o=>{o?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return oe.or([()=>oe.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class bh{constructor(e,t){this.persistence=e,this.fi=new Aa((o=>SS(o.path)),((o,a)=>o.isEqual(a))),this.garbageCollector=zP(this,t)}static Vi(e,t){return new bh(e,t)}Ti(){}Ii(e){return oe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((o=>t.next((a=>o+a))))}pr(e){let t=0;return this.mr(e,(o=>{t++})).next((()=>t))}mr(e,t){return oe.forEach(this.fi,((o,a)=>this.wr(e,o,a).next((c=>c?oe.resolve():t(a)))))}removeTargets(e,t,o){return this.persistence.getTargetCache().removeTargets(e,t,o)}removeOrphanedDocuments(e,t){let o=0;const a=this.persistence.getRemoteDocumentCache(),c=a.newChangeBuffer();return a.ni(e,(p=>this.wr(e,p,t).next((y=>{y||(o++,c.removeEntry(p,Qe.min()))})))).next((()=>c.apply(e))).next((()=>o))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),oe.resolve()}removeTarget(e,t){const o=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,o)}addReference(e,t,o){return this.fi.set(o,e.currentSequenceNumber),oe.resolve()}removeReference(e,t,o){return this.fi.set(o,e.currentSequenceNumber),oe.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),oe.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=uh(e.data.value)),t}wr(e,t,o){return oe.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.fi.get(t);return oe.resolve(a!==void 0&&a>o)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(e,t,o,a){this.targetId=e,this.fromCache=t,this.Ts=o,this.Is=a}static Es(e,t){let o=ot(),a=ot();for(const c of t.docChanges)switch(c.type){case 0:o=o.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new Up(e,t.fromCache,o,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return Jx()?8:TS(Nn())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,o,a){const c={result:null};return this.gs(e,t).next((p=>{c.result=p})).next((()=>{if(!c.result)return this.ps(e,t,a,o).next((p=>{c.result=p}))})).next((()=>{if(c.result)return;const p=new JP;return this.ys(e,t,p).next((y=>{if(c.result=y,this.As)return this.ws(e,t,p,y.size)}))})).next((()=>c.result))}ws(e,t,o,a){return o.documentReadCount<this.Vs?(fl()<=it.DEBUG&&Se("QueryEngine","SDK will not create cache indexes for query:",pl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),oe.resolve()):(fl()<=it.DEBUG&&Se("QueryEngine","Query:",pl(t),"scans",o.documentReadCount,"local documents and returns",a,"documents as results."),o.documentReadCount>this.ds*a?(fl()<=it.DEBUG&&Se("QueryEngine","The SDK decides to create cache indexes for query:",pl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ui(t))):oe.resolve())}gs(e,t){if(sy(t))return oe.resolve(null);let o=Ui(t);return this.indexManager.getIndexType(e,o).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=Xf(t,null,"F"),o=Ui(t)),this.indexManager.getDocumentsMatchingTarget(e,o).next((c=>{const p=ot(...c);return this.fs.getDocuments(e,p).next((y=>this.indexManager.getMinOffset(e,o).next((x=>{const T=this.bs(t,y);return this.Ss(t,T,p,x.readTime)?this.gs(e,Xf(t,null,"F")):this.Ds(e,T,t,x)}))))})))))}ps(e,t,o,a){return sy(t)||a.isEqual(Qe.min())?oe.resolve(null):this.fs.getDocuments(e,o).next((c=>{const p=this.bs(t,c);return this.Ss(t,p,o,a)?oe.resolve(null):(fl()<=it.DEBUG&&Se("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),pl(t)),this.Ds(e,p,t,yS(a,Lu)).next((y=>y)))}))}bs(e,t){let o=new en(E0(e));return t.forEach(((a,c)=>{Gh(e,c)&&(o=o.add(c))})),o}Ss(e,t,o,a){if(e.limit===null)return!1;if(o.size!==t.size)return!0;const c=e.limitType==="F"?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}ys(e,t,o){return fl()<=it.DEBUG&&Se("QueryEngine","Using full collection scan to execute query:",pl(t)),this.fs.getDocumentsMatchingQuery(e,t,No.min(),o)}Ds(e,t,o,a){return this.fs.getDocumentsMatchingQuery(e,o,a).next((c=>(t.forEach((p=>{c=c.insert(p.key,p)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bp="LocalStore",ek=3e8;class tk{constructor(e,t,o,a){this.persistence=e,this.Cs=t,this.serializer=a,this.vs=new Mt(st),this.Fs=new Aa((c=>Rp(c)),Lp),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(o)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new HP(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function nk(r,e,t,o){return new tk(r,e,t,o)}async function q0(r,e){const t=Ye(r);return await t.persistence.runTransaction("Handle user change","readonly",(o=>{let a;return t.mutationQueue.getAllMutationBatches(o).next((c=>(a=c,t.Os(e),t.mutationQueue.getAllMutationBatches(o)))).next((c=>{const p=[],y=[];let x=ot();for(const T of a){p.push(T.batchId);for(const k of T.mutations)x=x.add(k.key)}for(const T of c){y.push(T.batchId);for(const k of T.mutations)x=x.add(k.key)}return t.localDocuments.getDocuments(o,x).next((T=>({Ns:T,removedBatchIds:p,addedBatchIds:y})))}))}))}function rk(r,e){const t=Ye(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(o=>{const a=e.batch.keys(),c=t.xs.newChangeBuffer({trackRemovals:!0});return(function(y,x,T,k){const C=T.batch,b=C.keys();let W=oe.resolve();return b.forEach(($=>{W=W.next((()=>k.getEntry(x,$))).next((Z=>{const J=T.docVersions.get($);yt(J!==null,48541),Z.version.compareTo(J)<0&&(C.applyToRemoteDocument(Z,T),Z.isValidDocument()&&(Z.setReadTime(T.commitVersion),k.addEntry(Z)))}))})),W.next((()=>y.mutationQueue.removeMutationBatch(x,C)))})(t,o,e,c).next((()=>c.apply(o))).next((()=>t.mutationQueue.performConsistencyCheck(o))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(o,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,(function(y){let x=ot();for(let T=0;T<y.mutationResults.length;++T)y.mutationResults[T].transformResults.length>0&&(x=x.add(y.batch.mutations[T].key));return x})(e)))).next((()=>t.localDocuments.getDocuments(o,a)))}))}function G0(r){const e=Ye(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function ik(r,e){const t=Ye(r),o=e.snapshotVersion;let a=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const p=t.xs.newChangeBuffer({trackRemovals:!0});a=t.vs;const y=[];e.targetChanges.forEach(((k,C)=>{const b=a.get(C);if(!b)return;y.push(t.li.removeMatchingKeys(c,k.removedDocuments,C).next((()=>t.li.addMatchingKeys(c,k.addedDocuments,C))));let W=b.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(C)!==null?W=W.withResumeToken(mn.EMPTY_BYTE_STRING,Qe.min()).withLastLimboFreeSnapshotVersion(Qe.min()):k.resumeToken.approximateByteSize()>0&&(W=W.withResumeToken(k.resumeToken,o)),a=a.insert(C,W),(function(Z,J,he){return Z.resumeToken.approximateByteSize()===0||J.snapshotVersion.toMicroseconds()-Z.snapshotVersion.toMicroseconds()>=ek?!0:he.addedDocuments.size+he.modifiedDocuments.size+he.removedDocuments.size>0})(b,W,k)&&y.push(t.li.updateTargetData(c,W))}));let x=Rs(),T=ot();if(e.documentUpdates.forEach((k=>{e.resolvedLimboDocuments.has(k)&&y.push(t.persistence.referenceDelegate.updateLimboDocument(c,k))})),y.push(sk(c,p,e.documentUpdates).next((k=>{x=k.Bs,T=k.Ls}))),!o.isEqual(Qe.min())){const k=t.li.getLastRemoteSnapshotVersion(c).next((C=>t.li.setTargetsMetadata(c,c.currentSequenceNumber,o)));y.push(k)}return oe.waitFor(y).next((()=>p.apply(c))).next((()=>t.localDocuments.getLocalViewOfDocuments(c,x,T))).next((()=>x))})).then((c=>(t.vs=a,c)))}function sk(r,e,t){let o=ot(),a=ot();return t.forEach((c=>o=o.add(c))),e.getEntries(r,o).next((c=>{let p=Rs();return t.forEach(((y,x)=>{const T=c.get(y);x.isFoundDocument()!==T.isFoundDocument()&&(a=a.add(y)),x.isNoDocument()&&x.version.isEqual(Qe.min())?(e.removeEntry(y,x.readTime),p=p.insert(y,x)):!T.isValidDocument()||x.version.compareTo(T.version)>0||x.version.compareTo(T.version)===0&&T.hasPendingWrites?(e.addEntry(x),p=p.insert(y,x)):Se(Bp,"Ignoring outdated watch update for ",y,". Current version:",T.version," Watch version:",x.version)})),{Bs:p,Ls:a}}))}function ok(r,e){const t=Ye(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(o=>(e===void 0&&(e=Ap),t.mutationQueue.getNextMutationBatchAfterBatchId(o,e))))}function ak(r,e){const t=Ye(r);return t.persistence.runTransaction("Allocate target","readwrite",(o=>{let a;return t.li.getTargetData(o,e).next((c=>c?(a=c,oe.resolve(a)):t.li.allocateTargetId(o).next((p=>(a=new So(e,p,"TargetPurposeListen",o.currentSequenceNumber),t.li.addTargetData(o,a).next((()=>a)))))))})).then((o=>{const a=t.vs.get(o.targetId);return(a===null||o.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.vs=t.vs.insert(o.targetId,o),t.Fs.set(e,o.targetId)),o}))}async function ip(r,e,t){const o=Ye(r),a=o.vs.get(e),c=t?"readwrite":"readwrite-primary";try{t||await o.persistence.runTransaction("Release target",c,(p=>o.persistence.referenceDelegate.removeTarget(p,a)))}catch(p){if(!Ol(p))throw p;Se(Bp,`Failed to update sequence numbers for target ${e}: ${p}`)}o.vs=o.vs.remove(e),o.Fs.delete(a.target)}function yy(r,e,t){const o=Ye(r);let a=Qe.min(),c=ot();return o.persistence.runTransaction("Execute query","readwrite",(p=>(function(x,T,k){const C=Ye(x),b=C.Fs.get(k);return b!==void 0?oe.resolve(C.vs.get(b)):C.li.getTargetData(T,k)})(o,p,Ui(e)).next((y=>{if(y)return a=y.lastLimboFreeSnapshotVersion,o.li.getMatchingKeysForTargetId(p,y.targetId).next((x=>{c=x}))})).next((()=>o.Cs.getDocumentsMatchingQuery(p,e,t?a:Qe.min(),t?c:ot()))).next((y=>(lk(o,GS(e),y),{documents:y,ks:c})))))}function lk(r,e,t){let o=r.Ms.get(e)||Qe.min();t.forEach(((a,c)=>{c.readTime.compareTo(o)>0&&(o=c.readTime)})),r.Ms.set(e,o)}class vy{constructor(){this.activeTargetIds=XS()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class uk{constructor(){this.vo=new vy,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,o){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,o){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new vy,Promise.resolve()}handleUserChange(e,t,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wy="ConnectivityMonitor";class xy{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Se(wy,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Se(wy,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rh=null;function sp(){return rh===null?rh=(function(){return 268435456+Math.round(2147483648*Math.random())})():rh++,"0x"+rh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Af="RestConnection",hk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class dk{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${o}/databases/${a}`,this.$o=this.databaseId.database===Ih?`project_id=${o}`:`project_id=${o}&database_id=${a}`}Wo(e,t,o,a,c){const p=sp(),y=this.Qo(e,t.toUriEncodedString());Se(Af,`Sending RPC '${e}' ${p}:`,y,o);const x={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(x,a,c);const{host:T}=new URL(y),k=Rl(T);return this.zo(e,y,x,o,k).then((C=>(Se(Af,`Received RPC '${e}' ${p}: `,C),C)),(C=>{throw Ia(Af,`RPC '${e}' ${p} failed with error: `,C,"url: ",y,"request:",o),C}))}jo(e,t,o,a,c,p){return this.Wo(e,t,o,a,c)}Go(e,t,o){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Dl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,c)=>e[c]=a)),o&&o.headers.forEach(((a,c)=>e[c]=a))}Qo(e,t){const o=hk[e];let a=`${this.qo}/v1/${t}:${o}`;return this.databaseInfo.apiKey&&(a=`${a}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),a}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kn="WebChannelConnection",mu=(r,e,t)=>{r.listen(e,(o=>{try{t(o)}catch(a){setTimeout((()=>{throw a}),0)}}))};class El extends dk{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!El.c_){const e=Jv();mu(e,Yv.STAT_EVENT,(t=>{t.stat===qf.PROXY?Se(kn,"STAT_EVENT: detected buffering proxy"):t.stat===qf.NOPROXY&&Se(kn,"STAT_EVENT: detected no buffering proxy")})),El.c_=!0}}zo(e,t,o,a,c){const p=sp();return new Promise(((y,x)=>{const T=new Zv;T.setWithCredentials(!0),T.listenOnce(Qv.COMPLETE,(()=>{try{switch(T.getLastErrorCode()){case lh.NO_ERROR:const C=T.getResponseJson();Se(kn,`XHR for RPC '${e}' ${p} received:`,JSON.stringify(C)),y(C);break;case lh.TIMEOUT:Se(kn,`RPC '${e}' ${p} timed out`),x(new _e(ie.DEADLINE_EXCEEDED,"Request time out"));break;case lh.HTTP_ERROR:const b=T.getStatus();if(Se(kn,`RPC '${e}' ${p} failed with status:`,b,"response text:",T.getResponseText()),b>0){let W=T.getResponseJson();Array.isArray(W)&&(W=W[0]);const $=W==null?void 0:W.error;if($&&$.status&&$.message){const Z=(function(he){const me=he.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(me)>=0?me:ie.UNKNOWN})($.status);x(new _e(Z,$.message))}else x(new _e(ie.UNKNOWN,"Server responded with status "+T.getStatus()))}else x(new _e(ie.UNAVAILABLE,"Connection failed."));break;default:$e(9055,{l_:e,streamId:p,h_:T.getLastErrorCode(),P_:T.getLastError()})}}finally{Se(kn,`RPC '${e}' ${p} completed.`)}}));const k=JSON.stringify(a);Se(kn,`RPC '${e}' ${p} sending request:`,a),T.send(t,"POST",k,o,15)}))}T_(e,t,o){const a=sp(),c=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],p=this.createWebChannelTransport(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},x=this.longPollingOptions.timeoutSeconds;x!==void 0&&(y.longPollingTimeout=Math.round(1e3*x)),this.useFetchStreams&&(y.useFetchStreams=!0),this.Go(y.initMessageHeaders,t,o),y.encodeInitMessageHeaders=!0;const T=c.join("");Se(kn,`Creating RPC '${e}' stream ${a}: ${T}`,y);const k=p.createWebChannel(T,y);this.I_(k);let C=!1,b=!1;const W=new fk({Ho:$=>{b?Se(kn,`Not sending because RPC '${e}' stream ${a} is closed:`,$):(C||(Se(kn,`Opening RPC '${e}' stream ${a} transport.`),k.open(),C=!0),Se(kn,`RPC '${e}' stream ${a} sending:`,$),k.send($))},Jo:()=>k.close()});return mu(k,yu.EventType.OPEN,(()=>{b||(Se(kn,`RPC '${e}' stream ${a} transport opened.`),W.i_())})),mu(k,yu.EventType.CLOSE,(()=>{b||(b=!0,Se(kn,`RPC '${e}' stream ${a} transport closed`),W.o_(),this.E_(k))})),mu(k,yu.EventType.ERROR,($=>{b||(b=!0,Ia(kn,`RPC '${e}' stream ${a} transport errored. Name:`,$.name,"Message:",$.message),W.o_(new _e(ie.UNAVAILABLE,"The operation could not be completed")))})),mu(k,yu.EventType.MESSAGE,($=>{var Z;if(!b){const J=$.data[0];yt(!!J,16349);const he=J,me=(he==null?void 0:he.error)||((Z=he[0])==null?void 0:Z.error);if(me){Se(kn,`RPC '${e}' stream ${a} received error:`,me);const xe=me.status;let Le=(function(F){const D=qt[F];if(D!==void 0)return L0(D)})(xe),Te=me.message;xe==="NOT_FOUND"&&Te.includes("database")&&Te.includes("does not exist")&&Te.includes(this.databaseId.database)&&Ia(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),Le===void 0&&(Le=ie.INTERNAL,Te="Unknown error status: "+xe+" with message "+me.message),b=!0,W.o_(new _e(Le,Te)),k.close()}else Se(kn,`RPC '${e}' stream ${a} received:`,J),W.__(J)}})),El.u_(),setTimeout((()=>{W.s_()}),0),W}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,o){super.Go(e,t,o),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Xv()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pk(r){return new El(r)}function bf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jh(r){return new yP(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */El.c_=!1;class K0{constructor(e,t,o=1e3,a=1.5,c=6e4){this.Ci=e,this.timerId=t,this.R_=o,this.A_=a,this.V_=c,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),o=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-o);a>0&&Se("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${o} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ey="PersistentStream";class Z0{constructor(e,t,o,a,c,p,y,x){this.Ci=e,this.b_=o,this.S_=a,this.connection=c,this.authCredentialsProvider=p,this.appCheckCredentialsProvider=y,this.listener=x,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new K0(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ie.RESOURCE_EXHAUSTED?(bs(t.toString()),bs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([o,a])=>{this.D_===t&&this.G_(o,a)}),(o=>{e((()=>{const a=new _e(ie.UNKNOWN,"Fetching auth token failed: "+o.message);return this.z_(a)}))}))}G_(e,t){const o=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{o((()=>this.listener.Zo()))})),this.stream.Yo((()=>{o((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((a=>{o((()=>this.z_(a)))})),this.stream.onMessage((a=>{o((()=>++this.F_==1?this.H_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Se(Ey,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(Se(Ey,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class mk extends Z0{constructor(e,t,o,a,c,p){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,o,a,p),this.serializer=c}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=xP(this.serializer,e),o=(function(c){if(!("targetChange"in c))return Qe.min();const p=c.targetChange;return p.targetIds&&p.targetIds.length?Qe.min():p.readTime?Bi(p.readTime):Qe.min()})(e);return this.listener.J_(t,o)}Z_(e){const t={};t.database=rp(this.serializer),t.addTarget=(function(c,p){let y;const x=p.target;if(y=Yf(x)?{documents:IP(c,x)}:{query:SP(c,x).ft},y.targetId=p.targetId,p.resumeToken.approximateByteSize()>0){y.resumeToken=O0(c,p.resumeToken);const T=ep(c,p.expectedCount);T!==null&&(y.expectedCount=T)}else if(p.snapshotVersion.compareTo(Qe.min())>0){y.readTime=Ah(c,p.snapshotVersion.toTimestamp());const T=ep(c,p.expectedCount);T!==null&&(y.expectedCount=T)}return y})(this.serializer,e);const o=kP(this.serializer,e);o&&(t.labels=o),this.K_(t)}X_(e){const t={};t.database=rp(this.serializer),t.removeTarget=e,this.K_(t)}}class gk extends Z0{constructor(e,t,o,a,c,p){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,o,a,p),this.serializer=c}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return yt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,yt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){yt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=TP(e.writeResults,e.commitTime),o=Bi(e.commitTime);return this.listener.na(o,t)}ra(){const e={};e.database=rp(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((o=>EP(this.serializer,o)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{}class yk extends _k{constructor(e,t,o,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=o,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new _e(ie.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,o,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,p])=>this.connection.Wo(e,tp(t,o),a,c,p))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new _e(ie.UNKNOWN,c.toString())}))}jo(e,t,o,a,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([p,y])=>this.connection.jo(e,tp(t,o),a,p,y,c))).catch((p=>{throw p.name==="FirebaseError"?(p.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),p):new _e(ie.UNKNOWN,p.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function vk(r,e,t,o){return new yk(r,e,t,o)}class wk{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(bs(t),this.aa=!1):Se("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sa="RemoteStore";class xk{constructor(e,t,o,a,c){this.localStore=e,this.datastore=t,this.asyncQueue=o,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=c,this.Aa.Mo((p=>{o.enqueueAndForget((async()=>{ba(this)&&(Se(Sa,"Restarting streams for network reachability change."),await(async function(x){const T=Ye(x);T.Ea.add(4),await Zu(T),T.Va.set("Unknown"),T.Ea.delete(4),await Xh(T)})(this))}))})),this.Va=new wk(o,a)}}async function Xh(r){if(ba(r))for(const e of r.Ra)await e(!0)}async function Zu(r){for(const e of r.Ra)await e(!1)}function Q0(r,e){const t=Ye(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),qp(t)?$p(t):Vl(t).O_()&&Wp(t,e))}function Hp(r,e){const t=Ye(r),o=Vl(t);t.Ia.delete(e),o.O_()&&Y0(t,e),t.Ia.size===0&&(o.O_()?o.L_():ba(t)&&t.Va.set("Unknown"))}function Wp(r,e){if(r.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Qe.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Vl(r).Z_(e)}function Y0(r,e){r.da.$e(e),Vl(r).X_(e)}function $p(r){r.da=new pP({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Vl(r).start(),r.Va.ua()}function qp(r){return ba(r)&&!Vl(r).x_()&&r.Ia.size>0}function ba(r){return Ye(r).Ea.size===0}function J0(r){r.da=void 0}async function Ek(r){r.Va.set("Online")}async function Tk(r){r.Ia.forEach(((e,t)=>{Wp(r,e)}))}async function Ik(r,e){J0(r),qp(r)?(r.Va.ha(e),$p(r)):r.Va.set("Unknown")}async function Sk(r,e,t){if(r.Va.set("Online"),e instanceof M0&&e.state===2&&e.cause)try{await(async function(a,c){const p=c.cause;for(const y of c.targetIds)a.Ia.has(y)&&(await a.remoteSyncer.rejectListen(y,p),a.Ia.delete(y),a.da.removeTarget(y))})(r,e)}catch(o){Se(Sa,"Failed to remove targets %s: %s ",e.targetIds.join(","),o),await Nh(r,o)}else if(e instanceof dh?r.da.Xe(e):e instanceof D0?r.da.st(e):r.da.tt(e),!t.isEqual(Qe.min()))try{const o=await G0(r.localStore);t.compareTo(o)>=0&&await(function(c,p){const y=c.da.Tt(p);return y.targetChanges.forEach(((x,T)=>{if(x.resumeToken.approximateByteSize()>0){const k=c.Ia.get(T);k&&c.Ia.set(T,k.withResumeToken(x.resumeToken,p))}})),y.targetMismatches.forEach(((x,T)=>{const k=c.Ia.get(x);if(!k)return;c.Ia.set(x,k.withResumeToken(mn.EMPTY_BYTE_STRING,k.snapshotVersion)),Y0(c,x);const C=new So(k.target,x,T,k.sequenceNumber);Wp(c,C)})),c.remoteSyncer.applyRemoteEvent(y)})(r,t)}catch(o){Se(Sa,"Failed to raise snapshot:",o),await Nh(r,o)}}async function Nh(r,e,t){if(!Ol(e))throw e;r.Ea.add(1),await Zu(r),r.Va.set("Offline"),t||(t=()=>G0(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{Se(Sa,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await Xh(r)}))}function X0(r,e){return e().catch((t=>Nh(r,t,e)))}async function ed(r){const e=Ye(r),t=Mo(e);let o=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ap;for(;Pk(e);)try{const a=await ok(e.localStore,o);if(a===null){e.Ta.length===0&&t.L_();break}o=a.batchId,kk(e,a)}catch(a){await Nh(e,a)}ew(e)&&tw(e)}function Pk(r){return ba(r)&&r.Ta.length<10}function kk(r,e){r.Ta.push(e);const t=Mo(r);t.O_()&&t.Y_&&t.ea(e.mutations)}function ew(r){return ba(r)&&!Mo(r).x_()&&r.Ta.length>0}function tw(r){Mo(r).start()}async function Ck(r){Mo(r).ra()}async function Ak(r){const e=Mo(r);for(const t of r.Ta)e.ea(t.mutations)}async function bk(r,e,t){const o=r.Ta.shift(),a=Op.from(o,e,t);await X0(r,(()=>r.remoteSyncer.applySuccessfulWrite(a))),await ed(r)}async function Nk(r,e){e&&Mo(r).Y_&&await(async function(o,a){if((function(p){return hP(p)&&p!==ie.ABORTED})(a.code)){const c=o.Ta.shift();Mo(o).B_(),await X0(o,(()=>o.remoteSyncer.rejectFailedWrite(c.batchId,a))),await ed(o)}})(r,e),ew(r)&&tw(r)}async function Ty(r,e){const t=Ye(r);t.asyncQueue.verifyOperationInProgress(),Se(Sa,"RemoteStore received new credentials");const o=ba(t);t.Ea.add(3),await Zu(t),o&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Xh(t)}async function Rk(r,e){const t=Ye(r);e?(t.Ea.delete(2),await Xh(t)):e||(t.Ea.add(2),await Zu(t),t.Va.set("Unknown"))}function Vl(r){return r.ma||(r.ma=(function(t,o,a){const c=Ye(t);return c.sa(),new mk(o,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(r.datastore,r.asyncQueue,{Zo:Ek.bind(null,r),Yo:Tk.bind(null,r),t_:Ik.bind(null,r),J_:Sk.bind(null,r)}),r.Ra.push((async e=>{e?(r.ma.B_(),qp(r)?$p(r):r.Va.set("Unknown")):(await r.ma.stop(),J0(r))}))),r.ma}function Mo(r){return r.fa||(r.fa=(function(t,o,a){const c=Ye(t);return c.sa(),new gk(o,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),Yo:Ck.bind(null,r),t_:Nk.bind(null,r),ta:Ak.bind(null,r),na:bk.bind(null,r)}),r.Ra.push((async e=>{e?(r.fa.B_(),await ed(r)):(await r.fa.stop(),r.Ta.length>0&&(Se(Sa,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(e,t,o,a,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=o,this.op=a,this.removalCallback=c,this.deferred=new ks,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((p=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,o,a,c){const p=Date.now()+o,y=new Gp(e,t,p,a,c);return y.start(o),y}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _e(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Kp(r,e){if(bs("AsyncQueue",`${e}: ${r}`),Ol(r))return new _e(ie.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{static emptySet(e){return new Tl(e.comparator)}constructor(e){this.comparator=e?(t,o)=>e(t,o)||je.comparator(t.key,o.key):(t,o)=>je.comparator(t.key,o.key),this.keyedMap=vu(),this.sortedSet=new Mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,o)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Tl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=o.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const o=new Tl;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=t,o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(){this.ga=new Mt(je.comparator)}track(e){const t=e.doc.key,o=this.ga.get(t);o?e.type!==0&&o.type===3?this.ga=this.ga.insert(t,e):e.type===3&&o.type!==1?this.ga=this.ga.insert(t,{type:o.type,doc:e.doc}):e.type===2&&o.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&o.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&o.type===0?this.ga=this.ga.remove(t):e.type===1&&o.type===2?this.ga=this.ga.insert(t,{type:1,doc:o.doc}):e.type===0&&o.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):$e(63341,{Vt:e,pa:o}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,o)=>{e.push(o)})),e}}class bl{constructor(e,t,o,a,c,p,y,x,T){this.query=e,this.docs=t,this.oldDocs=o,this.docChanges=a,this.mutatedKeys=c,this.fromCache=p,this.syncStateChanged=y,this.excludesMetadataChanges=x,this.hasCachedResults=T}static fromInitialDocuments(e,t,o,a,c){const p=[];return t.forEach((y=>{p.push({type:0,doc:y})})),new bl(e,t,Tl.emptySet(t),p,o,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,o=e.docChanges;if(t.length!==o.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==o[a].type||!t[a].doc.isEqual(o[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class Dk{constructor(){this.queries=Sy(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,o){const a=Ye(t),c=a.queries;a.queries=Sy(),c.forEach(((p,y)=>{for(const x of y.ba)x.onError(o)}))})(this,new _e(ie.ABORTED,"Firestore shutting down"))}}function Sy(){return new Aa((r=>x0(r)),qh)}async function nw(r,e){const t=Ye(r);let o=3;const a=e.query;let c=t.queries.get(a);c?!c.Sa()&&e.Da()&&(o=2):(c=new Lk,o=e.Da()?0:1);try{switch(o){case 0:c.wa=await t.onListen(a,!0);break;case 1:c.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(p){const y=Kp(p,`Initialization of query '${pl(e.query)}' failed`);return void e.onError(y)}t.queries.set(a,c),c.ba.push(e),e.va(t.onlineState),c.wa&&e.Fa(c.wa)&&Zp(t)}async function rw(r,e){const t=Ye(r),o=e.query;let a=3;const c=t.queries.get(o);if(c){const p=c.ba.indexOf(e);p>=0&&(c.ba.splice(p,1),c.ba.length===0?a=e.Da()?0:1:!c.Sa()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(o),t.onUnlisten(o,!0);case 1:return t.queries.delete(o),t.onUnlisten(o,!1);case 2:return t.onLastRemoteStoreUnlisten(o);default:return}}function Mk(r,e){const t=Ye(r);let o=!1;for(const a of e){const c=a.query,p=t.queries.get(c);if(p){for(const y of p.ba)y.Fa(a)&&(o=!0);p.wa=a}}o&&Zp(t)}function Ok(r,e,t){const o=Ye(r),a=o.queries.get(e);if(a)for(const c of a.ba)c.onError(t);o.queries.delete(e)}function Zp(r){r.Ca.forEach((e=>{e.next()}))}var op,Py;(Py=op||(op={})).Ma="default",Py.Cache="cache";class iw{constructor(e,t,o){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=o||{}}Fa(e){if(!this.options.includeMetadataChanges){const o=[];for(const a of e.docChanges)a.type!==3&&o.push(a);e=new bl(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const o=t!=="Offline";return(!this.options.Ka||!o)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=bl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==op.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(e){this.key=e}}class ow{constructor(e){this.key=e}}class jk{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ot(),this.mutatedKeys=ot(),this.eu=E0(e),this.tu=new Tl(this.eu)}get nu(){return this.Za}ru(e,t){const o=t?t.iu:new Iy,a=t?t.tu:this.tu;let c=t?t.mutatedKeys:this.mutatedKeys,p=a,y=!1;const x=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,T=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((k,C)=>{const b=a.get(k),W=Gh(this.query,C)?C:null,$=!!b&&this.mutatedKeys.has(b.key),Z=!!W&&(W.hasLocalMutations||this.mutatedKeys.has(W.key)&&W.hasCommittedMutations);let J=!1;b&&W?b.data.isEqual(W.data)?$!==Z&&(o.track({type:3,doc:W}),J=!0):this.su(b,W)||(o.track({type:2,doc:W}),J=!0,(x&&this.eu(W,x)>0||T&&this.eu(W,T)<0)&&(y=!0)):!b&&W?(o.track({type:0,doc:W}),J=!0):b&&!W&&(o.track({type:1,doc:b}),J=!0,(x||T)&&(y=!0)),J&&(W?(p=p.add(W),c=Z?c.add(k):c.delete(k)):(p=p.delete(k),c=c.delete(k)))})),this.query.limit!==null)for(;p.size>this.query.limit;){const k=this.query.limitType==="F"?p.last():p.first();p=p.delete(k.key),c=c.delete(k.key),o.track({type:1,doc:k})}return{tu:p,iu:o,Ss:y,mutatedKeys:c}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,o,a){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const p=e.iu.ya();p.sort(((k,C)=>(function(W,$){const Z=J=>{switch(J){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $e(20277,{Vt:J})}};return Z(W)-Z($)})(k.type,C.type)||this.eu(k.doc,C.doc))),this.ou(o),a=a??!1;const y=t&&!a?this._u():[],x=this.Ya.size===0&&this.current&&!a?1:0,T=x!==this.Xa;return this.Xa=x,p.length!==0||T?{snapshot:new bl(this.query,e.tu,c,p,e.mutatedKeys,x===0,T,!1,!!o&&o.resumeToken.approximateByteSize()>0),au:y}:{au:y}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Iy,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=ot(),this.tu.forEach((o=>{this.uu(o.key)&&(this.Ya=this.Ya.add(o.key))}));const t=[];return e.forEach((o=>{this.Ya.has(o)||t.push(new ow(o))})),this.Ya.forEach((o=>{e.has(o)||t.push(new sw(o))})),t}cu(e){this.Za=e.ks,this.Ya=ot();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return bl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Qp="SyncEngine";class Vk{constructor(e,t,o){this.query=e,this.targetId=t,this.view=o}}class Fk{constructor(e){this.key=e,this.hu=!1}}class zk{constructor(e,t,o,a,c,p){this.localStore=e,this.remoteStore=t,this.eventManager=o,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=p,this.Pu={},this.Tu=new Aa((y=>x0(y)),qh),this.Iu=new Map,this.Eu=new Set,this.Ru=new Mt(je.comparator),this.Au=new Map,this.Vu=new Fp,this.du={},this.mu=new Map,this.fu=Al.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Uk(r,e,t=!0){const o=dw(r);let a;const c=o.Tu.get(e);return c?(o.sharedClientState.addLocalQueryTarget(c.targetId),a=c.view.lu()):a=await aw(o,e,t,!0),a}async function Bk(r,e){const t=dw(r);await aw(t,e,!0,!1)}async function aw(r,e,t,o){const a=await ak(r.localStore,Ui(e)),c=a.targetId,p=r.sharedClientState.addLocalQueryTarget(c,t);let y;return o&&(y=await Hk(r,e,c,p==="current",a.resumeToken)),r.isPrimaryClient&&t&&Q0(r.remoteStore,a),y}async function Hk(r,e,t,o,a){r.pu=(C,b,W)=>(async function(Z,J,he,me){let xe=J.view.ru(he);xe.Ss&&(xe=await yy(Z.localStore,J.query,!1).then((({documents:F})=>J.view.ru(F,xe))));const Le=me&&me.targetChanges.get(J.targetId),Te=me&&me.targetMismatches.get(J.targetId)!=null,De=J.view.applyChanges(xe,Z.isPrimaryClient,Le,Te);return Cy(Z,J.targetId,De.au),De.snapshot})(r,C,b,W);const c=await yy(r.localStore,e,!0),p=new jk(e,c.ks),y=p.ru(c.documents),x=Ku.createSynthesizedTargetChangeForCurrentChange(t,o&&r.onlineState!=="Offline",a),T=p.applyChanges(y,r.isPrimaryClient,x);Cy(r,t,T.au);const k=new Vk(e,t,p);return r.Tu.set(e,k),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),T.snapshot}async function Wk(r,e,t){const o=Ye(r),a=o.Tu.get(e),c=o.Iu.get(a.targetId);if(c.length>1)return o.Iu.set(a.targetId,c.filter((p=>!qh(p,e)))),void o.Tu.delete(e);o.isPrimaryClient?(o.sharedClientState.removeLocalQueryTarget(a.targetId),o.sharedClientState.isActiveQueryTarget(a.targetId)||await ip(o.localStore,a.targetId,!1).then((()=>{o.sharedClientState.clearQueryState(a.targetId),t&&Hp(o.remoteStore,a.targetId),ap(o,a.targetId)})).catch(Ml)):(ap(o,a.targetId),await ip(o.localStore,a.targetId,!0))}async function $k(r,e){const t=Ye(r),o=t.Tu.get(e),a=t.Iu.get(o.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(o.targetId),Hp(t.remoteStore,o.targetId))}async function qk(r,e,t){const o=Xk(r);try{const a=await(function(p,y){const x=Ye(p),T=Pt.now(),k=y.reduce(((W,$)=>W.add($.key)),ot());let C,b;return x.persistence.runTransaction("Locally write mutations","readwrite",(W=>{let $=Rs(),Z=ot();return x.xs.getEntries(W,k).next((J=>{$=J,$.forEach(((he,me)=>{me.isValidDocument()||(Z=Z.add(he))}))})).next((()=>x.localDocuments.getOverlayedDocuments(W,$))).next((J=>{C=J;const he=[];for(const me of y){const xe=oP(me,C.get(me.key).overlayedDocument);xe!=null&&he.push(new zo(me.key,xe,f0(xe.value.mapValue),vr.exists(!0)))}return x.mutationQueue.addMutationBatch(W,T,he,y)})).next((J=>{b=J;const he=J.applyToLocalDocumentSet(C,Z);return x.documentOverlayCache.saveOverlays(W,J.batchId,he)}))})).then((()=>({batchId:b.batchId,changes:I0(C)})))})(o.localStore,e);o.sharedClientState.addPendingMutation(a.batchId),(function(p,y,x){let T=p.du[p.currentUser.toKey()];T||(T=new Mt(st)),T=T.insert(y,x),p.du[p.currentUser.toKey()]=T})(o,a.batchId,t),await Qu(o,a.changes),await ed(o.remoteStore)}catch(a){const c=Kp(a,"Failed to persist write");t.reject(c)}}async function lw(r,e){const t=Ye(r);try{const o=await ik(t.localStore,e);e.targetChanges.forEach(((a,c)=>{const p=t.Au.get(c);p&&(yt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?p.hu=!0:a.modifiedDocuments.size>0?yt(p.hu,14607):a.removedDocuments.size>0&&(yt(p.hu,42227),p.hu=!1))})),await Qu(t,o,e)}catch(o){await Ml(o)}}function ky(r,e,t){const o=Ye(r);if(o.isPrimaryClient&&t===0||!o.isPrimaryClient&&t===1){const a=[];o.Tu.forEach(((c,p)=>{const y=p.view.va(e);y.snapshot&&a.push(y.snapshot)})),(function(p,y){const x=Ye(p);x.onlineState=y;let T=!1;x.queries.forEach(((k,C)=>{for(const b of C.ba)b.va(y)&&(T=!0)})),T&&Zp(x)})(o.eventManager,e),a.length&&o.Pu.J_(a),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}async function Gk(r,e,t){const o=Ye(r);o.sharedClientState.updateQueryState(e,"rejected",t);const a=o.Au.get(e),c=a&&a.key;if(c){let p=new Mt(je.comparator);p=p.insert(c,An.newNoDocument(c,Qe.min()));const y=ot().add(c),x=new Yh(Qe.min(),new Map,new Mt(st),p,y);await lw(o,x),o.Ru=o.Ru.remove(c),o.Au.delete(e),Yp(o)}else await ip(o.localStore,e,!1).then((()=>ap(o,e,t))).catch(Ml)}async function Kk(r,e){const t=Ye(r),o=e.batch.batchId;try{const a=await rk(t.localStore,e);cw(t,o,null),uw(t,o),t.sharedClientState.updateMutationState(o,"acknowledged"),await Qu(t,a)}catch(a){await Ml(a)}}async function Zk(r,e,t){const o=Ye(r);try{const a=await(function(p,y){const x=Ye(p);return x.persistence.runTransaction("Reject batch","readwrite-primary",(T=>{let k;return x.mutationQueue.lookupMutationBatch(T,y).next((C=>(yt(C!==null,37113),k=C.keys(),x.mutationQueue.removeMutationBatch(T,C)))).next((()=>x.mutationQueue.performConsistencyCheck(T))).next((()=>x.documentOverlayCache.removeOverlaysForBatchId(T,k,y))).next((()=>x.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(T,k))).next((()=>x.localDocuments.getDocuments(T,k)))}))})(o.localStore,e);cw(o,e,t),uw(o,e),o.sharedClientState.updateMutationState(e,"rejected",t),await Qu(o,a)}catch(a){await Ml(a)}}function uw(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function cw(r,e,t){const o=Ye(r);let a=o.du[o.currentUser.toKey()];if(a){const c=a.get(e);c&&(t?c.reject(t):c.resolve(),a=a.remove(e)),o.du[o.currentUser.toKey()]=a}}function ap(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const o of r.Iu.get(e))r.Tu.delete(o),t&&r.Pu.yu(o,t);r.Iu.delete(e),r.isPrimaryClient&&r.Vu.Gr(e).forEach((o=>{r.Vu.containsKey(o)||hw(r,o)}))}function hw(r,e){r.Eu.delete(e.path.canonicalString());const t=r.Ru.get(e);t!==null&&(Hp(r.remoteStore,t),r.Ru=r.Ru.remove(e),r.Au.delete(t),Yp(r))}function Cy(r,e,t){for(const o of t)o instanceof sw?(r.Vu.addReference(o.key,e),Qk(r,o)):o instanceof ow?(Se(Qp,"Document no longer in limbo: "+o.key),r.Vu.removeReference(o.key,e),r.Vu.containsKey(o.key)||hw(r,o.key)):$e(19791,{wu:o})}function Qk(r,e){const t=e.key,o=t.path.canonicalString();r.Ru.get(t)||r.Eu.has(o)||(Se(Qp,"New document in limbo: "+t),r.Eu.add(o),Yp(r))}function Yp(r){for(;r.Eu.size>0&&r.Ru.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new je(Tt.fromString(e)),o=r.fu.next();r.Au.set(o,new Fk(t)),r.Ru=r.Ru.insert(t,o),Q0(r.remoteStore,new So(Ui(Dp(t.path)),o,"TargetPurposeLimboResolution",Hh.ce))}}async function Qu(r,e,t){const o=Ye(r),a=[],c=[],p=[];o.Tu.isEmpty()||(o.Tu.forEach(((y,x)=>{p.push(o.pu(x,e,t).then((T=>{var k;if((T||t)&&o.isPrimaryClient){const C=T?!T.fromCache:(k=t==null?void 0:t.targetChanges.get(x.targetId))==null?void 0:k.current;o.sharedClientState.updateQueryState(x.targetId,C?"current":"not-current")}if(T){a.push(T);const C=Up.Es(x.targetId,T);c.push(C)}})))})),await Promise.all(p),o.Pu.J_(a),await(async function(x,T){const k=Ye(x);try{await k.persistence.runTransaction("notifyLocalViewChanges","readwrite",(C=>oe.forEach(T,(b=>oe.forEach(b.Ts,(W=>k.persistence.referenceDelegate.addReference(C,b.targetId,W))).next((()=>oe.forEach(b.Is,(W=>k.persistence.referenceDelegate.removeReference(C,b.targetId,W)))))))))}catch(C){if(!Ol(C))throw C;Se(Bp,"Failed to update sequence numbers: "+C)}for(const C of T){const b=C.targetId;if(!C.fromCache){const W=k.vs.get(b),$=W.snapshotVersion,Z=W.withLastLimboFreeSnapshotVersion($);k.vs=k.vs.insert(b,Z)}}})(o.localStore,c))}async function Yk(r,e){const t=Ye(r);if(!t.currentUser.isEqual(e)){Se(Qp,"User change. New user:",e.toKey());const o=await q0(t.localStore,e);t.currentUser=e,(function(c,p){c.mu.forEach((y=>{y.forEach((x=>{x.reject(new _e(ie.CANCELLED,p))}))})),c.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),await Qu(t,o.Ns)}}function Jk(r,e){const t=Ye(r),o=t.Au.get(e);if(o&&o.hu)return ot().add(o.key);{let a=ot();const c=t.Iu.get(e);if(!c)return a;for(const p of c){const y=t.Tu.get(p);a=a.unionWith(y.view.nu)}return a}}function dw(r){const e=Ye(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=lw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Jk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Gk.bind(null,e),e.Pu.J_=Mk.bind(null,e.eventManager),e.Pu.yu=Ok.bind(null,e.eventManager),e}function Xk(r){const e=Ye(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Kk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Zk.bind(null,e),e}class Rh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Jh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return nk(this.persistence,new XP,e.initialUser,this.serializer)}Cu(e){return new $0(zp.Vi,this.serializer)}Du(e){return new uk}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Rh.provider={build:()=>new Rh};class eC extends Rh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){yt(this.persistence.referenceDelegate instanceof bh,46915);const o=this.persistence.referenceDelegate.garbageCollector;return new VP(o,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?ir.withCacheSize(this.cacheSizeBytes):ir.DEFAULT;return new $0((o=>bh.Vi(o,t)),this.serializer)}}class lp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=o=>ky(this.syncEngine,o,1),this.remoteStore.remoteSyncer.handleCredentialChange=Yk.bind(null,this.syncEngine),await Rk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Dk})()}createDatastore(e){const t=Jh(e.databaseInfo.databaseId),o=pk(e.databaseInfo);return vk(e.authCredentials,e.appCheckCredentials,o,t)}createRemoteStore(e){return(function(o,a,c,p,y){return new xk(o,a,c,p,y)})(this.localStore,this.datastore,e.asyncQueue,(t=>ky(this.syncEngine,t,0)),(function(){return xy.v()?new xy:new ck})())}createSyncEngine(e,t){return(function(a,c,p,y,x,T,k){const C=new zk(a,c,p,y,x,T);return k&&(C.gu=!0),C})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(a){const c=Ye(a);Se(Sa,"RemoteStore shutting down."),c.Ea.add(5),await Zu(c),c.Aa.shutdown(),c.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}lp.provider={build:()=>new lp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):bs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oo="FirestoreClient";class tC{constructor(e,t,o,a,c){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=o,this._databaseInfo=a,this.user=Cn.UNAUTHENTICATED,this.clientId=Cp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(o,(async p=>{Se(Oo,"Received user=",p.uid),await this.authCredentialListener(p),this.user=p})),this.appCheckCredentials.start(o,(p=>(Se(Oo,"Received new app check token=",p),this.appCheckCredentialListener(p,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ks;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const o=Kp(t,"Failed to shutdown persistence");e.reject(o)}})),e.promise}}async function Nf(r,e){r.asyncQueue.verifyOperationInProgress(),Se(Oo,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let o=t.initialUser;r.setCredentialChangeListener((async a=>{o.isEqual(a)||(await q0(e.localStore,a),o=a)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function Ay(r,e){r.asyncQueue.verifyOperationInProgress();const t=await nC(r);Se(Oo,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((o=>Ty(e.remoteStore,o))),r.setAppCheckTokenChangeListener(((o,a)=>Ty(e.remoteStore,a))),r._onlineComponents=e}async function nC(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){Se(Oo,"Using user provided OfflineComponentProvider");try{await Nf(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===ie.FAILED_PRECONDITION||a.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;Ia("Error using user provided cache. Falling back to memory cache: "+t),await Nf(r,new Rh)}}else Se(Oo,"Using default OfflineComponentProvider"),await Nf(r,new eC(void 0));return r._offlineComponents}async function pw(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(Se(Oo,"Using user provided OnlineComponentProvider"),await Ay(r,r._uninitializedComponentsProvider._online)):(Se(Oo,"Using default OnlineComponentProvider"),await Ay(r,new lp))),r._onlineComponents}function rC(r){return pw(r).then((e=>e.syncEngine))}async function mw(r){const e=await pw(r),t=e.eventManager;return t.onListen=Uk.bind(null,e.syncEngine),t.onUnlisten=Wk.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Bk.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=$k.bind(null,e.syncEngine),t}function iC(r,e,t={}){const o=new ks;return r.asyncQueue.enqueueAndForget((async()=>(function(c,p,y,x,T){const k=new fw({next:b=>{k.Nu(),p.enqueueAndForget((()=>rw(c,C)));const W=b.docs.has(y);!W&&b.fromCache?T.reject(new _e(ie.UNAVAILABLE,"Failed to get document because the client is offline.")):W&&b.fromCache&&x&&x.source==="server"?T.reject(new _e(ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):T.resolve(b)},error:b=>T.reject(b)}),C=new iw(Dp(y.path),k,{includeMetadataChanges:!0,Ka:!0});return nw(c,C)})(await mw(r),r.asyncQueue,e,t,o))),o.promise}function sC(r,e,t={}){const o=new ks;return r.asyncQueue.enqueueAndForget((async()=>(function(c,p,y,x,T){const k=new fw({next:b=>{k.Nu(),p.enqueueAndForget((()=>rw(c,C))),b.fromCache&&x.source==="server"?T.reject(new _e(ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):T.resolve(b)},error:b=>T.reject(b)}),C=new iw(y,k,{includeMetadataChanges:!0,Ka:!0});return nw(c,C)})(await mw(r),r.asyncQueue,e,t,o))),o.promise}function oC(r,e){const t=new ks;return r.asyncQueue.enqueueAndForget((async()=>qk(await rC(r),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gw(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC="ComponentProvider",by=new Map;function lC(r,e,t,o,a){return new CS(r,e,t,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,gw(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator,o)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _w="firestore.googleapis.com",Ny=!0;class Ry{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new _e(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=_w,this.ssl=Ny}else this.host=e.host,this.ssl=e.ssl??Ny;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=W0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<OP)throw new _e(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}_S("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gw(e.experimentalLongPollingOptions??{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new _e(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new _e(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new _e(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(o,a){return o.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class td{constructor(e,t,o,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=o,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ry({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new _e(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new _e(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ry(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(o){if(!o)return new aS;switch(o.type){case"firstParty":return new hS(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new _e(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const o=by.get(t);o&&(Se(aC,"Removing Datastore"),by.delete(t),o.terminate())})(this),Promise.resolve()}}function uC(r,e,t,o={}){var T;r=Ns(r,td);const a=Rl(e),c=r._getSettings(),p={...c,emulatorOptions:r._getEmulatorOptions()},y=`${e}:${t}`;a&&(iv(`https://${y}`),sv("Firestore",!0)),c.host!==_w&&c.host!==y&&Ia("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const x={...c,host:y,ssl:a,emulatorOptions:o};if(!va(x,p)&&(r._setSettings(x),o.mockUserToken)){let k,C;if(typeof o.mockUserToken=="string")k=o.mockUserToken,C=Cn.MOCK_USER;else{k=Hx(o.mockUserToken,(T=r._app)==null?void 0:T.options.projectId);const b=o.mockUserToken.sub||o.mockUserToken.user_id;if(!b)throw new _e(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");C=new Cn(b)}r._authCredentials=new lS(new t0(k,C))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e,t,o){this.converter=t,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new Na(this.firestore,e,this._query)}}class Zt{constructor(e,t,o){this.converter=t,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Zt(this.firestore,e,this._key)}toJSON(){return{type:Zt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,o){if(qu(t,Zt._jsonSchema))return new Zt(e,o||null,new je(Tt.fromString(t.referencePath)))}}Zt._jsonSchemaVersion="firestore/documentReference/1.0",Zt._jsonSchema={type:Kt("string",Zt._jsonSchemaVersion),referencePath:Kt("string")};class bo extends Na{constructor(e,t,o){super(e,t,Dp(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Zt(this.firestore,null,new je(e))}withConverter(e){return new bo(this.firestore,e,this._path)}}function yw(r,e,...t){if(r=Ut(r),n0("collection","path",e),r instanceof td){const o=Tt.fromString(e,...t);return $_(o),new bo(r,null,o)}{if(!(r instanceof Zt||r instanceof bo))throw new _e(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=r._path.child(Tt.fromString(e,...t));return $_(o),new bo(r.firestore,null,o)}}function Jp(r,e,...t){if(r=Ut(r),arguments.length===1&&(e=Cp.newId()),n0("doc","path",e),r instanceof td){const o=Tt.fromString(e,...t);return W_(o),new Zt(r,null,new je(o))}{if(!(r instanceof Zt||r instanceof bo))throw new _e(ie.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=r._path.child(Tt.fromString(e,...t));return W_(o),new Zt(r.firestore,r instanceof bo?r.converter:null,new je(o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ly="AsyncQueue";class Dy{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new K0(this,"async_queue_retry"),this._c=()=>{const o=bf();o&&Se(Ly,"Visibility state changed to "+o.visibilityState),this.M_.w_()},this.ac=e;const t=bf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=bf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new ks;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Ol(e))throw e;Se(Ly,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((o=>{throw this.nc=o,this.rc=!1,bs("INTERNAL UNHANDLED ERROR: ",My(o)),o})).then((o=>(this.rc=!1,o))))));return this.ac=t,t}enqueueAfterDelay(e,t,o){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=Gp.createAndSchedule(this,e,t,o,(c=>this.hc(c)));return this.tc.push(a),a}uc(){this.nc&&$e(47125,{Pc:My(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,o)=>t.targetTimeMs-o.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function My(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class Fl extends td{constructor(e,t,o,a){super(e,t,o,a),this.type="firestore",this._queue=new Dy,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Dy(e),this._firestoreClient=void 0,await e}}}function cC(r,e){const t=typeof r=="object"?r:uv(),o=typeof r=="string"?r:Ih,a=pp(t,"firestore").getImmediate({identifier:o});if(!a._initialized){const c=Ux("firestore");c&&uC(a,...c)}return a}function nd(r){if(r._terminated)throw new _e(ie.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||hC(r),r._firestoreClient}function hC(r){var o,a,c,p;const e=r._freezeSettings(),t=lC(r._databaseId,((o=r._app)==null?void 0:o.options.appId)||"",r._persistenceKey,(a=r._app)==null?void 0:a.options.apiKey,e);r._componentsProvider||(c=e.localCache)!=null&&c._offlineComponentProvider&&((p=e.localCache)!=null&&p._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new tC(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(x){const T=x==null?void 0:x._online.build();return{_offline:x==null?void 0:x._offline.build(T),_online:T}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Gr(mn.fromBase64String(e))}catch(t){throw new _e(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Gr(mn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Gr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(qu(e,Gr._jsonSchema))return Gr.fromBase64String(e.bytes)}}Gr._jsonSchemaVersion="firestore/bytes/1.0",Gr._jsonSchema={type:Kt("string",Gr._jsonSchemaVersion),bytes:Kt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new _e(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new _e(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new _e(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return st(this._lat,e._lat)||st(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Hi._jsonSchemaVersion}}static fromJSON(e){if(qu(e,Hi._jsonSchema))return new Hi(e.latitude,e.longitude)}}Hi._jsonSchemaVersion="firestore/geoPoint/1.0",Hi._jsonSchema={type:Kt("string",Hi._jsonSchemaVersion),latitude:Kt("number"),longitude:Kt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(o,a){if(o.length!==a.length)return!1;for(let c=0;c<o.length;++c)if(o[c]!==a[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ui._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(qu(e,ui._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ui(e.vectorValues);throw new _e(ie.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ui._jsonSchemaVersion="firestore/vectorValue/1.0",ui._jsonSchema={type:Kt("string",ui._jsonSchemaVersion),vectorValues:Kt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dC=/^__.*__$/;class fC{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return this.fieldMask!==null?new zo(e,this.data,this.fieldMask,t,this.fieldTransforms):new Gu(e,this.data,t,this.fieldTransforms)}}class vw{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return new zo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ww(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $e(40011,{dataSource:r})}}class tm{constructor(e,t,o,a,c,p){this.settings=e,this.databaseId=t,this.serializer=o,this.ignoreUndefinedProperties=a,c===void 0&&this.validatePath(),this.fieldTransforms=c||[],this.fieldMask=p||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new tm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var a;const t=(a=this.path)==null?void 0:a.child(e),o=this.contextWith({path:t,arrayElement:!1});return o.validatePathSegment(e),o}childContextForFieldPath(e){var a;const t=(a=this.path)==null?void 0:a.child(e),o=this.contextWith({path:t,arrayElement:!1});return o.validatePath(),o}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Lh(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(ww(this.dataSource)&&dC.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class pC{constructor(e,t,o){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=o||Jh(e)}createContext(e,t,o,a=!1){return new tm({dataSource:e,methodName:t,targetDoc:o,path:pn.emptyPath(),arrayElement:!1,hasConverter:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function nm(r){const e=r._freezeSettings(),t=Jh(r._databaseId);return new pC(r._databaseId,!!e.ignoreUndefinedProperties,t)}function xw(r,e,t,o,a,c={}){const p=r.createContext(c.merge||c.mergeFields?2:0,e,t,a);rm("Data must be an object, but it was:",p,o);const y=Ew(o,p);let x,T;if(c.merge)x=new yr(p.fieldMask),T=p.fieldTransforms;else if(c.mergeFields){const k=[];for(const C of c.mergeFields){const b=Nl(e,C,t);if(!p.contains(b))throw new _e(ie.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);Sw(k,b)||k.push(b)}x=new yr(k),T=p.fieldTransforms.filter((C=>x.covers(C.field)))}else x=null,T=p.fieldTransforms;return new fC(new sr(y),x,T)}class rd extends em{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof rd}}function mC(r,e,t,o){const a=r.createContext(1,e,t);rm("Data must be an object, but it was:",a,o);const c=[],p=sr.empty();Fo(o,((x,T)=>{const k=Iw(e,x,t);T=Ut(T);const C=a.childContextForFieldPath(k);if(T instanceof rd)c.push(k);else{const b=Yu(T,C);b!=null&&(c.push(k),p.set(k,b))}}));const y=new yr(c);return new vw(p,y,a.fieldTransforms)}function gC(r,e,t,o,a,c){const p=r.createContext(1,e,t),y=[Nl(e,o,t)],x=[a];if(c.length%2!=0)throw new _e(ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<c.length;b+=2)y.push(Nl(e,c[b])),x.push(c[b+1]);const T=[],k=sr.empty();for(let b=y.length-1;b>=0;--b)if(!Sw(T,y[b])){const W=y[b];let $=x[b];$=Ut($);const Z=p.childContextForFieldPath(W);if($ instanceof rd)T.push(W);else{const J=Yu($,Z);J!=null&&(T.push(W),k.set(W,J))}}const C=new yr(T);return new vw(k,C,p.fieldTransforms)}function _C(r,e,t,o=!1){return Yu(t,r.createContext(o?4:3,e))}function Yu(r,e){if(Tw(r=Ut(r)))return rm("Unsupported field value:",e,r),Ew(r,e);if(r instanceof em)return(function(o,a){if(!ww(a.dataSource))throw a.createError(`${o._methodName}() can only be used with update() and set()`);if(!a.path)throw a.createError(`${o._methodName}() is not currently supported inside arrays`);const c=o._toFieldTransform(a);c&&a.fieldTransforms.push(c)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(o,a){const c=[];let p=0;for(const y of o){let x=Yu(y,a.childContextForArray(p));x==null&&(x={nullValue:"NULL_VALUE"}),c.push(x),p++}return{arrayValue:{values:c}}})(r,e)}return(function(o,a){if((o=Ut(o))===null)return{nullValue:"NULL_VALUE"};if(typeof o=="number")return eP(a.serializer,o);if(typeof o=="boolean")return{booleanValue:o};if(typeof o=="string")return{stringValue:o};if(o instanceof Date){const c=Pt.fromDate(o);return{timestampValue:Ah(a.serializer,c)}}if(o instanceof Pt){const c=new Pt(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:Ah(a.serializer,c)}}if(o instanceof Hi)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof Gr)return{bytesValue:O0(a.serializer,o._byteString)};if(o instanceof Zt){const c=a.databaseId,p=o.firestore._databaseId;if(!p.isEqual(c))throw a.createError(`Document reference is for database ${p.projectId}/${p.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Vp(o.firestore._databaseId||a.databaseId,o._key.path)}}if(o instanceof ui)return(function(p,y){const x=p instanceof ui?p.toArray():p;return{mapValue:{fields:{[h0]:{stringValue:d0},[Sh]:{arrayValue:{values:x.map((k=>{if(typeof k!="number")throw y.createError("VectorValues must only contain numeric values.");return Mp(y.serializer,k)}))}}}}}})(o,a);if(H0(o))return o._toProto(a.serializer);throw a.createError(`Unsupported field value: ${Bh(o)}`)})(r,e)}function Ew(r,e){const t={};return s0(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fo(r,((o,a)=>{const c=Yu(a,e.childContextForField(o));c!=null&&(t[o]=c)})),{mapValue:{fields:t}}}function Tw(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Pt||r instanceof Hi||r instanceof Gr||r instanceof Zt||r instanceof em||r instanceof ui||H0(r))}function rm(r,e,t){if(!Tw(t)||!r0(t)){const o=Bh(t);throw o==="an object"?e.createError(r+" a custom object"):e.createError(r+" "+o)}}function Nl(r,e,t){if((e=Ut(e))instanceof Xp)return e._internalPath;if(typeof e=="string")return Iw(r,e);throw Lh("Field path arguments must be of type string or ",r,!1,void 0,t)}const yC=new RegExp("[~\\*/\\[\\]]");function Iw(r,e,t){if(e.search(yC)>=0)throw Lh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Xp(...e.split("."))._internalPath}catch{throw Lh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Lh(r,e,t,o,a){const c=o&&!o.isEmpty(),p=a!==void 0;let y=`Function ${e}() called with invalid data`;t&&(y+=" (via `toFirestore()`)"),y+=". ";let x="";return(c||p)&&(x+=" (found",c&&(x+=` in field ${o}`),p&&(x+=` in document ${a}`),x+=")"),new _e(ie.INVALID_ARGUMENT,y+r+x)}function Sw(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{convertValue(e,t="none"){switch(Do(e)){case 0:return null;case 1:return e.booleanValue;case 2:return zt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Lo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw $e(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const o={};return Fo(e,((a,c)=>{o[a]=this.convertValue(c,t)})),o}convertVectorValue(e){var o,a,c;const t=(c=(a=(o=e.fields)==null?void 0:o[Sh].arrayValue)==null?void 0:a.values)==null?void 0:c.map((p=>zt(p.doubleValue)));return new ui(t)}convertGeoPoint(e){return new Hi(zt(e.latitude),zt(e.longitude))}convertArray(e,t){return(e.values||[]).map((o=>this.convertValue(o,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const o=$h(e);return o==null?null:this.convertValue(o,t);case"estimate":return this.convertTimestamp(Du(e));default:return null}}convertTimestamp(e){const t=Ro(e);return new Pt(t.seconds,t.nanos)}convertDocumentKey(e,t){const o=Tt.fromString(e);yt(B0(o),9688,{name:e});const a=new Mu(o.get(1),o.get(3)),c=new je(o.popFirst(5));return a.isEqual(t)||bs(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw extends vC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Zt(this.firestore,null,t)}}const Oy="@firebase/firestore",jy="4.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(e,t,o,a,c){this._firestore=e,this._userDataWriter=t,this._key=o,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Zt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new wC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(Nl("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class wC extends kw{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xC(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new _e(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class im{}class Cw extends im{}function EC(r,e,...t){let o=[];e instanceof im&&o.push(e),o=o.concat(t),(function(c){const p=c.filter((x=>x instanceof om)).length,y=c.filter((x=>x instanceof sm)).length;if(p>1||p>0&&y>0)throw new _e(ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(o);for(const a of o)r=a._apply(r);return r}class sm extends Cw{constructor(e,t,o){super(),this._field=e,this._op=t,this._value=o,this.type="where"}static _create(e,t,o){return new sm(e,t,o)}_apply(e){const t=this._parse(e);return Aw(e._query,t),new Na(e.firestore,e.converter,Jf(e._query,t))}_parse(e){const t=nm(e.firestore);return(function(c,p,y,x,T,k,C){let b;if(T.isKeyField()){if(k==="array-contains"||k==="array-contains-any")throw new _e(ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${k}' queries on documentId().`);if(k==="in"||k==="not-in"){Fy(C,k);const $=[];for(const Z of C)$.push(Vy(x,c,Z));b={arrayValue:{values:$}}}else b=Vy(x,c,C)}else k!=="in"&&k!=="not-in"&&k!=="array-contains-any"||Fy(C,k),b=_C(y,p,C,k==="in"||k==="not-in");return Gt.create(T,k,b)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class om extends im{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new om(e,t)}_parse(e){const t=this._queryConstraints.map((o=>o._parse(e))).filter((o=>o.getFilters().length>0));return t.length===1?t[0]:hi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,c){let p=a;const y=c.getFlattenedFilters();for(const x of y)Aw(p,x),p=Jf(p,x)})(e._query,t),new Na(e.firestore,e.converter,Jf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class am extends Cw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new am(e,t)}_apply(e){const t=(function(a,c,p){if(a.startAt!==null)throw new _e(ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new _e(ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ju(c,p)})(e._query,this._field,this._direction);return new Na(e.firestore,e.converter,qS(e._query,t))}}function TC(r,e="asc"){const t=e,o=Nl("orderBy",r);return am._create(o,t)}function Vy(r,e,t){if(typeof(t=Ut(t))=="string"){if(t==="")throw new _e(ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!w0(e)&&t.indexOf("/")!==-1)throw new _e(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const o=e.path.child(Tt.fromString(t));if(!je.isDocumentKey(o))throw new _e(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return X_(r,new je(o))}if(t instanceof Zt)return X_(r,t._key);throw new _e(ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Bh(t)}.`)}function Fy(r,e){if(!Array.isArray(r)||r.length===0)throw new _e(ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Aw(r,e){const t=(function(a,c){for(const p of a)for(const y of p.getFlattenedFilters())if(c.indexOf(y.op)>=0)return y.op;return null})(r.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new _e(ie.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new _e(ie.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function bw(r,e,t){let o;return o=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,o}class xu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ya extends kw{constructor(e,t,o,a,c,p){super(e,t,o,a,p),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new fh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const o=this._document.data.field(Nl("DocumentSnapshot.get",e));if(o!==null)return this._userDataWriter.convertValue(o,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(ie.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ya._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ya._jsonSchemaVersion="firestore/documentSnapshot/1.0",ya._jsonSchema={type:Kt("string",ya._jsonSchemaVersion),bundleSource:Kt("string","DocumentSnapshot"),bundleName:Kt("string"),bundle:Kt("string")};class fh extends ya{data(e={}){return super.data(e)}}class Il{constructor(e,t,o,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new xu(a.hasPendingWrites,a.fromCache),this.query=o}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((o=>{e.call(t,new fh(this._firestore,this._userDataWriter,o.key,o,new xu(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new _e(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,c){if(a._snapshot.oldDocs.isEmpty()){let p=0;return a._snapshot.docChanges.map((y=>{const x=new fh(a._firestore,a._userDataWriter,y.doc.key,y.doc,new xu(a._snapshot.mutatedKeys.has(y.doc.key),a._snapshot.fromCache),a.query.converter);return y.doc,{type:"added",doc:x,oldIndex:-1,newIndex:p++}}))}{let p=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((y=>c||y.type!==3)).map((y=>{const x=new fh(a._firestore,a._userDataWriter,y.doc.key,y.doc,new xu(a._snapshot.mutatedKeys.has(y.doc.key),a._snapshot.fromCache),a.query.converter);let T=-1,k=-1;return y.type!==0&&(T=p.indexOf(y.doc.key),p=p.delete(y.doc.key)),y.type!==1&&(p=p.add(y.doc),k=p.indexOf(y.doc.key)),{type:IC(y.type),doc:x,oldIndex:T,newIndex:k}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(ie.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Il._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Cp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],o=[],a=[];return this.docs.forEach((c=>{c._document!==null&&(t.push(c._document),o.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),a.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function IC(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $e(61501,{type:r})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Il._jsonSchemaVersion="firestore/querySnapshot/1.0",Il._jsonSchema={type:Kt("string",Il._jsonSchemaVersion),bundleSource:Kt("string","QuerySnapshot"),bundleName:Kt("string"),bundle:Kt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=nm(e)}set(e,t,o){this._verifyNotCommitted();const a=Rf(e,this._firestore),c=bw(a.converter,t,o),p=xw(this._dataReader,"WriteBatch.set",a._key,c,a.converter!==null,o);return this._mutations.push(p.toMutation(a._key,vr.none())),this}update(e,t,o,...a){this._verifyNotCommitted();const c=Rf(e,this._firestore);let p;return p=typeof(t=Ut(t))=="string"||t instanceof Xp?gC(this._dataReader,"WriteBatch.update",c._key,t,o,a):mC(this._dataReader,"WriteBatch.update",c._key,t),this._mutations.push(p.toMutation(c._key,vr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Rf(e,this._firestore);return this._mutations=this._mutations.concat(new Qh(t._key,vr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new _e(ie.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Rf(r,e){if((r=Ut(r)).firestore!==e)throw new _e(ie.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nw(r){r=Ns(r,Zt);const e=Ns(r.firestore,Fl),t=nd(e);return iC(t,r._key).then((o=>PC(e,r,o)))}function up(r){r=Ns(r,Na);const e=Ns(r.firestore,Fl),t=nd(e),o=new Pw(e);return xC(r._query),sC(t,r._query).then((a=>new Il(e,o,r,a)))}function lm(r,e,t){r=Ns(r,Zt);const o=Ns(r.firestore,Fl),a=bw(r.converter,e,t),c=nm(o);return um(o,[xw(c,"setDoc",r._key,a,r.converter!==null,t).toMutation(r._key,vr.none())])}function zy(r){return um(Ns(r.firestore,Fl),[new Qh(r._key,vr.none())])}function um(r,e){const t=nd(r);return oC(t,e)}function PC(r,e,t){const o=t.docs.get(e._key),a=new Pw(r);return new ya(r,a,e._key,o,new xu(t.hasPendingWrites,t.fromCache),e.converter)}function kC(r){return r=Ns(r,Fl),nd(r),new SC(r,(e=>um(r,e)))}(function(e,t=!0){oS(Ll),Sl(new wa("firestore",((o,{instanceIdentifier:a,options:c})=>{const p=o.getProvider("app").getImmediate(),y=new Fl(new uS(o.getProvider("auth-internal")),new dS(p,o.getProvider("app-check-internal")),AS(p,a),p);return c={useFetchStreams:t,...c},y._setSettings(c),y}),"PUBLIC").setMultipleInstances(!0)),Co(Oy,jy,e),Co(Oy,jy,"esm2020")})();const CC={apiKey:"AIzaSyBAf83WJpNKrse4AIIGYajoGt_Q0jeQ5zs",authDomain:"wandr-b02f5.firebaseapp.com",projectId:"wandr-b02f5",storageBucket:"wandr-b02f5.firebasestorage.app",messagingSenderId:"426584594137",appId:"1:426584594137:web:5beca6fa60330f90b410c8"},Rw=lv(CC),Dh=bI(Rw),zl=cC(Rw);function AC(){const[r,e]=le.useState(null),[t,o]=le.useState(!0);return le.useEffect(()=>_T(Dh,c=>{e(c),o(!1)}),[]),{user:r,loading:t}}function Lw(r){return yw(zl,"users",r,"trips")}function Dw(r,e){return Jp(zl,"users",r,"trips",e)}function cm(r,e){return Jp(zl,"users",r,"chats",e)}function bC(r){return yw(zl,"users",r,"chats")}function hm(r){return Jp(zl,"users",r,"settings","main")}async function NC(r){return(await up(EC(Lw(r),TC("createdAt","desc")))).docs.map(t=>t.data())}async function Uy(r,e){await lm(Dw(r,e.id),e)}async function RC(r,e){await Promise.all([zy(Dw(r,e)),zy(cm(r,e))])}async function LC(r,e){const t=await Nw(cm(r,e));return t.exists()?t.data().messages??[]:[]}async function DC(r,e,t){await lm(cm(r,e),{messages:t})}async function MC(r){const e=await Nw(hm(r));if(!e.exists())return{perplexityKey:"",anthropicKey:""};const t=e.data();return{perplexityKey:t.perplexityKey??t.apiKey??"",anthropicKey:t.anthropicKey??""}}async function OC(r,e){await lm(hm(r),{perplexityKey:e.perplexityKey,anthropicKey:e.anthropicKey},{merge:!0})}async function jC(r){const e=kC(zl),[t,o]=await Promise.all([up(Lw(r)),up(bC(r))]);t.docs.forEach(a=>e.delete(a.ref)),o.docs.forEach(a=>e.delete(a.ref)),e.delete(hm(r)),await e.commit()}let ph=null;function By(r){ph=r}function VC(){return Math.random().toString(36).slice(2,9)}function bn(r){const e=VC();return ph==null||ph({...r,id:e,timestamp:new Date().toISOString()}),e}const FC="https://api.perplexity.ai/chat/completions",zC="sonar-pro",UC="sonar";async function dm(r,e,t,o={}){var T;const{maxTokens:a=8192,model:c=zC}=o,p=[{role:"system",content:e},...r],y=await fetch(FC,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({model:c,max_tokens:a,messages:p})});if(!y.ok){const k=await y.json().catch(()=>({}));throw new Error(((T=k==null?void 0:k.error)==null?void 0:T.message)||`Perplexity API error ${y.status}`)}return(await y.json()).choices[0].message.content}const BC="https://api.anthropic.com/v1/messages",HC="claude-haiku-4-5-20251001";async function WC(r,e,t,o={}){var x;const{maxTokens:a=8192}=o,c=await fetch(BC,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":t,"anthropic-version":"2023-06-01","anthropic-dangerous-direct-browser-access":"true"},body:JSON.stringify({model:HC,max_tokens:a,system:e,messages:[{role:"user",content:r}]})});if(!c.ok){const T=await c.json().catch(()=>({})),k=((x=T==null?void 0:T.error)==null?void 0:x.message)||`Claude API error ${c.status}`;throw c.status===401||k.toLowerCase().includes("api-key")||k.toLowerCase().includes("authentication")?new Error("Invalid Claude API key  please check your Anthropic key in Settings."):new Error(k)}const y=(await c.json()).content.find(T=>T.type==="text");if(!y)throw new Error("No text content in Claude response");return y.text}function $C(r,e){var x;if(!(e!=null&&e.text)&&!((x=e==null?void 0:e.files)!=null&&x.length))return r;const t=e.files??[],o=t.filter(T=>T.mimeType.startsWith("image/")),a=t.filter(T=>T.mimeType==="application/pdf"),c=t.filter(T=>T.mimeType==="text/plain"||T.mimeType==="text/markdown");if(!o.length&&!a.length){let T="";e.text&&(T+=`User notes: ${e.text}

`);for(const k of c)try{T+=`--- ${k.name} ---
${atob(k.dataBase64)}

`}catch{}return T+r}const p=[];for(const T of o)p.push({type:"image",source:{type:"base64",media_type:T.mimeType,data:T.dataBase64}});for(const T of a)p.push({type:"document",source:{type:"base64",media_type:"application/pdf",data:T.dataBase64}});let y="";e.text&&(y+=`User notes: ${e.text}

`);for(const T of c)try{y+=`--- ${T.name} ---
${atob(T.dataBase64)}

`}catch{}return y+=r,p.push({type:"text",text:y}),p}async function fm(r,e,t,o,a,c={}){if(t)try{const x=$C(r,a);return await WC(x,e,t,c)}catch(x){const T=x instanceof Error?x.message:"";if(!(T.includes("Invalid Claude API key")||T.includes("401"))||!o)throw x;bn({message:"Claude key invalid  using Perplexity",status:"pending"})}let p=r;a!=null&&a.text&&(p=`User notes: ${a.text}

${r}`);const y=((a==null?void 0:a.files)??[]).filter(x=>x.mimeType==="text/plain"||x.mimeType==="text/markdown");if(y.length){let x="";for(const T of y)try{x+=`--- ${T.name} ---
${atob(T.dataBase64)}

`}catch{}p=x+p}return dm([{role:"user",content:p}],e,o,c)}function Mw(r){if(Array.isArray(r))return r;if(r&&typeof r=="object"){for(const e of Object.values(r))if(Array.isArray(e)&&e.length>0)return e}throw new Error("AI returned an unexpected format. Please try again.")}function qC(r,e,t,o){let a=0,c=!1;for(let p=e;p<r.length;p++){const y=r[p];if(c){if(y==="\\"){p++;continue}y==='"'&&(c=!1);continue}if(y==='"'){c=!0;continue}if(y===t){a++;continue}if(y===o&&(a--,a===0))return r.slice(e,p+1)}return null}function pm(r){const e=r.replace(/^```(?:json|JSON)?\s*/m,"").replace(/```\s*$/m,"").trim();for(const t of[e,r]){try{return JSON.parse(t)}catch{}const o=t.indexOf("{"),a=t.indexOf("["),c=[];o!==-1&&c.push([o,"{","}"]),a!==-1&&c.push([a,"[","]"]),c.sort((p,y)=>p[0]-y[0]);for(const[p,y,x]of c){const T=qC(t,p,y,x);if(T)try{return JSON.parse(T)}catch{}}}throw new Error("AI returned an unexpected format. Please try again.")}async function GC(r){const{destination:e,startDate:t,endDate:o,interests:a,budget:c,travelers:p,anthropicKey:y,perplexityKey:x,context:T}=r;bn({message:`Creating trip to ${e}`,status:"pending"});const k=`Trip to ${e} (${t}  ${o}).
Interests: ${a.join(", ")}. Budget: $${c}. Travelers: ${p}.

Fill in this JSON exactly (no other text):
{
  "name": "<catchy 3-5 word trip name>",
  "emoji": "<single emoji>",
  "description": "<2 sentences about this trip>",
  "coverGradient": "<exactly one of: from-violet-900 to-indigo-900 | from-blue-900 to-cyan-900 | from-emerald-900 to-teal-900 | from-rose-900 to-pink-900 | from-amber-900 to-orange-900 | from-slate-900 to-blue-900>"
}`;try{const C=await fm(k,"You are a travel expert. Respond with ONLY a valid JSON object  no markdown, no code fences, no explanation, no citations. Raw JSON only.",y,x,T,{maxTokens:512}),b=pm(C);return bn({message:`Trip "${b.name}" created`,status:"success"}),b}catch(C){const b=C instanceof Error?C.message:"Unknown error";throw bn({message:"Failed to create trip",detail:b,status:"error"}),C}}async function KC(r,e,t){const o=Math.ceil((new Date(r.endDate).getTime()-new Date(r.startDate).getTime())/864e5)+1;bn({message:`Generating ${o}-day itinerary for ${r.destination}`,status:"pending"});const a=[];for(let y=0;y<o;y++){const x=new Date(r.startDate+"T12:00:00");x.setDate(x.getDate()+y),a.push(x.toISOString().split("T")[0])}const c=r.notes?`
Additional context: ${r.notes}`:"",p=`Create a ${o}-day itinerary for ${r.destination}.
Dates: ${a.join(", ")}. Interests: ${r.interests.join(", ")}.
Budget: ${r.currency}${r.budget} for ${r.travelers} person(s).${c}

Return a JSON array of ${o} objects. Each object:
{"id":"day-N","date":"YYYY-MM-DD","title":"Day theme","activities":[
  {"id":"act-N-M","time":"HH:MM","title":"Name","description":"One sentence.","category":"food|sightseeing|activity|transport|accommodation|free","estimatedCost":0,"lat":0.0000,"lng":0.0000}
]}
Exactly 4 activities per day. Include accurate GPS coordinates (lat/lng) for each specific location. Keep descriptions to 1 sentence.`;try{const y=await fm(p,"Respond with ONLY a valid JSON array  no markdown, no code fences, no explanation, no citations. Raw JSON array only.",e,t,void 0,{maxTokens:8192}),x=Mw(pm(y)).filter(T=>T!=null).map((T,k)=>{const C=new Date(r.startDate+"T12:00:00");return C.setDate(C.getDate()+k),{...T,date:C.toISOString().split("T")[0],activities:Array.isArray(T.activities)?T.activities:[]}});return bn({message:`Itinerary ready  ${x.length} days, ${x.reduce((T,k)=>T+k.activities.length,0)} activities`,status:"success"}),x}catch(y){const x=y instanceof Error?y.message:"Unknown error";throw bn({message:"Failed to generate itinerary",detail:x,status:"error"}),y}}async function ZC(r,e,t){const o=Math.ceil((new Date(r.endDate).getTime()-new Date(r.startDate).getTime())/864e5)+1;bn({message:`Generating packing list for ${r.destination}`,status:"pending"});const a=r.notes?`
Additional context: ${r.notes}`:"",c=`Packing list for ${o}-day trip to ${r.destination}.
Activities: ${r.interests.join(", ")}. Travelers: ${r.travelers}.${a}

Return a JSON array of exactly 25 items:
[{"id":"item-N","name":"Item","category":"Documents|Clothing|Toiletries|Electronics|Health & Safety|Activities|Miscellaneous","packed":false,"quantity":1,"essential":true}]
Mark passport, medications as essential:true. Others essential:false.`;try{const p=await fm(c,"Respond with ONLY a valid JSON array  no markdown, no code fences, no explanation, no citations. Raw JSON array only.",e,t,void 0,{maxTokens:3e3}),y=Mw(pm(p));return bn({message:`Packing list ready  ${y.length} items`,status:"success"}),y}catch(p){const y=p instanceof Error?p.message:"Unknown error";throw bn({message:"Failed to generate packing list",detail:y,status:"error"}),p}}async function QC(r,e,t,o){bn({message:"AI assistant responding",status:"pending"});const a=t.notes?`
Trip notes: ${t.notes}`:"",c=`You are a travel assistant for a trip to ${t.destination} (${t.startDate}  ${t.endDate}).
${t.travelers} traveler(s). Budget: ${t.currency}${t.budget}. Interests: ${t.interests.join(", ")}.${a}
Be concise and specific. 2-4 sentences per answer.`;try{const p=await dm([...e,{role:"user",content:r}],c,o,{maxTokens:1024});return bn({message:"AI assistant replied",status:"success"}),p}catch(p){const y=p instanceof Error?p.message:"Unknown error";throw bn({message:"AI chat error",detail:y,status:"error"}),p}}async function YC(r,e,t){bn({message:"Searching travel info",status:"pending"});const o=`You are a real-time travel search assistant. The user is planning a trip to ${e.destination} from ${e.startDate} to ${e.endDate} with ${e.travelers} traveler(s), budget ${e.currency}${e.budget}. Provide up-to-date, specific answers using web search. Be concise but thorough. Use clear sections when listing multiple items.`;try{const a=await dm([{role:"user",content:r}],o,t,{maxTokens:2048,model:UC});return bn({message:"Search complete",status:"success"}),a}catch(a){const c=a instanceof Error?a.message:"Unknown error";throw bn({message:"Search failed",detail:c,status:"error"}),a}}function JC(r){switch(r){case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":return"Invalid email or password.";case"auth/email-already-in-use":return"An account with this email already exists.";case"auth/weak-password":return"Password must be at least 6 characters.";case"auth/invalid-email":return"Please enter a valid email address.";case"auth/too-many-requests":return"Too many failed attempts. Please try again later.";default:return"Something went wrong. Please try again."}}function XC(){const[r,e]=le.useState("login"),[t,o]=le.useState(""),[a,c]=le.useState(""),[p,y]=le.useState(""),[x,T]=le.useState(!1),k=async b=>{b.preventDefault(),y(""),T(!0);try{r==="create"?await fT(Dh,t,a):await pT(Dh,t,a)}catch(W){y(JC(W.code))}finally{T(!1)}},C=()=>{e(b=>b==="login"?"create":"login"),y("")};return _.jsx("div",{className:"min-h-screen bg-gray-950 flex items-center justify-center p-4",children:_.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-8 w-full max-w-md shadow-2xl",children:[_.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[_.jsx("div",{className:"p-2.5 bg-indigo-500/20 rounded-xl border border-indigo-500/30",children:_.jsx(Sp,{className:"w-6 h-6 text-indigo-400"})}),_.jsxs("div",{children:[_.jsx("h1",{className:"text-xl font-bold text-gray-100",children:"Wandr"}),_.jsx("p",{className:"text-xs text-indigo-400",children:"AI Trip Planner"})]})]}),_.jsx("h2",{className:"text-lg font-semibold text-gray-100 mb-6",children:r==="login"?"Sign in to your account":"Create your account"}),_.jsxs("form",{onSubmit:k,className:"space-y-4",children:[_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm text-gray-400 mb-1.5",children:"Email"}),_.jsxs("div",{className:"relative",children:[_.jsx(QI,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-600"}),_.jsx("input",{type:"email",value:t,onChange:b=>o(b.target.value),required:!0,placeholder:"you@example.com",className:"w-full bg-gray-800 border border-gray-700 rounded-xl pl-10 pr-4 py-3 text-gray-100 placeholder-gray-600 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition"})]})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm text-gray-400 mb-1.5",children:"Password"}),_.jsxs("div",{className:"relative",children:[_.jsx(Ps,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-600"}),_.jsx("input",{type:"password",value:a,onChange:b=>c(b.target.value),required:!0,minLength:6,placeholder:"Minimum 6 characters",className:"w-full bg-gray-800 border border-gray-700 rounded-xl pl-10 pr-4 py-3 text-gray-100 placeholder-gray-600 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition"})]})]}),p&&_.jsx("p",{className:"text-sm text-red-400 bg-red-500/10 border border-red-500/20 rounded-xl px-4 py-2.5",children:p}),_.jsxs("button",{type:"submit",disabled:x||!t||!a,className:"w-full py-3 bg-indigo-600 hover:bg-indigo-500 disabled:opacity-40 disabled:cursor-not-allowed rounded-xl font-medium transition shadow-lg shadow-indigo-900/30 flex items-center justify-center gap-2",children:[x&&_.jsx($n,{className:"w-4 h-4 animate-spin"}),r==="login"?"Sign In":"Create Account"]})]}),_.jsxs("p",{className:"text-center text-sm text-gray-500 mt-6",children:[r==="login"?"Don't have an account?":"Already have an account?"," ",_.jsx("button",{onClick:C,className:"text-indigo-400 hover:text-indigo-300 transition font-medium",children:r==="login"?"Create one":"Sign in"})]})]})})}function eA({onSave:r,existing:e,onClose:t,onLogout:o,onDeleteAccount:a}){const[c,p]=le.useState(e.perplexityKey),[y,x]=le.useState(e.anthropicKey),[T,k]=le.useState(!1),[C,b]=le.useState(!1),[W,$]=le.useState(!1),[Z,J]=le.useState(!1),[he,me]=le.useState(""),[xe,Le]=le.useState(""),[Te,De]=le.useState(!1),F=()=>{r({perplexityKey:c.trim(),anthropicKey:y.trim()}),$(!0),setTimeout(()=>$(!1),2e3)},D=async()=>{De(!0),Le("");try{await a(he)}catch(M){const U=M;U.code==="auth/wrong-password"||U.code==="auth/invalid-credential"?Le("Incorrect password."):Le("Failed to delete account. Please try again."),De(!1)}};return _.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:_.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-8 w-full max-w-md shadow-2xl",children:[_.jsxs("div",{className:"flex items-center justify-between mb-8",children:[_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("div",{className:"p-2 bg-gray-800 rounded-lg",children:_.jsx(KI,{className:"w-5 h-5 text-gray-400"})}),_.jsxs("div",{children:[_.jsx("h2",{className:"font-semibold text-gray-100",children:"API Settings"}),_.jsx("p",{className:"text-xs text-gray-500",children:"Configure your AI provider keys"})]})]}),_.jsx("button",{onClick:t,className:"p-1.5 text-gray-500 hover:text-gray-300 hover:bg-gray-800 rounded-lg transition",title:"Close",children:_.jsx(Ru,{className:"w-4 h-4"})})]}),_.jsxs("div",{className:"space-y-6",children:[_.jsxs("div",{children:[_.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Perplexity API Key",e.perplexityKey&&_.jsx("span",{className:"ml-2 text-xs text-emerald-400",children:" configured"})]}),_.jsxs("div",{className:"relative",children:[_.jsx("input",{type:T?"text":"password",value:c,onChange:M=>p(M.target.value),placeholder:"pplx-...",className:"w-full bg-gray-800 border border-gray-700 rounded-xl px-4 py-3 pr-10 text-gray-100 placeholder-gray-600 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition font-mono text-sm"}),_.jsx("button",{type:"button",onClick:()=>k(M=>!M),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-300 transition",children:T?_.jsx(j_,{className:"w-4 h-4"}):_.jsx(V_,{className:"w-4 h-4"})})]}),_.jsx("p",{className:"mt-1.5 text-xs text-gray-500",children:"Used for itinerary generation, packing lists, and AI chat."}),_.jsxs("a",{href:"https://www.perplexity.ai/settings/api",target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-1 mt-1 text-xs text-indigo-400 hover:text-indigo-300 transition",children:[_.jsx(O_,{className:"w-3 h-3"}),"Get your Perplexity key"]})]}),_.jsxs("div",{children:[_.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Anthropic API Key",e.anthropicKey&&_.jsx("span",{className:"ml-2 text-xs text-emerald-400",children:" configured"})]}),_.jsxs("div",{className:"relative",children:[_.jsx("input",{type:C?"text":"password",value:y,onChange:M=>x(M.target.value),placeholder:"sk-ant-...",className:"w-full bg-gray-800 border border-gray-700 rounded-xl px-4 py-3 pr-10 text-gray-100 placeholder-gray-600 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition font-mono text-sm"}),_.jsx("button",{type:"button",onClick:()=>b(M=>!M),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-300 transition",children:C?_.jsx(j_,{className:"w-4 h-4"}):_.jsx(V_,{className:"w-4 h-4"})})]}),_.jsx("p",{className:"mt-1.5 text-xs text-gray-500",children:"For Claude-powered features."}),_.jsxs("a",{href:"https://console.anthropic.com/settings/keys",target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-1 mt-1 text-xs text-indigo-400 hover:text-indigo-300 transition",children:[_.jsx(O_,{className:"w-3 h-3"}),"Get your Anthropic key"]})]}),_.jsx("button",{onClick:F,className:`w-full py-3 rounded-xl font-medium transition shadow-lg shadow-indigo-900/30 ${W?"bg-emerald-600 hover:bg-emerald-500":"bg-indigo-600 hover:bg-indigo-500"}`,children:W?" Saved":"Save Keys"})]}),_.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-800",children:[_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsxs("button",{onClick:o,className:"flex items-center gap-2 text-sm text-gray-400 hover:text-gray-200 transition",children:[_.jsx(ZI,{className:"w-4 h-4"}),"Sign out"]}),_.jsx("button",{onClick:()=>J(!0),className:"text-sm text-red-500 hover:text-red-400 transition",children:"Delete account"})]}),Z&&_.jsxs("div",{className:"mt-4 p-4 bg-red-500/10 border border-red-500/20 rounded-xl space-y-3",children:[_.jsx("p",{className:"text-sm text-red-300 leading-relaxed",children:"This will permanently delete all your trips, chat history, and your account. Enter your password to confirm."}),_.jsx("input",{type:"password",value:he,onChange:M=>{me(M.target.value),Le("")},placeholder:"Your password",className:"w-full bg-gray-800 border border-gray-700 rounded-xl px-4 py-2.5 text-gray-100 placeholder-gray-600 text-sm focus:outline-none focus:border-red-500 transition"}),xe&&_.jsx("p",{className:"text-xs text-red-400",children:xe}),_.jsxs("div",{className:"flex gap-2",children:[_.jsx("button",{onClick:()=>{J(!1),me(""),Le("")},className:"flex-1 py-2 text-sm text-gray-400 hover:text-gray-200 bg-gray-800 hover:bg-gray-700 rounded-xl transition",children:"Cancel"}),_.jsxs("button",{onClick:D,disabled:!he||Te,className:"flex-1 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-500 disabled:opacity-40 rounded-xl transition flex items-center justify-center gap-1.5",children:[Te&&_.jsx($n,{className:"w-3.5 h-3.5 animate-spin"}),"Delete everything"]})]})]})]})]})})}function Hy({trip:r,onClick:e}){const t=new Date(r.startDate),o=new Date(r.endDate),a=Math.ceil((o.getTime()-t.getTime())/864e5)+1,p={planning:{bg:"bg-amber-500/20",text:"text-amber-300",label:"Planning"},upcoming:{bg:"bg-blue-500/20",text:"text-blue-300",label:"Upcoming"},completed:{bg:"bg-emerald-500/20",text:"text-emerald-300",label:"Completed"}}[r.status];return _.jsxs("button",{onClick:e,className:"group w-full text-left rounded-2xl overflow-hidden border border-gray-800 hover:border-gray-600 transition-all duration-200 hover:-translate-y-0.5 hover:shadow-xl hover:shadow-black/40 bg-gray-900",children:[_.jsxs("div",{className:`h-32 bg-gradient-to-br ${r.coverGradient} relative overflow-hidden`,children:[_.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/40 to-transparent"}),_.jsx("div",{className:"absolute bottom-3 left-4 text-4xl drop-shadow-lg",children:r.emoji}),_.jsx("div",{className:"absolute top-3 right-3",children:_.jsx("span",{className:`text-xs px-2.5 py-1 rounded-full font-medium backdrop-blur-sm ${p.bg} ${p.text}`,children:p.label})})]}),_.jsxs("div",{className:"p-4",children:[_.jsx("h3",{className:"font-semibold text-gray-100 group-hover:text-white truncate leading-tight",children:r.name}),_.jsxs("div",{className:"flex items-center gap-1.5 mt-1",children:[_.jsx(zh,{className:"w-3.5 h-3.5 text-gray-500 shrink-0"}),_.jsx("span",{className:"text-sm text-gray-400 truncate",children:r.destination})]}),_.jsxs("div",{className:"flex items-center justify-between mt-3 text-xs text-gray-500",children:[_.jsxs("span",{className:"flex items-center gap-1",children:[_.jsx(Tp,{className:"w-3.5 h-3.5"}),t.toLocaleDateString("en",{month:"short",day:"numeric"})]}),_.jsxs("span",{className:"flex items-center gap-1",children:[_.jsx(Pp,{className:"w-3.5 h-3.5"}),r.travelers]}),_.jsxs("span",{className:"font-medium text-gray-400",children:[a,"d"]})]})]})]})}function tA({trips:r,onNewTrip:e,onSelectTrip:t,onSettingsClick:o,hasAiKey:a}){const c=r.filter(y=>y.status!=="completed"),p=r.filter(y=>y.status==="completed");return _.jsxs("div",{className:"min-h-screen flex flex-col",children:[_.jsx("header",{className:"border-b border-gray-800 bg-gray-950/90 backdrop-blur-sm sticky top-0 z-10",children:_.jsxs("div",{className:"max-w-6xl mx-auto px-4 md:px-6 py-4 flex items-center justify-between",children:[_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("div",{className:"p-2 bg-indigo-500/20 rounded-xl border border-indigo-500/20",children:_.jsx(Sp,{className:"w-5 h-5 text-indigo-400"})}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("span",{className:"text-xl font-bold tracking-tight",children:"Wandr"}),_.jsx("span",{className:"text-xs text-indigo-400 bg-indigo-500/10 border border-indigo-500/20 px-2 py-0.5 rounded-full font-medium",children:"AI"})]})]}),_.jsxs("button",{onClick:o,className:"relative p-2 text-gray-400 hover:text-gray-200 hover:bg-gray-800 rounded-lg transition",title:"API Settings",children:[_.jsx(Ca,{className:"w-5 h-5"}),!a&&_.jsx("span",{className:"absolute top-1.5 right-1.5 w-2 h-2 bg-amber-400 rounded-full"})]})]})}),_.jsxs("main",{className:"flex-1 max-w-6xl mx-auto w-full px-4 md:px-6 py-6 md:py-8",children:[_.jsxs("div",{className:"flex items-start justify-between mb-8",children:[_.jsxs("div",{children:[_.jsx("h1",{className:"text-3xl font-bold text-gray-100",children:"Your Trips"}),_.jsx("p",{className:"text-gray-400 mt-1",children:"Plan and explore the world with AI"})]}),_.jsxs("button",{onClick:e,className:"flex items-center gap-2 px-3 md:px-5 py-2.5 bg-indigo-600 hover:bg-indigo-500 rounded-xl font-medium transition shadow-lg shadow-indigo-900/30 shrink-0",children:[_.jsx($f,{className:"w-4 h-4"}),_.jsx("span",{className:"hidden sm:inline",children:"New Trip"})]})]}),!a&&_.jsxs("div",{className:"mb-6 flex items-center justify-between gap-3 bg-amber-500/10 border border-amber-500/20 rounded-xl px-4 py-3",children:[_.jsx("p",{className:"text-sm text-amber-300",children:"AI features are disabled  add your Perplexity API key to generate itineraries, packing lists, and use AI chat."}),_.jsx("button",{onClick:o,className:"shrink-0 text-xs font-medium text-amber-300 hover:text-amber-200 bg-amber-500/20 hover:bg-amber-500/30 px-3 py-1.5 rounded-lg transition",children:"Set up"})]}),r.length===0&&_.jsxs("div",{className:"flex flex-col items-center justify-center py-24 text-center",children:[_.jsx("div",{className:"w-20 h-20 bg-indigo-500/10 border border-indigo-500/20 rounded-3xl flex items-center justify-center mb-5",children:_.jsx($I,{className:"w-10 h-10 text-indigo-400"})}),_.jsx("h2",{className:"text-xl font-semibold text-gray-200 mb-2",children:"No trips yet"}),_.jsx("p",{className:"text-gray-500 max-w-sm mb-6 leading-relaxed",children:"Create your first trip and let AI build a personalized itinerary, packing list, and travel guide."}),_.jsxs("button",{onClick:e,className:"flex items-center gap-2 px-6 py-3 bg-indigo-600 hover:bg-indigo-500 rounded-xl font-medium transition",children:[_.jsx($f,{className:"w-4 h-4"}),"Plan your first trip"]})]}),c.length>0&&_.jsxs("section",{className:"mb-8",children:[_.jsx("h2",{className:"text-xs font-semibold text-gray-500 uppercase tracking-widest mb-4",children:"Upcoming & Planning"}),_.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:c.map(y=>_.jsx(Hy,{trip:y,onClick:()=>t(y)},y.id))})]}),p.length>0&&_.jsxs("section",{children:[_.jsx("h2",{className:"text-xs font-semibold text-gray-500 uppercase tracking-widest mb-4",children:"Completed"}),_.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 opacity-70",children:p.map(y=>_.jsx(Hy,{trip:y,onClick:()=>t(y)},y.id))})]})]})]})}const Wy=[{id:"culture",label:"Culture & History",emoji:""},{id:"food",label:"Food & Dining",emoji:""},{id:"nature",label:"Nature & Outdoors",emoji:""},{id:"adventure",label:"Adventure",emoji:""},{id:"beach",label:"Beach & Relaxation",emoji:""},{id:"shopping",label:"Shopping",emoji:""},{id:"nightlife",label:"Nightlife",emoji:""},{id:"photography",label:"Photography",emoji:""},{id:"family",label:"Family-Friendly",emoji:""},{id:"luxury",label:"Luxury",emoji:""},{id:"backpacking",label:"Budget Travel",emoji:""},{id:"wellness",label:"Wellness & Spa",emoji:""}],nA=[500,1500,3e3,5e3,1e4],dl=5,rA=4*1024*1024;function iA(){return Math.random().toString(36).slice(2,9)}function $y(r){return r<1024?`${r} B`:r<1024*1024?`${(r/1024).toFixed(0)} KB`:`${(r/(1024*1024)).toFixed(1)} MB`}function sA({onBack:r,onCreate:e,hasAiKey:t,hasClaudeKey:o,onSettingsClick:a}){const[c,p]=le.useState(1),[y,x]=le.useState(!1),[T,k]=le.useState(""),[C,b]=le.useState(""),[W,$]=le.useState(""),[Z,J]=le.useState(""),[he,me]=le.useState(2),[xe,Le]=le.useState([]),[Te,De]=le.useState(3e3),[F,D]=le.useState("USD"),[M,U]=le.useState(""),[R,O]=le.useState([]),[N,be]=le.useState(!1),[Ke,ge]=le.useState(""),Ve=le.useRef(null),ee=new Date().toISOString().split("T")[0],Pe=C.trim()!==""&&W!==""&&Z!==""&&new Date(Z)>=new Date(W),se=xe.length>0&&Te>0,B=W&&Z?Math.ceil((new Date(Z).getTime()-new Date(W).getTime())/864e5)+1:null,ne=re=>Le(qe=>qe.includes(re)?qe.filter(dt=>dt!==re):[...qe,re]),Oe=["image/jpeg","image/png","image/webp","image/gif","application/pdf","text/plain","text/markdown"],Ae=".jpg,.jpeg,.png,.webp,.gif,.pdf,.txt,.md",Ie=le.useCallback(re=>{ge("");const qe=Array.from(re),dt=dl-R.length;if(dt<=0){ge(`Maximum ${dl} files.`);return}let gn=0;qe.slice(0,dt).forEach(jt=>{if(!Oe.includes(jt.type)){ge(`"${jt.name}" is not a supported file type.`);return}if(jt.size>rA){ge(`"${jt.name}" exceeds the 4 MB limit.`);return}const Rn=new FileReader;Rn.onload=di=>{var ar;const fi=(ar=di.target)==null?void 0:ar.result,Kr=fi.split(",")[1],or={id:iA(),name:jt.name,mimeType:jt.type,dataBase64:Kr,previewUrl:jt.type.startsWith("image/")?fi:void 0,size:jt.size};O(kt=>[...kt,or])},Rn.readAsDataURL(jt),gn++}),qe.length>dt+gn&&ge(`Only the first ${dt} files were added (limit: ${dl}).`)},[R.length]),ye=re=>O(qe=>qe.filter(dt=>dt.id!==re)),Xe=async()=>{x(!0),k("");const re={text:M.trim()||void 0,files:R.length?R:void 0};try{await e({destination:C,startDate:W,endDate:Z,travelers:he,budget:Te,currency:F,interests:xe,context:re.text||re.files?re:void 0})}catch(qe){k(qe instanceof Error?qe.message:"Failed to create trip"),x(!1)}};return _.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-950",children:[_.jsx("header",{className:"border-b border-gray-800 bg-gray-950",children:_.jsxs("div",{className:"max-w-2xl mx-auto px-6 py-4 flex items-center gap-4",children:[_.jsx("button",{onClick:r,className:"p-2 text-gray-400 hover:text-gray-200 hover:bg-gray-800 rounded-lg transition",children:_.jsx(Wf,{className:"w-5 h-5"})}),_.jsxs("div",{className:"flex-1",children:[_.jsx("h1",{className:"font-semibold text-gray-100",children:"New Trip"}),_.jsxs("p",{className:"text-xs text-gray-500",children:["Step ",c," of 4"]})]}),_.jsx("div",{className:"flex gap-1.5",children:[1,2,3,4].map(re=>_.jsx("div",{className:`h-1.5 w-8 rounded-full transition-colors duration-300 ${re<=c?"bg-indigo-500":"bg-gray-800"}`},re))})]})}),_.jsxs("main",{className:"flex-1 max-w-2xl mx-auto w-full px-6 py-10",children:[c===1&&_.jsxs("div",{className:"space-y-7",children:[_.jsxs("div",{children:[_.jsx("h2",{className:"text-2xl font-bold text-gray-100 mb-1",children:"Where are you going?"}),_.jsx("p",{className:"text-gray-400",children:"Tell us your destination and travel dates."})]}),_.jsxs("div",{children:[_.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[_.jsx(zh,{className:"w-4 h-4 inline mr-1.5 text-gray-500"}),"Destination"]}),_.jsx("input",{type:"text",value:C,onChange:re=>b(re.target.value),placeholder:"e.g. Tokyo, Japan",className:"w-full bg-gray-900 border border-gray-700 rounded-xl px-4 py-3 text-gray-100 placeholder-gray-600 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition",autoFocus:!0})]}),_.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[_.jsxs("div",{children:[_.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[_.jsx(Tp,{className:"w-4 h-4 inline mr-1.5 text-gray-500"}),"Start Date"]}),_.jsx("input",{type:"date",value:W,min:ee,onChange:re=>{$(re.target.value),Z&&re.target.value>Z&&J(re.target.value)},className:"w-full bg-gray-900 border border-gray-700 rounded-xl px-4 py-3 text-gray-100 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition [color-scheme:dark]"})]}),_.jsxs("div",{children:[_.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["End Date",B&&_.jsxs("span",{className:"ml-2 text-xs text-indigo-400",children:[B,"d"]})]}),_.jsx("input",{type:"date",value:Z,min:W||ee,onChange:re=>J(re.target.value),className:"w-full bg-gray-900 border border-gray-700 rounded-xl px-4 py-3 text-gray-100 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition [color-scheme:dark]"})]})]}),_.jsxs("div",{children:[_.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:[_.jsx(Pp,{className:"w-4 h-4 inline mr-1.5 text-gray-500"}),"Travelers"]}),_.jsxs("div",{className:"flex items-center gap-4",children:[_.jsx("button",{type:"button",onClick:()=>me(Math.max(1,he-1)),className:"w-10 h-10 bg-gray-800 hover:bg-gray-700 rounded-xl flex items-center justify-center text-xl font-light text-gray-300 transition",children:""}),_.jsx("span",{className:"text-2xl font-bold w-8 text-center text-gray-100",children:he}),_.jsx("button",{type:"button",onClick:()=>me(he+1),className:"w-10 h-10 bg-gray-800 hover:bg-gray-700 rounded-xl flex items-center justify-center text-xl font-light text-gray-300 transition",children:"+"}),_.jsx("span",{className:"text-gray-400 text-sm",children:he===1?"traveler":"travelers"})]})]})]}),c===2&&_.jsxs("div",{className:"space-y-7",children:[_.jsxs("div",{children:[_.jsx("h2",{className:"text-2xl font-bold text-gray-100 mb-1",children:"What's your style?"}),_.jsx("p",{className:"text-gray-400",children:"Pick interests and set your total budget."})]}),_.jsxs("div",{children:[_.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:["Interests ",_.jsx("span",{className:"text-gray-500",children:"(select all that apply)"})]}),_.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:Wy.map(({id:re,label:qe,emoji:dt})=>{const gn=xe.includes(re);return _.jsxs("button",{type:"button",onClick:()=>ne(re),className:`flex items-center gap-2 px-3 py-2.5 rounded-xl text-sm border transition-all text-left ${gn?"bg-indigo-600/20 border-indigo-500/60 text-indigo-200":"bg-gray-900 border-gray-700 text-gray-300 hover:border-gray-500 hover:text-gray-200"}`,children:[_.jsx("span",{className:"text-base",children:dt}),_.jsx("span",{className:"flex-1 leading-tight",children:qe}),gn&&_.jsx(Fh,{className:"w-3.5 h-3.5 text-indigo-400 shrink-0"})]},re)})})]}),_.jsxs("div",{children:[_.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[_.jsx(Ip,{className:"w-4 h-4 inline mr-1.5 text-gray-500"}),"Total Budget (all travelers)"]}),_.jsxs("div",{className:"flex gap-2",children:[_.jsx("select",{value:F,onChange:re=>D(re.target.value),className:"bg-gray-900 border border-gray-700 rounded-xl px-3 py-3 text-gray-100 focus:outline-none focus:border-indigo-500 transition",children:["USD","EUR","GBP","JPY","AUD","CAD"].map(re=>_.jsx("option",{value:re,children:re},re))}),_.jsx("input",{type:"number",value:Te,min:100,step:100,onChange:re=>De(Number(re.target.value)),className:"flex-1 bg-gray-900 border border-gray-700 rounded-xl px-4 py-3 text-gray-100 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition"})]}),_.jsx("div",{className:"flex gap-2 mt-2.5",children:nA.map(re=>_.jsxs("button",{type:"button",onClick:()=>De(re),className:`flex-1 py-1.5 text-xs rounded-lg border transition ${Te===re?"bg-indigo-600/20 border-indigo-500/40 text-indigo-300":"bg-gray-900 border-gray-700 text-gray-500 hover:text-gray-300 hover:border-gray-600"}`,children:["$",(re/1e3).toFixed(0)+(re>=1e3?"k":"")]},re))})]})]}),c===3&&_.jsxs("div",{className:"space-y-6",children:[_.jsxs("div",{className:"flex items-start justify-between gap-2",children:[_.jsxs("div",{children:[_.jsx("h2",{className:"text-2xl font-bold text-gray-100 mb-1",children:"Anything to add?"}),_.jsx("p",{className:"text-gray-400 text-sm leading-relaxed",children:"Give the AI extra context for a more personalised trip. Fully optional."})]}),_.jsx("button",{onClick:()=>p(4),className:"shrink-0 text-xs text-gray-500 hover:text-gray-300 underline underline-offset-2 mt-1 transition",children:"Skip"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:" Notes"}),_.jsx("textarea",{value:M,onChange:re=>U(re.target.value),rows:4,placeholder:`e.g. "I'm celebrating my anniversary, I have a hotel booked near the Eiffel Tower, I'm vegetarian, I can't do early mornings"`,className:"w-full bg-gray-900 border border-gray-700 rounded-xl px-4 py-3 text-gray-100 placeholder-gray-600 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition resize-none text-sm leading-relaxed"}),_.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Saved with the trip  used by AI whenever you generate the itinerary or packing list."})]}),_.jsxs("div",{children:[_.jsxs("div",{className:"flex items-center justify-between mb-2",children:[_.jsxs("label",{className:"text-sm font-medium text-gray-300",children:[" Files & Images",_.jsxs("span",{className:"ml-2 text-xs font-normal text-gray-500",children:[R.length,"/",dl]})]}),!o&&_.jsx("span",{className:"text-xs text-amber-400 bg-amber-500/10 border border-amber-500/20 px-2 py-0.5 rounded-full",children:"Images & PDFs need Claude key"})]}),_.jsxs("div",{onDragOver:re=>{re.preventDefault(),be(!0)},onDragLeave:()=>be(!1),onDrop:re=>{re.preventDefault(),be(!1),Ie(re.dataTransfer.files)},onClick:()=>{var re;return(re=Ve.current)==null?void 0:re.click()},className:`border-2 border-dashed rounded-xl px-4 py-6 flex flex-col items-center gap-2 cursor-pointer transition ${N?"border-indigo-500 bg-indigo-500/5":R.length>=dl?"border-gray-800 opacity-50 cursor-not-allowed":"border-gray-700 hover:border-gray-500 hover:bg-gray-900/50"}`,children:[_.jsx("input",{ref:Ve,type:"file",multiple:!0,accept:Ae,onChange:re=>re.target.files&&Ie(re.target.files),className:"hidden",disabled:R.length>=dl}),_.jsx(tS,{className:"w-6 h-6 text-gray-500"}),_.jsxs("p",{className:"text-sm text-gray-400 text-center",children:["Drop files here or ",_.jsx("span",{className:"text-indigo-400",children:"browse"})]}),_.jsx("p",{className:"text-xs text-gray-600 text-center",children:"JPG  PNG  WEBP  GIF  PDF  TXT  MD  Max 4 MB each"})]}),Ke&&_.jsx("p",{className:"text-xs text-red-400 mt-2",children:Ke}),R.length>0&&_.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:R.map(re=>re.previewUrl?_.jsxs("div",{className:"relative group",children:[_.jsx("img",{src:re.previewUrl,alt:re.name,className:"w-20 h-20 object-cover rounded-xl border border-gray-700"}),_.jsx("button",{onClick:()=>ye(re.id),className:"absolute -top-1.5 -right-1.5 w-5 h-5 bg-gray-900 border border-gray-600 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition hover:bg-red-500/20 hover:border-red-500/50",children:_.jsx(Ru,{className:"w-3 h-3 text-gray-300"})}),_.jsx("p",{className:"text-[10px] text-gray-500 mt-1 truncate w-20 text-center",children:$y(re.size)})]},re.id):_.jsxs("div",{className:"flex items-center gap-2 bg-gray-900 border border-gray-700 rounded-xl px-3 py-2 max-w-[220px]",children:[re.mimeType==="application/pdf"?_.jsx(qI,{className:"w-4 h-4 text-red-400 shrink-0"}):_.jsx(GI,{className:"w-4 h-4 text-blue-400 shrink-0"}),_.jsxs("div",{className:"flex-1 min-w-0",children:[_.jsx("p",{className:"text-xs text-gray-300 truncate",children:re.name}),_.jsx("p",{className:"text-[10px] text-gray-600",children:$y(re.size)})]}),_.jsx("button",{onClick:()=>ye(re.id),className:"shrink-0 p-0.5 text-gray-600 hover:text-gray-300 transition",children:_.jsx(Ru,{className:"w-3.5 h-3.5"})})]},re.id))}),R.some(re=>re.mimeType.startsWith("image/")||re.mimeType==="application/pdf")&&!o&&_.jsxs("div",{className:"mt-3 flex items-start gap-2 bg-amber-500/10 border border-amber-500/20 rounded-xl px-3 py-2.5",children:[_.jsx("span",{className:"text-base shrink-0",children:""}),_.jsx("p",{className:"text-xs text-amber-300 leading-relaxed",children:"Images and PDFs will be ignored  add a Claude API key in Settings to enable vision analysis. Text notes and .txt/.md files still work."})]})]})]}),c===4&&_.jsxs("div",{className:"space-y-6",children:[_.jsxs("div",{children:[_.jsx("h2",{className:"text-2xl font-bold text-gray-100 mb-1",children:"Ready to create!"}),_.jsx("p",{className:"text-gray-400",children:"AI will generate your trip name, description, and set up the foundation for your itinerary."})]}),_.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-6 space-y-5",children:[_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("div",{className:"p-2.5 bg-indigo-500/20 rounded-xl",children:_.jsx(Sp,{className:"w-5 h-5 text-indigo-400"})}),_.jsxs("div",{children:[_.jsx("p",{className:"font-semibold text-gray-100",children:C}),_.jsxs("p",{className:"text-sm text-gray-400",children:[new Date(W).toLocaleDateString("en",{month:"long",day:"numeric"})," "," ",new Date(Z).toLocaleDateString("en",{month:"long",day:"numeric",year:"numeric"}),B&&_.jsxs("span",{className:"ml-1.5 text-gray-500",children:["(",B," days)"]})]})]})]}),_.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[_.jsxs("div",{className:"bg-gray-800/60 rounded-xl p-3",children:[_.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Travelers"}),_.jsxs("p",{className:"font-medium text-gray-200",children:[he," ",he===1?"person":"people"]})]}),_.jsxs("div",{className:"bg-gray-800/60 rounded-xl p-3",children:[_.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Budget"}),_.jsxs("p",{className:"font-medium text-gray-200",children:[F," ",Te.toLocaleString()]})]})]}),_.jsxs("div",{children:[_.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Interests"}),_.jsx("div",{className:"flex flex-wrap gap-1.5",children:xe.map(re=>{const qe=Wy.find(dt=>dt.id===re);return qe?_.jsxs("span",{className:"text-xs bg-indigo-500/15 text-indigo-300 border border-indigo-500/25 px-2.5 py-1 rounded-full",children:[qe.emoji," ",qe.label]},re):null})})]}),(M||R.length>0)&&_.jsxs("div",{className:"border-t border-gray-800 pt-4",children:[_.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Context added"}),_.jsxs("div",{className:"space-y-1.5",children:[M&&_.jsxs("p",{className:"text-xs text-gray-400 bg-gray-800/60 rounded-lg px-3 py-2 line-clamp-2",children:[" ",M]}),R.length>0&&_.jsxs("p",{className:"text-xs text-gray-400 bg-gray-800/60 rounded-lg px-3 py-2",children:[" ",R.length," file",R.length!==1?"s":"",": ",R.map(re=>re.name).join(", ")]})]})]})]}),!t&&_.jsxs("div",{className:"flex items-center justify-between gap-3 bg-amber-500/10 border border-amber-500/20 rounded-xl px-4 py-3",children:[_.jsx("p",{className:"text-sm text-amber-300",children:"A Perplexity or Claude API key is required to create trips with AI."}),_.jsxs("button",{onClick:a,className:"shrink-0 flex items-center gap-1.5 text-xs font-medium text-amber-300 hover:text-amber-200 bg-amber-500/20 hover:bg-amber-500/30 px-3 py-1.5 rounded-lg transition",children:[_.jsx(Ca,{className:"w-3.5 h-3.5"}),"Set up"]})]}),T&&_.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-4 text-sm text-red-300",children:[_.jsx("strong",{children:"Error:"})," ",T]}),_.jsx("button",{onClick:Xe,disabled:y||!t,className:"w-full py-4 bg-indigo-600 hover:bg-indigo-500 disabled:opacity-40 disabled:cursor-not-allowed rounded-xl font-semibold flex items-center justify-center gap-2.5 transition shadow-lg shadow-indigo-900/30 text-base",children:y?_.jsxs(_.Fragment,{children:[_.jsx($n,{className:"w-5 h-5 animate-spin"}),"AI is crafting your trip"]}):_.jsxs(_.Fragment,{children:[_.jsx(xl,{className:"w-5 h-5"}),"Create Trip with AI"]})})]}),c<4&&_.jsxs("div",{className:"flex justify-between mt-10",children:[c>1?_.jsxs("button",{onClick:()=>p(re=>re-1),className:"flex items-center gap-2 px-4 py-2.5 text-gray-400 hover:text-gray-200 hover:bg-gray-800 rounded-xl transition",children:[_.jsx(Wf,{className:"w-4 h-4"}),"Back"]}):_.jsx("div",{}),_.jsxs("button",{onClick:()=>p(re=>re+1),disabled:c===1?!Pe:c===2?!se:!1,className:"flex items-center gap-2 px-6 py-2.5 bg-indigo-600 hover:bg-indigo-500 disabled:opacity-40 disabled:cursor-not-allowed rounded-xl font-medium transition",children:[c===3?"Review":"Next",_.jsx(OI,{className:"w-4 h-4"})]})]})]})]})}const oA=["accommodation","transport","food","activity","sightseeing","free"],qy={accommodation:{Icon:jI,cls:"text-purple-400 bg-purple-500/10 border-purple-500/20"},transport:{Icon:eS,cls:"text-blue-400 bg-blue-500/10 border-blue-500/20"},food:{Icon:rS,cls:"text-orange-400 bg-orange-500/10 border-orange-500/20"},activity:{Icon:XI,cls:"text-indigo-400 bg-indigo-500/10 border-indigo-500/20"},sightseeing:{Icon:zh,cls:"text-emerald-400 bg-emerald-500/10 border-emerald-500/20"},free:{Icon:WI,cls:"text-gray-400 bg-gray-500/10 border-gray-700"}};function aA(){return Math.random().toString(36).slice(2,9)}function Gy({value:r,onChange:e,onSave:t,onCancel:o}){var c;const a="w-full bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-sm text-gray-100 placeholder-gray-600 focus:outline-none focus:border-indigo-500 transition";return _.jsxs("div",{className:"bg-gray-900 border border-indigo-500/40 rounded-xl p-4 space-y-3",children:[_.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[_.jsxs("div",{children:[_.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Time"}),_.jsx("input",{type:"time",value:r.time??"09:00",onChange:p=>e({...r,time:p.target.value}),className:a+" [color-scheme:dark]"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Category"}),_.jsx("select",{value:r.category??"activity",onChange:p=>e({...r,category:p.target.value}),className:a,children:oA.map(p=>_.jsx("option",{value:p,children:p},p))})]})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Activity name"}),_.jsx("input",{type:"text",value:r.title??"",onChange:p=>e({...r,title:p.target.value}),placeholder:"e.g. Visit the Eiffel Tower",className:a,autoFocus:!0})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Description"}),_.jsx("textarea",{value:r.description??"",onChange:p=>e({...r,description:p.target.value}),placeholder:"Brief description",rows:2,className:a+" resize-none"})]}),_.jsxs("div",{children:[_.jsxs("label",{className:"block text-xs text-gray-500 mb-1",children:[_.jsx(Ip,{className:"w-3 h-3 inline"})," Estimated cost per person"]}),_.jsx("input",{type:"number",min:0,step:5,value:r.estimatedCost??0,onChange:p=>e({...r,estimatedCost:Number(p.target.value)}),className:a})]}),_.jsxs("div",{className:"flex justify-end gap-2 pt-1",children:[_.jsxs("button",{onClick:o,className:"flex items-center gap-1.5 px-3 py-1.5 text-sm text-gray-400 hover:text-gray-200 hover:bg-gray-800 rounded-lg transition",children:[_.jsx(Ru,{className:"w-3.5 h-3.5"})," Cancel"]}),_.jsxs("button",{onClick:t,disabled:!((c=r.title)!=null&&c.trim()),className:"flex items-center gap-1.5 px-4 py-1.5 text-sm bg-indigo-600 hover:bg-indigo-500 disabled:opacity-40 rounded-lg font-medium transition",children:[_.jsx(Fh,{className:"w-3.5 h-3.5"})," Save"]})]})]})}function lA({trip:r,onGenerate:e,onUpdate:t,hasAiKey:o,onSettingsClick:a}){const[c,p]=le.useState(!1),[y,x]=le.useState(""),[T,k]=le.useState(0),[C,b]=le.useState(null),[W,$]=le.useState({}),[Z,J]=le.useState(!1),[he,me]=le.useState(""),xe=async()=>{p(!0),x(""),b(null);try{await e(r)}catch(ge){x(ge instanceof Error?ge.message:"Failed to generate itinerary")}finally{p(!1)}},Le=(ge,Ve)=>{t({...r,itinerary:r.itinerary.map(ee=>ee.id===ge?Ve(ee):ee)})},Te=ge=>{if(!C)return;const Ve=!r.itinerary.flatMap(ee=>ee.activities).find(ee=>ee.id===C);Le(ge,ee=>({...ee,activities:Ve?[...ee.activities,{id:C,time:"12:00",title:"",description:"",category:"activity",estimatedCost:0,...W}]:ee.activities.map(Pe=>Pe.id===C?{...Pe,...W}:Pe)})),b(null),$({})},De=(ge,Ve)=>{Le(ge,ee=>({...ee,activities:ee.activities.filter(Pe=>Pe.id!==Ve)}))},F=ge=>{const Ve=aA();b(Ve),$({time:"12:00",title:"",description:"",category:"activity",estimatedCost:0})},D=ge=>{he.trim()&&Le(ge,Ve=>({...Ve,title:he.trim()})),J(!1)},M=r.itinerary.flatMap(ge=>ge.activities??[]),R=M.reduce((ge,Ve)=>ge+(Ve.estimatedCost||0),0)*r.travelers,O=r.budget-R,N=O<0,be=Math.min(100,r.budget>0?R/r.budget*100:0);if(r.itinerary.length===0)return _.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[_.jsx("div",{className:"w-16 h-16 bg-indigo-500/10 border border-indigo-500/20 rounded-2xl flex items-center justify-center mb-5",children:_.jsx("span",{className:"text-3xl",children:""})}),_.jsx("h3",{className:"text-xl font-semibold text-gray-200 mb-2",children:"No itinerary yet"}),_.jsx("p",{className:"text-gray-500 max-w-sm mb-6 leading-relaxed",children:o?"AI will create a personalized day-by-day schedule based on your destination, interests, and travel dates.":"Add activities manually using the button below, or set up your Perplexity API key to generate one with AI."}),y&&_.jsx("div",{className:"mb-5 text-sm text-red-300 bg-red-500/10 border border-red-500/20 rounded-xl px-4 py-3 max-w-sm",children:y}),o?_.jsxs("button",{onClick:xe,disabled:c,className:"flex items-center gap-2 px-6 py-3 bg-indigo-600 hover:bg-indigo-500 disabled:opacity-60 rounded-xl font-medium transition",children:[c?_.jsx($n,{className:"w-5 h-5 animate-spin"}):_.jsx(xl,{className:"w-5 h-5"}),c?"Generating itinerary":"Generate Itinerary"]}):_.jsxs("button",{onClick:a,className:"flex items-center gap-2 px-5 py-2.5 bg-gray-800 hover:bg-gray-700 border border-gray-700 rounded-xl text-sm text-gray-300 transition",children:[_.jsx(Ca,{className:"w-4 h-4"}),"Set up AI in Settings"]})]});const Ke=r.itinerary[T];return _.jsxs("div",{className:"space-y-4",children:[R>0&&_.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl px-5 py-4",children:[_.jsxs("div",{className:"flex items-center justify-between mb-2 text-sm",children:[_.jsx("span",{className:"text-gray-400 font-medium",children:"Provisional budget"}),_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsxs("span",{className:"text-gray-400",children:[_.jsxs("span",{className:"text-gray-200 font-semibold",children:[r.currency," ",R.toLocaleString()]}),_.jsxs("span",{className:"text-gray-600",children:[" / ",r.currency," ",r.budget.toLocaleString()]})]}),_.jsxs("span",{className:`text-xs font-medium px-2 py-0.5 rounded-full ${N?"bg-red-500/15 text-red-300 border border-red-500/25":"bg-emerald-500/15 text-emerald-300 border border-emerald-500/25"}`,children:[N?" ":" ",r.currency," ",Math.abs(O).toLocaleString()," ",N?"over":"left"]})]})]}),_.jsx("div",{className:"h-2 bg-gray-800 rounded-full overflow-hidden",children:_.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${N?"bg-red-500":be>80?"bg-amber-500":"bg-emerald-500"}`,style:{width:`${be}%`}})}),_.jsxs("p",{className:"text-xs text-gray-600 mt-1.5",children:["Based on ",M.filter(ge=>ge.estimatedCost>0).length," activities with cost estimates  ",r.travelers," traveler(s)"]})]}),_.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:gap-5",children:[_.jsxs("div",{className:"md:w-24 md:shrink-0",children:[_.jsxs("div",{className:"flex md:flex-col gap-1 overflow-x-auto md:overflow-visible scrollbar-hide pb-1 md:pb-0 md:space-y-1",children:[r.itinerary.map((ge,Ve)=>{const ee=new Date(ge.date+"T12:00:00"),Pe=Ve===T;return _.jsxs("button",{onClick:()=>{k(Ve),b(null)},className:`shrink-0 md:w-full text-center px-3 md:px-2 py-2 md:py-2.5 rounded-xl transition ${Pe?"bg-indigo-600 text-white":"text-gray-400 hover:bg-gray-800 hover:text-gray-200"}`,children:[_.jsx("p",{className:"text-xs font-medium opacity-80",children:ee.toLocaleDateString("en",{weekday:"short"})}),_.jsx("p",{className:"text-base md:text-xl font-bold leading-tight",children:ee.getDate()}),_.jsx("p",{className:"text-xs opacity-60 hidden md:block",children:ee.toLocaleDateString("en",{month:"short"})})]},ge.id)}),o?_.jsxs("button",{onClick:xe,disabled:c,className:"md:hidden shrink-0 flex flex-col items-center justify-center gap-0.5 px-3 py-2 text-gray-600 hover:text-gray-400 hover:bg-gray-800 rounded-xl transition",children:[c?_.jsx($n,{className:"w-3.5 h-3.5 animate-spin"}):_.jsx(xl,{className:"w-3.5 h-3.5"}),_.jsx("span",{className:"text-xs",children:"Regen"})]}):_.jsxs("button",{onClick:a,className:"md:hidden shrink-0 flex flex-col items-center justify-center gap-0.5 px-3 py-2 text-gray-700 hover:text-gray-500 hover:bg-gray-800 rounded-xl transition",title:"Set up AI key",children:[_.jsx(Ps,{className:"w-3.5 h-3.5"}),_.jsx("span",{className:"text-xs",children:"AI"})]})]}),o?_.jsxs("button",{onClick:xe,disabled:c,title:"Regenerate itinerary",className:"hidden md:flex w-full mt-1 p-2 text-xs text-gray-600 hover:text-gray-400 hover:bg-gray-800 rounded-xl transition items-center justify-center gap-1",children:[c?_.jsx($n,{className:"w-3.5 h-3.5 animate-spin"}):_.jsx(xl,{className:"w-3.5 h-3.5"}),"Regen"]}):_.jsxs("button",{onClick:a,title:"Set up Perplexity key to regenerate",className:"hidden md:flex w-full mt-1 p-2 text-xs text-gray-700 hover:text-gray-500 hover:bg-gray-800 rounded-xl transition items-center justify-center gap-1",children:[_.jsx(Ps,{className:"w-3.5 h-3.5"}),"Regen"]})]}),_.jsxs("div",{className:"flex-1 min-w-0",children:[_.jsxs("div",{className:"flex items-start justify-between mb-4",children:[_.jsxs("div",{className:"flex-1 min-w-0",children:[Z?_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("input",{value:he,onChange:ge=>me(ge.target.value),onKeyDown:ge=>{ge.key==="Enter"&&D(Ke.id),ge.key==="Escape"&&J(!1)},className:"flex-1 bg-gray-800 border border-indigo-500 rounded-lg px-3 py-1.5 text-gray-100 text-base font-semibold focus:outline-none",autoFocus:!0}),_.jsx("button",{onClick:()=>D(Ke.id),className:"p-1.5 text-emerald-400 hover:bg-gray-800 rounded-lg transition",children:_.jsx(Fh,{className:"w-4 h-4"})}),_.jsx("button",{onClick:()=>J(!1),className:"p-1.5 text-gray-500 hover:bg-gray-800 rounded-lg transition",children:_.jsx(Ru,{className:"w-4 h-4"})})]}):_.jsxs("button",{onClick:()=>{J(!0),me(Ke.title)},className:"group flex items-center gap-2 text-left",children:[_.jsx("h3",{className:"text-lg font-semibold text-gray-100 group-hover:text-white",children:Ke.title}),_.jsx(F_,{className:"w-3.5 h-3.5 text-gray-600 group-hover:text-gray-400 opacity-0 group-hover:opacity-100 transition"})]}),_.jsx("p",{className:"text-sm text-gray-400 mt-0.5",children:new Date(Ke.date+"T12:00:00").toLocaleDateString("en",{weekday:"long",month:"long",day:"numeric"})})]}),(()=>{const ge=(Ke.activities??[]).reduce((Ve,ee)=>Ve+(ee.estimatedCost||0),0)*r.travelers;return ge>0?_.jsxs("span",{className:"text-xs text-gray-400 bg-gray-800 px-3 py-1.5 rounded-lg shrink-0 ml-3 font-medium",children:[r.currency," ",ge.toLocaleString()," est."]}):null})()]}),_.jsxs("div",{className:"space-y-2.5",children:[(Ke.activities??[]).map(ge=>{const{Icon:Ve,cls:ee}=qy[ge.category]??qy.free;return C===ge.id?_.jsx(Gy,{value:W,onChange:$,onSave:()=>Te(Ke.id),onCancel:()=>{b(null),$({})}},ge.id):_.jsxs("div",{className:"group flex gap-3 bg-gray-900 border border-gray-800 hover:border-gray-700 rounded-xl p-4 transition",children:[_.jsx("div",{className:`p-2 rounded-lg border shrink-0 ${ee}`,children:_.jsx(Ve,{className:"w-4 h-4"})}),_.jsxs("div",{className:"flex-1 min-w-0",children:[_.jsxs("div",{className:"flex items-center gap-2 justify-between",children:[_.jsx("h4",{className:"font-medium text-gray-200 truncate",children:ge.title}),_.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[_.jsxs("span",{className:"text-xs text-gray-500 flex items-center gap-0.5 mr-1",children:[_.jsx(HI,{className:"w-3 h-3"}),ge.time]}),_.jsx("button",{onClick:()=>{b(ge.id),$({...ge})},className:"opacity-0 group-hover:opacity-100 p-1.5 text-gray-500 hover:text-indigo-400 hover:bg-gray-800 rounded-lg transition",title:"Edit activity",children:_.jsx(F_,{className:"w-3.5 h-3.5"})}),_.jsx("button",{onClick:()=>De(Ke.id,ge.id),className:"opacity-0 group-hover:opacity-100 p-1.5 text-gray-500 hover:text-red-400 hover:bg-gray-800 rounded-lg transition",title:"Delete activity",children:_.jsx(Uh,{className:"w-3.5 h-3.5"})})]})]}),_.jsx("p",{className:"text-sm text-gray-400 mt-0.5 leading-relaxed",children:ge.description}),ge.estimatedCost>0&&_.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["~",r.currency,ge.estimatedCost," /person  ",r.currency,(ge.estimatedCost*r.travelers).toLocaleString()," total"]})]})]},ge.id)}),C&&!(Ke.activities??[]).find(ge=>ge.id===C)&&_.jsx(Gy,{value:W,onChange:$,onSave:()=>Te(Ke.id),onCancel:()=>{b(null),$({})}}),!C&&_.jsxs("button",{onClick:()=>F(Ke.id),className:"w-full flex items-center justify-center gap-2 py-3 border border-dashed border-gray-700 hover:border-indigo-500/50 hover:bg-indigo-500/5 rounded-xl text-sm text-gray-500 hover:text-indigo-400 transition",children:[_.jsx($f,{className:"w-4 h-4"}),"Add activity"]})]}),y&&_.jsx("div",{className:"mt-4 text-sm text-red-300 bg-red-500/10 border border-red-500/20 rounded-xl px-4 py-3",children:y})]})]})]})}const uA={Documents:"",Clothing:"",Toiletries:"",Electronics:"","Health & Safety":"",Activities:"",Miscellaneous:""};function cA({trip:r,onGenerate:e,onUpdate:t,hasAiKey:o,onSettingsClick:a}){const[c,p]=le.useState(!1),[y,x]=le.useState(""),T=async()=>{p(!0),x("");try{await e(r)}catch(he){x(he instanceof Error?he.message:"Failed to generate packing list")}finally{p(!1)}},k=he=>{t({...r,packingList:r.packingList.map(me=>me.id===he?{...me,packed:!me.packed}:me)})},C=()=>{t({...r,packingList:r.packingList.map(he=>({...he,packed:!0}))})},b=()=>{t({...r,packingList:r.packingList.map(he=>({...he,packed:!1}))})};if(r.packingList.length===0)return _.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[_.jsx("div",{className:"w-16 h-16 bg-indigo-500/10 border border-indigo-500/20 rounded-2xl flex items-center justify-center mb-5",children:_.jsx("span",{className:"text-3xl",children:""})}),_.jsx("h3",{className:"text-xl font-semibold text-gray-200 mb-2",children:"No packing list yet"}),_.jsx("p",{className:"text-gray-500 max-w-sm mb-6 leading-relaxed",children:o?"AI will create a smart, categorized packing list tailored to your destination, activities, and trip duration.":"Set up your Perplexity API key to generate a smart packing list with AI."}),y&&_.jsx("div",{className:"mb-5 text-sm text-red-300 bg-red-500/10 border border-red-500/20 rounded-xl px-4 py-3 max-w-sm",children:y}),o?_.jsxs("button",{onClick:T,disabled:c,className:"flex items-center gap-2 px-6 py-3 bg-indigo-600 hover:bg-indigo-500 disabled:opacity-60 rounded-xl font-medium transition",children:[c?_.jsx($n,{className:"w-5 h-5 animate-spin"}):_.jsx(xl,{className:"w-5 h-5"}),c?"Generating packing list":"Generate Packing List"]}):_.jsxs("button",{onClick:a,className:"flex items-center gap-2 px-5 py-2.5 bg-gray-800 hover:bg-gray-700 border border-gray-700 rounded-xl text-sm text-gray-300 transition",children:[_.jsx(Ca,{className:"w-4 h-4"}),"Set up AI in Settings"]})]});const W=r.packingList.filter(he=>he.packed).length,$=r.packingList.length,Z=$>0?Math.round(W/$*100):0,J=[...new Set(r.packingList.map(he=>he.category))];return _.jsxs("div",{className:"space-y-5",children:[_.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-5",children:[_.jsxs("div",{className:"flex items-center justify-between mb-3",children:[_.jsxs("div",{children:[_.jsx("h3",{className:"font-semibold text-gray-200",children:"Packing Progress"}),_.jsxs("p",{className:"text-sm text-gray-500 mt-0.5",children:[W," of ",$," items packed"]})]}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("button",{onClick:b,className:"text-xs text-gray-500 hover:text-gray-300 px-3 py-1.5 rounded-lg hover:bg-gray-800 transition",children:"Unpack all"}),_.jsx("button",{onClick:C,className:"text-xs text-indigo-400 hover:text-indigo-300 px-3 py-1.5 rounded-lg hover:bg-gray-800 transition",children:"Pack all"})]})]}),_.jsx("div",{className:"h-2 bg-gray-800 rounded-full overflow-hidden",children:_.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${Z===100?"bg-emerald-500":"bg-indigo-500"}`,style:{width:`${Z}%`}})}),_.jsxs("div",{className:"flex items-center justify-between mt-2",children:[_.jsxs("span",{className:"text-xs text-gray-500",children:[Z,"% packed"]}),Z===100&&_.jsx("span",{className:"text-xs text-emerald-400 font-medium",children:"All packed! "}),o?_.jsxs("button",{onClick:T,disabled:c,className:"text-xs text-gray-500 hover:text-indigo-400 flex items-center gap-1 transition",children:[c?_.jsx($n,{className:"w-3 h-3 animate-spin"}):_.jsx(xl,{className:"w-3 h-3"}),"Regenerate"]}):_.jsxs("button",{onClick:a,className:"text-xs text-gray-700 hover:text-gray-500 flex items-center gap-1 transition",title:"Set up Perplexity key to regenerate",children:[_.jsx(Ps,{className:"w-3 h-3"}),"Regenerate"]})]})]}),y&&_.jsx("div",{className:"text-sm text-red-300 bg-red-500/10 border border-red-500/20 rounded-xl px-4 py-3",children:y}),(()=>{const he=r.packingList.filter(me=>me.essential&&!me.packed);return he.length>0?_.jsxs("div",{className:"flex items-start gap-3 bg-amber-500/10 border border-amber-500/20 rounded-xl p-4",children:[_.jsx(zI,{className:"w-4 h-4 text-amber-400 shrink-0 mt-0.5"}),_.jsxs("div",{children:[_.jsxs("p",{className:"text-sm font-medium text-amber-300",children:[he.length," essential item",he.length!==1?"s":""," not packed"]}),_.jsxs("p",{className:"text-xs text-amber-400/70 mt-0.5",children:[he.slice(0,3).map(me=>me.name).join(", "),he.length>3?` and ${he.length-3} more`:""]})]})]}):null})(),J.map(he=>{const me=r.packingList.filter(Te=>Te.category===he),xe=me.filter(Te=>Te.packed).length,Le=uA[he]??"";return _.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl overflow-hidden",children:[_.jsxs("div",{className:"px-5 py-3 border-b border-gray-800 flex items-center justify-between",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("span",{className:"text-base",children:Le}),_.jsx("h4",{className:"font-medium text-gray-300 text-sm",children:he})]}),_.jsxs("span",{className:"text-xs text-gray-500",children:[xe,"/",me.length]})]}),_.jsx("div",{className:"divide-y divide-gray-800/50",children:me.map(Te=>_.jsxs("button",{onClick:()=>k(Te.id),className:"w-full flex items-center gap-3 px-5 py-3 hover:bg-gray-800/50 transition text-left",children:[_.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center shrink-0 transition-colors ${Te.packed?"bg-indigo-600 border-indigo-600":"border-gray-600 hover:border-gray-400"}`,children:Te.packed&&_.jsx(Fh,{className:"w-3 h-3 text-white",strokeWidth:3})}),_.jsx("span",{className:`flex-1 text-sm transition-colors ${Te.packed?"text-gray-600 line-through":"text-gray-200"}`,children:Te.name}),_.jsxs("div",{className:"flex items-center gap-1.5 shrink-0",children:[Te.quantity>1&&_.jsxs("span",{className:"text-xs text-gray-500",children:["",Te.quantity]}),Te.essential&&!Te.packed&&_.jsx("span",{className:"text-xs text-amber-400 bg-amber-500/10 border border-amber-500/20 px-1.5 py-0.5 rounded",children:"essential"})]})]},Te.id))})]},he)})]})}const hA=["What are the must-try local foods?","Best way to get around the city?","What should I know about local customs?","Hidden gems most tourists miss?","Best time of day to visit popular sites?","Safety tips for this destination?"];function Lf(){return Math.random().toString(36).slice(2,9)}function dA({trip:r,perplexityKey:e,hasAiKey:t,onSettingsClick:o,getChatHistory:a,saveChatHistory:c}){const[p,y]=le.useState([]),[x,T]=le.useState(""),[k,C]=le.useState(!1),b=le.useRef(null),W=le.useRef(null);le.useEffect(()=>{let J=!1;return a(r.id).then(he=>{J||y(he)}),()=>{J=!0}},[r.id]),le.useEffect(()=>{var J;(J=b.current)==null||J.scrollIntoView({behavior:"smooth"})},[p]);const $=async J=>{var xe;if(!J.trim()||k)return;const he={id:Lf(),role:"user",content:J.trim(),timestamp:new Date().toISOString()},me=[...p,he];y(me),T(""),C(!0),(xe=W.current)==null||xe.focus();try{const Le=p.map(D=>({role:D.role,content:D.content})),Te=await QC(J.trim(),Le,r,e),De={id:Lf(),role:"assistant",content:Te,timestamp:new Date().toISOString()},F=[...me,De];y(F),await c(r.id,F)}catch(Le){const Te=Le instanceof Error?Le.message:"Something went wrong",De={id:Lf(),role:"assistant",content:`Sorry, I ran into an error: ${Te}`,timestamp:new Date().toISOString()},F=[...me,De];y(F),await c(r.id,F)}finally{C(!1)}},Z=async()=>{confirm("Clear chat history?")&&(y([]),await c(r.id,[]))};return t?_.jsxs("div",{className:"flex flex-col",style:{height:"calc(100dvh - 300px)",minHeight:"280px"},children:[_.jsxs("div",{className:"flex items-center justify-between pb-3 mb-3 border-b border-gray-800",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("div",{className:"w-7 h-7 bg-indigo-500/20 rounded-lg flex items-center justify-center",children:_.jsx(Jc,{className:"w-4 h-4 text-indigo-400"})}),_.jsx("span",{className:"text-sm font-medium text-gray-300",children:"AI Travel Assistant"}),_.jsx("span",{className:"text-xs text-emerald-400 bg-emerald-500/10 px-2 py-0.5 rounded-full",children:"Online"})]}),p.length>0&&_.jsx("button",{onClick:Z,className:"p-1.5 text-gray-600 hover:text-gray-400 hover:bg-gray-800 rounded-lg transition",title:"Clear chat",children:_.jsx(Uh,{className:"w-4 h-4"})})]}),_.jsxs("div",{className:"flex-1 overflow-y-auto space-y-4",children:[p.length===0&&_.jsxs("div",{className:"flex flex-col items-center text-center pt-6 pb-4",children:[_.jsx("div",{className:"w-14 h-14 bg-indigo-500/10 border border-indigo-500/20 rounded-2xl flex items-center justify-center mb-3",children:_.jsx(Jc,{className:"w-7 h-7 text-indigo-400"})}),_.jsxs("p",{className:"font-medium text-gray-300 mb-1",children:["Ask me anything about ",r.destination]}),_.jsx("p",{className:"text-sm text-gray-500 mb-5 max-w-sm",children:"I know your trip details, interests, and budget. Let me help you plan the perfect experience."}),_.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:hA.map(J=>_.jsx("button",{onClick:()=>$(J),className:"text-sm text-indigo-300 bg-indigo-500/10 hover:bg-indigo-500/20 border border-indigo-500/20 hover:border-indigo-500/40 px-3 py-1.5 rounded-full transition",children:J},J))})]}),p.map(J=>_.jsxs("div",{className:`flex gap-2.5 ${J.role==="user"?"flex-row-reverse":"flex-row"}`,children:[_.jsx("div",{className:`w-7 h-7 rounded-lg flex items-center justify-center shrink-0 mt-0.5 ${J.role==="assistant"?"bg-indigo-500/20":"bg-gray-700"}`,children:J.role==="assistant"?_.jsx(Jc,{className:"w-3.5 h-3.5 text-indigo-400"}):_.jsx(nS,{className:"w-3.5 h-3.5 text-gray-300"})}),_.jsx("div",{className:`max-w-[78%] rounded-2xl px-4 py-3 text-sm leading-relaxed whitespace-pre-wrap ${J.role==="user"?"bg-indigo-600 text-white rounded-tr-sm":"bg-gray-900 border border-gray-800 text-gray-200 rounded-tl-sm"}`,children:J.content})]},J.id)),k&&_.jsxs("div",{className:"flex gap-2.5",children:[_.jsx("div",{className:"w-7 h-7 rounded-lg bg-indigo-500/20 flex items-center justify-center shrink-0",children:_.jsx(Jc,{className:"w-3.5 h-3.5 text-indigo-400"})}),_.jsx("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl rounded-tl-sm px-4 py-3",children:_.jsxs("div",{className:"flex gap-1 items-center h-4",children:[_.jsx("span",{className:"w-1.5 h-1.5 bg-gray-500 rounded-full animate-bounce [animation-delay:0ms]"}),_.jsx("span",{className:"w-1.5 h-1.5 bg-gray-500 rounded-full animate-bounce [animation-delay:150ms]"}),_.jsx("span",{className:"w-1.5 h-1.5 bg-gray-500 rounded-full animate-bounce [animation-delay:300ms]"})]})})]}),_.jsx("div",{ref:b})]}),_.jsx("div",{className:"pt-4 border-t border-gray-800",children:_.jsxs("form",{onSubmit:J=>{J.preventDefault(),$(x)},className:"flex gap-2",children:[_.jsx("input",{ref:W,value:x,onChange:J=>T(J.target.value),placeholder:`Ask about ${r.destination}...`,disabled:k,className:"flex-1 bg-gray-900 border border-gray-700 rounded-xl px-4 py-3 text-gray-100 placeholder-gray-600 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition disabled:opacity-50 text-sm"}),_.jsx("button",{type:"submit",disabled:!x.trim()||k,className:"p-3 bg-indigo-600 hover:bg-indigo-500 disabled:opacity-40 disabled:cursor-not-allowed rounded-xl transition shrink-0",children:k?_.jsx($n,{className:"w-5 h-5 animate-spin"}):_.jsx(JI,{className:"w-5 h-5"})})]})})]}):_.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[_.jsx("div",{className:"w-16 h-16 bg-gray-800 border border-gray-700 rounded-2xl flex items-center justify-center mb-5",children:_.jsx(Ps,{className:"w-7 h-7 text-gray-500"})}),_.jsx("h3",{className:"text-lg font-semibold text-gray-400 mb-2",children:"AI Chat unavailable"}),_.jsxs("p",{className:"text-gray-600 max-w-sm mb-6 leading-relaxed text-sm",children:["Add your Perplexity API key to chat with an AI assistant about your trip to ",r.destination,"."]}),_.jsxs("button",{onClick:o,className:"flex items-center gap-2 px-5 py-2.5 bg-gray-800 hover:bg-gray-700 border border-gray-700 rounded-xl text-sm text-gray-300 transition",children:[_.jsx(Ca,{className:"w-4 h-4"}),"Set up in Settings"]})]})}function Ow(r,e){const t=le.useRef(e);le.useEffect(function(){e!==t.current&&r.attributionControl!=null&&(t.current!=null&&r.attributionControl.removeAttribution(t.current),e!=null&&r.attributionControl.addAttribution(e)),t.current=e},[r,e])}var fA=Yy();const pA=1;function mA(r){return Object.freeze({__version:pA,map:r})}function gA(r,e){return Object.freeze({...r,...e})}const jw=le.createContext(null),Vw=jw.Provider;function mm(){const r=le.useContext(jw);if(r==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return r}function _A(r){function e(t,o){const{instance:a,context:c}=r(t).current;return le.useImperativeHandle(o,()=>a),t.children==null?null:Df.createElement(Vw,{value:c},t.children)}return le.forwardRef(e)}function yA(r){function e(t,o){const[a,c]=le.useState(!1),{instance:p}=r(t,c).current;le.useImperativeHandle(o,()=>p),le.useEffect(function(){a&&p.update()},[p,a,t.children]);const y=p._contentNode;return y?fA.createPortal(t.children,y):null}return le.forwardRef(e)}function vA(r){function e(t,o){const{instance:a}=r(t).current;return le.useImperativeHandle(o,()=>a),null}return le.forwardRef(e)}function Fw(r,e){const t=le.useRef();le.useEffect(function(){return e!=null&&r.instance.on(e),t.current=e,function(){t.current!=null&&r.instance.off(t.current),t.current=null}},[r,e])}function gm(r,e){const t=r.pane??e.pane;return t?{...r,pane:t}:r}function wA(r,e){return function(o,a){const c=mm(),p=r(gm(o,c),c);return Ow(c.map,o.attribution),Fw(p.current,o.eventHandlers),e(p.current,c,o,a),p}}var Eu={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var xA=Eu.exports,Ky;function EA(){return Ky||(Ky=1,(function(r,e){(function(t,o){o(e)})(xA,(function(t){var o="1.9.4";function a(i){var l,d,m,E;for(d=1,m=arguments.length;d<m;d++){E=arguments[d];for(l in E)i[l]=E[l]}return i}var c=Object.create||(function(){function i(){}return function(l){return i.prototype=l,new i}})();function p(i,l){var d=Array.prototype.slice;if(i.bind)return i.bind.apply(i,d.call(arguments,1));var m=d.call(arguments,2);return function(){return i.apply(l,m.length?m.concat(d.call(arguments)):arguments)}}var y=0;function x(i){return"_leaflet_id"in i||(i._leaflet_id=++y),i._leaflet_id}function T(i,l,d){var m,E,P,V;return V=function(){m=!1,E&&(P.apply(d,E),E=!1)},P=function(){m?E=arguments:(i.apply(d,arguments),setTimeout(V,l),m=!0)},P}function k(i,l,d){var m=l[1],E=l[0],P=m-E;return i===m&&d?i:((i-E)%P+P)%P+E}function C(){return!1}function b(i,l){if(l===!1)return i;var d=Math.pow(10,l===void 0?6:l);return Math.round(i*d)/d}function W(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}function $(i){return W(i).split(/\s+/)}function Z(i,l){Object.prototype.hasOwnProperty.call(i,"options")||(i.options=i.options?c(i.options):{});for(var d in l)i.options[d]=l[d];return i.options}function J(i,l,d){var m=[];for(var E in i)m.push(encodeURIComponent(d?E.toUpperCase():E)+"="+encodeURIComponent(i[E]));return(!l||l.indexOf("?")===-1?"?":"&")+m.join("&")}var he=/\{ *([\w_ -]+) *\}/g;function me(i,l){return i.replace(he,function(d,m){var E=l[m];if(E===void 0)throw new Error("No value provided for variable "+d);return typeof E=="function"&&(E=E(l)),E})}var xe=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"};function Le(i,l){for(var d=0;d<i.length;d++)if(i[d]===l)return d;return-1}var Te="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function De(i){return window["webkit"+i]||window["moz"+i]||window["ms"+i]}var F=0;function D(i){var l=+new Date,d=Math.max(0,16-(l-F));return F=l+d,window.setTimeout(i,d)}var M=window.requestAnimationFrame||De("RequestAnimationFrame")||D,U=window.cancelAnimationFrame||De("CancelAnimationFrame")||De("CancelRequestAnimationFrame")||function(i){window.clearTimeout(i)};function R(i,l,d){if(d&&M===D)i.call(l);else return M.call(window,p(i,l))}function O(i){i&&U.call(window,i)}var N={__proto__:null,extend:a,create:c,bind:p,get lastId(){return y},stamp:x,throttle:T,wrapNum:k,falseFn:C,formatNum:b,trim:W,splitWords:$,setOptions:Z,getParamString:J,template:me,isArray:xe,indexOf:Le,emptyImageUrl:Te,requestFn:M,cancelFn:U,requestAnimFrame:R,cancelAnimFrame:O};function be(){}be.extend=function(i){var l=function(){Z(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},d=l.__super__=this.prototype,m=c(d);m.constructor=l,l.prototype=m;for(var E in this)Object.prototype.hasOwnProperty.call(this,E)&&E!=="prototype"&&E!=="__super__"&&(l[E]=this[E]);return i.statics&&a(l,i.statics),i.includes&&(Ke(i.includes),a.apply(null,[m].concat(i.includes))),a(m,i),delete m.statics,delete m.includes,m.options&&(m.options=d.options?c(d.options):{},a(m.options,i.options)),m._initHooks=[],m.callInitHooks=function(){if(!this._initHooksCalled){d.callInitHooks&&d.callInitHooks.call(this),this._initHooksCalled=!0;for(var P=0,V=m._initHooks.length;P<V;P++)m._initHooks[P].call(this)}},l},be.include=function(i){var l=this.prototype.options;return a(this.prototype,i),i.options&&(this.prototype.options=l,this.mergeOptions(i.options)),this},be.mergeOptions=function(i){return a(this.prototype.options,i),this},be.addInitHook=function(i){var l=Array.prototype.slice.call(arguments,1),d=typeof i=="function"?i:function(){this[i].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(d),this};function Ke(i){if(!(typeof L>"u"||!L||!L.Mixin)){i=xe(i)?i:[i];for(var l=0;l<i.length;l++)i[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ge={on:function(i,l,d){if(typeof i=="object")for(var m in i)this._on(m,i[m],l);else{i=$(i);for(var E=0,P=i.length;E<P;E++)this._on(i[E],l,d)}return this},off:function(i,l,d){if(!arguments.length)delete this._events;else if(typeof i=="object")for(var m in i)this._off(m,i[m],l);else{i=$(i);for(var E=arguments.length===1,P=0,V=i.length;P<V;P++)E?this._off(i[P]):this._off(i[P],l,d)}return this},_on:function(i,l,d,m){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(i,l,d)===!1){d===this&&(d=void 0);var E={fn:l,ctx:d};m&&(E.once=!0),this._events=this._events||{},this._events[i]=this._events[i]||[],this._events[i].push(E)}},_off:function(i,l,d){var m,E,P;if(this._events&&(m=this._events[i],!!m)){if(arguments.length===1){if(this._firingCount)for(E=0,P=m.length;E<P;E++)m[E].fn=C;delete this._events[i];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var V=this._listens(i,l,d);if(V!==!1){var G=m[V];this._firingCount&&(G.fn=C,this._events[i]=m=m.slice()),m.splice(V,1)}}},fire:function(i,l,d){if(!this.listens(i,d))return this;var m=a({},l,{type:i,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var E=this._events[i];if(E){this._firingCount=this._firingCount+1||1;for(var P=0,V=E.length;P<V;P++){var G=E[P],X=G.fn;G.once&&this.off(i,X,G.ctx),X.call(G.ctx||this,m)}this._firingCount--}}return d&&this._propagateEvent(m),this},listens:function(i,l,d,m){typeof i!="string"&&console.warn('"string" type argument expected');var E=l;typeof l!="function"&&(m=!!l,E=void 0,d=void 0);var P=this._events&&this._events[i];if(P&&P.length&&this._listens(i,E,d)!==!1)return!0;if(m){for(var V in this._eventParents)if(this._eventParents[V].listens(i,l,d,m))return!0}return!1},_listens:function(i,l,d){if(!this._events)return!1;var m=this._events[i]||[];if(!l)return!!m.length;d===this&&(d=void 0);for(var E=0,P=m.length;E<P;E++)if(m[E].fn===l&&m[E].ctx===d)return E;return!1},once:function(i,l,d){if(typeof i=="object")for(var m in i)this._on(m,i[m],l,!0);else{i=$(i);for(var E=0,P=i.length;E<P;E++)this._on(i[E],l,d,!0)}return this},addEventParent:function(i){return this._eventParents=this._eventParents||{},this._eventParents[x(i)]=i,this},removeEventParent:function(i){return this._eventParents&&delete this._eventParents[x(i)],this},_propagateEvent:function(i){for(var l in this._eventParents)this._eventParents[l].fire(i.type,a({layer:i.target,propagatedFrom:i.target},i),!0)}};ge.addEventListener=ge.on,ge.removeEventListener=ge.clearAllEventListeners=ge.off,ge.addOneTimeEventListener=ge.once,ge.fireEvent=ge.fire,ge.hasEventListeners=ge.listens;var Ve=be.extend(ge);function ee(i,l,d){this.x=d?Math.round(i):i,this.y=d?Math.round(l):l}var Pe=Math.trunc||function(i){return i>0?Math.floor(i):Math.ceil(i)};ee.prototype={clone:function(){return new ee(this.x,this.y)},add:function(i){return this.clone()._add(se(i))},_add:function(i){return this.x+=i.x,this.y+=i.y,this},subtract:function(i){return this.clone()._subtract(se(i))},_subtract:function(i){return this.x-=i.x,this.y-=i.y,this},divideBy:function(i){return this.clone()._divideBy(i)},_divideBy:function(i){return this.x/=i,this.y/=i,this},multiplyBy:function(i){return this.clone()._multiplyBy(i)},_multiplyBy:function(i){return this.x*=i,this.y*=i,this},scaleBy:function(i){return new ee(this.x*i.x,this.y*i.y)},unscaleBy:function(i){return new ee(this.x/i.x,this.y/i.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Pe(this.x),this.y=Pe(this.y),this},distanceTo:function(i){i=se(i);var l=i.x-this.x,d=i.y-this.y;return Math.sqrt(l*l+d*d)},equals:function(i){return i=se(i),i.x===this.x&&i.y===this.y},contains:function(i){return i=se(i),Math.abs(i.x)<=Math.abs(this.x)&&Math.abs(i.y)<=Math.abs(this.y)},toString:function(){return"Point("+b(this.x)+", "+b(this.y)+")"}};function se(i,l,d){return i instanceof ee?i:xe(i)?new ee(i[0],i[1]):i==null?i:typeof i=="object"&&"x"in i&&"y"in i?new ee(i.x,i.y):new ee(i,l,d)}function B(i,l){if(i)for(var d=l?[i,l]:i,m=0,E=d.length;m<E;m++)this.extend(d[m])}B.prototype={extend:function(i){var l,d;if(!i)return this;if(i instanceof ee||typeof i[0]=="number"||"x"in i)l=d=se(i);else if(i=ne(i),l=i.min,d=i.max,!l||!d)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=d.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(d.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(d.y,this.max.y)),this},getCenter:function(i){return se((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,i)},getBottomLeft:function(){return se(this.min.x,this.max.y)},getTopRight:function(){return se(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(i){var l,d;return typeof i[0]=="number"||i instanceof ee?i=se(i):i=ne(i),i instanceof B?(l=i.min,d=i.max):l=d=i,l.x>=this.min.x&&d.x<=this.max.x&&l.y>=this.min.y&&d.y<=this.max.y},intersects:function(i){i=ne(i);var l=this.min,d=this.max,m=i.min,E=i.max,P=E.x>=l.x&&m.x<=d.x,V=E.y>=l.y&&m.y<=d.y;return P&&V},overlaps:function(i){i=ne(i);var l=this.min,d=this.max,m=i.min,E=i.max,P=E.x>l.x&&m.x<d.x,V=E.y>l.y&&m.y<d.y;return P&&V},isValid:function(){return!!(this.min&&this.max)},pad:function(i){var l=this.min,d=this.max,m=Math.abs(l.x-d.x)*i,E=Math.abs(l.y-d.y)*i;return ne(se(l.x-m,l.y-E),se(d.x+m,d.y+E))},equals:function(i){return i?(i=ne(i),this.min.equals(i.getTopLeft())&&this.max.equals(i.getBottomRight())):!1}};function ne(i,l){return!i||i instanceof B?i:new B(i,l)}function Oe(i,l){if(i)for(var d=l?[i,l]:i,m=0,E=d.length;m<E;m++)this.extend(d[m])}Oe.prototype={extend:function(i){var l=this._southWest,d=this._northEast,m,E;if(i instanceof Ie)m=i,E=i;else if(i instanceof Oe){if(m=i._southWest,E=i._northEast,!m||!E)return this}else return i?this.extend(ye(i)||Ae(i)):this;return!l&&!d?(this._southWest=new Ie(m.lat,m.lng),this._northEast=new Ie(E.lat,E.lng)):(l.lat=Math.min(m.lat,l.lat),l.lng=Math.min(m.lng,l.lng),d.lat=Math.max(E.lat,d.lat),d.lng=Math.max(E.lng,d.lng)),this},pad:function(i){var l=this._southWest,d=this._northEast,m=Math.abs(l.lat-d.lat)*i,E=Math.abs(l.lng-d.lng)*i;return new Oe(new Ie(l.lat-m,l.lng-E),new Ie(d.lat+m,d.lng+E))},getCenter:function(){return new Ie((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Ie(this.getNorth(),this.getWest())},getSouthEast:function(){return new Ie(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(i){typeof i[0]=="number"||i instanceof Ie||"lat"in i?i=ye(i):i=Ae(i);var l=this._southWest,d=this._northEast,m,E;return i instanceof Oe?(m=i.getSouthWest(),E=i.getNorthEast()):m=E=i,m.lat>=l.lat&&E.lat<=d.lat&&m.lng>=l.lng&&E.lng<=d.lng},intersects:function(i){i=Ae(i);var l=this._southWest,d=this._northEast,m=i.getSouthWest(),E=i.getNorthEast(),P=E.lat>=l.lat&&m.lat<=d.lat,V=E.lng>=l.lng&&m.lng<=d.lng;return P&&V},overlaps:function(i){i=Ae(i);var l=this._southWest,d=this._northEast,m=i.getSouthWest(),E=i.getNorthEast(),P=E.lat>l.lat&&m.lat<d.lat,V=E.lng>l.lng&&m.lng<d.lng;return P&&V},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(i,l){return i?(i=Ae(i),this._southWest.equals(i.getSouthWest(),l)&&this._northEast.equals(i.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Ae(i,l){return i instanceof Oe?i:new Oe(i,l)}function Ie(i,l,d){if(isNaN(i)||isNaN(l))throw new Error("Invalid LatLng object: ("+i+", "+l+")");this.lat=+i,this.lng=+l,d!==void 0&&(this.alt=+d)}Ie.prototype={equals:function(i,l){if(!i)return!1;i=ye(i);var d=Math.max(Math.abs(this.lat-i.lat),Math.abs(this.lng-i.lng));return d<=(l===void 0?1e-9:l)},toString:function(i){return"LatLng("+b(this.lat,i)+", "+b(this.lng,i)+")"},distanceTo:function(i){return re.distance(this,ye(i))},wrap:function(){return re.wrapLatLng(this)},toBounds:function(i){var l=180*i/40075017,d=l/Math.cos(Math.PI/180*this.lat);return Ae([this.lat-l,this.lng-d],[this.lat+l,this.lng+d])},clone:function(){return new Ie(this.lat,this.lng,this.alt)}};function ye(i,l,d){return i instanceof Ie?i:xe(i)&&typeof i[0]!="object"?i.length===3?new Ie(i[0],i[1],i[2]):i.length===2?new Ie(i[0],i[1]):null:i==null?i:typeof i=="object"&&"lat"in i?new Ie(i.lat,"lng"in i?i.lng:i.lon,i.alt):l===void 0?null:new Ie(i,l,d)}var Xe={latLngToPoint:function(i,l){var d=this.projection.project(i),m=this.scale(l);return this.transformation._transform(d,m)},pointToLatLng:function(i,l){var d=this.scale(l),m=this.transformation.untransform(i,d);return this.projection.unproject(m)},project:function(i){return this.projection.project(i)},unproject:function(i){return this.projection.unproject(i)},scale:function(i){return 256*Math.pow(2,i)},zoom:function(i){return Math.log(i/256)/Math.LN2},getProjectedBounds:function(i){if(this.infinite)return null;var l=this.projection.bounds,d=this.scale(i),m=this.transformation.transform(l.min,d),E=this.transformation.transform(l.max,d);return new B(m,E)},infinite:!1,wrapLatLng:function(i){var l=this.wrapLng?k(i.lng,this.wrapLng,!0):i.lng,d=this.wrapLat?k(i.lat,this.wrapLat,!0):i.lat,m=i.alt;return new Ie(d,l,m)},wrapLatLngBounds:function(i){var l=i.getCenter(),d=this.wrapLatLng(l),m=l.lat-d.lat,E=l.lng-d.lng;if(m===0&&E===0)return i;var P=i.getSouthWest(),V=i.getNorthEast(),G=new Ie(P.lat-m,P.lng-E),X=new Ie(V.lat-m,V.lng-E);return new Oe(G,X)}},re=a({},Xe,{wrapLng:[-180,180],R:6371e3,distance:function(i,l){var d=Math.PI/180,m=i.lat*d,E=l.lat*d,P=Math.sin((l.lat-i.lat)*d/2),V=Math.sin((l.lng-i.lng)*d/2),G=P*P+Math.cos(m)*Math.cos(E)*V*V,X=2*Math.atan2(Math.sqrt(G),Math.sqrt(1-G));return this.R*X}}),qe=6378137,dt={R:qe,MAX_LATITUDE:85.0511287798,project:function(i){var l=Math.PI/180,d=this.MAX_LATITUDE,m=Math.max(Math.min(d,i.lat),-d),E=Math.sin(m*l);return new ee(this.R*i.lng*l,this.R*Math.log((1+E)/(1-E))/2)},unproject:function(i){var l=180/Math.PI;return new Ie((2*Math.atan(Math.exp(i.y/this.R))-Math.PI/2)*l,i.x*l/this.R)},bounds:(function(){var i=qe*Math.PI;return new B([-i,-i],[i,i])})()};function gn(i,l,d,m){if(xe(i)){this._a=i[0],this._b=i[1],this._c=i[2],this._d=i[3];return}this._a=i,this._b=l,this._c=d,this._d=m}gn.prototype={transform:function(i,l){return this._transform(i.clone(),l)},_transform:function(i,l){return l=l||1,i.x=l*(this._a*i.x+this._b),i.y=l*(this._c*i.y+this._d),i},untransform:function(i,l){return l=l||1,new ee((i.x/l-this._b)/this._a,(i.y/l-this._d)/this._c)}};function jt(i,l,d,m){return new gn(i,l,d,m)}var Rn=a({},re,{code:"EPSG:3857",projection:dt,transformation:(function(){var i=.5/(Math.PI*dt.R);return jt(i,.5,-i,.5)})()}),di=a({},Rn,{code:"EPSG:900913"});function fi(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function Kr(i,l){var d="",m,E,P,V,G,X;for(m=0,P=i.length;m<P;m++){for(G=i[m],E=0,V=G.length;E<V;E++)X=G[E],d+=(E?"L":"M")+X.x+" "+X.y;d+=l?ke.svg?"z":"x":""}return d||"M0 0"}var or=document.documentElement.style,ar="ActiveXObject"in window,kt=ar&&!document.addEventListener,Ct="msLaunchUri"in navigator&&!("documentMode"in document),Ln=Bt("webkit"),Ds=Bt("android"),Ms=Bt("android 2")||Bt("android 3"),Ra=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),pi=Ds&&Bt("Google")&&Ra<537&&!("AudioNode"in window),$i=!!window.opera,qi=!Ct&&Bt("chrome"),Zr=Bt("gecko")&&!Ln&&!$i&&!ar,La=!qi&&Bt("safari"),mi=Bt("phantom"),Qr="OTransition"in or,Da=navigator.platform.indexOf("Win")===0,Yr=ar&&"transition"in or,gi="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Ms,Os="MozPerspective"in or,lr=!window.L_DISABLE_3D&&(Yr||gi||Os)&&!Qr&&!mi,wr=typeof orientation<"u"||Bt("mobile"),_i=wr&&Ln,js=wr&&gi,xr=!window.PointerEvent&&window.MSPointerEvent,Er=!!(window.PointerEvent||xr),It="ontouchstart"in window||!!window.TouchEvent,Uo=!window.L_NO_TOUCH&&(It||Er),yi=wr&&$i,vi=wr&&Zr,Ma=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Oa=(function(){var i=!1;try{var l=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("testPassiveEventSupport",C,l),window.removeEventListener("testPassiveEventSupport",C,l)}catch{}return i})(),Tr=(function(){return!!document.createElement("canvas").getContext})(),Vs=!!(document.createElementNS&&fi("svg").createSVGRect),Gi=!!Vs&&(function(){var i=document.createElement("div");return i.innerHTML="<svg/>",(i.firstChild&&i.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),wi=!Vs&&(function(){try{var i=document.createElement("div");i.innerHTML='<v:shape adj="1"/>';var l=i.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}})(),xi=navigator.platform.indexOf("Mac")===0,ja=navigator.platform.indexOf("Linux")===0;function Bt(i){return navigator.userAgent.toLowerCase().indexOf(i)>=0}var ke={ie:ar,ielt9:kt,edge:Ct,webkit:Ln,android:Ds,android23:Ms,androidStock:pi,opera:$i,chrome:qi,gecko:Zr,safari:La,phantom:mi,opera12:Qr,win:Da,ie3d:Yr,webkit3d:gi,gecko3d:Os,any3d:lr,mobile:wr,mobileWebkit:_i,mobileWebkit3d:js,msPointer:xr,pointer:Er,touch:Uo,touchNative:It,mobileOpera:yi,mobileGecko:vi,retina:Ma,passiveEvents:Oa,canvas:Tr,svg:Vs,vml:wi,inlineSvg:Gi,mac:xi,linux:ja},Ki=ke.msPointer?"MSPointerDown":"pointerdown",Dn=ke.msPointer?"MSPointerMove":"pointermove",Bo=ke.msPointer?"MSPointerUp":"pointerup",Ho=ke.msPointer?"MSPointerCancel":"pointercancel",Zi={touchstart:Ki,touchmove:Dn,touchend:Bo,touchcancel:Ho},qn={touchstart:wt,touchmove:Gn,touchend:Gn,touchcancel:Gn},Ir={},Wo=!1;function Va(i,l,d){return l==="touchstart"&&Ji(),qn[l]?(d=qn[l].bind(this,d),i.addEventListener(Zi[l],d,!1),d):(console.warn("wrong event specified:",l),C)}function Fa(i,l,d){if(!Zi[l]){console.warn("wrong event specified:",l);return}i.removeEventListener(Zi[l],d,!1)}function Qi(i){Ir[i.pointerId]=i}function $o(i){Ir[i.pointerId]&&(Ir[i.pointerId]=i)}function Yi(i){delete Ir[i.pointerId]}function Ji(){Wo||(document.addEventListener(Ki,Qi,!0),document.addEventListener(Dn,$o,!0),document.addEventListener(Bo,Yi,!0),document.addEventListener(Ho,Yi,!0),Wo=!0)}function Gn(i,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var d in Ir)l.touches.push(Ir[d]);l.changedTouches=[l],i(l)}}function wt(i,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&xt(l),Gn(i,l)}function Ul(i){var l={},d,m;for(m in i)d=i[m],l[m]=d&&d.bind?d.bind(i):d;return i=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var Fs=200;function qo(i,l){i.addEventListener("dblclick",l);var d=0,m;function E(P){if(P.detail!==1){m=P.detail;return}if(!(P.pointerType==="mouse"||P.sourceCapabilities&&!P.sourceCapabilities.firesTouchEvents)){var V=Ar(P);if(!(V.some(function(X){return X instanceof HTMLLabelElement&&X.attributes.for})&&!V.some(function(X){return X instanceof HTMLInputElement||X instanceof HTMLSelectElement}))){var G=Date.now();G-d<=Fs?(m++,m===2&&l(Ul(P))):m=1,d=G}}}return i.addEventListener("click",E),{dblclick:l,simDblclick:E}}function Xi(i,l){i.removeEventListener("dblclick",l.dblclick),i.removeEventListener("click",l.simDblclick)}var es=Ii(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Sr=Ii(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ei=Sr==="webkitTransition"||Sr==="OTransition"?Sr+"End":"transitionend";function _n(i){return typeof i=="string"?document.getElementById(i):i}function Ti(i,l){var d=i.style[l]||i.currentStyle&&i.currentStyle[l];if((!d||d==="auto")&&document.defaultView){var m=document.defaultView.getComputedStyle(i,null);d=m?m[l]:null}return d==="auto"?null:d}function Ze(i,l,d){var m=document.createElement(i);return m.className=l||"",d&&d.appendChild(m),m}function lt(i){var l=i.parentNode;l&&l.removeChild(i)}function ln(i){for(;i.firstChild;)i.removeChild(i.firstChild)}function Kn(i){var l=i.parentNode;l&&l.lastChild!==i&&l.appendChild(i)}function un(i){var l=i.parentNode;l&&l.firstChild!==i&&l.insertBefore(i,l.firstChild)}function Pr(i,l){if(i.classList!==void 0)return i.classList.contains(l);var d=kr(i);return d.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(d)}function we(i,l){if(i.classList!==void 0)for(var d=$(l),m=0,E=d.length;m<E;m++)i.classList.add(d[m]);else if(!Pr(i,l)){var P=kr(i);Jr(i,(P?P+" ":"")+l)}}function mt(i,l){i.classList!==void 0?i.classList.remove(l):Jr(i,W((" "+kr(i)+" ").replace(" "+l+" "," ")))}function Jr(i,l){i.className.baseVal===void 0?i.className=l:i.className.baseVal=l}function kr(i){return i.correspondingElement&&(i=i.correspondingElement),i.className.baseVal===void 0?i.className:i.className.baseVal}function tn(i,l){"opacity"in i.style?i.style.opacity=l:"filter"in i.style&&Go(i,l)}function Go(i,l){var d=!1,m="DXImageTransform.Microsoft.Alpha";try{d=i.filters.item(m)}catch{if(l===1)return}l=Math.round(l*100),d?(d.Enabled=l!==100,d.Opacity=l):i.style.filter+=" progid:"+m+"(opacity="+l+")"}function Ii(i){for(var l=document.documentElement.style,d=0;d<i.length;d++)if(i[d]in l)return i[d];return!1}function Mn(i,l,d){var m=l||new ee(0,0);i.style[es]=(ke.ie3d?"translate("+m.x+"px,"+m.y+"px)":"translate3d("+m.x+"px,"+m.y+"px,0)")+(d?" scale("+d+")":"")}function At(i,l){i._leaflet_pos=l,ke.any3d?Mn(i,l):(i.style.left=l.x+"px",i.style.top=l.y+"px")}function ur(i){return i._leaflet_pos||new ee(0,0)}var tt,yn,ts;if("onselectstart"in document)tt=function(){ze(window,"selectstart",xt)},yn=function(){gt(window,"selectstart",xt)};else{var Cr=Ii(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);tt=function(){if(Cr){var i=document.documentElement.style;ts=i[Cr],i[Cr]="none"}},yn=function(){Cr&&(document.documentElement.style[Cr]=ts,ts=void 0)}}function ns(){ze(window,"dragstart",xt)}function rs(){gt(window,"dragstart",xt)}var Si,Zn;function Pi(i){for(;i.tabIndex===-1;)i=i.parentNode;i.style&&(On(),Si=i,Zn=i.style.outlineStyle,i.style.outlineStyle="none",ze(window,"keydown",On))}function On(){Si&&(Si.style.outlineStyle=Zn,Si=void 0,Zn=void 0,gt(window,"keydown",On))}function cr(i){do i=i.parentNode;while((!i.offsetWidth||!i.offsetHeight)&&i!==document.body);return i}function Vt(i){var l=i.getBoundingClientRect();return{x:l.width/i.offsetWidth||1,y:l.height/i.offsetHeight||1,boundingClientRect:l}}var is={__proto__:null,TRANSFORM:es,TRANSITION:Sr,TRANSITION_END:Ei,get:_n,getStyle:Ti,create:Ze,remove:lt,empty:ln,toFront:Kn,toBack:un,hasClass:Pr,addClass:we,removeClass:mt,setClass:Jr,getClass:kr,setOpacity:tn,testProp:Ii,setTransform:Mn,setPosition:At,getPosition:ur,get disableTextSelection(){return tt},get enableTextSelection(){return yn},disableImageDrag:ns,enableImageDrag:rs,preventOutline:Pi,restoreOutline:On,getSizedParentNode:cr,getScale:Vt};function ze(i,l,d,m){if(l&&typeof l=="object")for(var E in l)zs(i,E,l[E],d);else{l=$(l);for(var P=0,V=l.length;P<V;P++)zs(i,l[P],d,m)}return this}var bt="_leaflet_events";function gt(i,l,d,m){if(arguments.length===1)Xr(i),delete i[bt];else if(l&&typeof l=="object")for(var E in l)ki(i,E,l[E],d);else if(l=$(l),arguments.length===2)Xr(i,function(G){return Le(l,G)!==-1});else for(var P=0,V=l.length;P<V;P++)ki(i,l[P],d,m);return this}function Xr(i,l){for(var d in i[bt]){var m=d.split(/\d/)[0];(!l||l(m))&&ki(i,m,null,null,d)}}var jn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function zs(i,l,d,m){var E=l+x(d)+(m?"_"+x(m):"");if(i[bt]&&i[bt][E])return this;var P=function(G){return d.call(m||i,G||window.event)},V=P;!ke.touchNative&&ke.pointer&&l.indexOf("touch")===0?P=Va(i,l,P):ke.touch&&l==="dblclick"?P=qo(i,P):"addEventListener"in i?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?i.addEventListener(jn[l]||l,P,ke.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(P=function(G){G=G||window.event,os(i,G)&&V(G)},i.addEventListener(jn[l],P,!1)):i.addEventListener(l,V,!1):i.attachEvent("on"+l,P),i[bt]=i[bt]||{},i[bt][E]=P}function ki(i,l,d,m,E){E=E||l+x(d)+(m?"_"+x(m):"");var P=i[bt]&&i[bt][E];if(!P)return this;!ke.touchNative&&ke.pointer&&l.indexOf("touch")===0?Fa(i,l,P):ke.touch&&l==="dblclick"?Xi(i,P):"removeEventListener"in i?i.removeEventListener(jn[l]||l,P,!1):i.detachEvent("on"+l,P),i[bt][E]=null}function at(i){return i.stopPropagation?i.stopPropagation():i.originalEvent?i.originalEvent._stopped=!0:i.cancelBubble=!0,this}function Us(i){return zs(i,"wheel",at),this}function ss(i){return ze(i,"mousedown touchstart dblclick contextmenu",at),i._leaflet_disable_click=!0,this}function xt(i){return i.preventDefault?i.preventDefault():i.returnValue=!1,this}function vn(i){return xt(i),at(i),this}function Ar(i){if(i.composedPath)return i.composedPath();for(var l=[],d=i.target;d;)l.push(d),d=d.parentNode;return l}function br(i,l){if(!l)return new ee(i.clientX,i.clientY);var d=Vt(l),m=d.boundingClientRect;return new ee((i.clientX-m.left)/d.x-l.clientLeft,(i.clientY-m.top)/d.y-l.clientTop)}var Nr=ke.linux&&ke.chrome?window.devicePixelRatio:ke.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Ko(i){return ke.edge?i.wheelDeltaY/2:i.deltaY&&i.deltaMode===0?-i.deltaY/Nr:i.deltaY&&i.deltaMode===1?-i.deltaY*20:i.deltaY&&i.deltaMode===2?-i.deltaY*60:i.deltaX||i.deltaZ?0:i.wheelDelta?(i.wheelDeltaY||i.wheelDelta)/2:i.detail&&Math.abs(i.detail)<32765?-i.detail*20:i.detail?i.detail/-32765*60:0}function os(i,l){var d=l.relatedTarget;if(!d)return!0;try{for(;d&&d!==i;)d=d.parentNode}catch{return!1}return d!==i}var Rr={__proto__:null,on:ze,off:gt,stopPropagation:at,disableScrollPropagation:Us,disableClickPropagation:ss,preventDefault:xt,stop:vn,getPropagationPath:Ar,getMousePosition:br,getWheelDelta:Ko,isExternalTarget:os,addListener:ze,removeListener:gt},as=Ve.extend({run:function(i,l,d,m){this.stop(),this._el=i,this._inProgress=!0,this._duration=d||.25,this._easeOutPower=1/Math.max(m||.5,.2),this._startPos=ur(i),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=R(this._animate,this),this._step()},_step:function(i){var l=+new Date-this._startTime,d=this._duration*1e3;l<d?this._runFrame(this._easeOut(l/d),i):(this._runFrame(1),this._complete())},_runFrame:function(i,l){var d=this._startPos.add(this._offset.multiplyBy(i));l&&d._round(),At(this._el,d),this.fire("step")},_complete:function(){O(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(i){return 1-Math.pow(1-i,this._easeOutPower)}}),nt=Ve.extend({options:{crs:Rn,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(i,l){l=Z(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(i),this._initLayout(),this._onResize=p(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(ye(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Sr&&ke.any3d&&!ke.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ze(this._proxy,Ei,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(i,l,d){if(l=l===void 0?this._zoom:this._limitZoom(l),i=this._limitCenter(ye(i),l,this.options.maxBounds),d=d||{},this._stop(),this._loaded&&!d.reset&&d!==!0){d.animate!==void 0&&(d.zoom=a({animate:d.animate},d.zoom),d.pan=a({animate:d.animate,duration:d.duration},d.pan));var m=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(i,l,d.zoom):this._tryAnimatedPan(i,d.pan);if(m)return clearTimeout(this._sizeTimer),this}return this._resetView(i,l,d.pan&&d.pan.noMoveStart),this},setZoom:function(i,l){return this._loaded?this.setView(this.getCenter(),i,{zoom:l}):(this._zoom=i,this)},zoomIn:function(i,l){return i=i||(ke.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+i,l)},zoomOut:function(i,l){return i=i||(ke.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-i,l)},setZoomAround:function(i,l,d){var m=this.getZoomScale(l),E=this.getSize().divideBy(2),P=i instanceof ee?i:this.latLngToContainerPoint(i),V=P.subtract(E).multiplyBy(1-1/m),G=this.containerPointToLatLng(E.add(V));return this.setView(G,l,{zoom:d})},_getBoundsCenterZoom:function(i,l){l=l||{},i=i.getBounds?i.getBounds():Ae(i);var d=se(l.paddingTopLeft||l.padding||[0,0]),m=se(l.paddingBottomRight||l.padding||[0,0]),E=this.getBoundsZoom(i,!1,d.add(m));if(E=typeof l.maxZoom=="number"?Math.min(l.maxZoom,E):E,E===1/0)return{center:i.getCenter(),zoom:E};var P=m.subtract(d).divideBy(2),V=this.project(i.getSouthWest(),E),G=this.project(i.getNorthEast(),E),X=this.unproject(V.add(G).divideBy(2).add(P),E);return{center:X,zoom:E}},fitBounds:function(i,l){if(i=Ae(i),!i.isValid())throw new Error("Bounds are not valid.");var d=this._getBoundsCenterZoom(i,l);return this.setView(d.center,d.zoom,l)},fitWorld:function(i){return this.fitBounds([[-90,-180],[90,180]],i)},panTo:function(i,l){return this.setView(i,this._zoom,{pan:l})},panBy:function(i,l){if(i=se(i).round(),l=l||{},!i.x&&!i.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(i))return this._resetView(this.unproject(this.project(this.getCenter()).add(i)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new as,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){we(this._mapPane,"leaflet-pan-anim");var d=this._getMapPanePos().subtract(i).round();this._panAnim.run(this._mapPane,d,l.duration||.25,l.easeLinearity)}else this._rawPanBy(i),this.fire("move").fire("moveend");return this},flyTo:function(i,l,d){if(d=d||{},d.animate===!1||!ke.any3d)return this.setView(i,l,d);this._stop();var m=this.project(this.getCenter()),E=this.project(i),P=this.getSize(),V=this._zoom;i=ye(i),l=l===void 0?V:l;var G=Math.max(P.x,P.y),X=G*this.getZoomScale(V,l),ae=E.distanceTo(m)||1,ve=1.42,Fe=ve*ve;function et(_t){var oo=_t?-1:1,ud=_t?X:G,cd=X*X-G*G+oo*Fe*Fe*ae*ae,fs=2*ud*Fe*ae,ps=cd/fs,ms=Math.sqrt(ps*ps+1)-ps,Ya=ms<1e-9?-18:Math.log(ms);return Ya}function Yt(_t){return(Math.exp(_t)-Math.exp(-_t))/2}function Wt(_t){return(Math.exp(_t)+Math.exp(-_t))/2}function Bn(_t){return Yt(_t)/Wt(_t)}var En=et(0);function io(_t){return G*(Wt(En)/Wt(En+ve*_t))}function Xl(_t){return G*(Wt(En)*Bn(En+ve*_t)-Yt(En))/Fe}function Di(_t){return 1-Math.pow(1-_t,1.5)}var hc=Date.now(),ds=(et(1)-En)/ve,Fr=d.duration?1e3*d.duration:1e3*ds*.8;function so(){var _t=(Date.now()-hc)/Fr,oo=Di(_t)*ds;_t<=1?(this._flyToFrame=R(so,this),this._move(this.unproject(m.add(E.subtract(m).multiplyBy(Xl(oo)/ae)),V),this.getScaleZoom(G/io(oo),V),{flyTo:!0})):this._move(i,l)._moveEnd(!0)}return this._moveStart(!0,d.noMoveStart),so.call(this),this},flyToBounds:function(i,l){var d=this._getBoundsCenterZoom(i,l);return this.flyTo(d.center,d.zoom,l)},setMaxBounds:function(i){return i=Ae(i),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),i.isValid()?(this.options.maxBounds=i,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(i){var l=this.options.minZoom;return this.options.minZoom=i,this._loaded&&l!==i&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(i):this},setMaxZoom:function(i){var l=this.options.maxZoom;return this.options.maxZoom=i,this._loaded&&l!==i&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(i):this},panInsideBounds:function(i,l){this._enforcingBounds=!0;var d=this.getCenter(),m=this._limitCenter(d,this._zoom,Ae(i));return d.equals(m)||this.panTo(m,l),this._enforcingBounds=!1,this},panInside:function(i,l){l=l||{};var d=se(l.paddingTopLeft||l.padding||[0,0]),m=se(l.paddingBottomRight||l.padding||[0,0]),E=this.project(this.getCenter()),P=this.project(i),V=this.getPixelBounds(),G=ne([V.min.add(d),V.max.subtract(m)]),X=G.getSize();if(!G.contains(P)){this._enforcingBounds=!0;var ae=P.subtract(G.getCenter()),ve=G.extend(P).getSize().subtract(X);E.x+=ae.x<0?-ve.x:ve.x,E.y+=ae.y<0?-ve.y:ve.y,this.panTo(this.unproject(E),l),this._enforcingBounds=!1}return this},invalidateSize:function(i){if(!this._loaded)return this;i=a({animate:!1,pan:!0},i===!0?{animate:!0}:i);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var d=this.getSize(),m=l.divideBy(2).round(),E=d.divideBy(2).round(),P=m.subtract(E);return!P.x&&!P.y?this:(i.animate&&i.pan?this.panBy(P):(i.pan&&this._rawPanBy(P),this.fire("move"),i.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(p(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:d}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(i){if(i=this._locateOptions=a({timeout:1e4,watch:!1},i),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=p(this._handleGeolocationResponse,this),d=p(this._handleGeolocationError,this);return i.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,d,i):navigator.geolocation.getCurrentPosition(l,d,i),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(i){if(this._container._leaflet_id){var l=i.code,d=i.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+d+"."})}},_handleGeolocationResponse:function(i){if(this._container._leaflet_id){var l=i.coords.latitude,d=i.coords.longitude,m=new Ie(l,d),E=m.toBounds(i.coords.accuracy*2),P=this._locateOptions;if(P.setView){var V=this.getBoundsZoom(E);this.setView(m,P.maxZoom?Math.min(V,P.maxZoom):V)}var G={latlng:m,bounds:E,timestamp:i.timestamp};for(var X in i.coords)typeof i.coords[X]=="number"&&(G[X]=i.coords[X]);this.fire("locationfound",G)}},addHandler:function(i,l){if(!l)return this;var d=this[i]=new l(this);return this._handlers.push(d),this.options[i]&&d.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),lt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(O(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var i;for(i in this._layers)this._layers[i].remove();for(i in this._panes)lt(this._panes[i]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(i,l){var d="leaflet-pane"+(i?" leaflet-"+i.replace("Pane","")+"-pane":""),m=Ze("div",d,l||this._mapPane);return i&&(this._panes[i]=m),m},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var i=this.getPixelBounds(),l=this.unproject(i.getBottomLeft()),d=this.unproject(i.getTopRight());return new Oe(l,d)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(i,l,d){i=Ae(i),d=se(d||[0,0]);var m=this.getZoom()||0,E=this.getMinZoom(),P=this.getMaxZoom(),V=i.getNorthWest(),G=i.getSouthEast(),X=this.getSize().subtract(d),ae=ne(this.project(G,m),this.project(V,m)).getSize(),ve=ke.any3d?this.options.zoomSnap:1,Fe=X.x/ae.x,et=X.y/ae.y,Yt=l?Math.max(Fe,et):Math.min(Fe,et);return m=this.getScaleZoom(Yt,m),ve&&(m=Math.round(m/(ve/100))*(ve/100),m=l?Math.ceil(m/ve)*ve:Math.floor(m/ve)*ve),Math.max(E,Math.min(P,m))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new ee(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(i,l){var d=this._getTopLeftPoint(i,l);return new B(d,d.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(i){return this.options.crs.getProjectedBounds(i===void 0?this.getZoom():i)},getPane:function(i){return typeof i=="string"?this._panes[i]:i},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(i,l){var d=this.options.crs;return l=l===void 0?this._zoom:l,d.scale(i)/d.scale(l)},getScaleZoom:function(i,l){var d=this.options.crs;l=l===void 0?this._zoom:l;var m=d.zoom(i*d.scale(l));return isNaN(m)?1/0:m},project:function(i,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(ye(i),l)},unproject:function(i,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(se(i),l)},layerPointToLatLng:function(i){var l=se(i).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(i){var l=this.project(ye(i))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(i){return this.options.crs.wrapLatLng(ye(i))},wrapLatLngBounds:function(i){return this.options.crs.wrapLatLngBounds(Ae(i))},distance:function(i,l){return this.options.crs.distance(ye(i),ye(l))},containerPointToLayerPoint:function(i){return se(i).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(i){return se(i).add(this._getMapPanePos())},containerPointToLatLng:function(i){var l=this.containerPointToLayerPoint(se(i));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(i){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ye(i)))},mouseEventToContainerPoint:function(i){return br(i,this._container)},mouseEventToLayerPoint:function(i){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(i))},mouseEventToLatLng:function(i){return this.layerPointToLatLng(this.mouseEventToLayerPoint(i))},_initContainer:function(i){var l=this._container=_n(i);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ze(l,"scroll",this._onScroll,this),this._containerId=x(l)},_initLayout:function(){var i=this._container;this._fadeAnimated=this.options.fadeAnimation&&ke.any3d,we(i,"leaflet-container"+(ke.touch?" leaflet-touch":"")+(ke.retina?" leaflet-retina":"")+(ke.ielt9?" leaflet-oldie":"")+(ke.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=Ti(i,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(i.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var i=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),At(this._mapPane,new ee(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(we(i.markerPane,"leaflet-zoom-hide"),we(i.shadowPane,"leaflet-zoom-hide"))},_resetView:function(i,l,d){At(this._mapPane,new ee(0,0));var m=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var E=this._zoom!==l;this._moveStart(E,d)._move(i,l)._moveEnd(E),this.fire("viewreset"),m&&this.fire("load")},_moveStart:function(i,l){return i&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(i,l,d,m){l===void 0&&(l=this._zoom);var E=this._zoom!==l;return this._zoom=l,this._lastCenter=i,this._pixelOrigin=this._getNewPixelOrigin(i),m?d&&d.pinch&&this.fire("zoom",d):((E||d&&d.pinch)&&this.fire("zoom",d),this.fire("move",d)),this},_moveEnd:function(i){return i&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return O(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(i){At(this._mapPane,this._getMapPanePos().subtract(i))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(i){this._targets={},this._targets[x(this._container)]=this;var l=i?gt:ze;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),ke.any3d&&this.options.transform3DLimit&&(i?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){O(this._resizeRequest),this._resizeRequest=R(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var i=this._getMapPanePos();Math.max(Math.abs(i.x),Math.abs(i.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(i,l){for(var d=[],m,E=l==="mouseout"||l==="mouseover",P=i.target||i.srcElement,V=!1;P;){if(m=this._targets[x(P)],m&&(l==="click"||l==="preclick")&&this._draggableMoved(m)){V=!0;break}if(m&&m.listens(l,!0)&&(E&&!os(P,i)||(d.push(m),E))||P===this._container)break;P=P.parentNode}return!d.length&&!V&&!E&&this.listens(l,!0)&&(d=[this]),d},_isClickDisabled:function(i){for(;i&&i!==this._container;){if(i._leaflet_disable_click)return!0;i=i.parentNode}},_handleDOMEvent:function(i){var l=i.target||i.srcElement;if(!(!this._loaded||l._leaflet_disable_events||i.type==="click"&&this._isClickDisabled(l))){var d=i.type;d==="mousedown"&&Pi(l),this._fireDOMEvent(i,d)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(i,l,d){if(i.type==="click"){var m=a({},i);m.type="preclick",this._fireDOMEvent(m,m.type,d)}var E=this._findEventTargets(i,l);if(d){for(var P=[],V=0;V<d.length;V++)d[V].listens(l,!0)&&P.push(d[V]);E=P.concat(E)}if(E.length){l==="contextmenu"&&xt(i);var G=E[0],X={originalEvent:i};if(i.type!=="keypress"&&i.type!=="keydown"&&i.type!=="keyup"){var ae=G.getLatLng&&(!G._radius||G._radius<=10);X.containerPoint=ae?this.latLngToContainerPoint(G.getLatLng()):this.mouseEventToContainerPoint(i),X.layerPoint=this.containerPointToLayerPoint(X.containerPoint),X.latlng=ae?G.getLatLng():this.layerPointToLatLng(X.layerPoint)}for(V=0;V<E.length;V++)if(E[V].fire(l,X,!0),X.originalEvent._stopped||E[V].options.bubblingMouseEvents===!1&&Le(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(i){return i=i.dragging&&i.dragging.enabled()?i:this,i.dragging&&i.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var i=0,l=this._handlers.length;i<l;i++)this._handlers[i].disable()},whenReady:function(i,l){return this._loaded?i.call(l||this,{target:this}):this.on("load",i,l),this},_getMapPanePos:function(){return ur(this._mapPane)||new ee(0,0)},_moved:function(){var i=this._getMapPanePos();return i&&!i.equals([0,0])},_getTopLeftPoint:function(i,l){var d=i&&l!==void 0?this._getNewPixelOrigin(i,l):this.getPixelOrigin();return d.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(i,l){var d=this.getSize()._divideBy(2);return this.project(i,l)._subtract(d)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(i,l,d){var m=this._getNewPixelOrigin(d,l);return this.project(i,l)._subtract(m)},_latLngBoundsToNewLayerBounds:function(i,l,d){var m=this._getNewPixelOrigin(d,l);return ne([this.project(i.getSouthWest(),l)._subtract(m),this.project(i.getNorthWest(),l)._subtract(m),this.project(i.getSouthEast(),l)._subtract(m),this.project(i.getNorthEast(),l)._subtract(m)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(i){return this.latLngToLayerPoint(i).subtract(this._getCenterLayerPoint())},_limitCenter:function(i,l,d){if(!d)return i;var m=this.project(i,l),E=this.getSize().divideBy(2),P=new B(m.subtract(E),m.add(E)),V=this._getBoundsOffset(P,d,l);return Math.abs(V.x)<=1&&Math.abs(V.y)<=1?i:this.unproject(m.add(V),l)},_limitOffset:function(i,l){if(!l)return i;var d=this.getPixelBounds(),m=new B(d.min.add(i),d.max.add(i));return i.add(this._getBoundsOffset(m,l))},_getBoundsOffset:function(i,l,d){var m=ne(this.project(l.getNorthEast(),d),this.project(l.getSouthWest(),d)),E=m.min.subtract(i.min),P=m.max.subtract(i.max),V=this._rebound(E.x,-P.x),G=this._rebound(E.y,-P.y);return new ee(V,G)},_rebound:function(i,l){return i+l>0?Math.round(i-l)/2:Math.max(0,Math.ceil(i))-Math.max(0,Math.floor(l))},_limitZoom:function(i){var l=this.getMinZoom(),d=this.getMaxZoom(),m=ke.any3d?this.options.zoomSnap:1;return m&&(i=Math.round(i/m)*m),Math.max(l,Math.min(d,i))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){mt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(i,l){var d=this._getCenterOffset(i)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(d)?!1:(this.panBy(d,l),!0)},_createAnimProxy:function(){var i=this._proxy=Ze("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(i),this.on("zoomanim",function(l){var d=es,m=this._proxy.style[d];Mn(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),m===this._proxy.style[d]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){lt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var i=this.getCenter(),l=this.getZoom();Mn(this._proxy,this.project(i,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(i){this._animatingZoom&&i.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(i,l,d){if(this._animatingZoom)return!0;if(d=d||{},!this._zoomAnimated||d.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var m=this.getZoomScale(l),E=this._getCenterOffset(i)._divideBy(1-1/m);return d.animate!==!0&&!this.getSize().contains(E)?!1:(R(function(){this._moveStart(!0,d.noMoveStart||!1)._animateZoom(i,l,!0)},this),!0)},_animateZoom:function(i,l,d,m){this._mapPane&&(d&&(this._animatingZoom=!0,this._animateToCenter=i,this._animateToZoom=l,we(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:i,zoom:l,noUpdate:m}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(p(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&mt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Vn(i,l){return new nt(i,l)}var nn=be.extend({options:{position:"topright"},initialize:function(i){Z(this,i)},getPosition:function(){return this.options.position},setPosition:function(i){var l=this._map;return l&&l.removeControl(this),this.options.position=i,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(i){this.remove(),this._map=i;var l=this._container=this.onAdd(i),d=this.getPosition(),m=i._controlCorners[d];return we(l,"leaflet-control"),d.indexOf("bottom")!==-1?m.insertBefore(l,m.firstChild):m.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(lt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(i){this._map&&i&&i.screenX>0&&i.screenY>0&&this._map.getContainer().focus()}}),Fn=function(i){return new nn(i)};nt.include({addControl:function(i){return i.addTo(this),this},removeControl:function(i){return i.remove(),this},_initControlPos:function(){var i=this._controlCorners={},l="leaflet-",d=this._controlContainer=Ze("div",l+"control-container",this._container);function m(E,P){var V=l+E+" "+l+P;i[E+P]=Ze("div",V,d)}m("top","left"),m("top","right"),m("bottom","left"),m("bottom","right")},_clearControlPos:function(){for(var i in this._controlCorners)lt(this._controlCorners[i]);lt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Zo=nn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(i,l,d,m){return d<m?-1:m<d?1:0}},initialize:function(i,l,d){Z(this,d),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var m in i)this._addLayer(i[m],m);for(m in l)this._addLayer(l[m],m,!0)},onAdd:function(i){this._initLayout(),this._update(),this._map=i,i.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(i){return nn.prototype.addTo.call(this,i),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(i,l){return this._addLayer(i,l),this._map?this._update():this},addOverlay:function(i,l){return this._addLayer(i,l,!0),this._map?this._update():this},removeLayer:function(i){i.off("add remove",this._onLayerChange,this);var l=this._getLayer(x(i));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){we(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var i=this._map.getSize().y-(this._container.offsetTop+50);return i<this._section.clientHeight?(we(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=i+"px"):mt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return mt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var i="leaflet-control-layers",l=this._container=Ze("div",i),d=this.options.collapsed;l.setAttribute("aria-haspopup",!0),ss(l),Us(l);var m=this._section=Ze("section",i+"-list");d&&(this._map.on("click",this.collapse,this),ze(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var E=this._layersLink=Ze("a",i+"-toggle",l);E.href="#",E.title="Layers",E.setAttribute("role","button"),ze(E,{keydown:function(P){P.keyCode===13&&this._expandSafely()},click:function(P){xt(P),this._expandSafely()}},this),d||this.expand(),this._baseLayersList=Ze("div",i+"-base",m),this._separator=Ze("div",i+"-separator",m),this._overlaysList=Ze("div",i+"-overlays",m),l.appendChild(m)},_getLayer:function(i){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&x(this._layers[l].layer)===i)return this._layers[l]},_addLayer:function(i,l,d){this._map&&i.on("add remove",this._onLayerChange,this),this._layers.push({layer:i,name:l,overlay:d}),this.options.sortLayers&&this._layers.sort(p(function(m,E){return this.options.sortFunction(m.layer,E.layer,m.name,E.name)},this)),this.options.autoZIndex&&i.setZIndex&&(this._lastZIndex++,i.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ln(this._baseLayersList),ln(this._overlaysList),this._layerControlInputs=[];var i,l,d,m,E=0;for(d=0;d<this._layers.length;d++)m=this._layers[d],this._addItem(m),l=l||m.overlay,i=i||!m.overlay,E+=m.overlay?0:1;return this.options.hideSingleBase&&(i=i&&E>1,this._baseLayersList.style.display=i?"":"none"),this._separator.style.display=l&&i?"":"none",this},_onLayerChange:function(i){this._handlingClick||this._update();var l=this._getLayer(x(i.target)),d=l.overlay?i.type==="add"?"overlayadd":"overlayremove":i.type==="add"?"baselayerchange":null;d&&this._map.fire(d,l)},_createRadioElement:function(i,l){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+i+'"'+(l?' checked="checked"':"")+"/>",m=document.createElement("div");return m.innerHTML=d,m.firstChild},_addItem:function(i){var l=document.createElement("label"),d=this._map.hasLayer(i.layer),m;i.overlay?(m=document.createElement("input"),m.type="checkbox",m.className="leaflet-control-layers-selector",m.defaultChecked=d):m=this._createRadioElement("leaflet-base-layers_"+x(this),d),this._layerControlInputs.push(m),m.layerId=x(i.layer),ze(m,"click",this._onInputClick,this);var E=document.createElement("span");E.innerHTML=" "+i.name;var P=document.createElement("span");l.appendChild(P),P.appendChild(m),P.appendChild(E);var V=i.overlay?this._overlaysList:this._baseLayersList;return V.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var i=this._layerControlInputs,l,d,m=[],E=[];this._handlingClick=!0;for(var P=i.length-1;P>=0;P--)l=i[P],d=this._getLayer(l.layerId).layer,l.checked?m.push(d):l.checked||E.push(d);for(P=0;P<E.length;P++)this._map.hasLayer(E[P])&&this._map.removeLayer(E[P]);for(P=0;P<m.length;P++)this._map.hasLayer(m[P])||this._map.addLayer(m[P]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var i=this._layerControlInputs,l,d,m=this._map.getZoom(),E=i.length-1;E>=0;E--)l=i[E],d=this._getLayer(l.layerId).layer,l.disabled=d.options.minZoom!==void 0&&m<d.options.minZoom||d.options.maxZoom!==void 0&&m>d.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var i=this._section;this._preventClick=!0,ze(i,"click",xt),this.expand();var l=this;setTimeout(function(){gt(i,"click",xt),l._preventClick=!1})}}),ls=function(i,l,d){return new Zo(i,l,d)},Qn=nn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(i){var l="leaflet-control-zoom",d=Ze("div",l+" leaflet-bar"),m=this.options;return this._zoomInButton=this._createButton(m.zoomInText,m.zoomInTitle,l+"-in",d,this._zoomIn),this._zoomOutButton=this._createButton(m.zoomOutText,m.zoomOutTitle,l+"-out",d,this._zoomOut),this._updateDisabled(),i.on("zoomend zoomlevelschange",this._updateDisabled,this),d},onRemove:function(i){i.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(i){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(i.shiftKey?3:1))},_zoomOut:function(i){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(i.shiftKey?3:1))},_createButton:function(i,l,d,m,E){var P=Ze("a",d,m);return P.innerHTML=i,P.href="#",P.title=l,P.setAttribute("role","button"),P.setAttribute("aria-label",l),ss(P),ze(P,"click",vn),ze(P,"click",E,this),ze(P,"click",this._refocusOnMap,this),P},_updateDisabled:function(){var i=this._map,l="leaflet-disabled";mt(this._zoomInButton,l),mt(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||i._zoom===i.getMinZoom())&&(we(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||i._zoom===i.getMaxZoom())&&(we(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});nt.mergeOptions({zoomControl:!0}),nt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Qn,this.addControl(this.zoomControl))});var Qo=function(i){return new Qn(i)},Qt=nn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(i){var l="leaflet-control-scale",d=Ze("div",l),m=this.options;return this._addScales(m,l+"-line",d),i.on(m.updateWhenIdle?"moveend":"move",this._update,this),i.whenReady(this._update,this),d},onRemove:function(i){i.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(i,l,d){i.metric&&(this._mScale=Ze("div",l,d)),i.imperial&&(this._iScale=Ze("div",l,d))},_update:function(){var i=this._map,l=i.getSize().y/2,d=i.distance(i.containerPointToLatLng([0,l]),i.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(d)},_updateScales:function(i){this.options.metric&&i&&this._updateMetric(i),this.options.imperial&&i&&this._updateImperial(i)},_updateMetric:function(i){var l=this._getRoundNum(i),d=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,d,l/i)},_updateImperial:function(i){var l=i*3.2808399,d,m,E;l>5280?(d=l/5280,m=this._getRoundNum(d),this._updateScale(this._iScale,m+" mi",m/d)):(E=this._getRoundNum(l),this._updateScale(this._iScale,E+" ft",E/l))},_updateScale:function(i,l,d){i.style.width=Math.round(this.options.maxWidth*d)+"px",i.innerHTML=l},_getRoundNum:function(i){var l=Math.pow(10,(Math.floor(i)+"").length-1),d=i/l;return d=d>=10?10:d>=5?5:d>=3?3:d>=2?2:1,l*d}}),Lr=function(i){return new Qt(i)},us='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Dr=nn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ke.inlineSvg?us+" ":"")+"Leaflet</a>"},initialize:function(i){Z(this,i),this._attributions={}},onAdd:function(i){i.attributionControl=this,this._container=Ze("div","leaflet-control-attribution"),ss(this._container);for(var l in i._layers)i._layers[l].getAttribution&&this.addAttribution(i._layers[l].getAttribution());return this._update(),i.on("layeradd",this._addAttribution,this),this._container},onRemove:function(i){i.off("layeradd",this._addAttribution,this)},_addAttribution:function(i){i.layer.getAttribution&&(this.addAttribution(i.layer.getAttribution()),i.layer.once("remove",function(){this.removeAttribution(i.layer.getAttribution())},this))},setPrefix:function(i){return this.options.prefix=i,this._update(),this},addAttribution:function(i){return i?(this._attributions[i]||(this._attributions[i]=0),this._attributions[i]++,this._update(),this):this},removeAttribution:function(i){return i?(this._attributions[i]&&(this._attributions[i]--,this._update()),this):this},_update:function(){if(this._map){var i=[];for(var l in this._attributions)this._attributions[l]&&i.push(l);var d=[];this.options.prefix&&d.push(this.options.prefix),i.length&&d.push(i.join(", ")),this._container.innerHTML=d.join(' <span aria-hidden="true">|</span> ')}}});nt.mergeOptions({attributionControl:!0}),nt.addInitHook(function(){this.options.attributionControl&&new Dr().addTo(this)});var Bs=function(i){return new Dr(i)};nn.Layers=Zo,nn.Zoom=Qn,nn.Scale=Qt,nn.Attribution=Dr,Fn.layers=ls,Fn.zoom=Qo,Fn.scale=Lr,Fn.attribution=Bs;var cn=be.extend({initialize:function(i){this._map=i},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});cn.addTo=function(i,l){return i.addHandler(l,this),this};var Hs={Events:ge},wn=ke.touch?"touchstart mousedown":"mousedown",xn=Ve.extend({options:{clickTolerance:3},initialize:function(i,l,d,m){Z(this,m),this._element=i,this._dragStartTarget=l||i,this._preventOutline=d},enable:function(){this._enabled||(ze(this._dragStartTarget,wn,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(xn._dragging===this&&this.finishDrag(!0),gt(this._dragStartTarget,wn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(i){if(this._enabled&&(this._moved=!1,!Pr(this._element,"leaflet-zoom-anim"))){if(i.touches&&i.touches.length!==1){xn._dragging===this&&this.finishDrag();return}if(!(xn._dragging||i.shiftKey||i.which!==1&&i.button!==1&&!i.touches)&&(xn._dragging=this,this._preventOutline&&Pi(this._element),ns(),tt(),!this._moving)){this.fire("down");var l=i.touches?i.touches[0]:i,d=cr(this._element);this._startPoint=new ee(l.clientX,l.clientY),this._startPos=ur(this._element),this._parentScale=Vt(d);var m=i.type==="mousedown";ze(document,m?"mousemove":"touchmove",this._onMove,this),ze(document,m?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(i){if(this._enabled){if(i.touches&&i.touches.length>1){this._moved=!0;return}var l=i.touches&&i.touches.length===1?i.touches[0]:i,d=new ee(l.clientX,l.clientY)._subtract(this._startPoint);!d.x&&!d.y||Math.abs(d.x)+Math.abs(d.y)<this.options.clickTolerance||(d.x/=this._parentScale.x,d.y/=this._parentScale.y,xt(i),this._moved||(this.fire("dragstart"),this._moved=!0,we(document.body,"leaflet-dragging"),this._lastTarget=i.target||i.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),we(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(d),this._moving=!0,this._lastEvent=i,this._updatePosition())}},_updatePosition:function(){var i={originalEvent:this._lastEvent};this.fire("predrag",i),At(this._element,this._newPos),this.fire("drag",i)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(i){mt(document.body,"leaflet-dragging"),this._lastTarget&&(mt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),gt(document,"mousemove touchmove",this._onMove,this),gt(document,"mouseup touchend touchcancel",this._onUp,this),rs(),yn();var l=this._moved&&this._moving;this._moving=!1,xn._dragging=!1,l&&this.fire("dragend",{noInertia:i,distance:this._newPos.distanceTo(this._startPos)})}});function Ws(i,l,d){var m,E=[1,4,2,8],P,V,G,X,ae,ve,Fe,et;for(P=0,ve=i.length;P<ve;P++)i[P]._code=Y(i[P],l);for(G=0;G<4;G++){for(Fe=E[G],m=[],P=0,ve=i.length,V=ve-1;P<ve;V=P++)X=i[P],ae=i[V],X._code&Fe?ae._code&Fe||(et=q(ae,X,Fe,l,d),et._code=Y(et,l),m.push(et)):(ae._code&Fe&&(et=q(ae,X,Fe,l,d),et._code=Y(et,l),m.push(et)),m.push(X));i=m}return i}function Yo(i,l){var d,m,E,P,V,G,X,ae,ve;if(!i||i.length===0)throw new Error("latlngs not passed");ut(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var Fe=ye([0,0]),et=Ae(i),Yt=et.getNorthWest().distanceTo(et.getSouthWest())*et.getNorthEast().distanceTo(et.getNorthWest());Yt<1700&&(Fe=$s(i));var Wt=i.length,Bn=[];for(d=0;d<Wt;d++){var En=ye(i[d]);Bn.push(l.project(ye([En.lat-Fe.lat,En.lng-Fe.lng])))}for(G=X=ae=0,d=0,m=Wt-1;d<Wt;m=d++)E=Bn[d],P=Bn[m],V=E.y*P.x-P.y*E.x,X+=(E.x+P.x)*V,ae+=(E.y+P.y)*V,G+=V*3;G===0?ve=Bn[0]:ve=[X/G,ae/G];var io=l.unproject(se(ve));return ye([io.lat+Fe.lat,io.lng+Fe.lng])}function $s(i){for(var l=0,d=0,m=0,E=0;E<i.length;E++){var P=ye(i[E]);l+=P.lat,d+=P.lng,m++}return ye([l/m,d/m])}var qs={__proto__:null,clipPolygon:Ws,polygonCenter:Yo,centroid:$s};function Ht(i,l){if(!l||!i.length)return i.slice();var d=l*l;return i=w(i,d),i=Ci(i,d),i}function Jo(i,l,d){return Math.sqrt(He(i,l,d,!0))}function za(i,l,d){return He(i,l,d)}function Ci(i,l){var d=i.length,m=typeof Uint8Array<"u"?Uint8Array:Array,E=new m(d);E[0]=E[d-1]=1,h(i,E,l,0,d-1);var P,V=[];for(P=0;P<d;P++)E[P]&&V.push(i[P]);return V}function h(i,l,d,m,E){var P=0,V,G,X;for(G=m+1;G<=E-1;G++)X=He(i[G],i[m],i[E],!0),X>P&&(V=G,P=X);P>d&&(l[V]=1,h(i,l,d,m,V),h(i,l,d,V,E))}function w(i,l){for(var d=[i[0]],m=1,E=0,P=i.length;m<P;m++)pe(i[m],i[E])>l&&(d.push(i[m]),E=m);return E<P-1&&d.push(i[P-1]),d}var I;function A(i,l,d,m,E){var P=m?I:Y(i,d),V=Y(l,d),G,X,ae;for(I=V;;){if(!(P|V))return[i,l];if(P&V)return!1;G=P||V,X=q(i,l,G,d,E),ae=Y(X,d),G===P?(i=X,P=ae):(l=X,V=ae)}}function q(i,l,d,m,E){var P=l.x-i.x,V=l.y-i.y,G=m.min,X=m.max,ae,ve;return d&8?(ae=i.x+P*(X.y-i.y)/V,ve=X.y):d&4?(ae=i.x+P*(G.y-i.y)/V,ve=G.y):d&2?(ae=X.x,ve=i.y+V*(X.x-i.x)/P):d&1&&(ae=G.x,ve=i.y+V*(G.x-i.x)/P),new ee(ae,ve,E)}function Y(i,l){var d=0;return i.x<l.min.x?d|=1:i.x>l.max.x&&(d|=2),i.y<l.min.y?d|=4:i.y>l.max.y&&(d|=8),d}function pe(i,l){var d=l.x-i.x,m=l.y-i.y;return d*d+m*m}function He(i,l,d,m){var E=l.x,P=l.y,V=d.x-E,G=d.y-P,X=V*V+G*G,ae;return X>0&&(ae=((i.x-E)*V+(i.y-P)*G)/X,ae>1?(E=d.x,P=d.y):ae>0&&(E+=V*ae,P+=G*ae)),V=i.x-E,G=i.y-P,m?V*V+G*G:new ee(E,P)}function ut(i){return!xe(i[0])||typeof i[0][0]!="object"&&typeof i[0][0]<"u"}function ft(i){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),ut(i)}function Rt(i,l){var d,m,E,P,V,G,X,ae;if(!i||i.length===0)throw new Error("latlngs not passed");ut(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var ve=ye([0,0]),Fe=Ae(i),et=Fe.getNorthWest().distanceTo(Fe.getSouthWest())*Fe.getNorthEast().distanceTo(Fe.getNorthWest());et<1700&&(ve=$s(i));var Yt=i.length,Wt=[];for(d=0;d<Yt;d++){var Bn=ye(i[d]);Wt.push(l.project(ye([Bn.lat-ve.lat,Bn.lng-ve.lng])))}for(d=0,m=0;d<Yt-1;d++)m+=Wt[d].distanceTo(Wt[d+1])/2;if(m===0)ae=Wt[0];else for(d=0,P=0;d<Yt-1;d++)if(V=Wt[d],G=Wt[d+1],E=V.distanceTo(G),P+=E,P>m){X=(P-m)/E,ae=[G.x-X*(G.x-V.x),G.y-X*(G.y-V.y)];break}var En=l.unproject(se(ae));return ye([En.lat+ve.lat,En.lng+ve.lng])}var zn={__proto__:null,simplify:Ht,pointToSegmentDistance:Jo,closestPointOnSegment:za,clipSegment:A,_getEdgeIntersection:q,_getBitCode:Y,_sqClosestPointOnSegment:He,isFlat:ut,_flat:ft,polylineCenter:Rt},hr={project:function(i){return new ee(i.lng,i.lat)},unproject:function(i){return new Ie(i.y,i.x)},bounds:new B([-180,-90],[180,90])},Yn={R:6378137,R_MINOR:6356752314245179e-9,bounds:new B([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(i){var l=Math.PI/180,d=this.R,m=i.lat*l,E=this.R_MINOR/d,P=Math.sqrt(1-E*E),V=P*Math.sin(m),G=Math.tan(Math.PI/4-m/2)/Math.pow((1-V)/(1+V),P/2);return m=-d*Math.log(Math.max(G,1e-10)),new ee(i.lng*l*d,m)},unproject:function(i){for(var l=180/Math.PI,d=this.R,m=this.R_MINOR/d,E=Math.sqrt(1-m*m),P=Math.exp(-i.y/d),V=Math.PI/2-2*Math.atan(P),G=0,X=.1,ae;G<15&&Math.abs(X)>1e-7;G++)ae=E*Math.sin(V),ae=Math.pow((1-ae)/(1+ae),E/2),X=Math.PI/2-2*Math.atan(P*ae)-V,V+=X;return new Ie(V*l,i.x*l/d)}},Mr={__proto__:null,LonLat:hr,Mercator:Yn,SphericalMercator:dt},Gs=a({},re,{code:"EPSG:3395",projection:Yn,transformation:(function(){var i=.5/(Math.PI*Yn.R);return jt(i,.5,-i,.5)})()}),Ks=a({},re,{code:"EPSG:4326",projection:hr,transformation:jt(1/180,1,-1/180,.5)}),id=a({},Xe,{projection:hr,transformation:jt(1,0,-1,0),scale:function(i){return Math.pow(2,i)},zoom:function(i){return Math.log(i)/Math.LN2},distance:function(i,l){var d=l.lng-i.lng,m=l.lat-i.lat;return Math.sqrt(d*d+m*m)},infinite:!0});Xe.Earth=re,Xe.EPSG3395=Gs,Xe.EPSG3857=Rn,Xe.EPSG900913=di,Xe.EPSG4326=Ks,Xe.Simple=id;var dr=Ve.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(i){return i.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(i){return i&&i.removeLayer(this),this},getPane:function(i){return this._map.getPane(i?this.options[i]||i:this.options.pane)},addInteractiveTarget:function(i){return this._map._targets[x(i)]=this,this},removeInteractiveTarget:function(i){return delete this._map._targets[x(i)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(i){var l=i.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var d=this.getEvents();l.on(d,this),this.once("remove",function(){l.off(d,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});nt.include({addLayer:function(i){if(!i._layerAdd)throw new Error("The provided object is not a Layer.");var l=x(i);return this._layers[l]?this:(this._layers[l]=i,i._mapToAdd=this,i.beforeAdd&&i.beforeAdd(this),this.whenReady(i._layerAdd,i),this)},removeLayer:function(i){var l=x(i);return this._layers[l]?(this._loaded&&i.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:i}),i.fire("remove")),i._map=i._mapToAdd=null,this):this},hasLayer:function(i){return x(i)in this._layers},eachLayer:function(i,l){for(var d in this._layers)i.call(l,this._layers[d]);return this},_addLayers:function(i){i=i?xe(i)?i:[i]:[];for(var l=0,d=i.length;l<d;l++)this.addLayer(i[l])},_addZoomLimit:function(i){(!isNaN(i.options.maxZoom)||!isNaN(i.options.minZoom))&&(this._zoomBoundLayers[x(i)]=i,this._updateZoomLevels())},_removeZoomLimit:function(i){var l=x(i);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var i=1/0,l=-1/0,d=this._getZoomSpan();for(var m in this._zoomBoundLayers){var E=this._zoomBoundLayers[m].options;i=E.minZoom===void 0?i:Math.min(i,E.minZoom),l=E.maxZoom===void 0?l:Math.max(l,E.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=i===1/0?void 0:i,d!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ai=dr.extend({initialize:function(i,l){Z(this,l),this._layers={};var d,m;if(i)for(d=0,m=i.length;d<m;d++)this.addLayer(i[d])},addLayer:function(i){var l=this.getLayerId(i);return this._layers[l]=i,this._map&&this._map.addLayer(i),this},removeLayer:function(i){var l=i in this._layers?i:this.getLayerId(i);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(i){var l=typeof i=="number"?i:this.getLayerId(i);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(i){var l=Array.prototype.slice.call(arguments,1),d,m;for(d in this._layers)m=this._layers[d],m[i]&&m[i].apply(m,l);return this},onAdd:function(i){this.eachLayer(i.addLayer,i)},onRemove:function(i){this.eachLayer(i.removeLayer,i)},eachLayer:function(i,l){for(var d in this._layers)i.call(l,this._layers[d]);return this},getLayer:function(i){return this._layers[i]},getLayers:function(){var i=[];return this.eachLayer(i.push,i),i},setZIndex:function(i){return this.invoke("setZIndex",i)},getLayerId:function(i){return x(i)}}),Xo=function(i,l){return new Ai(i,l)},ei=Ai.extend({addLayer:function(i){return this.hasLayer(i)?this:(i.addEventParent(this),Ai.prototype.addLayer.call(this,i),this.fire("layeradd",{layer:i}))},removeLayer:function(i){return this.hasLayer(i)?(i in this._layers&&(i=this._layers[i]),i.removeEventParent(this),Ai.prototype.removeLayer.call(this,i),this.fire("layerremove",{layer:i})):this},setStyle:function(i){return this.invoke("setStyle",i)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var i=new Oe;for(var l in this._layers){var d=this._layers[l];i.extend(d.getBounds?d.getBounds():d.getLatLng())}return i}}),Xu=function(i,l){return new ei(i,l)},cs=be.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(i){Z(this,i)},createIcon:function(i){return this._createIcon("icon",i)},createShadow:function(i){return this._createIcon("shadow",i)},_createIcon:function(i,l){var d=this._getIconUrl(i);if(!d){if(i==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var m=this._createImg(d,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(m,i),(this.options.crossOrigin||this.options.crossOrigin==="")&&(m.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),m},_setIconStyles:function(i,l){var d=this.options,m=d[l+"Size"];typeof m=="number"&&(m=[m,m]);var E=se(m),P=se(l==="shadow"&&d.shadowAnchor||d.iconAnchor||E&&E.divideBy(2,!0));i.className="leaflet-marker-"+l+" "+(d.className||""),P&&(i.style.marginLeft=-P.x+"px",i.style.marginTop=-P.y+"px"),E&&(i.style.width=E.x+"px",i.style.height=E.y+"px")},_createImg:function(i,l){return l=l||document.createElement("img"),l.src=i,l},_getIconUrl:function(i){return ke.retina&&this.options[i+"RetinaUrl"]||this.options[i+"Url"]}});function ec(i){return new cs(i)}var Zs=cs.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(i){return typeof Zs.imagePath!="string"&&(Zs.imagePath=this._detectIconPath()),(this.options.imagePath||Zs.imagePath)+cs.prototype._getIconUrl.call(this,i)},_stripUrl:function(i){var l=function(d,m,E){var P=m.exec(d);return P&&P[E]};return i=l(i,/^url\((['"])?(.+)\1\)$/,2),i&&l(i,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var i=Ze("div","leaflet-default-icon-path",document.body),l=Ti(i,"background-image")||Ti(i,"backgroundImage");if(document.body.removeChild(i),l=this._stripUrl(l),l)return l;var d=document.querySelector('link[href$="leaflet.css"]');return d?d.href.substring(0,d.href.length-11-1):""}}),Bl=cn.extend({initialize:function(i){this._marker=i},addHooks:function(){var i=this._marker._icon;this._draggable||(this._draggable=new xn(i,i,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),we(i,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&mt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(i){var l=this._marker,d=l._map,m=this._marker.options.autoPanSpeed,E=this._marker.options.autoPanPadding,P=ur(l._icon),V=d.getPixelBounds(),G=d.getPixelOrigin(),X=ne(V.min._subtract(G).add(E),V.max._subtract(G).subtract(E));if(!X.contains(P)){var ae=se((Math.max(X.max.x,P.x)-X.max.x)/(V.max.x-X.max.x)-(Math.min(X.min.x,P.x)-X.min.x)/(V.min.x-X.min.x),(Math.max(X.max.y,P.y)-X.max.y)/(V.max.y-X.max.y)-(Math.min(X.min.y,P.y)-X.min.y)/(V.min.y-X.min.y)).multiplyBy(m);d.panBy(ae,{animate:!1}),this._draggable._newPos._add(ae),this._draggable._startPos._add(ae),At(l._icon,this._draggable._newPos),this._onDrag(i),this._panRequest=R(this._adjustPan.bind(this,i))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(i){this._marker.options.autoPan&&(O(this._panRequest),this._panRequest=R(this._adjustPan.bind(this,i)))},_onDrag:function(i){var l=this._marker,d=l._shadow,m=ur(l._icon),E=l._map.layerPointToLatLng(m);d&&At(d,m),l._latlng=E,i.latlng=E,i.oldLatLng=this._oldLatLng,l.fire("move",i).fire("drag",i)},_onDragEnd:function(i){O(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",i)}}),ti=dr.extend({options:{icon:new Zs,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(i,l){Z(this,l),this._latlng=ye(i)},onAdd:function(i){this._zoomAnimated=this._zoomAnimated&&i.options.markerZoomAnimation,this._zoomAnimated&&i.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(i){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&i.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(i){var l=this._latlng;return this._latlng=ye(i),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(i){return this.options.zIndexOffset=i,this.update()},getIcon:function(){return this.options.icon},setIcon:function(i){return this.options.icon=i,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var i=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(i)}return this},_initIcon:function(){var i=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),d=i.icon.createIcon(this._icon),m=!1;d!==this._icon&&(this._icon&&this._removeIcon(),m=!0,i.title&&(d.title=i.title),d.tagName==="IMG"&&(d.alt=i.alt||"")),we(d,l),i.keyboard&&(d.tabIndex="0",d.setAttribute("role","button")),this._icon=d,i.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ze(d,"focus",this._panOnFocus,this);var E=i.icon.createShadow(this._shadow),P=!1;E!==this._shadow&&(this._removeShadow(),P=!0),E&&(we(E,l),E.alt=""),this._shadow=E,i.opacity<1&&this._updateOpacity(),m&&this.getPane().appendChild(this._icon),this._initInteraction(),E&&P&&this.getPane(i.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&gt(this._icon,"focus",this._panOnFocus,this),lt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&lt(this._shadow),this._shadow=null},_setPos:function(i){this._icon&&At(this._icon,i),this._shadow&&At(this._shadow,i),this._zIndex=i.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(i){this._icon&&(this._icon.style.zIndex=this._zIndex+i)},_animateZoom:function(i){var l=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(we(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Bl)){var i=this.options.draggable;this.dragging&&(i=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Bl(this),i&&this.dragging.enable()}},setOpacity:function(i){return this.options.opacity=i,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var i=this.options.opacity;this._icon&&tn(this._icon,i),this._shadow&&tn(this._shadow,i)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var i=this._map;if(i){var l=this.options.icon.options,d=l.iconSize?se(l.iconSize):se(0,0),m=l.iconAnchor?se(l.iconAnchor):se(0,0);i.panInside(this._latlng,{paddingTopLeft:m,paddingBottomRight:d.subtract(m)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function sd(i,l){return new ti(i,l)}var bi=dr.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(i){this._renderer=i.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(i){return Z(this,i),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&i&&Object.prototype.hasOwnProperty.call(i,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Ua=bi.extend({options:{fill:!0,radius:10},initialize:function(i,l){Z(this,l),this._latlng=ye(i),this._radius=this.options.radius},setLatLng:function(i){var l=this._latlng;return this._latlng=ye(i),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(i){return this.options.radius=this._radius=i,this.redraw()},getRadius:function(){return this._radius},setStyle:function(i){var l=i&&i.radius||this._radius;return bi.prototype.setStyle.call(this,i),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var i=this._radius,l=this._radiusY||i,d=this._clickTolerance(),m=[i+d,l+d];this._pxBounds=new B(this._point.subtract(m),this._point.add(m))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(i){return i.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function tc(i,l){return new Ua(i,l)}var Ba=Ua.extend({initialize:function(i,l,d){if(typeof l=="number"&&(l=a({},d,{radius:l})),Z(this,l),this._latlng=ye(i),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(i){return this._mRadius=i,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var i=[this._radius,this._radiusY||this._radius];return new Oe(this._map.layerPointToLatLng(this._point.subtract(i)),this._map.layerPointToLatLng(this._point.add(i)))},setStyle:bi.prototype.setStyle,_project:function(){var i=this._latlng.lng,l=this._latlng.lat,d=this._map,m=d.options.crs;if(m.distance===re.distance){var E=Math.PI/180,P=this._mRadius/re.R/E,V=d.project([l+P,i]),G=d.project([l-P,i]),X=V.add(G).divideBy(2),ae=d.unproject(X).lat,ve=Math.acos((Math.cos(P*E)-Math.sin(l*E)*Math.sin(ae*E))/(Math.cos(l*E)*Math.cos(ae*E)))/E;(isNaN(ve)||ve===0)&&(ve=P/Math.cos(Math.PI/180*l)),this._point=X.subtract(d.getPixelOrigin()),this._radius=isNaN(ve)?0:X.x-d.project([ae,i-ve]).x,this._radiusY=X.y-V.y}else{var Fe=m.unproject(m.project(this._latlng).subtract([this._mRadius,0]));this._point=d.latLngToLayerPoint(this._latlng),this._radius=this._point.x-d.latLngToLayerPoint(Fe).x}this._updateBounds()}});function ea(i,l,d){return new Ba(i,l,d)}var Un=bi.extend({options:{smoothFactor:1,noClip:!1},initialize:function(i,l){Z(this,l),this._setLatLngs(i)},getLatLngs:function(){return this._latlngs},setLatLngs:function(i){return this._setLatLngs(i),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(i){for(var l=1/0,d=null,m=He,E,P,V=0,G=this._parts.length;V<G;V++)for(var X=this._parts[V],ae=1,ve=X.length;ae<ve;ae++){E=X[ae-1],P=X[ae];var Fe=m(i,E,P,!0);Fe<l&&(l=Fe,d=m(i,E,P))}return d&&(d.distance=Math.sqrt(l)),d},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Rt(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(i,l){return l=l||this._defaultShape(),i=ye(i),l.push(i),this._bounds.extend(i),this.redraw()},_setLatLngs:function(i){this._bounds=new Oe,this._latlngs=this._convertLatLngs(i)},_defaultShape:function(){return ut(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(i){for(var l=[],d=ut(i),m=0,E=i.length;m<E;m++)d?(l[m]=ye(i[m]),this._bounds.extend(l[m])):l[m]=this._convertLatLngs(i[m]);return l},_project:function(){var i=new B;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,i),this._bounds.isValid()&&i.isValid()&&(this._rawPxBounds=i,this._updateBounds())},_updateBounds:function(){var i=this._clickTolerance(),l=new ee(i,i);this._rawPxBounds&&(this._pxBounds=new B([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(i,l,d){var m=i[0]instanceof Ie,E=i.length,P,V;if(m){for(V=[],P=0;P<E;P++)V[P]=this._map.latLngToLayerPoint(i[P]),d.extend(V[P]);l.push(V)}else for(P=0;P<E;P++)this._projectLatlngs(i[P],l,d)},_clipPoints:function(){var i=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,d,m,E,P,V,G,X;for(d=0,E=0,P=this._rings.length;d<P;d++)for(X=this._rings[d],m=0,V=X.length;m<V-1;m++)G=A(X[m],X[m+1],i,m,!0),G&&(l[E]=l[E]||[],l[E].push(G[0]),(G[1]!==X[m+1]||m===V-2)&&(l[E].push(G[1]),E++))}},_simplifyPoints:function(){for(var i=this._parts,l=this.options.smoothFactor,d=0,m=i.length;d<m;d++)i[d]=Ht(i[d],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(i,l){var d,m,E,P,V,G,X=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(d=0,P=this._parts.length;d<P;d++)for(G=this._parts[d],m=0,V=G.length,E=V-1;m<V;E=m++)if(!(!l&&m===0)&&Jo(i,G[E],G[m])<=X)return!0;return!1}});function od(i,l){return new Un(i,l)}Un._flat=ft;var ni=Un.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Yo(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(i){var l=Un.prototype._convertLatLngs.call(this,i),d=l.length;return d>=2&&l[0]instanceof Ie&&l[0].equals(l[d-1])&&l.pop(),l},_setLatLngs:function(i){Un.prototype._setLatLngs.call(this,i),ut(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return ut(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var i=this._renderer._bounds,l=this.options.weight,d=new ee(l,l);if(i=new B(i.min.subtract(d),i.max.add(d)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}for(var m=0,E=this._rings.length,P;m<E;m++)P=Ws(this._rings[m],i,!0),P.length&&this._parts.push(P)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(i){var l=!1,d,m,E,P,V,G,X,ae;if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(P=0,X=this._parts.length;P<X;P++)for(d=this._parts[P],V=0,ae=d.length,G=ae-1;V<ae;G=V++)m=d[V],E=d[G],m.y>i.y!=E.y>i.y&&i.x<(E.x-m.x)*(i.y-m.y)/(E.y-m.y)+m.x&&(l=!l);return l||Un.prototype._containsPoint.call(this,i,!0)}});function ad(i,l){return new ni(i,l)}var Or=ei.extend({initialize:function(i,l){Z(this,l),this._layers={},i&&this.addData(i)},addData:function(i){var l=xe(i)?i:i.features,d,m,E;if(l){for(d=0,m=l.length;d<m;d++)E=l[d],(E.geometries||E.geometry||E.features||E.coordinates)&&this.addData(E);return this}var P=this.options;if(P.filter&&!P.filter(i))return this;var V=Qs(i,P);return V?(V.feature=Ga(i),V.defaultOptions=V.options,this.resetStyle(V),P.onEachFeature&&P.onEachFeature(i,V),this.addLayer(V)):this},resetStyle:function(i){return i===void 0?this.eachLayer(this.resetStyle,this):(i.options=a({},i.defaultOptions),this._setLayerStyle(i,this.options.style),this)},setStyle:function(i){return this.eachLayer(function(l){this._setLayerStyle(l,i)},this)},_setLayerStyle:function(i,l){i.setStyle&&(typeof l=="function"&&(l=l(i.feature)),i.setStyle(l))}});function Qs(i,l){var d=i.type==="Feature"?i.geometry:i,m=d?d.coordinates:null,E=[],P=l&&l.pointToLayer,V=l&&l.coordsToLatLng||Wa,G,X,ae,ve;if(!m&&!d)return null;switch(d.type){case"Point":return G=V(m),Ha(P,i,G,l);case"MultiPoint":for(ae=0,ve=m.length;ae<ve;ae++)G=V(m[ae]),E.push(Ha(P,i,G,l));return new ei(E);case"LineString":case"MultiLineString":return X=ta(m,d.type==="LineString"?0:1,V),new Un(X,l);case"Polygon":case"MultiPolygon":return X=ta(m,d.type==="Polygon"?1:2,V),new ni(X,l);case"GeometryCollection":for(ae=0,ve=d.geometries.length;ae<ve;ae++){var Fe=Qs({geometry:d.geometries[ae],type:"Feature",properties:i.properties},l);Fe&&E.push(Fe)}return new ei(E);case"FeatureCollection":for(ae=0,ve=d.features.length;ae<ve;ae++){var et=Qs(d.features[ae],l);et&&E.push(et)}return new ei(E);default:throw new Error("Invalid GeoJSON object.")}}function Ha(i,l,d,m){return i?i(l,d):new ti(d,m&&m.markersInheritOptions&&m)}function Wa(i){return new Ie(i[1],i[0],i[2])}function ta(i,l,d){for(var m=[],E=0,P=i.length,V;E<P;E++)V=l?ta(i[E],l-1,d):(d||Wa)(i[E]),m.push(V);return m}function $a(i,l){return i=ye(i),i.alt!==void 0?[b(i.lng,l),b(i.lat,l),b(i.alt,l)]:[b(i.lng,l),b(i.lat,l)]}function qa(i,l,d,m){for(var E=[],P=0,V=i.length;P<V;P++)E.push(l?qa(i[P],ut(i[P])?0:l-1,d,m):$a(i[P],m));return!l&&d&&E.length>0&&E.push(E[0].slice()),E}function Ys(i,l){return i.feature?a({},i.feature,{geometry:l}):Ga(l)}function Ga(i){return i.type==="Feature"||i.type==="FeatureCollection"?i:{type:"Feature",properties:{},geometry:i}}var Hl={toGeoJSON:function(i){return Ys(this,{type:"Point",coordinates:$a(this.getLatLng(),i)})}};ti.include(Hl),Ba.include(Hl),Ua.include(Hl),Un.include({toGeoJSON:function(i){var l=!ut(this._latlngs),d=qa(this._latlngs,l?1:0,!1,i);return Ys(this,{type:(l?"Multi":"")+"LineString",coordinates:d})}}),ni.include({toGeoJSON:function(i){var l=!ut(this._latlngs),d=l&&!ut(this._latlngs[0]),m=qa(this._latlngs,d?2:l?1:0,!0,i);return l||(m=[m]),Ys(this,{type:(d?"Multi":"")+"Polygon",coordinates:m})}}),Ai.include({toMultiPoint:function(i){var l=[];return this.eachLayer(function(d){l.push(d.toGeoJSON(i).geometry.coordinates)}),Ys(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(i){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(i);var d=l==="GeometryCollection",m=[];return this.eachLayer(function(E){if(E.toGeoJSON){var P=E.toGeoJSON(i);if(d)m.push(P.geometry);else{var V=Ga(P);V.type==="FeatureCollection"?m.push.apply(m,V.features):m.push(V)}}}),d?Ys(this,{geometries:m,type:"GeometryCollection"}):{type:"FeatureCollection",features:m}}});function nc(i,l){return new Or(i,l)}var fr=nc,Ni=dr.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(i,l,d){this._url=i,this._bounds=Ae(l),Z(this,d)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(we(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){lt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(i){return this.options.opacity=i,this._image&&this._updateOpacity(),this},setStyle:function(i){return i.opacity&&this.setOpacity(i.opacity),this},bringToFront:function(){return this._map&&Kn(this._image),this},bringToBack:function(){return this._map&&un(this._image),this},setUrl:function(i){return this._url=i,this._image&&(this._image.src=i),this},setBounds:function(i){return this._bounds=Ae(i),this._map&&this._reset(),this},getEvents:function(){var i={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var i=this._url.tagName==="IMG",l=this._image=i?this._url:Ze("img");if(we(l,"leaflet-image-layer"),this._zoomAnimated&&we(l,"leaflet-zoom-animated"),this.options.className&&we(l,this.options.className),l.onselectstart=C,l.onmousemove=C,l.onload=p(this.fire,this,"load"),l.onerror=p(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),i){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(i){var l=this._map.getZoomScale(i.zoom),d=this._map._latLngBoundsToNewLayerBounds(this._bounds,i.zoom,i.center).min;Mn(this._image,d,l)},_reset:function(){var i=this._image,l=new B(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),d=l.getSize();At(i,l.min),i.style.width=d.x+"px",i.style.height=d.y+"px"},_updateOpacity:function(){tn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var i=this.options.errorOverlayUrl;i&&this._url!==i&&(this._url=i,this._image.src=i)},getCenter:function(){return this._bounds.getCenter()}}),rc=function(i,l,d){return new Ni(i,l,d)},Wl=Ni.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var i=this._url.tagName==="VIDEO",l=this._image=i?this._url:Ze("video");if(we(l,"leaflet-image-layer"),this._zoomAnimated&&we(l,"leaflet-zoom-animated"),this.options.className&&we(l,this.options.className),l.onselectstart=C,l.onmousemove=C,l.onloadeddata=p(this.fire,this,"load"),i){for(var d=l.getElementsByTagName("source"),m=[],E=0;E<d.length;E++)m.push(d[E].src);this._url=d.length>0?m:[l.src];return}xe(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var P=0;P<this._url.length;P++){var V=Ze("source");V.src=this._url[P],l.appendChild(V)}}});function ic(i,l,d){return new Wl(i,l,d)}var $l=Ni.extend({_initImage:function(){var i=this._image=this._url;we(i,"leaflet-image-layer"),this._zoomAnimated&&we(i,"leaflet-zoom-animated"),this.options.className&&we(i,this.options.className),i.onselectstart=C,i.onmousemove=C}});function ql(i,l,d){return new $l(i,l,d)}var jr=dr.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(i,l){i&&(i instanceof Ie||xe(i))?(this._latlng=ye(i),Z(this,l)):(Z(this,i),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(i){return i=arguments.length?i:this._source._map,i.hasLayer(this)||i.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(i){return this._map?this.close():(arguments.length?this._source=i:i=this._source,this._prepareOpen(),this.openOn(i._map)),this},onAdd:function(i){this._zoomAnimated=i._zoomAnimated,this._container||this._initLayout(),i._fadeAnimated&&tn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),i._fadeAnimated&&tn(this._container,1),this.bringToFront(),this.options.interactive&&(we(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(i){i._fadeAnimated?(tn(this._container,0),this._removeTimeout=setTimeout(p(lt,void 0,this._container),200)):lt(this._container),this.options.interactive&&(mt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(i){return this._latlng=ye(i),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(i){return this._content=i,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var i={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Kn(this._container),this},bringToBack:function(){return this._map&&un(this._container),this},_prepareOpen:function(i){var l=this._source;if(!l._map)return!1;if(l instanceof ei){l=null;var d=this._source._layers;for(var m in d)if(d[m]._map){l=d[m];break}if(!l)return!1;this._source=l}if(!i)if(l.getCenter)i=l.getCenter();else if(l.getLatLng)i=l.getLatLng();else if(l.getBounds)i=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(i),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var i=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")i.innerHTML=l;else{for(;i.hasChildNodes();)i.removeChild(i.firstChild);i.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var i=this._map.latLngToLayerPoint(this._latlng),l=se(this.options.offset),d=this._getAnchor();this._zoomAnimated?At(this._container,i.add(d)):l=l.add(i).add(d);var m=this._containerBottom=-l.y,E=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=m+"px",this._container.style.left=E+"px"}},_getAnchor:function(){return[0,0]}});nt.include({_initOverlay:function(i,l,d,m){var E=l;return E instanceof i||(E=new i(m).setContent(l)),d&&E.setLatLng(d),E}}),dr.include({_initOverlay:function(i,l,d,m){var E=d;return E instanceof i?(Z(E,m),E._source=this):(E=l&&!m?l:new i(m,this),E.setContent(d)),E}});var Ka=jr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(i){return i=arguments.length?i:this._source._map,!i.hasLayer(this)&&i._popup&&i._popup.options.autoClose&&i.removeLayer(i._popup),i._popup=this,jr.prototype.openOn.call(this,i)},onAdd:function(i){jr.prototype.onAdd.call(this,i),i.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof bi||this._source.on("preclick",at))},onRemove:function(i){jr.prototype.onRemove.call(this,i),i.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof bi||this._source.off("preclick",at))},getEvents:function(){var i=jr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(i.preclick=this.close),this.options.keepInView&&(i.moveend=this._adjustPan),i},_initLayout:function(){var i="leaflet-popup",l=this._container=Ze("div",i+" "+(this.options.className||"")+" leaflet-zoom-animated"),d=this._wrapper=Ze("div",i+"-content-wrapper",l);if(this._contentNode=Ze("div",i+"-content",d),ss(l),Us(this._contentNode),ze(l,"contextmenu",at),this._tipContainer=Ze("div",i+"-tip-container",l),this._tip=Ze("div",i+"-tip",this._tipContainer),this.options.closeButton){var m=this._closeButton=Ze("a",i+"-close-button",l);m.setAttribute("role","button"),m.setAttribute("aria-label","Close popup"),m.href="#close",m.innerHTML='<span aria-hidden="true">&#215;</span>',ze(m,"click",function(E){xt(E),this.close()},this)}},_updateLayout:function(){var i=this._contentNode,l=i.style;l.width="",l.whiteSpace="nowrap";var d=i.offsetWidth;d=Math.min(d,this.options.maxWidth),d=Math.max(d,this.options.minWidth),l.width=d+1+"px",l.whiteSpace="",l.height="";var m=i.offsetHeight,E=this.options.maxHeight,P="leaflet-popup-scrolled";E&&m>E?(l.height=E+"px",we(i,P)):mt(i,P),this._containerWidth=this._container.offsetWidth},_animateZoom:function(i){var l=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center),d=this._getAnchor();At(this._container,l.add(d))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var i=this._map,l=parseInt(Ti(this._container,"marginBottom"),10)||0,d=this._container.offsetHeight+l,m=this._containerWidth,E=new ee(this._containerLeft,-d-this._containerBottom);E._add(ur(this._container));var P=i.layerPointToContainerPoint(E),V=se(this.options.autoPanPadding),G=se(this.options.autoPanPaddingTopLeft||V),X=se(this.options.autoPanPaddingBottomRight||V),ae=i.getSize(),ve=0,Fe=0;P.x+m+X.x>ae.x&&(ve=P.x+m-ae.x+X.x),P.x-ve-G.x<0&&(ve=P.x-G.x),P.y+d+X.y>ae.y&&(Fe=P.y+d-ae.y+X.y),P.y-Fe-G.y<0&&(Fe=P.y-G.y),(ve||Fe)&&(this.options.keepInView&&(this._autopanning=!0),i.fire("autopanstart").panBy([ve,Fe]))}},_getAnchor:function(){return se(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Js=function(i,l){return new Ka(i,l)};nt.mergeOptions({closePopupOnClick:!0}),nt.include({openPopup:function(i,l,d){return this._initOverlay(Ka,i,l,d).openOn(this),this},closePopup:function(i){return i=arguments.length?i:this._popup,i&&i.close(),this}}),dr.include({bindPopup:function(i,l){return this._popup=this._initOverlay(Ka,this._popup,i,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(i){return this._popup&&(this instanceof ei||(this._popup._source=this),this._popup._prepareOpen(i||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(i){return this._popup&&this._popup.setContent(i),this},getPopup:function(){return this._popup},_openPopup:function(i){if(!(!this._popup||!this._map)){vn(i);var l=i.layer||i.target;if(this._popup._source===l&&!(l instanceof bi)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(i.latlng);return}this._popup._source=l,this.openPopup(i.latlng)}},_movePopup:function(i){this._popup.setLatLng(i.latlng)},_onKeyPress:function(i){i.originalEvent.keyCode===13&&this._openPopup(i)}});var Xs=jr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(i){jr.prototype.onAdd.call(this,i),this.setOpacity(this.options.opacity),i.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(i){jr.prototype.onRemove.call(this,i),i.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var i=jr.prototype.getEvents.call(this);return this.options.permanent||(i.preclick=this.close),i},_initLayout:function(){var i="leaflet-tooltip",l=i+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ze("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+x(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(i){var l,d,m=this._map,E=this._container,P=m.latLngToContainerPoint(m.getCenter()),V=m.layerPointToContainerPoint(i),G=this.options.direction,X=E.offsetWidth,ae=E.offsetHeight,ve=se(this.options.offset),Fe=this._getAnchor();G==="top"?(l=X/2,d=ae):G==="bottom"?(l=X/2,d=0):G==="center"?(l=X/2,d=ae/2):G==="right"?(l=0,d=ae/2):G==="left"?(l=X,d=ae/2):V.x<P.x?(G="right",l=0,d=ae/2):(G="left",l=X+(ve.x+Fe.x)*2,d=ae/2),i=i.subtract(se(l,d,!0)).add(ve).add(Fe),mt(E,"leaflet-tooltip-right"),mt(E,"leaflet-tooltip-left"),mt(E,"leaflet-tooltip-top"),mt(E,"leaflet-tooltip-bottom"),we(E,"leaflet-tooltip-"+G),At(E,i)},_updatePosition:function(){var i=this._map.latLngToLayerPoint(this._latlng);this._setPosition(i)},setOpacity:function(i){this.options.opacity=i,this._container&&tn(this._container,i)},_animateZoom:function(i){var l=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center);this._setPosition(l)},_getAnchor:function(){return se(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),na=function(i,l){return new Xs(i,l)};nt.include({openTooltip:function(i,l,d){return this._initOverlay(Xs,i,l,d).openOn(this),this},closeTooltip:function(i){return i.close(),this}}),dr.include({bindTooltip:function(i,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Xs,this._tooltip,i,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(i){if(!(!i&&this._tooltipHandlersAdded)){var l=i?"off":"on",d={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?d.add=this._openTooltip:(d.mouseover=this._openTooltip,d.mouseout=this.closeTooltip,d.click=this._openTooltip,this._map?this._addFocusListeners():d.add=this._addFocusListeners),this._tooltip.options.sticky&&(d.mousemove=this._moveTooltip),this[l](d),this._tooltipHandlersAdded=!i}},openTooltip:function(i){return this._tooltip&&(this instanceof ei||(this._tooltip._source=this),this._tooltip._prepareOpen(i)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(i){return this._tooltip&&this._tooltip.setContent(i),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(i){var l=typeof i.getElement=="function"&&i.getElement();l&&(ze(l,"focus",function(){this._tooltip._source=i,this.openTooltip()},this),ze(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(i){var l=typeof i.getElement=="function"&&i.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(i){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(i)});return}this._tooltip._source=i.layer||i.target,this.openTooltip(this._tooltip.options.sticky?i.latlng:void 0)}},_moveTooltip:function(i){var l=i.latlng,d,m;this._tooltip.options.sticky&&i.originalEvent&&(d=this._map.mouseEventToContainerPoint(i.originalEvent),m=this._map.containerPointToLayerPoint(d),l=this._map.layerPointToLatLng(m)),this._tooltip.setLatLng(l)}});var Za=cs.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(i){var l=i&&i.tagName==="DIV"?i:document.createElement("div"),d=this.options;if(d.html instanceof Element?(ln(l),l.appendChild(d.html)):l.innerHTML=d.html!==!1?d.html:"",d.bgPos){var m=se(d.bgPos);l.style.backgroundPosition=-m.x+"px "+-m.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function sc(i){return new Za(i)}cs.Default=Zs;var Ri=dr.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ke.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(i){Z(this,i)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(i){i._addZoomLimit(this)},onRemove:function(i){this._removeAllTiles(),lt(this._container),i._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Kn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(un(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(i){return this.options.opacity=i,this._updateOpacity(),this},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var i=this._clampZoom(this._map.getZoom());i!==this._tileZoom&&(this._tileZoom=i,this._updateLevels()),this._update()}return this},getEvents:function(){var i={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=T(this._onMoveEnd,this.options.updateInterval,this)),i.move=this._onMove),this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},createTile:function(){return document.createElement("div")},getTileSize:function(){var i=this.options.tileSize;return i instanceof ee?i:new ee(i,i)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(i){for(var l=this.getPane().children,d=-i(-1/0,1/0),m=0,E=l.length,P;m<E;m++)P=l[m].style.zIndex,l[m]!==this._container&&P&&(d=i(d,+P));isFinite(d)&&(this.options.zIndex=d+i(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ke.ielt9){tn(this._container,this.options.opacity);var i=+new Date,l=!1,d=!1;for(var m in this._tiles){var E=this._tiles[m];if(!(!E.current||!E.loaded)){var P=Math.min(1,(i-E.loaded)/200);tn(E.el,P),P<1?l=!0:(E.active?d=!0:this._onOpaqueTile(E),E.active=!0)}}d&&!this._noPrune&&this._pruneTiles(),l&&(O(this._fadeFrame),this._fadeFrame=R(this._updateOpacity,this))}},_onOpaqueTile:C,_initContainer:function(){this._container||(this._container=Ze("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var i=this._tileZoom,l=this.options.maxZoom;if(i!==void 0){for(var d in this._levels)d=Number(d),this._levels[d].el.children.length||d===i?(this._levels[d].el.style.zIndex=l-Math.abs(i-d),this._onUpdateLevel(d)):(lt(this._levels[d].el),this._removeTilesAtZoom(d),this._onRemoveLevel(d),delete this._levels[d]);var m=this._levels[i],E=this._map;return m||(m=this._levels[i]={},m.el=Ze("div","leaflet-tile-container leaflet-zoom-animated",this._container),m.el.style.zIndex=l,m.origin=E.project(E.unproject(E.getPixelOrigin()),i).round(),m.zoom=i,this._setZoomTransform(m,E.getCenter(),E.getZoom()),C(m.el.offsetWidth),this._onCreateLevel(m)),this._level=m,m}},_onUpdateLevel:C,_onRemoveLevel:C,_onCreateLevel:C,_pruneTiles:function(){if(this._map){var i,l,d=this._map.getZoom();if(d>this.options.maxZoom||d<this.options.minZoom){this._removeAllTiles();return}for(i in this._tiles)l=this._tiles[i],l.retain=l.current;for(i in this._tiles)if(l=this._tiles[i],l.current&&!l.active){var m=l.coords;this._retainParent(m.x,m.y,m.z,m.z-5)||this._retainChildren(m.x,m.y,m.z,m.z+2)}for(i in this._tiles)this._tiles[i].retain||this._removeTile(i)}},_removeTilesAtZoom:function(i){for(var l in this._tiles)this._tiles[l].coords.z===i&&this._removeTile(l)},_removeAllTiles:function(){for(var i in this._tiles)this._removeTile(i)},_invalidateAll:function(){for(var i in this._levels)lt(this._levels[i].el),this._onRemoveLevel(Number(i)),delete this._levels[i];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(i,l,d,m){var E=Math.floor(i/2),P=Math.floor(l/2),V=d-1,G=new ee(+E,+P);G.z=+V;var X=this._tileCoordsToKey(G),ae=this._tiles[X];return ae&&ae.active?(ae.retain=!0,!0):(ae&&ae.loaded&&(ae.retain=!0),V>m?this._retainParent(E,P,V,m):!1)},_retainChildren:function(i,l,d,m){for(var E=2*i;E<2*i+2;E++)for(var P=2*l;P<2*l+2;P++){var V=new ee(E,P);V.z=d+1;var G=this._tileCoordsToKey(V),X=this._tiles[G];if(X&&X.active){X.retain=!0;continue}else X&&X.loaded&&(X.retain=!0);d+1<m&&this._retainChildren(E,P,d+1,m)}},_resetView:function(i){var l=i&&(i.pinch||i.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(i){this._setView(i.center,i.zoom,!0,i.noUpdate)},_clampZoom:function(i){var l=this.options;return l.minNativeZoom!==void 0&&i<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<i?l.maxNativeZoom:i},_setView:function(i,l,d,m){var E=Math.round(l);this.options.maxZoom!==void 0&&E>this.options.maxZoom||this.options.minZoom!==void 0&&E<this.options.minZoom?E=void 0:E=this._clampZoom(E);var P=this.options.updateWhenZooming&&E!==this._tileZoom;(!m||P)&&(this._tileZoom=E,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),E!==void 0&&this._update(i),d||this._pruneTiles(),this._noPrune=!!d),this._setZoomTransforms(i,l)},_setZoomTransforms:function(i,l){for(var d in this._levels)this._setZoomTransform(this._levels[d],i,l)},_setZoomTransform:function(i,l,d){var m=this._map.getZoomScale(d,i.zoom),E=i.origin.multiplyBy(m).subtract(this._map._getNewPixelOrigin(l,d)).round();ke.any3d?Mn(i.el,E,m):At(i.el,E)},_resetGrid:function(){var i=this._map,l=i.options.crs,d=this._tileSize=this.getTileSize(),m=this._tileZoom,E=this._map.getPixelWorldBounds(this._tileZoom);E&&(this._globalTileRange=this._pxBoundsToTileRange(E)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(i.project([0,l.wrapLng[0]],m).x/d.x),Math.ceil(i.project([0,l.wrapLng[1]],m).x/d.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(i.project([l.wrapLat[0],0],m).y/d.x),Math.ceil(i.project([l.wrapLat[1],0],m).y/d.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(i){var l=this._map,d=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),m=l.getZoomScale(d,this._tileZoom),E=l.project(i,this._tileZoom).floor(),P=l.getSize().divideBy(m*2);return new B(E.subtract(P),E.add(P))},_update:function(i){var l=this._map;if(l){var d=this._clampZoom(l.getZoom());if(i===void 0&&(i=l.getCenter()),this._tileZoom!==void 0){var m=this._getTiledPixelBounds(i),E=this._pxBoundsToTileRange(m),P=E.getCenter(),V=[],G=this.options.keepBuffer,X=new B(E.getBottomLeft().subtract([G,-G]),E.getTopRight().add([G,-G]));if(!(isFinite(E.min.x)&&isFinite(E.min.y)&&isFinite(E.max.x)&&isFinite(E.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var ae in this._tiles){var ve=this._tiles[ae].coords;(ve.z!==this._tileZoom||!X.contains(new ee(ve.x,ve.y)))&&(this._tiles[ae].current=!1)}if(Math.abs(d-this._tileZoom)>1){this._setView(i,d);return}for(var Fe=E.min.y;Fe<=E.max.y;Fe++)for(var et=E.min.x;et<=E.max.x;et++){var Yt=new ee(et,Fe);if(Yt.z=this._tileZoom,!!this._isValidTile(Yt)){var Wt=this._tiles[this._tileCoordsToKey(Yt)];Wt?Wt.current=!0:V.push(Yt)}}if(V.sort(function(En,io){return En.distanceTo(P)-io.distanceTo(P)}),V.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Bn=document.createDocumentFragment();for(et=0;et<V.length;et++)this._addTile(V[et],Bn);this._level.el.appendChild(Bn)}}}},_isValidTile:function(i){var l=this._map.options.crs;if(!l.infinite){var d=this._globalTileRange;if(!l.wrapLng&&(i.x<d.min.x||i.x>d.max.x)||!l.wrapLat&&(i.y<d.min.y||i.y>d.max.y))return!1}if(!this.options.bounds)return!0;var m=this._tileCoordsToBounds(i);return Ae(this.options.bounds).overlaps(m)},_keyToBounds:function(i){return this._tileCoordsToBounds(this._keyToTileCoords(i))},_tileCoordsToNwSe:function(i){var l=this._map,d=this.getTileSize(),m=i.scaleBy(d),E=m.add(d),P=l.unproject(m,i.z),V=l.unproject(E,i.z);return[P,V]},_tileCoordsToBounds:function(i){var l=this._tileCoordsToNwSe(i),d=new Oe(l[0],l[1]);return this.options.noWrap||(d=this._map.wrapLatLngBounds(d)),d},_tileCoordsToKey:function(i){return i.x+":"+i.y+":"+i.z},_keyToTileCoords:function(i){var l=i.split(":"),d=new ee(+l[0],+l[1]);return d.z=+l[2],d},_removeTile:function(i){var l=this._tiles[i];l&&(lt(l.el),delete this._tiles[i],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(i)}))},_initTile:function(i){we(i,"leaflet-tile");var l=this.getTileSize();i.style.width=l.x+"px",i.style.height=l.y+"px",i.onselectstart=C,i.onmousemove=C,ke.ielt9&&this.options.opacity<1&&tn(i,this.options.opacity)},_addTile:function(i,l){var d=this._getTilePos(i),m=this._tileCoordsToKey(i),E=this.createTile(this._wrapCoords(i),p(this._tileReady,this,i));this._initTile(E),this.createTile.length<2&&R(p(this._tileReady,this,i,null,E)),At(E,d),this._tiles[m]={el:E,coords:i,current:!0},l.appendChild(E),this.fire("tileloadstart",{tile:E,coords:i})},_tileReady:function(i,l,d){l&&this.fire("tileerror",{error:l,tile:d,coords:i});var m=this._tileCoordsToKey(i);d=this._tiles[m],d&&(d.loaded=+new Date,this._map._fadeAnimated?(tn(d.el,0),O(this._fadeFrame),this._fadeFrame=R(this._updateOpacity,this)):(d.active=!0,this._pruneTiles()),l||(we(d.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:d.el,coords:i})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ke.ielt9||!this._map._fadeAnimated?R(this._pruneTiles,this):setTimeout(p(this._pruneTiles,this),250)))},_getTilePos:function(i){return i.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(i){var l=new ee(this._wrapX?k(i.x,this._wrapX):i.x,this._wrapY?k(i.y,this._wrapY):i.y);return l.z=i.z,l},_pxBoundsToTileRange:function(i){var l=this.getTileSize();return new B(i.min.unscaleBy(l).floor(),i.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var i in this._tiles)if(!this._tiles[i].loaded)return!1;return!0}});function eo(i){return new Ri(i)}var Li=Ri.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(i,l){this._url=i,l=Z(this,l),l.detectRetina&&ke.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(i,l){return this._url===i&&l===void 0&&(l=!0),this._url=i,l||this.redraw(),this},createTile:function(i,l){var d=document.createElement("img");return ze(d,"load",p(this._tileOnLoad,this,l,d)),ze(d,"error",p(this._tileOnError,this,l,d)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(d.referrerPolicy=this.options.referrerPolicy),d.alt="",d.src=this.getTileUrl(i),d},getTileUrl:function(i){var l={r:ke.retina?"@2x":"",s:this._getSubdomain(i),x:i.x,y:i.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var d=this._globalTileRange.max.y-i.y;this.options.tms&&(l.y=d),l["-y"]=d}return me(this._url,a(l,this.options))},_tileOnLoad:function(i,l){ke.ielt9?setTimeout(p(i,this,null,l),0):i(null,l)},_tileOnError:function(i,l,d){var m=this.options.errorTileUrl;m&&l.getAttribute("src")!==m&&(l.src=m),i(d,l)},_onTileRemove:function(i){i.tile.onload=null},_getZoomForUrl:function(){var i=this._tileZoom,l=this.options.maxZoom,d=this.options.zoomReverse,m=this.options.zoomOffset;return d&&(i=l-i),i+m},_getSubdomain:function(i){var l=Math.abs(i.x+i.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var i,l;for(i in this._tiles)if(this._tiles[i].coords.z!==this._tileZoom&&(l=this._tiles[i].el,l.onload=C,l.onerror=C,!l.complete)){l.src=Te;var d=this._tiles[i].coords;lt(l),delete this._tiles[i],this.fire("tileabort",{tile:l,coords:d})}},_removeTile:function(i){var l=this._tiles[i];if(l)return l.el.setAttribute("src",Te),Ri.prototype._removeTile.call(this,i)},_tileReady:function(i,l,d){if(!(!this._map||d&&d.getAttribute("src")===Te))return Ri.prototype._tileReady.call(this,i,l,d)}});function Gl(i,l){return new Li(i,l)}var ra=Li.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(i,l){this._url=i;var d=a({},this.defaultWmsParams);for(var m in l)m in this.options||(d[m]=l[m]);l=Z(this,l);var E=l.detectRetina&&ke.retina?2:1,P=this.getTileSize();d.width=P.x*E,d.height=P.y*E,this.wmsParams=d},onAdd:function(i){this._crs=this.options.crs||i.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,Li.prototype.onAdd.call(this,i)},getTileUrl:function(i){var l=this._tileCoordsToNwSe(i),d=this._crs,m=ne(d.project(l[0]),d.project(l[1])),E=m.min,P=m.max,V=(this._wmsVersion>=1.3&&this._crs===Ks?[E.y,E.x,P.y,P.x]:[E.x,E.y,P.x,P.y]).join(","),G=Li.prototype.getTileUrl.call(this,i);return G+J(this.wmsParams,G,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+V},setParams:function(i,l){return a(this.wmsParams,i),l||this.redraw(),this}});function oc(i,l){return new ra(i,l)}Li.WMS=ra,Gl.wms=oc;var Vr=dr.extend({options:{padding:.1},initialize:function(i){Z(this,i),x(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),we(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var i={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(i.zoomanim=this._onAnimZoom),i},_onAnimZoom:function(i){this._updateTransform(i.center,i.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(i,l){var d=this._map.getZoomScale(l,this._zoom),m=this._map.getSize().multiplyBy(.5+this.options.padding),E=this._map.project(this._center,l),P=m.multiplyBy(-d).add(E).subtract(this._map._getNewPixelOrigin(i,l));ke.any3d?Mn(this._container,P,d):At(this._container,P)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var i in this._layers)this._layers[i]._reset()},_onZoomEnd:function(){for(var i in this._layers)this._layers[i]._project()},_updatePaths:function(){for(var i in this._layers)this._layers[i]._update()},_update:function(){var i=this.options.padding,l=this._map.getSize(),d=this._map.containerPointToLayerPoint(l.multiplyBy(-i)).round();this._bounds=new B(d,d.add(l.multiplyBy(1+i*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Kl=Vr.extend({options:{tolerance:0},getEvents:function(){var i=Vr.prototype.getEvents.call(this);return i.viewprereset=this._onViewPreReset,i},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Vr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var i=this._container=document.createElement("canvas");ze(i,"mousemove",this._onMouseMove,this),ze(i,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ze(i,"mouseout",this._handleMouseOut,this),i._leaflet_disable_events=!0,this._ctx=i.getContext("2d")},_destroyContainer:function(){O(this._redrawRequest),delete this._ctx,lt(this._container),gt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var i;this._redrawBounds=null;for(var l in this._layers)i=this._layers[l],i._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Vr.prototype._update.call(this);var i=this._bounds,l=this._container,d=i.getSize(),m=ke.retina?2:1;At(l,i.min),l.width=m*d.x,l.height=m*d.y,l.style.width=d.x+"px",l.style.height=d.y+"px",ke.retina&&this._ctx.scale(2,2),this._ctx.translate(-i.min.x,-i.min.y),this.fire("update")}},_reset:function(){Vr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(i){this._updateDashArray(i),this._layers[x(i)]=i;var l=i._order={layer:i,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(i){this._requestRedraw(i)},_removePath:function(i){var l=i._order,d=l.next,m=l.prev;d?d.prev=m:this._drawLast=m,m?m.next=d:this._drawFirst=d,delete i._order,delete this._layers[x(i)],this._requestRedraw(i)},_updatePath:function(i){this._extendRedrawBounds(i),i._project(),i._update(),this._requestRedraw(i)},_updateStyle:function(i){this._updateDashArray(i),this._requestRedraw(i)},_updateDashArray:function(i){if(typeof i.options.dashArray=="string"){var l=i.options.dashArray.split(/[, ]+/),d=[],m,E;for(E=0;E<l.length;E++){if(m=Number(l[E]),isNaN(m))return;d.push(m)}i.options._dashArray=d}else i.options._dashArray=i.options.dashArray},_requestRedraw:function(i){this._map&&(this._extendRedrawBounds(i),this._redrawRequest=this._redrawRequest||R(this._redraw,this))},_extendRedrawBounds:function(i){if(i._pxBounds){var l=(i.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new B,this._redrawBounds.extend(i._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(i._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var i=this._redrawBounds;if(i){var l=i.getSize();this._ctx.clearRect(i.min.x,i.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var i,l=this._redrawBounds;if(this._ctx.save(),l){var d=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,d.x,d.y),this._ctx.clip()}this._drawing=!0;for(var m=this._drawFirst;m;m=m.next)i=m.layer,(!l||i._pxBounds&&i._pxBounds.intersects(l))&&i._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(i,l){if(this._drawing){var d,m,E,P,V=i._parts,G=V.length,X=this._ctx;if(G){for(X.beginPath(),d=0;d<G;d++){for(m=0,E=V[d].length;m<E;m++)P=V[d][m],X[m?"lineTo":"moveTo"](P.x,P.y);l&&X.closePath()}this._fillStroke(X,i)}}},_updateCircle:function(i){if(!(!this._drawing||i._empty())){var l=i._point,d=this._ctx,m=Math.max(Math.round(i._radius),1),E=(Math.max(Math.round(i._radiusY),1)||m)/m;E!==1&&(d.save(),d.scale(1,E)),d.beginPath(),d.arc(l.x,l.y/E,m,0,Math.PI*2,!1),E!==1&&d.restore(),this._fillStroke(d,i)}},_fillStroke:function(i,l){var d=l.options;d.fill&&(i.globalAlpha=d.fillOpacity,i.fillStyle=d.fillColor||d.color,i.fill(d.fillRule||"evenodd")),d.stroke&&d.weight!==0&&(i.setLineDash&&i.setLineDash(l.options&&l.options._dashArray||[]),i.globalAlpha=d.opacity,i.lineWidth=d.weight,i.strokeStyle=d.color,i.lineCap=d.lineCap,i.lineJoin=d.lineJoin,i.stroke())},_onClick:function(i){for(var l=this._map.mouseEventToLayerPoint(i),d,m,E=this._drawFirst;E;E=E.next)d=E.layer,d.options.interactive&&d._containsPoint(l)&&(!(i.type==="click"||i.type==="preclick")||!this._map._draggableMoved(d))&&(m=d);this._fireEvent(m?[m]:!1,i)},_onMouseMove:function(i){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(i);this._handleMouseHover(i,l)}},_handleMouseOut:function(i){var l=this._hoveredLayer;l&&(mt(this._container,"leaflet-interactive"),this._fireEvent([l],i,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(i,l){if(!this._mouseHoverThrottled){for(var d,m,E=this._drawFirst;E;E=E.next)d=E.layer,d.options.interactive&&d._containsPoint(l)&&(m=d);m!==this._hoveredLayer&&(this._handleMouseOut(i),m&&(we(this._container,"leaflet-interactive"),this._fireEvent([m],i,"mouseover"),this._hoveredLayer=m)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,i),this._mouseHoverThrottled=!0,setTimeout(p(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(i,l,d){this._map._fireDOMEvent(l,d||l.type,i)},_bringToFront:function(i){var l=i._order;if(l){var d=l.next,m=l.prev;if(d)d.prev=m;else return;m?m.next=d:d&&(this._drawFirst=d),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(i)}},_bringToBack:function(i){var l=i._order;if(l){var d=l.next,m=l.prev;if(m)m.next=d;else return;d?d.prev=m:m&&(this._drawLast=m),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(i)}}});function Zl(i){return ke.canvas?new Kl(i):null}var to=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(i){return document.createElement("<lvml:"+i+' class="lvml">')}}catch{}return function(i){return document.createElement("<"+i+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),ac={_initContainer:function(){this._container=Ze("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Vr.prototype._update.call(this),this.fire("update"))},_initPath:function(i){var l=i._container=to("shape");we(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",i._path=to("path"),l.appendChild(i._path),this._updateStyle(i),this._layers[x(i)]=i},_addPath:function(i){var l=i._container;this._container.appendChild(l),i.options.interactive&&i.addInteractiveTarget(l)},_removePath:function(i){var l=i._container;lt(l),i.removeInteractiveTarget(l),delete this._layers[x(i)]},_updateStyle:function(i){var l=i._stroke,d=i._fill,m=i.options,E=i._container;E.stroked=!!m.stroke,E.filled=!!m.fill,m.stroke?(l||(l=i._stroke=to("stroke")),E.appendChild(l),l.weight=m.weight+"px",l.color=m.color,l.opacity=m.opacity,m.dashArray?l.dashStyle=xe(m.dashArray)?m.dashArray.join(" "):m.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=m.lineCap.replace("butt","flat"),l.joinstyle=m.lineJoin):l&&(E.removeChild(l),i._stroke=null),m.fill?(d||(d=i._fill=to("fill")),E.appendChild(d),d.color=m.fillColor||m.color,d.opacity=m.fillOpacity):d&&(E.removeChild(d),i._fill=null)},_updateCircle:function(i){var l=i._point.round(),d=Math.round(i._radius),m=Math.round(i._radiusY||d);this._setPath(i,i._empty()?"M0 0":"AL "+l.x+","+l.y+" "+d+","+m+" 0,"+65535*360)},_setPath:function(i,l){i._path.v=l},_bringToFront:function(i){Kn(i._container)},_bringToBack:function(i){un(i._container)}},pr=ke.vml?to:fi,hs=Vr.extend({_initContainer:function(){this._container=pr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=pr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){lt(this._container),gt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Vr.prototype._update.call(this);var i=this._bounds,l=i.getSize(),d=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,d.setAttribute("width",l.x),d.setAttribute("height",l.y)),At(d,i.min),d.setAttribute("viewBox",[i.min.x,i.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(i){var l=i._path=pr("path");i.options.className&&we(l,i.options.className),i.options.interactive&&we(l,"leaflet-interactive"),this._updateStyle(i),this._layers[x(i)]=i},_addPath:function(i){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(i._path),i.addInteractiveTarget(i._path)},_removePath:function(i){lt(i._path),i.removeInteractiveTarget(i._path),delete this._layers[x(i)]},_updatePath:function(i){i._project(),i._update()},_updateStyle:function(i){var l=i._path,d=i.options;l&&(d.stroke?(l.setAttribute("stroke",d.color),l.setAttribute("stroke-opacity",d.opacity),l.setAttribute("stroke-width",d.weight),l.setAttribute("stroke-linecap",d.lineCap),l.setAttribute("stroke-linejoin",d.lineJoin),d.dashArray?l.setAttribute("stroke-dasharray",d.dashArray):l.removeAttribute("stroke-dasharray"),d.dashOffset?l.setAttribute("stroke-dashoffset",d.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),d.fill?(l.setAttribute("fill",d.fillColor||d.color),l.setAttribute("fill-opacity",d.fillOpacity),l.setAttribute("fill-rule",d.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(i,l){this._setPath(i,Kr(i._parts,l))},_updateCircle:function(i){var l=i._point,d=Math.max(Math.round(i._radius),1),m=Math.max(Math.round(i._radiusY),1)||d,E="a"+d+","+m+" 0 1,0 ",P=i._empty()?"M0 0":"M"+(l.x-d)+","+l.y+E+d*2+",0 "+E+-d*2+",0 ";this._setPath(i,P)},_setPath:function(i,l){i._path.setAttribute("d",l)},_bringToFront:function(i){Kn(i._path)},_bringToBack:function(i){un(i._path)}});ke.vml&&hs.include(ac);function Qa(i){return ke.svg||ke.vml?new hs(i):null}nt.include({getRenderer:function(i){var l=i.options.renderer||this._getPaneRenderer(i.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(i){if(i==="overlayPane"||i===void 0)return!1;var l=this._paneRenderers[i];return l===void 0&&(l=this._createRenderer({pane:i}),this._paneRenderers[i]=l),l},_createRenderer:function(i){return this.options.preferCanvas&&Zl(i)||Qa(i)}});var lc=ni.extend({initialize:function(i,l){ni.prototype.initialize.call(this,this._boundsToLatLngs(i),l)},setBounds:function(i){return this.setLatLngs(this._boundsToLatLngs(i))},_boundsToLatLngs:function(i){return i=Ae(i),[i.getSouthWest(),i.getNorthWest(),i.getNorthEast(),i.getSouthEast()]}});function ld(i,l){return new lc(i,l)}hs.create=pr,hs.pointsToPath=Kr,Or.geometryToLayer=Qs,Or.coordsToLatLng=Wa,Or.coordsToLatLngs=ta,Or.latLngToCoords=$a,Or.latLngsToCoords=qa,Or.getFeature=Ys,Or.asFeature=Ga,nt.mergeOptions({boxZoom:!0});var no=cn.extend({initialize:function(i){this._map=i,this._container=i._container,this._pane=i._panes.overlayPane,this._resetStateTimeout=0,i.on("unload",this._destroy,this)},addHooks:function(){ze(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){gt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){lt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(i){if(!i.shiftKey||i.which!==1&&i.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),tt(),ns(),this._startPoint=this._map.mouseEventToContainerPoint(i),ze(document,{contextmenu:vn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(i){this._moved||(this._moved=!0,this._box=Ze("div","leaflet-zoom-box",this._container),we(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(i);var l=new B(this._point,this._startPoint),d=l.getSize();At(this._box,l.min),this._box.style.width=d.x+"px",this._box.style.height=d.y+"px"},_finish:function(){this._moved&&(lt(this._box),mt(this._container,"leaflet-crosshair")),yn(),rs(),gt(document,{contextmenu:vn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(i){if(!(i.which!==1&&i.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(p(this._resetState,this),0);var l=new Oe(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(i){i.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});nt.addInitHook("addHandler","boxZoom",no),nt.mergeOptions({doubleClickZoom:!0});var uc=cn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(i){var l=this._map,d=l.getZoom(),m=l.options.zoomDelta,E=i.originalEvent.shiftKey?d-m:d+m;l.options.doubleClickZoom==="center"?l.setZoom(E):l.setZoomAround(i.containerPoint,E)}});nt.addInitHook("addHandler","doubleClickZoom",uc),nt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Ql=cn.extend({addHooks:function(){if(!this._draggable){var i=this._map;this._draggable=new xn(i._mapPane,i._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),i.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),i.on("zoomend",this._onZoomEnd,this),i.whenReady(this._onZoomEnd,this))}we(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){mt(this._map._container,"leaflet-grab"),mt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var i=this._map;if(i._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=Ae(this._map.options.maxBounds);this._offsetLimit=ne(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;i.fire("movestart").fire("dragstart"),i.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(i){if(this._map.options.inertia){var l=this._lastTime=+new Date,d=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(d),this._times.push(l),this._prunePositions(l)}this._map.fire("move",i).fire("drag",i)},_prunePositions:function(i){for(;this._positions.length>1&&i-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var i=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(i).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(i,l){return i-(i-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var i=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;i.x<l.min.x&&(i.x=this._viscousLimit(i.x,l.min.x)),i.y<l.min.y&&(i.y=this._viscousLimit(i.y,l.min.y)),i.x>l.max.x&&(i.x=this._viscousLimit(i.x,l.max.x)),i.y>l.max.y&&(i.y=this._viscousLimit(i.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(i)}},_onPreDragWrap:function(){var i=this._worldWidth,l=Math.round(i/2),d=this._initialWorldOffset,m=this._draggable._newPos.x,E=(m-l+d)%i+l-d,P=(m+l+d)%i-l-d,V=Math.abs(E+d)<Math.abs(P+d)?E:P;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=V},_onDragEnd:function(i){var l=this._map,d=l.options,m=!d.inertia||i.noInertia||this._times.length<2;if(l.fire("dragend",i),m)l.fire("moveend");else{this._prunePositions(+new Date);var E=this._lastPos.subtract(this._positions[0]),P=(this._lastTime-this._times[0])/1e3,V=d.easeLinearity,G=E.multiplyBy(V/P),X=G.distanceTo([0,0]),ae=Math.min(d.inertiaMaxSpeed,X),ve=G.multiplyBy(ae/X),Fe=ae/(d.inertiaDeceleration*V),et=ve.multiplyBy(-Fe/2).round();!et.x&&!et.y?l.fire("moveend"):(et=l._limitOffset(et,l.options.maxBounds),R(function(){l.panBy(et,{duration:Fe,easeLinearity:V,noMoveStart:!0,animate:!0})}))}}});nt.addInitHook("addHandler","dragging",Ql),nt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Yl=cn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(i){this._map=i,this._setPanDelta(i.options.keyboardPanDelta),this._setZoomDelta(i.options.zoomDelta)},addHooks:function(){var i=this._map._container;i.tabIndex<=0&&(i.tabIndex="0"),ze(i,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),gt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var i=document.body,l=document.documentElement,d=i.scrollTop||l.scrollTop,m=i.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(m,d)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(i){var l=this._panKeys={},d=this.keyCodes,m,E;for(m=0,E=d.left.length;m<E;m++)l[d.left[m]]=[-1*i,0];for(m=0,E=d.right.length;m<E;m++)l[d.right[m]]=[i,0];for(m=0,E=d.down.length;m<E;m++)l[d.down[m]]=[0,i];for(m=0,E=d.up.length;m<E;m++)l[d.up[m]]=[0,-1*i]},_setZoomDelta:function(i){var l=this._zoomKeys={},d=this.keyCodes,m,E;for(m=0,E=d.zoomIn.length;m<E;m++)l[d.zoomIn[m]]=i;for(m=0,E=d.zoomOut.length;m<E;m++)l[d.zoomOut[m]]=-i},_addHooks:function(){ze(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){gt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(i){if(!(i.altKey||i.ctrlKey||i.metaKey)){var l=i.keyCode,d=this._map,m;if(l in this._panKeys){if(!d._panAnim||!d._panAnim._inProgress)if(m=this._panKeys[l],i.shiftKey&&(m=se(m).multiplyBy(3)),d.options.maxBounds&&(m=d._limitOffset(se(m),d.options.maxBounds)),d.options.worldCopyJump){var E=d.wrapLatLng(d.unproject(d.project(d.getCenter()).add(m)));d.panTo(E)}else d.panBy(m)}else if(l in this._zoomKeys)d.setZoom(d.getZoom()+(i.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&d._popup&&d._popup.options.closeOnEscapeKey)d.closePopup();else return;vn(i)}}});nt.addInitHook("addHandler","keyboard",Yl),nt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var vt=cn.extend({addHooks:function(){ze(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){gt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(i){var l=Ko(i),d=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(i),this._startTime||(this._startTime=+new Date);var m=Math.max(d-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(p(this._performZoom,this),m),vn(i)},_performZoom:function(){var i=this._map,l=i.getZoom(),d=this._map.options.zoomSnap||0;i._stop();var m=this._delta/(this._map.options.wheelPxPerZoomLevel*4),E=4*Math.log(2/(1+Math.exp(-Math.abs(m))))/Math.LN2,P=d?Math.ceil(E/d)*d:E,V=i._limitZoom(l+(this._delta>0?P:-P))-l;this._delta=0,this._startTime=null,V&&(i.options.scrollWheelZoom==="center"?i.setZoom(l+V):i.setZoomAround(this._lastMousePos,l+V))}});nt.addInitHook("addHandler","scrollWheelZoom",vt);var Jl=600;nt.mergeOptions({tapHold:ke.touchNative&&ke.safari&&ke.mobile,tapTolerance:15});var ia=cn.extend({addHooks:function(){ze(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){gt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(i){if(clearTimeout(this._holdTimeout),i.touches.length===1){var l=i.touches[0];this._startPos=this._newPos=new ee(l.clientX,l.clientY),this._holdTimeout=setTimeout(p(function(){this._cancel(),this._isTapValid()&&(ze(document,"touchend",xt),ze(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),Jl),ze(document,"touchend touchcancel contextmenu",this._cancel,this),ze(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function i(){gt(document,"touchend",xt),gt(document,"touchend touchcancel",i)},_cancel:function(){clearTimeout(this._holdTimeout),gt(document,"touchend touchcancel contextmenu",this._cancel,this),gt(document,"touchmove",this._onMove,this)},_onMove:function(i){var l=i.touches[0];this._newPos=new ee(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(i,l){var d=new MouseEvent(i,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});d._simulated=!0,l.target.dispatchEvent(d)}});nt.addInitHook("addHandler","tapHold",ia),nt.mergeOptions({touchZoom:ke.touch,bounceAtZoomLimits:!0});var ro=cn.extend({addHooks:function(){we(this._map._container,"leaflet-touch-zoom"),ze(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){mt(this._map._container,"leaflet-touch-zoom"),gt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(i){var l=this._map;if(!(!i.touches||i.touches.length!==2||l._animatingZoom||this._zooming)){var d=l.mouseEventToContainerPoint(i.touches[0]),m=l.mouseEventToContainerPoint(i.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(d.add(m)._divideBy(2))),this._startDist=d.distanceTo(m),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),ze(document,"touchmove",this._onTouchMove,this),ze(document,"touchend touchcancel",this._onTouchEnd,this),xt(i)}},_onTouchMove:function(i){if(!(!i.touches||i.touches.length!==2||!this._zooming)){var l=this._map,d=l.mouseEventToContainerPoint(i.touches[0]),m=l.mouseEventToContainerPoint(i.touches[1]),E=d.distanceTo(m)/this._startDist;if(this._zoom=l.getScaleZoom(E,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&E<1||this._zoom>l.getMaxZoom()&&E>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,E===1)return}else{var P=d._add(m)._divideBy(2)._subtract(this._centerPoint);if(E===1&&P.x===0&&P.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(P),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),O(this._animRequest);var V=p(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=R(V,this,!0),xt(i)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,O(this._animRequest),gt(document,"touchmove",this._onTouchMove,this),gt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});nt.addInitHook("addHandler","touchZoom",ro),nt.BoxZoom=no,nt.DoubleClickZoom=uc,nt.Drag=Ql,nt.Keyboard=Yl,nt.ScrollWheelZoom=vt,nt.TapHold=ia,nt.TouchZoom=ro,t.Bounds=B,t.Browser=ke,t.CRS=Xe,t.Canvas=Kl,t.Circle=Ba,t.CircleMarker=Ua,t.Class=be,t.Control=nn,t.DivIcon=Za,t.DivOverlay=jr,t.DomEvent=Rr,t.DomUtil=is,t.Draggable=xn,t.Evented=Ve,t.FeatureGroup=ei,t.GeoJSON=Or,t.GridLayer=Ri,t.Handler=cn,t.Icon=cs,t.ImageOverlay=Ni,t.LatLng=Ie,t.LatLngBounds=Oe,t.Layer=dr,t.LayerGroup=Ai,t.LineUtil=zn,t.Map=nt,t.Marker=ti,t.Mixin=Hs,t.Path=bi,t.Point=ee,t.PolyUtil=qs,t.Polygon=ni,t.Polyline=Un,t.Popup=Ka,t.PosAnimation=as,t.Projection=Mr,t.Rectangle=lc,t.Renderer=Vr,t.SVG=hs,t.SVGOverlay=$l,t.TileLayer=Li,t.Tooltip=Xs,t.Transformation=gn,t.Util=N,t.VideoOverlay=Wl,t.bind=p,t.bounds=ne,t.canvas=Zl,t.circle=ea,t.circleMarker=tc,t.control=Fn,t.divIcon=sc,t.extend=a,t.featureGroup=Xu,t.geoJSON=nc,t.geoJson=fr,t.gridLayer=eo,t.icon=ec,t.imageOverlay=rc,t.latLng=ye,t.latLngBounds=Ae,t.layerGroup=Xo,t.map=Vn,t.marker=sd,t.point=se,t.polygon=ad,t.polyline=od,t.popup=Js,t.rectangle=ld,t.setOptions=Z,t.stamp=x,t.svg=Qa,t.svgOverlay=ql,t.tileLayer=Gl,t.tooltip=na,t.transformation=jt,t.version=o,t.videoOverlay=ic;var cc=window.L;t.noConflict=function(){return window.L=cc,this},window.L=t}))})(Eu,Eu.exports)),Eu.exports}var Ju=EA();const zw=Qy(Ju);function _m(r,e,t){return Object.freeze({instance:r,context:e,container:t})}function ym(r,e){return e==null?function(o,a){const c=le.useRef();return c.current||(c.current=r(o,a)),c}:function(o,a){const c=le.useRef();c.current||(c.current=r(o,a));const p=le.useRef(o),{instance:y}=c.current;return le.useEffect(function(){p.current!==o&&(e(y,o,p.current),p.current=o)},[y,o,a]),c}}function TA(r,e){le.useEffect(function(){return(e.layerContainer??e.map).addLayer(r.instance),function(){var c;(c=e.layerContainer)==null||c.removeLayer(r.instance),e.map.removeLayer(r.instance)}},[e,r])}function Uw(r){return function(t){const o=mm(),a=r(gm(t,o),o);return Ow(o.map,t.attribution),Fw(a.current,t.eventHandlers),TA(a.current,o),a}}function IA(r,e){const t=ym(r,e),o=Uw(t);return _A(o)}function SA(r,e){const t=ym(r),o=wA(t,e);return yA(o)}function PA(r,e){const t=ym(r,e),o=Uw(t);return vA(o)}function kA(r,e,t){const{opacity:o,zIndex:a}=e;o!=null&&o!==t.opacity&&r.setOpacity(o),a!=null&&a!==t.zIndex&&r.setZIndex(a)}function CA(){return mm().map}function cp(){return cp=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=t[o])}return r},cp.apply(this,arguments)}function AA({bounds:r,boundsOptions:e,center:t,children:o,className:a,id:c,placeholder:p,style:y,whenReady:x,zoom:T,...k},C){const[b]=le.useState({className:a,id:c,style:y}),[W,$]=le.useState(null);le.useImperativeHandle(C,()=>(W==null?void 0:W.map)??null,[W]);const Z=le.useCallback(he=>{if(he!==null&&W===null){const me=new Ju.Map(he,k);t!=null&&T!=null?me.setView(t,T):r!=null&&me.fitBounds(r,e),x!=null&&me.whenReady(x),$(mA(me))}},[]);le.useEffect(()=>()=>{W==null||W.map.remove()},[W]);const J=W?Df.createElement(Vw,{value:W},o):p??null;return Df.createElement("div",cp({},b,{ref:Z}),J)}const bA=le.forwardRef(AA),NA=IA(function({position:e,...t},o){const a=new Ju.Marker(e,t);return _m(a,gA(o,{overlayContainer:a}))},function(e,t,o){t.position!==o.position&&e.setLatLng(t.position),t.icon!=null&&t.icon!==o.icon&&e.setIcon(t.icon),t.zIndexOffset!=null&&t.zIndexOffset!==o.zIndexOffset&&e.setZIndexOffset(t.zIndexOffset),t.opacity!=null&&t.opacity!==o.opacity&&e.setOpacity(t.opacity),e.dragging!=null&&t.draggable!==o.draggable&&(t.draggable===!0?e.dragging.enable():e.dragging.disable())}),RA=SA(function(e,t){const o=new Ju.Popup(e,t.overlayContainer);return _m(o,t)},function(e,t,{position:o},a){le.useEffect(function(){const{instance:p}=e;function y(T){T.popup===p&&(p.update(),a(!0))}function x(T){T.popup===p&&a(!1)}return t.map.on({popupopen:y,popupclose:x}),t.overlayContainer==null?(o!=null&&p.setLatLng(o),p.openOn(t.map)):t.overlayContainer.bindPopup(p),function(){var k;t.map.off({popupopen:y,popupclose:x}),(k=t.overlayContainer)==null||k.unbindPopup(),t.map.removeLayer(p)}},[e,t,a,o])}),LA=PA(function({url:e,...t},o){const a=new Ju.TileLayer(e,gm(t,o));return _m(a,o)},function(e,t,o){kA(e,t,o);const{url:a}=t;a!=null&&a!==o.url&&e.setUrl(a)}),Bw={food:"#f97316",sightseeing:"#3b82f6",activity:"#22c55e",transport:"#6b7280",accommodation:"#a855f7",free:"#14b8a6"},Hw={food:"",sightseeing:"",activity:"",transport:"",accommodation:"",free:""};function DA(r){const e=Bw[r]??"#6366f1",t=Hw[r]??"";return zw.divIcon({className:"",html:`<div style="background:${e};width:32px;height:32px;border-radius:50%;border:2.5px solid rgba(255,255,255,0.9);box-shadow:0 2px 8px rgba(0,0,0,.45);display:flex;align-items:center;justify-content:center;font-size:15px">${t}</div>`,iconSize:[32,32],iconAnchor:[16,16],popupAnchor:[0,-20]})}function MA({positions:r,fallback:e,posKey:t}){const o=CA();return le.useEffect(()=>{r.length>1?o.fitBounds(zw.latLngBounds(r),{padding:[50,50],animate:!0,duration:.7}):r.length===1?o.setView(r[0],14,{animate:!0,duration:.7}):e&&o.setView(e,12,{animate:!0,duration:.7})},[t,e==null?void 0:e[0],e==null?void 0:e[1]]),null}function OA({trip:r}){const[e,t]=le.useState(null),[o,a]=le.useState(null),[c,p]=le.useState(!1),y=r.itinerary.some($=>$.activities.some(Z=>Z.lat&&Z.lng));le.useEffect(()=>{y||(p(!0),fetch(`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(r.destination)}&format=json&limit=1`,{headers:{"Accept-Language":"en"}}).then($=>$.json()).then($=>{$[0]&&a([parseFloat($[0].lat),parseFloat($[0].lon)])}).catch(()=>{}).finally(()=>p(!1)))},[r.destination,y]);const x=r.itinerary.flatMap($=>$.activities.map(Z=>({...Z,dayId:$.id,dayDate:$.date,dayTitle:$.title}))),k=(e?x.filter($=>$.dayId===e):x).filter($=>$.lat&&$.lng),C=k.map($=>[$.lat,$.lng]),b=C.map($=>`${$[0]},${$[1]}`).join("|"),W=r.itinerary.length===0;return _.jsxs("div",{className:"space-y-4",children:[r.itinerary.length>0&&_.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-1 scrollbar-hide",children:[_.jsx("button",{onClick:()=>t(null),className:`shrink-0 px-3 py-1.5 rounded-full text-sm font-medium transition ${e===null?"bg-indigo-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:"All days"}),r.itinerary.map(($,Z)=>_.jsxs("button",{onClick:()=>t($.id===e?null:$.id),className:`shrink-0 px-3 py-1.5 rounded-full text-sm font-medium transition ${e===$.id?"bg-indigo-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:["Day ",Z+1]},$.id))]}),_.jsxs("div",{className:"relative rounded-2xl overflow-hidden border border-gray-800",style:{height:"460px"},children:[c&&_.jsxs("div",{className:"absolute inset-0 bg-gray-900/80 z-[500] flex items-center justify-center gap-2",children:[_.jsx($n,{className:"w-5 h-5 animate-spin text-indigo-400"}),_.jsxs("span",{className:"text-sm text-gray-400",children:["Locating ",r.destination,""]})]}),_.jsxs(bA,{center:[20,0],zoom:2,style:{height:"100%",width:"100%"},scrollWheelZoom:!0,children:[_.jsx(LA,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),_.jsx(MA,{positions:C,fallback:o,posKey:b}),k.map($=>_.jsx(NA,{position:[$.lat,$.lng],icon:DA($.category),children:_.jsx(RA,{children:_.jsxs("div",{className:"text-gray-800 text-sm",style:{minWidth:"180px"},children:[_.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[_.jsx("span",{children:Hw[$.category]??""}),_.jsx("span",{className:"font-semibold",children:$.title})]}),_.jsxs("p",{className:"text-xs text-gray-500 mb-1",children:[$.dayDate,"  ",$.time]}),_.jsx("p",{className:"text-xs text-gray-600 leading-snug",children:$.description}),($.estimatedCost??0)>0&&_.jsxs("p",{className:"text-xs text-gray-500 mt-1 font-medium",children:["~$",$.estimatedCost]})]})})},`${$.id}-${$.dayId}`))]})]}),W&&_.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-6 text-center",children:[_.jsx("span",{className:"text-3xl block mb-3",children:""}),_.jsx("h3",{className:"font-semibold text-gray-300 mb-1",children:"No itinerary yet"}),_.jsx("p",{className:"text-sm text-gray-500",children:"Generate an itinerary first  each activity will appear as a pin on the map."})]}),!W&&k.length===0&&!c&&_.jsxs("div",{className:"bg-amber-500/10 border border-amber-500/20 rounded-2xl p-4 text-center",children:[_.jsx("p",{className:"text-sm text-amber-300 font-medium",children:"No GPS coordinates in your itinerary"}),_.jsx("p",{className:"text-xs text-amber-400/70 mt-1",children:"Regenerate your itinerary  the AI will include location coordinates for each activity."})]}),k.length>0&&_.jsx("div",{className:"flex flex-wrap gap-x-4 gap-y-2",children:Object.entries(Bw).map(([$,Z])=>k.some(J=>J.category===$)?_.jsxs("div",{className:"flex items-center gap-1.5",children:[_.jsx("div",{className:"w-3 h-3 rounded-full shrink-0",style:{backgroundColor:Z}}),_.jsx("span",{className:"text-xs text-gray-500 capitalize",children:$})]},$):null)})]})}const jA=[{label:" Weather",query:"Current weather forecast and what to pack"},{label:" Flights",query:"Current flight prices and booking recommendations"},{label:" Hotels",query:"Best hotels and accommodation options with current prices"},{label:" Events",query:"Events, festivals and activities happening during my trip"},{label:" Restaurants",query:"Best local restaurants and must-try dishes"},{label:" Travel Tips",query:"Essential travel tips, visa requirements and local customs"}];function VA({trip:r,perplexityKey:e,hasSearchKey:t,onSettingsClick:o}){const[a,c]=le.useState(""),[p,y]=le.useState(""),[x,T]=le.useState(!1),[k,C]=le.useState(""),[b,W]=le.useState(""),$=async Z=>{if(!(!Z.trim()||x)){T(!0),C(""),y(""),W(Z);try{const J=await YC(Z,r,e);y(J)}catch(J){C(J instanceof Error?J.message:"Search failed")}finally{T(!1)}}};return t?_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-5",children:[_.jsx("h3",{className:"font-semibold text-gray-200 mb-1",children:"Live Travel Search"}),_.jsxs("p",{className:"text-sm text-gray-500",children:["Real-time info for ",_.jsx("span",{className:"text-gray-300",children:r.destination}),"  powered by Perplexity Sonar"]})]}),_.jsx("div",{className:"flex flex-wrap gap-2",children:jA.map(Z=>_.jsx("button",{onClick:()=>{c(Z.query),$(Z.query)},disabled:x,className:`px-3 py-1.5 rounded-full text-sm font-medium transition disabled:opacity-50 ${b===Z.query&&(x||p)?"bg-indigo-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700 hover:text-gray-200"}`,children:Z.label},Z.label))}),_.jsxs("form",{onSubmit:Z=>{Z.preventDefault(),$(a)},className:"flex gap-2",children:[_.jsx("input",{value:a,onChange:Z=>c(Z.target.value),placeholder:`Search anything about ${r.destination}`,disabled:x,className:"flex-1 bg-gray-900 border border-gray-700 rounded-xl px-4 py-3 text-gray-100 placeholder-gray-600 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition disabled:opacity-50 text-sm"}),_.jsx("button",{type:"submit",disabled:!a.trim()||x,className:"px-4 py-3 bg-indigo-600 hover:bg-indigo-500 disabled:opacity-40 disabled:cursor-not-allowed rounded-xl transition shrink-0",children:x?_.jsx($n,{className:"w-5 h-5 animate-spin"}):_.jsx(z_,{className:"w-5 h-5"})})]}),k&&_.jsx("div",{className:"text-sm text-red-300 bg-red-500/10 border border-red-500/20 rounded-xl px-4 py-3",children:k}),x&&_.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-8 flex flex-col items-center gap-3",children:[_.jsx($n,{className:"w-8 h-8 animate-spin text-indigo-400"}),_.jsx("p",{className:"text-sm text-gray-500",children:"Searching the web for real-time info"})]}),p&&!x&&_.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-5",children:[_.jsxs("div",{className:"flex items-center gap-2 mb-4 pb-3 border-b border-gray-800",children:[_.jsx("div",{className:"w-6 h-6 bg-indigo-500/20 rounded-lg flex items-center justify-center",children:_.jsx(z_,{className:"w-3.5 h-3.5 text-indigo-400"})}),_.jsx("span",{className:"text-sm font-medium text-gray-300",children:"Results"}),_.jsx("span",{className:"text-xs text-emerald-400 bg-emerald-500/10 px-2 py-0.5 rounded-full ml-auto",children:"Live"})]}),_.jsx("div",{className:"text-sm text-gray-300 leading-relaxed whitespace-pre-wrap",children:p})]})]}):_.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[_.jsx("div",{className:"w-16 h-16 bg-gray-800 border border-gray-700 rounded-2xl flex items-center justify-center mb-5",children:_.jsx(Ps,{className:"w-7 h-7 text-gray-500"})}),_.jsx("h3",{className:"text-lg font-semibold text-gray-400 mb-2",children:"Travel Search unavailable"}),_.jsxs("p",{className:"text-gray-600 max-w-sm mb-6 leading-relaxed text-sm",children:["Add your Perplexity API key to search real-time travel info  flights, hotels, weather, events, and more for ",r.destination,"."]}),_.jsxs("button",{onClick:o,className:"flex items-center gap-2 px-5 py-2.5 bg-gray-800 hover:bg-gray-700 border border-gray-700 rounded-xl text-sm text-gray-300 transition",children:[_.jsx(Ca,{className:"w-4 h-4"}),"Set up in Settings"]})]})}const Zy=[{id:"overview",label:"Overview",emoji:""},{id:"itinerary",label:"Itinerary",emoji:""},{id:"packing",label:"Packing",emoji:""},{id:"map",label:"Map",emoji:""},{id:"chat",label:"AI Chat",emoji:"",searchOnly:!0},{id:"search",label:"Search",emoji:"",searchOnly:!0}],FA={planning:"upcoming",upcoming:"completed",completed:"planning"},zA={planning:"bg-amber-500/20 border-amber-500/30 text-amber-300 hover:bg-amber-500/30",upcoming:"bg-blue-500/20 border-blue-500/30 text-blue-300 hover:bg-blue-500/30",completed:"bg-emerald-500/20 border-emerald-500/30 text-emerald-300 hover:bg-emerald-500/30"};function UA({trip:r,activeTab:e,onTabChange:t,onBack:o,onDelete:a,onGenerateItinerary:c,onGeneratePackingList:p,onUpdateTrip:y,getChatHistory:x,saveChatHistory:T,perplexityKey:k,hasGenerationKey:C,hasSearchKey:b,onSettingsClick:W}){const $=new Date(r.startDate+"T12:00:00"),Z=new Date(r.endDate+"T12:00:00"),J=Math.ceil((Z.getTime()-$.getTime())/864e5)+1,he=()=>{confirm(`Delete "${r.name}"? This cannot be undone.`)&&a(r.id)},me=()=>y({...r,status:FA[r.status]}),xe=r.itinerary.reduce((R,O)=>{var N;return R+(((N=O.activities)==null?void 0:N.length)??0)},0),Le=r.packingList.filter(R=>R.packed).length,Te=r.itinerary.flatMap(R=>R.activities??[]).reduce((R,O)=>R+(O.estimatedCost||0),0),De=Te*r.travelers,F=r.budget-De,D=Math.min(100,r.budget>0?De/r.budget*100:0),M=F<0,U=!C&&!b;return _.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-950 pb-16 md:pb-0",children:[_.jsxs("div",{className:`bg-gradient-to-br ${r.coverGradient} relative`,children:[_.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/20 via-transparent to-black/50"}),_.jsxs("div",{className:"relative max-w-5xl mx-auto px-4 md:px-6 pt-4 flex items-center justify-between",children:[_.jsx("button",{onClick:o,className:"p-2 text-white/70 hover:text-white hover:bg-white/10 rounded-lg transition",children:_.jsx(Wf,{className:"w-5 h-5"})}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsxs("button",{onClick:W,className:"relative p-2 text-white/50 hover:text-white hover:bg-white/10 rounded-lg transition",title:"API Settings",children:[_.jsx(Ca,{className:"w-4 h-4"}),U&&_.jsx("span",{className:"absolute top-1.5 right-1.5 w-1.5 h-1.5 bg-amber-400 rounded-full"})]}),_.jsxs("button",{onClick:me,className:`text-xs px-2.5 py-1.5 rounded-full font-medium border transition ${zA[r.status]}`,children:[_.jsx(YI,{className:"w-3 h-3 inline mr-1"}),r.status]}),_.jsx("button",{onClick:he,className:"p-2 text-white/40 hover:text-red-300 hover:bg-red-500/20 rounded-lg transition",children:_.jsx(Uh,{className:"w-4 h-4"})})]})]}),_.jsx("div",{className:"relative max-w-5xl mx-auto px-4 md:px-6 pt-3 pb-4 md:pb-5",children:_.jsxs("div",{className:"flex items-start gap-3",children:[_.jsx("span",{className:"text-4xl md:text-5xl drop-shadow-lg shrink-0 mt-0.5",children:r.emoji}),_.jsxs("div",{className:"flex-1 min-w-0",children:[_.jsx("h1",{className:"text-xl md:text-2xl font-bold text-white leading-tight",children:r.name}),_.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5 text-white/70",children:[_.jsx(zh,{className:"w-3.5 h-3.5 shrink-0"}),_.jsx("span",{className:"text-sm truncate",children:r.destination})]}),_.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-white/60 overflow-x-auto scrollbar-hide",children:[_.jsxs("span",{className:"flex items-center gap-1 shrink-0",children:[_.jsx(Tp,{className:"w-3.5 h-3.5"}),$.toLocaleDateString("en",{month:"short",day:"numeric"})," "," ",Z.toLocaleDateString("en",{month:"short",day:"numeric",year:"numeric"}),_.jsxs("span",{className:"text-white/30 ml-1",children:["(",J,"d)"]})]}),_.jsxs("span",{className:"flex items-center gap-1 shrink-0",children:[_.jsx(Pp,{className:"w-3.5 h-3.5"}),r.travelers]}),_.jsxs("span",{className:"flex items-center gap-1 shrink-0",children:[_.jsx(Ip,{className:"w-3.5 h-3.5"}),r.currency," ",r.budget.toLocaleString()]})]})]})]})}),_.jsx("div",{className:"hidden md:block relative max-w-5xl mx-auto px-6 pb-0",children:_.jsx("div",{className:"flex gap-1 w-fit overflow-x-auto",children:Zy.map(R=>{const O=!!(R.searchOnly&&!b);return _.jsxs("button",{onClick:()=>!O&&t(R.id),disabled:O,className:`px-4 py-2.5 rounded-t-xl text-sm font-medium transition flex items-center gap-1.5 whitespace-nowrap ${O?"text-white/30 cursor-not-allowed":e===R.id?"bg-gray-950 text-white":"text-white/60 hover:text-white/90 hover:bg-white/10"}`,children:[_.jsx("span",{children:R.emoji}),R.label,O&&_.jsx(Ps,{className:"w-3 h-3"})]},R.id)})})})]}),_.jsxs("div",{className:"flex-1 max-w-5xl mx-auto w-full px-4 md:px-6 py-5 md:py-6",children:[e==="overview"&&_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-5 md:p-6",children:[_.jsx("h3",{className:"font-semibold text-gray-200 mb-2",children:"About this trip"}),_.jsx("p",{className:"text-gray-400 leading-relaxed text-sm md:text-base",children:r.description})]}),_.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[{label:"Days",value:J,suffix:""},{label:"Activities",value:xe||"",suffix:""},{label:"Items packed",value:Le||"",suffix:r.packingList.length>0?`/${r.packingList.length}`:""},{label:"Interests",value:r.interests.length,suffix:""}].map(({label:R,value:O,suffix:N})=>_.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-4 md:p-5 text-center",children:[_.jsxs("p",{className:"text-xl md:text-2xl font-bold text-indigo-400",children:[O,N&&_.jsx("span",{className:"text-sm text-gray-500",children:N})]}),_.jsx("p",{className:"text-xs text-gray-500 mt-1",children:R})]},R))}),_.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-5 md:p-6",children:[_.jsxs("div",{className:"flex items-center justify-between mb-4",children:[_.jsx("h3",{className:"font-semibold text-gray-200",children:"Provisional Budget"}),_.jsx("span",{className:`text-xs font-medium px-2.5 py-1 rounded-full border ${De===0?"bg-gray-800 text-gray-500 border-gray-700":M?"bg-red-500/15 text-red-300 border-red-500/25":"bg-emerald-500/15 text-emerald-300 border-emerald-500/25"}`,children:De===0?"No estimates yet":M?` ${r.currency}${Math.abs(F).toLocaleString()} over`:` ${r.currency}${F.toLocaleString()} left`})]}),_.jsx("div",{className:"grid grid-cols-3 gap-2 md:gap-3 mb-4 text-center",children:[{label:"Allocated",val:`${r.currency} ${r.budget.toLocaleString()}`,color:"text-gray-200"},{label:"Est. spend",val:`${r.currency} ${De.toLocaleString()}`,color:De===0?"text-gray-500":M?"text-red-400":"text-gray-200"},{label:"Remaining",val:De===0?"":`${r.currency} ${F.toLocaleString()}`,color:De===0?"text-gray-500":M?"text-red-400":"text-emerald-400"}].map(({label:R,val:O,color:N})=>_.jsxs("div",{className:"bg-gray-800/60 rounded-xl p-3",children:[_.jsx("p",{className:"text-xs text-gray-500 mb-1",children:R}),_.jsx("p",{className:`font-semibold text-sm ${N}`,children:O})]},R))}),_.jsx("div",{className:"h-2 bg-gray-800 rounded-full overflow-hidden",children:_.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${M?"bg-red-500":D>80?"bg-amber-500":"bg-emerald-500"}`,style:{width:`${D}%`}})}),_.jsx("p",{className:"text-xs text-gray-600 mt-2",children:De===0?"Add cost estimates to activities to track spending.":`${r.currency}${Te.toLocaleString()} /person  ${r.travelers} traveler(s)`})]}),_.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-5 md:p-6",children:[_.jsx("h3",{className:"font-semibold text-gray-200 mb-3",children:"Interests"}),_.jsx("div",{className:"flex flex-wrap gap-2",children:r.interests.map(R=>_.jsx("span",{className:"text-sm bg-indigo-500/15 text-indigo-300 border border-indigo-500/25 px-3 py-1 rounded-full",children:R},R))})]}),_.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[{tab:"itinerary",emoji:"",title:"Itinerary",desc:r.itinerary.length?`${J} days planned`:"View & edit day-by-day",locked:!1},{tab:"packing",emoji:"",title:"Packing",desc:r.packingList.length?`${Le}/${r.packingList.length} packed`:"View packing list",locked:!1},{tab:"chat",emoji:"",title:"AI Chat",desc:b?"Ask anything about your trip":"Requires Perplexity key",locked:!b},{tab:"search",emoji:"",title:"Search",desc:b?"Real-time flights, hotels, weather":"Requires Perplexity key",locked:!b}].map(({tab:R,emoji:O,title:N,desc:be,locked:Ke})=>_.jsxs("button",{onClick:()=>!Ke&&t(R),disabled:Ke,className:`flex items-center gap-3 bg-gray-900 border rounded-2xl p-4 text-left transition group ${Ke?"border-gray-800 opacity-50 cursor-not-allowed":"border-gray-800 hover:border-gray-600"}`,children:[_.jsx("span",{className:`text-2xl ${Ke?"grayscale":""}`,children:O}),_.jsxs("div",{className:"flex-1 min-w-0",children:[_.jsxs("p",{className:`font-medium text-sm flex items-center gap-1.5 ${Ke?"text-gray-500":"text-gray-200 group-hover:text-white transition"}`,children:[N,Ke&&_.jsx(Ps,{className:"w-3 h-3"})]}),_.jsx("p",{className:"text-xs text-gray-500 truncate",children:be})]})]},R))})]}),e==="itinerary"&&_.jsx(lA,{trip:r,onGenerate:c,onUpdate:y,hasAiKey:C,onSettingsClick:W}),e==="packing"&&_.jsx(cA,{trip:r,onGenerate:p,onUpdate:y,hasAiKey:C,onSettingsClick:W}),e==="map"&&_.jsx(OA,{trip:r}),e==="chat"&&_.jsx(dA,{trip:r,perplexityKey:k,hasAiKey:b,onSettingsClick:W,getChatHistory:x,saveChatHistory:T}),e==="search"&&_.jsx(VA,{trip:r,perplexityKey:k,hasSearchKey:b,onSettingsClick:W})]}),_.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 z-30 bg-gray-900/95 backdrop-blur-md border-t border-gray-800",children:_.jsx("div",{className:"flex items-center overflow-x-auto px-2 pt-1 pb-2 gap-1 scrollbar-hide",children:Zy.map(R=>{const O=!!(R.searchOnly&&!b);return _.jsxs("button",{onClick:()=>!O&&t(R.id),disabled:O,className:`flex flex-col items-center gap-0.5 shrink-0 min-w-[52px] py-1.5 px-1 rounded-xl transition ${O?"text-gray-700 cursor-not-allowed":e===R.id?"text-indigo-400":"text-gray-500"}`,children:[_.jsx("span",{className:`text-xl leading-none ${O?"grayscale opacity-40":""}`,children:R.emoji}),_.jsxs("span",{className:"text-[10px] font-medium flex items-center gap-0.5 whitespace-nowrap",children:[R.label,O&&_.jsx(Ps,{className:"w-2.5 h-2.5"})]}),e===R.id&&!O&&_.jsx("span",{className:"w-1 h-1 bg-indigo-400 rounded-full"})]},R.id)})})})]})}function BA(){const[r,e]=le.useState([]),[t,o]=le.useState(!0),[a,c]=le.useState(!1),p=le.useRef(null);le.useEffect(()=>(By(C=>{e(b=>[...b.slice(-49),C]),c(!0),setTimeout(()=>c(!1),2e3)}),()=>By(null)),[]),le.useEffect(()=>{var C;t&&((C=p.current)==null||C.scrollIntoView({behavior:"smooth"}))},[r,t]);const y=r.filter(C=>C.status==="pending").length,x=r.length>0,T=C=>C==="pending"?_.jsx($n,{className:"w-3.5 h-3.5 text-indigo-400 animate-spin shrink-0"}):C==="success"?_.jsx(UI,{className:"w-3.5 h-3.5 text-emerald-400 shrink-0"}):_.jsx(BI,{className:"w-3.5 h-3.5 text-red-400 shrink-0"}),k=C=>C==="pending"?"border-l-indigo-500":C==="success"?"border-l-emerald-500":"border-l-red-500";return _.jsxs("div",{className:`fixed z-40 rounded-2xl border border-gray-700 shadow-2xl shadow-black/60 overflow-hidden transition-all duration-200
        bottom-[72px] left-3 right-3
        md:bottom-4 md:left-auto md:right-4 md:w-80 ${a?"ring-1 ring-indigo-500/40":""}`,children:[_.jsxs("button",{onClick:()=>o(C=>!C),className:"w-full flex items-center justify-between px-4 py-3 bg-gray-900 hover:bg-gray-800 transition",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx(MI,{className:"w-4 h-4 text-indigo-400"}),_.jsx("span",{className:"text-sm font-medium text-gray-200",children:"Activity"}),y>0&&_.jsxs("span",{className:"flex items-center gap-1 text-xs text-indigo-300 bg-indigo-500/20 px-2 py-0.5 rounded-full",children:[_.jsx($n,{className:"w-2.5 h-2.5 animate-spin"}),y," running"]}),!t&&x&&y===0&&_.jsxs("span",{className:"text-xs text-gray-500",children:[r.length," events"]})]}),_.jsxs("div",{className:"flex items-center gap-1",children:[t&&x&&_.jsx("span",{onClick:C=>{C.stopPropagation(),e([])},className:"p-1 text-gray-600 hover:text-gray-400 rounded transition cursor-pointer",title:"Clear log",children:_.jsx(Uh,{className:"w-3.5 h-3.5"})}),t?_.jsx(VI,{className:"w-4 h-4 text-gray-400"}):_.jsx(FI,{className:"w-4 h-4 text-gray-400"})]})]}),t&&_.jsxs("div",{className:"bg-gray-950 max-h-64 overflow-y-auto",children:[r.length===0?_.jsx("div",{className:"px-4 py-6 text-center text-xs text-gray-600",children:"No activity yet. Start by creating a trip or generating content."}):_.jsx("div",{className:"divide-y divide-gray-800/50",children:r.map(C=>_.jsx("div",{className:`px-4 py-2.5 border-l-2 ${k(C.status)}`,children:_.jsxs("div",{className:"flex items-start gap-2",children:[_.jsx("div",{className:"mt-0.5",children:T(C.status)}),_.jsxs("div",{className:"flex-1 min-w-0",children:[_.jsx("p",{className:"text-xs text-gray-300 leading-snug",children:C.message}),C.detail&&_.jsx("p",{className:"text-xs text-red-400 mt-0.5 leading-snug",children:C.detail}),_.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:new Date(C.timestamp).toLocaleTimeString("en",{hour:"2-digit",minute:"2-digit",second:"2-digit"})})]})]})},C.id))}),_.jsx("div",{ref:p})]})]})}function HA(){return Math.random().toString(36).slice(2,11)}function WA(){const{user:r,loading:e}=AC(),[t,o]=le.useState([]),[a,c]=le.useState("dashboard"),[p,y]=le.useState(null),[x,T]=le.useState("overview"),[k,C]=le.useState(""),[b,W]=le.useState(""),[$,Z]=le.useState(!1);le.useEffect(()=>{if(!r){o([]),C(""),W(""),c("dashboard"),y(null);return}let O=!1;return Promise.all([NC(r.uid).catch(()=>[]),MC(r.uid).catch(()=>({perplexityKey:"",anthropicKey:""}))]).then(([N,be])=>{O||(o(N),C(be.perplexityKey),W(be.anthropicKey))}),()=>{O=!0}},[r]);const J=async O=>{C(O.perplexityKey),W(O.anthropicKey),r&&await OC(r.uid,O)},he=()=>yT(Dh),me=async O=>{if(!(r!=null&&r.email))return;const N=ka.credential(r.email,O);await dT(r,N),await jC(r.uid),await vT(r)},xe=async O=>{var Ke,ge;const N=await GC({...O,anthropicKey:b,perplexityKey:k,context:O.context}),be={id:HA(),name:N.name,emoji:N.emoji,description:N.description,coverGradient:N.coverGradient,destination:O.destination,country:((Ke=O.destination.split(",").pop())==null?void 0:Ke.trim())??O.destination,startDate:O.startDate,endDate:O.endDate,travelers:O.travelers,budget:O.budget,currency:O.currency,interests:O.interests,notes:((ge=O.context)==null?void 0:ge.text)||void 0,itinerary:[],packingList:[],status:"planning",createdAt:new Date().toISOString()};return o(Ve=>[...Ve,be]),y(be),T("overview"),c("detail"),r&&await Uy(r.uid,be),be},Le=async O=>{o(N=>N.map(be=>be.id===O.id?O:be)),y(O),r&&await Uy(r.uid,O)},Te=async O=>{o(N=>N.filter(be=>be.id!==O)),c("dashboard"),y(null),r&&await RC(r.uid,O)},De=async O=>{const N=await KC(O,b,k),be={...O,itinerary:N};return await Le(be),be},F=async O=>{const N=await ZC(O,b,k),be={...O,packingList:N};return await Le(be),be},D=O=>r?LC(r.uid,O):Promise.resolve([]),M=(O,N)=>r?DC(r.uid,O,N):Promise.resolve();if(e)return _.jsx("div",{className:"min-h-screen bg-gray-950 flex items-center justify-center",children:_.jsx($n,{className:"w-8 h-8 text-indigo-400 animate-spin"})});if(!r)return _.jsx(XC,{});const U=!!(b||k),R=!!k;return _.jsxs("div",{className:"min-h-screen bg-gray-950 text-gray-100 font-sans",children:[_.jsx(BA,{}),$&&_.jsx(eA,{onSave:J,existing:{perplexityKey:k,anthropicKey:b},onClose:()=>Z(!1),onLogout:he,onDeleteAccount:me}),a==="dashboard"&&_.jsx(tA,{trips:t,onNewTrip:()=>c("wizard"),onSelectTrip:O=>{y(O),T("overview"),c("detail")},onSettingsClick:()=>Z(!0),hasAiKey:U}),a==="wizard"&&_.jsx(sA,{onBack:()=>c("dashboard"),onCreate:xe,hasAiKey:U,hasClaudeKey:!!b,onSettingsClick:()=>Z(!0)}),a==="detail"&&p&&_.jsx(UA,{trip:p,activeTab:x,onTabChange:T,onBack:()=>c("dashboard"),onDelete:Te,onGenerateItinerary:De,onGeneratePackingList:F,onUpdateTrip:Le,getChatHistory:D,saveChatHistory:M,perplexityKey:k,hasGenerationKey:U,hasSearchKey:R,onSettingsClick:()=>Z(!0)})]})}Rx.createRoot(document.getElementById("root")).render(_.jsx(le.StrictMode,{children:_.jsx(WA,{})}));
