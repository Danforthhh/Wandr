(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();var ud={exports:{}},Va={},cd={exports:{}},be={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mg;function eE(){if(mg)return be;mg=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),T=Symbol.iterator;function C(O){return O===null||typeof O!="object"?null:(O=T&&O[T]||O["@@iterator"],typeof O=="function"?O:null)}var F={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,W={};function B(O,K,Ne){this.props=O,this.context=K,this.refs=W,this.updater=Ne||F}B.prototype.isReactComponent={},B.prototype.setState=function(O,K){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,K,"setState")},B.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function Z(){}Z.prototype=B.prototype;function te(O,K,Ne){this.props=O,this.context=K,this.refs=W,this.updater=Ne||F}var ge=te.prototype=new Z;ge.constructor=te,q(ge,B.prototype),ge.isPureReactComponent=!0;var pe=Array.isArray,ie=Object.prototype.hasOwnProperty,ve={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function A(O,K,Ne){var Re,De={},Ve=null,qe=null;if(K!=null)for(Re in K.ref!==void 0&&(qe=K.ref),K.key!==void 0&&(Ve=""+K.key),K)ie.call(K,Re)&&!P.hasOwnProperty(Re)&&(De[Re]=K[Re]);var Ue=arguments.length-2;if(Ue===1)De.children=Ne;else if(1<Ue){for(var Ke=Array(Ue),Bt=0;Bt<Ue;Bt++)Ke[Bt]=arguments[Bt+2];De.children=Ke}if(O&&O.defaultProps)for(Re in Ue=O.defaultProps,Ue)De[Re]===void 0&&(De[Re]=Ue[Re]);return{$$typeof:r,type:O,key:Ve,ref:qe,props:De,_owner:ve.current}}function I(O,K){return{$$typeof:r,type:O.type,key:K,ref:O.ref,props:O.props,_owner:O._owner}}function R(O){return typeof O=="object"&&O!==null&&O.$$typeof===r}function k(O){var K={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(Ne){return K[Ne]})}var D=/\/+/g;function S(O,K){return typeof O=="object"&&O!==null&&O.key!=null?k(""+O.key):K.toString(36)}function ne(O,K,Ne,Re,De){var Ve=typeof O;(Ve==="undefined"||Ve==="boolean")&&(O=null);var qe=!1;if(O===null)qe=!0;else switch(Ve){case"string":case"number":qe=!0;break;case"object":switch(O.$$typeof){case r:case e:qe=!0}}if(qe)return qe=O,De=De(qe),O=Re===""?"."+S(qe,0):Re,pe(De)?(Ne="",O!=null&&(Ne=O.replace(D,"$&/")+"/"),ne(De,K,Ne,"",function(Bt){return Bt})):De!=null&&(R(De)&&(De=I(De,Ne+(!De.key||qe&&qe.key===De.key?"":(""+De.key).replace(D,"$&/")+"/")+O)),K.push(De)),1;if(qe=0,Re=Re===""?".":Re+":",pe(O))for(var Ue=0;Ue<O.length;Ue++){Ve=O[Ue];var Ke=Re+S(Ve,Ue);qe+=ne(Ve,K,Ne,Ke,De)}else if(Ke=C(O),typeof Ke=="function")for(O=Ke.call(O),Ue=0;!(Ve=O.next()).done;)Ve=Ve.value,Ke=Re+S(Ve,Ue++),qe+=ne(Ve,K,Ne,Ke,De);else if(Ve==="object")throw K=String(O),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.");return qe}function Se(O,K,Ne){if(O==null)return O;var Re=[],De=0;return ne(O,Re,"","",function(Ve){return K.call(Ne,Ve,De++)}),Re}function ae(O){if(O._status===-1){var K=O._result;K=K(),K.then(function(Ne){(O._status===0||O._status===-1)&&(O._status=1,O._result=Ne)},function(Ne){(O._status===0||O._status===-1)&&(O._status=2,O._result=Ne)}),O._status===-1&&(O._status=0,O._result=K)}if(O._status===1)return O._result.default;throw O._result}var Ie={current:null},Y={transition:null},de={ReactCurrentDispatcher:Ie,ReactCurrentBatchConfig:Y,ReactCurrentOwner:ve};function le(){throw Error("act(...) is not supported in production builds of React.")}return be.Children={map:Se,forEach:function(O,K,Ne){Se(O,function(){K.apply(this,arguments)},Ne)},count:function(O){var K=0;return Se(O,function(){K++}),K},toArray:function(O){return Se(O,function(K){return K})||[]},only:function(O){if(!R(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},be.Component=B,be.Fragment=t,be.Profiler=o,be.PureComponent=te,be.StrictMode=i,be.Suspense=y,be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=de,be.act=le,be.cloneElement=function(O,K,Ne){if(O==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+O+".");var Re=q({},O.props),De=O.key,Ve=O.ref,qe=O._owner;if(K!=null){if(K.ref!==void 0&&(Ve=K.ref,qe=ve.current),K.key!==void 0&&(De=""+K.key),O.type&&O.type.defaultProps)var Ue=O.type.defaultProps;for(Ke in K)ie.call(K,Ke)&&!P.hasOwnProperty(Ke)&&(Re[Ke]=K[Ke]===void 0&&Ue!==void 0?Ue[Ke]:K[Ke])}var Ke=arguments.length-2;if(Ke===1)Re.children=Ne;else if(1<Ke){Ue=Array(Ke);for(var Bt=0;Bt<Ke;Bt++)Ue[Bt]=arguments[Bt+2];Re.children=Ue}return{$$typeof:r,type:O.type,key:De,ref:Ve,props:Re,_owner:qe}},be.createContext=function(O){return O={$$typeof:h,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},O.Provider={$$typeof:l,_context:O},O.Consumer=O},be.createElement=A,be.createFactory=function(O){var K=A.bind(null,O);return K.type=O,K},be.createRef=function(){return{current:null}},be.forwardRef=function(O){return{$$typeof:m,render:O}},be.isValidElement=R,be.lazy=function(O){return{$$typeof:E,_payload:{_status:-1,_result:O},_init:ae}},be.memo=function(O,K){return{$$typeof:_,type:O,compare:K===void 0?null:K}},be.startTransition=function(O){var K=Y.transition;Y.transition={};try{O()}finally{Y.transition=K}},be.unstable_act=le,be.useCallback=function(O,K){return Ie.current.useCallback(O,K)},be.useContext=function(O){return Ie.current.useContext(O)},be.useDebugValue=function(){},be.useDeferredValue=function(O){return Ie.current.useDeferredValue(O)},be.useEffect=function(O,K){return Ie.current.useEffect(O,K)},be.useId=function(){return Ie.current.useId()},be.useImperativeHandle=function(O,K,Ne){return Ie.current.useImperativeHandle(O,K,Ne)},be.useInsertionEffect=function(O,K){return Ie.current.useInsertionEffect(O,K)},be.useLayoutEffect=function(O,K){return Ie.current.useLayoutEffect(O,K)},be.useMemo=function(O,K){return Ie.current.useMemo(O,K)},be.useReducer=function(O,K,Ne){return Ie.current.useReducer(O,K,Ne)},be.useRef=function(O){return Ie.current.useRef(O)},be.useState=function(O){return Ie.current.useState(O)},be.useSyncExternalStore=function(O,K,Ne){return Ie.current.useSyncExternalStore(O,K,Ne)},be.useTransition=function(){return Ie.current.useTransition()},be.version="18.3.1",be}var gg;function rf(){return gg||(gg=1,cd.exports=eE()),cd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yg;function tE(){if(yg)return Va;yg=1;var r=rf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(m,y,_){var E,T={},C=null,F=null;_!==void 0&&(C=""+_),y.key!==void 0&&(C=""+y.key),y.ref!==void 0&&(F=y.ref);for(E in y)i.call(y,E)&&!l.hasOwnProperty(E)&&(T[E]=y[E]);if(m&&m.defaultProps)for(E in y=m.defaultProps,y)T[E]===void 0&&(T[E]=y[E]);return{$$typeof:e,type:m,key:C,ref:F,props:T,_owner:o.current}}return Va.Fragment=t,Va.jsx=h,Va.jsxs=h,Va}var vg;function nE(){return vg||(vg=1,ud.exports=tE()),ud.exports}var g=nE(),he=rf(),Pu={},hd={exports:{}},Yt={},dd={exports:{}},fd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _g;function rE(){return _g||(_g=1,(function(r){function e(Y,de){var le=Y.length;Y.push(de);e:for(;0<le;){var O=le-1>>>1,K=Y[O];if(0<o(K,de))Y[O]=de,Y[le]=K,le=O;else break e}}function t(Y){return Y.length===0?null:Y[0]}function i(Y){if(Y.length===0)return null;var de=Y[0],le=Y.pop();if(le!==de){Y[0]=le;e:for(var O=0,K=Y.length,Ne=K>>>1;O<Ne;){var Re=2*(O+1)-1,De=Y[Re],Ve=Re+1,qe=Y[Ve];if(0>o(De,le))Ve<K&&0>o(qe,De)?(Y[O]=qe,Y[Ve]=le,O=Ve):(Y[O]=De,Y[Re]=le,O=Re);else if(Ve<K&&0>o(qe,le))Y[O]=qe,Y[Ve]=le,O=Ve;else break e}}return de}function o(Y,de){var le=Y.sortIndex-de.sortIndex;return le!==0?le:Y.id-de.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var h=Date,m=h.now();r.unstable_now=function(){return h.now()-m}}var y=[],_=[],E=1,T=null,C=3,F=!1,q=!1,W=!1,B=typeof setTimeout=="function"?setTimeout:null,Z=typeof clearTimeout=="function"?clearTimeout:null,te=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ge(Y){for(var de=t(_);de!==null;){if(de.callback===null)i(_);else if(de.startTime<=Y)i(_),de.sortIndex=de.expirationTime,e(y,de);else break;de=t(_)}}function pe(Y){if(W=!1,ge(Y),!q)if(t(y)!==null)q=!0,ae(ie);else{var de=t(_);de!==null&&Ie(pe,de.startTime-Y)}}function ie(Y,de){q=!1,W&&(W=!1,Z(A),A=-1),F=!0;var le=C;try{for(ge(de),T=t(y);T!==null&&(!(T.expirationTime>de)||Y&&!k());){var O=T.callback;if(typeof O=="function"){T.callback=null,C=T.priorityLevel;var K=O(T.expirationTime<=de);de=r.unstable_now(),typeof K=="function"?T.callback=K:T===t(y)&&i(y),ge(de)}else i(y);T=t(y)}if(T!==null)var Ne=!0;else{var Re=t(_);Re!==null&&Ie(pe,Re.startTime-de),Ne=!1}return Ne}finally{T=null,C=le,F=!1}}var ve=!1,P=null,A=-1,I=5,R=-1;function k(){return!(r.unstable_now()-R<I)}function D(){if(P!==null){var Y=r.unstable_now();R=Y;var de=!0;try{de=P(!0,Y)}finally{de?S():(ve=!1,P=null)}}else ve=!1}var S;if(typeof te=="function")S=function(){te(D)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,Se=ne.port2;ne.port1.onmessage=D,S=function(){Se.postMessage(null)}}else S=function(){B(D,0)};function ae(Y){P=Y,ve||(ve=!0,S())}function Ie(Y,de){A=B(function(){Y(r.unstable_now())},de)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Y){Y.callback=null},r.unstable_continueExecution=function(){q||F||(q=!0,ae(ie))},r.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<Y?Math.floor(1e3/Y):5},r.unstable_getCurrentPriorityLevel=function(){return C},r.unstable_getFirstCallbackNode=function(){return t(y)},r.unstable_next=function(Y){switch(C){case 1:case 2:case 3:var de=3;break;default:de=C}var le=C;C=de;try{return Y()}finally{C=le}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(Y,de){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var le=C;C=Y;try{return de()}finally{C=le}},r.unstable_scheduleCallback=function(Y,de,le){var O=r.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?O+le:O):le=O,Y){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=le+K,Y={id:E++,callback:de,priorityLevel:Y,startTime:le,expirationTime:K,sortIndex:-1},le>O?(Y.sortIndex=le,e(_,Y),t(y)===null&&Y===t(_)&&(W?(Z(A),A=-1):W=!0,Ie(pe,le-O))):(Y.sortIndex=K,e(y,Y),q||F||(q=!0,ae(ie))),Y},r.unstable_shouldYield=k,r.unstable_wrapCallback=function(Y){var de=C;return function(){var le=C;C=de;try{return Y.apply(this,arguments)}finally{C=le}}}})(fd)),fd}var wg;function sE(){return wg||(wg=1,dd.exports=rE()),dd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Eg;function iE(){if(Eg)return Yt;Eg=1;var r=rf(),e=sE();function t(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(n,s){h(n,s),h(n+"Capture",s)}function h(n,s){for(o[n]=s,n=0;n<s.length;n++)i.add(s[n])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),y=Object.prototype.hasOwnProperty,_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E={},T={};function C(n){return y.call(T,n)?!0:y.call(E,n)?!1:_.test(n)?T[n]=!0:(E[n]=!0,!1)}function F(n,s,a,c){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function q(n,s,a,c){if(s===null||typeof s>"u"||F(n,s,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function W(n,s,a,c,d,f,w){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=n,this.type=s,this.sanitizeURL=f,this.removeEmptyString=w}var B={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){B[n]=new W(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];B[s]=new W(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){B[n]=new W(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){B[n]=new W(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){B[n]=new W(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){B[n]=new W(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){B[n]=new W(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){B[n]=new W(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){B[n]=new W(n,5,!1,n.toLowerCase(),null,!1,!1)});var Z=/[\-:]([a-z])/g;function te(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(Z,te);B[s]=new W(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(Z,te);B[s]=new W(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(Z,te);B[s]=new W(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){B[n]=new W(n,1,!1,n.toLowerCase(),null,!1,!1)}),B.xlinkHref=new W("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){B[n]=new W(n,1,!1,n.toLowerCase(),null,!0,!0)});function ge(n,s,a,c){var d=B.hasOwnProperty(s)?B[s]:null;(d!==null?d.type!==0:c||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(q(s,a,d,c)&&(a=null),c||d===null?C(s)&&(a===null?n.removeAttribute(s):n.setAttribute(s,""+a)):d.mustUseProperty?n[d.propertyName]=a===null?d.type===3?!1:"":a:(s=d.attributeName,c=d.attributeNamespace,a===null?n.removeAttribute(s):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,c?n.setAttributeNS(c,s,a):n.setAttribute(s,a))))}var pe=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ie=Symbol.for("react.element"),ve=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),k=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),ne=Symbol.for("react.suspense_list"),Se=Symbol.for("react.memo"),ae=Symbol.for("react.lazy"),Ie=Symbol.for("react.offscreen"),Y=Symbol.iterator;function de(n){return n===null||typeof n!="object"?null:(n=Y&&n[Y]||n["@@iterator"],typeof n=="function"?n:null)}var le=Object.assign,O;function K(n){if(O===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);O=s&&s[1]||""}return`
`+O+n}var Ne=!1;function Re(n,s){if(!n||Ne)return"";Ne=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(U){var c=U}Reflect.construct(n,[],s)}else{try{s.call()}catch(U){c=U}n.call(s.prototype)}else{try{throw Error()}catch(U){c=U}n()}}catch(U){if(U&&c&&typeof U.stack=="string"){for(var d=U.stack.split(`
`),f=c.stack.split(`
`),w=d.length-1,N=f.length-1;1<=w&&0<=N&&d[w]!==f[N];)N--;for(;1<=w&&0<=N;w--,N--)if(d[w]!==f[N]){if(w!==1||N!==1)do if(w--,N--,0>N||d[w]!==f[N]){var b=`
`+d[w].replace(" at new "," at ");return n.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",n.displayName)),b}while(1<=w&&0<=N);break}}}finally{Ne=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?K(n):""}function De(n){switch(n.tag){case 5:return K(n.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 2:case 15:return n=Re(n.type,!1),n;case 11:return n=Re(n.type.render,!1),n;case 1:return n=Re(n.type,!0),n;default:return""}}function Ve(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case P:return"Fragment";case ve:return"Portal";case I:return"Profiler";case A:return"StrictMode";case S:return"Suspense";case ne:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case k:return(n.displayName||"Context")+".Consumer";case R:return(n._context.displayName||"Context")+".Provider";case D:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Se:return s=n.displayName||null,s!==null?s:Ve(n.type)||"Memo";case ae:s=n._payload,n=n._init;try{return Ve(n(s))}catch{}}return null}function qe(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ve(s);case 8:return s===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Ue(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ke(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Bt(n){var s=Ke(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),c=""+n[s];if(!n.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,f=a.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return d.call(this)},set:function(w){c=""+w,f.call(this,w)}}),Object.defineProperty(n,s,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function xi(n){n._valueTracker||(n._valueTracker=Bt(n))}function Uo(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),c="";return n&&(c=Ke(n)?n.checked?"true":"false":n.value),n=c,n!==a?(s.setValue(n),!0):!1}function Lr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Ti(n,s){var a=s.checked;return le({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function gl(n,s){var a=s.defaultValue==null?"":s.defaultValue,c=s.checked!=null?s.checked:s.defaultChecked;a=Ue(s.value!=null?s.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Ii(n,s){s=s.checked,s!=null&&ge(n,"checked",s,!1)}function Vs(n,s){Ii(n,s);var a=Ue(s.value),c=s.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?dt(n,s.type,a):s.hasOwnProperty("defaultValue")&&dt(n,s.type,Ue(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function zo(n,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var c=s.type;if(!(c!=="submit"&&c!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,a||s===n.value||(n.value=s),n.defaultValue=s}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function dt(n,s,a){(s!=="number"||Lr(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var at=Array.isArray;function Tn(n,s,a,c){if(n=n.options,s){s={};for(var d=0;d<a.length;d++)s["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=s.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&c&&(n[a].defaultSelected=!0)}else{for(a=""+Ue(a),s=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,c&&(n[d].defaultSelected=!0);return}s!==null||n[d].disabled||(s=n[d])}s!==null&&(s.selected=!0)}}function Bo(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return le({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function $o(n,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(at(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}n._wrapperState={initialValue:Ue(a)}}function yl(n,s){var a=Ue(s.value),c=Ue(s.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),s.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function jr(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function qo(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Si(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?qo(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Mr,vl=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,c,d){MSApp.execUnsafeLocalFunction(function(){return n(s,a,c,d)})}:n})(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(Mr=Mr||document.createElement("div"),Mr.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Mr.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function Os(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var Fr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_l=["Webkit","ms","Moz","O"];Object.keys(Fr).forEach(function(n){_l.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),Fr[s]=Fr[n]})});function Ur(n,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||Fr.hasOwnProperty(n)&&Fr[n]?(""+s).trim():s+"px"}function Ai(n,s){n=n.style;for(var a in s)if(s.hasOwnProperty(a)){var c=a.indexOf("--")===0,d=Ur(a,s[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,d):n[a]=d}}var Ho=le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function In(n,s){if(s){if(Ho[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function ki(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zr=null;function Ci(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var lr=null,ur=null,it=null;function Wo(n){if(n=_a(n)){if(typeof lr!="function")throw Error(t(280));var s=n.stateNode;s&&(s=Wl(s),lr(n.stateNode,n.type,s))}}function Br(n){ur?it?it.push(n):it=[n]:ur=n}function $r(){if(ur){var n=ur,s=it;if(it=ur=null,Wo(n),s)for(n=0;n<s.length;n++)Wo(s[n])}}function wl(n,s){return n(s)}function El(){}var jn=!1;function xl(n,s,a){if(jn)return n(s,a);jn=!0;try{return wl(n,s,a)}finally{jn=!1,(ur!==null||it!==null)&&(El(),$r())}}function Ls(n,s){var a=n.stateNode;if(a===null)return null;var c=Wl(a);if(c===null)return null;a=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var qr=!1;if(m)try{var Hr={};Object.defineProperty(Hr,"passive",{get:function(){qr=!0}}),window.addEventListener("test",Hr,Hr),window.removeEventListener("test",Hr,Hr)}catch{qr=!1}function Tl(n,s,a,c,d,f,w,N,b){var U=Array.prototype.slice.call(arguments,3);try{s.apply(a,U)}catch(Q){this.onError(Q)}}var cr=!1,Mn=null,Ni=!1,hn=null,Il={onError:function(n){cr=!0,Mn=n}};function Sl(n,s,a,c,d,f,w,N,b){cr=!1,Mn=null,Tl.apply(Il,arguments)}function Ko(n,s,a,c,d,f,w,N,b){if(Sl.apply(this,arguments),cr){if(cr){var U=Mn;cr=!1,Mn=null}else throw Error(t(198));Ni||(Ni=!0,hn=U)}}function Sn(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function Go(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function Al(n){if(Sn(n)!==n)throw Error(t(188))}function kl(n){var s=n.alternate;if(!s){if(s=Sn(n),s===null)throw Error(t(188));return s!==n?null:n}for(var a=n,c=s;;){var d=a.return;if(d===null)break;var f=d.alternate;if(f===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===a)return Al(d),n;if(f===c)return Al(d),s;f=f.sibling}throw Error(t(188))}if(a.return!==c.return)a=d,c=f;else{for(var w=!1,N=d.child;N;){if(N===a){w=!0,a=d,c=f;break}if(N===c){w=!0,c=d,a=f;break}N=N.sibling}if(!w){for(N=f.child;N;){if(N===a){w=!0,a=f,c=d;break}if(N===c){w=!0,c=f,a=d;break}N=N.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:s}function Cl(n){return n=kl(n),n!==null?js(n):null}function js(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=js(n);if(s!==null)return s;n=n.sibling}return null}var Qo=e.unstable_scheduleCallback,Ri=e.unstable_cancelCallback,Ms=e.unstable_shouldYield,hr=e.unstable_requestPaint,Je=e.unstable_now,Uc=e.unstable_getCurrentPriorityLevel,Pi=e.unstable_ImmediatePriority,Yo=e.unstable_UserBlockingPriority,Fs=e.unstable_NormalPriority,Jo=e.unstable_LowPriority,bi=e.unstable_IdlePriority,Us=null,Zt=null;function Nl(n){if(Zt&&typeof Zt.onCommitFiberRoot=="function")try{Zt.onCommitFiberRoot(Us,n,void 0,(n.current.flags&128)===128)}catch{}}var en=Math.clz32?Math.clz32:zs,Fn=Math.log,dn=Math.LN2;function zs(n){return n>>>=0,n===0?32:31-(Fn(n)/dn|0)|0}var Un=64,Wr=4194304;function $e(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function dr(n,s){var a=n.pendingLanes;if(a===0)return 0;var c=0,d=n.suspendedLanes,f=n.pingedLanes,w=a&268435455;if(w!==0){var N=w&~d;N!==0?c=$e(N):(f&=w,f!==0&&(c=$e(f)))}else w=a&~d,w!==0?c=$e(w):f!==0&&(c=$e(f));if(c===0)return 0;if(s!==0&&s!==c&&(s&d)===0&&(d=c&-c,f=s&-s,d>=f||d===16&&(f&4194240)!==0))return s;if((c&4)!==0&&(c|=a&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=c;0<s;)a=31-en(s),d=1<<a,c|=n[a],s&=~d;return c}function Bs(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $s(n,s){for(var a=n.suspendedLanes,c=n.pingedLanes,d=n.expirationTimes,f=n.pendingLanes;0<f;){var w=31-en(f),N=1<<w,b=d[w];b===-1?((N&a)===0||(N&c)!==0)&&(d[w]=Bs(N,s)):b<=s&&(n.expiredLanes|=N),f&=~N}}function Xo(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Zo(){var n=Un;return Un<<=1,(Un&4194240)===0&&(Un=64),n}function ea(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function qs(n,s,a){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-en(s),n[s]=a}function zc(n,s){var a=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var d=31-en(a),f=1<<d;s[d]=0,c[d]=-1,n[d]=-1,a&=~f}}function ta(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var c=31-en(a),d=1<<c;d&s|n[c]&s&&(n[c]|=s),a&=~d}}var Me=0;function zn(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var na,Di,ra,sa,ia,Bn=!1,Vi=[],$n=null,qn=null,At=null,Hs=new Map,fr=new Map,tn=[],Rl="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Kr(n,s){switch(n){case"focusin":case"focusout":$n=null;break;case"dragenter":case"dragleave":qn=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Hs.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":fr.delete(s.pointerId)}}function An(n,s,a,c,d,f){return n===null||n.nativeEvent!==f?(n={blockedOn:s,domEventName:a,eventSystemFlags:c,nativeEvent:f,targetContainers:[d]},s!==null&&(s=_a(s),s!==null&&Di(s)),n):(n.eventSystemFlags|=c,s=n.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),n)}function Pl(n,s,a,c,d){switch(s){case"focusin":return $n=An($n,n,s,a,c,d),!0;case"dragenter":return qn=An(qn,n,s,a,c,d),!0;case"mouseover":return At=An(At,n,s,a,c,d),!0;case"pointerover":var f=d.pointerId;return Hs.set(f,An(Hs.get(f)||null,n,s,a,c,d)),!0;case"gotpointercapture":return f=d.pointerId,fr.set(f,An(fr.get(f)||null,n,s,a,c,d)),!0}return!1}function Oi(n){var s=Qs(n.target);if(s!==null){var a=Sn(s);if(a!==null){if(s=a.tag,s===13){if(s=Go(a),s!==null){n.blockedOn=s,ia(n.priority,function(){ra(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ge(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=Li(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);zr=c,a.target.dispatchEvent(c),zr=null}else return s=_a(a),s!==null&&Di(s),n.blockedOn=a,!1;s.shift()}return!0}function bl(n,s,a){Ge(n)&&a.delete(s)}function Bc(){Bn=!1,$n!==null&&Ge($n)&&($n=null),qn!==null&&Ge(qn)&&(qn=null),At!==null&&Ge(At)&&(At=null),Hs.forEach(bl),fr.forEach(bl)}function Gr(n,s){n.blockedOn===s&&(n.blockedOn=null,Bn||(Bn=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Bc)))}function Qr(n){function s(d){return Gr(d,n)}if(0<Vi.length){Gr(Vi[0],n);for(var a=1;a<Vi.length;a++){var c=Vi[a];c.blockedOn===n&&(c.blockedOn=null)}}for($n!==null&&Gr($n,n),qn!==null&&Gr(qn,n),At!==null&&Gr(At,n),Hs.forEach(s),fr.forEach(s),a=0;a<tn.length;a++)c=tn[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<tn.length&&(a=tn[0],a.blockedOn===null);)Oi(a),a.blockedOn===null&&tn.shift()}var pr=pe.ReactCurrentBatchConfig,mr=!0;function Hn(n,s,a,c){var d=Me,f=pr.transition;pr.transition=null;try{Me=1,oa(n,s,a,c)}finally{Me=d,pr.transition=f}}function Dl(n,s,a,c){var d=Me,f=pr.transition;pr.transition=null;try{Me=4,oa(n,s,a,c)}finally{Me=d,pr.transition=f}}function oa(n,s,a,c){if(mr){var d=Li(n,s,a,c);if(d===null)Zc(n,s,c,Wn,a),Kr(n,c);else if(Pl(d,n,s,a,c))c.stopPropagation();else if(Kr(n,c),s&4&&-1<Rl.indexOf(n)){for(;d!==null;){var f=_a(d);if(f!==null&&na(f),f=Li(n,s,a,c),f===null&&Zc(n,s,c,Wn,a),f===d)break;d=f}d!==null&&c.stopPropagation()}else Zc(n,s,c,null,a)}}var Wn=null;function Li(n,s,a,c){if(Wn=null,n=Ci(c),n=Qs(n),n!==null)if(s=Sn(n),s===null)n=null;else if(a=s.tag,a===13){if(n=Go(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return Wn=n,null}function ji(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Uc()){case Pi:return 1;case Yo:return 4;case Fs:case Jo:return 16;case bi:return 536870912;default:return 16}default:return 16}}var nn=null,Mi=null,gr=null;function Vl(){if(gr)return gr;var n,s=Mi,a=s.length,c,d="value"in nn?nn.value:nn.textContent,f=d.length;for(n=0;n<a&&s[n]===d[n];n++);var w=a-n;for(c=1;c<=w&&s[a-c]===d[f-c];c++);return gr=d.slice(n,1<c?1-c:void 0)}function Ws(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Kn(){return!0}function aa(){return!1}function Dt(n){function s(a,c,d,f,w){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=f,this.target=w,this.currentTarget=null;for(var N in n)n.hasOwnProperty(N)&&(a=n[N],this[N]=a?a(f):f[N]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Kn:aa,this.isPropagationStopped=aa,this}return le(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Kn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Kn)},persist:function(){},isPersistent:Kn}),s}var Gn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ks=Dt(Gn),Yr=le({},Gn,{view:0,detail:0}),Fi=Dt(Yr),Ui,zi,rn,Gs=le({},Yr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ke,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==rn&&(rn&&n.type==="mousemove"?(Ui=n.screenX-rn.screenX,zi=n.screenY-rn.screenY):zi=Ui=0,rn=n),Ui)},movementY:function(n){return"movementY"in n?n.movementY:zi}}),la=Dt(Gs),Ol=le({},Gs,{dataTransfer:0}),Ll=Dt(Ol),Bi=le({},Yr,{relatedTarget:0}),kt=Dt(Bi),jl=le({},Gn,{animationName:0,elapsedTime:0,pseudoElement:0}),Ml=Dt(jl),Jr=le({},Gn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),u=Dt(Jr),p=le({},Gn,{data:0}),v=Dt(p),x={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},j={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},z={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ee(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=z[n])?!!s[n]:!1}function ke(){return ee}var lt=le({},Yr,{key:function(n){if(n.key){var s=x[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Ws(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?j[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ke,charCode:function(n){return n.type==="keypress"?Ws(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ws(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),We=Dt(lt),ft=le({},Gs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sn=Dt(ft),yr=le({},Yr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ke}),Qn=Dt(yr),Yn=le({},Gn,{propertyName:0,elapsedTime:0,pseudoElement:0}),$i=Dt(Yn),ua=le({},Gs,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),G_=Dt(ua),Q_=[9,13,27,32],$c=m&&"CompositionEvent"in window,ca=null;m&&"documentMode"in document&&(ca=document.documentMode);var Y_=m&&"TextEvent"in window&&!ca,ap=m&&(!$c||ca&&8<ca&&11>=ca),lp=" ",up=!1;function cp(n,s){switch(n){case"keyup":return Q_.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hp(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var qi=!1;function J_(n,s){switch(n){case"compositionend":return hp(s);case"keypress":return s.which!==32?null:(up=!0,lp);case"textInput":return n=s.data,n===lp&&up?null:n;default:return null}}function X_(n,s){if(qi)return n==="compositionend"||!$c&&cp(n,s)?(n=Vl(),gr=Mi=nn=null,qi=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return ap&&s.locale!=="ko"?null:s.data;default:return null}}var Z_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dp(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!Z_[n.type]:s==="textarea"}function fp(n,s,a,c){Br(c),s=$l(s,"onChange"),0<s.length&&(a=new Ks("onChange","change",null,a,c),n.push({event:a,listeners:s}))}var ha=null,da=null;function ew(n){Pp(n,0)}function Fl(n){var s=Qi(n);if(Uo(s))return n}function tw(n,s){if(n==="change")return s}var pp=!1;if(m){var qc;if(m){var Hc="oninput"in document;if(!Hc){var mp=document.createElement("div");mp.setAttribute("oninput","return;"),Hc=typeof mp.oninput=="function"}qc=Hc}else qc=!1;pp=qc&&(!document.documentMode||9<document.documentMode)}function gp(){ha&&(ha.detachEvent("onpropertychange",yp),da=ha=null)}function yp(n){if(n.propertyName==="value"&&Fl(da)){var s=[];fp(s,da,n,Ci(n)),xl(ew,s)}}function nw(n,s,a){n==="focusin"?(gp(),ha=s,da=a,ha.attachEvent("onpropertychange",yp)):n==="focusout"&&gp()}function rw(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Fl(da)}function sw(n,s){if(n==="click")return Fl(s)}function iw(n,s){if(n==="input"||n==="change")return Fl(s)}function ow(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var kn=typeof Object.is=="function"?Object.is:ow;function fa(n,s){if(kn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),c=Object.keys(s);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!y.call(s,d)||!kn(n[d],s[d]))return!1}return!0}function vp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function _p(n,s){var a=vp(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=s&&c>=s)return{node:a,offset:s-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=vp(a)}}function wp(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?wp(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Ep(){for(var n=window,s=Lr();s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=Lr(n.document)}return s}function Wc(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function aw(n){var s=Ep(),a=n.focusedElem,c=n.selectionRange;if(s!==a&&a&&a.ownerDocument&&wp(a.ownerDocument.documentElement,a)){if(c!==null&&Wc(a)){if(s=c.start,n=c.end,n===void 0&&(n=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(n,a.value.length);else if(n=(s=a.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var d=a.textContent.length,f=Math.min(c.start,d);c=c.end===void 0?f:Math.min(c.end,d),!n.extend&&f>c&&(d=c,c=f,f=d),d=_p(a,f);var w=_p(a,c);d&&w&&(n.rangeCount!==1||n.anchorNode!==d.node||n.anchorOffset!==d.offset||n.focusNode!==w.node||n.focusOffset!==w.offset)&&(s=s.createRange(),s.setStart(d.node,d.offset),n.removeAllRanges(),f>c?(n.addRange(s),n.extend(w.node,w.offset)):(s.setEnd(w.node,w.offset),n.addRange(s)))}}for(s=[],n=a;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)n=s[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var lw=m&&"documentMode"in document&&11>=document.documentMode,Hi=null,Kc=null,pa=null,Gc=!1;function xp(n,s,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Gc||Hi==null||Hi!==Lr(c)||(c=Hi,"selectionStart"in c&&Wc(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),pa&&fa(pa,c)||(pa=c,c=$l(Kc,"onSelect"),0<c.length&&(s=new Ks("onSelect","select",null,s,a),n.push({event:s,listeners:c}),s.target=Hi)))}function Ul(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var Wi={animationend:Ul("Animation","AnimationEnd"),animationiteration:Ul("Animation","AnimationIteration"),animationstart:Ul("Animation","AnimationStart"),transitionend:Ul("Transition","TransitionEnd")},Qc={},Tp={};m&&(Tp=document.createElement("div").style,"AnimationEvent"in window||(delete Wi.animationend.animation,delete Wi.animationiteration.animation,delete Wi.animationstart.animation),"TransitionEvent"in window||delete Wi.transitionend.transition);function zl(n){if(Qc[n])return Qc[n];if(!Wi[n])return n;var s=Wi[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in Tp)return Qc[n]=s[a];return n}var Ip=zl("animationend"),Sp=zl("animationiteration"),Ap=zl("animationstart"),kp=zl("transitionend"),Cp=new Map,Np="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xr(n,s){Cp.set(n,s),l(s,[n])}for(var Yc=0;Yc<Np.length;Yc++){var Jc=Np[Yc],uw=Jc.toLowerCase(),cw=Jc[0].toUpperCase()+Jc.slice(1);Xr(uw,"on"+cw)}Xr(Ip,"onAnimationEnd"),Xr(Sp,"onAnimationIteration"),Xr(Ap,"onAnimationStart"),Xr("dblclick","onDoubleClick"),Xr("focusin","onFocus"),Xr("focusout","onBlur"),Xr(kp,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ma="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hw=new Set("cancel close invalid load scroll toggle".split(" ").concat(ma));function Rp(n,s,a){var c=n.type||"unknown-event";n.currentTarget=a,Ko(c,s,void 0,n),n.currentTarget=null}function Pp(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],d=c.event;c=c.listeners;e:{var f=void 0;if(s)for(var w=c.length-1;0<=w;w--){var N=c[w],b=N.instance,U=N.currentTarget;if(N=N.listener,b!==f&&d.isPropagationStopped())break e;Rp(d,N,U),f=b}else for(w=0;w<c.length;w++){if(N=c[w],b=N.instance,U=N.currentTarget,N=N.listener,b!==f&&d.isPropagationStopped())break e;Rp(d,N,U),f=b}}}if(Ni)throw n=hn,Ni=!1,hn=null,n}function Xe(n,s){var a=s[ih];a===void 0&&(a=s[ih]=new Set);var c=n+"__bubble";a.has(c)||(bp(s,n,2,!1),a.add(c))}function Xc(n,s,a){var c=0;s&&(c|=4),bp(a,n,c,s)}var Bl="_reactListening"+Math.random().toString(36).slice(2);function ga(n){if(!n[Bl]){n[Bl]=!0,i.forEach(function(a){a!=="selectionchange"&&(hw.has(a)||Xc(a,!1,n),Xc(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Bl]||(s[Bl]=!0,Xc("selectionchange",!1,s))}}function bp(n,s,a,c){switch(ji(s)){case 1:var d=Hn;break;case 4:d=Dl;break;default:d=oa}a=d.bind(null,s,a,n),d=void 0,!qr||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),c?d!==void 0?n.addEventListener(s,a,{capture:!0,passive:d}):n.addEventListener(s,a,!0):d!==void 0?n.addEventListener(s,a,{passive:d}):n.addEventListener(s,a,!1)}function Zc(n,s,a,c,d){var f=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var N=c.stateNode.containerInfo;if(N===d||N.nodeType===8&&N.parentNode===d)break;if(w===4)for(w=c.return;w!==null;){var b=w.tag;if((b===3||b===4)&&(b=w.stateNode.containerInfo,b===d||b.nodeType===8&&b.parentNode===d))return;w=w.return}for(;N!==null;){if(w=Qs(N),w===null)return;if(b=w.tag,b===5||b===6){c=f=w;continue e}N=N.parentNode}}c=c.return}xl(function(){var U=f,Q=Ci(a),J=[];e:{var G=Cp.get(n);if(G!==void 0){var se=Ks,ce=n;switch(n){case"keypress":if(Ws(a)===0)break e;case"keydown":case"keyup":se=We;break;case"focusin":ce="focus",se=kt;break;case"focusout":ce="blur",se=kt;break;case"beforeblur":case"afterblur":se=kt;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=la;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=Ll;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=Qn;break;case Ip:case Sp:case Ap:se=Ml;break;case kp:se=$i;break;case"scroll":se=Fi;break;case"wheel":se=G_;break;case"copy":case"cut":case"paste":se=u;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=sn}var fe=(s&4)!==0,ut=!fe&&n==="scroll",L=fe?G!==null?G+"Capture":null:G;fe=[];for(var V=U,M;V!==null;){M=V;var X=M.stateNode;if(M.tag===5&&X!==null&&(M=X,L!==null&&(X=Ls(V,L),X!=null&&fe.push(ya(V,X,M)))),ut)break;V=V.return}0<fe.length&&(G=new se(G,ce,null,a,Q),J.push({event:G,listeners:fe}))}}if((s&7)===0){e:{if(G=n==="mouseover"||n==="pointerover",se=n==="mouseout"||n==="pointerout",G&&a!==zr&&(ce=a.relatedTarget||a.fromElement)&&(Qs(ce)||ce[vr]))break e;if((se||G)&&(G=Q.window===Q?Q:(G=Q.ownerDocument)?G.defaultView||G.parentWindow:window,se?(ce=a.relatedTarget||a.toElement,se=U,ce=ce?Qs(ce):null,ce!==null&&(ut=Sn(ce),ce!==ut||ce.tag!==5&&ce.tag!==6)&&(ce=null)):(se=null,ce=U),se!==ce)){if(fe=la,X="onMouseLeave",L="onMouseEnter",V="mouse",(n==="pointerout"||n==="pointerover")&&(fe=sn,X="onPointerLeave",L="onPointerEnter",V="pointer"),ut=se==null?G:Qi(se),M=ce==null?G:Qi(ce),G=new fe(X,V+"leave",se,a,Q),G.target=ut,G.relatedTarget=M,X=null,Qs(Q)===U&&(fe=new fe(L,V+"enter",ce,a,Q),fe.target=M,fe.relatedTarget=ut,X=fe),ut=X,se&&ce)t:{for(fe=se,L=ce,V=0,M=fe;M;M=Ki(M))V++;for(M=0,X=L;X;X=Ki(X))M++;for(;0<V-M;)fe=Ki(fe),V--;for(;0<M-V;)L=Ki(L),M--;for(;V--;){if(fe===L||L!==null&&fe===L.alternate)break t;fe=Ki(fe),L=Ki(L)}fe=null}else fe=null;se!==null&&Dp(J,G,se,fe,!1),ce!==null&&ut!==null&&Dp(J,ut,ce,fe,!0)}}e:{if(G=U?Qi(U):window,se=G.nodeName&&G.nodeName.toLowerCase(),se==="select"||se==="input"&&G.type==="file")var me=tw;else if(dp(G))if(pp)me=iw;else{me=rw;var _e=nw}else(se=G.nodeName)&&se.toLowerCase()==="input"&&(G.type==="checkbox"||G.type==="radio")&&(me=sw);if(me&&(me=me(n,U))){fp(J,me,a,Q);break e}_e&&_e(n,G,U),n==="focusout"&&(_e=G._wrapperState)&&_e.controlled&&G.type==="number"&&dt(G,"number",G.value)}switch(_e=U?Qi(U):window,n){case"focusin":(dp(_e)||_e.contentEditable==="true")&&(Hi=_e,Kc=U,pa=null);break;case"focusout":pa=Kc=Hi=null;break;case"mousedown":Gc=!0;break;case"contextmenu":case"mouseup":case"dragend":Gc=!1,xp(J,a,Q);break;case"selectionchange":if(lw)break;case"keydown":case"keyup":xp(J,a,Q)}var we;if($c)e:{switch(n){case"compositionstart":var Te="onCompositionStart";break e;case"compositionend":Te="onCompositionEnd";break e;case"compositionupdate":Te="onCompositionUpdate";break e}Te=void 0}else qi?cp(n,a)&&(Te="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Te="onCompositionStart");Te&&(ap&&a.locale!=="ko"&&(qi||Te!=="onCompositionStart"?Te==="onCompositionEnd"&&qi&&(we=Vl()):(nn=Q,Mi="value"in nn?nn.value:nn.textContent,qi=!0)),_e=$l(U,Te),0<_e.length&&(Te=new v(Te,n,null,a,Q),J.push({event:Te,listeners:_e}),we?Te.data=we:(we=hp(a),we!==null&&(Te.data=we)))),(we=Y_?J_(n,a):X_(n,a))&&(U=$l(U,"onBeforeInput"),0<U.length&&(Q=new v("onBeforeInput","beforeinput",null,a,Q),J.push({event:Q,listeners:U}),Q.data=we))}Pp(J,s)})}function ya(n,s,a){return{instance:n,listener:s,currentTarget:a}}function $l(n,s){for(var a=s+"Capture",c=[];n!==null;){var d=n,f=d.stateNode;d.tag===5&&f!==null&&(d=f,f=Ls(n,a),f!=null&&c.unshift(ya(n,f,d)),f=Ls(n,s),f!=null&&c.push(ya(n,f,d))),n=n.return}return c}function Ki(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Dp(n,s,a,c,d){for(var f=s._reactName,w=[];a!==null&&a!==c;){var N=a,b=N.alternate,U=N.stateNode;if(b!==null&&b===c)break;N.tag===5&&U!==null&&(N=U,d?(b=Ls(a,f),b!=null&&w.unshift(ya(a,b,N))):d||(b=Ls(a,f),b!=null&&w.push(ya(a,b,N)))),a=a.return}w.length!==0&&n.push({event:s,listeners:w})}var dw=/\r\n?/g,fw=/\u0000|\uFFFD/g;function Vp(n){return(typeof n=="string"?n:""+n).replace(dw,`
`).replace(fw,"")}function ql(n,s,a){if(s=Vp(s),Vp(n)!==s&&a)throw Error(t(425))}function Hl(){}var eh=null,th=null;function nh(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var rh=typeof setTimeout=="function"?setTimeout:void 0,pw=typeof clearTimeout=="function"?clearTimeout:void 0,Op=typeof Promise=="function"?Promise:void 0,mw=typeof queueMicrotask=="function"?queueMicrotask:typeof Op<"u"?function(n){return Op.resolve(null).then(n).catch(gw)}:rh;function gw(n){setTimeout(function(){throw n})}function sh(n,s){var a=s,c=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(c===0){n.removeChild(d),Qr(s);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=d}while(a);Qr(s)}function Zr(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function Lp(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return n;s--}else a==="/$"&&s++}n=n.previousSibling}return null}var Gi=Math.random().toString(36).slice(2),Jn="__reactFiber$"+Gi,va="__reactProps$"+Gi,vr="__reactContainer$"+Gi,ih="__reactEvents$"+Gi,yw="__reactListeners$"+Gi,vw="__reactHandles$"+Gi;function Qs(n){var s=n[Jn];if(s)return s;for(var a=n.parentNode;a;){if(s=a[vr]||a[Jn]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=Lp(n);n!==null;){if(a=n[Jn])return a;n=Lp(n)}return s}n=a,a=n.parentNode}return null}function _a(n){return n=n[Jn]||n[vr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Qi(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function Wl(n){return n[va]||null}var oh=[],Yi=-1;function es(n){return{current:n}}function Ze(n){0>Yi||(n.current=oh[Yi],oh[Yi]=null,Yi--)}function Qe(n,s){Yi++,oh[Yi]=n.current,n.current=s}var ts={},Vt=es(ts),Ht=es(!1),Ys=ts;function Ji(n,s){var a=n.type.contextTypes;if(!a)return ts;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===s)return c.__reactInternalMemoizedMaskedChildContext;var d={},f;for(f in a)d[f]=s[f];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=d),d}function Wt(n){return n=n.childContextTypes,n!=null}function Kl(){Ze(Ht),Ze(Vt)}function jp(n,s,a){if(Vt.current!==ts)throw Error(t(168));Qe(Vt,s),Qe(Ht,a)}function Mp(n,s,a){var c=n.stateNode;if(s=s.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var d in c)if(!(d in s))throw Error(t(108,qe(n)||"Unknown",d));return le({},a,c)}function Gl(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||ts,Ys=Vt.current,Qe(Vt,n),Qe(Ht,Ht.current),!0}function Fp(n,s,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=Mp(n,s,Ys),c.__reactInternalMemoizedMergedChildContext=n,Ze(Ht),Ze(Vt),Qe(Vt,n)):Ze(Ht),Qe(Ht,a)}var _r=null,Ql=!1,ah=!1;function Up(n){_r===null?_r=[n]:_r.push(n)}function _w(n){Ql=!0,Up(n)}function ns(){if(!ah&&_r!==null){ah=!0;var n=0,s=Me;try{var a=_r;for(Me=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}_r=null,Ql=!1}catch(d){throw _r!==null&&(_r=_r.slice(n+1)),Qo(Pi,ns),d}finally{Me=s,ah=!1}}return null}var Xi=[],Zi=0,Yl=null,Jl=0,fn=[],pn=0,Js=null,wr=1,Er="";function Xs(n,s){Xi[Zi++]=Jl,Xi[Zi++]=Yl,Yl=n,Jl=s}function zp(n,s,a){fn[pn++]=wr,fn[pn++]=Er,fn[pn++]=Js,Js=n;var c=wr;n=Er;var d=32-en(c)-1;c&=~(1<<d),a+=1;var f=32-en(s)+d;if(30<f){var w=d-d%5;f=(c&(1<<w)-1).toString(32),c>>=w,d-=w,wr=1<<32-en(s)+d|a<<d|c,Er=f+n}else wr=1<<f|a<<d|c,Er=n}function lh(n){n.return!==null&&(Xs(n,1),zp(n,1,0))}function uh(n){for(;n===Yl;)Yl=Xi[--Zi],Xi[Zi]=null,Jl=Xi[--Zi],Xi[Zi]=null;for(;n===Js;)Js=fn[--pn],fn[pn]=null,Er=fn[--pn],fn[pn]=null,wr=fn[--pn],fn[pn]=null}var on=null,an=null,tt=!1,Cn=null;function Bp(n,s){var a=vn(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=n,s=n.deletions,s===null?(n.deletions=[a],n.flags|=16):s.push(a)}function $p(n,s){switch(n.tag){case 5:var a=n.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,on=n,an=Zr(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,on=n,an=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=Js!==null?{id:wr,overflow:Er}:null,n.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=vn(18,null,null,0),a.stateNode=s,a.return=n,n.child=a,on=n,an=null,!0):!1;default:return!1}}function ch(n){return(n.mode&1)!==0&&(n.flags&128)===0}function hh(n){if(tt){var s=an;if(s){var a=s;if(!$p(n,s)){if(ch(n))throw Error(t(418));s=Zr(a.nextSibling);var c=on;s&&$p(n,s)?Bp(c,a):(n.flags=n.flags&-4097|2,tt=!1,on=n)}}else{if(ch(n))throw Error(t(418));n.flags=n.flags&-4097|2,tt=!1,on=n}}}function qp(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;on=n}function Xl(n){if(n!==on)return!1;if(!tt)return qp(n),tt=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!nh(n.type,n.memoizedProps)),s&&(s=an)){if(ch(n))throw Hp(),Error(t(418));for(;s;)Bp(n,s),s=Zr(s.nextSibling)}if(qp(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(s===0){an=Zr(n.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}n=n.nextSibling}an=null}}else an=on?Zr(n.stateNode.nextSibling):null;return!0}function Hp(){for(var n=an;n;)n=Zr(n.nextSibling)}function eo(){an=on=null,tt=!1}function dh(n){Cn===null?Cn=[n]:Cn.push(n)}var ww=pe.ReactCurrentBatchConfig;function wa(n,s,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var d=c,f=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===f?s.ref:(s=function(w){var N=d.refs;w===null?delete N[f]:N[f]=w},s._stringRef=f,s)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function Zl(n,s){throw n=Object.prototype.toString.call(s),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function Wp(n){var s=n._init;return s(n._payload)}function Kp(n){function s(L,V){if(n){var M=L.deletions;M===null?(L.deletions=[V],L.flags|=16):M.push(V)}}function a(L,V){if(!n)return null;for(;V!==null;)s(L,V),V=V.sibling;return null}function c(L,V){for(L=new Map;V!==null;)V.key!==null?L.set(V.key,V):L.set(V.index,V),V=V.sibling;return L}function d(L,V){return L=cs(L,V),L.index=0,L.sibling=null,L}function f(L,V,M){return L.index=M,n?(M=L.alternate,M!==null?(M=M.index,M<V?(L.flags|=2,V):M):(L.flags|=2,V)):(L.flags|=1048576,V)}function w(L){return n&&L.alternate===null&&(L.flags|=2),L}function N(L,V,M,X){return V===null||V.tag!==6?(V=rd(M,L.mode,X),V.return=L,V):(V=d(V,M),V.return=L,V)}function b(L,V,M,X){var me=M.type;return me===P?Q(L,V,M.props.children,X,M.key):V!==null&&(V.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===ae&&Wp(me)===V.type)?(X=d(V,M.props),X.ref=wa(L,V,M),X.return=L,X):(X=Tu(M.type,M.key,M.props,null,L.mode,X),X.ref=wa(L,V,M),X.return=L,X)}function U(L,V,M,X){return V===null||V.tag!==4||V.stateNode.containerInfo!==M.containerInfo||V.stateNode.implementation!==M.implementation?(V=sd(M,L.mode,X),V.return=L,V):(V=d(V,M.children||[]),V.return=L,V)}function Q(L,V,M,X,me){return V===null||V.tag!==7?(V=oi(M,L.mode,X,me),V.return=L,V):(V=d(V,M),V.return=L,V)}function J(L,V,M){if(typeof V=="string"&&V!==""||typeof V=="number")return V=rd(""+V,L.mode,M),V.return=L,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case ie:return M=Tu(V.type,V.key,V.props,null,L.mode,M),M.ref=wa(L,null,V),M.return=L,M;case ve:return V=sd(V,L.mode,M),V.return=L,V;case ae:var X=V._init;return J(L,X(V._payload),M)}if(at(V)||de(V))return V=oi(V,L.mode,M,null),V.return=L,V;Zl(L,V)}return null}function G(L,V,M,X){var me=V!==null?V.key:null;if(typeof M=="string"&&M!==""||typeof M=="number")return me!==null?null:N(L,V,""+M,X);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case ie:return M.key===me?b(L,V,M,X):null;case ve:return M.key===me?U(L,V,M,X):null;case ae:return me=M._init,G(L,V,me(M._payload),X)}if(at(M)||de(M))return me!==null?null:Q(L,V,M,X,null);Zl(L,M)}return null}function se(L,V,M,X,me){if(typeof X=="string"&&X!==""||typeof X=="number")return L=L.get(M)||null,N(V,L,""+X,me);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case ie:return L=L.get(X.key===null?M:X.key)||null,b(V,L,X,me);case ve:return L=L.get(X.key===null?M:X.key)||null,U(V,L,X,me);case ae:var _e=X._init;return se(L,V,M,_e(X._payload),me)}if(at(X)||de(X))return L=L.get(M)||null,Q(V,L,X,me,null);Zl(V,X)}return null}function ce(L,V,M,X){for(var me=null,_e=null,we=V,Te=V=0,It=null;we!==null&&Te<M.length;Te++){we.index>Te?(It=we,we=null):It=we.sibling;var Be=G(L,we,M[Te],X);if(Be===null){we===null&&(we=It);break}n&&we&&Be.alternate===null&&s(L,we),V=f(Be,V,Te),_e===null?me=Be:_e.sibling=Be,_e=Be,we=It}if(Te===M.length)return a(L,we),tt&&Xs(L,Te),me;if(we===null){for(;Te<M.length;Te++)we=J(L,M[Te],X),we!==null&&(V=f(we,V,Te),_e===null?me=we:_e.sibling=we,_e=we);return tt&&Xs(L,Te),me}for(we=c(L,we);Te<M.length;Te++)It=se(we,L,Te,M[Te],X),It!==null&&(n&&It.alternate!==null&&we.delete(It.key===null?Te:It.key),V=f(It,V,Te),_e===null?me=It:_e.sibling=It,_e=It);return n&&we.forEach(function(hs){return s(L,hs)}),tt&&Xs(L,Te),me}function fe(L,V,M,X){var me=de(M);if(typeof me!="function")throw Error(t(150));if(M=me.call(M),M==null)throw Error(t(151));for(var _e=me=null,we=V,Te=V=0,It=null,Be=M.next();we!==null&&!Be.done;Te++,Be=M.next()){we.index>Te?(It=we,we=null):It=we.sibling;var hs=G(L,we,Be.value,X);if(hs===null){we===null&&(we=It);break}n&&we&&hs.alternate===null&&s(L,we),V=f(hs,V,Te),_e===null?me=hs:_e.sibling=hs,_e=hs,we=It}if(Be.done)return a(L,we),tt&&Xs(L,Te),me;if(we===null){for(;!Be.done;Te++,Be=M.next())Be=J(L,Be.value,X),Be!==null&&(V=f(Be,V,Te),_e===null?me=Be:_e.sibling=Be,_e=Be);return tt&&Xs(L,Te),me}for(we=c(L,we);!Be.done;Te++,Be=M.next())Be=se(we,L,Te,Be.value,X),Be!==null&&(n&&Be.alternate!==null&&we.delete(Be.key===null?Te:Be.key),V=f(Be,V,Te),_e===null?me=Be:_e.sibling=Be,_e=Be);return n&&we.forEach(function(Zw){return s(L,Zw)}),tt&&Xs(L,Te),me}function ut(L,V,M,X){if(typeof M=="object"&&M!==null&&M.type===P&&M.key===null&&(M=M.props.children),typeof M=="object"&&M!==null){switch(M.$$typeof){case ie:e:{for(var me=M.key,_e=V;_e!==null;){if(_e.key===me){if(me=M.type,me===P){if(_e.tag===7){a(L,_e.sibling),V=d(_e,M.props.children),V.return=L,L=V;break e}}else if(_e.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===ae&&Wp(me)===_e.type){a(L,_e.sibling),V=d(_e,M.props),V.ref=wa(L,_e,M),V.return=L,L=V;break e}a(L,_e);break}else s(L,_e);_e=_e.sibling}M.type===P?(V=oi(M.props.children,L.mode,X,M.key),V.return=L,L=V):(X=Tu(M.type,M.key,M.props,null,L.mode,X),X.ref=wa(L,V,M),X.return=L,L=X)}return w(L);case ve:e:{for(_e=M.key;V!==null;){if(V.key===_e)if(V.tag===4&&V.stateNode.containerInfo===M.containerInfo&&V.stateNode.implementation===M.implementation){a(L,V.sibling),V=d(V,M.children||[]),V.return=L,L=V;break e}else{a(L,V);break}else s(L,V);V=V.sibling}V=sd(M,L.mode,X),V.return=L,L=V}return w(L);case ae:return _e=M._init,ut(L,V,_e(M._payload),X)}if(at(M))return ce(L,V,M,X);if(de(M))return fe(L,V,M,X);Zl(L,M)}return typeof M=="string"&&M!==""||typeof M=="number"?(M=""+M,V!==null&&V.tag===6?(a(L,V.sibling),V=d(V,M),V.return=L,L=V):(a(L,V),V=rd(M,L.mode,X),V.return=L,L=V),w(L)):a(L,V)}return ut}var to=Kp(!0),Gp=Kp(!1),eu=es(null),tu=null,no=null,fh=null;function ph(){fh=no=tu=null}function mh(n){var s=eu.current;Ze(eu),n._currentValue=s}function gh(n,s,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),n===a)break;n=n.return}}function ro(n,s){tu=n,fh=no=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&s)!==0&&(Kt=!0),n.firstContext=null)}function mn(n){var s=n._currentValue;if(fh!==n)if(n={context:n,memoizedValue:s,next:null},no===null){if(tu===null)throw Error(t(308));no=n,tu.dependencies={lanes:0,firstContext:n}}else no=no.next=n;return s}var Zs=null;function yh(n){Zs===null?Zs=[n]:Zs.push(n)}function Qp(n,s,a,c){var d=s.interleaved;return d===null?(a.next=a,yh(s)):(a.next=d.next,d.next=a),s.interleaved=a,xr(n,c)}function xr(n,s){n.lanes|=s;var a=n.alternate;for(a!==null&&(a.lanes|=s),a=n,n=n.return;n!==null;)n.childLanes|=s,a=n.alternate,a!==null&&(a.childLanes|=s),a=n,n=n.return;return a.tag===3?a.stateNode:null}var rs=!1;function vh(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Yp(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Tr(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function ss(n,s,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(ze&2)!==0){var d=c.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),c.pending=s,xr(n,a)}return d=c.interleaved,d===null?(s.next=s,yh(c)):(s.next=d.next,d.next=s),c.interleaved=s,xr(n,a)}function nu(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,ta(n,a)}}function Jp(n,s){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};f===null?d=f=w:f=f.next=w,a=a.next}while(a!==null);f===null?d=f=s:f=f.next=s}else d=f=s;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}function ru(n,s,a,c){var d=n.updateQueue;rs=!1;var f=d.firstBaseUpdate,w=d.lastBaseUpdate,N=d.shared.pending;if(N!==null){d.shared.pending=null;var b=N,U=b.next;b.next=null,w===null?f=U:w.next=U,w=b;var Q=n.alternate;Q!==null&&(Q=Q.updateQueue,N=Q.lastBaseUpdate,N!==w&&(N===null?Q.firstBaseUpdate=U:N.next=U,Q.lastBaseUpdate=b))}if(f!==null){var J=d.baseState;w=0,Q=U=b=null,N=f;do{var G=N.lane,se=N.eventTime;if((c&G)===G){Q!==null&&(Q=Q.next={eventTime:se,lane:0,tag:N.tag,payload:N.payload,callback:N.callback,next:null});e:{var ce=n,fe=N;switch(G=s,se=a,fe.tag){case 1:if(ce=fe.payload,typeof ce=="function"){J=ce.call(se,J,G);break e}J=ce;break e;case 3:ce.flags=ce.flags&-65537|128;case 0:if(ce=fe.payload,G=typeof ce=="function"?ce.call(se,J,G):ce,G==null)break e;J=le({},J,G);break e;case 2:rs=!0}}N.callback!==null&&N.lane!==0&&(n.flags|=64,G=d.effects,G===null?d.effects=[N]:G.push(N))}else se={eventTime:se,lane:G,tag:N.tag,payload:N.payload,callback:N.callback,next:null},Q===null?(U=Q=se,b=J):Q=Q.next=se,w|=G;if(N=N.next,N===null){if(N=d.shared.pending,N===null)break;G=N,N=G.next,G.next=null,d.lastBaseUpdate=G,d.shared.pending=null}}while(!0);if(Q===null&&(b=J),d.baseState=b,d.firstBaseUpdate=U,d.lastBaseUpdate=Q,s=d.shared.interleaved,s!==null){d=s;do w|=d.lane,d=d.next;while(d!==s)}else f===null&&(d.shared.lanes=0);ni|=w,n.lanes=w,n.memoizedState=J}}function Xp(n,s,a){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var c=n[s],d=c.callback;if(d!==null){if(c.callback=null,c=a,typeof d!="function")throw Error(t(191,d));d.call(c)}}}var Ea={},Xn=es(Ea),xa=es(Ea),Ta=es(Ea);function ei(n){if(n===Ea)throw Error(t(174));return n}function _h(n,s){switch(Qe(Ta,s),Qe(xa,n),Qe(Xn,Ea),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Si(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=Si(s,n)}Ze(Xn),Qe(Xn,s)}function so(){Ze(Xn),Ze(xa),Ze(Ta)}function Zp(n){ei(Ta.current);var s=ei(Xn.current),a=Si(s,n.type);s!==a&&(Qe(xa,n),Qe(Xn,a))}function wh(n){xa.current===n&&(Ze(Xn),Ze(xa))}var nt=es(0);function su(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Eh=[];function xh(){for(var n=0;n<Eh.length;n++)Eh[n]._workInProgressVersionPrimary=null;Eh.length=0}var iu=pe.ReactCurrentDispatcher,Th=pe.ReactCurrentBatchConfig,ti=0,rt=null,_t=null,xt=null,ou=!1,Ia=!1,Sa=0,Ew=0;function Ot(){throw Error(t(321))}function Ih(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!kn(n[a],s[a]))return!1;return!0}function Sh(n,s,a,c,d,f){if(ti=f,rt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,iu.current=n===null||n.memoizedState===null?Sw:Aw,n=a(c,d),Ia){f=0;do{if(Ia=!1,Sa=0,25<=f)throw Error(t(301));f+=1,xt=_t=null,s.updateQueue=null,iu.current=kw,n=a(c,d)}while(Ia)}if(iu.current=uu,s=_t!==null&&_t.next!==null,ti=0,xt=_t=rt=null,ou=!1,s)throw Error(t(300));return n}function Ah(){var n=Sa!==0;return Sa=0,n}function Zn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xt===null?rt.memoizedState=xt=n:xt=xt.next=n,xt}function gn(){if(_t===null){var n=rt.alternate;n=n!==null?n.memoizedState:null}else n=_t.next;var s=xt===null?rt.memoizedState:xt.next;if(s!==null)xt=s,_t=n;else{if(n===null)throw Error(t(310));_t=n,n={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},xt===null?rt.memoizedState=xt=n:xt=xt.next=n}return xt}function Aa(n,s){return typeof s=="function"?s(n):s}function kh(n){var s=gn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=_t,d=c.baseQueue,f=a.pending;if(f!==null){if(d!==null){var w=d.next;d.next=f.next,f.next=w}c.baseQueue=d=f,a.pending=null}if(d!==null){f=d.next,c=c.baseState;var N=w=null,b=null,U=f;do{var Q=U.lane;if((ti&Q)===Q)b!==null&&(b=b.next={lane:0,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),c=U.hasEagerState?U.eagerState:n(c,U.action);else{var J={lane:Q,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null};b===null?(N=b=J,w=c):b=b.next=J,rt.lanes|=Q,ni|=Q}U=U.next}while(U!==null&&U!==f);b===null?w=c:b.next=N,kn(c,s.memoizedState)||(Kt=!0),s.memoizedState=c,s.baseState=w,s.baseQueue=b,a.lastRenderedState=c}if(n=a.interleaved,n!==null){d=n;do f=d.lane,rt.lanes|=f,ni|=f,d=d.next;while(d!==n)}else d===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function Ch(n){var s=gn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,d=a.pending,f=s.memoizedState;if(d!==null){a.pending=null;var w=d=d.next;do f=n(f,w.action),w=w.next;while(w!==d);kn(f,s.memoizedState)||(Kt=!0),s.memoizedState=f,s.baseQueue===null&&(s.baseState=f),a.lastRenderedState=f}return[f,c]}function em(){}function tm(n,s){var a=rt,c=gn(),d=s(),f=!kn(c.memoizedState,d);if(f&&(c.memoizedState=d,Kt=!0),c=c.queue,Nh(sm.bind(null,a,c,n),[n]),c.getSnapshot!==s||f||xt!==null&&xt.memoizedState.tag&1){if(a.flags|=2048,ka(9,rm.bind(null,a,c,d,s),void 0,null),Tt===null)throw Error(t(349));(ti&30)!==0||nm(a,s,d)}return d}function nm(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=rt.updateQueue,s===null?(s={lastEffect:null,stores:null},rt.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function rm(n,s,a,c){s.value=a,s.getSnapshot=c,im(s)&&om(n)}function sm(n,s,a){return a(function(){im(s)&&om(n)})}function im(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!kn(n,a)}catch{return!0}}function om(n){var s=xr(n,1);s!==null&&bn(s,n,1,-1)}function am(n){var s=Zn();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Aa,lastRenderedState:n},s.queue=n,n=n.dispatch=Iw.bind(null,rt,n),[s.memoizedState,n]}function ka(n,s,a,c){return n={tag:n,create:s,destroy:a,deps:c,next:null},s=rt.updateQueue,s===null?(s={lastEffect:null,stores:null},rt.updateQueue=s,s.lastEffect=n.next=n):(a=s.lastEffect,a===null?s.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,s.lastEffect=n)),n}function lm(){return gn().memoizedState}function au(n,s,a,c){var d=Zn();rt.flags|=n,d.memoizedState=ka(1|s,a,void 0,c===void 0?null:c)}function lu(n,s,a,c){var d=gn();c=c===void 0?null:c;var f=void 0;if(_t!==null){var w=_t.memoizedState;if(f=w.destroy,c!==null&&Ih(c,w.deps)){d.memoizedState=ka(s,a,f,c);return}}rt.flags|=n,d.memoizedState=ka(1|s,a,f,c)}function um(n,s){return au(8390656,8,n,s)}function Nh(n,s){return lu(2048,8,n,s)}function cm(n,s){return lu(4,2,n,s)}function hm(n,s){return lu(4,4,n,s)}function dm(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function fm(n,s,a){return a=a!=null?a.concat([n]):null,lu(4,4,dm.bind(null,s,n),a)}function Rh(){}function pm(n,s){var a=gn();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&Ih(s,c[1])?c[0]:(a.memoizedState=[n,s],n)}function mm(n,s){var a=gn();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&Ih(s,c[1])?c[0]:(n=n(),a.memoizedState=[n,s],n)}function gm(n,s,a){return(ti&21)===0?(n.baseState&&(n.baseState=!1,Kt=!0),n.memoizedState=a):(kn(a,s)||(a=Zo(),rt.lanes|=a,ni|=a,n.baseState=!0),s)}function xw(n,s){var a=Me;Me=a!==0&&4>a?a:4,n(!0);var c=Th.transition;Th.transition={};try{n(!1),s()}finally{Me=a,Th.transition=c}}function ym(){return gn().memoizedState}function Tw(n,s,a){var c=ls(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},vm(n))_m(s,a);else if(a=Qp(n,s,a,c),a!==null){var d=qt();bn(a,n,c,d),wm(a,s,c)}}function Iw(n,s,a){var c=ls(n),d={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(vm(n))_m(s,d);else{var f=n.alternate;if(n.lanes===0&&(f===null||f.lanes===0)&&(f=s.lastRenderedReducer,f!==null))try{var w=s.lastRenderedState,N=f(w,a);if(d.hasEagerState=!0,d.eagerState=N,kn(N,w)){var b=s.interleaved;b===null?(d.next=d,yh(s)):(d.next=b.next,b.next=d),s.interleaved=d;return}}catch{}finally{}a=Qp(n,s,d,c),a!==null&&(d=qt(),bn(a,n,c,d),wm(a,s,c))}}function vm(n){var s=n.alternate;return n===rt||s!==null&&s===rt}function _m(n,s){Ia=ou=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function wm(n,s,a){if((a&4194240)!==0){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,ta(n,a)}}var uu={readContext:mn,useCallback:Ot,useContext:Ot,useEffect:Ot,useImperativeHandle:Ot,useInsertionEffect:Ot,useLayoutEffect:Ot,useMemo:Ot,useReducer:Ot,useRef:Ot,useState:Ot,useDebugValue:Ot,useDeferredValue:Ot,useTransition:Ot,useMutableSource:Ot,useSyncExternalStore:Ot,useId:Ot,unstable_isNewReconciler:!1},Sw={readContext:mn,useCallback:function(n,s){return Zn().memoizedState=[n,s===void 0?null:s],n},useContext:mn,useEffect:um,useImperativeHandle:function(n,s,a){return a=a!=null?a.concat([n]):null,au(4194308,4,dm.bind(null,s,n),a)},useLayoutEffect:function(n,s){return au(4194308,4,n,s)},useInsertionEffect:function(n,s){return au(4,2,n,s)},useMemo:function(n,s){var a=Zn();return s=s===void 0?null:s,n=n(),a.memoizedState=[n,s],n},useReducer:function(n,s,a){var c=Zn();return s=a!==void 0?a(s):s,c.memoizedState=c.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},c.queue=n,n=n.dispatch=Tw.bind(null,rt,n),[c.memoizedState,n]},useRef:function(n){var s=Zn();return n={current:n},s.memoizedState=n},useState:am,useDebugValue:Rh,useDeferredValue:function(n){return Zn().memoizedState=n},useTransition:function(){var n=am(!1),s=n[0];return n=xw.bind(null,n[1]),Zn().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,a){var c=rt,d=Zn();if(tt){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),Tt===null)throw Error(t(349));(ti&30)!==0||nm(c,s,a)}d.memoizedState=a;var f={value:a,getSnapshot:s};return d.queue=f,um(sm.bind(null,c,f,n),[n]),c.flags|=2048,ka(9,rm.bind(null,c,f,a,s),void 0,null),a},useId:function(){var n=Zn(),s=Tt.identifierPrefix;if(tt){var a=Er,c=wr;a=(c&~(1<<32-en(c)-1)).toString(32)+a,s=":"+s+"R"+a,a=Sa++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=Ew++,s=":"+s+"r"+a.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},Aw={readContext:mn,useCallback:pm,useContext:mn,useEffect:Nh,useImperativeHandle:fm,useInsertionEffect:cm,useLayoutEffect:hm,useMemo:mm,useReducer:kh,useRef:lm,useState:function(){return kh(Aa)},useDebugValue:Rh,useDeferredValue:function(n){var s=gn();return gm(s,_t.memoizedState,n)},useTransition:function(){var n=kh(Aa)[0],s=gn().memoizedState;return[n,s]},useMutableSource:em,useSyncExternalStore:tm,useId:ym,unstable_isNewReconciler:!1},kw={readContext:mn,useCallback:pm,useContext:mn,useEffect:Nh,useImperativeHandle:fm,useInsertionEffect:cm,useLayoutEffect:hm,useMemo:mm,useReducer:Ch,useRef:lm,useState:function(){return Ch(Aa)},useDebugValue:Rh,useDeferredValue:function(n){var s=gn();return _t===null?s.memoizedState=n:gm(s,_t.memoizedState,n)},useTransition:function(){var n=Ch(Aa)[0],s=gn().memoizedState;return[n,s]},useMutableSource:em,useSyncExternalStore:tm,useId:ym,unstable_isNewReconciler:!1};function Nn(n,s){if(n&&n.defaultProps){s=le({},s),n=n.defaultProps;for(var a in n)s[a]===void 0&&(s[a]=n[a]);return s}return s}function Ph(n,s,a,c){s=n.memoizedState,a=a(c,s),a=a==null?s:le({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var cu={isMounted:function(n){return(n=n._reactInternals)?Sn(n)===n:!1},enqueueSetState:function(n,s,a){n=n._reactInternals;var c=qt(),d=ls(n),f=Tr(c,d);f.payload=s,a!=null&&(f.callback=a),s=ss(n,f,d),s!==null&&(bn(s,n,d,c),nu(s,n,d))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var c=qt(),d=ls(n),f=Tr(c,d);f.tag=1,f.payload=s,a!=null&&(f.callback=a),s=ss(n,f,d),s!==null&&(bn(s,n,d,c),nu(s,n,d))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=qt(),c=ls(n),d=Tr(a,c);d.tag=2,s!=null&&(d.callback=s),s=ss(n,d,c),s!==null&&(bn(s,n,c,a),nu(s,n,c))}};function Em(n,s,a,c,d,f,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,f,w):s.prototype&&s.prototype.isPureReactComponent?!fa(a,c)||!fa(d,f):!0}function xm(n,s,a){var c=!1,d=ts,f=s.contextType;return typeof f=="object"&&f!==null?f=mn(f):(d=Wt(s)?Ys:Vt.current,c=s.contextTypes,f=(c=c!=null)?Ji(n,d):ts),s=new s(a,f),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=cu,n.stateNode=s,s._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=d,n.__reactInternalMemoizedMaskedChildContext=f),s}function Tm(n,s,a,c){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,c),s.state!==n&&cu.enqueueReplaceState(s,s.state,null)}function bh(n,s,a,c){var d=n.stateNode;d.props=a,d.state=n.memoizedState,d.refs={},vh(n);var f=s.contextType;typeof f=="object"&&f!==null?d.context=mn(f):(f=Wt(s)?Ys:Vt.current,d.context=Ji(n,f)),d.state=n.memoizedState,f=s.getDerivedStateFromProps,typeof f=="function"&&(Ph(n,s,f,a),d.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(s=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),s!==d.state&&cu.enqueueReplaceState(d,d.state,null),ru(n,a,d,c),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308)}function io(n,s){try{var a="",c=s;do a+=De(c),c=c.return;while(c);var d=a}catch(f){d=`
Error generating stack: `+f.message+`
`+f.stack}return{value:n,source:s,stack:d,digest:null}}function Dh(n,s,a){return{value:n,source:null,stack:a??null,digest:s??null}}function Vh(n,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var Cw=typeof WeakMap=="function"?WeakMap:Map;function Im(n,s,a){a=Tr(-1,a),a.tag=3,a.payload={element:null};var c=s.value;return a.callback=function(){yu||(yu=!0,Qh=c),Vh(n,s)},a}function Sm(n,s,a){a=Tr(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var d=s.value;a.payload=function(){return c(d)},a.callback=function(){Vh(n,s)}}var f=n.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(a.callback=function(){Vh(n,s),typeof c!="function"&&(os===null?os=new Set([this]):os.add(this));var w=s.stack;this.componentDidCatch(s.value,{componentStack:w!==null?w:""})}),a}function Am(n,s,a){var c=n.pingCache;if(c===null){c=n.pingCache=new Cw;var d=new Set;c.set(s,d)}else d=c.get(s),d===void 0&&(d=new Set,c.set(s,d));d.has(a)||(d.add(a),n=Bw.bind(null,n,s,a),s.then(n,n))}function km(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function Cm(n,s,a,c,d){return(n.mode&1)===0?(n===s?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=Tr(-1,1),s.tag=2,ss(a,s,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=d,n)}var Nw=pe.ReactCurrentOwner,Kt=!1;function $t(n,s,a,c){s.child=n===null?Gp(s,null,a,c):to(s,n.child,a,c)}function Nm(n,s,a,c,d){a=a.render;var f=s.ref;return ro(s,d),c=Sh(n,s,a,c,f,d),a=Ah(),n!==null&&!Kt?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~d,Ir(n,s,d)):(tt&&a&&lh(s),s.flags|=1,$t(n,s,c,d),s.child)}function Rm(n,s,a,c,d){if(n===null){var f=a.type;return typeof f=="function"&&!nd(f)&&f.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=f,Pm(n,s,f,c,d)):(n=Tu(a.type,null,c,s,s.mode,d),n.ref=s.ref,n.return=s,s.child=n)}if(f=n.child,(n.lanes&d)===0){var w=f.memoizedProps;if(a=a.compare,a=a!==null?a:fa,a(w,c)&&n.ref===s.ref)return Ir(n,s,d)}return s.flags|=1,n=cs(f,c),n.ref=s.ref,n.return=s,s.child=n}function Pm(n,s,a,c,d){if(n!==null){var f=n.memoizedProps;if(fa(f,c)&&n.ref===s.ref)if(Kt=!1,s.pendingProps=c=f,(n.lanes&d)!==0)(n.flags&131072)!==0&&(Kt=!0);else return s.lanes=n.lanes,Ir(n,s,d)}return Oh(n,s,a,c,d)}function bm(n,s,a){var c=s.pendingProps,d=c.children,f=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qe(ao,ln),ln|=a;else{if((a&1073741824)===0)return n=f!==null?f.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,Qe(ao,ln),ln|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=f!==null?f.baseLanes:a,Qe(ao,ln),ln|=c}else f!==null?(c=f.baseLanes|a,s.memoizedState=null):c=a,Qe(ao,ln),ln|=c;return $t(n,s,d,a),s.child}function Dm(n,s){var a=s.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function Oh(n,s,a,c,d){var f=Wt(a)?Ys:Vt.current;return f=Ji(s,f),ro(s,d),a=Sh(n,s,a,c,f,d),c=Ah(),n!==null&&!Kt?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~d,Ir(n,s,d)):(tt&&c&&lh(s),s.flags|=1,$t(n,s,a,d),s.child)}function Vm(n,s,a,c,d){if(Wt(a)){var f=!0;Gl(s)}else f=!1;if(ro(s,d),s.stateNode===null)du(n,s),xm(s,a,c),bh(s,a,c,d),c=!0;else if(n===null){var w=s.stateNode,N=s.memoizedProps;w.props=N;var b=w.context,U=a.contextType;typeof U=="object"&&U!==null?U=mn(U):(U=Wt(a)?Ys:Vt.current,U=Ji(s,U));var Q=a.getDerivedStateFromProps,J=typeof Q=="function"||typeof w.getSnapshotBeforeUpdate=="function";J||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(N!==c||b!==U)&&Tm(s,w,c,U),rs=!1;var G=s.memoizedState;w.state=G,ru(s,c,w,d),b=s.memoizedState,N!==c||G!==b||Ht.current||rs?(typeof Q=="function"&&(Ph(s,a,Q,c),b=s.memoizedState),(N=rs||Em(s,a,N,c,G,b,U))?(J||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(s.flags|=4194308)):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=b),w.props=c,w.state=b,w.context=U,c=N):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{w=s.stateNode,Yp(n,s),N=s.memoizedProps,U=s.type===s.elementType?N:Nn(s.type,N),w.props=U,J=s.pendingProps,G=w.context,b=a.contextType,typeof b=="object"&&b!==null?b=mn(b):(b=Wt(a)?Ys:Vt.current,b=Ji(s,b));var se=a.getDerivedStateFromProps;(Q=typeof se=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(N!==J||G!==b)&&Tm(s,w,c,b),rs=!1,G=s.memoizedState,w.state=G,ru(s,c,w,d);var ce=s.memoizedState;N!==J||G!==ce||Ht.current||rs?(typeof se=="function"&&(Ph(s,a,se,c),ce=s.memoizedState),(U=rs||Em(s,a,U,c,G,ce,b)||!1)?(Q||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(c,ce,b),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(c,ce,b)),typeof w.componentDidUpdate=="function"&&(s.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof w.componentDidUpdate!="function"||N===n.memoizedProps&&G===n.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||N===n.memoizedProps&&G===n.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=ce),w.props=c,w.state=ce,w.context=b,c=U):(typeof w.componentDidUpdate!="function"||N===n.memoizedProps&&G===n.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||N===n.memoizedProps&&G===n.memoizedState||(s.flags|=1024),c=!1)}return Lh(n,s,a,c,f,d)}function Lh(n,s,a,c,d,f){Dm(n,s);var w=(s.flags&128)!==0;if(!c&&!w)return d&&Fp(s,a,!1),Ir(n,s,f);c=s.stateNode,Nw.current=s;var N=w&&typeof a.getDerivedStateFromError!="function"?null:c.render();return s.flags|=1,n!==null&&w?(s.child=to(s,n.child,null,f),s.child=to(s,null,N,f)):$t(n,s,N,f),s.memoizedState=c.state,d&&Fp(s,a,!0),s.child}function Om(n){var s=n.stateNode;s.pendingContext?jp(n,s.pendingContext,s.pendingContext!==s.context):s.context&&jp(n,s.context,!1),_h(n,s.containerInfo)}function Lm(n,s,a,c,d){return eo(),dh(d),s.flags|=256,$t(n,s,a,c),s.child}var jh={dehydrated:null,treeContext:null,retryLane:0};function Mh(n){return{baseLanes:n,cachePool:null,transitions:null}}function jm(n,s,a){var c=s.pendingProps,d=nt.current,f=!1,w=(s.flags&128)!==0,N;if((N=w)||(N=n!==null&&n.memoizedState===null?!1:(d&2)!==0),N?(f=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(d|=1),Qe(nt,d&1),n===null)return hh(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((s.mode&1)===0?s.lanes=1:n.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(w=c.children,n=c.fallback,f?(c=s.mode,f=s.child,w={mode:"hidden",children:w},(c&1)===0&&f!==null?(f.childLanes=0,f.pendingProps=w):f=Iu(w,c,0,null),n=oi(n,c,a,null),f.return=s,n.return=s,f.sibling=n,s.child=f,s.child.memoizedState=Mh(a),s.memoizedState=jh,n):Fh(s,w));if(d=n.memoizedState,d!==null&&(N=d.dehydrated,N!==null))return Rw(n,s,w,c,N,d,a);if(f){f=c.fallback,w=s.mode,d=n.child,N=d.sibling;var b={mode:"hidden",children:c.children};return(w&1)===0&&s.child!==d?(c=s.child,c.childLanes=0,c.pendingProps=b,s.deletions=null):(c=cs(d,b),c.subtreeFlags=d.subtreeFlags&14680064),N!==null?f=cs(N,f):(f=oi(f,w,a,null),f.flags|=2),f.return=s,c.return=s,c.sibling=f,s.child=c,c=f,f=s.child,w=n.child.memoizedState,w=w===null?Mh(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},f.memoizedState=w,f.childLanes=n.childLanes&~a,s.memoizedState=jh,c}return f=n.child,n=f.sibling,c=cs(f,{mode:"visible",children:c.children}),(s.mode&1)===0&&(c.lanes=a),c.return=s,c.sibling=null,n!==null&&(a=s.deletions,a===null?(s.deletions=[n],s.flags|=16):a.push(n)),s.child=c,s.memoizedState=null,c}function Fh(n,s){return s=Iu({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function hu(n,s,a,c){return c!==null&&dh(c),to(s,n.child,null,a),n=Fh(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function Rw(n,s,a,c,d,f,w){if(a)return s.flags&256?(s.flags&=-257,c=Dh(Error(t(422))),hu(n,s,w,c)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(f=c.fallback,d=s.mode,c=Iu({mode:"visible",children:c.children},d,0,null),f=oi(f,d,w,null),f.flags|=2,c.return=s,f.return=s,c.sibling=f,s.child=c,(s.mode&1)!==0&&to(s,n.child,null,w),s.child.memoizedState=Mh(w),s.memoizedState=jh,f);if((s.mode&1)===0)return hu(n,s,w,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var N=c.dgst;return c=N,f=Error(t(419)),c=Dh(f,c,void 0),hu(n,s,w,c)}if(N=(w&n.childLanes)!==0,Kt||N){if(c=Tt,c!==null){switch(w&-w){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(c.suspendedLanes|w))!==0?0:d,d!==0&&d!==f.retryLane&&(f.retryLane=d,xr(n,d),bn(c,n,d,-1))}return td(),c=Dh(Error(t(421))),hu(n,s,w,c)}return d.data==="$?"?(s.flags|=128,s.child=n.child,s=$w.bind(null,n),d._reactRetry=s,null):(n=f.treeContext,an=Zr(d.nextSibling),on=s,tt=!0,Cn=null,n!==null&&(fn[pn++]=wr,fn[pn++]=Er,fn[pn++]=Js,wr=n.id,Er=n.overflow,Js=s),s=Fh(s,c.children),s.flags|=4096,s)}function Mm(n,s,a){n.lanes|=s;var c=n.alternate;c!==null&&(c.lanes|=s),gh(n.return,s,a)}function Uh(n,s,a,c,d){var f=n.memoizedState;f===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(f.isBackwards=s,f.rendering=null,f.renderingStartTime=0,f.last=c,f.tail=a,f.tailMode=d)}function Fm(n,s,a){var c=s.pendingProps,d=c.revealOrder,f=c.tail;if($t(n,s,c.children,a),c=nt.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Mm(n,a,s);else if(n.tag===19)Mm(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(Qe(nt,c),(s.mode&1)===0)s.memoizedState=null;else switch(d){case"forwards":for(a=s.child,d=null;a!==null;)n=a.alternate,n!==null&&su(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=s.child,s.child=null):(d=a.sibling,a.sibling=null),Uh(s,!1,d,a,f);break;case"backwards":for(a=null,d=s.child,s.child=null;d!==null;){if(n=d.alternate,n!==null&&su(n)===null){s.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}Uh(s,!0,a,null,f);break;case"together":Uh(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function du(n,s){(s.mode&1)===0&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function Ir(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),ni|=s.lanes,(a&s.childLanes)===0)return null;if(n!==null&&s.child!==n.child)throw Error(t(153));if(s.child!==null){for(n=s.child,a=cs(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=cs(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function Pw(n,s,a){switch(s.tag){case 3:Om(s),eo();break;case 5:Zp(s);break;case 1:Wt(s.type)&&Gl(s);break;case 4:_h(s,s.stateNode.containerInfo);break;case 10:var c=s.type._context,d=s.memoizedProps.value;Qe(eu,c._currentValue),c._currentValue=d;break;case 13:if(c=s.memoizedState,c!==null)return c.dehydrated!==null?(Qe(nt,nt.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?jm(n,s,a):(Qe(nt,nt.current&1),n=Ir(n,s,a),n!==null?n.sibling:null);Qe(nt,nt.current&1);break;case 19:if(c=(a&s.childLanes)!==0,(n.flags&128)!==0){if(c)return Fm(n,s,a);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Qe(nt,nt.current),c)break;return null;case 22:case 23:return s.lanes=0,bm(n,s,a)}return Ir(n,s,a)}var Um,zh,zm,Bm;Um=function(n,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},zh=function(){},zm=function(n,s,a,c){var d=n.memoizedProps;if(d!==c){n=s.stateNode,ei(Xn.current);var f=null;switch(a){case"input":d=Ti(n,d),c=Ti(n,c),f=[];break;case"select":d=le({},d,{value:void 0}),c=le({},c,{value:void 0}),f=[];break;case"textarea":d=Bo(n,d),c=Bo(n,c),f=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=Hl)}In(a,c);var w;a=null;for(U in d)if(!c.hasOwnProperty(U)&&d.hasOwnProperty(U)&&d[U]!=null)if(U==="style"){var N=d[U];for(w in N)N.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else U!=="dangerouslySetInnerHTML"&&U!=="children"&&U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&U!=="autoFocus"&&(o.hasOwnProperty(U)?f||(f=[]):(f=f||[]).push(U,null));for(U in c){var b=c[U];if(N=d!=null?d[U]:void 0,c.hasOwnProperty(U)&&b!==N&&(b!=null||N!=null))if(U==="style")if(N){for(w in N)!N.hasOwnProperty(w)||b&&b.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in b)b.hasOwnProperty(w)&&N[w]!==b[w]&&(a||(a={}),a[w]=b[w])}else a||(f||(f=[]),f.push(U,a)),a=b;else U==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,N=N?N.__html:void 0,b!=null&&N!==b&&(f=f||[]).push(U,b)):U==="children"?typeof b!="string"&&typeof b!="number"||(f=f||[]).push(U,""+b):U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&(o.hasOwnProperty(U)?(b!=null&&U==="onScroll"&&Xe("scroll",n),f||N===b||(f=[])):(f=f||[]).push(U,b))}a&&(f=f||[]).push("style",a);var U=f;(s.updateQueue=U)&&(s.flags|=4)}},Bm=function(n,s,a,c){a!==c&&(s.flags|=4)};function Ca(n,s){if(!tt)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Lt(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(s)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=c,n.childLanes=a,s}function bw(n,s,a){var c=s.pendingProps;switch(uh(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lt(s),null;case 1:return Wt(s.type)&&Kl(),Lt(s),null;case 3:return c=s.stateNode,so(),Ze(Ht),Ze(Vt),xh(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(Xl(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Cn!==null&&(Xh(Cn),Cn=null))),zh(n,s),Lt(s),null;case 5:wh(s);var d=ei(Ta.current);if(a=s.type,n!==null&&s.stateNode!=null)zm(n,s,a,c,d),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!c){if(s.stateNode===null)throw Error(t(166));return Lt(s),null}if(n=ei(Xn.current),Xl(s)){c=s.stateNode,a=s.type;var f=s.memoizedProps;switch(c[Jn]=s,c[va]=f,n=(s.mode&1)!==0,a){case"dialog":Xe("cancel",c),Xe("close",c);break;case"iframe":case"object":case"embed":Xe("load",c);break;case"video":case"audio":for(d=0;d<ma.length;d++)Xe(ma[d],c);break;case"source":Xe("error",c);break;case"img":case"image":case"link":Xe("error",c),Xe("load",c);break;case"details":Xe("toggle",c);break;case"input":gl(c,f),Xe("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!f.multiple},Xe("invalid",c);break;case"textarea":$o(c,f),Xe("invalid",c)}In(a,f),d=null;for(var w in f)if(f.hasOwnProperty(w)){var N=f[w];w==="children"?typeof N=="string"?c.textContent!==N&&(f.suppressHydrationWarning!==!0&&ql(c.textContent,N,n),d=["children",N]):typeof N=="number"&&c.textContent!==""+N&&(f.suppressHydrationWarning!==!0&&ql(c.textContent,N,n),d=["children",""+N]):o.hasOwnProperty(w)&&N!=null&&w==="onScroll"&&Xe("scroll",c)}switch(a){case"input":xi(c),zo(c,f,!0);break;case"textarea":xi(c),jr(c);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(c.onclick=Hl)}c=d,s.updateQueue=c,c!==null&&(s.flags|=4)}else{w=d.nodeType===9?d:d.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=qo(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=w.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=w.createElement(a,{is:c.is}):(n=w.createElement(a),a==="select"&&(w=n,c.multiple?w.multiple=!0:c.size&&(w.size=c.size))):n=w.createElementNS(n,a),n[Jn]=s,n[va]=c,Um(n,s,!1,!1),s.stateNode=n;e:{switch(w=ki(a,c),a){case"dialog":Xe("cancel",n),Xe("close",n),d=c;break;case"iframe":case"object":case"embed":Xe("load",n),d=c;break;case"video":case"audio":for(d=0;d<ma.length;d++)Xe(ma[d],n);d=c;break;case"source":Xe("error",n),d=c;break;case"img":case"image":case"link":Xe("error",n),Xe("load",n),d=c;break;case"details":Xe("toggle",n),d=c;break;case"input":gl(n,c),d=Ti(n,c),Xe("invalid",n);break;case"option":d=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},d=le({},c,{value:void 0}),Xe("invalid",n);break;case"textarea":$o(n,c),d=Bo(n,c),Xe("invalid",n);break;default:d=c}In(a,d),N=d;for(f in N)if(N.hasOwnProperty(f)){var b=N[f];f==="style"?Ai(n,b):f==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,b!=null&&vl(n,b)):f==="children"?typeof b=="string"?(a!=="textarea"||b!=="")&&Os(n,b):typeof b=="number"&&Os(n,""+b):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(o.hasOwnProperty(f)?b!=null&&f==="onScroll"&&Xe("scroll",n):b!=null&&ge(n,f,b,w))}switch(a){case"input":xi(n),zo(n,c,!1);break;case"textarea":xi(n),jr(n);break;case"option":c.value!=null&&n.setAttribute("value",""+Ue(c.value));break;case"select":n.multiple=!!c.multiple,f=c.value,f!=null?Tn(n,!!c.multiple,f,!1):c.defaultValue!=null&&Tn(n,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(n.onclick=Hl)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Lt(s),null;case 6:if(n&&s.stateNode!=null)Bm(n,s,n.memoizedProps,c);else{if(typeof c!="string"&&s.stateNode===null)throw Error(t(166));if(a=ei(Ta.current),ei(Xn.current),Xl(s)){if(c=s.stateNode,a=s.memoizedProps,c[Jn]=s,(f=c.nodeValue!==a)&&(n=on,n!==null))switch(n.tag){case 3:ql(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&ql(c.nodeValue,a,(n.mode&1)!==0)}f&&(s.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[Jn]=s,s.stateNode=c}return Lt(s),null;case 13:if(Ze(nt),c=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(tt&&an!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Hp(),eo(),s.flags|=98560,f=!1;else if(f=Xl(s),c!==null&&c.dehydrated!==null){if(n===null){if(!f)throw Error(t(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(t(317));f[Jn]=s}else eo(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Lt(s),f=!1}else Cn!==null&&(Xh(Cn),Cn=null),f=!0;if(!f)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(s.child.flags|=8192,(s.mode&1)!==0&&(n===null||(nt.current&1)!==0?wt===0&&(wt=3):td())),s.updateQueue!==null&&(s.flags|=4),Lt(s),null);case 4:return so(),zh(n,s),n===null&&ga(s.stateNode.containerInfo),Lt(s),null;case 10:return mh(s.type._context),Lt(s),null;case 17:return Wt(s.type)&&Kl(),Lt(s),null;case 19:if(Ze(nt),f=s.memoizedState,f===null)return Lt(s),null;if(c=(s.flags&128)!==0,w=f.rendering,w===null)if(c)Ca(f,!1);else{if(wt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(w=su(n),w!==null){for(s.flags|=128,Ca(f,!1),c=w.updateQueue,c!==null&&(s.updateQueue=c,s.flags|=4),s.subtreeFlags=0,c=a,a=s.child;a!==null;)f=a,n=c,f.flags&=14680066,w=f.alternate,w===null?(f.childLanes=0,f.lanes=n,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=w.childLanes,f.lanes=w.lanes,f.child=w.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=w.memoizedProps,f.memoizedState=w.memoizedState,f.updateQueue=w.updateQueue,f.type=w.type,n=w.dependencies,f.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Qe(nt,nt.current&1|2),s.child}n=n.sibling}f.tail!==null&&Je()>lo&&(s.flags|=128,c=!0,Ca(f,!1),s.lanes=4194304)}else{if(!c)if(n=su(w),n!==null){if(s.flags|=128,c=!0,a=n.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),Ca(f,!0),f.tail===null&&f.tailMode==="hidden"&&!w.alternate&&!tt)return Lt(s),null}else 2*Je()-f.renderingStartTime>lo&&a!==1073741824&&(s.flags|=128,c=!0,Ca(f,!1),s.lanes=4194304);f.isBackwards?(w.sibling=s.child,s.child=w):(a=f.last,a!==null?a.sibling=w:s.child=w,f.last=w)}return f.tail!==null?(s=f.tail,f.rendering=s,f.tail=s.sibling,f.renderingStartTime=Je(),s.sibling=null,a=nt.current,Qe(nt,c?a&1|2:a&1),s):(Lt(s),null);case 22:case 23:return ed(),c=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(s.flags|=8192),c&&(s.mode&1)!==0?(ln&1073741824)!==0&&(Lt(s),s.subtreeFlags&6&&(s.flags|=8192)):Lt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function Dw(n,s){switch(uh(s),s.tag){case 1:return Wt(s.type)&&Kl(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return so(),Ze(Ht),Ze(Vt),xh(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 5:return wh(s),null;case 13:if(Ze(nt),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(t(340));eo()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return Ze(nt),null;case 4:return so(),null;case 10:return mh(s.type._context),null;case 22:case 23:return ed(),null;case 24:return null;default:return null}}var fu=!1,jt=!1,Vw=typeof WeakSet=="function"?WeakSet:Set,ue=null;function oo(n,s){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){ot(n,s,c)}else a.current=null}function Bh(n,s,a){try{a()}catch(c){ot(n,s,c)}}var $m=!1;function Ow(n,s){if(eh=mr,n=Ep(),Wc(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,f=c.focusNode;c=c.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var w=0,N=-1,b=-1,U=0,Q=0,J=n,G=null;t:for(;;){for(var se;J!==a||d!==0&&J.nodeType!==3||(N=w+d),J!==f||c!==0&&J.nodeType!==3||(b=w+c),J.nodeType===3&&(w+=J.nodeValue.length),(se=J.firstChild)!==null;)G=J,J=se;for(;;){if(J===n)break t;if(G===a&&++U===d&&(N=w),G===f&&++Q===c&&(b=w),(se=J.nextSibling)!==null)break;J=G,G=J.parentNode}J=se}a=N===-1||b===-1?null:{start:N,end:b}}else a=null}a=a||{start:0,end:0}}else a=null;for(th={focusedElem:n,selectionRange:a},mr=!1,ue=s;ue!==null;)if(s=ue,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,ue=n;else for(;ue!==null;){s=ue;try{var ce=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(ce!==null){var fe=ce.memoizedProps,ut=ce.memoizedState,L=s.stateNode,V=L.getSnapshotBeforeUpdate(s.elementType===s.type?fe:Nn(s.type,fe),ut);L.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var M=s.stateNode.containerInfo;M.nodeType===1?M.textContent="":M.nodeType===9&&M.documentElement&&M.removeChild(M.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(X){ot(s,s.return,X)}if(n=s.sibling,n!==null){n.return=s.return,ue=n;break}ue=s.return}return ce=$m,$m=!1,ce}function Na(n,s,a){var c=s.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&n)===n){var f=d.destroy;d.destroy=void 0,f!==void 0&&Bh(s,a,f)}d=d.next}while(d!==c)}}function pu(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==s)}}function $h(n){var s=n.ref;if(s!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof s=="function"?s(n):s.current=n}}function qm(n){var s=n.alternate;s!==null&&(n.alternate=null,qm(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[Jn],delete s[va],delete s[ih],delete s[yw],delete s[vw])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Hm(n){return n.tag===5||n.tag===3||n.tag===4}function Wm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Hm(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function qh(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(n,s):a.insertBefore(n,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(n,a)):(s=a,s.appendChild(n)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Hl));else if(c!==4&&(n=n.child,n!==null))for(qh(n,s,a),n=n.sibling;n!==null;)qh(n,s,a),n=n.sibling}function Hh(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(Hh(n,s,a),n=n.sibling;n!==null;)Hh(n,s,a),n=n.sibling}var Ct=null,Rn=!1;function is(n,s,a){for(a=a.child;a!==null;)Km(n,s,a),a=a.sibling}function Km(n,s,a){if(Zt&&typeof Zt.onCommitFiberUnmount=="function")try{Zt.onCommitFiberUnmount(Us,a)}catch{}switch(a.tag){case 5:jt||oo(a,s);case 6:var c=Ct,d=Rn;Ct=null,is(n,s,a),Ct=c,Rn=d,Ct!==null&&(Rn?(n=Ct,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Ct.removeChild(a.stateNode));break;case 18:Ct!==null&&(Rn?(n=Ct,a=a.stateNode,n.nodeType===8?sh(n.parentNode,a):n.nodeType===1&&sh(n,a),Qr(n)):sh(Ct,a.stateNode));break;case 4:c=Ct,d=Rn,Ct=a.stateNode.containerInfo,Rn=!0,is(n,s,a),Ct=c,Rn=d;break;case 0:case 11:case 14:case 15:if(!jt&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var f=d,w=f.destroy;f=f.tag,w!==void 0&&((f&2)!==0||(f&4)!==0)&&Bh(a,s,w),d=d.next}while(d!==c)}is(n,s,a);break;case 1:if(!jt&&(oo(a,s),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(N){ot(a,s,N)}is(n,s,a);break;case 21:is(n,s,a);break;case 22:a.mode&1?(jt=(c=jt)||a.memoizedState!==null,is(n,s,a),jt=c):is(n,s,a);break;default:is(n,s,a)}}function Gm(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new Vw),s.forEach(function(c){var d=qw.bind(null,n,c);a.has(c)||(a.add(c),c.then(d,d))})}}function Pn(n,s){var a=s.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];try{var f=n,w=s,N=w;e:for(;N!==null;){switch(N.tag){case 5:Ct=N.stateNode,Rn=!1;break e;case 3:Ct=N.stateNode.containerInfo,Rn=!0;break e;case 4:Ct=N.stateNode.containerInfo,Rn=!0;break e}N=N.return}if(Ct===null)throw Error(t(160));Km(f,w,d),Ct=null,Rn=!1;var b=d.alternate;b!==null&&(b.return=null),d.return=null}catch(U){ot(d,s,U)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Qm(s,n),s=s.sibling}function Qm(n,s){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Pn(s,n),er(n),c&4){try{Na(3,n,n.return),pu(3,n)}catch(fe){ot(n,n.return,fe)}try{Na(5,n,n.return)}catch(fe){ot(n,n.return,fe)}}break;case 1:Pn(s,n),er(n),c&512&&a!==null&&oo(a,a.return);break;case 5:if(Pn(s,n),er(n),c&512&&a!==null&&oo(a,a.return),n.flags&32){var d=n.stateNode;try{Os(d,"")}catch(fe){ot(n,n.return,fe)}}if(c&4&&(d=n.stateNode,d!=null)){var f=n.memoizedProps,w=a!==null?a.memoizedProps:f,N=n.type,b=n.updateQueue;if(n.updateQueue=null,b!==null)try{N==="input"&&f.type==="radio"&&f.name!=null&&Ii(d,f),ki(N,w);var U=ki(N,f);for(w=0;w<b.length;w+=2){var Q=b[w],J=b[w+1];Q==="style"?Ai(d,J):Q==="dangerouslySetInnerHTML"?vl(d,J):Q==="children"?Os(d,J):ge(d,Q,J,U)}switch(N){case"input":Vs(d,f);break;case"textarea":yl(d,f);break;case"select":var G=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!f.multiple;var se=f.value;se!=null?Tn(d,!!f.multiple,se,!1):G!==!!f.multiple&&(f.defaultValue!=null?Tn(d,!!f.multiple,f.defaultValue,!0):Tn(d,!!f.multiple,f.multiple?[]:"",!1))}d[va]=f}catch(fe){ot(n,n.return,fe)}}break;case 6:if(Pn(s,n),er(n),c&4){if(n.stateNode===null)throw Error(t(162));d=n.stateNode,f=n.memoizedProps;try{d.nodeValue=f}catch(fe){ot(n,n.return,fe)}}break;case 3:if(Pn(s,n),er(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Qr(s.containerInfo)}catch(fe){ot(n,n.return,fe)}break;case 4:Pn(s,n),er(n);break;case 13:Pn(s,n),er(n),d=n.child,d.flags&8192&&(f=d.memoizedState!==null,d.stateNode.isHidden=f,!f||d.alternate!==null&&d.alternate.memoizedState!==null||(Gh=Je())),c&4&&Gm(n);break;case 22:if(Q=a!==null&&a.memoizedState!==null,n.mode&1?(jt=(U=jt)||Q,Pn(s,n),jt=U):Pn(s,n),er(n),c&8192){if(U=n.memoizedState!==null,(n.stateNode.isHidden=U)&&!Q&&(n.mode&1)!==0)for(ue=n,Q=n.child;Q!==null;){for(J=ue=Q;ue!==null;){switch(G=ue,se=G.child,G.tag){case 0:case 11:case 14:case 15:Na(4,G,G.return);break;case 1:oo(G,G.return);var ce=G.stateNode;if(typeof ce.componentWillUnmount=="function"){c=G,a=G.return;try{s=c,ce.props=s.memoizedProps,ce.state=s.memoizedState,ce.componentWillUnmount()}catch(fe){ot(c,a,fe)}}break;case 5:oo(G,G.return);break;case 22:if(G.memoizedState!==null){Xm(J);continue}}se!==null?(se.return=G,ue=se):Xm(J)}Q=Q.sibling}e:for(Q=null,J=n;;){if(J.tag===5){if(Q===null){Q=J;try{d=J.stateNode,U?(f=d.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(N=J.stateNode,b=J.memoizedProps.style,w=b!=null&&b.hasOwnProperty("display")?b.display:null,N.style.display=Ur("display",w))}catch(fe){ot(n,n.return,fe)}}}else if(J.tag===6){if(Q===null)try{J.stateNode.nodeValue=U?"":J.memoizedProps}catch(fe){ot(n,n.return,fe)}}else if((J.tag!==22&&J.tag!==23||J.memoizedState===null||J===n)&&J.child!==null){J.child.return=J,J=J.child;continue}if(J===n)break e;for(;J.sibling===null;){if(J.return===null||J.return===n)break e;Q===J&&(Q=null),J=J.return}Q===J&&(Q=null),J.sibling.return=J.return,J=J.sibling}}break;case 19:Pn(s,n),er(n),c&4&&Gm(n);break;case 21:break;default:Pn(s,n),er(n)}}function er(n){var s=n.flags;if(s&2){try{e:{for(var a=n.return;a!==null;){if(Hm(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(Os(d,""),c.flags&=-33);var f=Wm(n);Hh(n,f,d);break;case 3:case 4:var w=c.stateNode.containerInfo,N=Wm(n);qh(n,N,w);break;default:throw Error(t(161))}}catch(b){ot(n,n.return,b)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function Lw(n,s,a){ue=n,Ym(n)}function Ym(n,s,a){for(var c=(n.mode&1)!==0;ue!==null;){var d=ue,f=d.child;if(d.tag===22&&c){var w=d.memoizedState!==null||fu;if(!w){var N=d.alternate,b=N!==null&&N.memoizedState!==null||jt;N=fu;var U=jt;if(fu=w,(jt=b)&&!U)for(ue=d;ue!==null;)w=ue,b=w.child,w.tag===22&&w.memoizedState!==null?Zm(d):b!==null?(b.return=w,ue=b):Zm(d);for(;f!==null;)ue=f,Ym(f),f=f.sibling;ue=d,fu=N,jt=U}Jm(n)}else(d.subtreeFlags&8772)!==0&&f!==null?(f.return=d,ue=f):Jm(n)}}function Jm(n){for(;ue!==null;){var s=ue;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:jt||pu(5,s);break;case 1:var c=s.stateNode;if(s.flags&4&&!jt)if(a===null)c.componentDidMount();else{var d=s.elementType===s.type?a.memoizedProps:Nn(s.type,a.memoizedProps);c.componentDidUpdate(d,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var f=s.updateQueue;f!==null&&Xp(s,f,c);break;case 3:var w=s.updateQueue;if(w!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}Xp(s,w,a)}break;case 5:var N=s.stateNode;if(a===null&&s.flags&4){a=N;var b=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":b.autoFocus&&a.focus();break;case"img":b.src&&(a.src=b.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var U=s.alternate;if(U!==null){var Q=U.memoizedState;if(Q!==null){var J=Q.dehydrated;J!==null&&Qr(J)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}jt||s.flags&512&&$h(s)}catch(G){ot(s,s.return,G)}}if(s===n){ue=null;break}if(a=s.sibling,a!==null){a.return=s.return,ue=a;break}ue=s.return}}function Xm(n){for(;ue!==null;){var s=ue;if(s===n){ue=null;break}var a=s.sibling;if(a!==null){a.return=s.return,ue=a;break}ue=s.return}}function Zm(n){for(;ue!==null;){var s=ue;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{pu(4,s)}catch(b){ot(s,a,b)}break;case 1:var c=s.stateNode;if(typeof c.componentDidMount=="function"){var d=s.return;try{c.componentDidMount()}catch(b){ot(s,d,b)}}var f=s.return;try{$h(s)}catch(b){ot(s,f,b)}break;case 5:var w=s.return;try{$h(s)}catch(b){ot(s,w,b)}}}catch(b){ot(s,s.return,b)}if(s===n){ue=null;break}var N=s.sibling;if(N!==null){N.return=s.return,ue=N;break}ue=s.return}}var jw=Math.ceil,mu=pe.ReactCurrentDispatcher,Wh=pe.ReactCurrentOwner,yn=pe.ReactCurrentBatchConfig,ze=0,Tt=null,pt=null,Nt=0,ln=0,ao=es(0),wt=0,Ra=null,ni=0,gu=0,Kh=0,Pa=null,Gt=null,Gh=0,lo=1/0,Sr=null,yu=!1,Qh=null,os=null,vu=!1,as=null,_u=0,ba=0,Yh=null,wu=-1,Eu=0;function qt(){return(ze&6)!==0?Je():wu!==-1?wu:wu=Je()}function ls(n){return(n.mode&1)===0?1:(ze&2)!==0&&Nt!==0?Nt&-Nt:ww.transition!==null?(Eu===0&&(Eu=Zo()),Eu):(n=Me,n!==0||(n=window.event,n=n===void 0?16:ji(n.type)),n)}function bn(n,s,a,c){if(50<ba)throw ba=0,Yh=null,Error(t(185));qs(n,a,c),((ze&2)===0||n!==Tt)&&(n===Tt&&((ze&2)===0&&(gu|=a),wt===4&&us(n,Nt)),Qt(n,c),a===1&&ze===0&&(s.mode&1)===0&&(lo=Je()+500,Ql&&ns()))}function Qt(n,s){var a=n.callbackNode;$s(n,s);var c=dr(n,n===Tt?Nt:0);if(c===0)a!==null&&Ri(a),n.callbackNode=null,n.callbackPriority=0;else if(s=c&-c,n.callbackPriority!==s){if(a!=null&&Ri(a),s===1)n.tag===0?_w(tg.bind(null,n)):Up(tg.bind(null,n)),mw(function(){(ze&6)===0&&ns()}),a=null;else{switch(zn(c)){case 1:a=Pi;break;case 4:a=Yo;break;case 16:a=Fs;break;case 536870912:a=bi;break;default:a=Fs}a=ug(a,eg.bind(null,n))}n.callbackPriority=s,n.callbackNode=a}}function eg(n,s){if(wu=-1,Eu=0,(ze&6)!==0)throw Error(t(327));var a=n.callbackNode;if(uo()&&n.callbackNode!==a)return null;var c=dr(n,n===Tt?Nt:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||s)s=xu(n,c);else{s=c;var d=ze;ze|=2;var f=rg();(Tt!==n||Nt!==s)&&(Sr=null,lo=Je()+500,si(n,s));do try{Uw();break}catch(N){ng(n,N)}while(!0);ph(),mu.current=f,ze=d,pt!==null?s=0:(Tt=null,Nt=0,s=wt)}if(s!==0){if(s===2&&(d=Xo(n),d!==0&&(c=d,s=Jh(n,d))),s===1)throw a=Ra,si(n,0),us(n,c),Qt(n,Je()),a;if(s===6)us(n,c);else{if(d=n.current.alternate,(c&30)===0&&!Mw(d)&&(s=xu(n,c),s===2&&(f=Xo(n),f!==0&&(c=f,s=Jh(n,f))),s===1))throw a=Ra,si(n,0),us(n,c),Qt(n,Je()),a;switch(n.finishedWork=d,n.finishedLanes=c,s){case 0:case 1:throw Error(t(345));case 2:ii(n,Gt,Sr);break;case 3:if(us(n,c),(c&130023424)===c&&(s=Gh+500-Je(),10<s)){if(dr(n,0)!==0)break;if(d=n.suspendedLanes,(d&c)!==c){qt(),n.pingedLanes|=n.suspendedLanes&d;break}n.timeoutHandle=rh(ii.bind(null,n,Gt,Sr),s);break}ii(n,Gt,Sr);break;case 4:if(us(n,c),(c&4194240)===c)break;for(s=n.eventTimes,d=-1;0<c;){var w=31-en(c);f=1<<w,w=s[w],w>d&&(d=w),c&=~f}if(c=d,c=Je()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*jw(c/1960))-c,10<c){n.timeoutHandle=rh(ii.bind(null,n,Gt,Sr),c);break}ii(n,Gt,Sr);break;case 5:ii(n,Gt,Sr);break;default:throw Error(t(329))}}}return Qt(n,Je()),n.callbackNode===a?eg.bind(null,n):null}function Jh(n,s){var a=Pa;return n.current.memoizedState.isDehydrated&&(si(n,s).flags|=256),n=xu(n,s),n!==2&&(s=Gt,Gt=a,s!==null&&Xh(s)),n}function Xh(n){Gt===null?Gt=n:Gt.push.apply(Gt,n)}function Mw(n){for(var s=n;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var d=a[c],f=d.getSnapshot;d=d.value;try{if(!kn(f(),d))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function us(n,s){for(s&=~Kh,s&=~gu,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var a=31-en(s),c=1<<a;n[a]=-1,s&=~c}}function tg(n){if((ze&6)!==0)throw Error(t(327));uo();var s=dr(n,0);if((s&1)===0)return Qt(n,Je()),null;var a=xu(n,s);if(n.tag!==0&&a===2){var c=Xo(n);c!==0&&(s=c,a=Jh(n,c))}if(a===1)throw a=Ra,si(n,0),us(n,s),Qt(n,Je()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,ii(n,Gt,Sr),Qt(n,Je()),null}function Zh(n,s){var a=ze;ze|=1;try{return n(s)}finally{ze=a,ze===0&&(lo=Je()+500,Ql&&ns())}}function ri(n){as!==null&&as.tag===0&&(ze&6)===0&&uo();var s=ze;ze|=1;var a=yn.transition,c=Me;try{if(yn.transition=null,Me=1,n)return n()}finally{Me=c,yn.transition=a,ze=s,(ze&6)===0&&ns()}}function ed(){ln=ao.current,Ze(ao)}function si(n,s){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,pw(a)),pt!==null)for(a=pt.return;a!==null;){var c=a;switch(uh(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&Kl();break;case 3:so(),Ze(Ht),Ze(Vt),xh();break;case 5:wh(c);break;case 4:so();break;case 13:Ze(nt);break;case 19:Ze(nt);break;case 10:mh(c.type._context);break;case 22:case 23:ed()}a=a.return}if(Tt=n,pt=n=cs(n.current,null),Nt=ln=s,wt=0,Ra=null,Kh=gu=ni=0,Gt=Pa=null,Zs!==null){for(s=0;s<Zs.length;s++)if(a=Zs[s],c=a.interleaved,c!==null){a.interleaved=null;var d=c.next,f=a.pending;if(f!==null){var w=f.next;f.next=d,c.next=w}a.pending=c}Zs=null}return n}function ng(n,s){do{var a=pt;try{if(ph(),iu.current=uu,ou){for(var c=rt.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}ou=!1}if(ti=0,xt=_t=rt=null,Ia=!1,Sa=0,Wh.current=null,a===null||a.return===null){wt=1,Ra=s,pt=null;break}e:{var f=n,w=a.return,N=a,b=s;if(s=Nt,N.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){var U=b,Q=N,J=Q.tag;if((Q.mode&1)===0&&(J===0||J===11||J===15)){var G=Q.alternate;G?(Q.updateQueue=G.updateQueue,Q.memoizedState=G.memoizedState,Q.lanes=G.lanes):(Q.updateQueue=null,Q.memoizedState=null)}var se=km(w);if(se!==null){se.flags&=-257,Cm(se,w,N,f,s),se.mode&1&&Am(f,U,s),s=se,b=U;var ce=s.updateQueue;if(ce===null){var fe=new Set;fe.add(b),s.updateQueue=fe}else ce.add(b);break e}else{if((s&1)===0){Am(f,U,s),td();break e}b=Error(t(426))}}else if(tt&&N.mode&1){var ut=km(w);if(ut!==null){(ut.flags&65536)===0&&(ut.flags|=256),Cm(ut,w,N,f,s),dh(io(b,N));break e}}f=b=io(b,N),wt!==4&&(wt=2),Pa===null?Pa=[f]:Pa.push(f),f=w;do{switch(f.tag){case 3:f.flags|=65536,s&=-s,f.lanes|=s;var L=Im(f,b,s);Jp(f,L);break e;case 1:N=b;var V=f.type,M=f.stateNode;if((f.flags&128)===0&&(typeof V.getDerivedStateFromError=="function"||M!==null&&typeof M.componentDidCatch=="function"&&(os===null||!os.has(M)))){f.flags|=65536,s&=-s,f.lanes|=s;var X=Sm(f,N,s);Jp(f,X);break e}}f=f.return}while(f!==null)}ig(a)}catch(me){s=me,pt===a&&a!==null&&(pt=a=a.return);continue}break}while(!0)}function rg(){var n=mu.current;return mu.current=uu,n===null?uu:n}function td(){(wt===0||wt===3||wt===2)&&(wt=4),Tt===null||(ni&268435455)===0&&(gu&268435455)===0||us(Tt,Nt)}function xu(n,s){var a=ze;ze|=2;var c=rg();(Tt!==n||Nt!==s)&&(Sr=null,si(n,s));do try{Fw();break}catch(d){ng(n,d)}while(!0);if(ph(),ze=a,mu.current=c,pt!==null)throw Error(t(261));return Tt=null,Nt=0,wt}function Fw(){for(;pt!==null;)sg(pt)}function Uw(){for(;pt!==null&&!Ms();)sg(pt)}function sg(n){var s=lg(n.alternate,n,ln);n.memoizedProps=n.pendingProps,s===null?ig(n):pt=s,Wh.current=null}function ig(n){var s=n;do{var a=s.alternate;if(n=s.return,(s.flags&32768)===0){if(a=bw(a,s,ln),a!==null){pt=a;return}}else{if(a=Dw(a,s),a!==null){a.flags&=32767,pt=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{wt=6,pt=null;return}}if(s=s.sibling,s!==null){pt=s;return}pt=s=n}while(s!==null);wt===0&&(wt=5)}function ii(n,s,a){var c=Me,d=yn.transition;try{yn.transition=null,Me=1,zw(n,s,a,c)}finally{yn.transition=d,Me=c}return null}function zw(n,s,a,c){do uo();while(as!==null);if((ze&6)!==0)throw Error(t(327));a=n.finishedWork;var d=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var f=a.lanes|a.childLanes;if(zc(n,f),n===Tt&&(pt=Tt=null,Nt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||vu||(vu=!0,ug(Fs,function(){return uo(),null})),f=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||f){f=yn.transition,yn.transition=null;var w=Me;Me=1;var N=ze;ze|=4,Wh.current=null,Ow(n,a),Qm(a,n),aw(th),mr=!!eh,th=eh=null,n.current=a,Lw(a),hr(),ze=N,Me=w,yn.transition=f}else n.current=a;if(vu&&(vu=!1,as=n,_u=d),f=n.pendingLanes,f===0&&(os=null),Nl(a.stateNode),Qt(n,Je()),s!==null)for(c=n.onRecoverableError,a=0;a<s.length;a++)d=s[a],c(d.value,{componentStack:d.stack,digest:d.digest});if(yu)throw yu=!1,n=Qh,Qh=null,n;return(_u&1)!==0&&n.tag!==0&&uo(),f=n.pendingLanes,(f&1)!==0?n===Yh?ba++:(ba=0,Yh=n):ba=0,ns(),null}function uo(){if(as!==null){var n=zn(_u),s=yn.transition,a=Me;try{if(yn.transition=null,Me=16>n?16:n,as===null)var c=!1;else{if(n=as,as=null,_u=0,(ze&6)!==0)throw Error(t(331));var d=ze;for(ze|=4,ue=n.current;ue!==null;){var f=ue,w=f.child;if((ue.flags&16)!==0){var N=f.deletions;if(N!==null){for(var b=0;b<N.length;b++){var U=N[b];for(ue=U;ue!==null;){var Q=ue;switch(Q.tag){case 0:case 11:case 15:Na(8,Q,f)}var J=Q.child;if(J!==null)J.return=Q,ue=J;else for(;ue!==null;){Q=ue;var G=Q.sibling,se=Q.return;if(qm(Q),Q===U){ue=null;break}if(G!==null){G.return=se,ue=G;break}ue=se}}}var ce=f.alternate;if(ce!==null){var fe=ce.child;if(fe!==null){ce.child=null;do{var ut=fe.sibling;fe.sibling=null,fe=ut}while(fe!==null)}}ue=f}}if((f.subtreeFlags&2064)!==0&&w!==null)w.return=f,ue=w;else e:for(;ue!==null;){if(f=ue,(f.flags&2048)!==0)switch(f.tag){case 0:case 11:case 15:Na(9,f,f.return)}var L=f.sibling;if(L!==null){L.return=f.return,ue=L;break e}ue=f.return}}var V=n.current;for(ue=V;ue!==null;){w=ue;var M=w.child;if((w.subtreeFlags&2064)!==0&&M!==null)M.return=w,ue=M;else e:for(w=V;ue!==null;){if(N=ue,(N.flags&2048)!==0)try{switch(N.tag){case 0:case 11:case 15:pu(9,N)}}catch(me){ot(N,N.return,me)}if(N===w){ue=null;break e}var X=N.sibling;if(X!==null){X.return=N.return,ue=X;break e}ue=N.return}}if(ze=d,ns(),Zt&&typeof Zt.onPostCommitFiberRoot=="function")try{Zt.onPostCommitFiberRoot(Us,n)}catch{}c=!0}return c}finally{Me=a,yn.transition=s}}return!1}function og(n,s,a){s=io(a,s),s=Im(n,s,1),n=ss(n,s,1),s=qt(),n!==null&&(qs(n,1,s),Qt(n,s))}function ot(n,s,a){if(n.tag===3)og(n,n,a);else for(;s!==null;){if(s.tag===3){og(s,n,a);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(os===null||!os.has(c))){n=io(a,n),n=Sm(s,n,1),s=ss(s,n,1),n=qt(),s!==null&&(qs(s,1,n),Qt(s,n));break}}s=s.return}}function Bw(n,s,a){var c=n.pingCache;c!==null&&c.delete(s),s=qt(),n.pingedLanes|=n.suspendedLanes&a,Tt===n&&(Nt&a)===a&&(wt===4||wt===3&&(Nt&130023424)===Nt&&500>Je()-Gh?si(n,0):Kh|=a),Qt(n,s)}function ag(n,s){s===0&&((n.mode&1)===0?s=1:(s=Wr,Wr<<=1,(Wr&130023424)===0&&(Wr=4194304)));var a=qt();n=xr(n,s),n!==null&&(qs(n,s,a),Qt(n,a))}function $w(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),ag(n,a)}function qw(n,s){var a=0;switch(n.tag){case 13:var c=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(s),ag(n,a)}var lg;lg=function(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps||Ht.current)Kt=!0;else{if((n.lanes&a)===0&&(s.flags&128)===0)return Kt=!1,Pw(n,s,a);Kt=(n.flags&131072)!==0}else Kt=!1,tt&&(s.flags&1048576)!==0&&zp(s,Jl,s.index);switch(s.lanes=0,s.tag){case 2:var c=s.type;du(n,s),n=s.pendingProps;var d=Ji(s,Vt.current);ro(s,a),d=Sh(null,s,c,n,d,a);var f=Ah();return s.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Wt(c)?(f=!0,Gl(s)):f=!1,s.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,vh(s),d.updater=cu,s.stateNode=d,d._reactInternals=s,bh(s,c,n,a),s=Lh(null,s,c,!0,f,a)):(s.tag=0,tt&&f&&lh(s),$t(null,s,d,a),s=s.child),s;case 16:c=s.elementType;e:{switch(du(n,s),n=s.pendingProps,d=c._init,c=d(c._payload),s.type=c,d=s.tag=Ww(c),n=Nn(c,n),d){case 0:s=Oh(null,s,c,n,a);break e;case 1:s=Vm(null,s,c,n,a);break e;case 11:s=Nm(null,s,c,n,a);break e;case 14:s=Rm(null,s,c,Nn(c.type,n),a);break e}throw Error(t(306,c,""))}return s;case 0:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Nn(c,d),Oh(n,s,c,d,a);case 1:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Nn(c,d),Vm(n,s,c,d,a);case 3:e:{if(Om(s),n===null)throw Error(t(387));c=s.pendingProps,f=s.memoizedState,d=f.element,Yp(n,s),ru(s,c,null,a);var w=s.memoizedState;if(c=w.element,f.isDehydrated)if(f={element:c,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},s.updateQueue.baseState=f,s.memoizedState=f,s.flags&256){d=io(Error(t(423)),s),s=Lm(n,s,c,a,d);break e}else if(c!==d){d=io(Error(t(424)),s),s=Lm(n,s,c,a,d);break e}else for(an=Zr(s.stateNode.containerInfo.firstChild),on=s,tt=!0,Cn=null,a=Gp(s,null,c,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(eo(),c===d){s=Ir(n,s,a);break e}$t(n,s,c,a)}s=s.child}return s;case 5:return Zp(s),n===null&&hh(s),c=s.type,d=s.pendingProps,f=n!==null?n.memoizedProps:null,w=d.children,nh(c,d)?w=null:f!==null&&nh(c,f)&&(s.flags|=32),Dm(n,s),$t(n,s,w,a),s.child;case 6:return n===null&&hh(s),null;case 13:return jm(n,s,a);case 4:return _h(s,s.stateNode.containerInfo),c=s.pendingProps,n===null?s.child=to(s,null,c,a):$t(n,s,c,a),s.child;case 11:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Nn(c,d),Nm(n,s,c,d,a);case 7:return $t(n,s,s.pendingProps,a),s.child;case 8:return $t(n,s,s.pendingProps.children,a),s.child;case 12:return $t(n,s,s.pendingProps.children,a),s.child;case 10:e:{if(c=s.type._context,d=s.pendingProps,f=s.memoizedProps,w=d.value,Qe(eu,c._currentValue),c._currentValue=w,f!==null)if(kn(f.value,w)){if(f.children===d.children&&!Ht.current){s=Ir(n,s,a);break e}}else for(f=s.child,f!==null&&(f.return=s);f!==null;){var N=f.dependencies;if(N!==null){w=f.child;for(var b=N.firstContext;b!==null;){if(b.context===c){if(f.tag===1){b=Tr(-1,a&-a),b.tag=2;var U=f.updateQueue;if(U!==null){U=U.shared;var Q=U.pending;Q===null?b.next=b:(b.next=Q.next,Q.next=b),U.pending=b}}f.lanes|=a,b=f.alternate,b!==null&&(b.lanes|=a),gh(f.return,a,s),N.lanes|=a;break}b=b.next}}else if(f.tag===10)w=f.type===s.type?null:f.child;else if(f.tag===18){if(w=f.return,w===null)throw Error(t(341));w.lanes|=a,N=w.alternate,N!==null&&(N.lanes|=a),gh(w,a,s),w=f.sibling}else w=f.child;if(w!==null)w.return=f;else for(w=f;w!==null;){if(w===s){w=null;break}if(f=w.sibling,f!==null){f.return=w.return,w=f;break}w=w.return}f=w}$t(n,s,d.children,a),s=s.child}return s;case 9:return d=s.type,c=s.pendingProps.children,ro(s,a),d=mn(d),c=c(d),s.flags|=1,$t(n,s,c,a),s.child;case 14:return c=s.type,d=Nn(c,s.pendingProps),d=Nn(c.type,d),Rm(n,s,c,d,a);case 15:return Pm(n,s,s.type,s.pendingProps,a);case 17:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Nn(c,d),du(n,s),s.tag=1,Wt(c)?(n=!0,Gl(s)):n=!1,ro(s,a),xm(s,c,d),bh(s,c,d,a),Lh(null,s,c,!0,n,a);case 19:return Fm(n,s,a);case 22:return bm(n,s,a)}throw Error(t(156,s.tag))};function ug(n,s){return Qo(n,s)}function Hw(n,s,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vn(n,s,a,c){return new Hw(n,s,a,c)}function nd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Ww(n){if(typeof n=="function")return nd(n)?1:0;if(n!=null){if(n=n.$$typeof,n===D)return 11;if(n===Se)return 14}return 2}function cs(n,s){var a=n.alternate;return a===null?(a=vn(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function Tu(n,s,a,c,d,f){var w=2;if(c=n,typeof n=="function")nd(n)&&(w=1);else if(typeof n=="string")w=5;else e:switch(n){case P:return oi(a.children,d,f,s);case A:w=8,d|=8;break;case I:return n=vn(12,a,s,d|2),n.elementType=I,n.lanes=f,n;case S:return n=vn(13,a,s,d),n.elementType=S,n.lanes=f,n;case ne:return n=vn(19,a,s,d),n.elementType=ne,n.lanes=f,n;case Ie:return Iu(a,d,f,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case R:w=10;break e;case k:w=9;break e;case D:w=11;break e;case Se:w=14;break e;case ae:w=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return s=vn(w,a,s,d),s.elementType=n,s.type=c,s.lanes=f,s}function oi(n,s,a,c){return n=vn(7,n,c,s),n.lanes=a,n}function Iu(n,s,a,c){return n=vn(22,n,c,s),n.elementType=Ie,n.lanes=a,n.stateNode={isHidden:!1},n}function rd(n,s,a){return n=vn(6,n,null,s),n.lanes=a,n}function sd(n,s,a){return s=vn(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function Kw(n,s,a,c,d){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ea(0),this.expirationTimes=ea(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ea(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function id(n,s,a,c,d,f,w,N,b){return n=new Kw(n,s,a,N,b),s===1?(s=1,f===!0&&(s|=8)):s=0,f=vn(3,null,null,s),n.current=f,f.stateNode=n,f.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},vh(f),n}function Gw(n,s,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ve,key:c==null?null:""+c,children:n,containerInfo:s,implementation:a}}function cg(n){if(!n)return ts;n=n._reactInternals;e:{if(Sn(n)!==n||n.tag!==1)throw Error(t(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Wt(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(Wt(a))return Mp(n,a,s)}return s}function hg(n,s,a,c,d,f,w,N,b){return n=id(a,c,!0,n,d,f,w,N,b),n.context=cg(null),a=n.current,c=qt(),d=ls(a),f=Tr(c,d),f.callback=s??null,ss(a,f,d),n.current.lanes=d,qs(n,d,c),Qt(n,c),n}function Su(n,s,a,c){var d=s.current,f=qt(),w=ls(d);return a=cg(a),s.context===null?s.context=a:s.pendingContext=a,s=Tr(f,w),s.payload={element:n},c=c===void 0?null:c,c!==null&&(s.callback=c),n=ss(d,s,w),n!==null&&(bn(n,d,w,f),nu(n,d,w)),w}function Au(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function dg(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function od(n,s){dg(n,s),(n=n.alternate)&&dg(n,s)}function Qw(){return null}var fg=typeof reportError=="function"?reportError:function(n){console.error(n)};function ad(n){this._internalRoot=n}ku.prototype.render=ad.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(t(409));Su(n,s,null,null)},ku.prototype.unmount=ad.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;ri(function(){Su(null,n,null,null)}),s[vr]=null}};function ku(n){this._internalRoot=n}ku.prototype.unstable_scheduleHydration=function(n){if(n){var s=sa();n={blockedOn:null,target:n,priority:s};for(var a=0;a<tn.length&&s!==0&&s<tn[a].priority;a++);tn.splice(a,0,n),a===0&&Oi(n)}};function ld(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Cu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function pg(){}function Yw(n,s,a,c,d){if(d){if(typeof c=="function"){var f=c;c=function(){var U=Au(w);f.call(U)}}var w=hg(s,c,n,0,null,!1,!1,"",pg);return n._reactRootContainer=w,n[vr]=w.current,ga(n.nodeType===8?n.parentNode:n),ri(),w}for(;d=n.lastChild;)n.removeChild(d);if(typeof c=="function"){var N=c;c=function(){var U=Au(b);N.call(U)}}var b=id(n,0,!1,null,null,!1,!1,"",pg);return n._reactRootContainer=b,n[vr]=b.current,ga(n.nodeType===8?n.parentNode:n),ri(function(){Su(s,b,a,c)}),b}function Nu(n,s,a,c,d){var f=a._reactRootContainer;if(f){var w=f;if(typeof d=="function"){var N=d;d=function(){var b=Au(w);N.call(b)}}Su(s,w,n,d)}else w=Yw(a,s,n,d,c);return Au(w)}na=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var a=$e(s.pendingLanes);a!==0&&(ta(s,a|1),Qt(s,Je()),(ze&6)===0&&(lo=Je()+500,ns()))}break;case 13:ri(function(){var c=xr(n,1);if(c!==null){var d=qt();bn(c,n,1,d)}}),od(n,1)}},Di=function(n){if(n.tag===13){var s=xr(n,134217728);if(s!==null){var a=qt();bn(s,n,134217728,a)}od(n,134217728)}},ra=function(n){if(n.tag===13){var s=ls(n),a=xr(n,s);if(a!==null){var c=qt();bn(a,n,s,c)}od(n,s)}},sa=function(){return Me},ia=function(n,s){var a=Me;try{return Me=n,s()}finally{Me=a}},lr=function(n,s,a){switch(s){case"input":if(Vs(n,a),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var c=a[s];if(c!==n&&c.form===n.form){var d=Wl(c);if(!d)throw Error(t(90));Uo(c),Vs(c,d)}}}break;case"textarea":yl(n,a);break;case"select":s=a.value,s!=null&&Tn(n,!!a.multiple,s,!1)}},wl=Zh,El=ri;var Jw={usingClientEntryPoint:!1,Events:[_a,Qi,Wl,Br,$r,Zh]},Da={findFiberByHostInstance:Qs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Xw={bundleType:Da.bundleType,version:Da.version,rendererPackageName:Da.rendererPackageName,rendererConfig:Da.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:pe.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Cl(n),n===null?null:n.stateNode},findFiberByHostInstance:Da.findFiberByHostInstance||Qw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ru.isDisabled&&Ru.supportsFiber)try{Us=Ru.inject(Xw),Zt=Ru}catch{}}return Yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Jw,Yt.createPortal=function(n,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ld(s))throw Error(t(200));return Gw(n,s,null,a)},Yt.createRoot=function(n,s){if(!ld(n))throw Error(t(299));var a=!1,c="",d=fg;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onRecoverableError!==void 0&&(d=s.onRecoverableError)),s=id(n,1,!1,null,null,a,!1,c,d),n[vr]=s.current,ga(n.nodeType===8?n.parentNode:n),new ad(s)},Yt.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Cl(s),n=n===null?null:n.stateNode,n},Yt.flushSync=function(n){return ri(n)},Yt.hydrate=function(n,s,a){if(!Cu(s))throw Error(t(200));return Nu(null,n,s,!0,a)},Yt.hydrateRoot=function(n,s,a){if(!ld(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,d=!1,f="",w=fg;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),s=hg(s,null,n,1,a??null,d,!1,f,w),n[vr]=s.current,ga(n),c)for(n=0;n<c.length;n++)a=c[n],d=a._getVersion,d=d(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,d]:s.mutableSourceEagerHydrationData.push(a,d);return new ku(s)},Yt.render=function(n,s,a){if(!Cu(s))throw Error(t(200));return Nu(null,n,s,!1,a)},Yt.unmountComponentAtNode=function(n){if(!Cu(n))throw Error(t(40));return n._reactRootContainer?(ri(function(){Nu(null,null,n,!1,function(){n._reactRootContainer=null,n[vr]=null})}),!0):!1},Yt.unstable_batchedUpdates=Zh,Yt.unstable_renderSubtreeIntoContainer=function(n,s,a,c){if(!Cu(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Nu(n,s,a,!1,c)},Yt.version="18.3.1-next-f1338f8080-20240426",Yt}var xg;function oE(){if(xg)return hd.exports;xg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),hd.exports=iE(),hd.exports}var Tg;function aE(){if(Tg)return Pu;Tg=1;var r=oE();return Pu.createRoot=r.createRoot,Pu.hydrateRoot=r.hydrateRoot,Pu}var lE=aE();const uE=()=>{};var Ig={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h0=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},cE=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const o=r[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],h=r[t++],m=r[t++],y=((o&7)<<18|(l&63)<<12|(h&63)<<6|m&63)-65536;e[i++]=String.fromCharCode(55296+(y>>10)),e[i++]=String.fromCharCode(56320+(y&1023))}else{const l=r[t++],h=r[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},d0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){const l=r[o],h=o+1<r.length,m=h?r[o+1]:0,y=o+2<r.length,_=y?r[o+2]:0,E=l>>2,T=(l&3)<<4|m>>4;let C=(m&15)<<2|_>>6,F=_&63;y||(F=64,h||(C=64)),i.push(t[E],t[T],t[C],t[F])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(h0(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):cE(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],m=o<r.length?t[r.charAt(o)]:0;++o;const _=o<r.length?t[r.charAt(o)]:64;++o;const T=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||m==null||_==null||T==null)throw new hE;const C=l<<2|m>>4;if(i.push(C),_!==64){const F=m<<4&240|_>>2;if(i.push(F),T!==64){const q=_<<6&192|T;i.push(q)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class hE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const dE=function(r){const e=h0(r);return d0.encodeByteArray(e,!0)},Yu=function(r){return dE(r).replace(/\./g,"")},f0=function(r){try{return d0.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE=()=>fE().__FIREBASE_DEFAULTS__,mE=()=>{if(typeof process>"u"||typeof Ig>"u")return;const r=Ig.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},gE=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&f0(r[1]);return e&&JSON.parse(e)},gc=()=>{try{return uE()||pE()||mE()||gE()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},p0=r=>{var e,t;return(t=(e=gc())==null?void 0:e.emulatorHosts)==null?void 0:t[r]},yE=r=>{const e=p0(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},m0=()=>{var r;return(r=gc())==null?void 0:r.config},g0=r=>{var e;return(e=gc())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ro(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function y0(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _E(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Yu(JSON.stringify(t)),Yu(JSON.stringify(h)),""].join(".")}const Ba={};function wE(){const r={prod:[],emulator:[]};for(const e of Object.keys(Ba))Ba[e]?r.emulator.push(e):r.prod.push(e);return r}function EE(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let Sg=!1;function v0(r,e){if(typeof window>"u"||typeof document>"u"||!Ro(window.location.host)||Ba[r]===e||Ba[r]||Sg)return;Ba[r]=e;function t(C){return`__firebase__banner__${C}`}const i="__firebase__banner",l=wE().prod.length>0;function h(){const C=document.getElementById(i);C&&C.remove()}function m(C){C.style.display="flex",C.style.background="#7faaf0",C.style.position="fixed",C.style.bottom="5px",C.style.left="5px",C.style.padding=".5em",C.style.borderRadius="5px",C.style.alignItems="center"}function y(C,F){C.setAttribute("width","24"),C.setAttribute("id",F),C.setAttribute("height","24"),C.setAttribute("viewBox","0 0 24 24"),C.setAttribute("fill","none"),C.style.marginLeft="-6px"}function _(){const C=document.createElement("span");return C.style.cursor="pointer",C.style.marginLeft="16px",C.style.fontSize="24px",C.innerHTML=" &times;",C.onclick=()=>{Sg=!0,h()},C}function E(C,F){C.setAttribute("id",F),C.innerText="Learn more",C.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",C.setAttribute("target","__blank"),C.style.paddingLeft="5px",C.style.textDecoration="underline"}function T(){const C=EE(i),F=t("text"),q=document.getElementById(F)||document.createElement("span"),W=t("learnmore"),B=document.getElementById(W)||document.createElement("a"),Z=t("preprendIcon"),te=document.getElementById(Z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(C.created){const ge=C.element;m(ge),E(B,W);const pe=_();y(te,Z),ge.append(te,q,B,pe),document.body.appendChild(ge)}l?(q.innerText="Preview backend disconnected.",te.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(te.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,q.innerText="Preview backend running in this workspace."),q.setAttribute("id",F)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function xE(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(zt())}function TE(){var e;const r=(e=gc())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function IE(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function SE(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function AE(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function kE(){const r=zt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function CE(){return!TE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function NE(){try{return typeof indexedDB=="object"}catch{return!1}}function RE(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE="FirebaseError";class Or extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=PE,Object.setPrototypeOf(this,Or.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,sl.prototype.create)}}class sl{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?bE(l,i):"Error",m=`${this.serviceName}: ${h} (${o}).`;return new Or(o,m,i)}}function bE(r,e){return r.replace(DE,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const DE=/\{\$([^}]+)}/g;function VE(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function ci(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=r[o],h=e[o];if(Ag(l)&&Ag(h)){if(!ci(l,h))return!1}else if(l!==h)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function Ag(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function il(r){const e=[];for(const[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function La(r){const e={};return r.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,l]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function ja(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function OE(r,e){const t=new LE(r,e);return t.subscribe.bind(t)}class LE{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");jE(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=pd),o.error===void 0&&(o.error=pd),o.complete===void 0&&(o.complete=pd);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function jE(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function pd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ht(r){return r&&r._delegate?r._delegate:r}class hi{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ai="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new vE;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(UE(e))try{this.getOrInitializeService({instanceIdentifier:ai})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=ai){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ai){return this.instances.has(e)}getOptions(e=ai){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,h]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(l);i===m&&h.resolve(o)}return o}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const l=this.instances.get(i);return l&&e(l,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:FE(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ai){return this.component?this.component.multipleInstances?e:ai:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function FE(r){return r===ai?void 0:r}function UE(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ME(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oe;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Oe||(Oe={}));const BE={debug:Oe.DEBUG,verbose:Oe.VERBOSE,info:Oe.INFO,warn:Oe.WARN,error:Oe.ERROR,silent:Oe.SILENT},$E=Oe.INFO,qE={[Oe.DEBUG]:"log",[Oe.VERBOSE]:"log",[Oe.INFO]:"info",[Oe.WARN]:"warn",[Oe.ERROR]:"error"},HE=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),o=qE[e];if(o)console[o](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class sf{constructor(e){this.name=e,this._logLevel=$E,this._logHandler=HE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?BE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Oe.DEBUG,...e),this._logHandler(this,Oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Oe.VERBOSE,...e),this._logHandler(this,Oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Oe.INFO,...e),this._logHandler(this,Oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Oe.WARN,...e),this._logHandler(this,Oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Oe.ERROR,...e),this._logHandler(this,Oe.ERROR,...e)}}const WE=(r,e)=>e.some(t=>r instanceof t);let kg,Cg;function KE(){return kg||(kg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function GE(){return Cg||(Cg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const _0=new WeakMap,Cd=new WeakMap,w0=new WeakMap,md=new WeakMap,of=new WeakMap;function QE(r){const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",h)},l=()=>{t(vs(r.result)),o()},h=()=>{i(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&_0.set(t,r)}).catch(()=>{}),of.set(e,r),e}function YE(r){if(Cd.has(r))return;const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",h),r.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",h),r.addEventListener("abort",h)});Cd.set(r,e)}let Nd={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Cd.get(r);if(e==="objectStoreNames")return r.objectStoreNames||w0.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return vs(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function JE(r){Nd=r(Nd)}function XE(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(gd(this),e,...t);return w0.set(i,e.sort?e.sort():[e]),vs(i)}:GE().includes(r)?function(...e){return r.apply(gd(this),e),vs(_0.get(this))}:function(...e){return vs(r.apply(gd(this),e))}}function ZE(r){return typeof r=="function"?XE(r):(r instanceof IDBTransaction&&YE(r),WE(r,KE())?new Proxy(r,Nd):r)}function vs(r){if(r instanceof IDBRequest)return QE(r);if(md.has(r))return md.get(r);const e=ZE(r);return e!==r&&(md.set(r,e),of.set(e,r)),e}const gd=r=>of.get(r);function e1(r,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const h=indexedDB.open(r,e),m=vs(h);return i&&h.addEventListener("upgradeneeded",y=>{i(vs(h.result),y.oldVersion,y.newVersion,vs(h.transaction),y)}),t&&h.addEventListener("blocked",y=>t(y.oldVersion,y.newVersion,y)),m.then(y=>{l&&y.addEventListener("close",()=>l()),o&&y.addEventListener("versionchange",_=>o(_.oldVersion,_.newVersion,_))}).catch(()=>{}),m}const t1=["get","getKey","getAll","getAllKeys","count"],n1=["put","add","delete","clear"],yd=new Map;function Ng(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(yd.get(e))return yd.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=n1.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||t1.includes(t)))return;const l=async function(h,...m){const y=this.transaction(h,o?"readwrite":"readonly");let _=y.store;return i&&(_=_.index(m.shift())),(await Promise.all([_[t](...m),o&&y.done]))[0]};return yd.set(e,l),l}JE(r=>({...r,get:(e,t,i)=>Ng(e,t)||r.get(e,t,i),has:(e,t)=>!!Ng(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(s1(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function s1(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Rd="@firebase/app",Rg="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rr=new sf("@firebase/app"),i1="@firebase/app-compat",o1="@firebase/analytics-compat",a1="@firebase/analytics",l1="@firebase/app-check-compat",u1="@firebase/app-check",c1="@firebase/auth",h1="@firebase/auth-compat",d1="@firebase/database",f1="@firebase/data-connect",p1="@firebase/database-compat",m1="@firebase/functions",g1="@firebase/functions-compat",y1="@firebase/installations",v1="@firebase/installations-compat",_1="@firebase/messaging",w1="@firebase/messaging-compat",E1="@firebase/performance",x1="@firebase/performance-compat",T1="@firebase/remote-config",I1="@firebase/remote-config-compat",S1="@firebase/storage",A1="@firebase/storage-compat",k1="@firebase/firestore",C1="@firebase/ai",N1="@firebase/firestore-compat",R1="firebase",P1="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pd="[DEFAULT]",b1={[Rd]:"fire-core",[i1]:"fire-core-compat",[a1]:"fire-analytics",[o1]:"fire-analytics-compat",[u1]:"fire-app-check",[l1]:"fire-app-check-compat",[c1]:"fire-auth",[h1]:"fire-auth-compat",[d1]:"fire-rtdb",[f1]:"fire-data-connect",[p1]:"fire-rtdb-compat",[m1]:"fire-fn",[g1]:"fire-fn-compat",[y1]:"fire-iid",[v1]:"fire-iid-compat",[_1]:"fire-fcm",[w1]:"fire-fcm-compat",[E1]:"fire-perf",[x1]:"fire-perf-compat",[T1]:"fire-rc",[I1]:"fire-rc-compat",[S1]:"fire-gcs",[A1]:"fire-gcs-compat",[k1]:"fire-fst",[N1]:"fire-fst-compat",[C1]:"fire-vertex","fire-js":"fire-js",[R1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ju=new Map,D1=new Map,bd=new Map;function Pg(r,e){try{r.container.addComponent(e)}catch(t){Rr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function To(r){const e=r.name;if(bd.has(e))return Rr.debug(`There were multiple attempts to register component ${e}.`),!1;bd.set(e,r);for(const t of Ju.values())Pg(t,r);for(const t of D1.values())Pg(t,r);return!0}function af(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function _n(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_s=new sl("app","Firebase",V1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new hi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _s.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Po=P1;function E0(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i={name:Pd,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw _s.create("bad-app-name",{appName:String(o)});if(t||(t=m0()),!t)throw _s.create("no-options");const l=Ju.get(o);if(l){if(ci(t,l.options)&&ci(i,l.config))return l;throw _s.create("duplicate-app",{appName:o})}const h=new zE(o);for(const y of bd.values())h.addComponent(y);const m=new O1(t,i,h);return Ju.set(o,m),m}function x0(r=Pd){const e=Ju.get(r);if(!e&&r===Pd&&m0())return E0();if(!e)throw _s.create("no-app",{appName:r});return e}function ws(r,e,t){let i=b1[r]??r;t&&(i+=`-${t}`);const o=i.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const h=[`Unable to register library "${i}" with version "${e}":`];o&&h.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&l&&h.push("and"),l&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Rr.warn(h.join(" "));return}To(new hi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L1="firebase-heartbeat-database",j1=1,Ga="firebase-heartbeat-store";let vd=null;function T0(){return vd||(vd=e1(L1,j1,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Ga)}catch(t){console.warn(t)}}}}).catch(r=>{throw _s.create("idb-open",{originalErrorMessage:r.message})})),vd}async function M1(r){try{const t=(await T0()).transaction(Ga),i=await t.objectStore(Ga).get(I0(r));return await t.done,i}catch(e){if(e instanceof Or)Rr.warn(e.message);else{const t=_s.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Rr.warn(t.message)}}}async function bg(r,e){try{const i=(await T0()).transaction(Ga,"readwrite");await i.objectStore(Ga).put(e,I0(r)),await i.done}catch(t){if(t instanceof Or)Rr.warn(t.message);else{const i=_s.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Rr.warn(i.message)}}}function I0(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F1=1024,U1=30;class z1{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new $1(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Dg();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>U1){const h=q1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Rr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Dg(),{heartbeatsToSend:i,unsentEntries:o}=B1(this._heartbeatsCache.heartbeats),l=Yu(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Rr.warn(t),""}}}function Dg(){return new Date().toISOString().substring(0,10)}function B1(r,e=F1){const t=[];let i=r.slice();for(const o of r){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),Vg(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Vg(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class $1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return NE()?RE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await M1(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return bg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return bg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Vg(r){return Yu(JSON.stringify({version:2,heartbeats:r})).length}function q1(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let i=1;i<r.length;i++)r[i].date<t&&(t=r[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H1(r){To(new hi("platform-logger",e=>new r1(e),"PRIVATE")),To(new hi("heartbeat",e=>new z1(e),"PRIVATE")),ws(Rd,Rg,r),ws(Rd,Rg,"esm2020"),ws("fire-js","")}H1("");function S0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const W1=S0,A0=new sl("auth","Firebase",S0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xu=new sf("@firebase/auth");function K1(r,...e){Xu.logLevel<=Oe.WARN&&Xu.warn(`Auth (${Po}): ${r}`,...e)}function Fu(r,...e){Xu.logLevel<=Oe.ERROR&&Xu.error(`Auth (${Po}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function On(r,...e){throw lf(r,...e)}function nr(r,...e){return lf(r,...e)}function k0(r,e,t){const i={...W1(),[e]:t};return new sl("auth","Firebase",i).create(e,{appName:r.name})}function Cr(r){return k0(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function lf(r,...e){if(typeof r!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return A0.create(r,...e)}function Ee(r,e,...t){if(!r)throw lf(e,...t)}function Ar(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Fu(e),new Error(e)}function Pr(r,e){r||Ar(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dd(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function G1(){return Og()==="http:"||Og()==="https:"}function Og(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(G1()||SE()||"connection"in navigator)?navigator.onLine:!0}function Y1(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(e,t){this.shortDelay=e,this.longDelay=t,Pr(t>e,"Short delay should be less than long delay!"),this.isMobile=xE()||AE()}get(){return Q1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uf(r,e){Pr(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ar("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ar("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ar("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Z1=new ol(3e4,6e4);function Rs(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Ps(r,e,t,i,o={}){return N0(r,o,async()=>{let l={},h={};i&&(e==="GET"?h=i:l={body:JSON.stringify(i)});const m=il({key:r.config.apiKey,...h}).slice(1),y=await r._getAdditionalHeaders();y["Content-Type"]="application/json",r.languageCode&&(y["X-Firebase-Locale"]=r.languageCode);const _={method:e,headers:y,...l};return IE()||(_.referrerPolicy="no-referrer"),r.emulatorConfig&&Ro(r.emulatorConfig.host)&&(_.credentials="include"),C0.fetch()(await R0(r,r.config.apiHost,t,m),_)})}async function N0(r,e,t){r._canInitEmulator=!1;const i={...J1,...e};try{const o=new tx(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw bu(r,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const m=l.ok?h.errorMessage:h.error.message,[y,_]=m.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw bu(r,"credential-already-in-use",h);if(y==="EMAIL_EXISTS")throw bu(r,"email-already-in-use",h);if(y==="USER_DISABLED")throw bu(r,"user-disabled",h);const E=i[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw k0(r,E,_);On(r,E)}}catch(o){if(o instanceof Or)throw o;On(r,"network-request-failed",{message:String(o)})}}async function al(r,e,t,i,o={}){const l=await Ps(r,e,t,i,o);return"mfaPendingCredential"in l&&On(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function R0(r,e,t,i){const o=`${e}${t}?${i}`,l=r,h=l.config.emulator?uf(r.config,o):`${r.config.apiScheme}://${o}`;return X1.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(h).toString():h}function ex(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class tx{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(nr(this.auth,"network-request-failed")),Z1.get())})}}function bu(r,e,t){const i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=nr(r,e,i);return o.customData._tokenResponse=t,o}function Lg(r){return r!==void 0&&r.enterprise!==void 0}class nx{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return ex(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function rx(r,e){return Ps(r,"GET","/v2/recaptchaConfig",Rs(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sx(r,e){return Ps(r,"POST","/v1/accounts:delete",e)}async function Zu(r,e){return Ps(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $a(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ix(r,e=!1){const t=ht(r),i=await t.getIdToken(e),o=cf(i);Ee(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l==null?void 0:l.sign_in_provider;return{claims:o,token:i,authTime:$a(_d(o.auth_time)),issuedAtTime:$a(_d(o.iat)),expirationTime:$a(_d(o.exp)),signInProvider:h||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function _d(r){return Number(r)*1e3}function cf(r){const[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return Fu("JWT malformed, contained fewer than 3 sections"),null;try{const o=f0(t);return o?JSON.parse(o):(Fu("Failed to decode base64 JWT payload"),null)}catch(o){return Fu("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function jg(r){const e=cf(r);return Ee(e,"internal-error"),Ee(typeof e.exp<"u","internal-error"),Ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qa(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Or&&ox(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function ox({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=$a(this.lastLoginAt),this.creationTime=$a(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ec(r){var T;const e=r.auth,t=await r.getIdToken(),i=await Qa(r,Zu(e,{idToken:t}));Ee(i==null?void 0:i.users.length,e,"internal-error");const o=i.users[0];r._notifyReloadListener(o);const l=(T=o.providerUserInfo)!=null&&T.length?P0(o.providerUserInfo):[],h=ux(r.providerData,l),m=r.isAnonymous,y=!(r.email&&o.passwordHash)&&!(h!=null&&h.length),_=m?y:!1,E={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new Vd(o.createdAt,o.lastLoginAt),isAnonymous:_};Object.assign(r,E)}async function lx(r){const e=ht(r);await ec(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function ux(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function P0(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cx(r,e){const t=await N0(r,{},async()=>{const i=il({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,h=await R0(r,o,"/v1/token",`key=${l}`),m=await r._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const y={method:"POST",headers:m,body:i};return r.emulatorConfig&&Ro(r.emulatorConfig.host)&&(y.credentials="include"),C0.fetch()(h,y)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function hx(r,e){return Ps(r,"POST","/v2/accounts:revokeToken",Rs(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ee(e.idToken,"internal-error"),Ee(typeof e.idToken<"u","internal-error"),Ee(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):jg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ee(e.length!==0,"internal-error");const t=jg(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await cx(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,h=new go;return i&&(Ee(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),o&&(Ee(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(Ee(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new go,this.toJSON())}_performRefresh(){return Ar("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ds(r,e){Ee(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Dn{constructor({uid:e,auth:t,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new ax(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Vd(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Qa(this,this.stsTokenManager.getToken(this.auth,e));return Ee(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return ix(this,e)}reload(){return lx(this)}_assign(e){this!==e&&(Ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Dn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await ec(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_n(this.auth.app))return Promise.reject(Cr(this.auth));const e=await this.getIdToken();return await Qa(this,sx(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,h=t.photoURL??void 0,m=t.tenantId??void 0,y=t._redirectEventId??void 0,_=t.createdAt??void 0,E=t.lastLoginAt??void 0,{uid:T,emailVerified:C,isAnonymous:F,providerData:q,stsTokenManager:W}=t;Ee(T&&W,e,"internal-error");const B=go.fromJSON(this.name,W);Ee(typeof T=="string",e,"internal-error"),ds(i,e.name),ds(o,e.name),Ee(typeof C=="boolean",e,"internal-error"),Ee(typeof F=="boolean",e,"internal-error"),ds(l,e.name),ds(h,e.name),ds(m,e.name),ds(y,e.name),ds(_,e.name),ds(E,e.name);const Z=new Dn({uid:T,auth:e,email:o,emailVerified:C,displayName:i,isAnonymous:F,photoURL:h,phoneNumber:l,tenantId:m,stsTokenManager:B,createdAt:_,lastLoginAt:E});return q&&Array.isArray(q)&&(Z.providerData=q.map(te=>({...te}))),y&&(Z._redirectEventId=y),Z}static async _fromIdTokenResponse(e,t,i=!1){const o=new go;o.updateFromServerResponse(t);const l=new Dn({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await ec(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Ee(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?P0(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),m=new go;m.updateFromIdToken(i);const y=new Dn({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:h}),_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Vd(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(y,_),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mg=new Map;function kr(r){Pr(r instanceof Function,"Expected a class definition");let e=Mg.get(r);return e?(Pr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Mg.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}b0.type="NONE";const Fg=b0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uu(r,e,t){return`firebase:${r}:${e}:${t}`}class yo{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=Uu(this.userKey,o.apiKey,l),this.fullPersistenceKey=Uu("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Zu(this.auth,{idToken:e}).catch(()=>{});return t?Dn._fromGetAccountInfoResponse(this.auth,t,e):null}return Dn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new yo(kr(Fg),e,i);const o=(await Promise.all(t.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let l=o[0]||kr(Fg);const h=Uu(i,e.config.apiKey,e.name);let m=null;for(const _ of t)try{const E=await _._get(h);if(E){let T;if(typeof E=="string"){const C=await Zu(e,{idToken:E}).catch(()=>{});if(!C)break;T=await Dn._fromGetAccountInfoResponse(e,C,E)}else T=Dn._fromJSON(e,E);_!==l&&(m=T),l=_;break}}catch{}const y=o.filter(_=>_._shouldAllowMigration);return!l._shouldAllowMigration||!y.length?new yo(l,e,i):(l=y[0],m&&await l._set(h,m.toJSON()),await Promise.all(t.map(async _=>{if(_!==l)try{await _._remove(h)}catch{}})),new yo(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ug(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(L0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(D0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(M0(e))return"Blackberry";if(F0(e))return"Webos";if(V0(e))return"Safari";if((e.includes("chrome/")||O0(e))&&!e.includes("edge/"))return"Chrome";if(j0(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function D0(r=zt()){return/firefox\//i.test(r)}function V0(r=zt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function O0(r=zt()){return/crios\//i.test(r)}function L0(r=zt()){return/iemobile/i.test(r)}function j0(r=zt()){return/android/i.test(r)}function M0(r=zt()){return/blackberry/i.test(r)}function F0(r=zt()){return/webos/i.test(r)}function hf(r=zt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function dx(r=zt()){var e;return hf(r)&&!!((e=window.navigator)!=null&&e.standalone)}function fx(){return kE()&&document.documentMode===10}function U0(r=zt()){return hf(r)||j0(r)||F0(r)||M0(r)||/windows phone/i.test(r)||L0(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z0(r,e=[]){let t;switch(r){case"Browser":t=Ug(zt());break;case"Worker":t=`${Ug(zt())}-${r}`;break;default:t=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Po}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((h,m)=>{try{const y=e(l);h(y)}catch(y){m(y)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mx(r,e={}){return Ps(r,"GET","/v2/passwordPolicy",Rs(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gx=6;class yx{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??gx,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zg(this),this.idTokenSubscription=new zg(this),this.beforeStateQueue=new px(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=A0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=kr(t)),this._initializationPromise=this.queue(async()=>{var i,o,l;if(!this._deleted&&(this.persistenceManager=await yo.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Zu(this,{idToken:e}),i=await Dn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(_n(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(m,m))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(l=this.redirectUser)==null?void 0:l._redirectEventId,m=i==null?void 0:i._redirectEventId,y=await this.tryRedirectSignIn(e);(!h||h===m)&&(y!=null&&y.user)&&(i=y.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(h){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ec(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Y1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_n(this.app))return Promise.reject(Cr(this));const t=e?ht(e):null;return t&&Ee(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return _n(this.app)?Promise.reject(Cr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _n(this.app)?Promise.reject(Cr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(kr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await mx(this),t=new yx(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new sl("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await hx(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&kr(e)||this._popupRedirectResolver;Ee(t,this,"argument-error"),this.redirectPersistenceManager=await yo.create(this,[kr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ee(m,this,"internal-error"),m.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const y=e.addObserver(t,i,o);return()=>{h=!0,y()}}else{const y=e.addObserver(t);return()=>{h=!0,y()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=z0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(_n(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&K1(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function yi(r){return ht(r)}class zg{constructor(e){this.auth=e,this.observer=null,this.addObserver=OE(t=>this.observer=t)}get next(){return Ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _x(r){yc=r}function B0(r){return yc.loadJS(r)}function wx(){return yc.recaptchaEnterpriseScript}function Ex(){return yc.gapiScript}function xx(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class Tx{constructor(){this.enterprise=new Ix}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Ix{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Sx="recaptcha-enterprise",$0="NO_RECAPTCHA";class Ax{constructor(e){this.type=Sx,this.auth=yi(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(h,m)=>{rx(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(y=>{if(y.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const _=new nx(y);return l.tenantId==null?l._agentRecaptchaConfig=_:l._tenantRecaptchaConfigs[l.tenantId]=_,h(_.siteKey)}}).catch(y=>{m(y)})})}function o(l,h,m){const y=window.grecaptcha;Lg(y)?y.enterprise.ready(()=>{y.enterprise.execute(l,{action:e}).then(_=>{h(_)}).catch(()=>{h($0)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Tx().execute("siteKey",{action:"verify"}):new Promise((l,h)=>{i(this.auth).then(m=>{if(!t&&Lg(window.grecaptcha))o(m,l,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let y=wx();y.length!==0&&(y+=m),B0(y).then(()=>{o(m,l,h)}).catch(_=>{h(_)})}}).catch(m=>{h(m)})})}}async function Bg(r,e,t,i=!1,o=!1){const l=new Ax(r);let h;if(o)h=$0;else try{h=await l.verify(t)}catch{h=await l.verify(t,!0)}const m={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const y=m.phoneEnrollmentInfo.phoneNumber,_=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:y,recaptchaToken:_,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const y=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:y,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return i?Object.assign(m,{captchaResp:h}):Object.assign(m,{captchaResponse:h}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function Od(r,e,t,i,o){var l;if((l=r._getRecaptchaConfig())!=null&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const h=await Bg(r,e,t,t==="getOobCode");return i(r,h)}else return i(r,e).catch(async h=>{if(h.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await Bg(r,e,t,t==="getOobCode");return i(r,m)}else return Promise.reject(h)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kx(r,e){const t=af(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(ci(l,e??{}))return o;On(o,"already-initialized")}return t.initialize({options:e})}function Cx(r,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(kr);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function Nx(r,e,t){const i=yi(r);Ee(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=q0(e),{host:h,port:m}=Rx(e),y=m===null?"":`:${m}`,_={url:`${l}//${h}${y}/`},E=Object.freeze({host:h,port:m,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Ee(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ee(ci(_,i.config.emulator)&&ci(E,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=_,i.emulatorConfig=E,i.settings.appVerificationDisabledForTesting=!0,Ro(h)?(y0(`${l}//${h}${y}`),v0("Auth",!0)):Px()}function q0(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function Rx(r){const e=q0(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:$g(i.substr(l.length+1))}}else{const[l,h]=i.split(":");return{host:l,port:$g(h)}}}function $g(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function Px(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ar("not implemented")}_getIdTokenResponse(e){return Ar("not implemented")}_linkToIdToken(e,t){return Ar("not implemented")}_getReauthenticationResolver(e){return Ar("not implemented")}}async function bx(r,e){return Ps(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dx(r,e){return al(r,"POST","/v1/accounts:signInWithPassword",Rs(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vx(r,e){return al(r,"POST","/v1/accounts:signInWithEmailLink",Rs(r,e))}async function Ox(r,e){return al(r,"POST","/v1/accounts:signInWithEmailLink",Rs(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya extends df{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Ya(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Ya(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Od(e,t,"signInWithPassword",Dx);case"emailLink":return Vx(e,{email:this._email,oobCode:this._password});default:On(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Od(e,i,"signUpPassword",bx);case"emailLink":return Ox(e,{idToken:t,email:this._email,oobCode:this._password});default:On(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vo(r,e){return al(r,"POST","/v1/accounts:signInWithIdp",Rs(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lx="http://localhost";class di extends df{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new di(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):On("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...l}=t;if(!i||!o)return null;const h=new di(i,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return vo(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,vo(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,vo(e,t)}buildRequest(){const e={requestUri:Lx,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=il(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jx(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Mx(r){const e=La(ja(r)).link,t=e?La(ja(e)).deep_link_id:null,i=La(ja(r)).deep_link_id;return(i?La(ja(i)).link:null)||i||t||e||r}class ff{constructor(e){const t=La(ja(e)),i=t.apiKey??null,o=t.oobCode??null,l=jx(t.mode??null);Ee(i&&o&&l,"argument-error"),this.apiKey=i,this.operation=l,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=Mx(e);try{return new ff(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(){this.providerId=vi.PROVIDER_ID}static credential(e,t){return Ya._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=ff.parseLink(t);return Ee(i,"argument-error"),Ya._fromEmailAndCode(e,i.code,i.tenantId)}}vi.PROVIDER_ID="password";vi.EMAIL_PASSWORD_SIGN_IN_METHOD="password";vi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll extends H0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs extends ll{constructor(){super("facebook.com")}static credential(e){return di._fromParams({providerId:fs.PROVIDER_ID,signInMethod:fs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fs.credentialFromTaggedObject(e)}static credentialFromError(e){return fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fs.credential(e.oauthAccessToken)}catch{return null}}}fs.FACEBOOK_SIGN_IN_METHOD="facebook.com";fs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps extends ll{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return di._fromParams({providerId:ps.PROVIDER_ID,signInMethod:ps.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ps.credentialFromTaggedObject(e)}static credentialFromError(e){return ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return ps.credential(t,i)}catch{return null}}}ps.GOOGLE_SIGN_IN_METHOD="google.com";ps.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms extends ll{constructor(){super("github.com")}static credential(e){return di._fromParams({providerId:ms.PROVIDER_ID,signInMethod:ms.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ms.credentialFromTaggedObject(e)}static credentialFromError(e){return ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ms.credential(e.oauthAccessToken)}catch{return null}}}ms.GITHUB_SIGN_IN_METHOD="github.com";ms.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs extends ll{constructor(){super("twitter.com")}static credential(e,t){return di._fromParams({providerId:gs.PROVIDER_ID,signInMethod:gs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return gs.credentialFromTaggedObject(e)}static credentialFromError(e){return gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return gs.credential(t,i)}catch{return null}}}gs.TWITTER_SIGN_IN_METHOD="twitter.com";gs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fx(r,e){return al(r,"POST","/v1/accounts:signUp",Rs(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await Dn._fromIdTokenResponse(e,i,o),h=qg(i);return new fi({user:l,providerId:h,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=qg(i);return new fi({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function qg(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc extends Or{constructor(e,t,i,o){super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,tc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new tc(e,t,i,o)}}function W0(r,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?tc._fromErrorAndOperation(r,l,e,i):l})}async function Ux(r,e,t=!1){const i=await Qa(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return fi._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K0(r,e,t=!1){const{auth:i}=r;if(_n(i.app))return Promise.reject(Cr(i));const o="reauthenticate";try{const l=await Qa(r,W0(i,o,e,r),t);Ee(l.idToken,i,"internal-error");const h=cf(l.idToken);Ee(h,i,"internal-error");const{sub:m}=h;return Ee(r.uid===m,i,"user-mismatch"),fi._forOperation(r,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&On(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G0(r,e,t=!1){if(_n(r.app))return Promise.reject(Cr(r));const i="signIn",o=await W0(r,i,e),l=await fi._fromIdTokenResponse(r,i,o);return t||await r._updateCurrentUser(l.user),l}async function zx(r,e){return G0(yi(r),e)}async function Bx(r,e){return K0(ht(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q0(r){const e=yi(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function $x(r,e,t){if(_n(r.app))return Promise.reject(Cr(r));const i=yi(r),h=await Od(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Fx).catch(y=>{throw y.code==="auth/password-does-not-meet-requirements"&&Q0(r),y}),m=await fi._fromIdTokenResponse(i,"signIn",h);return await i._updateCurrentUser(m.user),m}function qx(r,e,t){return _n(r.app)?Promise.reject(Cr(r)):zx(ht(r),vi.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Q0(r),i})}function Hx(r,e,t,i){return ht(r).onIdTokenChanged(e,t,i)}function Wx(r,e,t){return ht(r).beforeAuthStateChanged(e,t)}function Kx(r,e,t,i){return ht(r).onAuthStateChanged(e,t,i)}function Gx(r){return ht(r).signOut()}async function Qx(r){return ht(r).delete()}const nc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(nc,"1"),this.storage.removeItem(nc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx=1e3,Jx=10;class J0 extends Y0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=U0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,m,y)=>{this.notifyListeners(h,y)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(i);!t&&this.localCache[i]===h||this.notifyListeners(i,h)},l=this.storage.getItem(i);fx()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,Jx):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},Yx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}J0.type="LOCAL";const Xx=J0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0 extends Y0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}X0.type="SESSION";const Z0=X0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zx(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new vc(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const m=Array.from(h).map(async _=>_(t.origin,l)),y=await Zx(m);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:y})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}vc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pf(r="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((m,y)=>{const _=pf("",20);o.port1.start();const E=setTimeout(()=>{y(new Error("unsupported_event"))},i);h={messageChannel:o,onMessage(T){const C=T;if(C.data.eventId===_)switch(C.data.status){case"ack":clearTimeout(E),l=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),m(C.data.response);break;default:clearTimeout(E),clearTimeout(l),y(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:_,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rr(){return window}function tT(r){rr().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ev(){return typeof rr().WorkerGlobalScope<"u"&&typeof rr().importScripts=="function"}async function nT(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function rT(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function sT(){return ev()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tv="firebaseLocalStorageDb",iT=1,rc="firebaseLocalStorage",nv="fbase_key";class ul{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function _c(r,e){return r.transaction([rc],e?"readwrite":"readonly").objectStore(rc)}function oT(){const r=indexedDB.deleteDatabase(tv);return new ul(r).toPromise()}function Ld(){const r=indexedDB.open(tv,iT);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(rc,{keyPath:nv})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(rc)?e(i):(i.close(),await oT(),e(await Ld()))})})}async function Hg(r,e,t){const i=_c(r,!0).put({[nv]:e,value:t});return new ul(i).toPromise()}async function aT(r,e){const t=_c(r,!1).get(e),i=await new ul(t).toPromise();return i===void 0?null:i.value}function Wg(r,e){const t=_c(r,!0).delete(e);return new ul(t).toPromise()}const lT=800,uT=3;class rv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ld(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>uT)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ev()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=vc._getInstance(sT()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await nT(),!this.activeServiceWorker)return;this.sender=new eT(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||rT()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ld();return await Hg(e,nc,"1"),await Wg(e,nc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Hg(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>aT(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Wg(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=_c(o,!1).getAll();return new ul(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),lT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}rv.type="LOCAL";const cT=rv;new ol(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hT(r,e){return e?kr(e):(Ee(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf extends df{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return vo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return vo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return vo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function dT(r){return G0(r.auth,new mf(r),r.bypassAuthState)}function fT(r){const{auth:e,user:t}=r;return Ee(t,e,"internal-error"),K0(t,new mf(r),r.bypassAuthState)}async function pT(r){const{auth:e,user:t}=r;return Ee(t,e,"internal-error"),Ux(t,new mf(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:h,type:m}=e;if(h){this.reject(h);return}const y={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(y))}catch(_){this.reject(_)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return dT;case"linkViaPopup":case"linkViaRedirect":return pT;case"reauthViaPopup":case"reauthViaRedirect":return fT;default:On(this.auth,"internal-error")}}resolve(e){Pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mT=new ol(2e3,1e4);class mo extends sv{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,mo.currentPopupAction&&mo.currentPopupAction.cancel(),mo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ee(e,this.auth,"internal-error"),e}async onExecution(){Pr(this.filter.length===1,"Popup operations only handle one event");const e=pf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(nr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(nr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,mo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(nr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,mT.get())};e()}}mo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT="pendingRedirect",zu=new Map;class yT extends sv{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=zu.get(this.auth._key());if(!e){try{const i=await vT(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}zu.set(this.auth._key(),e)}return this.bypassAuthState||zu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function vT(r,e){const t=ET(e),i=wT(r);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function _T(r,e){zu.set(r._key(),e)}function wT(r){return kr(r._redirectPersistence)}function ET(r){return Uu(gT,r.config.apiKey,r.name)}async function xT(r,e,t=!1){if(_n(r.app))return Promise.reject(Cr(r));const i=yi(r),o=hT(i,e),h=await new yT(i,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT=600*1e3;class IT{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ST(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!iv(e)){const o=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(nr(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=TT&&this.cachedEventUids.clear(),this.cachedEventUids.has(Kg(e))}saveEventToCache(e){this.cachedEventUids.add(Kg(e)),this.lastProcessedEventTime=Date.now()}}function Kg(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function iv({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function ST(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return iv(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AT(r,e={}){return Ps(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kT=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,CT=/^https?/;async function NT(r){if(r.config.emulator)return;const{authorizedDomains:e}=await AT(r);for(const t of e)try{if(RT(t))return}catch{}On(r,"unauthorized-domain")}function RT(r){const e=Dd(),{protocol:t,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&i===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===i}if(!CT.test(t))return!1;if(kT.test(r))return i===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PT=new ol(3e4,6e4);function Gg(){const r=rr().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function bT(r){return new Promise((e,t)=>{var o,l,h;function i(){Gg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Gg(),t(nr(r,"network-request-failed"))},timeout:PT.get()})}if((l=(o=rr().gapi)==null?void 0:o.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((h=rr().gapi)!=null&&h.load)i();else{const m=xx("iframefcb");return rr()[m]=()=>{gapi.load?i():t(nr(r,"network-request-failed"))},B0(`${Ex()}?onload=${m}`).catch(y=>t(y))}}).catch(e=>{throw Bu=null,e})}let Bu=null;function DT(r){return Bu=Bu||bT(r),Bu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT=new ol(5e3,15e3),OT="__/auth/iframe",LT="emulator/auth/iframe",jT={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},MT=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function FT(r){const e=r.config;Ee(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?uf(e,LT):`https://${r.config.authDomain}/${OT}`,i={apiKey:e.apiKey,appName:r.name,v:Po},o=MT.get(r.config.apiHost);o&&(i.eid=o);const l=r._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${il(i).slice(1)}`}async function UT(r){const e=await DT(r),t=rr().gapi;return Ee(t,r,"internal-error"),e.open({where:document.body,url:FT(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jT,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const h=nr(r,"network-request-failed"),m=rr().setTimeout(()=>{l(h)},VT.get());function y(){rr().clearTimeout(m),o(i)}i.ping(y).then(y,()=>{l(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zT={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},BT=500,$T=600,qT="_blank",HT="http://localhost";class Qg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function WT(r,e,t,i=BT,o=$T){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let m="";const y={...zT,width:i.toString(),height:o.toString(),top:l,left:h},_=zt().toLowerCase();t&&(m=O0(_)?qT:t),D0(_)&&(e=e||HT,y.scrollbars="yes");const E=Object.entries(y).reduce((C,[F,q])=>`${C}${F}=${q},`,"");if(dx(_)&&m!=="_self")return KT(e||"",m),new Qg(null);const T=window.open(e||"",m,E);Ee(T,r,"popup-blocked");try{T.focus()}catch{}return new Qg(T)}function KT(r,e){const t=document.createElement("a");t.href=r,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GT="__/auth/handler",QT="emulator/auth/handler",YT=encodeURIComponent("fac");async function Yg(r,e,t,i,o,l){Ee(r.config.authDomain,r,"auth-domain-config-required"),Ee(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:i,v:Po,eventId:o};if(e instanceof H0){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",VE(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,T]of Object.entries({}))h[E]=T}if(e instanceof ll){const E=e.getScopes().filter(T=>T!=="");E.length>0&&(h.scopes=E.join(","))}r.tenantId&&(h.tid=r.tenantId);const m=h;for(const E of Object.keys(m))m[E]===void 0&&delete m[E];const y=await r._getAppCheckToken(),_=y?`#${YT}=${encodeURIComponent(y)}`:"";return`${JT(r)}?${il(m).slice(1)}${_}`}function JT({config:r}){return r.emulator?uf(r,QT):`https://${r.authDomain}/${GT}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wd="webStorageSupport";class XT{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Z0,this._completeRedirectFn=xT,this._overrideRedirectResult=_T}async _openPopup(e,t,i,o){var h;Pr((h=this.eventManagers[e._key()])==null?void 0:h.manager,"_initialize() not called before _openPopup()");const l=await Yg(e,t,i,Dd(),o);return WT(e,l,pf())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await Yg(e,t,i,Dd(),o);return tT(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Pr(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await UT(e),i=new IT(e);return t.register("authEvent",o=>(Ee(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(wd,{type:wd},o=>{var h;const l=(h=o==null?void 0:o[0])==null?void 0:h[wd];l!==void 0&&t(!!l),On(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=NT(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return U0()||V0()||hf()}}const ZT=XT;var Jg="@firebase/auth",Xg="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tI(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function nI(r){To(new hi("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:m}=i.options;Ee(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const y={apiKey:h,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:z0(r)},_=new vx(i,o,l,y);return Cx(_,t),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),To(new hi("auth-internal",e=>{const t=yi(e.getProvider("auth").getImmediate());return(i=>new eI(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ws(Jg,Xg,tI(r)),ws(Jg,Xg,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI=300,sI=g0("authIdTokenMaxAge")||rI;let Zg=null;const iI=r=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>sI)return;const o=t==null?void 0:t.token;Zg!==o&&(Zg=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function oI(r=x0()){const e=af(r,"auth");if(e.isInitialized())return e.getImmediate();const t=kx(r,{popupRedirectResolver:ZT,persistence:[cT,Xx,Z0]}),i=g0("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const h=iI(l.toString());Wx(t,h,()=>h(t.currentUser)),Hx(t,m=>h(m))}}const o=p0("auth");return o&&Nx(t,`http://${o}`),t}function aI(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}_x({loadJS(r){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{const l=nr("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",aI().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});nI("Browser");/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lI=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ov=(...r)=>r.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var uI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cI=he.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:o="",children:l,iconNode:h,...m},y)=>he.createElement("svg",{ref:y,...uI,width:e,height:e,stroke:r,strokeWidth:i?Number(t)*24/Number(e):t,className:ov("lucide",o),...m},[...h.map(([_,E])=>he.createElement(_,E)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=(r,e)=>{const t=he.forwardRef(({className:i,...o},l)=>he.createElement(cI,{ref:l,iconNode:e,className:ov(`lucide-${lI(r)}`,i),...o}));return t.displayName=`${r}`,t};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hI=Pe("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jd=Pe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dI=Pe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fI=Pe("Bed",[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Du=Pe("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gf=Pe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wc=Pe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pI=Pe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mI=Pe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gI=Pe("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yI=Pe("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vI=Pe("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _I=Pe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wI=Pe("Coffee",[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EI=Pe("Compass",[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yf=Pe("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ey=Pe("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ty=Pe("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ny=Pe("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xI=Pe("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const En=Pe("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=Pe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TI=Pe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const II=Pe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ec=Pe("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ry=Pe("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vf=Pe("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Md=Pe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SI=Pe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AI=Pe("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bo=Pe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _o=Pe("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kI=Pe("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CI=Pe("TramFront",[["rect",{width:"16",height:"16",x:"4",y:"3",rx:"2",key:"1wxw4b"}],["path",{d:"M4 11h16",key:"mpoxn0"}],["path",{d:"M12 3v8",key:"1h2ygw"}],["path",{d:"m8 19-2 3",key:"13i0xs"}],["path",{d:"m18 22-2-3",key:"1p0ohu"}],["path",{d:"M8 15h.01",key:"a7atzg"}],["path",{d:"M16 15h.01",key:"rnfrdf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xc=Pe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NI=Pe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _f=Pe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RI=Pe("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wf=Pe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var PI="firebase",bI="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ws(PI,bI,"app");var sy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xs,av;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,A){function I(){}I.prototype=A.prototype,P.F=A.prototype,P.prototype=new I,P.prototype.constructor=P,P.D=function(R,k,D){for(var S=Array(arguments.length-2),ne=2;ne<arguments.length;ne++)S[ne-2]=arguments[ne];return A.prototype[k].apply(R,S)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(P,A,I){I||(I=0);const R=Array(16);if(typeof A=="string")for(var k=0;k<16;++k)R[k]=A.charCodeAt(I++)|A.charCodeAt(I++)<<8|A.charCodeAt(I++)<<16|A.charCodeAt(I++)<<24;else for(k=0;k<16;++k)R[k]=A[I++]|A[I++]<<8|A[I++]<<16|A[I++]<<24;A=P.g[0],I=P.g[1],k=P.g[2];let D=P.g[3],S;S=A+(D^I&(k^D))+R[0]+3614090360&4294967295,A=I+(S<<7&4294967295|S>>>25),S=D+(k^A&(I^k))+R[1]+3905402710&4294967295,D=A+(S<<12&4294967295|S>>>20),S=k+(I^D&(A^I))+R[2]+606105819&4294967295,k=D+(S<<17&4294967295|S>>>15),S=I+(A^k&(D^A))+R[3]+3250441966&4294967295,I=k+(S<<22&4294967295|S>>>10),S=A+(D^I&(k^D))+R[4]+4118548399&4294967295,A=I+(S<<7&4294967295|S>>>25),S=D+(k^A&(I^k))+R[5]+1200080426&4294967295,D=A+(S<<12&4294967295|S>>>20),S=k+(I^D&(A^I))+R[6]+2821735955&4294967295,k=D+(S<<17&4294967295|S>>>15),S=I+(A^k&(D^A))+R[7]+4249261313&4294967295,I=k+(S<<22&4294967295|S>>>10),S=A+(D^I&(k^D))+R[8]+1770035416&4294967295,A=I+(S<<7&4294967295|S>>>25),S=D+(k^A&(I^k))+R[9]+2336552879&4294967295,D=A+(S<<12&4294967295|S>>>20),S=k+(I^D&(A^I))+R[10]+4294925233&4294967295,k=D+(S<<17&4294967295|S>>>15),S=I+(A^k&(D^A))+R[11]+2304563134&4294967295,I=k+(S<<22&4294967295|S>>>10),S=A+(D^I&(k^D))+R[12]+1804603682&4294967295,A=I+(S<<7&4294967295|S>>>25),S=D+(k^A&(I^k))+R[13]+4254626195&4294967295,D=A+(S<<12&4294967295|S>>>20),S=k+(I^D&(A^I))+R[14]+2792965006&4294967295,k=D+(S<<17&4294967295|S>>>15),S=I+(A^k&(D^A))+R[15]+1236535329&4294967295,I=k+(S<<22&4294967295|S>>>10),S=A+(k^D&(I^k))+R[1]+4129170786&4294967295,A=I+(S<<5&4294967295|S>>>27),S=D+(I^k&(A^I))+R[6]+3225465664&4294967295,D=A+(S<<9&4294967295|S>>>23),S=k+(A^I&(D^A))+R[11]+643717713&4294967295,k=D+(S<<14&4294967295|S>>>18),S=I+(D^A&(k^D))+R[0]+3921069994&4294967295,I=k+(S<<20&4294967295|S>>>12),S=A+(k^D&(I^k))+R[5]+3593408605&4294967295,A=I+(S<<5&4294967295|S>>>27),S=D+(I^k&(A^I))+R[10]+38016083&4294967295,D=A+(S<<9&4294967295|S>>>23),S=k+(A^I&(D^A))+R[15]+3634488961&4294967295,k=D+(S<<14&4294967295|S>>>18),S=I+(D^A&(k^D))+R[4]+3889429448&4294967295,I=k+(S<<20&4294967295|S>>>12),S=A+(k^D&(I^k))+R[9]+568446438&4294967295,A=I+(S<<5&4294967295|S>>>27),S=D+(I^k&(A^I))+R[14]+3275163606&4294967295,D=A+(S<<9&4294967295|S>>>23),S=k+(A^I&(D^A))+R[3]+4107603335&4294967295,k=D+(S<<14&4294967295|S>>>18),S=I+(D^A&(k^D))+R[8]+1163531501&4294967295,I=k+(S<<20&4294967295|S>>>12),S=A+(k^D&(I^k))+R[13]+2850285829&4294967295,A=I+(S<<5&4294967295|S>>>27),S=D+(I^k&(A^I))+R[2]+4243563512&4294967295,D=A+(S<<9&4294967295|S>>>23),S=k+(A^I&(D^A))+R[7]+1735328473&4294967295,k=D+(S<<14&4294967295|S>>>18),S=I+(D^A&(k^D))+R[12]+2368359562&4294967295,I=k+(S<<20&4294967295|S>>>12),S=A+(I^k^D)+R[5]+4294588738&4294967295,A=I+(S<<4&4294967295|S>>>28),S=D+(A^I^k)+R[8]+2272392833&4294967295,D=A+(S<<11&4294967295|S>>>21),S=k+(D^A^I)+R[11]+1839030562&4294967295,k=D+(S<<16&4294967295|S>>>16),S=I+(k^D^A)+R[14]+4259657740&4294967295,I=k+(S<<23&4294967295|S>>>9),S=A+(I^k^D)+R[1]+2763975236&4294967295,A=I+(S<<4&4294967295|S>>>28),S=D+(A^I^k)+R[4]+1272893353&4294967295,D=A+(S<<11&4294967295|S>>>21),S=k+(D^A^I)+R[7]+4139469664&4294967295,k=D+(S<<16&4294967295|S>>>16),S=I+(k^D^A)+R[10]+3200236656&4294967295,I=k+(S<<23&4294967295|S>>>9),S=A+(I^k^D)+R[13]+681279174&4294967295,A=I+(S<<4&4294967295|S>>>28),S=D+(A^I^k)+R[0]+3936430074&4294967295,D=A+(S<<11&4294967295|S>>>21),S=k+(D^A^I)+R[3]+3572445317&4294967295,k=D+(S<<16&4294967295|S>>>16),S=I+(k^D^A)+R[6]+76029189&4294967295,I=k+(S<<23&4294967295|S>>>9),S=A+(I^k^D)+R[9]+3654602809&4294967295,A=I+(S<<4&4294967295|S>>>28),S=D+(A^I^k)+R[12]+3873151461&4294967295,D=A+(S<<11&4294967295|S>>>21),S=k+(D^A^I)+R[15]+530742520&4294967295,k=D+(S<<16&4294967295|S>>>16),S=I+(k^D^A)+R[2]+3299628645&4294967295,I=k+(S<<23&4294967295|S>>>9),S=A+(k^(I|~D))+R[0]+4096336452&4294967295,A=I+(S<<6&4294967295|S>>>26),S=D+(I^(A|~k))+R[7]+1126891415&4294967295,D=A+(S<<10&4294967295|S>>>22),S=k+(A^(D|~I))+R[14]+2878612391&4294967295,k=D+(S<<15&4294967295|S>>>17),S=I+(D^(k|~A))+R[5]+4237533241&4294967295,I=k+(S<<21&4294967295|S>>>11),S=A+(k^(I|~D))+R[12]+1700485571&4294967295,A=I+(S<<6&4294967295|S>>>26),S=D+(I^(A|~k))+R[3]+2399980690&4294967295,D=A+(S<<10&4294967295|S>>>22),S=k+(A^(D|~I))+R[10]+4293915773&4294967295,k=D+(S<<15&4294967295|S>>>17),S=I+(D^(k|~A))+R[1]+2240044497&4294967295,I=k+(S<<21&4294967295|S>>>11),S=A+(k^(I|~D))+R[8]+1873313359&4294967295,A=I+(S<<6&4294967295|S>>>26),S=D+(I^(A|~k))+R[15]+4264355552&4294967295,D=A+(S<<10&4294967295|S>>>22),S=k+(A^(D|~I))+R[6]+2734768916&4294967295,k=D+(S<<15&4294967295|S>>>17),S=I+(D^(k|~A))+R[13]+1309151649&4294967295,I=k+(S<<21&4294967295|S>>>11),S=A+(k^(I|~D))+R[4]+4149444226&4294967295,A=I+(S<<6&4294967295|S>>>26),S=D+(I^(A|~k))+R[11]+3174756917&4294967295,D=A+(S<<10&4294967295|S>>>22),S=k+(A^(D|~I))+R[2]+718787259&4294967295,k=D+(S<<15&4294967295|S>>>17),S=I+(D^(k|~A))+R[9]+3951481745&4294967295,P.g[0]=P.g[0]+A&4294967295,P.g[1]=P.g[1]+(k+(S<<21&4294967295|S>>>11))&4294967295,P.g[2]=P.g[2]+k&4294967295,P.g[3]=P.g[3]+D&4294967295}i.prototype.v=function(P,A){A===void 0&&(A=P.length);const I=A-this.blockSize,R=this.C;let k=this.h,D=0;for(;D<A;){if(k==0)for(;D<=I;)o(this,P,D),D+=this.blockSize;if(typeof P=="string"){for(;D<A;)if(R[k++]=P.charCodeAt(D++),k==this.blockSize){o(this,R),k=0;break}}else for(;D<A;)if(R[k++]=P[D++],k==this.blockSize){o(this,R),k=0;break}}this.h=k,this.o+=A},i.prototype.A=function(){var P=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);P[0]=128;for(var A=1;A<P.length-8;++A)P[A]=0;A=this.o*8;for(var I=P.length-8;I<P.length;++I)P[I]=A&255,A/=256;for(this.v(P),P=Array(16),A=0,I=0;I<4;++I)for(let R=0;R<32;R+=8)P[A++]=this.g[I]>>>R&255;return P};function l(P,A){var I=m;return Object.prototype.hasOwnProperty.call(I,P)?I[P]:I[P]=A(P)}function h(P,A){this.h=A;const I=[];let R=!0;for(let k=P.length-1;k>=0;k--){const D=P[k]|0;R&&D==A||(I[k]=D,R=!1)}this.g=I}var m={};function y(P){return-128<=P&&P<128?l(P,function(A){return new h([A|0],A<0?-1:0)}):new h([P|0],P<0?-1:0)}function _(P){if(isNaN(P)||!isFinite(P))return T;if(P<0)return B(_(-P));const A=[];let I=1;for(let R=0;P>=I;R++)A[R]=P/I|0,I*=4294967296;return new h(A,0)}function E(P,A){if(P.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(P.charAt(0)=="-")return B(E(P.substring(1),A));if(P.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=_(Math.pow(A,8));let R=T;for(let D=0;D<P.length;D+=8){var k=Math.min(8,P.length-D);const S=parseInt(P.substring(D,D+k),A);k<8?(k=_(Math.pow(A,k)),R=R.j(k).add(_(S))):(R=R.j(I),R=R.add(_(S)))}return R}var T=y(0),C=y(1),F=y(16777216);r=h.prototype,r.m=function(){if(W(this))return-B(this).m();let P=0,A=1;for(let I=0;I<this.g.length;I++){const R=this.i(I);P+=(R>=0?R:4294967296+R)*A,A*=4294967296}return P},r.toString=function(P){if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(q(this))return"0";if(W(this))return"-"+B(this).toString(P);const A=_(Math.pow(P,6));var I=this;let R="";for(;;){const k=pe(I,A).g;I=Z(I,k.j(A));let D=((I.g.length>0?I.g[0]:I.h)>>>0).toString(P);if(I=k,q(I))return D+R;for(;D.length<6;)D="0"+D;R=D+R}},r.i=function(P){return P<0?0:P<this.g.length?this.g[P]:this.h};function q(P){if(P.h!=0)return!1;for(let A=0;A<P.g.length;A++)if(P.g[A]!=0)return!1;return!0}function W(P){return P.h==-1}r.l=function(P){return P=Z(this,P),W(P)?-1:q(P)?0:1};function B(P){const A=P.g.length,I=[];for(let R=0;R<A;R++)I[R]=~P.g[R];return new h(I,~P.h).add(C)}r.abs=function(){return W(this)?B(this):this},r.add=function(P){const A=Math.max(this.g.length,P.g.length),I=[];let R=0;for(let k=0;k<=A;k++){let D=R+(this.i(k)&65535)+(P.i(k)&65535),S=(D>>>16)+(this.i(k)>>>16)+(P.i(k)>>>16);R=S>>>16,D&=65535,S&=65535,I[k]=S<<16|D}return new h(I,I[I.length-1]&-2147483648?-1:0)};function Z(P,A){return P.add(B(A))}r.j=function(P){if(q(this)||q(P))return T;if(W(this))return W(P)?B(this).j(B(P)):B(B(this).j(P));if(W(P))return B(this.j(B(P)));if(this.l(F)<0&&P.l(F)<0)return _(this.m()*P.m());const A=this.g.length+P.g.length,I=[];for(var R=0;R<2*A;R++)I[R]=0;for(R=0;R<this.g.length;R++)for(let k=0;k<P.g.length;k++){const D=this.i(R)>>>16,S=this.i(R)&65535,ne=P.i(k)>>>16,Se=P.i(k)&65535;I[2*R+2*k]+=S*Se,te(I,2*R+2*k),I[2*R+2*k+1]+=D*Se,te(I,2*R+2*k+1),I[2*R+2*k+1]+=S*ne,te(I,2*R+2*k+1),I[2*R+2*k+2]+=D*ne,te(I,2*R+2*k+2)}for(P=0;P<A;P++)I[P]=I[2*P+1]<<16|I[2*P];for(P=A;P<2*A;P++)I[P]=0;return new h(I,0)};function te(P,A){for(;(P[A]&65535)!=P[A];)P[A+1]+=P[A]>>>16,P[A]&=65535,A++}function ge(P,A){this.g=P,this.h=A}function pe(P,A){if(q(A))throw Error("division by zero");if(q(P))return new ge(T,T);if(W(P))return A=pe(B(P),A),new ge(B(A.g),B(A.h));if(W(A))return A=pe(P,B(A)),new ge(B(A.g),A.h);if(P.g.length>30){if(W(P)||W(A))throw Error("slowDivide_ only works with positive integers.");for(var I=C,R=A;R.l(P)<=0;)I=ie(I),R=ie(R);var k=ve(I,1),D=ve(R,1);for(R=ve(R,2),I=ve(I,2);!q(R);){var S=D.add(R);S.l(P)<=0&&(k=k.add(I),D=S),R=ve(R,1),I=ve(I,1)}return A=Z(P,k.j(A)),new ge(k,A)}for(k=T;P.l(A)>=0;){for(I=Math.max(1,Math.floor(P.m()/A.m())),R=Math.ceil(Math.log(I)/Math.LN2),R=R<=48?1:Math.pow(2,R-48),D=_(I),S=D.j(A);W(S)||S.l(P)>0;)I-=R,D=_(I),S=D.j(A);q(D)&&(D=C),k=k.add(D),P=Z(P,S)}return new ge(k,P)}r.B=function(P){return pe(this,P).h},r.and=function(P){const A=Math.max(this.g.length,P.g.length),I=[];for(let R=0;R<A;R++)I[R]=this.i(R)&P.i(R);return new h(I,this.h&P.h)},r.or=function(P){const A=Math.max(this.g.length,P.g.length),I=[];for(let R=0;R<A;R++)I[R]=this.i(R)|P.i(R);return new h(I,this.h|P.h)},r.xor=function(P){const A=Math.max(this.g.length,P.g.length),I=[];for(let R=0;R<A;R++)I[R]=this.i(R)^P.i(R);return new h(I,this.h^P.h)};function ie(P){const A=P.g.length+1,I=[];for(let R=0;R<A;R++)I[R]=P.i(R)<<1|P.i(R-1)>>>31;return new h(I,P.h)}function ve(P,A){const I=A>>5;A%=32;const R=P.g.length-I,k=[];for(let D=0;D<R;D++)k[D]=A>0?P.i(D+I)>>>A|P.i(D+I+1)<<32-A:P.i(D+I);return new h(k,P.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,av=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=_,h.fromString=E,xs=h}).apply(typeof sy<"u"?sy:typeof self<"u"?self:typeof window<"u"?window:{});var Vu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var lv,Ma,uv,$u,Fd,cv,hv,dv;(function(){var r,e=Object.defineProperty;function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Vu=="object"&&Vu];for(var p=0;p<u.length;++p){var v=u[p];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=t(this);function o(u,p){if(p)e:{var v=i;u=u.split(".");for(var x=0;x<u.length-1;x++){var j=u[x];if(!(j in v))break e;v=v[j]}u=u[u.length-1],x=v[u],p=p(x),p!=x&&p!=null&&e(v,u,{configurable:!0,writable:!0,value:p})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(p){var v=[],x;for(x in p)Object.prototype.hasOwnProperty.call(p,x)&&v.push([x,p[x]]);return v}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},h=this||self;function m(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function y(u,p,v){return u.call.apply(u.bind,arguments)}function _(u,p,v){return _=y,_.apply(null,arguments)}function E(u,p){var v=Array.prototype.slice.call(arguments,1);return function(){var x=v.slice();return x.push.apply(x,arguments),u.apply(this,x)}}function T(u,p){function v(){}v.prototype=p.prototype,u.Z=p.prototype,u.prototype=new v,u.prototype.constructor=u,u.Ob=function(x,j,z){for(var ee=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)ee[ke-2]=arguments[ke];return p.prototype[j].apply(x,ee)}}var C=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function F(u){const p=u.length;if(p>0){const v=Array(p);for(let x=0;x<p;x++)v[x]=u[x];return v}return[]}function q(u,p){for(let x=1;x<arguments.length;x++){const j=arguments[x];var v=typeof j;if(v=v!="object"?v:j?Array.isArray(j)?"array":v:"null",v=="array"||v=="object"&&typeof j.length=="number"){v=u.length||0;const z=j.length||0;u.length=v+z;for(let ee=0;ee<z;ee++)u[v+ee]=j[ee]}else u.push(j)}}class W{constructor(p,v){this.i=p,this.j=v,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function B(u){h.setTimeout(()=>{throw u},0)}function Z(){var u=P;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class te{constructor(){this.h=this.g=null}add(p,v){const x=ge.get();x.set(p,v),this.h?this.h.next=x:this.g=x,this.h=x}}var ge=new W(()=>new pe,u=>u.reset());class pe{constructor(){this.next=this.g=this.h=null}set(p,v){this.h=p,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let ie,ve=!1,P=new te,A=()=>{const u=Promise.resolve(void 0);ie=()=>{u.then(I)}};function I(){for(var u;u=Z();){try{u.h.call(u.g)}catch(v){B(v)}var p=ge;p.j(u),p.h<100&&(p.h++,u.next=p.g,p.g=u)}ve=!1}function R(){this.u=this.u,this.C=this.C}R.prototype.u=!1,R.prototype.dispose=function(){this.u||(this.u=!0,this.N())},R.prototype[Symbol.dispose]=function(){this.dispose()},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var D=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};h.addEventListener("test",v,p),h.removeEventListener("test",v,p)}catch{}return u})();function S(u){return/^[\s\xa0]*$/.test(u)}function ne(u,p){k.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,p)}T(ne,k),ne.prototype.init=function(u,p){const v=this.type=u.type,x=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget,p||(v=="mouseover"?p=u.fromElement:v=="mouseout"&&(p=u.toElement)),this.relatedTarget=p,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&ne.Z.h.call(this)},ne.prototype.h=function(){ne.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Se="closure_listenable_"+(Math.random()*1e6|0),ae=0;function Ie(u,p,v,x,j){this.listener=u,this.proxy=null,this.src=p,this.type=v,this.capture=!!x,this.ha=j,this.key=++ae,this.da=this.fa=!1}function Y(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function de(u,p,v){for(const x in u)p.call(v,u[x],x,u)}function le(u,p){for(const v in u)p.call(void 0,u[v],v,u)}function O(u){const p={};for(const v in u)p[v]=u[v];return p}const K="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ne(u,p){let v,x;for(let j=1;j<arguments.length;j++){x=arguments[j];for(v in x)u[v]=x[v];for(let z=0;z<K.length;z++)v=K[z],Object.prototype.hasOwnProperty.call(x,v)&&(u[v]=x[v])}}function Re(u){this.src=u,this.g={},this.h=0}Re.prototype.add=function(u,p,v,x,j){const z=u.toString();u=this.g[z],u||(u=this.g[z]=[],this.h++);const ee=Ve(u,p,x,j);return ee>-1?(p=u[ee],v||(p.fa=!1)):(p=new Ie(p,this.src,z,!!x,j),p.fa=v,u.push(p)),p};function De(u,p){const v=p.type;if(v in u.g){var x=u.g[v],j=Array.prototype.indexOf.call(x,p,void 0),z;(z=j>=0)&&Array.prototype.splice.call(x,j,1),z&&(Y(p),u.g[v].length==0&&(delete u.g[v],u.h--))}}function Ve(u,p,v,x){for(let j=0;j<u.length;++j){const z=u[j];if(!z.da&&z.listener==p&&z.capture==!!v&&z.ha==x)return j}return-1}var qe="closure_lm_"+(Math.random()*1e6|0),Ue={};function Ke(u,p,v,x,j){if(Array.isArray(p)){for(let z=0;z<p.length;z++)Ke(u,p[z],v,x,j);return null}return v=zo(v),u&&u[Se]?u.J(p,v,m(x)?!!x.capture:!1,j):Bt(u,p,v,!1,x,j)}function Bt(u,p,v,x,j,z){if(!p)throw Error("Invalid event type");const ee=m(j)?!!j.capture:!!j;let ke=Ii(u);if(ke||(u[qe]=ke=new Re(u)),v=ke.add(p,v,x,ee,z),v.proxy)return v;if(x=xi(),v.proxy=x,x.src=u,x.listener=v,u.addEventListener)D||(j=ee),j===void 0&&(j=!1),u.addEventListener(p.toString(),x,j);else if(u.attachEvent)u.attachEvent(Ti(p.toString()),x);else if(u.addListener&&u.removeListener)u.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return v}function xi(){function u(v){return p.call(u.src,u.listener,v)}const p=gl;return u}function Uo(u,p,v,x,j){if(Array.isArray(p))for(var z=0;z<p.length;z++)Uo(u,p[z],v,x,j);else x=m(x)?!!x.capture:!!x,v=zo(v),u&&u[Se]?(u=u.i,z=String(p).toString(),z in u.g&&(p=u.g[z],v=Ve(p,v,x,j),v>-1&&(Y(p[v]),Array.prototype.splice.call(p,v,1),p.length==0&&(delete u.g[z],u.h--)))):u&&(u=Ii(u))&&(p=u.g[p.toString()],u=-1,p&&(u=Ve(p,v,x,j)),(v=u>-1?p[u]:null)&&Lr(v))}function Lr(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[Se])De(p.i,u);else{var v=u.type,x=u.proxy;p.removeEventListener?p.removeEventListener(v,x,u.capture):p.detachEvent?p.detachEvent(Ti(v),x):p.addListener&&p.removeListener&&p.removeListener(x),(v=Ii(p))?(De(v,u),v.h==0&&(v.src=null,p[qe]=null)):Y(u)}}}function Ti(u){return u in Ue?Ue[u]:Ue[u]="on"+u}function gl(u,p){if(u.da)u=!0;else{p=new ne(p,this);const v=u.listener,x=u.ha||u.src;u.fa&&Lr(u),u=v.call(x,p)}return u}function Ii(u){return u=u[qe],u instanceof Re?u:null}var Vs="__closure_events_fn_"+(Math.random()*1e9>>>0);function zo(u){return typeof u=="function"?u:(u[Vs]||(u[Vs]=function(p){return u.handleEvent(p)}),u[Vs])}function dt(){R.call(this),this.i=new Re(this),this.M=this,this.G=null}T(dt,R),dt.prototype[Se]=!0,dt.prototype.removeEventListener=function(u,p,v,x){Uo(this,u,p,v,x)};function at(u,p){var v,x=u.G;if(x)for(v=[];x;x=x.G)v.push(x);if(u=u.M,x=p.type||p,typeof p=="string")p=new k(p,u);else if(p instanceof k)p.target=p.target||u;else{var j=p;p=new k(x,u),Ne(p,j)}j=!0;let z,ee;if(v)for(ee=v.length-1;ee>=0;ee--)z=p.g=v[ee],j=Tn(z,x,!0,p)&&j;if(z=p.g=u,j=Tn(z,x,!0,p)&&j,j=Tn(z,x,!1,p)&&j,v)for(ee=0;ee<v.length;ee++)z=p.g=v[ee],j=Tn(z,x,!1,p)&&j}dt.prototype.N=function(){if(dt.Z.N.call(this),this.i){var u=this.i;for(const p in u.g){const v=u.g[p];for(let x=0;x<v.length;x++)Y(v[x]);delete u.g[p],u.h--}}this.G=null},dt.prototype.J=function(u,p,v,x){return this.i.add(String(u),p,!1,v,x)},dt.prototype.K=function(u,p,v,x){return this.i.add(String(u),p,!0,v,x)};function Tn(u,p,v,x){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();let j=!0;for(let z=0;z<p.length;++z){const ee=p[z];if(ee&&!ee.da&&ee.capture==v){const ke=ee.listener,lt=ee.ha||ee.src;ee.fa&&De(u.i,ee),j=ke.call(lt,x)!==!1&&j}}return j&&!x.defaultPrevented}function Bo(u,p){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=_(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:h.setTimeout(u,p||0)}function $o(u){u.g=Bo(()=>{u.g=null,u.i&&(u.i=!1,$o(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class yl extends R{constructor(p,v){super(),this.m=p,this.l=v,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:$o(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function jr(u){R.call(this),this.h=u,this.g={}}T(jr,R);var qo=[];function Si(u){de(u.g,function(p,v){this.g.hasOwnProperty(v)&&Lr(p)},u),u.g={}}jr.prototype.N=function(){jr.Z.N.call(this),Si(this)},jr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Mr=h.JSON.stringify,vl=h.JSON.parse,Os=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function Fr(){}function _l(){}var Ur={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ai(){k.call(this,"d")}T(Ai,k);function Ho(){k.call(this,"c")}T(Ho,k);var In={},ki=null;function zr(){return ki=ki||new dt}In.Ia="serverreachability";function Ci(u){k.call(this,In.Ia,u)}T(Ci,k);function lr(u){const p=zr();at(p,new Ci(p))}In.STAT_EVENT="statevent";function ur(u,p){k.call(this,In.STAT_EVENT,u),this.stat=p}T(ur,k);function it(u){const p=zr();at(p,new ur(p,u))}In.Ja="timingevent";function Wo(u,p){k.call(this,In.Ja,u),this.size=p}T(Wo,k);function Br(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},p)}function $r(){this.g=!0}$r.prototype.ua=function(){this.g=!1};function wl(u,p,v,x,j,z){u.info(function(){if(u.g)if(z){var ee="",ke=z.split("&");for(let We=0;We<ke.length;We++){var lt=ke[We].split("=");if(lt.length>1){const ft=lt[0];lt=lt[1];const sn=ft.split("_");ee=sn.length>=2&&sn[1]=="type"?ee+(ft+"="+lt+"&"):ee+(ft+"=redacted&")}}}else ee=null;else ee=z;return"XMLHTTP REQ ("+x+") [attempt "+j+"]: "+p+`
`+v+`
`+ee})}function El(u,p,v,x,j,z,ee){u.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+j+"]: "+p+`
`+v+`
`+z+" "+ee})}function jn(u,p,v,x){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+Ls(u,v)+(x?" "+x:"")})}function xl(u,p){u.info(function(){return"TIMEOUT: "+p})}$r.prototype.info=function(){};function Ls(u,p){if(!u.g)return p;if(!p)return null;try{const z=JSON.parse(p);if(z){for(u=0;u<z.length;u++)if(Array.isArray(z[u])){var v=z[u];if(!(v.length<2)){var x=v[1];if(Array.isArray(x)&&!(x.length<1)){var j=x[0];if(j!="noop"&&j!="stop"&&j!="close")for(let ee=1;ee<x.length;ee++)x[ee]=""}}}}return Mr(z)}catch{return p}}var qr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Hr={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Tl;function cr(){}T(cr,Fr),cr.prototype.g=function(){return new XMLHttpRequest},Tl=new cr;function Mn(u){return encodeURIComponent(String(u))}function Ni(u){var p=1;u=u.split(":");const v=[];for(;p>0&&u.length;)v.push(u.shift()),p--;return u.length&&v.push(u.join(":")),v}function hn(u,p,v,x){this.j=u,this.i=p,this.l=v,this.S=x||1,this.V=new jr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Il}function Il(){this.i=null,this.g="",this.h=!1}var Sl={},Ko={};function Sn(u,p,v){u.M=1,u.A=dr(dn(p)),u.u=v,u.R=!0,Go(u,null)}function Go(u,p){u.F=Date.now(),js(u),u.B=dn(u.A);var v=u.B,x=u.S;Array.isArray(x)||(x=[String(x)]),sa(v.i,"t",x),u.C=0,v=u.j.L,u.h=new Il,u.g=Ol(u.j,v?p:null,!u.u),u.P>0&&(u.O=new yl(_(u.Y,u,u.g),u.P)),p=u.V,v=u.g,x=u.ba;var j="readystatechange";Array.isArray(j)||(j&&(qo[0]=j.toString()),j=qo);for(let z=0;z<j.length;z++){const ee=Ke(v,j[z],x||p.handleEvent,!1,p.h||p);if(!ee)break;p.g[ee.key]=ee}p=u.J?O(u.J):{},u.u?(u.v||(u.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,p)):(u.v="GET",u.g.ea(u.B,u.v,null,p)),lr(),wl(u.i,u.v,u.B,u.l,u.S,u.u)}hn.prototype.ba=function(u){u=u.target;const p=this.O;p&&Hn(u)==3?p.j():this.Y(u)},hn.prototype.Y=function(u){try{if(u==this.g)e:{const ke=Hn(this.g),lt=this.g.ya(),We=this.g.ca();if(!(ke<3)&&(ke!=3||this.g&&(this.h.h||this.g.la()||Dl(this.g)))){this.K||ke!=4||lt==7||(lt==8||We<=0?lr(3):lr(2)),Ri(this);var p=this.g.ca();this.X=p;var v=Al(this);if(this.o=p==200,El(this.i,this.v,this.B,this.l,this.S,ke,p),this.o){if(this.U&&!this.L){t:{if(this.g){var x,j=this.g;if((x=j.g?j.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(x)){var z=x;break t}}z=null}if(u=z)jn(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Je(this,u);else{this.o=!1,this.m=3,it(12),hr(this),Ms(this);break e}}if(this.R){u=!0;let ft;for(;!this.K&&this.C<v.length;)if(ft=Cl(this,v),ft==Ko){ke==4&&(this.m=4,it(14),u=!1),jn(this.i,this.l,null,"[Incomplete Response]");break}else if(ft==Sl){this.m=4,it(15),jn(this.i,this.l,v,"[Invalid Chunk]"),u=!1;break}else jn(this.i,this.l,ft,null),Je(this,ft);if(kl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ke!=4||v.length!=0||this.h.h||(this.m=1,it(16),u=!1),this.o=this.o&&u,!u)jn(this.i,this.l,v,"[Invalid Chunked Response]"),hr(this),Ms(this);else if(v.length>0&&!this.W){this.W=!0;var ee=this.j;ee.g==this&&ee.aa&&!ee.P&&(ee.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),Ks(ee),ee.P=!0,it(11))}}else jn(this.i,this.l,v,null),Je(this,v);ke==4&&hr(this),this.o&&!this.K&&(ke==4?Ui(this.j,this):(this.o=!1,js(this)))}else oa(this.g),p==400&&v.indexOf("Unknown SID")>0?(this.m=3,it(12)):(this.m=0,it(13)),hr(this),Ms(this)}}}catch{}finally{}};function Al(u){if(!kl(u))return u.g.la();const p=Dl(u.g);if(p==="")return"";let v="";const x=p.length,j=Hn(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return hr(u),Ms(u),"";u.h.i=new h.TextDecoder}for(let z=0;z<x;z++)u.h.h=!0,v+=u.h.i.decode(p[z],{stream:!(j&&z==x-1)});return p.length=0,u.h.g+=v,u.C=0,u.h.g}function kl(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Cl(u,p){var v=u.C,x=p.indexOf(`
`,v);return x==-1?Ko:(v=Number(p.substring(v,x)),isNaN(v)?Sl:(x+=1,x+v>p.length?Ko:(p=p.slice(x,x+v),u.C=x+v,p)))}hn.prototype.cancel=function(){this.K=!0,hr(this)};function js(u){u.T=Date.now()+u.H,Qo(u,u.H)}function Qo(u,p){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Br(_(u.aa,u),p)}function Ri(u){u.D&&(h.clearTimeout(u.D),u.D=null)}hn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(xl(this.i,this.B),this.M!=2&&(lr(),it(17)),hr(this),this.m=2,Ms(this)):Qo(this,this.T-u)};function Ms(u){u.j.I==0||u.K||Ui(u.j,u)}function hr(u){Ri(u);var p=u.O;p&&typeof p.dispose=="function"&&p.dispose(),u.O=null,Si(u.V),u.g&&(p=u.g,u.g=null,p.abort(),p.dispose())}function Je(u,p){try{var v=u.j;if(v.I!=0&&(v.g==u||Jo(v.h,u))){if(!u.L&&Jo(v.h,u)&&v.I==3){try{var x=v.Ba.g.parse(p)}catch{x=null}if(Array.isArray(x)&&x.length==3){var j=x;if(j[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<u.F)Fi(v),nn(v);else break e;Gn(v),it(18)}}else v.xa=j[1],0<v.xa-v.K&&j[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=Br(_(v.Va,v),6e3));Fs(v.h)<=1&&v.ta&&(v.ta=void 0)}else rn(v,11)}else if((u.L||v.g==u)&&Fi(v),!S(p))for(j=v.Ba.g.parse(p),p=0;p<j.length;p++){let We=j[p];const ft=We[0];if(!(ft<=v.K))if(v.K=ft,We=We[1],v.I==2)if(We[0]=="c"){v.M=We[1],v.ba=We[2];const sn=We[3];sn!=null&&(v.ka=sn,v.j.info("VER="+v.ka));const yr=We[4];yr!=null&&(v.za=yr,v.j.info("SVER="+v.za));const Qn=We[5];Qn!=null&&typeof Qn=="number"&&Qn>0&&(x=1.5*Qn,v.O=x,v.j.info("backChannelRequestTimeoutMs_="+x)),x=v;const Yn=u.g;if(Yn){const $i=Yn.g?Yn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($i){var z=x.h;z.g||$i.indexOf("spdy")==-1&&$i.indexOf("quic")==-1&&$i.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(bi(z,z.h),z.h=null))}if(x.G){const ua=Yn.g?Yn.g.getResponseHeader("X-HTTP-Session-Id"):null;ua&&(x.wa=ua,$e(x.J,x.G,ua))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-u.F,v.j.info("Handshake RTT: "+v.T+"ms")),x=v;var ee=u;if(x.na=la(x,x.L?x.ba:null,x.W),ee.L){Us(x.h,ee);var ke=ee,lt=x.O;lt&&(ke.H=lt),ke.D&&(Ri(ke),js(ke)),x.g=ee}else Dt(x);v.i.length>0&&gr(v)}else We[0]!="stop"&&We[0]!="close"||rn(v,7);else v.I==3&&(We[0]=="stop"||We[0]=="close"?We[0]=="stop"?rn(v,7):ji(v):We[0]!="noop"&&v.l&&v.l.qa(We),v.A=0)}}lr(4)}catch{}}var Uc=class{constructor(u,p){this.g=u,this.map=p}};function Pi(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Yo(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Fs(u){return u.h?1:u.g?u.g.size:0}function Jo(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function bi(u,p){u.g?u.g.add(p):u.h=p}function Us(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}Pi.prototype.cancel=function(){if(this.i=Zt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Zt(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const v of u.g.values())p=p.concat(v.G);return p}return F(u.i)}var Nl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function en(u,p){if(u){u=u.split("&");for(let v=0;v<u.length;v++){const x=u[v].indexOf("=");let j,z=null;x>=0?(j=u[v].substring(0,x),z=u[v].substring(x+1)):j=u[v],p(j,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function Fn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;u instanceof Fn?(this.l=u.l,zs(this,u.j),this.o=u.o,this.g=u.g,Un(this,u.u),this.h=u.h,Wr(this,ia(u.i)),this.m=u.m):u&&(p=String(u).match(Nl))?(this.l=!1,zs(this,p[1]||"",!0),this.o=Bs(p[2]||""),this.g=Bs(p[3]||"",!0),Un(this,p[4]),this.h=Bs(p[5]||"",!0),Wr(this,p[6]||"",!0),this.m=Bs(p[7]||"")):(this.l=!1,this.i=new Me(null,this.l))}Fn.prototype.toString=function(){const u=[];var p=this.j;p&&u.push($s(p,Zo,!0),":");var v=this.g;return(v||p=="file")&&(u.push("//"),(p=this.o)&&u.push($s(p,Zo,!0),"@"),u.push(Mn(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&u.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push($s(v,v.charAt(0)=="/"?qs:ea,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",$s(v,ta)),u.join("")},Fn.prototype.resolve=function(u){const p=dn(this);let v=!!u.j;v?zs(p,u.j):v=!!u.o,v?p.o=u.o:v=!!u.g,v?p.g=u.g:v=u.u!=null;var x=u.h;if(v)Un(p,u.u);else if(v=!!u.h){if(x.charAt(0)!="/")if(this.g&&!this.h)x="/"+x;else{var j=p.h.lastIndexOf("/");j!=-1&&(x=p.h.slice(0,j+1)+x)}if(j=x,j==".."||j==".")x="";else if(j.indexOf("./")!=-1||j.indexOf("/.")!=-1){x=j.lastIndexOf("/",0)==0,j=j.split("/");const z=[];for(let ee=0;ee<j.length;){const ke=j[ee++];ke=="."?x&&ee==j.length&&z.push(""):ke==".."?((z.length>1||z.length==1&&z[0]!="")&&z.pop(),x&&ee==j.length&&z.push("")):(z.push(ke),x=!0)}x=z.join("/")}else x=j}return v?p.h=x:v=u.i.toString()!=="",v?Wr(p,ia(u.i)):v=!!u.m,v&&(p.m=u.m),p};function dn(u){return new Fn(u)}function zs(u,p,v){u.j=v?Bs(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function Un(u,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);u.u=p}else u.u=null}function Wr(u,p,v){p instanceof Me?(u.i=p,Vi(u.i,u.l)):(v||(p=$s(p,zc)),u.i=new Me(p,u.l))}function $e(u,p,v){u.i.set(p,v)}function dr(u){return $e(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Bs(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function $s(u,p,v){return typeof u=="string"?(u=encodeURI(u).replace(p,Xo),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Xo(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Zo=/[#\/\?@]/g,ea=/[#\?:]/g,qs=/[#\?]/g,zc=/[#\?@]/g,ta=/#/g;function Me(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function zn(u){u.g||(u.g=new Map,u.h=0,u.i&&en(u.i,function(p,v){u.add(decodeURIComponent(p.replace(/\+/g," ")),v)}))}r=Me.prototype,r.add=function(u,p){zn(this),this.i=null,u=Bn(this,u);let v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(p),this.h+=1,this};function na(u,p){zn(u),p=Bn(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function Di(u,p){return zn(u),p=Bn(u,p),u.g.has(p)}r.forEach=function(u,p){zn(this),this.g.forEach(function(v,x){v.forEach(function(j){u.call(p,j,x,this)},this)},this)};function ra(u,p){zn(u);let v=[];if(typeof p=="string")Di(u,p)&&(v=v.concat(u.g.get(Bn(u,p))));else for(u=Array.from(u.g.values()),p=0;p<u.length;p++)v=v.concat(u[p]);return v}r.set=function(u,p){return zn(this),this.i=null,u=Bn(this,u),Di(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},r.get=function(u,p){return u?(u=ra(this,u),u.length>0?String(u[0]):p):p};function sa(u,p,v){na(u,p),v.length>0&&(u.i=null,u.g.set(Bn(u,p),F(v)),u.h+=v.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(let x=0;x<p.length;x++){var v=p[x];const j=Mn(v);v=ra(this,v);for(let z=0;z<v.length;z++){let ee=j;v[z]!==""&&(ee+="="+Mn(v[z])),u.push(ee)}}return this.i=u.join("&")};function ia(u){const p=new Me;return p.i=u.i,u.g&&(p.g=new Map(u.g),p.h=u.h),p}function Bn(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function Vi(u,p){p&&!u.j&&(zn(u),u.i=null,u.g.forEach(function(v,x){const j=x.toLowerCase();x!=j&&(na(this,x),sa(this,j,v))},u)),u.j=p}function $n(u,p){const v=new $r;if(h.Image){const x=new Image;x.onload=E(At,v,"TestLoadImage: loaded",!0,p,x),x.onerror=E(At,v,"TestLoadImage: error",!1,p,x),x.onabort=E(At,v,"TestLoadImage: abort",!1,p,x),x.ontimeout=E(At,v,"TestLoadImage: timeout",!1,p,x),h.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=u}else p(!1)}function qn(u,p){const v=new $r,x=new AbortController,j=setTimeout(()=>{x.abort(),At(v,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:x.signal}).then(z=>{clearTimeout(j),z.ok?At(v,"TestPingServer: ok",!0,p):At(v,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(j),At(v,"TestPingServer: error",!1,p)})}function At(u,p,v,x,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),x(v)}catch{}}function Hs(){this.g=new Os}function fr(u){this.i=u.Sb||null,this.h=u.ab||!1}T(fr,Fr),fr.prototype.g=function(){return new tn(this.i,this.h)};function tn(u,p){dt.call(this),this.H=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(tn,dt),r=tn.prototype,r.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=p,this.readyState=1,An(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(p.body=u),(this.H||h).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Kr(this)),this.readyState=0},r.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,An(this)),this.g&&(this.readyState=3,An(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Rl(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Rl(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}r.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?Kr(this):An(this),this.readyState==3&&Rl(this)}},r.Oa=function(u){this.g&&(this.response=this.responseText=u,Kr(this))},r.Na=function(u){this.g&&(this.response=u,Kr(this))},r.ga=function(){this.g&&Kr(this)};function Kr(u){u.readyState=4,u.l=null,u.j=null,u.B=null,An(u)}r.setRequestHeader=function(u,p){this.A.append(u,p)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var v=p.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=p.next();return u.join(`\r
`)};function An(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(tn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Pl(u){let p="";return de(u,function(v,x){p+=x,p+=":",p+=v,p+=`\r
`}),p}function Oi(u,p,v){e:{for(x in v){var x=!1;break e}x=!0}x||(v=Pl(v),typeof u=="string"?v!=null&&Mn(v):$e(u,p,v))}function Ge(u){dt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(Ge,dt);var bl=/^https?$/i,Bc=["POST","PUT"];r=Ge.prototype,r.Fa=function(u){this.H=u},r.ea=function(u,p,v,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Tl.g(),this.g.onreadystatechange=C(_(this.Ca,this));try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(z){Gr(this,z);return}if(u=v||"",v=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var j in x)v.set(j,x[j]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const z of x.keys())v.set(z,x.get(z));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(v.keys()).find(z=>z.toLowerCase()=="content-type"),j=h.FormData&&u instanceof h.FormData,!(Array.prototype.indexOf.call(Bc,p,void 0)>=0)||x||j||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[z,ee]of v)this.g.setRequestHeader(z,ee);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(z){Gr(this,z)}};function Gr(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.o=5,Qr(u),mr(u)}function Qr(u){u.A||(u.A=!0,at(u,"complete"),at(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,at(this,"complete"),at(this,"abort"),mr(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),mr(this,!0)),Ge.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?pr(this):this.Xa())},r.Xa=function(){pr(this)};function pr(u){if(u.h&&typeof l<"u"){if(u.v&&Hn(u)==4)setTimeout(u.Ca.bind(u),0);else if(at(u,"readystatechange"),Hn(u)==4){u.h=!1;try{const z=u.ca();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var v;if(!(v=p)){var x;if(x=z===0){let ee=String(u.D).match(Nl)[1]||null;!ee&&h.self&&h.self.location&&(ee=h.self.location.protocol.slice(0,-1)),x=!bl.test(ee?ee.toLowerCase():"")}v=x}if(v)at(u,"complete"),at(u,"success");else{u.o=6;try{var j=Hn(u)>2?u.g.statusText:""}catch{j=""}u.l=j+" ["+u.ca()+"]",Qr(u)}}finally{mr(u)}}}}function mr(u,p){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const v=u.g;u.g=null,p||at(u,"ready");try{v.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Hn(u){return u.g?u.g.readyState:0}r.ca=function(){try{return Hn(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),vl(p)}};function Dl(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function oa(u){const p={};u=(u.g&&Hn(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<u.length;x++){if(S(u[x]))continue;var v=Ni(u[x]);const j=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const z=p[j]||[];p[j]=z,z.push(v)}le(p,function(x){return x.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Wn(u,p,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||p}function Li(u){this.za=0,this.i=[],this.j=new $r,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Wn("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Wn("baseRetryDelayMs",5e3,u),this.Za=Wn("retryDelaySeedMs",1e4,u),this.Ta=Wn("forwardChannelMaxRetries",2,u),this.va=Wn("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Pi(u&&u.concurrentRequestLimit),this.Ba=new Hs,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Li.prototype,r.ka=8,r.I=1,r.connect=function(u,p,v,x){it(0),this.W=u,this.H=p||{},v&&x!==void 0&&(this.H.OSID=v,this.H.OAID=x),this.F=this.X,this.J=la(this,null,this.W),gr(this)};function ji(u){if(Mi(u),u.I==3){var p=u.V++,v=dn(u.J);if($e(v,"SID",u.M),$e(v,"RID",p),$e(v,"TYPE","terminate"),Kn(u,v),p=new hn(u,u.j,p),p.M=2,p.A=dr(dn(v)),v=!1,h.navigator&&h.navigator.sendBeacon)try{v=h.navigator.sendBeacon(p.A.toString(),"")}catch{}!v&&h.Image&&(new Image().src=p.A,v=!0),v||(p.g=Ol(p.j,null),p.g.ea(p.A)),p.F=Date.now(),js(p)}Gs(u)}function nn(u){u.g&&(Ks(u),u.g.cancel(),u.g=null)}function Mi(u){nn(u),u.v&&(h.clearTimeout(u.v),u.v=null),Fi(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&h.clearTimeout(u.m),u.m=null)}function gr(u){if(!Yo(u.h)&&!u.m){u.m=!0;var p=u.Ea;ie||A(),ve||(ie(),ve=!0),P.add(p,u),u.D=0}}function Vl(u,p){return Fs(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=p.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Br(_(u.Ea,u,p),zi(u,u.D)),u.D++,!0)}r.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const j=new hn(this,this.j,u);let z=this.o;if(this.U&&(z?(z=O(z),Ne(z,this.U)):z=this.U),this.u!==null||this.R||(j.J=z,z=null),this.S)e:{for(var p=0,v=0;v<this.i.length;v++){t:{var x=this.i[v];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(p+=x,p>4096){p=v;break e}if(p===4096||v===this.i.length-1){p=v+1;break e}}p=1e3}else p=1e3;p=aa(this,j,p),v=dn(this.J),$e(v,"RID",u),$e(v,"CVER",22),this.G&&$e(v,"X-HTTP-Session-Id",this.G),Kn(this,v),z&&(this.R?p="headers="+Mn(Pl(z))+"&"+p:this.u&&Oi(v,this.u,z)),bi(this.h,j),this.Ra&&$e(v,"TYPE","init"),this.S?($e(v,"$req",p),$e(v,"SID","null"),j.U=!0,Sn(j,v,null)):Sn(j,v,p),this.I=2}}else this.I==3&&(u?Ws(this,u):this.i.length==0||Yo(this.h)||Ws(this))};function Ws(u,p){var v;p?v=p.l:v=u.V++;const x=dn(u.J);$e(x,"SID",u.M),$e(x,"RID",v),$e(x,"AID",u.K),Kn(u,x),u.u&&u.o&&Oi(x,u.u,u.o),v=new hn(u,u.j,v,u.D+1),u.u===null&&(v.J=u.o),p&&(u.i=p.G.concat(u.i)),p=aa(u,v,1e3),v.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),bi(u.h,v),Sn(v,x,p)}function Kn(u,p){u.H&&de(u.H,function(v,x){$e(p,x,v)}),u.l&&de({},function(v,x){$e(p,x,v)})}function aa(u,p,v){v=Math.min(u.i.length,v);const x=u.l?_(u.l.Ka,u.l,u):null;e:{var j=u.i;let ke=-1;for(;;){const lt=["count="+v];ke==-1?v>0?(ke=j[0].g,lt.push("ofs="+ke)):ke=0:lt.push("ofs="+ke);let We=!0;for(let ft=0;ft<v;ft++){var z=j[ft].g;const sn=j[ft].map;if(z-=ke,z<0)ke=Math.max(0,j[ft].g-100),We=!1;else try{z="req"+z+"_"||"";try{var ee=sn instanceof Map?sn:Object.entries(sn);for(const[yr,Qn]of ee){let Yn=Qn;m(Qn)&&(Yn=Mr(Qn)),lt.push(z+yr+"="+encodeURIComponent(Yn))}}catch(yr){throw lt.push(z+"type="+encodeURIComponent("_badmap")),yr}}catch{x&&x(sn)}}if(We){ee=lt.join("&");break e}}ee=void 0}return u=u.i.splice(0,v),p.G=u,ee}function Dt(u){if(!u.g&&!u.v){u.Y=1;var p=u.Da;ie||A(),ve||(ie(),ve=!0),P.add(p,u),u.A=0}}function Gn(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Br(_(u.Da,u),zi(u,u.A)),u.A++,!0)}r.Da=function(){if(this.v=null,Yr(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Br(_(this.Wa,this),u)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,it(10),nn(this),Yr(this))};function Ks(u){u.B!=null&&(h.clearTimeout(u.B),u.B=null)}function Yr(u){u.g=new hn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var p=dn(u.na);$e(p,"RID","rpc"),$e(p,"SID",u.M),$e(p,"AID",u.K),$e(p,"CI",u.F?"0":"1"),!u.F&&u.ia&&$e(p,"TO",u.ia),$e(p,"TYPE","xmlhttp"),Kn(u,p),u.u&&u.o&&Oi(p,u.u,u.o),u.O&&(u.g.H=u.O);var v=u.g;u=u.ba,v.M=1,v.A=dr(dn(p)),v.u=null,v.R=!0,Go(v,u)}r.Va=function(){this.C!=null&&(this.C=null,nn(this),Gn(this),it(19))};function Fi(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function Ui(u,p){var v=null;if(u.g==p){Fi(u),Ks(u),u.g=null;var x=2}else if(Jo(u.h,p))v=p.G,Us(u.h,p),x=1;else return;if(u.I!=0){if(p.o)if(x==1){v=p.u?p.u.length:0,p=Date.now()-p.F;var j=u.D;x=zr(),at(x,new Wo(x,v)),gr(u)}else Dt(u);else if(j=p.m,j==3||j==0&&p.X>0||!(x==1&&Vl(u,p)||x==2&&Gn(u)))switch(v&&v.length>0&&(p=u.h,p.i=p.i.concat(v)),j){case 1:rn(u,5);break;case 4:rn(u,10);break;case 3:rn(u,6);break;default:rn(u,2)}}}function zi(u,p){let v=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(v*=2),v*p}function rn(u,p){if(u.j.info("Error code "+p),p==2){var v=_(u.bb,u),x=u.Ua;const j=!x;x=new Fn(x||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||zs(x,"https"),dr(x),j?$n(x.toString(),v):qn(x.toString(),v)}else it(2);u.I=0,u.l&&u.l.pa(p),Gs(u),Mi(u)}r.bb=function(u){u?(this.j.info("Successfully pinged google.com"),it(2)):(this.j.info("Failed to ping google.com"),it(1))};function Gs(u){if(u.I=0,u.ja=[],u.l){const p=Zt(u.h);(p.length!=0||u.i.length!=0)&&(q(u.ja,p),q(u.ja,u.i),u.h.i.length=0,F(u.i),u.i.length=0),u.l.oa()}}function la(u,p,v){var x=v instanceof Fn?dn(v):new Fn(v);if(x.g!="")p&&(x.g=p+"."+x.g),Un(x,x.u);else{var j=h.location;x=j.protocol,p=p?p+"."+j.hostname:j.hostname,j=+j.port;const z=new Fn(null);x&&zs(z,x),p&&(z.g=p),j&&Un(z,j),v&&(z.h=v),x=z}return v=u.G,p=u.wa,v&&p&&$e(x,v,p),$e(x,"VER",u.ka),Kn(u,x),x}function Ol(u,p,v){if(p&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Aa&&!u.ma?new Ge(new fr({ab:v})):new Ge(u.ma),p.Fa(u.L),p}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ll(){}r=Ll.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Bi(){}Bi.prototype.g=function(u,p){return new kt(u,p)};function kt(u,p){dt.call(this),this.g=new Li(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(u?u["X-WebChannel-Client-Profile"]=p.sa:u={"X-WebChannel-Client-Profile":p.sa}),this.g.U=u,(u=p&&p.Qb)&&!S(u)&&(this.g.u=u),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!S(p)&&(this.g.G=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new Jr(this)}T(kt,dt),kt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},kt.prototype.close=function(){ji(this.g)},kt.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.v&&(v={},v.__data__=Mr(u),u=v);p.i.push(new Uc(p.Ya++,u)),p.I==3&&gr(p)},kt.prototype.N=function(){this.g.l=null,delete this.j,ji(this.g),delete this.g,kt.Z.N.call(this)};function jl(u){Ai.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const v in p){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}T(jl,Ai);function Ml(){Ho.call(this),this.status=1}T(Ml,Ho);function Jr(u){this.g=u}T(Jr,Ll),Jr.prototype.ra=function(){at(this.g,"a")},Jr.prototype.qa=function(u){at(this.g,new jl(u))},Jr.prototype.pa=function(u){at(this.g,new Ml)},Jr.prototype.oa=function(){at(this.g,"b")},Bi.prototype.createWebChannel=Bi.prototype.g,kt.prototype.send=kt.prototype.o,kt.prototype.open=kt.prototype.m,kt.prototype.close=kt.prototype.close,dv=function(){return new Bi},hv=function(){return zr()},cv=In,Fd={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},qr.NO_ERROR=0,qr.TIMEOUT=8,qr.HTTP_ERROR=6,$u=qr,Hr.COMPLETE="complete",uv=Hr,_l.EventType=Ur,Ur.OPEN="a",Ur.CLOSE="b",Ur.ERROR="c",Ur.MESSAGE="d",dt.prototype.listen=dt.prototype.J,Ma=_l,Ge.prototype.listenOnce=Ge.prototype.K,Ge.prototype.getLastError=Ge.prototype.Ha,Ge.prototype.getLastErrorCode=Ge.prototype.ya,Ge.prototype.getStatus=Ge.prototype.ca,Ge.prototype.getResponseJson=Ge.prototype.La,Ge.prototype.getResponseText=Ge.prototype.la,Ge.prototype.send=Ge.prototype.ea,Ge.prototype.setWithCredentials=Ge.prototype.Fa,lv=Ge}).apply(typeof Vu<"u"?Vu:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ft.UNAUTHENTICATED=new Ft(null),Ft.GOOGLE_CREDENTIALS=new Ft("google-credentials-uid"),Ft.FIRST_PARTY=new Ft("first-party-uid"),Ft.MOCK_USER=new Ft("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Do="12.9.0";function DI(r){Do=r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pi=new sf("@firebase/firestore");function co(){return pi.logLevel}function oe(r,...e){if(pi.logLevel<=Oe.DEBUG){const t=e.map(Ef);pi.debug(`Firestore (${Do}): ${r}`,...t)}}function br(r,...e){if(pi.logLevel<=Oe.ERROR){const t=e.map(Ef);pi.error(`Firestore (${Do}): ${r}`,...t)}}function mi(r,...e){if(pi.logLevel<=Oe.WARN){const t=e.map(Ef);pi.warn(`Firestore (${Do}): ${r}`,...t)}}function Ef(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xe(r,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,fv(r,i,t)}function fv(r,e,t){let i=`FIRESTORE (${Do}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw br(i),new Error(i)}function He(r,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,r||fv(e,o,i)}function Ce(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class re extends Or{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class VI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Ft.UNAUTHENTICATED)))}shutdown(){}}class OI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class LI{constructor(e){this.t=e,this.currentUser=Ft.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){He(this.o===void 0,42304);let i=this.i;const o=y=>this.i!==i?(i=this.i,t(y)):Promise.resolve();let l=new Nr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Nr,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const y=l;e.enqueueRetryable((async()=>{await y.promise,await o(this.currentUser)}))},m=y=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((y=>m(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?m(y):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Nr)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(He(typeof i.accessToken=="string",31837,{l:i}),new pv(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return He(e===null||typeof e=="string",2055,{h:e}),new Ft(e)}}class jI{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Ft.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class MI{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new jI(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Ft.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class iy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class FI{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_n(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){He(this.o===void 0,3512);const i=l=>{l.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.m;return this.m=l.token,oe("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const o=l=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new iy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(He(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new iy(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UI(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<r;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=UI(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%62))}return i}}function Le(r,e){return r<e?-1:r>e?1:0}function Ud(r,e){const t=Math.min(r.length,e.length);for(let i=0;i<t;i++){const o=r.charAt(i),l=e.charAt(i);if(o!==l)return Ed(o)===Ed(l)?Le(o,l):Ed(o)?1:-1}return Le(r.length,e.length)}const zI=55296,BI=57343;function Ed(r){const e=r.charCodeAt(0);return e>=zI&&e<=BI}function Io(r,e,t){return r.length===e.length&&r.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oy="__name__";class tr{constructor(e,t,i){t===void 0?t=0:t>e.length&&xe(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&xe(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return tr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof tr?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=tr.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Le(e.length,t.length)}static compareSegments(e,t){const i=tr.isNumericId(e),o=tr.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?tr.extractNumericId(e).compare(tr.extractNumericId(t)):Ud(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return xs.fromString(e.substring(4,e.length-2))}}class Ye extends tr{construct(e,t,i){return new Ye(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new re($.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new Ye(t)}static emptyPath(){return new Ye([])}}const $I=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pt extends tr{construct(e,t,i){return new Pt(e,t,i)}static isValidIdentifier(e){return $I.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===oy}static keyField(){return new Pt([oy])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new re($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let h=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new re($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[o+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new re($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=y,o+=2}else m==="`"?(h=!h,o++):m!=="."||h?(i+=m,o++):(l(),o++)}if(l(),h)throw new re($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pt(t)}static emptyPath(){return new Pt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.path=e}static fromPath(e){return new ye(Ye.fromString(e))}static fromName(e){return new ye(Ye.fromString(e).popFirst(5))}static empty(){return new ye(Ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ye.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new Ye(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mv(r,e,t){if(!t)throw new re($.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function qI(r,e,t,i){if(e===!0&&i===!0)throw new re($.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function ay(r){if(!ye.isDocumentKey(r))throw new re($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function ly(r){if(ye.isDocumentKey(r))throw new re($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function gv(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Tc(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":xe(12329,{type:typeof r})}function Dr(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new re($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Tc(r);throw new re($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(r,e){const t={typeString:r};return e&&(t.value=e),t}function cl(r,e){if(!gv(r))throw new re($.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){t=`JSON missing required field: '${i}'`;break}const h=r[i];if(o&&typeof h!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(l!==void 0&&h!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new re($.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uy=-62135596800,cy=1e6;class et{static now(){return et.fromMillis(Date.now())}static fromDate(e){return et.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*cy);return new et(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new re($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new re($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<uy)throw new re($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new re($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/cy}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:et._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(cl(e,et._jsonSchema))return new et(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-uy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}et._jsonSchemaVersion="firestore/timestamp/1.0",et._jsonSchema={type:yt("string",et._jsonSchemaVersion),seconds:yt("number"),nanoseconds:yt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new et(0,0))}static max(){return new Ae(new et(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ja=-1;function HI(r,e){const t=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,o=Ae.fromTimestamp(i===1e9?new et(t+1,0):new et(t,i));return new Is(o,ye.empty(),e)}function WI(r){return new Is(r.readTime,r.key,Ja)}class Is{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Is(Ae.min(),ye.empty(),Ja)}static max(){return new Is(Ae.max(),ye.empty(),Ja)}}function KI(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=ye.comparator(r.documentKey,e.documentKey),t!==0?t:Le(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class QI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vo(r){if(r.code!==$.FAILED_PRECONDITION||r.message!==GI)throw r;oe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&xe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new H(((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof H?t:H.resolve(t)}catch(t){return H.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):H.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):H.reject(t)}static resolve(e){return new H(((t,i)=>{t(e)}))}static reject(e){return new H(((t,i)=>{i(e)}))}static waitFor(e){return new H(((t,i)=>{let o=0,l=0,h=!1;e.forEach((m=>{++o,m.next((()=>{++l,h&&l===o&&t()}),(y=>i(y)))})),h=!0,l===o&&t()}))}static or(e){let t=H.resolve(!1);for(const i of e)t=t.next((o=>o?H.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,l)=>{i.push(t.call(this,o,l))})),this.waitFor(i)}static mapArray(e,t){return new H(((i,o)=>{const l=e.length,h=new Array(l);let m=0;for(let y=0;y<l;y++){const _=y;t(e[_]).next((E=>{h[_]=E,++m,m===l&&i(h)}),(E=>o(E)))}}))}static doWhile(e,t){return new H(((i,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):i()};l()}))}}function YI(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Oo(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ic.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tf=-1;function Sc(r){return r==null}function sc(r){return r===0&&1/r==-1/0}function JI(r){return typeof r=="number"&&Number.isInteger(r)&&!sc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv="";function XI(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=hy(e)),e=ZI(r.get(t),e);return hy(e)}function ZI(r,e){let t=e;const i=r.length;for(let o=0;o<i;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case yv:t+="";break;default:t+=l}}return t}function hy(r){return r+yv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dy(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function bs(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function vv(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e,t){this.comparator=e,this.root=t||Rt.EMPTY}insert(e,t){return new st(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Rt.BLACK,null,null))}remove(e){return new st(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ou(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ou(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ou(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ou(this.root,e,this.comparator,!0)}}class Ou{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Rt{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??Rt.RED,this.left=o??Rt.EMPTY,this.right=l??Rt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new Rt(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Rt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Rt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Rt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Rt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw xe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw xe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw xe(27949);return e+(this.isRed()?0:1)}}Rt.EMPTY=null,Rt.RED=!0,Rt.BLACK=!1;Rt.EMPTY=new class{constructor(){this.size=0}get key(){throw xe(57766)}get value(){throw xe(16141)}get color(){throw xe(16727)}get left(){throw xe(29726)}get right(){throw xe(36894)}copy(e,t,i,o,l){return this}insert(e,t,i){return new Rt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.comparator=e,this.data=new st(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new fy(this.data.getIterator())}getIteratorFrom(e){return new fy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Et)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Et(this.comparator);return t.data=e,t}}class fy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.fields=e,e.sort(Pt.comparator)}static empty(){return new un([])}unionWith(e){let t=new Et(Pt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new un(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Io(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new _v("Invalid base64 string: "+l):l}})(e);return new bt(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l})(e);return new bt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bt.EMPTY_BYTE_STRING=new bt("");const eS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ss(r){if(He(!!r,39018),typeof r=="string"){let e=0;const t=eS.exec(r);if(He(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ct(r.seconds),nanos:ct(r.nanos)}}function ct(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function As(r){return typeof r=="string"?bt.fromBase64String(r):bt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wv="server_timestamp",Ev="__type__",xv="__previous_value__",Tv="__local_write_time__";function If(r){var t,i;return((i=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[Ev])==null?void 0:i.stringValue)===wv}function Ac(r){const e=r.mapValue.fields[xv];return If(e)?Ac(e):e}function Xa(r){const e=Ss(r.mapValue.fields[Tv].timestampValue);return new et(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(e,t,i,o,l,h,m,y,_,E,T){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.longPollingOptions=y,this.useFetchStreams=_,this.isUsingEmulator=E,this.apiKey=T}}const ic="(default)";class Za{constructor(e,t){this.projectId=e,this.database=t||ic}static empty(){return new Za("","")}get isDefaultDatabase(){return this.database===ic}isEqual(e){return e instanceof Za&&e.projectId===this.projectId&&e.database===this.database}}function nS(r,e){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new re($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Za(r.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iv="__type__",rS="__max__",Lu={mapValue:{}},Sv="__vector__",oc="value";function ks(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?If(r)?4:iS(r)?9007199254740991:sS(r)?10:11:xe(28295,{value:r})}function ar(r,e){if(r===e)return!0;const t=ks(r);if(t!==ks(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Xa(r).isEqual(Xa(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=Ss(o.timestampValue),m=Ss(l.timestampValue);return h.seconds===m.seconds&&h.nanos===m.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,l){return As(o.bytesValue).isEqual(As(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,l){return ct(o.geoPointValue.latitude)===ct(l.geoPointValue.latitude)&&ct(o.geoPointValue.longitude)===ct(l.geoPointValue.longitude)})(r,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return ct(o.integerValue)===ct(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=ct(o.doubleValue),m=ct(l.doubleValue);return h===m?sc(h)===sc(m):isNaN(h)&&isNaN(m)}return!1})(r,e);case 9:return Io(r.arrayValue.values||[],e.arrayValue.values||[],ar);case 10:case 11:return(function(o,l){const h=o.mapValue.fields||{},m=l.mapValue.fields||{};if(dy(h)!==dy(m))return!1;for(const y in h)if(h.hasOwnProperty(y)&&(m[y]===void 0||!ar(h[y],m[y])))return!1;return!0})(r,e);default:return xe(52216,{left:r})}}function el(r,e){return(r.values||[]).find((t=>ar(t,e)))!==void 0}function So(r,e){if(r===e)return 0;const t=ks(r),i=ks(e);if(t!==i)return Le(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Le(r.booleanValue,e.booleanValue);case 2:return(function(l,h){const m=ct(l.integerValue||l.doubleValue),y=ct(h.integerValue||h.doubleValue);return m<y?-1:m>y?1:m===y?0:isNaN(m)?isNaN(y)?0:-1:1})(r,e);case 3:return py(r.timestampValue,e.timestampValue);case 4:return py(Xa(r),Xa(e));case 5:return Ud(r.stringValue,e.stringValue);case 6:return(function(l,h){const m=As(l),y=As(h);return m.compareTo(y)})(r.bytesValue,e.bytesValue);case 7:return(function(l,h){const m=l.split("/"),y=h.split("/");for(let _=0;_<m.length&&_<y.length;_++){const E=Le(m[_],y[_]);if(E!==0)return E}return Le(m.length,y.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,h){const m=Le(ct(l.latitude),ct(h.latitude));return m!==0?m:Le(ct(l.longitude),ct(h.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return my(r.arrayValue,e.arrayValue);case 10:return(function(l,h){var C,F,q,W;const m=l.fields||{},y=h.fields||{},_=(C=m[oc])==null?void 0:C.arrayValue,E=(F=y[oc])==null?void 0:F.arrayValue,T=Le(((q=_==null?void 0:_.values)==null?void 0:q.length)||0,((W=E==null?void 0:E.values)==null?void 0:W.length)||0);return T!==0?T:my(_,E)})(r.mapValue,e.mapValue);case 11:return(function(l,h){if(l===Lu.mapValue&&h===Lu.mapValue)return 0;if(l===Lu.mapValue)return 1;if(h===Lu.mapValue)return-1;const m=l.fields||{},y=Object.keys(m),_=h.fields||{},E=Object.keys(_);y.sort(),E.sort();for(let T=0;T<y.length&&T<E.length;++T){const C=Ud(y[T],E[T]);if(C!==0)return C;const F=So(m[y[T]],_[E[T]]);if(F!==0)return F}return Le(y.length,E.length)})(r.mapValue,e.mapValue);default:throw xe(23264,{he:t})}}function py(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Le(r,e);const t=Ss(r),i=Ss(e),o=Le(t.seconds,i.seconds);return o!==0?o:Le(t.nanos,i.nanos)}function my(r,e){const t=r.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=So(t[o],i[o]);if(l)return l}return Le(t.length,i.length)}function Ao(r){return zd(r)}function zd(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const i=Ss(t);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return As(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return ye.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=zd(l);return i+"]"})(r.arrayValue):"mapValue"in r?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of i)l?l=!1:o+=",",o+=`${h}:${zd(t.fields[h])}`;return o+"}"})(r.mapValue):xe(61005,{value:r})}function qu(r){switch(ks(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ac(r);return e?16+qu(e):16;case 5:return 2*r.stringValue.length;case 6:return As(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,l)=>o+qu(l)),0)})(r.arrayValue);case 10:case 11:return(function(i){let o=0;return bs(i.fields,((l,h)=>{o+=l.length+qu(h)})),o})(r.mapValue);default:throw xe(13486,{value:r})}}function gy(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Bd(r){return!!r&&"integerValue"in r}function Sf(r){return!!r&&"arrayValue"in r}function yy(r){return!!r&&"nullValue"in r}function vy(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Hu(r){return!!r&&"mapValue"in r}function sS(r){var t,i;return((i=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[Iv])==null?void 0:i.stringValue)===Sv}function qa(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return bs(r.mapValue.fields,((t,i)=>e.mapValue.fields[t]=qa(i))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=qa(r.arrayValue.values[t]);return e}return{...r}}function iS(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===rS}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.value=e}static empty(){return new Xt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Hu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=qa(t)}setAll(e){let t=Pt.emptyPath(),i={},o=[];e.forEach(((h,m)=>{if(!t.isImmediateParentOf(m)){const y=this.getFieldsMap(t);this.applyChanges(y,i,o),i={},o=[],t=m.popLast()}h?i[m.lastSegment()]=qa(h):o.push(m.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());Hu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ar(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];Hu(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){bs(t,((o,l)=>e[o]=l));for(const o of i)delete e[o]}clone(){return new Xt(qa(this.value))}}function Av(r){const e=[];return bs(r.fields,((t,i)=>{const o=new Pt([t]);if(Hu(i)){const l=Av(i.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)})),new un(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e,t,i,o,l,h,m){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=h,this.documentState=m}static newInvalidDocument(e){return new Ut(e,0,Ae.min(),Ae.min(),Ae.min(),Xt.empty(),0)}static newFoundDocument(e,t,i,o){return new Ut(e,1,t,Ae.min(),i,o,0)}static newNoDocument(e,t){return new Ut(e,2,t,Ae.min(),Ae.min(),Xt.empty(),0)}static newUnknownDocument(e,t){return new Ut(e,3,t,Ae.min(),Ae.min(),Xt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Xt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Xt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(e,t){this.position=e,this.inclusive=t}}function _y(r,e,t){let i=0;for(let o=0;o<r.position.length;o++){const l=e[o],h=r.position[o];if(l.field.isKeyField()?i=ye.comparator(ye.fromName(h.referenceValue),t.key):i=So(h,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function wy(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!ar(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e,t="asc"){this.field=e,this.dir=t}}function oS(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{}class gt extends kv{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new lS(e,t,i):t==="array-contains"?new hS(e,i):t==="in"?new dS(e,i):t==="not-in"?new fS(e,i):t==="array-contains-any"?new pS(e,i):new gt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new uS(e,i):new cS(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(So(t,this.value)):t!==null&&ks(this.value)===ks(t)&&this.matchesComparison(So(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return xe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ln extends kv{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ln(e,t)}matches(e){return Cv(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Cv(r){return r.op==="and"}function Nv(r){return aS(r)&&Cv(r)}function aS(r){for(const e of r.filters)if(e instanceof Ln)return!1;return!0}function $d(r){if(r instanceof gt)return r.field.canonicalString()+r.op.toString()+Ao(r.value);if(Nv(r))return r.filters.map((e=>$d(e))).join(",");{const e=r.filters.map((t=>$d(t))).join(",");return`${r.op}(${e})`}}function Rv(r,e){return r instanceof gt?(function(i,o){return o instanceof gt&&i.op===o.op&&i.field.isEqual(o.field)&&ar(i.value,o.value)})(r,e):r instanceof Ln?(function(i,o){return o instanceof Ln&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((l,h,m)=>l&&Rv(h,o.filters[m])),!0):!1})(r,e):void xe(19439)}function Pv(r){return r instanceof gt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ao(t.value)}`})(r):r instanceof Ln?(function(t){return t.op.toString()+" {"+t.getFilters().map(Pv).join(" ,")+"}"})(r):"Filter"}class lS extends gt{constructor(e,t,i){super(e,t,i),this.key=ye.fromName(i.referenceValue)}matches(e){const t=ye.comparator(e.key,this.key);return this.matchesComparison(t)}}class uS extends gt{constructor(e,t){super(e,"in",t),this.keys=bv("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class cS extends gt{constructor(e,t){super(e,"not-in",t),this.keys=bv("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function bv(r,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>ye.fromName(i.referenceValue)))}class hS extends gt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Sf(t)&&el(t.arrayValue,this.value)}}class dS extends gt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&el(this.value.arrayValue,t)}}class fS extends gt{constructor(e,t){super(e,"not-in",t)}matches(e){if(el(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!el(this.value.arrayValue,t)}}class pS extends gt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Sf(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>el(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(e,t=null,i=[],o=[],l=null,h=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=h,this.endAt=m,this.Te=null}}function Ey(r,e=null,t=[],i=[],o=null,l=null,h=null){return new mS(r,e,t,i,o,l,h)}function Af(r){const e=Ce(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>$d(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),Sc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Ao(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Ao(i))).join(",")),e.Te=t}return e.Te}function kf(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!oS(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!Rv(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!wy(r.startAt,e.startAt)&&wy(r.endAt,e.endAt)}function qd(r){return ye.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e,t=null,i=[],o=[],l=null,h="F",m=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=h,this.startAt=m,this.endAt=y,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function gS(r,e,t,i,o,l,h,m){return new Lo(r,e,t,i,o,l,h,m)}function Cf(r){return new Lo(r)}function xy(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function yS(r){return ye.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function Dv(r){return r.collectionGroup!==null}function Ha(r){const e=Ce(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let m=new Et(Pt.comparator);return h.filters.forEach((y=>{y.getFlattenedFilters().forEach((_=>{_.isInequality()&&(m=m.add(_.field))}))})),m})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new tl(l,i))})),t.has(Pt.keyField().canonicalString())||e.Ie.push(new tl(Pt.keyField(),i))}return e.Ie}function sr(r){const e=Ce(r);return e.Ee||(e.Ee=vS(e,Ha(r))),e.Ee}function vS(r,e){if(r.limitType==="F")return Ey(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new tl(o.field,l)}));const t=r.endAt?new ac(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new ac(r.startAt.position,r.startAt.inclusive):null;return Ey(r.path,r.collectionGroup,e,r.filters,r.limit,t,i)}}function Hd(r,e){const t=r.filters.concat([e]);return new Lo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function _S(r,e){const t=r.explicitOrderBy.concat([e]);return new Lo(r.path,r.collectionGroup,t,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}function Wd(r,e,t){return new Lo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function kc(r,e){return kf(sr(r),sr(e))&&r.limitType===e.limitType}function Vv(r){return`${Af(sr(r))}|lt:${r.limitType}`}function ho(r){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>Pv(o))).join(", ")}]`),Sc(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>Ao(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>Ao(o))).join(",")),`Target(${i})`})(sr(r))}; limitType=${r.limitType})`}function Cc(r,e){return e.isFoundDocument()&&(function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):ye.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(r,e)&&(function(i,o){for(const l of Ha(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0})(r,e)&&(function(i,o){return!(i.startAt&&!(function(h,m,y){const _=_y(h,m,y);return h.inclusive?_<=0:_<0})(i.startAt,Ha(i),o)||i.endAt&&!(function(h,m,y){const _=_y(h,m,y);return h.inclusive?_>=0:_>0})(i.endAt,Ha(i),o))})(r,e)}function wS(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Ov(r){return(e,t)=>{let i=!1;for(const o of Ha(r)){const l=ES(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function ES(r,e,t){const i=r.field.isKeyField()?ye.comparator(e.key,t.key):(function(l,h,m){const y=h.data.field(l),_=m.data.field(l);return y!==null&&_!==null?So(y,_):xe(42886)})(r.field,e,t);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return xe(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){bs(this.inner,((t,i)=>{for(const[o,l]of i)e(o,l)}))}isEmpty(){return vv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS=new st(ye.comparator);function Vr(){return xS}const Lv=new st(ye.comparator);function Fa(...r){let e=Lv;for(const t of r)e=e.insert(t.key,t);return e}function jv(r){let e=Lv;return r.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function li(){return Wa()}function Mv(){return Wa()}function Wa(){return new _i((r=>r.toString()),((r,e)=>r.isEqual(e)))}const TS=new st(ye.comparator),IS=new Et(ye.comparator);function je(...r){let e=IS;for(const t of r)e=e.add(t);return e}const SS=new Et(Le);function AS(){return SS}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nf(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sc(e)?"-0":e}}function Fv(r){return{integerValue:""+r}}function kS(r,e){return JI(e)?Fv(e):Nf(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(){this._=void 0}}function CS(r,e,t){return r instanceof lc?(function(o,l){const h={fields:{[Ev]:{stringValue:wv},[Tv]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&If(l)&&(l=Ac(l)),l&&(h.fields[xv]=l),{mapValue:h}})(t,e):r instanceof nl?zv(r,e):r instanceof rl?Bv(r,e):(function(o,l){const h=Uv(o,l),m=Ty(h)+Ty(o.Ae);return Bd(h)&&Bd(o.Ae)?Fv(m):Nf(o.serializer,m)})(r,e)}function NS(r,e,t){return r instanceof nl?zv(r,e):r instanceof rl?Bv(r,e):t}function Uv(r,e){return r instanceof uc?(function(i){return Bd(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class lc extends Nc{}class nl extends Nc{constructor(e){super(),this.elements=e}}function zv(r,e){const t=$v(e);for(const i of r.elements)t.some((o=>ar(o,i)))||t.push(i);return{arrayValue:{values:t}}}class rl extends Nc{constructor(e){super(),this.elements=e}}function Bv(r,e){let t=$v(e);for(const i of r.elements)t=t.filter((o=>!ar(o,i)));return{arrayValue:{values:t}}}class uc extends Nc{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Ty(r){return ct(r.integerValue||r.doubleValue)}function $v(r){return Sf(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function RS(r,e){return r.field.isEqual(e.field)&&(function(i,o){return i instanceof nl&&o instanceof nl||i instanceof rl&&o instanceof rl?Io(i.elements,o.elements,ar):i instanceof uc&&o instanceof uc?ar(i.Ae,o.Ae):i instanceof lc&&o instanceof lc})(r.transform,e.transform)}class PS{constructor(e,t){this.version=e,this.transformResults=t}}class cn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new cn}static exists(e){return new cn(void 0,e)}static updateTime(e){return new cn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Wu(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Rc{}function qv(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Pc(r.key,cn.none()):new hl(r.key,r.data,cn.none());{const t=r.data,i=Xt.empty();let o=new Et(Pt.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?i.delete(l):i.set(l,h),o=o.add(l)}return new Ds(r.key,i,new un(o.toArray()),cn.none())}}function bS(r,e,t){r instanceof hl?(function(o,l,h){const m=o.value.clone(),y=Sy(o.fieldTransforms,l,h.transformResults);m.setAll(y),l.convertToFoundDocument(h.version,m).setHasCommittedMutations()})(r,e,t):r instanceof Ds?(function(o,l,h){if(!Wu(o.precondition,l))return void l.convertToUnknownDocument(h.version);const m=Sy(o.fieldTransforms,l,h.transformResults),y=l.data;y.setAll(Hv(o)),y.setAll(m),l.convertToFoundDocument(h.version,y).setHasCommittedMutations()})(r,e,t):(function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function Ka(r,e,t,i){return r instanceof hl?(function(l,h,m,y){if(!Wu(l.precondition,h))return m;const _=l.value.clone(),E=Ay(l.fieldTransforms,y,h);return _.setAll(E),h.convertToFoundDocument(h.version,_).setHasLocalMutations(),null})(r,e,t,i):r instanceof Ds?(function(l,h,m,y){if(!Wu(l.precondition,h))return m;const _=Ay(l.fieldTransforms,y,h),E=h.data;return E.setAll(Hv(l)),E.setAll(_),h.convertToFoundDocument(h.version,E).setHasLocalMutations(),m===null?null:m.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((T=>T.field)))})(r,e,t,i):(function(l,h,m){return Wu(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):m})(r,e,t)}function DS(r,e){let t=null;for(const i of r.fieldTransforms){const o=e.data.field(i.field),l=Uv(i.transform,o||null);l!=null&&(t===null&&(t=Xt.empty()),t.set(i.field,l))}return t||null}function Iy(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Io(i,o,((l,h)=>RS(l,h)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class hl extends Rc{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ds extends Rc{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Hv(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=r.data.field(t);e.set(t,i)}})),e}function Sy(r,e,t){const i=new Map;He(r.length===t.length,32656,{Ve:t.length,de:r.length});for(let o=0;o<t.length;o++){const l=r[o],h=l.transform,m=e.data.field(l.field);i.set(l.field,NS(h,m,t[o]))}return i}function Ay(r,e,t){const i=new Map;for(const o of r){const l=o.transform,h=t.data.field(o.field);i.set(o.field,CS(l,h,e))}return i}class Pc extends Rc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class VS extends Rc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&bS(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Ka(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Ka(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=Mv();return this.mutations.forEach((o=>{const l=e.get(o.key),h=l.overlayedDocument;let m=this.applyToLocalView(h,l.mutatedFields);m=t.has(o.key)?null:m;const y=qv(h,m);y!==null&&i.set(o.key,y),h.isValidDocument()||h.convertToNoDocument(Ae.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),je())}isEqual(e){return this.batchId===e.batchId&&Io(this.mutations,e.mutations,((t,i)=>Iy(t,i)))&&Io(this.baseMutations,e.baseMutations,((t,i)=>Iy(t,i)))}}class Rf{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){He(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return TS})();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,i[h].version);return new Rf(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mt,Fe;function MS(r){switch(r){case $.OK:return xe(64938);case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0;default:return xe(15467,{code:r})}}function Wv(r){if(r===void 0)return br("GRPC error has no .code"),$.UNKNOWN;switch(r){case mt.OK:return $.OK;case mt.CANCELLED:return $.CANCELLED;case mt.UNKNOWN:return $.UNKNOWN;case mt.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case mt.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case mt.INTERNAL:return $.INTERNAL;case mt.UNAVAILABLE:return $.UNAVAILABLE;case mt.UNAUTHENTICATED:return $.UNAUTHENTICATED;case mt.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case mt.NOT_FOUND:return $.NOT_FOUND;case mt.ALREADY_EXISTS:return $.ALREADY_EXISTS;case mt.PERMISSION_DENIED:return $.PERMISSION_DENIED;case mt.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case mt.ABORTED:return $.ABORTED;case mt.OUT_OF_RANGE:return $.OUT_OF_RANGE;case mt.UNIMPLEMENTED:return $.UNIMPLEMENTED;case mt.DATA_LOSS:return $.DATA_LOSS;default:return xe(39323,{code:r})}}(Fe=mt||(mt={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FS(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US=new xs([4294967295,4294967295],0);function ky(r){const e=FS().encode(r),t=new av;return t.update(e),new Uint8Array(t.digest())}function Cy(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new xs([t,i],0),new xs([o,l],0)]}class Pf{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Ua(`Invalid padding: ${t}`);if(i<0)throw new Ua(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Ua(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Ua(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=xs.fromNumber(this.ge)}ye(e,t,i){let o=e.add(t.multiply(xs.fromNumber(i)));return o.compare(US)===1&&(o=new xs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=ky(e),[i,o]=Cy(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(i,o,l);if(!this.we(h))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new Pf(l,o,t);return i.forEach((m=>h.insert(m))),h}insert(e){if(this.ge===0)return;const t=ky(e),[i,o]=Cy(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(i,o,l);this.be(h)}}be(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Ua extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,dl.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new bc(Ae.min(),o,new st(Le),Vr(),je())}}class dl{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new dl(i,t,je(),je(),je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e,t,i,o){this.Se=e,this.removedTargetIds=t,this.key=i,this.De=o}}class Kv{constructor(e,t){this.targetId=e,this.Ce=t}}class Gv{constructor(e,t,i=bt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class Ny{constructor(){this.ve=0,this.Fe=Ry(),this.Me=bt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=je(),t=je(),i=je();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:xe(38017,{changeType:l})}})),new dl(this.Me,this.xe,e,t,i)}Ke(){this.Oe=!1,this.Fe=Ry()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,He(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class zS{constructor(e){this.Ge=e,this.ze=new Map,this.je=Vr(),this.He=ju(),this.Je=ju(),this.Ze=new st(Le)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:xe(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,i=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(qd(l))if(i===0){const h=new ye(l.path);this.et(t,h,Ut.newNoDocument(h,Ae.min()))}else He(i===1,20013,{expectedCount:i});else{const h=this._t(t);if(h!==i){const m=this.ut(e),y=m?this.ct(m,e,h):1;if(y!==0){this.it(t);const _=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,_)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let h,m;try{h=As(i).toUint8Array()}catch(y){if(y instanceof _v)return mi("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{m=new Pf(h,o,l)}catch(y){return mi(y instanceof Ua?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return m.ge===0?null:m}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let o=0;return i.forEach((l=>{const h=this.Ge.ht(),m=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(m)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,h)=>{const m=this.ot(h);if(m){if(l.current&&qd(m.target)){const y=new ye(m.target.path);this.It(y).has(h)||this.Et(h,y)||this.et(h,y,Ut.newNoDocument(y,e))}l.Be&&(t.set(h,l.ke()),l.Ke())}}));let i=je();this.Je.forEach(((l,h)=>{let m=!0;h.forEachWhile((y=>{const _=this.ot(y);return!_||_.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(i=i.add(l))})),this.je.forEach(((l,h)=>h.setReadTime(e)));const o=new bc(e,t,this.Ze,this.je,i);return this.je=Vr(),this.He=ju(),this.Je=ju(),this.Ze=new st(Le),o}Ye(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,i),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.qe(t,1):o.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new Ny,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Et(Le),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Et(Le),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||oe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Ny),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function ju(){return new st(ye.comparator)}function Ry(){return new st(ye.comparator)}const BS={asc:"ASCENDING",desc:"DESCENDING"},$S={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qS={and:"AND",or:"OR"};class HS{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Kd(r,e){return r.useProto3Json||Sc(e)?e:{value:e}}function cc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Qv(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function WS(r,e){return cc(r,e.toTimestamp())}function ir(r){return He(!!r,49232),Ae.fromTimestamp((function(t){const i=Ss(t);return new et(i.seconds,i.nanos)})(r))}function bf(r,e){return Gd(r,e).canonicalString()}function Gd(r,e){const t=(function(o){return new Ye(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function Yv(r){const e=Ye.fromString(r);return He(t_(e),10190,{key:e.toString()}),e}function Qd(r,e){return bf(r.databaseId,e.path)}function xd(r,e){const t=Yv(e);if(t.get(1)!==r.databaseId.projectId)throw new re($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new re($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new ye(Xv(t))}function Jv(r,e){return bf(r.databaseId,e)}function KS(r){const e=Yv(r);return e.length===4?Ye.emptyPath():Xv(e)}function Yd(r){return new Ye(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Xv(r){return He(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Py(r,e,t){return{name:Qd(r,e),fields:t.value.mapValue.fields}}function GS(r,e){let t;if("targetChange"in e){e.targetChange;const i=(function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:xe(39313,{state:_})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(_,E){return _.useProto3Json?(He(E===void 0||typeof E=="string",58123),bt.fromBase64String(E||"")):(He(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),bt.fromUint8Array(E||new Uint8Array))})(r,e.targetChange.resumeToken),h=e.targetChange.cause,m=h&&(function(_){const E=_.code===void 0?$.UNKNOWN:Wv(_.code);return new re(E,_.message||"")})(h);t=new Gv(i,o,l,m||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=xd(r,i.document.name),l=ir(i.document.updateTime),h=i.document.createTime?ir(i.document.createTime):Ae.min(),m=new Xt({mapValue:{fields:i.document.fields}}),y=Ut.newFoundDocument(o,l,h,m),_=i.targetIds||[],E=i.removedTargetIds||[];t=new Ku(_,E,y.key,y)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=xd(r,i.document),l=i.readTime?ir(i.readTime):Ae.min(),h=Ut.newNoDocument(o,l),m=i.removedTargetIds||[];t=new Ku([],m,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=xd(r,i.document),l=i.removedTargetIds||[];t=new Ku([],l,o,null)}else{if(!("filter"in e))return xe(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,h=new jS(o,l),m=i.targetId;t=new Kv(m,h)}}return t}function QS(r,e){let t;if(e instanceof hl)t={update:Py(r,e.key,e.value)};else if(e instanceof Pc)t={delete:Qd(r,e.key)};else if(e instanceof Ds)t={update:Py(r,e.key,e.data),updateMask:sA(e.fieldMask)};else{if(!(e instanceof VS))return xe(16599,{dt:e.type});t={verify:Qd(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,h){const m=h.transform;if(m instanceof lc)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof nl)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof rl)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof uc)return{fieldPath:h.field.canonicalString(),increment:m.Ae};throw xe(20930,{transform:h.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:WS(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:xe(27497)})(r,e.precondition)),t}function YS(r,e){return r&&r.length>0?(He(e!==void 0,14353),r.map((t=>(function(o,l){let h=o.updateTime?ir(o.updateTime):ir(l);return h.isEqual(Ae.min())&&(h=ir(l)),new PS(h,o.transformResults||[])})(t,e)))):[]}function JS(r,e){return{documents:[Jv(r,e.path)]}}function XS(r,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=Jv(r,o);const l=(function(_){if(_.length!==0)return e_(Ln.create(_,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const h=(function(_){if(_.length!==0)return _.map((E=>(function(C){return{field:fo(C.field),direction:tA(C.dir)}})(E)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const m=Kd(r,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=(function(_){return{before:_.inclusive,values:_.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(_){return{before:!_.inclusive,values:_.position}})(e.endAt)),{ft:t,parent:o}}function ZS(r){let e=KS(r.parent);const t=r.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){He(i===1,65062);const E=t.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let l=[];t.where&&(l=(function(T){const C=Zv(T);return C instanceof Ln&&Nv(C)?C.getFilters():[C]})(t.where));let h=[];t.orderBy&&(h=(function(T){return T.map((C=>(function(q){return new tl(po(q.field),(function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(q.direction))})(C)))})(t.orderBy));let m=null;t.limit&&(m=(function(T){let C;return C=typeof T=="object"?T.value:T,Sc(C)?null:C})(t.limit));let y=null;t.startAt&&(y=(function(T){const C=!!T.before,F=T.values||[];return new ac(F,C)})(t.startAt));let _=null;return t.endAt&&(_=(function(T){const C=!T.before,F=T.values||[];return new ac(F,C)})(t.endAt)),gS(e,o,h,l,m,"F",y,_)}function eA(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xe(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Zv(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=po(t.unaryFilter.field);return gt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=po(t.unaryFilter.field);return gt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=po(t.unaryFilter.field);return gt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=po(t.unaryFilter.field);return gt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return xe(61313);default:return xe(60726)}})(r):r.fieldFilter!==void 0?(function(t){return gt.create(po(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return xe(58110);default:return xe(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return Ln.create(t.compositeFilter.filters.map((i=>Zv(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return xe(1026)}})(t.compositeFilter.op))})(r):xe(30097,{filter:r})}function tA(r){return BS[r]}function nA(r){return $S[r]}function rA(r){return qS[r]}function fo(r){return{fieldPath:r.canonicalString()}}function po(r){return Pt.fromServerFormat(r.fieldPath)}function e_(r){return r instanceof gt?(function(t){if(t.op==="=="){if(vy(t.value))return{unaryFilter:{field:fo(t.field),op:"IS_NAN"}};if(yy(t.value))return{unaryFilter:{field:fo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(vy(t.value))return{unaryFilter:{field:fo(t.field),op:"IS_NOT_NAN"}};if(yy(t.value))return{unaryFilter:{field:fo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fo(t.field),op:nA(t.op),value:t.value}}})(r):r instanceof Ln?(function(t){const i=t.getFilters().map((o=>e_(o)));return i.length===1?i[0]:{compositeFilter:{op:rA(t.op),filters:i}}})(r):xe(54877,{filter:r})}function sA(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function t_(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}function n_(r){return!!r&&typeof r._toProto=="function"&&r._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e,t,i,o,l=Ae.min(),h=Ae.min(),m=bt.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m,this.expectedCount=y}withSequenceNumber(e){return new ys(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ys(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ys(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ys(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(e){this.yt=e}}function oA(r){const e=ZS({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Wd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(){this.Sn=new lA}addToCollectionParentIndex(e,t){return this.Sn.add(t),H.resolve()}getCollectionParents(e,t){return H.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return H.resolve()}deleteFieldIndex(e,t){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,t){return H.resolve()}getDocumentsMatchingTarget(e,t){return H.resolve(null)}getIndexType(e,t){return H.resolve(0)}getFieldIndexes(e,t){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,t){return H.resolve(Is.min())}getMinOffsetFromCollectionGroup(e,t){return H.resolve(Is.min())}updateCollectionGroup(e,t,i){return H.resolve()}updateIndexEntries(e,t){return H.resolve()}}class lA{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Et(Ye.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Et(Ye.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const by={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},r_=41943040;class Jt{static withCacheSize(e){return new Jt(e,Jt.DEFAULT_COLLECTION_PERCENTILE,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jt.DEFAULT_COLLECTION_PERCENTILE=10,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jt.DEFAULT=new Jt(r_,Jt.DEFAULT_COLLECTION_PERCENTILE,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jt.DISABLED=new Jt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new ko(0)}static ar(){return new ko(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dy="LruGarbageCollector",uA=1048576;function Vy([r,e],[t,i]){const o=Le(r,t);return o===0?Le(e,i):o}class cA{constructor(e){this.Pr=e,this.buffer=new Et(Vy),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Vy(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class hA{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){oe(Dy,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Oo(t)?oe(Dy,"Ignoring IndexedDB error during garbage collection: ",t):await Vo(t)}await this.Ar(3e5)}))}}class dA{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return H.resolve(Ic.ce);const i=new cA(t);return this.Vr.forEachTarget(e,(o=>i.Er(o.sequenceNumber))).next((()=>this.Vr.mr(e,(o=>i.Er(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),H.resolve(by)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),by):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let i,o,l,h,m,y,_;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,h=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(i=T,m=Date.now(),this.removeTargets(e,i,t)))).next((T=>(l=T,y=Date.now(),this.removeOrphanedDocuments(e,i)))).next((T=>(_=Date.now(),co()<=Oe.DEBUG&&oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-E}ms
	Determined least recently used ${o} in `+(m-h)+`ms
	Removed ${l} targets in `+(y-m)+`ms
	Removed ${T} documents in `+(_-y)+`ms
Total Duration: ${_-E}ms`),H.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:T}))))}}function fA(r,e){return new dA(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(){this.changes=new _i((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ut.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?H.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&Ka(i.mutation,o,un.empty(),et.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,je()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=je()){const o=li();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((l=>{let h=Fa();return l.forEach(((m,y)=>{h=h.insert(m,y.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const i=li();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,je())))}populateOverlays(e,t,i){const o=[];return i.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((h,m)=>{t.set(h,m)}))}))}computeViews(e,t,i,o){let l=Vr();const h=Wa(),m=(function(){return Wa()})();return t.forEach(((y,_)=>{const E=i.get(_.key);o.has(_.key)&&(E===void 0||E.mutation instanceof Ds)?l=l.insert(_.key,_):E!==void 0?(h.set(_.key,E.mutation.getFieldMask()),Ka(E.mutation,_,E.mutation.getFieldMask(),et.now())):h.set(_.key,un.empty())})),this.recalculateAndSaveOverlays(e,l).next((y=>(y.forEach(((_,E)=>h.set(_,E))),t.forEach(((_,E)=>m.set(_,new mA(E,h.get(_)??null)))),m)))}recalculateAndSaveOverlays(e,t){const i=Wa();let o=new st(((h,m)=>h-m)),l=je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const m of h)m.keys().forEach((y=>{const _=t.get(y);if(_===null)return;let E=i.get(y)||un.empty();E=m.applyToLocalView(_,E),i.set(y,E);const T=(o.get(m.batchId)||je()).add(y);o=o.insert(m.batchId,T)}))})).next((()=>{const h=[],m=o.getReverseIterator();for(;m.hasNext();){const y=m.getNext(),_=y.key,E=y.value,T=Mv();E.forEach((C=>{if(!l.has(C)){const F=qv(t.get(C),i.get(C));F!==null&&T.set(C,F),l=l.add(C)}})),h.push(this.documentOverlayCache.saveOverlays(e,_,T))}return H.waitFor(h)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return yS(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Dv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):H.resolve(li());let m=Ja,y=l;return h.next((_=>H.forEach(_,((E,T)=>(m<T.largestBatchId&&(m=T.largestBatchId),l.get(E)?H.resolve():this.remoteDocumentCache.getEntry(e,E).next((C=>{y=y.insert(E,C)}))))).next((()=>this.populateOverlays(e,_,l))).next((()=>this.computeViews(e,y,_,je()))).next((E=>({batchId:m,changes:jv(E)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ye(t)).next((i=>{let o=Fa();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let h=Fa();return this.indexManager.getCollectionParents(e,l).next((m=>H.forEach(m,(y=>{const _=(function(T,C){return new Lo(C,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,y.child(l));return this.getDocumentsMatchingCollectionQuery(e,_,i,o).next((E=>{E.forEach(((T,C)=>{h=h.insert(T,C)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o)))).next((h=>{l.forEach(((y,_)=>{const E=_.getKey();h.get(E)===null&&(h=h.insert(E,Ut.newInvalidDocument(E)))}));let m=Fa();return h.forEach(((y,_)=>{const E=l.get(y);E!==void 0&&Ka(E.mutation,_,un.empty(),et.now()),Cc(t,_)&&(m=m.insert(y,_))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return H.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:ir(o.createTime)}})(t)),H.resolve()}getNamedQuery(e,t){return H.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(o){return{name:o.name,query:oA(o.bundledQuery),readTime:ir(o.readTime)}})(t)),H.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(){this.overlays=new st(ye.comparator),this.Lr=new Map}getOverlay(e,t){return H.resolve(this.overlays.get(t))}getOverlays(e,t){const i=li();return H.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&i.set(o,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,l)=>{this.bt(e,t,l)})),H.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.Lr.get(i);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(i)),H.resolve()}getOverlaysForCollection(e,t,i){const o=li(),l=t.length+1,h=new ye(t.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const y=m.getNext().value,_=y.getKey();if(!t.isPrefixOf(_.path))break;_.path.length===l&&y.largestBatchId>i&&o.set(y.getKey(),y)}return H.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new st(((_,E)=>_-E));const h=this.overlays.getIterator();for(;h.hasNext();){const _=h.getNext().value;if(_.getKey().getCollectionGroup()===t&&_.largestBatchId>i){let E=l.get(_.largestBatchId);E===null&&(E=li(),l=l.insert(_.largestBatchId,E)),E.set(_.getKey(),_)}}const m=li(),y=l.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((_,E)=>m.set(_,E))),!(m.size()>=o)););return H.resolve(m)}bt(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const h=this.Lr.get(o.largestBatchId).delete(i.key);this.Lr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new LS(t,i));let l=this.Lr.get(t);l===void 0&&(l=je(),this.Lr.set(t,l)),this.Lr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(){this.sessionToken=bt.EMPTY_BYTE_STRING}getSessionToken(e){return H.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,H.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(){this.kr=new Et(St.Kr),this.qr=new Et(St.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const i=new St(e,t);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new St(e,t))}Qr(e,t){e.forEach((i=>this.removeReference(i,t)))}Gr(e){const t=new ye(new Ye([])),i=new St(t,e),o=new St(t,e+1),l=[];return this.qr.forEachInRange([i,o],(h=>{this.Wr(h),l.push(h.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new ye(new Ye([])),i=new St(t,e),o=new St(t,e+1);let l=je();return this.qr.forEachInRange([i,o],(h=>{l=l.add(h.key)})),l}containsKey(e){const t=new St(e,0),i=this.kr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class St{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return ye.comparator(e.key,t.key)||Le(e.Hr,t.Hr)}static Ur(e,t){return Le(e.Hr,t.Hr)||ye.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Et(St.Kr)}checkEmpty(e){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new OS(l,t,i,o);this.mutationQueue.push(h);for(const m of o)this.Jr=this.Jr.add(new St(m.key,l)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return H.resolve(h)}lookupMutationBatch(e,t){return H.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.Xr(i),l=o<0?0:o;return H.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?Tf:this.Yn-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new St(t,0),o=new St(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([i,o],(h=>{const m=this.Zr(h.Hr);l.push(m)})),H.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Et(Le);return t.forEach((o=>{const l=new St(o,0),h=new St(o,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,h],(m=>{i=i.add(m.Hr)}))})),H.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;ye.isDocumentKey(l)||(l=l.child(""));const h=new St(new ye(l),0);let m=new Et(Le);return this.Jr.forEachWhile((y=>{const _=y.key.path;return!!i.isPrefixOf(_)&&(_.length===o&&(m=m.add(y.Hr)),!0)}),h),H.resolve(this.Yr(m))}Yr(e){const t=[];return e.forEach((i=>{const o=this.Zr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){He(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return H.forEach(t.mutations,(o=>{const l=new St(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Jr=i}))}nr(e){}containsKey(e,t){const i=new St(t,0),o=this.Jr.firstAfterOrEqual(i);return H.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,H.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e){this.ti=e,this.docs=(function(){return new st(ye.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,h=this.ti(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return H.resolve(i?i.document.mutableCopy():Ut.newInvalidDocument(t))}getEntries(e,t){let i=Vr();return t.forEach((o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():Ut.newInvalidDocument(o))})),H.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=Vr();const h=t.path,m=new ye(h.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(m);for(;y.hasNext();){const{key:_,value:{document:E}}=y.getNext();if(!h.isPrefixOf(_.path))break;_.path.length>h.length+1||KI(WI(E),i)<=0||(o.has(E.key)||Cc(t,E))&&(l=l.insert(E.key,E.mutableCopy()))}return H.resolve(l)}getAllFromCollectionGroup(e,t,i,o){xe(9500)}ni(e,t){return H.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new xA(this)}getSize(e){return H.resolve(this.size)}}class xA extends pA{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Mr.addEntry(e,o)):this.Mr.removeEntry(i)})),H.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e){this.persistence=e,this.ri=new _i((t=>Af(t)),kf),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.ii=0,this.si=new Df,this.targetCount=0,this.oi=ko._r()}forEachTarget(e,t){return this.ri.forEach(((i,o)=>t(o))),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.ii&&(this.ii=t),H.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new ko(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,H.resolve()}updateTargetData(e,t){return this.lr(t),H.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,H.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.ri.forEach(((h,m)=>{m.sequenceNumber<=t&&i.get(m.targetId)===null&&(this.ri.delete(h),l.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),H.waitFor(l).next((()=>o))}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,t){const i=this.ri.get(t)||null;return H.resolve(i)}addMatchingKeys(e,t,i){return this.si.$r(t,i),H.resolve()}removeMatchingKeys(e,t,i){this.si.Qr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((h=>{l.push(o.markPotentiallyOrphaned(e,h))})),H.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),H.resolve()}getMatchingKeysForTargetId(e,t){const i=this.si.jr(t);return H.resolve(i)}containsKey(e,t){return H.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_{constructor(e,t){this._i={},this.overlays={},this.ai=new Ic(0),this.ui=!1,this.ui=!0,this.ci=new _A,this.referenceDelegate=e(this),this.li=new TA(this),this.indexManager=new aA,this.remoteDocumentCache=(function(o){return new EA(o)})((i=>this.referenceDelegate.hi(i))),this.serializer=new iA(t),this.Pi=new yA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new vA,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this._i[e.toKey()];return i||(i=new wA(t,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,i){oe("MemoryPersistence","Starting transaction:",e);const o=new IA(this.ai.next());return this.referenceDelegate.Ti(),i(o).next((l=>this.referenceDelegate.Ii(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ei(e,t){return H.or(Object.values(this._i).map((i=>()=>i.containsKey(e,t))))}}class IA extends QI{constructor(e){super(),this.currentSequenceNumber=e}}class Vf{constructor(e){this.persistence=e,this.Ri=new Df,this.Ai=null}static Vi(e){return new Vf(e)}get di(){if(this.Ai)return this.Ai;throw xe(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.di.delete(i.toString()),H.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.di.add(i.toString()),H.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),H.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((o=>this.di.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.di.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.di,(i=>{const o=ye.fromPath(i);return this.mi(e,o).next((l=>{l||t.removeEntry(o,Ae.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((i=>{i?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return H.or([()=>H.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class hc{constructor(e,t){this.persistence=e,this.fi=new _i((i=>XI(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=fA(this,t)}static Vi(e,t){return new hc(e,t)}Ti(){}Ii(e){return H.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}pr(e){let t=0;return this.mr(e,(i=>{t++})).next((()=>t))}mr(e,t){return H.forEach(this.fi,((i,o)=>this.wr(e,i,o).next((l=>l?H.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ni(e,(h=>this.wr(e,h,t).next((m=>{m||(i++,l.removeEntry(h,Ae.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),H.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),H.resolve()}removeReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),H.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),H.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=qu(e.data.value)),t}wr(e,t,i){return H.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.fi.get(t);return H.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Ts=i,this.Is=o}static Es(e,t){let i=je(),o=je();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Of(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return CE()?8:YI(zt())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.gs(e,t).next((h=>{l.result=h})).next((()=>{if(!l.result)return this.ps(e,t,o,i).next((h=>{l.result=h}))})).next((()=>{if(l.result)return;const h=new SA;return this.ys(e,t,h).next((m=>{if(l.result=m,this.As)return this.ws(e,t,h,m.size)}))})).next((()=>l.result))}ws(e,t,i,o){return i.documentReadCount<this.Vs?(co()<=Oe.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",ho(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),H.resolve()):(co()<=Oe.DEBUG&&oe("QueryEngine","Query:",ho(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.ds*o?(co()<=Oe.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",ho(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,sr(t))):H.resolve())}gs(e,t){if(xy(t))return H.resolve(null);let i=sr(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Wd(t,null,"F"),i=sr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const h=je(...l);return this.fs.getDocuments(e,h).next((m=>this.indexManager.getMinOffset(e,i).next((y=>{const _=this.bs(t,m);return this.Ss(t,_,h,y.readTime)?this.gs(e,Wd(t,null,"F")):this.Ds(e,_,t,y)}))))})))))}ps(e,t,i,o){return xy(t)||o.isEqual(Ae.min())?H.resolve(null):this.fs.getDocuments(e,i).next((l=>{const h=this.bs(t,l);return this.Ss(t,h,i,o)?H.resolve(null):(co()<=Oe.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ho(t)),this.Ds(e,h,t,HI(o,Ja)).next((m=>m)))}))}bs(e,t){let i=new Et(Ov(e));return t.forEach(((o,l)=>{Cc(e,l)&&(i=i.add(l))})),i}Ss(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ys(e,t,i){return co()<=Oe.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",ho(t)),this.fs.getDocumentsMatchingQuery(e,t,Is.min(),i)}Ds(e,t,i,o){return this.fs.getDocumentsMatchingQuery(e,i,o).next((l=>(t.forEach((h=>{l=l.insert(h.key,h)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lf="LocalStore",kA=3e8;class CA{constructor(e,t,i,o){this.persistence=e,this.Cs=t,this.serializer=o,this.vs=new st(Le),this.Fs=new _i((l=>Af(l)),kf),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new gA(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function NA(r,e,t,i){return new CA(r,e,t,i)}async function i_(r,e){const t=Ce(r);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((l=>(o=l,t.Os(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const h=[],m=[];let y=je();for(const _ of o){h.push(_.batchId);for(const E of _.mutations)y=y.add(E.key)}for(const _ of l){m.push(_.batchId);for(const E of _.mutations)y=y.add(E.key)}return t.localDocuments.getDocuments(i,y).next((_=>({Ns:_,removedBatchIds:h,addedBatchIds:m})))}))}))}function RA(r,e){const t=Ce(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(m,y,_,E){const T=_.batch,C=T.keys();let F=H.resolve();return C.forEach((q=>{F=F.next((()=>E.getEntry(y,q))).next((W=>{const B=_.docVersions.get(q);He(B!==null,48541),W.version.compareTo(B)<0&&(T.applyToRemoteDocument(W,_),W.isValidDocument()&&(W.setReadTime(_.commitVersion),E.addEntry(W)))}))})),F.next((()=>m.mutationQueue.removeMutationBatch(y,T)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(m){let y=je();for(let _=0;_<m.mutationResults.length;++_)m.mutationResults[_].transformResults.length>0&&(y=y.add(m.batch.mutations[_].key));return y})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function o_(r){const e=Ce(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function PA(r,e){const t=Ce(r),i=e.snapshotVersion;let o=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const h=t.xs.newChangeBuffer({trackRemovals:!0});o=t.vs;const m=[];e.targetChanges.forEach(((E,T)=>{const C=o.get(T);if(!C)return;m.push(t.li.removeMatchingKeys(l,E.removedDocuments,T).next((()=>t.li.addMatchingKeys(l,E.addedDocuments,T))));let F=C.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?F=F.withResumeToken(bt.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):E.resumeToken.approximateByteSize()>0&&(F=F.withResumeToken(E.resumeToken,i)),o=o.insert(T,F),(function(W,B,Z){return W.resumeToken.approximateByteSize()===0||B.snapshotVersion.toMicroseconds()-W.snapshotVersion.toMicroseconds()>=kA?!0:Z.addedDocuments.size+Z.modifiedDocuments.size+Z.removedDocuments.size>0})(C,F,E)&&m.push(t.li.updateTargetData(l,F))}));let y=Vr(),_=je();if(e.documentUpdates.forEach((E=>{e.resolvedLimboDocuments.has(E)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(l,E))})),m.push(bA(l,h,e.documentUpdates).next((E=>{y=E.Bs,_=E.Ls}))),!i.isEqual(Ae.min())){const E=t.li.getLastRemoteSnapshotVersion(l).next((T=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,i)));m.push(E)}return H.waitFor(m).next((()=>h.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,y,_))).next((()=>y))})).then((l=>(t.vs=o,l)))}function bA(r,e,t){let i=je(),o=je();return t.forEach((l=>i=i.add(l))),e.getEntries(r,i).next((l=>{let h=Vr();return t.forEach(((m,y)=>{const _=l.get(m);y.isFoundDocument()!==_.isFoundDocument()&&(o=o.add(m)),y.isNoDocument()&&y.version.isEqual(Ae.min())?(e.removeEntry(m,y.readTime),h=h.insert(m,y)):!_.isValidDocument()||y.version.compareTo(_.version)>0||y.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(y),h=h.insert(m,y)):oe(Lf,"Ignoring outdated watch update for ",m,". Current version:",_.version," Watch version:",y.version)})),{Bs:h,Ls:o}}))}function DA(r,e){const t=Ce(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Tf),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function VA(r,e){const t=Ce(r);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.li.getTargetData(i,e).next((l=>l?(o=l,H.resolve(o)):t.li.allocateTargetId(i).next((h=>(o=new ys(e,h,"TargetPurposeListen",i.currentSequenceNumber),t.li.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.vs.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.vs=t.vs.insert(i.targetId,i),t.Fs.set(e,i.targetId)),i}))}async function Jd(r,e,t){const i=Ce(r),o=i.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(h=>i.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!Oo(h))throw h;oe(Lf,`Failed to update sequence numbers for target ${e}: ${h}`)}i.vs=i.vs.remove(e),i.Fs.delete(o.target)}function Oy(r,e,t){const i=Ce(r);let o=Ae.min(),l=je();return i.persistence.runTransaction("Execute query","readwrite",(h=>(function(y,_,E){const T=Ce(y),C=T.Fs.get(E);return C!==void 0?H.resolve(T.vs.get(C)):T.li.getTargetData(_,E)})(i,h,sr(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(h,m.targetId).next((y=>{l=y}))})).next((()=>i.Cs.getDocumentsMatchingQuery(h,e,t?o:Ae.min(),t?l:je()))).next((m=>(OA(i,wS(e),m),{documents:m,ks:l})))))}function OA(r,e,t){let i=r.Ms.get(e)||Ae.min();t.forEach(((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),r.Ms.set(e,i)}class Ly{constructor(){this.activeTargetIds=AS()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class LA{constructor(){this.vo=new Ly,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,i){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Ly,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy="ConnectivityMonitor";class My{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){oe(jy,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){oe(jy,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mu=null;function Xd(){return Mu===null?Mu=(function(){return 268435456+Math.round(2147483648*Math.random())})():Mu++,"0x"+Mu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Td="RestConnection",MA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class FA{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${i}/databases/${o}`,this.$o=this.databaseId.database===ic?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Wo(e,t,i,o,l){const h=Xd(),m=this.Qo(e,t.toUriEncodedString());oe(Td,`Sending RPC '${e}' ${h}:`,m,i);const y={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(y,o,l);const{host:_}=new URL(m),E=Ro(_);return this.zo(e,m,y,i,E).then((T=>(oe(Td,`Received RPC '${e}' ${h}: `,T),T)),(T=>{throw mi(Td,`RPC '${e}' ${h} failed with error: `,T,"url: ",m,"request:",i),T}))}jo(e,t,i,o,l,h){return this.Wo(e,t,i,o,l)}Go(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Do})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),i&&i.headers.forEach(((o,l)=>e[l]=o))}Qo(e,t){const i=MA[e];let o=`${this.qo}/v1/${t}:${i}`;return this.databaseInfo.apiKey&&(o=`${o}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),o}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mt="WebChannelConnection",Oa=(r,e,t)=>{r.listen(e,(i=>{try{t(i)}catch(o){setTimeout((()=>{throw o}),0)}}))};class wo extends FA{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!wo.c_){const e=hv();Oa(e,cv.STAT_EVENT,(t=>{t.stat===Fd.PROXY?oe(Mt,"STAT_EVENT: detected buffering proxy"):t.stat===Fd.NOPROXY&&oe(Mt,"STAT_EVENT: detected no buffering proxy")})),wo.c_=!0}}zo(e,t,i,o,l){const h=Xd();return new Promise(((m,y)=>{const _=new lv;_.setWithCredentials(!0),_.listenOnce(uv.COMPLETE,(()=>{try{switch(_.getLastErrorCode()){case $u.NO_ERROR:const T=_.getResponseJson();oe(Mt,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(T)),m(T);break;case $u.TIMEOUT:oe(Mt,`RPC '${e}' ${h} timed out`),y(new re($.DEADLINE_EXCEEDED,"Request time out"));break;case $u.HTTP_ERROR:const C=_.getStatus();if(oe(Mt,`RPC '${e}' ${h} failed with status:`,C,"response text:",_.getResponseText()),C>0){let F=_.getResponseJson();Array.isArray(F)&&(F=F[0]);const q=F==null?void 0:F.error;if(q&&q.status&&q.message){const W=(function(Z){const te=Z.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(te)>=0?te:$.UNKNOWN})(q.status);y(new re(W,q.message))}else y(new re($.UNKNOWN,"Server responded with status "+_.getStatus()))}else y(new re($.UNAVAILABLE,"Connection failed."));break;default:xe(9055,{l_:e,streamId:h,h_:_.getLastErrorCode(),P_:_.getLastError()})}}finally{oe(Mt,`RPC '${e}' ${h} completed.`)}}));const E=JSON.stringify(o);oe(Mt,`RPC '${e}' ${h} sending request:`,o),_.send(t,"POST",E,i,15)}))}T_(e,t,i){const o=Xd(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=this.createWebChannelTransport(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(m.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Go(m.initMessageHeaders,t,i),m.encodeInitMessageHeaders=!0;const _=l.join("");oe(Mt,`Creating RPC '${e}' stream ${o}: ${_}`,m);const E=h.createWebChannel(_,m);this.I_(E);let T=!1,C=!1;const F=new UA({Ho:q=>{C?oe(Mt,`Not sending because RPC '${e}' stream ${o} is closed:`,q):(T||(oe(Mt,`Opening RPC '${e}' stream ${o} transport.`),E.open(),T=!0),oe(Mt,`RPC '${e}' stream ${o} sending:`,q),E.send(q))},Jo:()=>E.close()});return Oa(E,Ma.EventType.OPEN,(()=>{C||(oe(Mt,`RPC '${e}' stream ${o} transport opened.`),F.i_())})),Oa(E,Ma.EventType.CLOSE,(()=>{C||(C=!0,oe(Mt,`RPC '${e}' stream ${o} transport closed`),F.o_(),this.E_(E))})),Oa(E,Ma.EventType.ERROR,(q=>{C||(C=!0,mi(Mt,`RPC '${e}' stream ${o} transport errored. Name:`,q.name,"Message:",q.message),F.o_(new re($.UNAVAILABLE,"The operation could not be completed")))})),Oa(E,Ma.EventType.MESSAGE,(q=>{var W;if(!C){const B=q.data[0];He(!!B,16349);const Z=B,te=(Z==null?void 0:Z.error)||((W=Z[0])==null?void 0:W.error);if(te){oe(Mt,`RPC '${e}' stream ${o} received error:`,te);const ge=te.status;let pe=(function(P){const A=mt[P];if(A!==void 0)return Wv(A)})(ge),ie=te.message;ge==="NOT_FOUND"&&ie.includes("database")&&ie.includes("does not exist")&&ie.includes(this.databaseId.database)&&mi(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),pe===void 0&&(pe=$.INTERNAL,ie="Unknown error status: "+ge+" with message "+te.message),C=!0,F.o_(new re(pe,ie)),E.close()}else oe(Mt,`RPC '${e}' stream ${o} received:`,B),F.__(B)}})),wo.u_(),setTimeout((()=>{F.s_()}),0),F}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,i){super.Go(e,t,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return dv()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zA(r){return new wo(r)}function Id(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dc(r){return new HS(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wo.c_=!1;class a_{constructor(e,t,i=1e3,o=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=i,this.A_=o,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-i);o>0&&oe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fy="PersistentStream";class l_{constructor(e,t,i,o,l,h,m,y){this.Ci=e,this.b_=i,this.S_=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new a_(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===$.RESOURCE_EXHAUSTED?(br(t.toString()),br("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===t&&this.G_(i,o)}),(i=>{e((()=>{const o=new re($.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,t){const i=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.H_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return oe(Fy,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(oe(Fy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class BA extends l_{constructor(e,t,i,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=GS(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Ae.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?Ae.min():h.readTime?ir(h.readTime):Ae.min()})(e);return this.listener.J_(t,i)}Z_(e){const t={};t.database=Yd(this.serializer),t.addTarget=(function(l,h){let m;const y=h.target;if(m=qd(y)?{documents:JS(l,y)}:{query:XS(l,y).ft},m.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){m.resumeToken=Qv(l,h.resumeToken);const _=Kd(l,h.expectedCount);_!==null&&(m.expectedCount=_)}else if(h.snapshotVersion.compareTo(Ae.min())>0){m.readTime=cc(l,h.snapshotVersion.toTimestamp());const _=Kd(l,h.expectedCount);_!==null&&(m.expectedCount=_)}return m})(this.serializer,e);const i=eA(this.serializer,e);i&&(t.labels=i),this.K_(t)}X_(e){const t={};t.database=Yd(this.serializer),t.removeTarget=e,this.K_(t)}}class $A extends l_{constructor(e,t,i,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return He(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,He(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){He(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=YS(e.writeResults,e.commitTime),i=ir(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=Yd(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>QS(this.serializer,i)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{}class HA extends qA{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new re($.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Wo(e,Gd(t,i),o,l,h))).catch((l=>{throw l.name==="FirebaseError"?(l.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new re($.UNKNOWN,l.toString())}))}jo(e,t,i,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,m])=>this.connection.jo(e,Gd(t,i),o,h,m,l))).catch((h=>{throw h.name==="FirebaseError"?(h.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new re($.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function WA(r,e,t,i){return new HA(r,e,t,i)}class KA{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(br(t),this.aa=!1):oe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gi="RemoteStore";class GA{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((h=>{i.enqueueAndForget((async()=>{wi(this)&&(oe(gi,"Restarting streams for network reachability change."),await(async function(y){const _=Ce(y);_.Ea.add(4),await fl(_),_.Va.set("Unknown"),_.Ea.delete(4),await Vc(_)})(this))}))})),this.Va=new KA(i,o)}}async function Vc(r){if(wi(r))for(const e of r.Ra)await e(!0)}async function fl(r){for(const e of r.Ra)await e(!1)}function u_(r,e){const t=Ce(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Uf(t)?Ff(t):jo(t).O_()&&Mf(t,e))}function jf(r,e){const t=Ce(r),i=jo(t);t.Ia.delete(e),i.O_()&&c_(t,e),t.Ia.size===0&&(i.O_()?i.L_():wi(t)&&t.Va.set("Unknown"))}function Mf(r,e){if(r.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}jo(r).Z_(e)}function c_(r,e){r.da.$e(e),jo(r).X_(e)}function Ff(r){r.da=new zS({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),jo(r).start(),r.Va.ua()}function Uf(r){return wi(r)&&!jo(r).x_()&&r.Ia.size>0}function wi(r){return Ce(r).Ea.size===0}function h_(r){r.da=void 0}async function QA(r){r.Va.set("Online")}async function YA(r){r.Ia.forEach(((e,t)=>{Mf(r,e)}))}async function JA(r,e){h_(r),Uf(r)?(r.Va.ha(e),Ff(r)):r.Va.set("Unknown")}async function XA(r,e,t){if(r.Va.set("Online"),e instanceof Gv&&e.state===2&&e.cause)try{await(async function(o,l){const h=l.cause;for(const m of l.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,h),o.Ia.delete(m),o.da.removeTarget(m))})(r,e)}catch(i){oe(gi,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await dc(r,i)}else if(e instanceof Ku?r.da.Xe(e):e instanceof Kv?r.da.st(e):r.da.tt(e),!t.isEqual(Ae.min()))try{const i=await o_(r.localStore);t.compareTo(i)>=0&&await(function(l,h){const m=l.da.Tt(h);return m.targetChanges.forEach(((y,_)=>{if(y.resumeToken.approximateByteSize()>0){const E=l.Ia.get(_);E&&l.Ia.set(_,E.withResumeToken(y.resumeToken,h))}})),m.targetMismatches.forEach(((y,_)=>{const E=l.Ia.get(y);if(!E)return;l.Ia.set(y,E.withResumeToken(bt.EMPTY_BYTE_STRING,E.snapshotVersion)),c_(l,y);const T=new ys(E.target,y,_,E.sequenceNumber);Mf(l,T)})),l.remoteSyncer.applyRemoteEvent(m)})(r,t)}catch(i){oe(gi,"Failed to raise snapshot:",i),await dc(r,i)}}async function dc(r,e,t){if(!Oo(e))throw e;r.Ea.add(1),await fl(r),r.Va.set("Offline"),t||(t=()=>o_(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{oe(gi,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await Vc(r)}))}function d_(r,e){return e().catch((t=>dc(r,t,e)))}async function Oc(r){const e=Ce(r),t=Cs(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Tf;for(;ZA(e);)try{const o=await DA(e.localStore,i);if(o===null){e.Ta.length===0&&t.L_();break}i=o.batchId,ek(e,o)}catch(o){await dc(e,o)}f_(e)&&p_(e)}function ZA(r){return wi(r)&&r.Ta.length<10}function ek(r,e){r.Ta.push(e);const t=Cs(r);t.O_()&&t.Y_&&t.ea(e.mutations)}function f_(r){return wi(r)&&!Cs(r).x_()&&r.Ta.length>0}function p_(r){Cs(r).start()}async function tk(r){Cs(r).ra()}async function nk(r){const e=Cs(r);for(const t of r.Ta)e.ea(t.mutations)}async function rk(r,e,t){const i=r.Ta.shift(),o=Rf.from(i,e,t);await d_(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await Oc(r)}async function sk(r,e){e&&Cs(r).Y_&&await(async function(i,o){if((function(h){return MS(h)&&h!==$.ABORTED})(o.code)){const l=i.Ta.shift();Cs(i).B_(),await d_(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o))),await Oc(i)}})(r,e),f_(r)&&p_(r)}async function Uy(r,e){const t=Ce(r);t.asyncQueue.verifyOperationInProgress(),oe(gi,"RemoteStore received new credentials");const i=wi(t);t.Ea.add(3),await fl(t),i&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Vc(t)}async function ik(r,e){const t=Ce(r);e?(t.Ea.delete(2),await Vc(t)):e||(t.Ea.add(2),await fl(t),t.Va.set("Unknown"))}function jo(r){return r.ma||(r.ma=(function(t,i,o){const l=Ce(t);return l.sa(),new BA(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Zo:QA.bind(null,r),Yo:YA.bind(null,r),t_:JA.bind(null,r),J_:XA.bind(null,r)}),r.Ra.push((async e=>{e?(r.ma.B_(),Uf(r)?Ff(r):r.Va.set("Unknown")):(await r.ma.stop(),h_(r))}))),r.ma}function Cs(r){return r.fa||(r.fa=(function(t,i,o){const l=Ce(t);return l.sa(),new $A(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),Yo:tk.bind(null,r),t_:sk.bind(null,r),ta:nk.bind(null,r),na:rk.bind(null,r)}),r.Ra.push((async e=>{e?(r.fa.B_(),await Oc(r)):(await r.fa.stop(),r.Ta.length>0&&(oe(gi,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new Nr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const h=Date.now()+i,m=new zf(e,t,h,o,l);return m.start(i),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new re($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Bf(r,e){if(br("AsyncQueue",`${e}: ${r}`),Oo(r))return new re($.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{static emptySet(e){return new Eo(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||ye.comparator(t.key,i.key):(t,i)=>ye.comparator(t.key,i.key),this.keyedMap=Fa(),this.sortedSet=new st(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Eo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Eo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy{constructor(){this.ga=new st(ye.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):xe(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Co{constructor(e,t,i,o,l,h,m,y,_){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=y,this.hasCachedResults=_}static fromInitialDocuments(e,t,i,o,l){const h=[];return t.forEach((m=>{h.push({type:0,doc:m})})),new Co(e,t,Eo.emptySet(t),h,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&kc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class ak{constructor(){this.queries=By(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const o=Ce(t),l=o.queries;o.queries=By(),l.forEach(((h,m)=>{for(const y of m.ba)y.onError(i)}))})(this,new re($.ABORTED,"Firestore shutting down"))}}function By(){return new _i((r=>Vv(r)),kc)}async function m_(r,e){const t=Ce(r);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.Sa()&&e.Da()&&(i=2):(l=new ok,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const m=Bf(h,`Initialization of query '${ho(e.query)}' failed`);return void e.onError(m)}t.queries.set(o,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&$f(t)}async function g_(r,e){const t=Ce(r),i=e.query;let o=3;const l=t.queries.get(i);if(l){const h=l.ba.indexOf(e);h>=0&&(l.ba.splice(h,1),l.ba.length===0?o=e.Da()?0:1:!l.Sa()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function lk(r,e){const t=Ce(r);let i=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const m of h.ba)m.Fa(o)&&(i=!0);h.wa=o}}i&&$f(t)}function uk(r,e,t){const i=Ce(r),o=i.queries.get(e);if(o)for(const l of o.ba)l.onError(t);i.queries.delete(e)}function $f(r){r.Ca.forEach((e=>{e.next()}))}var Zd,$y;($y=Zd||(Zd={})).Ma="default",$y.Cache="cache";class y_{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Co(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Co.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Zd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_{constructor(e){this.key=e}}class __{constructor(e){this.key=e}}class ck{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=je(),this.mutatedKeys=je(),this.eu=Ov(e),this.tu=new Eo(this.eu)}get nu(){return this.Za}ru(e,t){const i=t?t.iu:new zy,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,m=!1;const y=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,_=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((E,T)=>{const C=o.get(E),F=Cc(this.query,T)?T:null,q=!!C&&this.mutatedKeys.has(C.key),W=!!F&&(F.hasLocalMutations||this.mutatedKeys.has(F.key)&&F.hasCommittedMutations);let B=!1;C&&F?C.data.isEqual(F.data)?q!==W&&(i.track({type:3,doc:F}),B=!0):this.su(C,F)||(i.track({type:2,doc:F}),B=!0,(y&&this.eu(F,y)>0||_&&this.eu(F,_)<0)&&(m=!0)):!C&&F?(i.track({type:0,doc:F}),B=!0):C&&!F&&(i.track({type:1,doc:C}),B=!0,(y||_)&&(m=!0)),B&&(F?(h=h.add(F),l=W?l.add(E):l.delete(E)):(h=h.delete(E),l=l.delete(E)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const E=this.query.limitType==="F"?h.last():h.first();h=h.delete(E.key),l=l.delete(E.key),i.track({type:1,doc:E})}return{tu:h,iu:i,Ss:m,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((E,T)=>(function(F,q){const W=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xe(20277,{Vt:B})}};return W(F)-W(q)})(E.type,T.type)||this.eu(E.doc,T.doc))),this.ou(i),o=o??!1;const m=t&&!o?this._u():[],y=this.Ya.size===0&&this.current&&!o?1:0,_=y!==this.Xa;return this.Xa=y,h.length!==0||_?{snapshot:new Co(this.query,e.tu,l,h,e.mutatedKeys,y===0,_,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new zy,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=je(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const t=[];return e.forEach((i=>{this.Ya.has(i)||t.push(new __(i))})),this.Ya.forEach((i=>{e.has(i)||t.push(new v_(i))})),t}cu(e){this.Za=e.ks,this.Ya=je();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Co.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const qf="SyncEngine";class hk{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class dk{constructor(e){this.key=e,this.hu=!1}}class fk{constructor(e,t,i,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new _i((m=>Vv(m)),kc),this.Iu=new Map,this.Eu=new Set,this.Ru=new st(ye.comparator),this.Au=new Map,this.Vu=new Df,this.du={},this.mu=new Map,this.fu=ko.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function pk(r,e,t=!0){const i=S_(r);let o;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await w_(i,e,t,!0),o}async function mk(r,e){const t=S_(r);await w_(t,e,!0,!1)}async function w_(r,e,t,i){const o=await VA(r.localStore,sr(e)),l=o.targetId,h=r.sharedClientState.addLocalQueryTarget(l,t);let m;return i&&(m=await gk(r,e,l,h==="current",o.resumeToken)),r.isPrimaryClient&&t&&u_(r.remoteStore,o),m}async function gk(r,e,t,i,o){r.pu=(T,C,F)=>(async function(W,B,Z,te){let ge=B.view.ru(Z);ge.Ss&&(ge=await Oy(W.localStore,B.query,!1).then((({documents:P})=>B.view.ru(P,ge))));const pe=te&&te.targetChanges.get(B.targetId),ie=te&&te.targetMismatches.get(B.targetId)!=null,ve=B.view.applyChanges(ge,W.isPrimaryClient,pe,ie);return Hy(W,B.targetId,ve.au),ve.snapshot})(r,T,C,F);const l=await Oy(r.localStore,e,!0),h=new ck(e,l.ks),m=h.ru(l.documents),y=dl.createSynthesizedTargetChangeForCurrentChange(t,i&&r.onlineState!=="Offline",o),_=h.applyChanges(m,r.isPrimaryClient,y);Hy(r,t,_.au);const E=new hk(e,t,h);return r.Tu.set(e,E),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),_.snapshot}async function yk(r,e,t){const i=Ce(r),o=i.Tu.get(e),l=i.Iu.get(o.targetId);if(l.length>1)return i.Iu.set(o.targetId,l.filter((h=>!kc(h,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Jd(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&jf(i.remoteStore,o.targetId),ef(i,o.targetId)})).catch(Vo)):(ef(i,o.targetId),await Jd(i.localStore,o.targetId,!0))}async function vk(r,e){const t=Ce(r),i=t.Tu.get(e),o=t.Iu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),jf(t.remoteStore,i.targetId))}async function _k(r,e,t){const i=Ak(r);try{const o=await(function(h,m){const y=Ce(h),_=et.now(),E=m.reduce(((F,q)=>F.add(q.key)),je());let T,C;return y.persistence.runTransaction("Locally write mutations","readwrite",(F=>{let q=Vr(),W=je();return y.xs.getEntries(F,E).next((B=>{q=B,q.forEach(((Z,te)=>{te.isValidDocument()||(W=W.add(Z))}))})).next((()=>y.localDocuments.getOverlayedDocuments(F,q))).next((B=>{T=B;const Z=[];for(const te of m){const ge=DS(te,T.get(te.key).overlayedDocument);ge!=null&&Z.push(new Ds(te.key,ge,Av(ge.value.mapValue),cn.exists(!0)))}return y.mutationQueue.addMutationBatch(F,_,Z,m)})).next((B=>{C=B;const Z=B.applyToLocalDocumentSet(T,W);return y.documentOverlayCache.saveOverlays(F,B.batchId,Z)}))})).then((()=>({batchId:C.batchId,changes:jv(T)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(h,m,y){let _=h.du[h.currentUser.toKey()];_||(_=new st(Le)),_=_.insert(m,y),h.du[h.currentUser.toKey()]=_})(i,o.batchId,t),await pl(i,o.changes),await Oc(i.remoteStore)}catch(o){const l=Bf(o,"Failed to persist write");t.reject(l)}}async function E_(r,e){const t=Ce(r);try{const i=await PA(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const h=t.Au.get(l);h&&(He(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?He(h.hu,14607):o.removedDocuments.size>0&&(He(h.hu,42227),h.hu=!1))})),await pl(t,i,e)}catch(i){await Vo(i)}}function qy(r,e,t){const i=Ce(r);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Tu.forEach(((l,h)=>{const m=h.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(h,m){const y=Ce(h);y.onlineState=m;let _=!1;y.queries.forEach(((E,T)=>{for(const C of T.ba)C.va(m)&&(_=!0)})),_&&$f(y)})(i.eventManager,e),o.length&&i.Pu.J_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function wk(r,e,t){const i=Ce(r);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Au.get(e),l=o&&o.key;if(l){let h=new st(ye.comparator);h=h.insert(l,Ut.newNoDocument(l,Ae.min()));const m=je().add(l),y=new bc(Ae.min(),new Map,new st(Le),h,m);await E_(i,y),i.Ru=i.Ru.remove(l),i.Au.delete(e),Hf(i)}else await Jd(i.localStore,e,!1).then((()=>ef(i,e,t))).catch(Vo)}async function Ek(r,e){const t=Ce(r),i=e.batch.batchId;try{const o=await RA(t.localStore,e);T_(t,i,null),x_(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await pl(t,o)}catch(o){await Vo(o)}}async function xk(r,e,t){const i=Ce(r);try{const o=await(function(h,m){const y=Ce(h);return y.persistence.runTransaction("Reject batch","readwrite-primary",(_=>{let E;return y.mutationQueue.lookupMutationBatch(_,m).next((T=>(He(T!==null,37113),E=T.keys(),y.mutationQueue.removeMutationBatch(_,T)))).next((()=>y.mutationQueue.performConsistencyCheck(_))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(_,E,m))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,E))).next((()=>y.localDocuments.getDocuments(_,E)))}))})(i.localStore,e);T_(i,e,t),x_(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await pl(i,o)}catch(o){await Vo(o)}}function x_(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function T_(r,e,t){const i=Ce(r);let o=i.du[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.du[i.currentUser.toKey()]=o}}function ef(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Iu.get(e))r.Tu.delete(i),t&&r.Pu.yu(i,t);r.Iu.delete(e),r.isPrimaryClient&&r.Vu.Gr(e).forEach((i=>{r.Vu.containsKey(i)||I_(r,i)}))}function I_(r,e){r.Eu.delete(e.path.canonicalString());const t=r.Ru.get(e);t!==null&&(jf(r.remoteStore,t),r.Ru=r.Ru.remove(e),r.Au.delete(t),Hf(r))}function Hy(r,e,t){for(const i of t)i instanceof v_?(r.Vu.addReference(i.key,e),Tk(r,i)):i instanceof __?(oe(qf,"Document no longer in limbo: "+i.key),r.Vu.removeReference(i.key,e),r.Vu.containsKey(i.key)||I_(r,i.key)):xe(19791,{wu:i})}function Tk(r,e){const t=e.key,i=t.path.canonicalString();r.Ru.get(t)||r.Eu.has(i)||(oe(qf,"New document in limbo: "+t),r.Eu.add(i),Hf(r))}function Hf(r){for(;r.Eu.size>0&&r.Ru.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new ye(Ye.fromString(e)),i=r.fu.next();r.Au.set(i,new dk(t)),r.Ru=r.Ru.insert(t,i),u_(r.remoteStore,new ys(sr(Cf(t.path)),i,"TargetPurposeLimboResolution",Ic.ce))}}async function pl(r,e,t){const i=Ce(r),o=[],l=[],h=[];i.Tu.isEmpty()||(i.Tu.forEach(((m,y)=>{h.push(i.pu(y,e,t).then((_=>{var E;if((_||t)&&i.isPrimaryClient){const T=_?!_.fromCache:(E=t==null?void 0:t.targetChanges.get(y.targetId))==null?void 0:E.current;i.sharedClientState.updateQueryState(y.targetId,T?"current":"not-current")}if(_){o.push(_);const T=Of.Es(y.targetId,_);l.push(T)}})))})),await Promise.all(h),i.Pu.J_(o),await(async function(y,_){const E=Ce(y);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>H.forEach(_,(C=>H.forEach(C.Ts,(F=>E.persistence.referenceDelegate.addReference(T,C.targetId,F))).next((()=>H.forEach(C.Is,(F=>E.persistence.referenceDelegate.removeReference(T,C.targetId,F)))))))))}catch(T){if(!Oo(T))throw T;oe(Lf,"Failed to update sequence numbers: "+T)}for(const T of _){const C=T.targetId;if(!T.fromCache){const F=E.vs.get(C),q=F.snapshotVersion,W=F.withLastLimboFreeSnapshotVersion(q);E.vs=E.vs.insert(C,W)}}})(i.localStore,l))}async function Ik(r,e){const t=Ce(r);if(!t.currentUser.isEqual(e)){oe(qf,"User change. New user:",e.toKey());const i=await i_(t.localStore,e);t.currentUser=e,(function(l,h){l.mu.forEach((m=>{m.forEach((y=>{y.reject(new re($.CANCELLED,h))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await pl(t,i.Ns)}}function Sk(r,e){const t=Ce(r),i=t.Au.get(e);if(i&&i.hu)return je().add(i.key);{let o=je();const l=t.Iu.get(e);if(!l)return o;for(const h of l){const m=t.Tu.get(h);o=o.unionWith(m.view.nu)}return o}}function S_(r){const e=Ce(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=E_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Sk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=wk.bind(null,e),e.Pu.J_=lk.bind(null,e.eventManager),e.Pu.yu=uk.bind(null,e.eventManager),e}function Ak(r){const e=Ce(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Ek.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=xk.bind(null,e),e}class fc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Dc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return NA(this.persistence,new AA,e.initialUser,this.serializer)}Cu(e){return new s_(Vf.Vi,this.serializer)}Du(e){return new LA}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}fc.provider={build:()=>new fc};class kk extends fc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){He(this.persistence.referenceDelegate instanceof hc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new hA(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Jt.withCacheSize(this.cacheSizeBytes):Jt.DEFAULT;return new s_((i=>hc.Vi(i,t)),this.serializer)}}class tf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>qy(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Ik.bind(null,this.syncEngine),await ik(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new ak})()}createDatastore(e){const t=Dc(e.databaseInfo.databaseId),i=zA(e.databaseInfo);return WA(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,l,h,m){return new GA(i,o,l,h,m)})(this.localStore,this.datastore,e.asyncQueue,(t=>qy(this.syncEngine,t,0)),(function(){return My.v()?new My:new jA})())}createSyncEngine(e,t){return(function(o,l,h,m,y,_,E){const T=new fk(o,l,h,m,y,_);return E&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=Ce(o);oe(gi,"RemoteStore shutting down."),l.Ea.add(5),await fl(l),l.Aa.shutdown(),l.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}tf.provider={build:()=>new tf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):br("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ns="FirestoreClient";class Ck{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this._databaseInfo=o,this.user=Ft.UNAUTHENTICATED,this.clientId=xf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async h=>{oe(Ns,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(i,(h=>(oe(Ns,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Nr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Bf(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Sd(r,e){r.asyncQueue.verifyOperationInProgress(),oe(Ns,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let i=t.initialUser;r.setCredentialChangeListener((async o=>{i.isEqual(o)||(await i_(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function Wy(r,e){r.asyncQueue.verifyOperationInProgress();const t=await Nk(r);oe(Ns,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((i=>Uy(e.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,o)=>Uy(e.remoteStore,o))),r._onlineComponents=e}async function Nk(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){oe(Ns,"Using user provided OfflineComponentProvider");try{await Sd(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===$.FAILED_PRECONDITION||o.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;mi("Error using user provided cache. Falling back to memory cache: "+t),await Sd(r,new fc)}}else oe(Ns,"Using default OfflineComponentProvider"),await Sd(r,new kk(void 0));return r._offlineComponents}async function k_(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(oe(Ns,"Using user provided OnlineComponentProvider"),await Wy(r,r._uninitializedComponentsProvider._online)):(oe(Ns,"Using default OnlineComponentProvider"),await Wy(r,new tf))),r._onlineComponents}function Rk(r){return k_(r).then((e=>e.syncEngine))}async function C_(r){const e=await k_(r),t=e.eventManager;return t.onListen=pk.bind(null,e.syncEngine),t.onUnlisten=yk.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=mk.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=vk.bind(null,e.syncEngine),t}function Pk(r,e,t={}){const i=new Nr;return r.asyncQueue.enqueueAndForget((async()=>(function(l,h,m,y,_){const E=new A_({next:C=>{E.Nu(),h.enqueueAndForget((()=>g_(l,T)));const F=C.docs.has(m);!F&&C.fromCache?_.reject(new re($.UNAVAILABLE,"Failed to get document because the client is offline.")):F&&C.fromCache&&y&&y.source==="server"?_.reject(new re($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(C)},error:C=>_.reject(C)}),T=new y_(Cf(m.path),E,{includeMetadataChanges:!0,Ka:!0});return m_(l,T)})(await C_(r),r.asyncQueue,e,t,i))),i.promise}function bk(r,e,t={}){const i=new Nr;return r.asyncQueue.enqueueAndForget((async()=>(function(l,h,m,y,_){const E=new A_({next:C=>{E.Nu(),h.enqueueAndForget((()=>g_(l,T))),C.fromCache&&y.source==="server"?_.reject(new re($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(C)},error:C=>_.reject(C)}),T=new y_(m,E,{includeMetadataChanges:!0,Ka:!0});return m_(l,T)})(await C_(r),r.asyncQueue,e,t,i))),i.promise}function Dk(r,e){const t=new Nr;return r.asyncQueue.enqueueAndForget((async()=>_k(await Rk(r),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N_(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vk="ComponentProvider",Ky=new Map;function Ok(r,e,t,i,o){return new tS(r,e,t,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,N_(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R_="firestore.googleapis.com",Gy=!0;class Qy{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new re($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=R_,this.ssl=Gy}else this.host=e.host,this.ssl=e.ssl??Gy;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=r_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<uA)throw new re($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}qI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=N_(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new re($.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new re($.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new re($.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Lc{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Qy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new re($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new re($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Qy(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new VI;switch(i.type){case"firstParty":return new MI(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new re($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=Ky.get(t);i&&(oe(Vk,"Removing Datastore"),Ky.delete(t),i.terminate())})(this),Promise.resolve()}}function Lk(r,e,t,i={}){var _;r=Dr(r,Lc);const o=Ro(e),l=r._getSettings(),h={...l,emulatorOptions:r._getEmulatorOptions()},m=`${e}:${t}`;o&&(y0(`https://${m}`),v0("Firestore",!0)),l.host!==R_&&l.host!==m&&mi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...l,host:m,ssl:o,emulatorOptions:i};if(!ci(y,h)&&(r._setSettings(y),i.mockUserToken)){let E,T;if(typeof i.mockUserToken=="string")E=i.mockUserToken,T=Ft.MOCK_USER;else{E=_E(i.mockUserToken,(_=r._app)==null?void 0:_.options.projectId);const C=i.mockUserToken.sub||i.mockUserToken.user_id;if(!C)throw new re($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new Ft(C)}r._authCredentials=new OI(new pv(E,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Ei(this.firestore,e,this._query)}}class vt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ts(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vt(this.firestore,e,this._key)}toJSON(){return{type:vt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(cl(t,vt._jsonSchema))return new vt(e,i||null,new ye(Ye.fromString(t.referencePath)))}}vt._jsonSchemaVersion="firestore/documentReference/1.0",vt._jsonSchema={type:yt("string",vt._jsonSchemaVersion),referencePath:yt("string")};class Ts extends Ei{constructor(e,t,i){super(e,t,Cf(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vt(this.firestore,null,new ye(e))}withConverter(e){return new Ts(this.firestore,e,this._path)}}function P_(r,e,...t){if(r=ht(r),mv("collection","path",e),r instanceof Lc){const i=Ye.fromString(e,...t);return ly(i),new Ts(r,null,i)}{if(!(r instanceof vt||r instanceof Ts))throw new re($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Ye.fromString(e,...t));return ly(i),new Ts(r.firestore,null,i)}}function Wf(r,e,...t){if(r=ht(r),arguments.length===1&&(e=xf.newId()),mv("doc","path",e),r instanceof Lc){const i=Ye.fromString(e,...t);return ay(i),new vt(r,null,new ye(i))}{if(!(r instanceof vt||r instanceof Ts))throw new re($.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Ye.fromString(e,...t));return ay(i),new vt(r.firestore,r instanceof Ts?r.converter:null,new ye(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yy="AsyncQueue";class Jy{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new a_(this,"async_queue_retry"),this._c=()=>{const i=Id();i&&oe(Yy,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Id();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Id();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Nr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Oo(e))throw e;oe(Yy,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,br("INTERNAL UNHANDLED ERROR: ",Xy(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=zf.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&xe(47125,{Pc:Xy(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Xy(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class Mo extends Lc{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new Jy,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Jy(e),this._firestoreClient=void 0,await e}}}function jk(r,e){const t=typeof r=="object"?r:x0(),i=typeof r=="string"?r:ic,o=af(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=yE("firestore");l&&Lk(o,...l)}return o}function jc(r){if(r._terminated)throw new re($.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||Mk(r),r._firestoreClient}function Mk(r){var i,o,l,h;const e=r._freezeSettings(),t=Ok(r._databaseId,((i=r._app)==null?void 0:i.options.appId)||"",r._persistenceKey,(o=r._app)==null?void 0:o.options.apiKey,e);r._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((h=e.localCache)!=null&&h._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new Ck(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(y){const _=y==null?void 0:y._online.build();return{_offline:y==null?void 0:y._offline.build(_),_online:_}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new wn(bt.fromBase64String(e))}catch(t){throw new re($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new wn(bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:wn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(cl(e,wn._jsonSchema))return wn.fromBase64String(e.bytes)}}wn._jsonSchemaVersion="firestore/bytes/1.0",wn._jsonSchema={type:yt("string",wn._jsonSchemaVersion),bytes:yt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new re($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new re($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new re($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:or._jsonSchemaVersion}}static fromJSON(e){if(cl(e,or._jsonSchema))return new or(e.latitude,e.longitude)}}or._jsonSchemaVersion="firestore/geoPoint/1.0",or._jsonSchema={type:yt("string",or._jsonSchemaVersion),latitude:yt("number"),longitude:yt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Vn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(cl(e,Vn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Vn(e.vectorValues);throw new re($.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Vn._jsonSchemaVersion="firestore/vectorValue/1.0",Vn._jsonSchema={type:yt("string",Vn._jsonSchemaVersion),vectorValues:yt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fk=/^__.*__$/;class Uk{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Ds(e,this.data,this.fieldMask,t,this.fieldTransforms):new hl(e,this.data,t,this.fieldTransforms)}}class b_{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Ds(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function D_(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xe(40011,{dataSource:r})}}class Qf{constructor(e,t,i,o,l,h){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Qf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return pc(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(D_(this.dataSource)&&Fk.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class zk{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Dc(e)}createContext(e,t,i,o=!1){return new Qf({dataSource:e,methodName:t,targetDoc:i,path:Pt.emptyPath(),arrayElement:!1,hasConverter:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Yf(r){const e=r._freezeSettings(),t=Dc(r._databaseId);return new zk(r._databaseId,!!e.ignoreUndefinedProperties,t)}function V_(r,e,t,i,o,l={}){const h=r.createContext(l.merge||l.mergeFields?2:0,e,t,o);Jf("Data must be an object, but it was:",h,i);const m=O_(i,h);let y,_;if(l.merge)y=new un(h.fieldMask),_=h.fieldTransforms;else if(l.mergeFields){const E=[];for(const T of l.mergeFields){const C=No(e,T,t);if(!h.contains(C))throw new re($.INVALID_ARGUMENT,`Field '${C}' is specified in your field mask but missing from your input data.`);M_(E,C)||E.push(C)}y=new un(E),_=h.fieldTransforms.filter((T=>y.covers(T.field)))}else y=null,_=h.fieldTransforms;return new Uk(new Xt(m),y,_)}class Mc extends Gf{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Mc}}function Bk(r,e,t,i){const o=r.createContext(1,e,t);Jf("Data must be an object, but it was:",o,i);const l=[],h=Xt.empty();bs(i,((y,_)=>{const E=j_(e,y,t);_=ht(_);const T=o.childContextForFieldPath(E);if(_ instanceof Mc)l.push(E);else{const C=ml(_,T);C!=null&&(l.push(E),h.set(E,C))}}));const m=new un(l);return new b_(h,m,o.fieldTransforms)}function $k(r,e,t,i,o,l){const h=r.createContext(1,e,t),m=[No(e,i,t)],y=[o];if(l.length%2!=0)throw new re($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let C=0;C<l.length;C+=2)m.push(No(e,l[C])),y.push(l[C+1]);const _=[],E=Xt.empty();for(let C=m.length-1;C>=0;--C)if(!M_(_,m[C])){const F=m[C];let q=y[C];q=ht(q);const W=h.childContextForFieldPath(F);if(q instanceof Mc)_.push(F);else{const B=ml(q,W);B!=null&&(_.push(F),E.set(F,B))}}const T=new un(_);return new b_(E,T,h.fieldTransforms)}function qk(r,e,t,i=!1){return ml(t,r.createContext(i?4:3,e))}function ml(r,e){if(L_(r=ht(r)))return Jf("Unsupported field value:",e,r),O_(r,e);if(r instanceof Gf)return(function(i,o){if(!D_(o.dataSource))throw o.createError(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.createError(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,o){const l=[];let h=0;for(const m of i){let y=ml(m,o.childContextForArray(h));y==null&&(y={nullValue:"NULL_VALUE"}),l.push(y),h++}return{arrayValue:{values:l}}})(r,e)}return(function(i,o){if((i=ht(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return kS(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=et.fromDate(i);return{timestampValue:cc(o.serializer,l)}}if(i instanceof et){const l=new et(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:cc(o.serializer,l)}}if(i instanceof or)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof wn)return{bytesValue:Qv(o.serializer,i._byteString)};if(i instanceof vt){const l=o.databaseId,h=i.firestore._databaseId;if(!h.isEqual(l))throw o.createError(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:bf(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Vn)return(function(h,m){const y=h instanceof Vn?h.toArray():h;return{mapValue:{fields:{[Iv]:{stringValue:Sv},[oc]:{arrayValue:{values:y.map((E=>{if(typeof E!="number")throw m.createError("VectorValues must only contain numeric values.");return Nf(m.serializer,E)}))}}}}}})(i,o);if(n_(i))return i._toProto(o.serializer);throw o.createError(`Unsupported field value: ${Tc(i)}`)})(r,e)}function O_(r,e){const t={};return vv(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):bs(r,((i,o)=>{const l=ml(o,e.childContextForField(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function L_(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof et||r instanceof or||r instanceof wn||r instanceof vt||r instanceof Gf||r instanceof Vn||n_(r))}function Jf(r,e,t){if(!L_(t)||!gv(t)){const i=Tc(t);throw i==="an object"?e.createError(r+" a custom object"):e.createError(r+" "+i)}}function No(r,e,t){if((e=ht(e))instanceof Kf)return e._internalPath;if(typeof e=="string")return j_(r,e);throw pc("Field path arguments must be of type string or ",r,!1,void 0,t)}const Hk=new RegExp("[~\\*/\\[\\]]");function j_(r,e,t){if(e.search(Hk)>=0)throw pc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Kf(...e.split("."))._internalPath}catch{throw pc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function pc(r,e,t,i,o){const l=i&&!i.isEmpty(),h=o!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let y="";return(l||h)&&(y+=" (found",l&&(y+=` in field ${i}`),h&&(y+=` in document ${o}`),y+=")"),new re($.INVALID_ARGUMENT,m+r+y)}function M_(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{convertValue(e,t="none"){switch(ks(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(As(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw xe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return bs(e,((o,l)=>{i[o]=this.convertValue(l,t)})),i}convertVectorValue(e){var i,o,l;const t=(l=(o=(i=e.fields)==null?void 0:i[oc].arrayValue)==null?void 0:o.values)==null?void 0:l.map((h=>ct(h.doubleValue)));return new Vn(t)}convertGeoPoint(e){return new or(ct(e.latitude),ct(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Ac(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Xa(e));default:return null}}convertTimestamp(e){const t=Ss(e);return new et(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Ye.fromString(e);He(t_(i),9688,{name:e});const o=new Za(i.get(1),i.get(3)),l=new ye(i.popFirst(5));return o.isEqual(t)||br(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_ extends Wk{constructor(e){super(),this.firestore=e}convertBytes(e){return new wn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new vt(this.firestore,null,t)}}const Zy="@firebase/firestore",e0="4.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Kk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(No("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Kk extends U_{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gk(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new re($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Xf{}class z_ extends Xf{}function Qk(r,e,...t){let i=[];e instanceof Xf&&i.push(e),i=i.concat(t),(function(l){const h=l.filter((y=>y instanceof ep)).length,m=l.filter((y=>y instanceof Zf)).length;if(h>1||h>0&&m>0)throw new re($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)r=o._apply(r);return r}class Zf extends z_{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Zf(e,t,i)}_apply(e){const t=this._parse(e);return B_(e._query,t),new Ei(e.firestore,e.converter,Hd(e._query,t))}_parse(e){const t=Yf(e.firestore);return(function(l,h,m,y,_,E,T){let C;if(_.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new re($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){n0(T,E);const q=[];for(const W of T)q.push(t0(y,l,W));C={arrayValue:{values:q}}}else C=t0(y,l,T)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||n0(T,E),C=qk(m,h,T,E==="in"||E==="not-in");return gt.create(_,E,C)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class ep extends Xf{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ep(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:Ln.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,l){let h=o;const m=l.getFlattenedFilters();for(const y of m)B_(h,y),h=Hd(h,y)})(e._query,t),new Ei(e.firestore,e.converter,Hd(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class tp extends z_{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new tp(e,t)}_apply(e){const t=(function(o,l,h){if(o.startAt!==null)throw new re($.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new re($.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new tl(l,h)})(e._query,this._field,this._direction);return new Ei(e.firestore,e.converter,_S(e._query,t))}}function Yk(r,e="asc"){const t=e,i=No("orderBy",r);return tp._create(i,t)}function t0(r,e,t){if(typeof(t=ht(t))=="string"){if(t==="")throw new re($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Dv(e)&&t.indexOf("/")!==-1)throw new re($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Ye.fromString(t));if(!ye.isDocumentKey(i))throw new re($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return gy(r,new ye(i))}if(t instanceof vt)return gy(r,t._key);throw new re($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Tc(t)}.`)}function n0(r,e){if(!Array.isArray(r)||r.length===0)throw new re($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function B_(r,e){const t=(function(o,l){for(const h of o)for(const m of h.getFlattenedFilters())if(l.indexOf(m.op)>=0)return m.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new re($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new re($.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function $_(r,e,t){let i;return i=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,i}class za{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ui extends U_{constructor(e,t,i,o,l,h){super(e,t,i,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Gu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(No("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new re($.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ui._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ui._jsonSchemaVersion="firestore/documentSnapshot/1.0",ui._jsonSchema={type:yt("string",ui._jsonSchemaVersion),bundleSource:yt("string","DocumentSnapshot"),bundleName:yt("string"),bundle:yt("string")};class Gu extends ui{data(e={}){return super.data(e)}}class xo{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new za(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Gu(this._firestore,this._userDataWriter,i.key,i,new za(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new re($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((m=>{const y=new Gu(o._firestore,o._userDataWriter,m.doc.key,m.doc,new za(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:y,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>l||m.type!==3)).map((m=>{const y=new Gu(o._firestore,o._userDataWriter,m.doc.key,m.doc,new za(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let _=-1,E=-1;return m.type!==0&&(_=h.indexOf(m.doc.key),h=h.delete(m.doc.key)),m.type!==1&&(h=h.add(m.doc),E=h.indexOf(m.doc.key)),{type:Jk(m.type),doc:y,oldIndex:_,newIndex:E}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new re($.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=xo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=xf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Jk(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xe(61501,{type:r})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xo._jsonSchemaVersion="firestore/querySnapshot/1.0",xo._jsonSchema={type:yt("string",xo._jsonSchemaVersion),bundleSource:yt("string","QuerySnapshot"),bundleName:yt("string"),bundle:yt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Yf(e)}set(e,t,i){this._verifyNotCommitted();const o=Ad(e,this._firestore),l=$_(o.converter,t,i),h=V_(this._dataReader,"WriteBatch.set",o._key,l,o.converter!==null,i);return this._mutations.push(h.toMutation(o._key,cn.none())),this}update(e,t,i,...o){this._verifyNotCommitted();const l=Ad(e,this._firestore);let h;return h=typeof(t=ht(t))=="string"||t instanceof Kf?$k(this._dataReader,"WriteBatch.update",l._key,t,i,o):Bk(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(h.toMutation(l._key,cn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ad(e,this._firestore);return this._mutations=this._mutations.concat(new Pc(t._key,cn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new re($.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ad(r,e){if((r=ht(r)).firestore!==e)throw new re($.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q_(r){r=Dr(r,vt);const e=Dr(r.firestore,Mo),t=jc(e);return Pk(t,r._key).then((i=>Zk(e,r,i)))}function nf(r){r=Dr(r,Ei);const e=Dr(r.firestore,Mo),t=jc(e),i=new F_(e);return Gk(r._query),bk(t,r._query).then((o=>new xo(e,i,r,o)))}function np(r,e,t){r=Dr(r,vt);const i=Dr(r.firestore,Mo),o=$_(r.converter,e,t),l=Yf(i);return rp(i,[V_(l,"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,cn.none())])}function r0(r){return rp(Dr(r.firestore,Mo),[new Pc(r._key,cn.none())])}function rp(r,e){const t=jc(r);return Dk(t,e)}function Zk(r,e,t){const i=t.docs.get(e._key),o=new F_(r);return new ui(r,o,e._key,i,new za(t.hasPendingWrites,t.fromCache),e.converter)}function e2(r){return r=Dr(r,Mo),jc(r),new Xk(r,(e=>rp(r,e)))}(function(e,t=!0){DI(Po),To(new hi("firestore",((i,{instanceIdentifier:o,options:l})=>{const h=i.getProvider("app").getImmediate(),m=new Mo(new LI(i.getProvider("auth-internal")),new FI(h,i.getProvider("app-check-internal")),nS(h,o),h);return l={useFetchStreams:t,...l},m._setSettings(l),m}),"PUBLIC").setMultipleInstances(!0)),ws(Zy,e0,e),ws(Zy,e0,"esm2020")})();const t2={apiKey:"AIzaSyBAf83WJpNKrse4AIIGYajoGt_Q0jeQ5zs",authDomain:"wandr-b02f5.firebaseapp.com",projectId:"wandr-b02f5",storageBucket:"wandr-b02f5.firebasestorage.app",messagingSenderId:"426584594137",appId:"1:426584594137:web:5beca6fa60330f90b410c8"},H_=E0(t2),mc=oI(H_),Fo=jk(H_);function n2(){const[r,e]=he.useState(null),[t,i]=he.useState(!0);return he.useEffect(()=>Kx(mc,l=>{e(l),i(!1)}),[]),{user:r,loading:t}}function W_(r){return P_(Fo,"users",r,"trips")}function K_(r,e){return Wf(Fo,"users",r,"trips",e)}function sp(r,e){return Wf(Fo,"users",r,"chats",e)}function r2(r){return P_(Fo,"users",r,"chats")}function ip(r){return Wf(Fo,"users",r,"settings","main")}async function s2(r){return(await nf(Qk(W_(r),Yk("createdAt","desc")))).docs.map(t=>t.data())}async function s0(r,e){await np(K_(r,e.id),e)}async function i2(r,e){await Promise.all([r0(K_(r,e)),r0(sp(r,e))])}async function o2(r,e){const t=await q_(sp(r,e));return t.exists()?t.data().messages??[]:[]}async function a2(r,e,t){await np(sp(r,e),{messages:t})}async function l2(r){const e=await q_(ip(r));if(!e.exists())return{perplexityKey:"",anthropicKey:""};const t=e.data();return{perplexityKey:t.perplexityKey??t.apiKey??"",anthropicKey:t.anthropicKey??""}}async function u2(r,e){await np(ip(r),{perplexityKey:e.perplexityKey,anthropicKey:e.anthropicKey},{merge:!0})}async function c2(r){const e=e2(Fo),[t,i]=await Promise.all([nf(W_(r)),nf(r2(r))]);t.docs.forEach(o=>e.delete(o.ref)),i.docs.forEach(o=>e.delete(o.ref)),e.delete(ip(r)),await e.commit()}let Qu=null;function i0(r){Qu=r}function h2(){return Math.random().toString(36).slice(2,9)}function xn(r){const e=h2();return Qu==null||Qu({...r,id:e,timestamp:new Date().toISOString()}),e}const d2="https://api.perplexity.ai/chat/completions",f2="sonar-pro";async function Fc(r,e,t,i={}){var y;const{maxTokens:o=8192}=i,l=[{role:"system",content:e},...r],h=await fetch(d2,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({model:f2,max_tokens:o,messages:l})});if(!h.ok){const _=await h.json().catch(()=>({}));throw new Error(((y=_==null?void 0:_.error)==null?void 0:y.message)||`API error ${h.status}`)}return(await h.json()).choices[0].message.content}function op(r){try{return JSON.parse(r)}catch{const e=r.indexOf("{"),t=r.indexOf("[");let i=-1,o="";if(e!==-1&&(t===-1||e<t)?(i=e,o="}"):t!==-1&&(i=t,o="]"),i!==-1){const l=r.lastIndexOf(o);if(l>i)try{return JSON.parse(r.slice(i,l+1))}catch{}}throw new Error("AI returned an unexpected format. Please try again.")}}async function p2(r){const{destination:e,startDate:t,endDate:i,interests:o,budget:l,travelers:h,apiKey:m}=r;xn({message:`Creating trip to ${e}`,status:"pending"});const y=`Trip to ${e} (${t}  ${i}).
Interests: ${o.join(", ")}. Budget: $${l}. Travelers: ${h}.

Fill in this JSON exactly (no other text):
{
  "name": "<catchy 3-5 word trip name>",
  "emoji": "<single emoji>",
  "description": "<2 sentences about this trip>",
  "coverGradient": "<exactly one of: from-violet-900 to-indigo-900 | from-blue-900 to-cyan-900 | from-emerald-900 to-teal-900 | from-rose-900 to-pink-900 | from-amber-900 to-orange-900 | from-slate-900 to-blue-900>"
}`;try{const _=await Fc([{role:"user",content:y}],"You are a travel expert. Output valid JSON only, no other text.",m,{maxTokens:512}),E=op(_);return xn({message:`Trip "${E.name}" created`,status:"success"}),E}catch(_){const E=_ instanceof Error?_.message:"Unknown error";throw xn({message:"Failed to create trip",detail:E,status:"error"}),_}}async function m2(r,e){const t=Math.ceil((new Date(r.endDate).getTime()-new Date(r.startDate).getTime())/864e5)+1;xn({message:`Generating ${t}-day itinerary for ${r.destination}`,status:"pending"});const i=[];for(let l=0;l<t;l++){const h=new Date(r.startDate+"T12:00:00");h.setDate(h.getDate()+l),i.push(h.toISOString().split("T")[0])}const o=`Create a ${t}-day itinerary for ${r.destination}.
Dates: ${i.join(", ")}. Interests: ${r.interests.join(", ")}.
Budget: ${r.currency}${r.budget} for ${r.travelers} person(s).

Return a JSON array of ${t} objects. Each object:
{"id":"day-N","date":"YYYY-MM-DD","title":"Day theme","activities":[
  {"id":"act-N-M","time":"HH:MM","title":"Name","description":"One sentence.","category":"food|sightseeing|activity|transport|accommodation|free","estimatedCost":0}
]}
Exactly 4 activities per day. Keep descriptions to 1 sentence.`;try{const l=await Fc([{role:"user",content:o}],"Output valid JSON array only. No preamble, no explanation.",e,{maxTokens:8192}),h=op(l);return xn({message:`Itinerary ready  ${h.length} days, ${h.reduce((m,y)=>m+y.activities.length,0)} activities`,status:"success"}),h}catch(l){const h=l instanceof Error?l.message:"Unknown error";throw xn({message:"Failed to generate itinerary",detail:h,status:"error"}),l}}async function g2(r,e){const t=Math.ceil((new Date(r.endDate).getTime()-new Date(r.startDate).getTime())/864e5)+1;xn({message:`Generating packing list for ${r.destination}`,status:"pending"});const i=`Packing list for ${t}-day trip to ${r.destination}.
Activities: ${r.interests.join(", ")}. Travelers: ${r.travelers}.

Return a JSON array of exactly 25 items:
[{"id":"item-N","name":"Item","category":"Documents|Clothing|Toiletries|Electronics|Health & Safety|Activities|Miscellaneous","packed":false,"quantity":1,"essential":true}]
Mark passport, medications as essential:true. Others essential:false.`;try{const o=await Fc([{role:"user",content:i}],"Output valid JSON array only.",e,{maxTokens:3e3}),l=op(o);return xn({message:`Packing list ready  ${l.length} items`,status:"success"}),l}catch(o){const l=o instanceof Error?o.message:"Unknown error";throw xn({message:"Failed to generate packing list",detail:l,status:"error"}),o}}async function y2(r,e,t,i){xn({message:"AI assistant responding",status:"pending"});const o=`You are a travel assistant for a trip to ${t.destination} (${t.startDate}  ${t.endDate}).
${t.travelers} traveler(s). Budget: ${t.currency}${t.budget}. Interests: ${t.interests.join(", ")}.
Be concise and specific. 2-4 sentences per answer.`;try{const l=await Fc([...e,{role:"user",content:r}],o,i,{maxTokens:1024});return xn({message:"AI assistant replied",status:"success"}),l}catch(l){const h=l instanceof Error?l.message:"Unknown error";throw xn({message:"AI chat error",detail:h,status:"error"}),l}}function v2(r){switch(r){case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":return"Invalid email or password.";case"auth/email-already-in-use":return"An account with this email already exists.";case"auth/weak-password":return"Password must be at least 6 characters.";case"auth/invalid-email":return"Please enter a valid email address.";case"auth/too-many-requests":return"Too many failed attempts. Please try again later.";default:return"Something went wrong. Please try again."}}function _2(){const[r,e]=he.useState("login"),[t,i]=he.useState(""),[o,l]=he.useState(""),[h,m]=he.useState(""),[y,_]=he.useState(!1),E=async C=>{C.preventDefault(),m(""),_(!0);try{r==="create"?await $x(mc,t,o):await qx(mc,t,o)}catch(F){m(v2(F.code))}finally{_(!1)}},T=()=>{e(C=>C==="login"?"create":"login"),m("")};return g.jsx("div",{className:"min-h-screen bg-gray-950 flex items-center justify-center p-4",children:g.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-8 w-full max-w-md shadow-2xl",children:[g.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[g.jsx("div",{className:"p-2.5 bg-indigo-500/20 rounded-xl border border-indigo-500/30",children:g.jsx(vf,{className:"w-6 h-6 text-indigo-400"})}),g.jsxs("div",{children:[g.jsx("h1",{className:"text-xl font-bold text-gray-100",children:"Wandr"}),g.jsx("p",{className:"text-xs text-indigo-400",children:"AI Trip Planner"})]})]}),g.jsx("h2",{className:"text-lg font-semibold text-gray-100 mb-6",children:r==="login"?"Sign in to your account":"Create your account"}),g.jsxs("form",{onSubmit:E,className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm text-gray-400 mb-1.5",children:"Email"}),g.jsxs("div",{className:"relative",children:[g.jsx(II,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-600"}),g.jsx("input",{type:"email",value:t,onChange:C=>i(C.target.value),required:!0,placeholder:"you@example.com",className:"w-full bg-gray-800 border border-gray-700 rounded-xl pl-10 pr-4 py-3 text-gray-100 placeholder-gray-600 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm text-gray-400 mb-1.5",children:"Password"}),g.jsxs("div",{className:"relative",children:[g.jsx(Es,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-600"}),g.jsx("input",{type:"password",value:o,onChange:C=>l(C.target.value),required:!0,minLength:6,placeholder:"Minimum 6 characters",className:"w-full bg-gray-800 border border-gray-700 rounded-xl pl-10 pr-4 py-3 text-gray-100 placeholder-gray-600 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition"})]})]}),h&&g.jsx("p",{className:"text-sm text-red-400 bg-red-500/10 border border-red-500/20 rounded-xl px-4 py-2.5",children:h}),g.jsxs("button",{type:"submit",disabled:y||!t||!o,className:"w-full py-3 bg-indigo-600 hover:bg-indigo-500 disabled:opacity-40 disabled:cursor-not-allowed rounded-xl font-medium transition shadow-lg shadow-indigo-900/30 flex items-center justify-center gap-2",children:[y&&g.jsx(En,{className:"w-4 h-4 animate-spin"}),r==="login"?"Sign In":"Create Account"]})]}),g.jsxs("p",{className:"text-center text-sm text-gray-500 mt-6",children:[r==="login"?"Don't have an account?":"Already have an account?"," ",g.jsx("button",{onClick:T,className:"text-indigo-400 hover:text-indigo-300 transition font-medium",children:r==="login"?"Create one":"Sign in"})]})]})})}function w2({onSave:r,existing:e,onClose:t,onLogout:i,onDeleteAccount:o}){const[l,h]=he.useState(e.perplexityKey),[m,y]=he.useState(e.anthropicKey),[_,E]=he.useState(!1),[T,C]=he.useState(!1),[F,q]=he.useState(!1),[W,B]=he.useState(!1),[Z,te]=he.useState(""),[ge,pe]=he.useState(""),[ie,ve]=he.useState(!1),P=()=>{r({perplexityKey:l.trim(),anthropicKey:m.trim()}),q(!0),setTimeout(()=>q(!1),2e3)},A=async()=>{ve(!0),pe("");try{await o(Z)}catch(I){const R=I;R.code==="auth/wrong-password"||R.code==="auth/invalid-credential"?pe("Incorrect password."):pe("Failed to delete account. Please try again."),ve(!1)}};return g.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:g.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-8 w-full max-w-md shadow-2xl",children:[g.jsxs("div",{className:"flex items-center justify-between mb-8",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"p-2 bg-gray-800 rounded-lg",children:g.jsx(xI,{className:"w-5 h-5 text-gray-400"})}),g.jsxs("div",{children:[g.jsx("h2",{className:"font-semibold text-gray-100",children:"API Settings"}),g.jsx("p",{className:"text-xs text-gray-500",children:"Configure your AI provider keys"})]})]}),g.jsx("button",{onClick:t,className:"p-1.5 text-gray-500 hover:text-gray-300 hover:bg-gray-800 rounded-lg transition",title:"Close",children:g.jsx(wf,{className:"w-4 h-4"})})]}),g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{children:[g.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Perplexity API Key",e.perplexityKey&&g.jsx("span",{className:"ml-2 text-xs text-emerald-400",children:" configured"})]}),g.jsxs("div",{className:"relative",children:[g.jsx("input",{type:_?"text":"password",value:l,onChange:I=>h(I.target.value),placeholder:"pplx-...",className:"w-full bg-gray-800 border border-gray-700 rounded-xl px-4 py-3 pr-10 text-gray-100 placeholder-gray-600 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition font-mono text-sm"}),g.jsx("button",{type:"button",onClick:()=>E(I=>!I),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-300 transition",children:_?g.jsx(ty,{className:"w-4 h-4"}):g.jsx(ny,{className:"w-4 h-4"})})]}),g.jsx("p",{className:"mt-1.5 text-xs text-gray-500",children:"Used for itinerary generation, packing lists, and AI chat."}),g.jsxs("a",{href:"https://www.perplexity.ai/settings/api",target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-1 mt-1 text-xs text-indigo-400 hover:text-indigo-300 transition",children:[g.jsx(ey,{className:"w-3 h-3"}),"Get your Perplexity key"]})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Anthropic API Key",e.anthropicKey&&g.jsx("span",{className:"ml-2 text-xs text-emerald-400",children:" configured"})]}),g.jsxs("div",{className:"relative",children:[g.jsx("input",{type:T?"text":"password",value:m,onChange:I=>y(I.target.value),placeholder:"sk-ant-...",className:"w-full bg-gray-800 border border-gray-700 rounded-xl px-4 py-3 pr-10 text-gray-100 placeholder-gray-600 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition font-mono text-sm"}),g.jsx("button",{type:"button",onClick:()=>C(I=>!I),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-300 transition",children:T?g.jsx(ty,{className:"w-4 h-4"}):g.jsx(ny,{className:"w-4 h-4"})})]}),g.jsx("p",{className:"mt-1.5 text-xs text-gray-500",children:"For Claude-powered features."}),g.jsxs("a",{href:"https://console.anthropic.com/settings/keys",target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-1 mt-1 text-xs text-indigo-400 hover:text-indigo-300 transition",children:[g.jsx(ey,{className:"w-3 h-3"}),"Get your Anthropic key"]})]}),g.jsx("button",{onClick:P,className:`w-full py-3 rounded-xl font-medium transition shadow-lg shadow-indigo-900/30 ${F?"bg-emerald-600 hover:bg-emerald-500":"bg-indigo-600 hover:bg-indigo-500"}`,children:F?" Saved":"Save Keys"})]}),g.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-800",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("button",{onClick:i,className:"flex items-center gap-2 text-sm text-gray-400 hover:text-gray-200 transition",children:[g.jsx(TI,{className:"w-4 h-4"}),"Sign out"]}),g.jsx("button",{onClick:()=>B(!0),className:"text-sm text-red-500 hover:text-red-400 transition",children:"Delete account"})]}),W&&g.jsxs("div",{className:"mt-4 p-4 bg-red-500/10 border border-red-500/20 rounded-xl space-y-3",children:[g.jsx("p",{className:"text-sm text-red-300 leading-relaxed",children:"This will permanently delete all your trips, chat history, and your account. Enter your password to confirm."}),g.jsx("input",{type:"password",value:Z,onChange:I=>{te(I.target.value),pe("")},placeholder:"Your password",className:"w-full bg-gray-800 border border-gray-700 rounded-xl px-4 py-2.5 text-gray-100 placeholder-gray-600 text-sm focus:outline-none focus:border-red-500 transition"}),ge&&g.jsx("p",{className:"text-xs text-red-400",children:ge}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{onClick:()=>{B(!1),te(""),pe("")},className:"flex-1 py-2 text-sm text-gray-400 hover:text-gray-200 bg-gray-800 hover:bg-gray-700 rounded-xl transition",children:"Cancel"}),g.jsxs("button",{onClick:A,disabled:!Z||ie,className:"flex-1 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-500 disabled:opacity-40 rounded-xl transition flex items-center justify-center gap-1.5",children:[ie&&g.jsx(En,{className:"w-3.5 h-3.5 animate-spin"}),"Delete everything"]})]})]})]})]})})}function o0({trip:r,onClick:e}){const t=new Date(r.startDate),i=new Date(r.endDate),o=Math.ceil((i.getTime()-t.getTime())/864e5)+1,h={planning:{bg:"bg-amber-500/20",text:"text-amber-300",label:"Planning"},upcoming:{bg:"bg-blue-500/20",text:"text-blue-300",label:"Upcoming"},completed:{bg:"bg-emerald-500/20",text:"text-emerald-300",label:"Completed"}}[r.status];return g.jsxs("button",{onClick:e,className:"group w-full text-left rounded-2xl overflow-hidden border border-gray-800 hover:border-gray-600 transition-all duration-200 hover:-translate-y-0.5 hover:shadow-xl hover:shadow-black/40 bg-gray-900",children:[g.jsxs("div",{className:`h-32 bg-gradient-to-br ${r.coverGradient} relative overflow-hidden`,children:[g.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/40 to-transparent"}),g.jsx("div",{className:"absolute bottom-3 left-4 text-4xl drop-shadow-lg",children:r.emoji}),g.jsx("div",{className:"absolute top-3 right-3",children:g.jsx("span",{className:`text-xs px-2.5 py-1 rounded-full font-medium backdrop-blur-sm ${h.bg} ${h.text}`,children:h.label})})]}),g.jsxs("div",{className:"p-4",children:[g.jsx("h3",{className:"font-semibold text-gray-100 group-hover:text-white truncate leading-tight",children:r.name}),g.jsxs("div",{className:"flex items-center gap-1.5 mt-1",children:[g.jsx(Ec,{className:"w-3.5 h-3.5 text-gray-500 shrink-0"}),g.jsx("span",{className:"text-sm text-gray-400 truncate",children:r.destination})]}),g.jsxs("div",{className:"flex items-center justify-between mt-3 text-xs text-gray-500",children:[g.jsxs("span",{className:"flex items-center gap-1",children:[g.jsx(gf,{className:"w-3.5 h-3.5"}),t.toLocaleDateString("en",{month:"short",day:"numeric"})]}),g.jsxs("span",{className:"flex items-center gap-1",children:[g.jsx(_f,{className:"w-3.5 h-3.5"}),r.travelers]}),g.jsxs("span",{className:"font-medium text-gray-400",children:[o,"d"]})]})]})]})}function E2({trips:r,onNewTrip:e,onSelectTrip:t,onSettingsClick:i,hasAiKey:o}){const l=r.filter(m=>m.status!=="completed"),h=r.filter(m=>m.status==="completed");return g.jsxs("div",{className:"min-h-screen flex flex-col",children:[g.jsx("header",{className:"border-b border-gray-800 bg-gray-950/90 backdrop-blur-sm sticky top-0 z-10",children:g.jsxs("div",{className:"max-w-6xl mx-auto px-4 md:px-6 py-4 flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"p-2 bg-indigo-500/20 rounded-xl border border-indigo-500/20",children:g.jsx(vf,{className:"w-5 h-5 text-indigo-400"})}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"text-xl font-bold tracking-tight",children:"Wandr"}),g.jsx("span",{className:"text-xs text-indigo-400 bg-indigo-500/10 border border-indigo-500/20 px-2 py-0.5 rounded-full font-medium",children:"AI"})]})]}),g.jsxs("button",{onClick:i,className:"relative p-2 text-gray-400 hover:text-gray-200 hover:bg-gray-800 rounded-lg transition",title:"API Settings",children:[g.jsx(bo,{className:"w-5 h-5"}),!o&&g.jsx("span",{className:"absolute top-1.5 right-1.5 w-2 h-2 bg-amber-400 rounded-full"})]})]})}),g.jsxs("main",{className:"flex-1 max-w-6xl mx-auto w-full px-4 md:px-6 py-6 md:py-8",children:[g.jsxs("div",{className:"flex items-start justify-between mb-8",children:[g.jsxs("div",{children:[g.jsx("h1",{className:"text-3xl font-bold text-gray-100",children:"Your Trips"}),g.jsx("p",{className:"text-gray-400 mt-1",children:"Plan and explore the world with AI"})]}),g.jsxs("button",{onClick:e,className:"flex items-center gap-2 px-3 md:px-5 py-2.5 bg-indigo-600 hover:bg-indigo-500 rounded-xl font-medium transition shadow-lg shadow-indigo-900/30 shrink-0",children:[g.jsx(Md,{className:"w-4 h-4"}),g.jsx("span",{className:"hidden sm:inline",children:"New Trip"})]})]}),!o&&g.jsxs("div",{className:"mb-6 flex items-center justify-between gap-3 bg-amber-500/10 border border-amber-500/20 rounded-xl px-4 py-3",children:[g.jsx("p",{className:"text-sm text-amber-300",children:"AI features are disabled  add your Perplexity API key to generate itineraries, packing lists, and use AI chat."}),g.jsx("button",{onClick:i,className:"shrink-0 text-xs font-medium text-amber-300 hover:text-amber-200 bg-amber-500/20 hover:bg-amber-500/30 px-3 py-1.5 rounded-lg transition",children:"Set up"})]}),r.length===0&&g.jsxs("div",{className:"flex flex-col items-center justify-center py-24 text-center",children:[g.jsx("div",{className:"w-20 h-20 bg-indigo-500/10 border border-indigo-500/20 rounded-3xl flex items-center justify-center mb-5",children:g.jsx(EI,{className:"w-10 h-10 text-indigo-400"})}),g.jsx("h2",{className:"text-xl font-semibold text-gray-200 mb-2",children:"No trips yet"}),g.jsx("p",{className:"text-gray-500 max-w-sm mb-6 leading-relaxed",children:"Create your first trip and let AI build a personalized itinerary, packing list, and travel guide."}),g.jsxs("button",{onClick:e,className:"flex items-center gap-2 px-6 py-3 bg-indigo-600 hover:bg-indigo-500 rounded-xl font-medium transition",children:[g.jsx(Md,{className:"w-4 h-4"}),"Plan your first trip"]})]}),l.length>0&&g.jsxs("section",{className:"mb-8",children:[g.jsx("h2",{className:"text-xs font-semibold text-gray-500 uppercase tracking-widest mb-4",children:"Upcoming & Planning"}),g.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:l.map(m=>g.jsx(o0,{trip:m,onClick:()=>t(m)},m.id))})]}),h.length>0&&g.jsxs("section",{children:[g.jsx("h2",{className:"text-xs font-semibold text-gray-500 uppercase tracking-widest mb-4",children:"Completed"}),g.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 opacity-70",children:h.map(m=>g.jsx(o0,{trip:m,onClick:()=>t(m)},m.id))})]})]})]})}const a0=[{id:"culture",label:"Culture & History",emoji:""},{id:"food",label:"Food & Dining",emoji:""},{id:"nature",label:"Nature & Outdoors",emoji:""},{id:"adventure",label:"Adventure",emoji:""},{id:"beach",label:"Beach & Relaxation",emoji:""},{id:"shopping",label:"Shopping",emoji:""},{id:"nightlife",label:"Nightlife",emoji:""},{id:"photography",label:"Photography",emoji:""},{id:"family",label:"Family-Friendly",emoji:""},{id:"luxury",label:"Luxury",emoji:""},{id:"backpacking",label:"Budget Travel",emoji:""},{id:"wellness",label:"Wellness & Spa",emoji:""}],x2=[500,1500,3e3,5e3,1e4];function T2({onBack:r,onCreate:e,hasAiKey:t,onSettingsClick:i}){const[o,l]=he.useState(1),[h,m]=he.useState(!1),[y,_]=he.useState(""),[E,T]=he.useState(""),[C,F]=he.useState(""),[q,W]=he.useState(""),[B,Z]=he.useState(2),[te,ge]=he.useState([]),[pe,ie]=he.useState(3e3),[ve,P]=he.useState("USD"),A=new Date().toISOString().split("T")[0],I=E.trim()!==""&&C!==""&&q!==""&&new Date(q)>=new Date(C),R=te.length>0&&pe>0,k=ne=>ge(Se=>Se.includes(ne)?Se.filter(ae=>ae!==ne):[...Se,ne]),D=async()=>{m(!0),_("");try{await e({destination:E,startDate:C,endDate:q,travelers:B,budget:pe,currency:ve,interests:te})}catch(ne){const Se=ne instanceof Error?ne.message:"Failed to create trip";_(Se),m(!1)}},S=C&&q?Math.ceil((new Date(q).getTime()-new Date(C).getTime())/864e5)+1:null;return g.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-950",children:[g.jsx("header",{className:"border-b border-gray-800 bg-gray-950",children:g.jsxs("div",{className:"max-w-2xl mx-auto px-6 py-4 flex items-center gap-4",children:[g.jsx("button",{onClick:r,className:"p-2 text-gray-400 hover:text-gray-200 hover:bg-gray-800 rounded-lg transition",children:g.jsx(jd,{className:"w-5 h-5"})}),g.jsxs("div",{className:"flex-1",children:[g.jsx("h1",{className:"font-semibold text-gray-100",children:"New Trip"}),g.jsxs("p",{className:"text-xs text-gray-500",children:["Step ",o," of 3"]})]}),g.jsx("div",{className:"flex gap-1.5",children:[1,2,3].map(ne=>g.jsx("div",{className:`h-1.5 w-10 rounded-full transition-colors duration-300 ${ne<=o?"bg-indigo-500":"bg-gray-800"}`},ne))})]})}),g.jsxs("main",{className:"flex-1 max-w-2xl mx-auto w-full px-6 py-10",children:[o===1&&g.jsxs("div",{className:"space-y-7",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"text-2xl font-bold text-gray-100 mb-1",children:"Where are you going?"}),g.jsx("p",{className:"text-gray-400",children:"Tell us your destination and travel dates."})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[g.jsx(Ec,{className:"w-4 h-4 inline mr-1.5 text-gray-500"}),"Destination"]}),g.jsx("input",{type:"text",value:E,onChange:ne=>T(ne.target.value),placeholder:"e.g. Tokyo, Japan",className:"w-full bg-gray-900 border border-gray-700 rounded-xl px-4 py-3 text-gray-100 placeholder-gray-600 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition",autoFocus:!0})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[g.jsx(gf,{className:"w-4 h-4 inline mr-1.5 text-gray-500"}),"Start Date"]}),g.jsx("input",{type:"date",value:C,min:A,onChange:ne=>{F(ne.target.value),q&&ne.target.value>q&&W(ne.target.value)},className:"w-full bg-gray-900 border border-gray-700 rounded-xl px-4 py-3 text-gray-100 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition [color-scheme:dark]"})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["End Date",S&&g.jsxs("span",{className:"ml-2 text-xs text-indigo-400",children:[S,"d"]})]}),g.jsx("input",{type:"date",value:q,min:C||A,onChange:ne=>W(ne.target.value),className:"w-full bg-gray-900 border border-gray-700 rounded-xl px-4 py-3 text-gray-100 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition [color-scheme:dark]"})]})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:[g.jsx(_f,{className:"w-4 h-4 inline mr-1.5 text-gray-500"}),"Travelers"]}),g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("button",{type:"button",onClick:()=>Z(Math.max(1,B-1)),className:"w-10 h-10 bg-gray-800 hover:bg-gray-700 rounded-xl flex items-center justify-center text-xl font-light text-gray-300 transition",children:""}),g.jsx("span",{className:"text-2xl font-bold w-8 text-center text-gray-100",children:B}),g.jsx("button",{type:"button",onClick:()=>Z(B+1),className:"w-10 h-10 bg-gray-800 hover:bg-gray-700 rounded-xl flex items-center justify-center text-xl font-light text-gray-300 transition",children:"+"}),g.jsx("span",{className:"text-gray-400 text-sm",children:B===1?"traveler":"travelers"})]})]})]}),o===2&&g.jsxs("div",{className:"space-y-7",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"text-2xl font-bold text-gray-100 mb-1",children:"What's your style?"}),g.jsx("p",{className:"text-gray-400",children:"Pick interests and set your total budget."})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:["Interests ",g.jsx("span",{className:"text-gray-500",children:"(select all that apply)"})]}),g.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:a0.map(({id:ne,label:Se,emoji:ae})=>{const Ie=te.includes(ne);return g.jsxs("button",{type:"button",onClick:()=>k(ne),className:`flex items-center gap-2 px-3 py-2.5 rounded-xl text-sm border transition-all text-left ${Ie?"bg-indigo-600/20 border-indigo-500/60 text-indigo-200":"bg-gray-900 border-gray-700 text-gray-300 hover:border-gray-500 hover:text-gray-200"}`,children:[g.jsx("span",{className:"text-base",children:ae}),g.jsx("span",{className:"flex-1 leading-tight",children:Se}),Ie&&g.jsx(wc,{className:"w-3.5 h-3.5 text-indigo-400 shrink-0"})]},ne)})})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[g.jsx(yf,{className:"w-4 h-4 inline mr-1.5 text-gray-500"}),"Total Budget (all travelers)"]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("select",{value:ve,onChange:ne=>P(ne.target.value),className:"bg-gray-900 border border-gray-700 rounded-xl px-3 py-3 text-gray-100 focus:outline-none focus:border-indigo-500 transition",children:["USD","EUR","GBP","JPY","AUD","CAD"].map(ne=>g.jsx("option",{value:ne,children:ne},ne))}),g.jsx("input",{type:"number",value:pe,min:100,step:100,onChange:ne=>ie(Number(ne.target.value)),className:"flex-1 bg-gray-900 border border-gray-700 rounded-xl px-4 py-3 text-gray-100 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition"})]}),g.jsx("div",{className:"flex gap-2 mt-2.5",children:x2.map(ne=>g.jsxs("button",{type:"button",onClick:()=>ie(ne),className:`flex-1 py-1.5 text-xs rounded-lg border transition ${pe===ne?"bg-indigo-600/20 border-indigo-500/40 text-indigo-300":"bg-gray-900 border-gray-700 text-gray-500 hover:text-gray-300 hover:border-gray-600"}`,children:["$",(ne/1e3).toFixed((ne<1e3,0))+(ne>=1e3?"k":"")]},ne))})]})]}),o===3&&g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"text-2xl font-bold text-gray-100 mb-1",children:"Ready to create!"}),g.jsx("p",{className:"text-gray-400",children:"AI will generate your trip name, description, and set up the foundation for your itinerary."})]}),g.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-6 space-y-5",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"p-2.5 bg-indigo-500/20 rounded-xl",children:g.jsx(vf,{className:"w-5 h-5 text-indigo-400"})}),g.jsxs("div",{children:[g.jsx("p",{className:"font-semibold text-gray-100",children:E}),g.jsxs("p",{className:"text-sm text-gray-400",children:[new Date(C).toLocaleDateString("en",{month:"long",day:"numeric"})," "," ",new Date(q).toLocaleDateString("en",{month:"long",day:"numeric",year:"numeric"}),S&&g.jsxs("span",{className:"ml-1.5 text-gray-500",children:["(",S," days)"]})]})]})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[g.jsxs("div",{className:"bg-gray-800/60 rounded-xl p-3",children:[g.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Travelers"}),g.jsxs("p",{className:"font-medium text-gray-200",children:[B," ",B===1?"person":"people"]})]}),g.jsxs("div",{className:"bg-gray-800/60 rounded-xl p-3",children:[g.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Budget"}),g.jsxs("p",{className:"font-medium text-gray-200",children:[ve," ",pe.toLocaleString()]})]})]}),g.jsxs("div",{children:[g.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Interests"}),g.jsx("div",{className:"flex flex-wrap gap-1.5",children:te.map(ne=>{const Se=a0.find(ae=>ae.id===ne);return Se?g.jsxs("span",{className:"text-xs bg-indigo-500/15 text-indigo-300 border border-indigo-500/25 px-2.5 py-1 rounded-full",children:[Se.emoji," ",Se.label]},ne):null})})]})]}),!t&&g.jsxs("div",{className:"flex items-center justify-between gap-3 bg-amber-500/10 border border-amber-500/20 rounded-xl px-4 py-3",children:[g.jsx("p",{className:"text-sm text-amber-300",children:"A Perplexity API key is required to create trips with AI."}),g.jsxs("button",{onClick:i,className:"shrink-0 flex items-center gap-1.5 text-xs font-medium text-amber-300 hover:text-amber-200 bg-amber-500/20 hover:bg-amber-500/30 px-3 py-1.5 rounded-lg transition",children:[g.jsx(bo,{className:"w-3.5 h-3.5"}),"Set up"]})]}),y&&g.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-4 text-sm text-red-300",children:[g.jsx("strong",{children:"Error:"})," ",y]}),g.jsx("button",{onClick:D,disabled:h||!t,className:"w-full py-4 bg-indigo-600 hover:bg-indigo-500 disabled:opacity-40 disabled:cursor-not-allowed rounded-xl font-semibold flex items-center justify-center gap-2.5 transition shadow-lg shadow-indigo-900/30 text-base",children:h?g.jsxs(g.Fragment,{children:[g.jsx(En,{className:"w-5 h-5 animate-spin"}),"AI is crafting your trip"]}):g.jsxs(g.Fragment,{children:[g.jsx(_o,{className:"w-5 h-5"}),"Create Trip with AI"]})})]}),o<3&&g.jsxs("div",{className:"flex justify-between mt-10",children:[o>1?g.jsxs("button",{onClick:()=>l(ne=>ne-1),className:"flex items-center gap-2 px-4 py-2.5 text-gray-400 hover:text-gray-200 hover:bg-gray-800 rounded-xl transition",children:[g.jsx(jd,{className:"w-4 h-4"}),"Back"]}):g.jsx("div",{}),g.jsxs("button",{onClick:()=>l(ne=>ne+1),disabled:o===1?!I:!R,className:"flex items-center gap-2 px-6 py-2.5 bg-indigo-600 hover:bg-indigo-500 disabled:opacity-40 disabled:cursor-not-allowed rounded-xl font-medium transition",children:["Next",g.jsx(dI,{className:"w-4 h-4"})]})]})]})]})}const I2=["accommodation","transport","food","activity","sightseeing","free"],l0={accommodation:{Icon:fI,cls:"text-purple-400 bg-purple-500/10 border-purple-500/20"},transport:{Icon:CI,cls:"text-blue-400 bg-blue-500/10 border-blue-500/20"},food:{Icon:RI,cls:"text-orange-400 bg-orange-500/10 border-orange-500/20"},activity:{Icon:kI,cls:"text-indigo-400 bg-indigo-500/10 border-indigo-500/20"},sightseeing:{Icon:Ec,cls:"text-emerald-400 bg-emerald-500/10 border-emerald-500/20"},free:{Icon:wI,cls:"text-gray-400 bg-gray-500/10 border-gray-700"}};function S2(){return Math.random().toString(36).slice(2,9)}function u0({value:r,onChange:e,onSave:t,onCancel:i}){var l;const o="w-full bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-sm text-gray-100 placeholder-gray-600 focus:outline-none focus:border-indigo-500 transition";return g.jsxs("div",{className:"bg-gray-900 border border-indigo-500/40 rounded-xl p-4 space-y-3",children:[g.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Time"}),g.jsx("input",{type:"time",value:r.time??"09:00",onChange:h=>e({...r,time:h.target.value}),className:o+" [color-scheme:dark]"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Category"}),g.jsx("select",{value:r.category??"activity",onChange:h=>e({...r,category:h.target.value}),className:o,children:I2.map(h=>g.jsx("option",{value:h,children:h},h))})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Activity name"}),g.jsx("input",{type:"text",value:r.title??"",onChange:h=>e({...r,title:h.target.value}),placeholder:"e.g. Visit the Eiffel Tower",className:o,autoFocus:!0})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Description"}),g.jsx("textarea",{value:r.description??"",onChange:h=>e({...r,description:h.target.value}),placeholder:"Brief description",rows:2,className:o+" resize-none"})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"block text-xs text-gray-500 mb-1",children:[g.jsx(yf,{className:"w-3 h-3 inline"})," Estimated cost per person"]}),g.jsx("input",{type:"number",min:0,step:5,value:r.estimatedCost??0,onChange:h=>e({...r,estimatedCost:Number(h.target.value)}),className:o})]}),g.jsxs("div",{className:"flex justify-end gap-2 pt-1",children:[g.jsxs("button",{onClick:i,className:"flex items-center gap-1.5 px-3 py-1.5 text-sm text-gray-400 hover:text-gray-200 hover:bg-gray-800 rounded-lg transition",children:[g.jsx(wf,{className:"w-3.5 h-3.5"})," Cancel"]}),g.jsxs("button",{onClick:t,disabled:!((l=r.title)!=null&&l.trim()),className:"flex items-center gap-1.5 px-4 py-1.5 text-sm bg-indigo-600 hover:bg-indigo-500 disabled:opacity-40 rounded-lg font-medium transition",children:[g.jsx(wc,{className:"w-3.5 h-3.5"})," Save"]})]})]})}function A2({trip:r,onGenerate:e,onUpdate:t,hasAiKey:i,onSettingsClick:o}){const[l,h]=he.useState(!1),[m,y]=he.useState(""),[_,E]=he.useState(0),[T,C]=he.useState(null),[F,q]=he.useState({}),[W,B]=he.useState(!1),[Z,te]=he.useState(""),ge=async()=>{h(!0),y(""),C(null);try{await e(r)}catch(ae){y(ae instanceof Error?ae.message:"Failed to generate itinerary")}finally{h(!1)}},pe=(ae,Ie)=>{t({...r,itinerary:r.itinerary.map(Y=>Y.id===ae?Ie(Y):Y)})},ie=ae=>{if(!T)return;const Ie=!r.itinerary.flatMap(Y=>Y.activities).find(Y=>Y.id===T);pe(ae,Y=>({...Y,activities:Ie?[...Y.activities,{id:T,time:"12:00",title:"",description:"",category:"activity",estimatedCost:0,...F}]:Y.activities.map(de=>de.id===T?{...de,...F}:de)})),C(null),q({})},ve=(ae,Ie)=>{pe(ae,Y=>({...Y,activities:Y.activities.filter(de=>de.id!==Ie)}))},P=ae=>{const Ie=S2();C(Ie),q({time:"12:00",title:"",description:"",category:"activity",estimatedCost:0})},A=ae=>{Z.trim()&&pe(ae,Ie=>({...Ie,title:Z.trim()})),B(!1)},I=r.itinerary.flatMap(ae=>ae.activities),k=I.reduce((ae,Ie)=>ae+(Ie.estimatedCost||0),0)*r.travelers,D=r.budget-k,S=D<0,ne=Math.min(100,r.budget>0?k/r.budget*100:0);if(r.itinerary.length===0)return g.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[g.jsx("div",{className:"w-16 h-16 bg-indigo-500/10 border border-indigo-500/20 rounded-2xl flex items-center justify-center mb-5",children:g.jsx("span",{className:"text-3xl",children:""})}),g.jsx("h3",{className:"text-xl font-semibold text-gray-200 mb-2",children:"No itinerary yet"}),g.jsx("p",{className:"text-gray-500 max-w-sm mb-6 leading-relaxed",children:i?"AI will create a personalized day-by-day schedule based on your destination, interests, and travel dates.":"Add activities manually using the button below, or set up your Perplexity API key to generate one with AI."}),m&&g.jsx("div",{className:"mb-5 text-sm text-red-300 bg-red-500/10 border border-red-500/20 rounded-xl px-4 py-3 max-w-sm",children:m}),i?g.jsxs("button",{onClick:ge,disabled:l,className:"flex items-center gap-2 px-6 py-3 bg-indigo-600 hover:bg-indigo-500 disabled:opacity-60 rounded-xl font-medium transition",children:[l?g.jsx(En,{className:"w-5 h-5 animate-spin"}):g.jsx(_o,{className:"w-5 h-5"}),l?"Generating itinerary":"Generate Itinerary"]}):g.jsxs("button",{onClick:o,className:"flex items-center gap-2 px-5 py-2.5 bg-gray-800 hover:bg-gray-700 border border-gray-700 rounded-xl text-sm text-gray-300 transition",children:[g.jsx(bo,{className:"w-4 h-4"}),"Set up AI in Settings"]})]});const Se=r.itinerary[_];return g.jsxs("div",{className:"space-y-4",children:[k>0&&g.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl px-5 py-4",children:[g.jsxs("div",{className:"flex items-center justify-between mb-2 text-sm",children:[g.jsx("span",{className:"text-gray-400 font-medium",children:"Provisional budget"}),g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsxs("span",{className:"text-gray-400",children:[g.jsxs("span",{className:"text-gray-200 font-semibold",children:[r.currency," ",k.toLocaleString()]}),g.jsxs("span",{className:"text-gray-600",children:[" / ",r.currency," ",r.budget.toLocaleString()]})]}),g.jsxs("span",{className:`text-xs font-medium px-2 py-0.5 rounded-full ${S?"bg-red-500/15 text-red-300 border border-red-500/25":"bg-emerald-500/15 text-emerald-300 border border-emerald-500/25"}`,children:[S?" ":" ",r.currency," ",Math.abs(D).toLocaleString()," ",S?"over":"left"]})]})]}),g.jsx("div",{className:"h-2 bg-gray-800 rounded-full overflow-hidden",children:g.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${S?"bg-red-500":ne>80?"bg-amber-500":"bg-emerald-500"}`,style:{width:`${ne}%`}})}),g.jsxs("p",{className:"text-xs text-gray-600 mt-1.5",children:["Based on ",I.filter(ae=>ae.estimatedCost>0).length," activities with cost estimates  ",r.travelers," traveler(s)"]})]}),g.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:gap-5",children:[g.jsxs("div",{className:"md:w-24 md:shrink-0",children:[g.jsxs("div",{className:"flex md:flex-col gap-1 overflow-x-auto md:overflow-visible scrollbar-hide pb-1 md:pb-0 md:space-y-1",children:[r.itinerary.map((ae,Ie)=>{const Y=new Date(ae.date+"T12:00:00"),de=Ie===_;return g.jsxs("button",{onClick:()=>{E(Ie),C(null)},className:`shrink-0 md:w-full text-center px-3 md:px-2 py-2 md:py-2.5 rounded-xl transition ${de?"bg-indigo-600 text-white":"text-gray-400 hover:bg-gray-800 hover:text-gray-200"}`,children:[g.jsx("p",{className:"text-xs font-medium opacity-80",children:Y.toLocaleDateString("en",{weekday:"short"})}),g.jsx("p",{className:"text-base md:text-xl font-bold leading-tight",children:Y.getDate()}),g.jsx("p",{className:"text-xs opacity-60 hidden md:block",children:Y.toLocaleDateString("en",{month:"short"})})]},ae.id)}),i?g.jsxs("button",{onClick:ge,disabled:l,className:"md:hidden shrink-0 flex flex-col items-center justify-center gap-0.5 px-3 py-2 text-gray-600 hover:text-gray-400 hover:bg-gray-800 rounded-xl transition",children:[l?g.jsx(En,{className:"w-3.5 h-3.5 animate-spin"}):g.jsx(_o,{className:"w-3.5 h-3.5"}),g.jsx("span",{className:"text-xs",children:"Regen"})]}):g.jsxs("button",{onClick:o,className:"md:hidden shrink-0 flex flex-col items-center justify-center gap-0.5 px-3 py-2 text-gray-700 hover:text-gray-500 hover:bg-gray-800 rounded-xl transition",title:"Set up AI key",children:[g.jsx(Es,{className:"w-3.5 h-3.5"}),g.jsx("span",{className:"text-xs",children:"AI"})]})]}),i?g.jsxs("button",{onClick:ge,disabled:l,title:"Regenerate itinerary",className:"hidden md:flex w-full mt-1 p-2 text-xs text-gray-600 hover:text-gray-400 hover:bg-gray-800 rounded-xl transition items-center justify-center gap-1",children:[l?g.jsx(En,{className:"w-3.5 h-3.5 animate-spin"}):g.jsx(_o,{className:"w-3.5 h-3.5"}),"Regen"]}):g.jsxs("button",{onClick:o,title:"Set up Perplexity key to regenerate",className:"hidden md:flex w-full mt-1 p-2 text-xs text-gray-700 hover:text-gray-500 hover:bg-gray-800 rounded-xl transition items-center justify-center gap-1",children:[g.jsx(Es,{className:"w-3.5 h-3.5"}),"Regen"]})]}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsxs("div",{className:"flex items-start justify-between mb-4",children:[g.jsxs("div",{className:"flex-1 min-w-0",children:[W?g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{value:Z,onChange:ae=>te(ae.target.value),onKeyDown:ae=>{ae.key==="Enter"&&A(Se.id),ae.key==="Escape"&&B(!1)},className:"flex-1 bg-gray-800 border border-indigo-500 rounded-lg px-3 py-1.5 text-gray-100 text-base font-semibold focus:outline-none",autoFocus:!0}),g.jsx("button",{onClick:()=>A(Se.id),className:"p-1.5 text-emerald-400 hover:bg-gray-800 rounded-lg transition",children:g.jsx(wc,{className:"w-4 h-4"})}),g.jsx("button",{onClick:()=>B(!1),className:"p-1.5 text-gray-500 hover:bg-gray-800 rounded-lg transition",children:g.jsx(wf,{className:"w-4 h-4"})})]}):g.jsxs("button",{onClick:()=>{B(!0),te(Se.title)},className:"group flex items-center gap-2 text-left",children:[g.jsx("h3",{className:"text-lg font-semibold text-gray-100 group-hover:text-white",children:Se.title}),g.jsx(ry,{className:"w-3.5 h-3.5 text-gray-600 group-hover:text-gray-400 opacity-0 group-hover:opacity-100 transition"})]}),g.jsx("p",{className:"text-sm text-gray-400 mt-0.5",children:new Date(Se.date+"T12:00:00").toLocaleDateString("en",{weekday:"long",month:"long",day:"numeric"})})]}),(()=>{const ae=Se.activities.reduce((Ie,Y)=>Ie+(Y.estimatedCost||0),0)*r.travelers;return ae>0?g.jsxs("span",{className:"text-xs text-gray-400 bg-gray-800 px-3 py-1.5 rounded-lg shrink-0 ml-3 font-medium",children:[r.currency," ",ae.toLocaleString()," est."]}):null})()]}),g.jsxs("div",{className:"space-y-2.5",children:[Se.activities.map(ae=>{const{Icon:Ie,cls:Y}=l0[ae.category]??l0.free;return T===ae.id?g.jsx(u0,{value:F,onChange:q,onSave:()=>ie(Se.id),onCancel:()=>{C(null),q({})}},ae.id):g.jsxs("div",{className:"group flex gap-3 bg-gray-900 border border-gray-800 hover:border-gray-700 rounded-xl p-4 transition",children:[g.jsx("div",{className:`p-2 rounded-lg border shrink-0 ${Y}`,children:g.jsx(Ie,{className:"w-4 h-4"})}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsxs("div",{className:"flex items-center gap-2 justify-between",children:[g.jsx("h4",{className:"font-medium text-gray-200 truncate",children:ae.title}),g.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[g.jsxs("span",{className:"text-xs text-gray-500 flex items-center gap-0.5 mr-1",children:[g.jsx(_I,{className:"w-3 h-3"}),ae.time]}),g.jsx("button",{onClick:()=>{C(ae.id),q({...ae})},className:"opacity-0 group-hover:opacity-100 p-1.5 text-gray-500 hover:text-indigo-400 hover:bg-gray-800 rounded-lg transition",title:"Edit activity",children:g.jsx(ry,{className:"w-3.5 h-3.5"})}),g.jsx("button",{onClick:()=>ve(Se.id,ae.id),className:"opacity-0 group-hover:opacity-100 p-1.5 text-gray-500 hover:text-red-400 hover:bg-gray-800 rounded-lg transition",title:"Delete activity",children:g.jsx(xc,{className:"w-3.5 h-3.5"})})]})]}),g.jsx("p",{className:"text-sm text-gray-400 mt-0.5 leading-relaxed",children:ae.description}),ae.estimatedCost>0&&g.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["~",r.currency,ae.estimatedCost," /person  ",r.currency,(ae.estimatedCost*r.travelers).toLocaleString()," total"]})]})]},ae.id)}),T&&!Se.activities.find(ae=>ae.id===T)&&g.jsx(u0,{value:F,onChange:q,onSave:()=>ie(Se.id),onCancel:()=>{C(null),q({})}}),!T&&g.jsxs("button",{onClick:()=>P(Se.id),className:"w-full flex items-center justify-center gap-2 py-3 border border-dashed border-gray-700 hover:border-indigo-500/50 hover:bg-indigo-500/5 rounded-xl text-sm text-gray-500 hover:text-indigo-400 transition",children:[g.jsx(Md,{className:"w-4 h-4"}),"Add activity"]})]}),m&&g.jsx("div",{className:"mt-4 text-sm text-red-300 bg-red-500/10 border border-red-500/20 rounded-xl px-4 py-3",children:m})]})]})]})}const k2={Documents:"",Clothing:"",Toiletries:"",Electronics:"","Health & Safety":"",Activities:"",Miscellaneous:""};function C2({trip:r,onGenerate:e,onUpdate:t,hasAiKey:i,onSettingsClick:o}){const[l,h]=he.useState(!1),[m,y]=he.useState(""),_=async()=>{h(!0),y("");try{await e(r)}catch(Z){y(Z instanceof Error?Z.message:"Failed to generate packing list")}finally{h(!1)}},E=Z=>{t({...r,packingList:r.packingList.map(te=>te.id===Z?{...te,packed:!te.packed}:te)})},T=()=>{t({...r,packingList:r.packingList.map(Z=>({...Z,packed:!0}))})},C=()=>{t({...r,packingList:r.packingList.map(Z=>({...Z,packed:!1}))})};if(r.packingList.length===0)return g.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[g.jsx("div",{className:"w-16 h-16 bg-indigo-500/10 border border-indigo-500/20 rounded-2xl flex items-center justify-center mb-5",children:g.jsx("span",{className:"text-3xl",children:""})}),g.jsx("h3",{className:"text-xl font-semibold text-gray-200 mb-2",children:"No packing list yet"}),g.jsx("p",{className:"text-gray-500 max-w-sm mb-6 leading-relaxed",children:i?"AI will create a smart, categorized packing list tailored to your destination, activities, and trip duration.":"Set up your Perplexity API key to generate a smart packing list with AI."}),m&&g.jsx("div",{className:"mb-5 text-sm text-red-300 bg-red-500/10 border border-red-500/20 rounded-xl px-4 py-3 max-w-sm",children:m}),i?g.jsxs("button",{onClick:_,disabled:l,className:"flex items-center gap-2 px-6 py-3 bg-indigo-600 hover:bg-indigo-500 disabled:opacity-60 rounded-xl font-medium transition",children:[l?g.jsx(En,{className:"w-5 h-5 animate-spin"}):g.jsx(_o,{className:"w-5 h-5"}),l?"Generating packing list":"Generate Packing List"]}):g.jsxs("button",{onClick:o,className:"flex items-center gap-2 px-5 py-2.5 bg-gray-800 hover:bg-gray-700 border border-gray-700 rounded-xl text-sm text-gray-300 transition",children:[g.jsx(bo,{className:"w-4 h-4"}),"Set up AI in Settings"]})]});const F=r.packingList.filter(Z=>Z.packed).length,q=r.packingList.length,W=q>0?Math.round(F/q*100):0,B=[...new Set(r.packingList.map(Z=>Z.category))];return g.jsxs("div",{className:"space-y-5",children:[g.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-5",children:[g.jsxs("div",{className:"flex items-center justify-between mb-3",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"font-semibold text-gray-200",children:"Packing Progress"}),g.jsxs("p",{className:"text-sm text-gray-500 mt-0.5",children:[F," of ",q," items packed"]})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("button",{onClick:C,className:"text-xs text-gray-500 hover:text-gray-300 px-3 py-1.5 rounded-lg hover:bg-gray-800 transition",children:"Unpack all"}),g.jsx("button",{onClick:T,className:"text-xs text-indigo-400 hover:text-indigo-300 px-3 py-1.5 rounded-lg hover:bg-gray-800 transition",children:"Pack all"})]})]}),g.jsx("div",{className:"h-2 bg-gray-800 rounded-full overflow-hidden",children:g.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${W===100?"bg-emerald-500":"bg-indigo-500"}`,style:{width:`${W}%`}})}),g.jsxs("div",{className:"flex items-center justify-between mt-2",children:[g.jsxs("span",{className:"text-xs text-gray-500",children:[W,"% packed"]}),W===100&&g.jsx("span",{className:"text-xs text-emerald-400 font-medium",children:"All packed! "}),i?g.jsxs("button",{onClick:_,disabled:l,className:"text-xs text-gray-500 hover:text-indigo-400 flex items-center gap-1 transition",children:[l?g.jsx(En,{className:"w-3 h-3 animate-spin"}):g.jsx(_o,{className:"w-3 h-3"}),"Regenerate"]}):g.jsxs("button",{onClick:o,className:"text-xs text-gray-700 hover:text-gray-500 flex items-center gap-1 transition",title:"Set up Perplexity key to regenerate",children:[g.jsx(Es,{className:"w-3 h-3"}),"Regenerate"]})]})]}),m&&g.jsx("div",{className:"text-sm text-red-300 bg-red-500/10 border border-red-500/20 rounded-xl px-4 py-3",children:m}),(()=>{const Z=r.packingList.filter(te=>te.essential&&!te.packed);return Z.length>0?g.jsxs("div",{className:"flex items-start gap-3 bg-amber-500/10 border border-amber-500/20 rounded-xl p-4",children:[g.jsx(gI,{className:"w-4 h-4 text-amber-400 shrink-0 mt-0.5"}),g.jsxs("div",{children:[g.jsxs("p",{className:"text-sm font-medium text-amber-300",children:[Z.length," essential item",Z.length!==1?"s":""," not packed"]}),g.jsxs("p",{className:"text-xs text-amber-400/70 mt-0.5",children:[Z.slice(0,3).map(te=>te.name).join(", "),Z.length>3?` and ${Z.length-3} more`:""]})]})]}):null})(),B.map(Z=>{const te=r.packingList.filter(ie=>ie.category===Z),ge=te.filter(ie=>ie.packed).length,pe=k2[Z]??"";return g.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl overflow-hidden",children:[g.jsxs("div",{className:"px-5 py-3 border-b border-gray-800 flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"text-base",children:pe}),g.jsx("h4",{className:"font-medium text-gray-300 text-sm",children:Z})]}),g.jsxs("span",{className:"text-xs text-gray-500",children:[ge,"/",te.length]})]}),g.jsx("div",{className:"divide-y divide-gray-800/50",children:te.map(ie=>g.jsxs("button",{onClick:()=>E(ie.id),className:"w-full flex items-center gap-3 px-5 py-3 hover:bg-gray-800/50 transition text-left",children:[g.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center shrink-0 transition-colors ${ie.packed?"bg-indigo-600 border-indigo-600":"border-gray-600 hover:border-gray-400"}`,children:ie.packed&&g.jsx(wc,{className:"w-3 h-3 text-white",strokeWidth:3})}),g.jsx("span",{className:`flex-1 text-sm transition-colors ${ie.packed?"text-gray-600 line-through":"text-gray-200"}`,children:ie.name}),g.jsxs("div",{className:"flex items-center gap-1.5 shrink-0",children:[ie.quantity>1&&g.jsxs("span",{className:"text-xs text-gray-500",children:["",ie.quantity]}),ie.essential&&!ie.packed&&g.jsx("span",{className:"text-xs text-amber-400 bg-amber-500/10 border border-amber-500/20 px-1.5 py-0.5 rounded",children:"essential"})]})]},ie.id))})]},Z)})]})}const N2=["What are the must-try local foods?","Best way to get around the city?","What should I know about local customs?","Hidden gems most tourists miss?","Best time of day to visit popular sites?","Safety tips for this destination?"];function kd(){return Math.random().toString(36).slice(2,9)}function R2({trip:r,apiKey:e,hasAiKey:t,onSettingsClick:i,getChatHistory:o,saveChatHistory:l}){const[h,m]=he.useState([]),[y,_]=he.useState(""),[E,T]=he.useState(!1),C=he.useRef(null),F=he.useRef(null);he.useEffect(()=>{let B=!1;return o(r.id).then(Z=>{B||m(Z)}),()=>{B=!0}},[r.id]),he.useEffect(()=>{var B;(B=C.current)==null||B.scrollIntoView({behavior:"smooth"})},[h]);const q=async B=>{var ge;if(!B.trim()||E)return;const Z={id:kd(),role:"user",content:B.trim(),timestamp:new Date().toISOString()},te=[...h,Z];m(te),_(""),T(!0),(ge=F.current)==null||ge.focus();try{const pe=h.map(A=>({role:A.role,content:A.content})),ie=await y2(B.trim(),pe,r,e),ve={id:kd(),role:"assistant",content:ie,timestamp:new Date().toISOString()},P=[...te,ve];m(P),await l(r.id,P)}catch(pe){const ie=pe instanceof Error?pe.message:"Something went wrong",ve={id:kd(),role:"assistant",content:`Sorry, I ran into an error: ${ie}`,timestamp:new Date().toISOString()},P=[...te,ve];m(P),await l(r.id,P)}finally{T(!1)}},W=async()=>{confirm("Clear chat history?")&&(m([]),await l(r.id,[]))};return t?g.jsxs("div",{className:"flex flex-col",style:{height:"calc(100dvh - 300px)",minHeight:"280px"},children:[g.jsxs("div",{className:"flex items-center justify-between pb-3 mb-3 border-b border-gray-800",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"w-7 h-7 bg-indigo-500/20 rounded-lg flex items-center justify-center",children:g.jsx(Du,{className:"w-4 h-4 text-indigo-400"})}),g.jsx("span",{className:"text-sm font-medium text-gray-300",children:"AI Travel Assistant"}),g.jsx("span",{className:"text-xs text-emerald-400 bg-emerald-500/10 px-2 py-0.5 rounded-full",children:"Online"})]}),h.length>0&&g.jsx("button",{onClick:W,className:"p-1.5 text-gray-600 hover:text-gray-400 hover:bg-gray-800 rounded-lg transition",title:"Clear chat",children:g.jsx(xc,{className:"w-4 h-4"})})]}),g.jsxs("div",{className:"flex-1 overflow-y-auto space-y-4",children:[h.length===0&&g.jsxs("div",{className:"flex flex-col items-center text-center pt-6 pb-4",children:[g.jsx("div",{className:"w-14 h-14 bg-indigo-500/10 border border-indigo-500/20 rounded-2xl flex items-center justify-center mb-3",children:g.jsx(Du,{className:"w-7 h-7 text-indigo-400"})}),g.jsxs("p",{className:"font-medium text-gray-300 mb-1",children:["Ask me anything about ",r.destination]}),g.jsx("p",{className:"text-sm text-gray-500 mb-5 max-w-sm",children:"I know your trip details, interests, and budget. Let me help you plan the perfect experience."}),g.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:N2.map(B=>g.jsx("button",{onClick:()=>q(B),className:"text-sm text-indigo-300 bg-indigo-500/10 hover:bg-indigo-500/20 border border-indigo-500/20 hover:border-indigo-500/40 px-3 py-1.5 rounded-full transition",children:B},B))})]}),h.map(B=>g.jsxs("div",{className:`flex gap-2.5 ${B.role==="user"?"flex-row-reverse":"flex-row"}`,children:[g.jsx("div",{className:`w-7 h-7 rounded-lg flex items-center justify-center shrink-0 mt-0.5 ${B.role==="assistant"?"bg-indigo-500/20":"bg-gray-700"}`,children:B.role==="assistant"?g.jsx(Du,{className:"w-3.5 h-3.5 text-indigo-400"}):g.jsx(NI,{className:"w-3.5 h-3.5 text-gray-300"})}),g.jsx("div",{className:`max-w-[78%] rounded-2xl px-4 py-3 text-sm leading-relaxed whitespace-pre-wrap ${B.role==="user"?"bg-indigo-600 text-white rounded-tr-sm":"bg-gray-900 border border-gray-800 text-gray-200 rounded-tl-sm"}`,children:B.content})]},B.id)),E&&g.jsxs("div",{className:"flex gap-2.5",children:[g.jsx("div",{className:"w-7 h-7 rounded-lg bg-indigo-500/20 flex items-center justify-center shrink-0",children:g.jsx(Du,{className:"w-3.5 h-3.5 text-indigo-400"})}),g.jsx("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl rounded-tl-sm px-4 py-3",children:g.jsxs("div",{className:"flex gap-1 items-center h-4",children:[g.jsx("span",{className:"w-1.5 h-1.5 bg-gray-500 rounded-full animate-bounce [animation-delay:0ms]"}),g.jsx("span",{className:"w-1.5 h-1.5 bg-gray-500 rounded-full animate-bounce [animation-delay:150ms]"}),g.jsx("span",{className:"w-1.5 h-1.5 bg-gray-500 rounded-full animate-bounce [animation-delay:300ms]"})]})})]}),g.jsx("div",{ref:C})]}),g.jsx("div",{className:"pt-4 border-t border-gray-800",children:g.jsxs("form",{onSubmit:B=>{B.preventDefault(),q(y)},className:"flex gap-2",children:[g.jsx("input",{ref:F,value:y,onChange:B=>_(B.target.value),placeholder:`Ask about ${r.destination}...`,disabled:E,className:"flex-1 bg-gray-900 border border-gray-700 rounded-xl px-4 py-3 text-gray-100 placeholder-gray-600 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition disabled:opacity-50 text-sm"}),g.jsx("button",{type:"submit",disabled:!y.trim()||E,className:"p-3 bg-indigo-600 hover:bg-indigo-500 disabled:opacity-40 disabled:cursor-not-allowed rounded-xl transition shrink-0",children:E?g.jsx(En,{className:"w-5 h-5 animate-spin"}):g.jsx(AI,{className:"w-5 h-5"})})]})})]}):g.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[g.jsx("div",{className:"w-16 h-16 bg-gray-800 border border-gray-700 rounded-2xl flex items-center justify-center mb-5",children:g.jsx(Es,{className:"w-7 h-7 text-gray-500"})}),g.jsx("h3",{className:"text-lg font-semibold text-gray-400 mb-2",children:"AI Chat unavailable"}),g.jsxs("p",{className:"text-gray-600 max-w-sm mb-6 leading-relaxed text-sm",children:["Add your Perplexity API key to chat with an AI assistant about your trip to ",r.destination,"."]}),g.jsxs("button",{onClick:i,className:"flex items-center gap-2 px-5 py-2.5 bg-gray-800 hover:bg-gray-700 border border-gray-700 rounded-xl text-sm text-gray-300 transition",children:[g.jsx(bo,{className:"w-4 h-4"}),"Set up in Settings"]})]})}const c0=[{id:"overview",label:"Overview",emoji:""},{id:"itinerary",label:"Itinerary",emoji:""},{id:"packing",label:"Packing",emoji:""},{id:"chat",label:"AI Chat",emoji:"",aiOnly:!0}],P2={planning:"upcoming",upcoming:"completed",completed:"planning"},b2={planning:"bg-amber-500/20 border-amber-500/30 text-amber-300 hover:bg-amber-500/30",upcoming:"bg-blue-500/20 border-blue-500/30 text-blue-300 hover:bg-blue-500/30",completed:"bg-emerald-500/20 border-emerald-500/30 text-emerald-300 hover:bg-emerald-500/30"};function D2({trip:r,activeTab:e,onTabChange:t,onBack:i,onDelete:o,onGenerateItinerary:l,onGeneratePackingList:h,onUpdateTrip:m,getChatHistory:y,saveChatHistory:_,apiKey:E,hasAiKey:T,onSettingsClick:C}){const F=new Date(r.startDate+"T12:00:00"),q=new Date(r.endDate+"T12:00:00"),W=Math.ceil((q.getTime()-F.getTime())/864e5)+1,B=()=>{confirm(`Delete "${r.name}"? This cannot be undone.`)&&o(r.id)},Z=()=>m({...r,status:P2[r.status]}),te=r.itinerary.reduce((I,R)=>I+R.activities.length,0),ge=r.packingList.filter(I=>I.packed).length,pe=r.itinerary.flatMap(I=>I.activities).reduce((I,R)=>I+(R.estimatedCost||0),0),ie=pe*r.travelers,ve=r.budget-ie,P=Math.min(100,r.budget>0?ie/r.budget*100:0),A=ve<0;return g.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-950 pb-16 md:pb-0",children:[g.jsxs("div",{className:`bg-gradient-to-br ${r.coverGradient} relative`,children:[g.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/20 via-transparent to-black/50"}),g.jsxs("div",{className:"relative max-w-5xl mx-auto px-4 md:px-6 pt-4 flex items-center justify-between",children:[g.jsx("button",{onClick:i,className:"p-2 text-white/70 hover:text-white hover:bg-white/10 rounded-lg transition",children:g.jsx(jd,{className:"w-5 h-5"})}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("button",{onClick:C,className:"relative p-2 text-white/50 hover:text-white hover:bg-white/10 rounded-lg transition",title:"API Settings",children:[g.jsx(bo,{className:"w-4 h-4"}),!T&&g.jsx("span",{className:"absolute top-1.5 right-1.5 w-1.5 h-1.5 bg-amber-400 rounded-full"})]}),g.jsxs("button",{onClick:Z,className:`text-xs px-2.5 py-1.5 rounded-full font-medium border transition ${b2[r.status]}`,children:[g.jsx(SI,{className:"w-3 h-3 inline mr-1"}),r.status]}),g.jsx("button",{onClick:B,className:"p-2 text-white/40 hover:text-red-300 hover:bg-red-500/20 rounded-lg transition",children:g.jsx(xc,{className:"w-4 h-4"})})]})]}),g.jsx("div",{className:"relative max-w-5xl mx-auto px-4 md:px-6 pt-3 pb-4 md:pb-5",children:g.jsxs("div",{className:"flex items-start gap-3",children:[g.jsx("span",{className:"text-4xl md:text-5xl drop-shadow-lg shrink-0 mt-0.5",children:r.emoji}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("h1",{className:"text-xl md:text-2xl font-bold text-white leading-tight",children:r.name}),g.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5 text-white/70",children:[g.jsx(Ec,{className:"w-3.5 h-3.5 shrink-0"}),g.jsx("span",{className:"text-sm truncate",children:r.destination})]}),g.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-white/60 overflow-x-auto scrollbar-hide",children:[g.jsxs("span",{className:"flex items-center gap-1 shrink-0",children:[g.jsx(gf,{className:"w-3.5 h-3.5"}),F.toLocaleDateString("en",{month:"short",day:"numeric"})," "," ",q.toLocaleDateString("en",{month:"short",day:"numeric",year:"numeric"}),g.jsxs("span",{className:"text-white/30 ml-1",children:["(",W,"d)"]})]}),g.jsxs("span",{className:"flex items-center gap-1 shrink-0",children:[g.jsx(_f,{className:"w-3.5 h-3.5"}),r.travelers]}),g.jsxs("span",{className:"flex items-center gap-1 shrink-0",children:[g.jsx(yf,{className:"w-3.5 h-3.5"}),r.currency," ",r.budget.toLocaleString()]})]})]})]})}),g.jsx("div",{className:"hidden md:block relative max-w-5xl mx-auto px-6 pb-0",children:g.jsx("div",{className:"flex gap-1 w-fit",children:c0.map(I=>{const R=I.aiOnly&&!T;return g.jsxs("button",{onClick:()=>!R&&t(I.id),disabled:R,className:`px-4 py-2.5 rounded-t-xl text-sm font-medium transition flex items-center gap-1.5 ${R?"text-white/30 cursor-not-allowed":e===I.id?"bg-gray-950 text-white":"text-white/60 hover:text-white/90 hover:bg-white/10"}`,children:[g.jsx("span",{children:I.emoji}),I.label,R&&g.jsx(Es,{className:"w-3 h-3"})]},I.id)})})})]}),g.jsxs("div",{className:"flex-1 max-w-5xl mx-auto w-full px-4 md:px-6 py-5 md:py-6",children:[e==="overview"&&g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-5 md:p-6",children:[g.jsx("h3",{className:"font-semibold text-gray-200 mb-2",children:"About this trip"}),g.jsx("p",{className:"text-gray-400 leading-relaxed text-sm md:text-base",children:r.description})]}),g.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[{label:"Days",value:W,suffix:""},{label:"Activities",value:te||"",suffix:""},{label:"Items packed",value:ge||"",suffix:r.packingList.length>0?`/${r.packingList.length}`:""},{label:"Interests",value:r.interests.length,suffix:""}].map(({label:I,value:R,suffix:k})=>g.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-4 md:p-5 text-center",children:[g.jsxs("p",{className:"text-xl md:text-2xl font-bold text-indigo-400",children:[R,k&&g.jsx("span",{className:"text-sm text-gray-500",children:k})]}),g.jsx("p",{className:"text-xs text-gray-500 mt-1",children:I})]},I))}),g.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-5 md:p-6",children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsx("h3",{className:"font-semibold text-gray-200",children:"Provisional Budget"}),g.jsx("span",{className:`text-xs font-medium px-2.5 py-1 rounded-full border ${ie===0?"bg-gray-800 text-gray-500 border-gray-700":A?"bg-red-500/15 text-red-300 border-red-500/25":"bg-emerald-500/15 text-emerald-300 border-emerald-500/25"}`,children:ie===0?"No estimates yet":A?` ${r.currency}${Math.abs(ve).toLocaleString()} over`:` ${r.currency}${ve.toLocaleString()} left`})]}),g.jsx("div",{className:"grid grid-cols-3 gap-2 md:gap-3 mb-4 text-center",children:[{label:"Allocated",val:`${r.currency} ${r.budget.toLocaleString()}`,color:"text-gray-200"},{label:"Est. spend",val:`${r.currency} ${ie.toLocaleString()}`,color:ie===0?"text-gray-500":A?"text-red-400":"text-gray-200"},{label:"Remaining",val:ie===0?"":`${r.currency} ${ve.toLocaleString()}`,color:ie===0?"text-gray-500":A?"text-red-400":"text-emerald-400"}].map(({label:I,val:R,color:k})=>g.jsxs("div",{className:"bg-gray-800/60 rounded-xl p-3",children:[g.jsx("p",{className:"text-xs text-gray-500 mb-1",children:I}),g.jsx("p",{className:`font-semibold text-sm ${k}`,children:R})]},I))}),g.jsx("div",{className:"h-2 bg-gray-800 rounded-full overflow-hidden",children:g.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${A?"bg-red-500":P>80?"bg-amber-500":"bg-emerald-500"}`,style:{width:`${P}%`}})}),g.jsx("p",{className:"text-xs text-gray-600 mt-2",children:ie===0?"Add cost estimates to activities to track spending.":`${r.currency}${pe.toLocaleString()} /person  ${r.travelers} traveler(s)`})]}),g.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-5 md:p-6",children:[g.jsx("h3",{className:"font-semibold text-gray-200 mb-3",children:"Interests"}),g.jsx("div",{className:"flex flex-wrap gap-2",children:r.interests.map(I=>g.jsx("span",{className:"text-sm bg-indigo-500/15 text-indigo-300 border border-indigo-500/25 px-3 py-1 rounded-full",children:I},I))})]}),g.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[{tab:"itinerary",emoji:"",title:"Itinerary",desc:r.itinerary.length?`${W} days planned`:"View & edit day-by-day",locked:!1},{tab:"packing",emoji:"",title:"Packing",desc:r.packingList.length?`${ge}/${r.packingList.length} packed`:"View packing list",locked:!1},{tab:"chat",emoji:"",title:"AI Chat",desc:T?"Ask anything about your trip":"Requires Perplexity API key",locked:!T}].map(({tab:I,emoji:R,title:k,desc:D,locked:S})=>g.jsxs("button",{onClick:()=>!S&&t(I),disabled:S,className:`flex items-center gap-3 bg-gray-900 border rounded-2xl p-4 text-left transition group ${S?"border-gray-800 opacity-50 cursor-not-allowed":"border-gray-800 hover:border-gray-600"}`,children:[g.jsx("span",{className:`text-2xl ${S?"grayscale":""}`,children:R}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsxs("p",{className:`font-medium text-sm flex items-center gap-1.5 ${S?"text-gray-500":"text-gray-200 group-hover:text-white transition"}`,children:[k,S&&g.jsx(Es,{className:"w-3 h-3"})]}),g.jsx("p",{className:"text-xs text-gray-500 truncate",children:D})]})]},I))})]}),e==="itinerary"&&g.jsx(A2,{trip:r,onGenerate:l,onUpdate:m,hasAiKey:T,onSettingsClick:C}),e==="packing"&&g.jsx(C2,{trip:r,onGenerate:h,onUpdate:m,hasAiKey:T,onSettingsClick:C}),e==="chat"&&g.jsx(R2,{trip:r,apiKey:E,hasAiKey:T,onSettingsClick:C,getChatHistory:y,saveChatHistory:_})]}),g.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 z-30 bg-gray-900/95 backdrop-blur-md border-t border-gray-800",children:g.jsx("div",{className:"flex items-center justify-around px-2 pt-1 pb-2",children:c0.map(I=>{const R=I.aiOnly&&!T;return g.jsxs("button",{onClick:()=>!R&&t(I.id),disabled:R,className:`flex flex-col items-center gap-0.5 flex-1 py-1.5 rounded-xl transition ${R?"text-gray-700 cursor-not-allowed":e===I.id?"text-indigo-400":"text-gray-500"}`,children:[g.jsx("span",{className:`text-xl leading-none ${R?"grayscale opacity-40":""}`,children:I.emoji}),g.jsxs("span",{className:"text-[10px] font-medium flex items-center gap-0.5",children:[I.label,R&&g.jsx(Es,{className:"w-2.5 h-2.5"})]}),e===I.id&&!R&&g.jsx("span",{className:"w-1 h-1 bg-indigo-400 rounded-full"})]},I.id)})})})]})}function V2(){const[r,e]=he.useState([]),[t,i]=he.useState(!0),[o,l]=he.useState(!1),h=he.useRef(null);he.useEffect(()=>(i0(T=>{e(C=>[...C.slice(-49),T]),l(!0),setTimeout(()=>l(!1),2e3)}),()=>i0(null)),[]),he.useEffect(()=>{var T;t&&((T=h.current)==null||T.scrollIntoView({behavior:"smooth"}))},[r,t]);const m=r.filter(T=>T.status==="pending").length,y=r.length>0,_=T=>T==="pending"?g.jsx(En,{className:"w-3.5 h-3.5 text-indigo-400 animate-spin shrink-0"}):T==="success"?g.jsx(yI,{className:"w-3.5 h-3.5 text-emerald-400 shrink-0"}):g.jsx(vI,{className:"w-3.5 h-3.5 text-red-400 shrink-0"}),E=T=>T==="pending"?"border-l-indigo-500":T==="success"?"border-l-emerald-500":"border-l-red-500";return g.jsxs("div",{className:`fixed z-40 rounded-2xl border border-gray-700 shadow-2xl shadow-black/60 overflow-hidden transition-all duration-200
        bottom-[72px] left-3 right-3
        md:bottom-4 md:left-auto md:right-4 md:w-80 ${o?"ring-1 ring-indigo-500/40":""}`,children:[g.jsxs("button",{onClick:()=>i(T=>!T),className:"w-full flex items-center justify-between px-4 py-3 bg-gray-900 hover:bg-gray-800 transition",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(hI,{className:"w-4 h-4 text-indigo-400"}),g.jsx("span",{className:"text-sm font-medium text-gray-200",children:"Activity"}),m>0&&g.jsxs("span",{className:"flex items-center gap-1 text-xs text-indigo-300 bg-indigo-500/20 px-2 py-0.5 rounded-full",children:[g.jsx(En,{className:"w-2.5 h-2.5 animate-spin"}),m," running"]}),!t&&y&&m===0&&g.jsxs("span",{className:"text-xs text-gray-500",children:[r.length," events"]})]}),g.jsxs("div",{className:"flex items-center gap-1",children:[t&&y&&g.jsx("span",{onClick:T=>{T.stopPropagation(),e([])},className:"p-1 text-gray-600 hover:text-gray-400 rounded transition cursor-pointer",title:"Clear log",children:g.jsx(xc,{className:"w-3.5 h-3.5"})}),t?g.jsx(pI,{className:"w-4 h-4 text-gray-400"}):g.jsx(mI,{className:"w-4 h-4 text-gray-400"})]})]}),t&&g.jsxs("div",{className:"bg-gray-950 max-h-64 overflow-y-auto",children:[r.length===0?g.jsx("div",{className:"px-4 py-6 text-center text-xs text-gray-600",children:"No activity yet. Start by creating a trip or generating content."}):g.jsx("div",{className:"divide-y divide-gray-800/50",children:r.map(T=>g.jsx("div",{className:`px-4 py-2.5 border-l-2 ${E(T.status)}`,children:g.jsxs("div",{className:"flex items-start gap-2",children:[g.jsx("div",{className:"mt-0.5",children:_(T.status)}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("p",{className:"text-xs text-gray-300 leading-snug",children:T.message}),T.detail&&g.jsx("p",{className:"text-xs text-red-400 mt-0.5 leading-snug",children:T.detail}),g.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:new Date(T.timestamp).toLocaleTimeString("en",{hour:"2-digit",minute:"2-digit",second:"2-digit"})})]})]})},T.id))}),g.jsx("div",{ref:h})]})]})}function O2(){return Math.random().toString(36).slice(2,11)}function L2(){const{user:r,loading:e}=n2(),[t,i]=he.useState([]),[o,l]=he.useState("dashboard"),[h,m]=he.useState(null),[y,_]=he.useState("overview"),[E,T]=he.useState(""),[C,F]=he.useState(""),[q,W]=he.useState(!1);he.useEffect(()=>{if(!r){i([]),T(""),F(""),l("dashboard"),m(null);return}let k=!1;return Promise.all([s2(r.uid),l2(r.uid)]).then(([D,S])=>{k||(i(D),T(S.perplexityKey),F(S.anthropicKey))}),()=>{k=!0}},[r]);const B=async k=>{T(k.perplexityKey),F(k.anthropicKey),r&&await u2(r.uid,k)},Z=()=>Gx(mc),te=async k=>{if(!(r!=null&&r.email))return;const D=vi.credential(r.email,k);await Bx(r,D),await c2(r.uid),await Qx(r)},ge=async k=>{var ne;const D=await p2({...k,apiKey:E}),S={id:O2(),name:D.name,emoji:D.emoji,description:D.description,coverGradient:D.coverGradient,destination:k.destination,country:((ne=k.destination.split(",").pop())==null?void 0:ne.trim())??k.destination,startDate:k.startDate,endDate:k.endDate,travelers:k.travelers,budget:k.budget,currency:k.currency,interests:k.interests,itinerary:[],packingList:[],status:"planning",createdAt:new Date().toISOString()};return i(Se=>[...Se,S]),m(S),_("overview"),l("detail"),r&&await s0(r.uid,S),S},pe=async k=>{i(D=>D.map(S=>S.id===k.id?k:S)),m(k),r&&await s0(r.uid,k)},ie=async k=>{i(D=>D.filter(S=>S.id!==k)),l("dashboard"),m(null),r&&await i2(r.uid,k)},ve=async k=>{const D=await m2(k,E),S={...k,itinerary:D};return await pe(S),S},P=async k=>{const D=await g2(k,E),S={...k,packingList:D};return await pe(S),S},A=k=>r?o2(r.uid,k):Promise.resolve([]),I=(k,D)=>r?a2(r.uid,k,D):Promise.resolve();if(e)return g.jsx("div",{className:"min-h-screen bg-gray-950 flex items-center justify-center",children:g.jsx(En,{className:"w-8 h-8 text-indigo-400 animate-spin"})});if(!r)return g.jsx(_2,{});const R=!!E;return g.jsxs("div",{className:"min-h-screen bg-gray-950 text-gray-100 font-sans",children:[g.jsx(V2,{}),q&&g.jsx(w2,{onSave:B,existing:{perplexityKey:E,anthropicKey:C},onClose:()=>W(!1),onLogout:Z,onDeleteAccount:te}),o==="dashboard"&&g.jsx(E2,{trips:t,onNewTrip:()=>l("wizard"),onSelectTrip:k=>{m(k),_("overview"),l("detail")},onSettingsClick:()=>W(!0),hasAiKey:R}),o==="wizard"&&g.jsx(T2,{onBack:()=>l("dashboard"),onCreate:ge,hasAiKey:R,onSettingsClick:()=>W(!0)}),o==="detail"&&h&&g.jsx(D2,{trip:h,activeTab:y,onTabChange:_,onBack:()=>l("dashboard"),onDelete:ie,onGenerateItinerary:ve,onGeneratePackingList:P,onUpdateTrip:pe,getChatHistory:A,saveChatHistory:I,apiKey:E,hasAiKey:R,onSettingsClick:()=>W(!0)})]})}lE.createRoot(document.getElementById("root")).render(g.jsx(he.StrictMode,{children:g.jsx(L2,{})}));
