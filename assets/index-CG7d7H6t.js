(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const p of c.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&o(p)}).observe(document,{childList:!0,subtree:!0});function t(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(a){if(a.ep)return;a.ep=!0;const c=t(a);fetch(a.href,c)}})();function iv(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var xf={exports:{}},_u={},wf={exports:{}},rt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t_;function Vw(){if(t_)return rt;t_=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),p=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),T=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),k=Symbol.iterator;function N(W){return W===null||typeof W!="object"?null:(W=k&&W[k]||W["@@iterator"],typeof W=="function"?W:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,q={};function te(W,ne,Me){this.props=W,this.context=ne,this.refs=q,this.updater=Me||V}te.prototype.isReactComponent={},te.prototype.setState=function(W,ne){if(typeof W!="object"&&typeof W!="function"&&W!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,W,ne,"setState")},te.prototype.forceUpdate=function(W){this.updater.enqueueForceUpdate(this,W,"forceUpdate")};function ce(){}ce.prototype=te.prototype;function ge(W,ne,Me){this.props=W,this.context=ne,this.refs=q,this.updater=Me||V}var Te=ge.prototype=new ce;Te.constructor=ge,U(Te,te.prototype),Te.isPureReactComponent=!0;var Oe=Array.isArray,be=Object.prototype.hasOwnProperty,fe={current:null},F={key:!0,ref:!0,__self:!0,__source:!0};function D(W,ne,Me){var Ne,Se={},xe=null,Xe=null;if(ne!=null)for(Ne in ne.ref!==void 0&&(Xe=ne.ref),ne.key!==void 0&&(xe=""+ne.key),ne)be.call(ne,Ne)&&!F.hasOwnProperty(Ne)&&(Se[Ne]=ne[Ne]);var re=arguments.length-2;if(re===1)Se.children=Me;else if(1<re){for(var qe=Array(re),dt=0;dt<re;dt++)qe[dt]=arguments[dt+2];Se.children=qe}if(W&&W.defaultProps)for(Ne in re=W.defaultProps,re)Se[Ne]===void 0&&(Se[Ne]=re[Ne]);return{$$typeof:r,type:W,key:xe,ref:Xe,props:Se,_owner:fe.current}}function M(W,ne){return{$$typeof:r,type:W.type,key:ne,ref:W.ref,props:W.props,_owner:W._owner}}function B(W){return typeof W=="object"&&W!==null&&W.$$typeof===r}function j(W){var ne={"=":"=0",":":"=2"};return"$"+W.replace(/[=:]/g,function(Me){return ne[Me]})}var R=/\/+/g;function A(W,ne){return typeof W=="object"&&W!==null&&W.key!=null?j(""+W.key):ne.toString(36)}function ye(W,ne,Me,Ne,Se){var xe=typeof W;(xe==="undefined"||xe==="boolean")&&(W=null);var Xe=!1;if(W===null)Xe=!0;else switch(xe){case"string":case"number":Xe=!0;break;case"object":switch(W.$$typeof){case r:case e:Xe=!0}}if(Xe)return Xe=W,Se=Se(Xe),W=Ne===""?"."+A(Xe,0):Ne,Oe(Se)?(Me="",W!=null&&(Me=W.replace(R,"$&/")+"/"),ye(Se,ne,Me,"",function(dt){return dt})):Se!=null&&(B(Se)&&(Se=M(Se,Me+(!Se.key||Xe&&Xe.key===Se.key?"":(""+Se.key).replace(R,"$&/")+"/")+W)),ne.push(Se)),1;if(Xe=0,Ne=Ne===""?".":Ne+":",Oe(W))for(var re=0;re<W.length;re++){xe=W[re];var qe=Ne+A(xe,re);Xe+=ye(xe,ne,Me,qe,Se)}else if(qe=N(W),typeof qe=="function")for(W=qe.call(W),re=0;!(xe=W.next()).done;)xe=xe.value,qe=Ne+A(xe,re++),Xe+=ye(xe,ne,Me,qe,Se);else if(xe==="object")throw ne=String(W),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(W).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.");return Xe}function Ke(W,ne,Me){if(W==null)return W;var Ne=[],Se=0;return ye(W,Ne,"","",function(xe){return ne.call(Me,xe,Se++)}),Ne}function pe(W){if(W._status===-1){var ne=W._result;ne=ne(),ne.then(function(Me){(W._status===0||W._status===-1)&&(W._status=1,W._result=Me)},function(Me){(W._status===0||W._status===-1)&&(W._status=2,W._result=Me)}),W._status===-1&&(W._status=0,W._result=ne)}if(W._status===1)return W._result.default;throw W._result}var Ve={current:null},X={transition:null},ke={ReactCurrentDispatcher:Ve,ReactCurrentBatchConfig:X,ReactCurrentOwner:fe};function oe(){throw Error("act(...) is not supported in production builds of React.")}return rt.Children={map:Ke,forEach:function(W,ne,Me){Ke(W,function(){ne.apply(this,arguments)},Me)},count:function(W){var ne=0;return Ke(W,function(){ne++}),ne},toArray:function(W){return Ke(W,function(ne){return ne})||[]},only:function(W){if(!B(W))throw Error("React.Children.only expected to receive a single React element child.");return W}},rt.Component=te,rt.Fragment=t,rt.Profiler=a,rt.PureComponent=ge,rt.StrictMode=o,rt.Suspense=w,rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ke,rt.act=oe,rt.cloneElement=function(W,ne,Me){if(W==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+W+".");var Ne=U({},W.props),Se=W.key,xe=W.ref,Xe=W._owner;if(ne!=null){if(ne.ref!==void 0&&(xe=ne.ref,Xe=fe.current),ne.key!==void 0&&(Se=""+ne.key),W.type&&W.type.defaultProps)var re=W.type.defaultProps;for(qe in ne)be.call(ne,qe)&&!F.hasOwnProperty(qe)&&(Ne[qe]=ne[qe]===void 0&&re!==void 0?re[qe]:ne[qe])}var qe=arguments.length-2;if(qe===1)Ne.children=Me;else if(1<qe){re=Array(qe);for(var dt=0;dt<qe;dt++)re[dt]=arguments[dt+2];Ne.children=re}return{$$typeof:r,type:W.type,key:Se,ref:xe,props:Ne,_owner:Xe}},rt.createContext=function(W){return W={$$typeof:p,_currentValue:W,_currentValue2:W,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},W.Provider={$$typeof:c,_context:W},W.Consumer=W},rt.createElement=D,rt.createFactory=function(W){var ne=D.bind(null,W);return ne.type=W,ne},rt.createRef=function(){return{current:null}},rt.forwardRef=function(W){return{$$typeof:y,render:W}},rt.isValidElement=B,rt.lazy=function(W){return{$$typeof:b,_payload:{_status:-1,_result:W},_init:pe}},rt.memo=function(W,ne){return{$$typeof:T,type:W,compare:ne===void 0?null:ne}},rt.startTransition=function(W){var ne=X.transition;X.transition={};try{W()}finally{X.transition=ne}},rt.unstable_act=oe,rt.useCallback=function(W,ne){return Ve.current.useCallback(W,ne)},rt.useContext=function(W){return Ve.current.useContext(W)},rt.useDebugValue=function(){},rt.useDeferredValue=function(W){return Ve.current.useDeferredValue(W)},rt.useEffect=function(W,ne){return Ve.current.useEffect(W,ne)},rt.useId=function(){return Ve.current.useId()},rt.useImperativeHandle=function(W,ne,Me){return Ve.current.useImperativeHandle(W,ne,Me)},rt.useInsertionEffect=function(W,ne){return Ve.current.useInsertionEffect(W,ne)},rt.useLayoutEffect=function(W,ne){return Ve.current.useLayoutEffect(W,ne)},rt.useMemo=function(W,ne){return Ve.current.useMemo(W,ne)},rt.useReducer=function(W,ne,Me){return Ve.current.useReducer(W,ne,Me)},rt.useRef=function(W){return Ve.current.useRef(W)},rt.useState=function(W){return Ve.current.useState(W)},rt.useSyncExternalStore=function(W,ne,Me){return Ve.current.useSyncExternalStore(W,ne,Me)},rt.useTransition=function(){return Ve.current.useTransition()},rt.version="18.3.1",rt}var n_;function gp(){return n_||(n_=1,wf.exports=Vw()),wf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r_;function Fw(){if(r_)return _u;r_=1;var r=gp(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function p(y,w,T){var b,k={},N=null,V=null;T!==void 0&&(N=""+T),w.key!==void 0&&(N=""+w.key),w.ref!==void 0&&(V=w.ref);for(b in w)o.call(w,b)&&!c.hasOwnProperty(b)&&(k[b]=w[b]);if(y&&y.defaultProps)for(b in w=y.defaultProps,w)k[b]===void 0&&(k[b]=w[b]);return{$$typeof:e,type:y,key:N,ref:V,props:k,_owner:a.current}}return _u.Fragment=t,_u.jsx=p,_u.jsxs=p,_u}var i_;function zw(){return i_||(i_=1,xf.exports=Fw()),xf.exports}var _=zw(),ie=gp();const Ff=iv(ie);var Xc={},Ef={exports:{}},rr={},Tf={exports:{}},If={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s_;function Uw(){return s_||(s_=1,(function(r){function e(X,ke){var oe=X.length;X.push(ke);e:for(;0<oe;){var W=oe-1>>>1,ne=X[W];if(0<a(ne,ke))X[W]=ke,X[oe]=ne,oe=W;else break e}}function t(X){return X.length===0?null:X[0]}function o(X){if(X.length===0)return null;var ke=X[0],oe=X.pop();if(oe!==ke){X[0]=oe;e:for(var W=0,ne=X.length,Me=ne>>>1;W<Me;){var Ne=2*(W+1)-1,Se=X[Ne],xe=Ne+1,Xe=X[xe];if(0>a(Se,oe))xe<ne&&0>a(Xe,Se)?(X[W]=Xe,X[xe]=oe,W=xe):(X[W]=Se,X[Ne]=oe,W=Ne);else if(xe<ne&&0>a(Xe,oe))X[W]=Xe,X[xe]=oe,W=xe;else break e}}return ke}function a(X,ke){var oe=X.sortIndex-ke.sortIndex;return oe!==0?oe:X.id-ke.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var p=Date,y=p.now();r.unstable_now=function(){return p.now()-y}}var w=[],T=[],b=1,k=null,N=3,V=!1,U=!1,q=!1,te=typeof setTimeout=="function"?setTimeout:null,ce=typeof clearTimeout=="function"?clearTimeout:null,ge=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Te(X){for(var ke=t(T);ke!==null;){if(ke.callback===null)o(T);else if(ke.startTime<=X)o(T),ke.sortIndex=ke.expirationTime,e(w,ke);else break;ke=t(T)}}function Oe(X){if(q=!1,Te(X),!U)if(t(w)!==null)U=!0,pe(be);else{var ke=t(T);ke!==null&&Ve(Oe,ke.startTime-X)}}function be(X,ke){U=!1,q&&(q=!1,ce(D),D=-1),V=!0;var oe=N;try{for(Te(ke),k=t(w);k!==null&&(!(k.expirationTime>ke)||X&&!j());){var W=k.callback;if(typeof W=="function"){k.callback=null,N=k.priorityLevel;var ne=W(k.expirationTime<=ke);ke=r.unstable_now(),typeof ne=="function"?k.callback=ne:k===t(w)&&o(w),Te(ke)}else o(w);k=t(w)}if(k!==null)var Me=!0;else{var Ne=t(T);Ne!==null&&Ve(Oe,Ne.startTime-ke),Me=!1}return Me}finally{k=null,N=oe,V=!1}}var fe=!1,F=null,D=-1,M=5,B=-1;function j(){return!(r.unstable_now()-B<M)}function R(){if(F!==null){var X=r.unstable_now();B=X;var ke=!0;try{ke=F(!0,X)}finally{ke?A():(fe=!1,F=null)}}else fe=!1}var A;if(typeof ge=="function")A=function(){ge(R)};else if(typeof MessageChannel<"u"){var ye=new MessageChannel,Ke=ye.port2;ye.port1.onmessage=R,A=function(){Ke.postMessage(null)}}else A=function(){te(R,0)};function pe(X){F=X,fe||(fe=!0,A())}function Ve(X,ke){D=te(function(){X(r.unstable_now())},ke)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(X){X.callback=null},r.unstable_continueExecution=function(){U||V||(U=!0,pe(be))},r.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<X?Math.floor(1e3/X):5},r.unstable_getCurrentPriorityLevel=function(){return N},r.unstable_getFirstCallbackNode=function(){return t(w)},r.unstable_next=function(X){switch(N){case 1:case 2:case 3:var ke=3;break;default:ke=N}var oe=N;N=ke;try{return X()}finally{N=oe}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(X,ke){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var oe=N;N=X;try{return ke()}finally{N=oe}},r.unstable_scheduleCallback=function(X,ke,oe){var W=r.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?W+oe:W):oe=W,X){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=oe+ne,X={id:b++,callback:ke,priorityLevel:X,startTime:oe,expirationTime:ne,sortIndex:-1},oe>W?(X.sortIndex=oe,e(T,X),t(w)===null&&X===t(T)&&(q?(ce(D),D=-1):q=!0,Ve(Oe,oe-W))):(X.sortIndex=ne,e(w,X),U||V||(U=!0,pe(be))),X},r.unstable_shouldYield=j,r.unstable_wrapCallback=function(X){var ke=N;return function(){var oe=N;N=ke;try{return X.apply(this,arguments)}finally{N=oe}}}})(If)),If}var o_;function Bw(){return o_||(o_=1,Tf.exports=Uw()),Tf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a_;function Hw(){if(a_)return rr;a_=1;var r=gp(),e=Bw();function t(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,u=1;u<arguments.length;u++)s+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function c(n,s){p(n,s),p(n+"Capture",s)}function p(n,s){for(a[n]=s,n=0;n<s.length;n++)o.add(s[n])}var y=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),w=Object.prototype.hasOwnProperty,T=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,b={},k={};function N(n){return w.call(k,n)?!0:w.call(b,n)?!1:T.test(n)?k[n]=!0:(b[n]=!0,!1)}function V(n,s,u,f){if(u!==null&&u.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return f?!1:u!==null?!u.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function U(n,s,u,f){if(s===null||typeof s>"u"||V(n,s,u,f))return!0;if(f)return!1;if(u!==null)switch(u.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function q(n,s,u,f,g,v,S){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=f,this.attributeNamespace=g,this.mustUseProperty=u,this.propertyName=n,this.type=s,this.sanitizeURL=v,this.removeEmptyString=S}var te={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){te[n]=new q(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];te[s]=new q(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){te[n]=new q(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){te[n]=new q(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){te[n]=new q(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){te[n]=new q(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){te[n]=new q(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){te[n]=new q(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){te[n]=new q(n,5,!1,n.toLowerCase(),null,!1,!1)});var ce=/[\-:]([a-z])/g;function ge(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(ce,ge);te[s]=new q(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(ce,ge);te[s]=new q(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(ce,ge);te[s]=new q(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){te[n]=new q(n,1,!1,n.toLowerCase(),null,!1,!1)}),te.xlinkHref=new q("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){te[n]=new q(n,1,!1,n.toLowerCase(),null,!0,!0)});function Te(n,s,u,f){var g=te.hasOwnProperty(s)?te[s]:null;(g!==null?g.type!==0:f||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(U(s,u,g,f)&&(u=null),f||g===null?N(s)&&(u===null?n.removeAttribute(s):n.setAttribute(s,""+u)):g.mustUseProperty?n[g.propertyName]=u===null?g.type===3?!1:"":u:(s=g.attributeName,f=g.attributeNamespace,u===null?n.removeAttribute(s):(g=g.type,u=g===3||g===4&&u===!0?"":""+u,f?n.setAttributeNS(f,s,u):n.setAttribute(s,u))))}var Oe=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,be=Symbol.for("react.element"),fe=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),j=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),ye=Symbol.for("react.suspense_list"),Ke=Symbol.for("react.memo"),pe=Symbol.for("react.lazy"),Ve=Symbol.for("react.offscreen"),X=Symbol.iterator;function ke(n){return n===null||typeof n!="object"?null:(n=X&&n[X]||n["@@iterator"],typeof n=="function"?n:null)}var oe=Object.assign,W;function ne(n){if(W===void 0)try{throw Error()}catch(u){var s=u.stack.trim().match(/\n( *(at )?)/);W=s&&s[1]||""}return`
`+W+n}var Me=!1;function Ne(n,s){if(!n||Me)return"";Me=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(ee){var f=ee}Reflect.construct(n,[],s)}else{try{s.call()}catch(ee){f=ee}n.call(s.prototype)}else{try{throw Error()}catch(ee){f=ee}n()}}catch(ee){if(ee&&f&&typeof ee.stack=="string"){for(var g=ee.stack.split(`
`),v=f.stack.split(`
`),S=g.length-1,O=v.length-1;1<=S&&0<=O&&g[S]!==v[O];)O--;for(;1<=S&&0<=O;S--,O--)if(g[S]!==v[O]){if(S!==1||O!==1)do if(S--,O--,0>O||g[S]!==v[O]){var H=`
`+g[S].replace(" at new "," at ");return n.displayName&&H.includes("<anonymous>")&&(H=H.replace("<anonymous>",n.displayName)),H}while(1<=S&&0<=O);break}}}finally{Me=!1,Error.prepareStackTrace=u}return(n=n?n.displayName||n.name:"")?ne(n):""}function Se(n){switch(n.tag){case 5:return ne(n.type);case 16:return ne("Lazy");case 13:return ne("Suspense");case 19:return ne("SuspenseList");case 0:case 2:case 15:return n=Ne(n.type,!1),n;case 11:return n=Ne(n.type.render,!1),n;case 1:return n=Ne(n.type,!0),n;default:return""}}function xe(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case F:return"Fragment";case fe:return"Portal";case M:return"Profiler";case D:return"StrictMode";case A:return"Suspense";case ye:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case j:return(n.displayName||"Context")+".Consumer";case B:return(n._context.displayName||"Context")+".Provider";case R:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Ke:return s=n.displayName||null,s!==null?s:xe(n.type)||"Memo";case pe:s=n._payload,n=n._init;try{return xe(n(s))}catch{}}return null}function Xe(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xe(s);case 8:return s===D?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function re(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function qe(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function dt(n){var s=qe(n)?"checked":"value",u=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),f=""+n[s];if(!n.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,v=u.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return g.call(this)},set:function(S){f=""+S,v.call(this,S)}}),Object.defineProperty(n,s,{enumerable:u.enumerable}),{getValue:function(){return f},setValue:function(S){f=""+S},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function gn(n){n._valueTracker||(n._valueTracker=dt(n))}function jt(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var u=s.getValue(),f="";return n&&(f=qe(n)?n.checked?"true":"false":n.value),n=f,n!==u?(s.setValue(n),!0):!1}function Nn(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function di(n,s){var u=s.checked;return oe({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??n._wrapperState.initialChecked})}function fi(n,s){var u=s.defaultValue==null?"":s.defaultValue,f=s.checked!=null?s.checked:s.defaultChecked;u=re(s.value!=null?s.value:u),n._wrapperState={initialChecked:f,initialValue:u,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Kr(n,s){s=s.checked,s!=null&&Te(n,"checked",s,!1)}function or(n,s){Kr(n,s);var u=re(s.value),f=s.type;if(u!=null)f==="number"?(u===0&&n.value===""||n.value!=u)&&(n.value=""+u):n.value!==""+u&&(n.value=""+u);else if(f==="submit"||f==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?bt(n,s.type,u):s.hasOwnProperty("defaultValue")&&bt(n,s.type,re(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function ar(n,s,u){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var f=s.type;if(!(f!=="submit"&&f!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,u||s===n.value||(n.value=s),n.defaultValue=s}u=n.name,u!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,u!==""&&(n.name=u)}function bt(n,s,u){(s!=="number"||Nn(n.ownerDocument)!==n)&&(u==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+u&&(n.defaultValue=""+u))}var kt=Array.isArray;function Rn(n,s,u,f){if(n=n.options,s){s={};for(var g=0;g<u.length;g++)s["$"+u[g]]=!0;for(u=0;u<n.length;u++)g=s.hasOwnProperty("$"+n[u].value),n[u].selected!==g&&(n[u].selected=g),g&&f&&(n[u].defaultSelected=!0)}else{for(u=""+re(u),s=null,g=0;g<n.length;g++){if(n[g].value===u){n[g].selected=!0,f&&(n[g].defaultSelected=!0);return}s!==null||n[g].disabled||(s=n[g])}s!==null&&(s.selected=!0)}}function Ds(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return oe({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Ms(n,s){var u=s.value;if(u==null){if(u=s.children,s=s.defaultValue,u!=null){if(s!=null)throw Error(t(92));if(kt(u)){if(1<u.length)throw Error(t(93));u=u[0]}s=u}s==null&&(s=""),u=s}n._wrapperState={initialValue:re(u)}}function Ma(n,s){var u=re(s.value),f=re(s.defaultValue);u!=null&&(u=""+u,u!==n.value&&(n.value=u),s.defaultValue==null&&n.defaultValue!==u&&(n.defaultValue=u)),f!=null&&(n.defaultValue=""+f)}function pi(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function $i(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qi(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?$i(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Zr,Oa=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,u,f,g){MSApp.execUnsafeLocalFunction(function(){return n(s,u,f,g)})}:n})(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(Zr=Zr||document.createElement("div"),Zr.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Zr.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function mi(n,s){if(s){var u=n.firstChild;if(u&&u===n.lastChild&&u.nodeType===3){u.nodeValue=s;return}}n.textContent=s}var Qr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ja=["Webkit","ms","Moz","O"];Object.keys(Qr).forEach(function(n){ja.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),Qr[s]=Qr[n]})});function Yr(n,s,u){return s==null||typeof s=="boolean"||s===""?"":u||typeof s!="number"||s===0||Qr.hasOwnProperty(n)&&Qr[n]?(""+s).trim():s+"px"}function gi(n,s){n=n.style;for(var u in s)if(s.hasOwnProperty(u)){var f=u.indexOf("--")===0,g=Yr(u,s[u],f);u==="float"&&(u="cssFloat"),f?n.setProperty(u,g):n[u]=g}}var Os=oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function lr(n,s){if(s){if(Os[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function xr(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _i=null;function js(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var wr=null,Er=null,It=null;function Uo(n){if(n=ps(n)){if(typeof wr!="function")throw Error(t(280));var s=n.stateNode;s&&(s=el(s),wr(n.stateNode,n.type,s))}}function yi(n){Er?It?It.push(n):It=[n]:Er=n}function vi(){if(Er){var n=Er,s=It;if(It=Er=null,Uo(n),s)for(n=0;n<s.length;n++)Uo(s[n])}}function Va(n,s){return n(s)}function Fa(){}var Tr=!1;function Vs(n,s,u){if(Tr)return n(s,u);Tr=!0;try{return Va(n,s,u)}finally{Tr=!1,(Er!==null||It!==null)&&(Fa(),vi())}}function Gi(n,s){var u=n.stateNode;if(u===null)return null;var f=el(u);if(f===null)return null;u=f[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(n=n.type,f=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!f;break e;default:n=!1}if(n)return null;if(u&&typeof u!="function")throw Error(t(231,s,typeof u));return u}var xi=!1;if(y)try{var wi={};Object.defineProperty(wi,"passive",{get:function(){xi=!0}}),window.addEventListener("test",wi,wi),window.removeEventListener("test",wi,wi)}catch{xi=!1}function za(n,s,u,f,g,v,S,O,H){var ee=Array.prototype.slice.call(arguments,3);try{s.apply(u,ee)}catch(he){this.onError(he)}}var Bt=!1,Ce=null,Ki=!1,Ln=null,Bo={onError:function(n){Bt=!0,Ce=n}};function Ho(n,s,u,f,g,v,S,O,H){Bt=!1,Ce=null,za.apply(Bo,arguments)}function Zi(n,s,u,f,g,v,S,O,H){if(Ho.apply(this,arguments),Bt){if(Bt){var ee=Ce;Bt=!1,Ce=null}else throw Error(t(198));Ki||(Ki=!0,Ln=ee)}}function qn(n){var s=n,u=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(u=s.return),n=s.return;while(n)}return s.tag===3?u:null}function Ir(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function Wo(n){if(qn(n)!==n)throw Error(t(188))}function Ua(n){var s=n.alternate;if(!s){if(s=qn(n),s===null)throw Error(t(188));return s!==n?null:n}for(var u=n,f=s;;){var g=u.return;if(g===null)break;var v=g.alternate;if(v===null){if(f=g.return,f!==null){u=f;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===u)return Wo(g),n;if(v===f)return Wo(g),s;v=v.sibling}throw Error(t(188))}if(u.return!==f.return)u=g,f=v;else{for(var S=!1,O=g.child;O;){if(O===u){S=!0,u=g,f=v;break}if(O===f){S=!0,f=g,u=v;break}O=O.sibling}if(!S){for(O=v.child;O;){if(O===u){S=!0,u=v,f=g;break}if(O===f){S=!0,f=v,u=g;break}O=O.sibling}if(!S)throw Error(t(189))}}if(u.alternate!==f)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?n:s}function Ba(n){return n=Ua(n),n!==null?Qi(n):null}function Qi(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=Qi(n);if(s!==null)return s;n=n.sibling}return null}var $o=e.unstable_scheduleCallback,Yi=e.unstable_cancelCallback,Ji=e.unstable_shouldYield,Gn=e.unstable_requestPaint,xt=e.unstable_now,Wl=e.unstable_getCurrentPriorityLevel,Fs=e.unstable_ImmediatePriority,qo=e.unstable_UserBlockingPriority,Xi=e.unstable_NormalPriority,es=e.unstable_LowPriority,Sr=e.unstable_IdlePriority,Ei=null,_n=null;function Ti(n){if(_n&&typeof _n.onCommitFiberRoot=="function")try{_n.onCommitFiberRoot(Ei,n,void 0,(n.current.flags&128)===128)}catch{}}var Qe=Math.clz32?Math.clz32:Kn,lt=Math.log,ln=Math.LN2;function Kn(n){return n>>>=0,n===0?32:31-(lt(n)/ln|0)|0}var un=64,Pr=4194304;function Ee(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function mt(n,s){var u=n.pendingLanes;if(u===0)return 0;var f=0,g=n.suspendedLanes,v=n.pingedLanes,S=u&268435455;if(S!==0){var O=S&~g;O!==0?f=Ee(O):(v&=S,v!==0&&(f=Ee(v)))}else S=u&~g,S!==0?f=Ee(S):v!==0&&(f=Ee(v));if(f===0)return 0;if(s!==0&&s!==f&&(s&g)===0&&(g=f&-f,v=s&-s,g>=v||g===16&&(v&4194240)!==0))return s;if((f&4)!==0&&(f|=u&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=f;0<s;)u=31-Qe(s),g=1<<u,f|=n[u],s&=~g;return f}function Jr(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function br(n,s){for(var u=n.suspendedLanes,f=n.pingedLanes,g=n.expirationTimes,v=n.pendingLanes;0<v;){var S=31-Qe(v),O=1<<S,H=g[S];H===-1?((O&u)===0||(O&f)!==0)&&(g[S]=Jr(O,s)):H<=s&&(n.expiredLanes|=O),v&=~O}}function tn(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Go(){var n=un;return un<<=1,(un&4194240)===0&&(un=64),n}function Ii(n){for(var s=[],u=0;31>u;u++)s.push(n);return s}function Dn(n,s,u){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-Qe(s),n[s]=u}function Ct(n,s){var u=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var f=n.eventTimes;for(n=n.expirationTimes;0<u;){var g=31-Qe(u),v=1<<g;s[g]=0,f[g]=-1,n[g]=-1,u&=~v}}function ur(n,s){var u=n.entangledLanes|=s;for(n=n.entanglements;u;){var f=31-Qe(u),g=1<<f;g&s|n[f]&s&&(n[f]|=s),u&=~g}}var tt=0;function yn(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var ts,kr,ns,rs,Si,Zn=!1,Pi=[],Mn=null,cr=null,Vt=null,is=new Map,ze=new Map,At=[],gt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Xr(n,s){switch(n){case"focusin":case"focusout":Mn=null;break;case"dragenter":case"dragleave":cr=null;break;case"mouseover":case"mouseout":Vt=null;break;case"pointerover":case"pointerout":is.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":ze.delete(s.pointerId)}}function On(n,s,u,f,g,v){return n===null||n.nativeEvent!==v?(n={blockedOn:s,domEventName:u,eventSystemFlags:f,nativeEvent:v,targetContainers:[g]},s!==null&&(s=ps(s),s!==null&&kr(s)),n):(n.eventSystemFlags|=f,s=n.targetContainers,g!==null&&s.indexOf(g)===-1&&s.push(g),n)}function zs(n,s,u,f,g){switch(s){case"focusin":return Mn=On(Mn,n,s,u,f,g),!0;case"dragenter":return cr=On(cr,n,s,u,f,g),!0;case"mouseover":return Vt=On(Vt,n,s,u,f,g),!0;case"pointerover":var v=g.pointerId;return is.set(v,On(is.get(v)||null,n,s,u,f,g)),!0;case"gotpointercapture":return v=g.pointerId,ze.set(v,On(ze.get(v)||null,n,s,u,f,g)),!0}return!1}function bi(n){var s=fs(n.target);if(s!==null){var u=qn(s);if(u!==null){if(s=u.tag,s===13){if(s=Ir(u),s!==null){n.blockedOn=s,Si(n.priority,function(){ns(u)});return}}else if(s===3&&u.stateNode.current.memoizedState.isDehydrated){n.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}n.blockedOn=null}function at(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var u=as(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(u===null){u=n.nativeEvent;var f=new u.constructor(u.type,u);_i=f,u.target.dispatchEvent(f),_i=null}else return s=ps(u),s!==null&&kr(s),n.blockedOn=u,!1;s.shift()}return!0}function Us(n,s,u){at(n)&&u.delete(s)}function ss(){Zn=!1,Mn!==null&&at(Mn)&&(Mn=null),cr!==null&&at(cr)&&(cr=null),Vt!==null&&at(Vt)&&(Vt=null),is.forEach(Us),ze.forEach(Us)}function wt(n,s){n.blockedOn===s&&(n.blockedOn=null,Zn||(Zn=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ss)))}function vn(n){function s(g){return wt(g,n)}if(0<Pi.length){wt(Pi[0],n);for(var u=1;u<Pi.length;u++){var f=Pi[u];f.blockedOn===n&&(f.blockedOn=null)}}for(Mn!==null&&wt(Mn,n),cr!==null&&wt(cr,n),Vt!==null&&wt(Vt,n),is.forEach(s),ze.forEach(s),u=0;u<At.length;u++)f=At[u],f.blockedOn===n&&(f.blockedOn=null);for(;0<At.length&&(u=At[0],u.blockedOn===null);)bi(u),u.blockedOn===null&&At.shift()}var Cr=Oe.ReactCurrentBatchConfig,Ar=!0;function Nr(n,s,u,f){var g=tt,v=Cr.transition;Cr.transition=null;try{tt=1,os(n,s,u,f)}finally{tt=g,Cr.transition=v}}function Ko(n,s,u,f){var g=tt,v=Cr.transition;Cr.transition=null;try{tt=4,os(n,s,u,f)}finally{tt=g,Cr.transition=v}}function os(n,s,u,f){if(Ar){var g=as(n,s,u,f);if(g===null)i(n,s,f,Rr,u),Xr(n,f);else if(zs(g,n,s,u,f))f.stopPropagation();else if(Xr(n,f),s&4&&-1<gt.indexOf(n)){for(;g!==null;){var v=ps(g);if(v!==null&&ts(v),v=as(n,s,u,f),v===null&&i(n,s,f,Rr,u),v===g)break;g=v}g!==null&&f.stopPropagation()}else i(n,s,f,null,u)}}var Rr=null;function as(n,s,u,f){if(Rr=null,n=js(f),n=fs(n),n!==null)if(s=qn(n),s===null)n=null;else if(u=s.tag,u===13){if(n=Ir(s),n!==null)return n;n=null}else if(u===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return Rr=n,null}function nt(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Wl()){case Fs:return 1;case qo:return 4;case Xi:case es:return 16;case Sr:return 536870912;default:return 16}default:return 16}}var jn=null,nn=null,Vn=null;function Zo(){if(Vn)return Vn;var n,s=nn,u=s.length,f,g="value"in jn?jn.value:jn.textContent,v=g.length;for(n=0;n<u&&s[n]===g[n];n++);var S=u-n;for(f=1;f<=S&&s[u-f]===g[v-f];f++);return Vn=g.slice(n,1<f?1-f:void 0)}function ls(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Qn(){return!0}function Qo(){return!1}function Qt(n){function s(u,f,g,v,S){this._reactName=u,this._targetInst=g,this.type=f,this.nativeEvent=v,this.target=S,this.currentTarget=null;for(var O in n)n.hasOwnProperty(O)&&(u=n[O],this[O]=u?u(v):v[O]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Qn:Qo,this.isPropagationStopped=Qo,this}return oe(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Qn)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Qn)},persist:function(){},isPersistent:Qn}),s}var Lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},us=Qt(Lr),Dr=oe({},Lr,{view:0,detail:0}),Bs=Qt(Dr),cn,Hs,xn,wn=oe({},Dr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:He,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==xn&&(xn&&n.type==="mousemove"?(cn=n.screenX-xn.screenX,Hs=n.screenY-xn.screenY):Hs=cn=0,xn=n),cn)},movementY:function(n){return"movementY"in n?n.movementY:Hs}}),Ws=Qt(wn),Yo=oe({},wn,{dataTransfer:0}),$s=Qt(Yo),qs=oe({},Dr,{relatedTarget:0}),Ht=Qt(qs),Jo=oe({},Lr,{animationName:0,elapsedTime:0,pseudoElement:0}),Ha=Qt(Jo),ki=oe({},Lr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),h=Qt(ki),x=oe({},Lr,{data:0}),I=Qt(x),C={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},G={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Y={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _e(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=Y[n])?!!s[n]:!1}function He(){return _e}var ut=oe({},Dr,{key:function(n){if(n.key){var s=C[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=ls(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?G[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:He,charCode:function(n){return n.type==="keypress"?ls(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ls(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),ft=Qt(ut),Rt=oe({},wn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fn=Qt(Rt),hr=oe({},Dr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:He}),Yn=Qt(hr),Mr=oe({},Lr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Gs=Qt(Mr),Ks=oe({},wn,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),ud=Qt(Ks),dr=[9,13,27,32],Ci=y&&"CompositionEvent"in window,Xo=null;y&&"documentMode"in document&&(Xo=document.documentMode);var ei=y&&"TextEvent"in window&&!Xo,nc=y&&(!Ci||Xo&&8<Xo&&11>=Xo),cs=" ",rc=!1;function Zs(n,s){switch(n){case"keyup":return dr.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $l(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ti=!1;function cd(n,s){switch(n){case"compositionend":return $l(s);case"keypress":return s.which!==32?null:(rc=!0,cs);case"textInput":return n=s.data,n===cs&&rc?null:n;default:return null}}function Ai(n,s){if(ti)return n==="compositionend"||!Ci&&Zs(n,s)?(n=Zo(),Vn=nn=jn=null,ti=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return nc&&s.locale!=="ko"?null:s.data;default:return null}}var Wa={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ic(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!Wa[n.type]:s==="textarea"}function $a(n,s,u,f){yi(f),s=d(s,"onChange"),0<s.length&&(u=new us("onChange","change",null,u,f),n.push({event:u,listeners:s}))}var ea=null,zn=null;function hd(n){eu(n,0)}function ni(n){var s=ms(n);if(jt(s))return n}function dd(n,s){if(n==="change")return s}var Or=!1;if(y){var Qs;if(y){var qa="oninput"in document;if(!qa){var Ga=document.createElement("div");Ga.setAttribute("oninput","return;"),qa=typeof Ga.oninput=="function"}Qs=qa}else Qs=!1;Or=Qs&&(!document.documentMode||9<document.documentMode)}function ta(){ea&&(ea.detachEvent("onpropertychange",Ka),zn=ea=null)}function Ka(n){if(n.propertyName==="value"&&ni(zn)){var s=[];$a(s,zn,n,js(n)),Vs(hd,s)}}function Za(n,s,u){n==="focusin"?(ta(),ea=s,zn=u,ea.attachEvent("onpropertychange",Ka)):n==="focusout"&&ta()}function Ys(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return ni(zn)}function Qa(n,s){if(n==="click")return ni(s)}function ql(n,s){if(n==="input"||n==="change")return ni(s)}function sc(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var fr=typeof Object.is=="function"?Object.is:sc;function Ni(n,s){if(fr(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var u=Object.keys(n),f=Object.keys(s);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var g=u[f];if(!w.call(s,g)||!fr(n[g],s[g]))return!1}return!0}function oc(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Gl(n,s){var u=oc(n);n=0;for(var f;u;){if(u.nodeType===3){if(f=n+u.textContent.length,n<=s&&f>=s)return{node:u,offset:s-n};n=f}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=oc(u)}}function ac(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?ac(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Kl(){for(var n=window,s=Nn();s instanceof n.HTMLIFrameElement;){try{var u=typeof s.contentWindow.location.href=="string"}catch{u=!1}if(u)n=s.contentWindow;else break;s=Nn(n.document)}return s}function Zl(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function jr(n){var s=Kl(),u=n.focusedElem,f=n.selectionRange;if(s!==u&&u&&u.ownerDocument&&ac(u.ownerDocument.documentElement,u)){if(f!==null&&Zl(u)){if(s=f.start,n=f.end,n===void 0&&(n=s),"selectionStart"in u)u.selectionStart=s,u.selectionEnd=Math.min(n,u.value.length);else if(n=(s=u.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var g=u.textContent.length,v=Math.min(f.start,g);f=f.end===void 0?v:Math.min(f.end,g),!n.extend&&v>f&&(g=f,f=v,v=g),g=Gl(u,v);var S=Gl(u,f);g&&S&&(n.rangeCount!==1||n.anchorNode!==g.node||n.anchorOffset!==g.offset||n.focusNode!==S.node||n.focusOffset!==S.offset)&&(s=s.createRange(),s.setStart(g.node,g.offset),n.removeAllRanges(),v>f?(n.addRange(s),n.extend(S.node,S.offset)):(s.setEnd(S.node,S.offset),n.addRange(s)))}}for(s=[],n=u;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<s.length;u++)n=s[u],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Ya=y&&"documentMode"in document&&11>=document.documentMode,Js=null,Xs=null,na=null,Ja=!1;function lc(n,s,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Ja||Js==null||Js!==Nn(f)||(f=Js,"selectionStart"in f&&Zl(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),na&&Ni(na,f)||(na=f,f=d(Xs,"onSelect"),0<f.length&&(s=new us("onSelect","select",null,s,u),n.push({event:s,listeners:f}),s.target=Js)))}function Ri(n,s){var u={};return u[n.toLowerCase()]=s.toLowerCase(),u["Webkit"+n]="webkit"+s,u["Moz"+n]="moz"+s,u}var eo={animationend:Ri("Animation","AnimationEnd"),animationiteration:Ri("Animation","AnimationIteration"),animationstart:Ri("Animation","AnimationStart"),transitionend:Ri("Transition","TransitionEnd")},Li={},Ql={};y&&(Ql=document.createElement("div").style,"AnimationEvent"in window||(delete eo.animationend.animation,delete eo.animationiteration.animation,delete eo.animationstart.animation),"TransitionEvent"in window||delete eo.transitionend.transition);function ra(n){if(Li[n])return Li[n];if(!eo[n])return n;var s=eo[n],u;for(u in s)if(s.hasOwnProperty(u)&&u in Ql)return Li[n]=s[u];return n}var uc=ra("animationend"),Vr=ra("animationiteration"),Yl=ra("animationstart"),Jl=ra("transitionend"),to=new Map,cc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function pr(n,s){to.set(n,s),c(s,[n])}for(var hs=0;hs<cc.length;hs++){var Xa=cc[hs],hc=Xa.toLowerCase(),fd=Xa[0].toUpperCase()+Xa.slice(1);pr(hc,"on"+fd)}pr(uc,"onAnimationEnd"),pr(Vr,"onAnimationIteration"),pr(Yl,"onAnimationStart"),pr("dblclick","onDoubleClick"),pr("focusin","onFocus"),pr("focusout","onBlur"),pr(Jl,"onTransitionEnd"),p("onMouseEnter",["mouseout","mouseover"]),p("onMouseLeave",["mouseout","mouseover"]),p("onPointerEnter",["pointerout","pointerover"]),p("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var no="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dc=new Set("cancel close invalid load scroll toggle".split(" ").concat(no));function Xl(n,s,u){var f=n.type||"unknown-event";n.currentTarget=u,Zi(f,s,void 0,n),n.currentTarget=null}function eu(n,s){s=(s&4)!==0;for(var u=0;u<n.length;u++){var f=n[u],g=f.event;f=f.listeners;e:{var v=void 0;if(s)for(var S=f.length-1;0<=S;S--){var O=f[S],H=O.instance,ee=O.currentTarget;if(O=O.listener,H!==v&&g.isPropagationStopped())break e;Xl(g,O,ee),v=H}else for(S=0;S<f.length;S++){if(O=f[S],H=O.instance,ee=O.currentTarget,O=O.listener,H!==v&&g.isPropagationStopped())break e;Xl(g,O,ee),v=H}}}if(Ki)throw n=Ln,Ki=!1,Ln=null,n}function vt(n,s){var u=s[oo];u===void 0&&(u=s[oo]=new Set);var f=n+"__bubble";u.has(f)||(fc(s,n,2,!1),u.add(f))}function tu(n,s,u){var f=0;s&&(f|=4),fc(u,n,f,s)}var ia="_reactListening"+Math.random().toString(36).slice(2);function ro(n){if(!n[ia]){n[ia]=!0,o.forEach(function(u){u!=="selectionchange"&&(dc.has(u)||tu(u,!1,n),tu(u,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[ia]||(s[ia]=!0,tu("selectionchange",!1,s))}}function fc(n,s,u,f){switch(nt(s)){case 1:var g=Nr;break;case 4:g=Ko;break;default:g=os}u=g.bind(null,s,u,n),g=void 0,!xi||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(g=!0),f?g!==void 0?n.addEventListener(s,u,{capture:!0,passive:g}):n.addEventListener(s,u,!0):g!==void 0?n.addEventListener(s,u,{passive:g}):n.addEventListener(s,u,!1)}function i(n,s,u,f,g){var v=f;if((s&1)===0&&(s&2)===0&&f!==null)e:for(;;){if(f===null)return;var S=f.tag;if(S===3||S===4){var O=f.stateNode.containerInfo;if(O===g||O.nodeType===8&&O.parentNode===g)break;if(S===4)for(S=f.return;S!==null;){var H=S.tag;if((H===3||H===4)&&(H=S.stateNode.containerInfo,H===g||H.nodeType===8&&H.parentNode===g))return;S=S.return}for(;O!==null;){if(S=fs(O),S===null)return;if(H=S.tag,H===5||H===6){f=v=S;continue e}O=O.parentNode}}f=f.return}Vs(function(){var ee=v,he=js(u),de=[];e:{var ue=to.get(n);if(ue!==void 0){var Ie=us,Re=n;switch(n){case"keypress":if(ls(u)===0)break e;case"keydown":case"keyup":Ie=ft;break;case"focusin":Re="focus",Ie=Ht;break;case"focusout":Re="blur",Ie=Ht;break;case"beforeblur":case"afterblur":Ie=Ht;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ie=Ws;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ie=$s;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ie=Yn;break;case uc:case Vr:case Yl:Ie=Ha;break;case Jl:Ie=Gs;break;case"scroll":Ie=Bs;break;case"wheel":Ie=ud;break;case"copy":case"cut":case"paste":Ie=h;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ie=Fn}var Le=(s&4)!==0,Ft=!Le&&n==="scroll",Z=Le?ue!==null?ue+"Capture":null:ue;Le=[];for(var $=ee,Q;$!==null;){Q=$;var me=Q.stateNode;if(Q.tag===5&&me!==null&&(Q=me,Z!==null&&(me=Gi($,Z),me!=null&&Le.push(l($,me,Q)))),Ft)break;$=$.return}0<Le.length&&(ue=new Ie(ue,Re,null,u,he),de.push({event:ue,listeners:Le}))}}if((s&7)===0){e:{if(ue=n==="mouseover"||n==="pointerover",Ie=n==="mouseout"||n==="pointerout",ue&&u!==_i&&(Re=u.relatedTarget||u.fromElement)&&(fs(Re)||Re[_t]))break e;if((Ie||ue)&&(ue=he.window===he?he:(ue=he.ownerDocument)?ue.defaultView||ue.parentWindow:window,Ie?(Re=u.relatedTarget||u.toElement,Ie=ee,Re=Re?fs(Re):null,Re!==null&&(Ft=qn(Re),Re!==Ft||Re.tag!==5&&Re.tag!==6)&&(Re=null)):(Ie=null,Re=ee),Ie!==Re)){if(Le=Ws,me="onMouseLeave",Z="onMouseEnter",$="mouse",(n==="pointerout"||n==="pointerover")&&(Le=Fn,me="onPointerLeave",Z="onPointerEnter",$="pointer"),Ft=Ie==null?ue:ms(Ie),Q=Re==null?ue:ms(Re),ue=new Le(me,$+"leave",Ie,u,he),ue.target=Ft,ue.relatedTarget=Q,me=null,fs(he)===ee&&(Le=new Le(Z,$+"enter",Re,u,he),Le.target=Q,Le.relatedTarget=Ft,me=Le),Ft=me,Ie&&Re)t:{for(Le=Ie,Z=Re,$=0,Q=Le;Q;Q=m(Q))$++;for(Q=0,me=Z;me;me=m(me))Q++;for(;0<$-Q;)Le=m(Le),$--;for(;0<Q-$;)Z=m(Z),Q--;for(;$--;){if(Le===Z||Z!==null&&Le===Z.alternate)break t;Le=m(Le),Z=m(Z)}Le=null}else Le=null;Ie!==null&&E(de,ue,Ie,Le,!1),Re!==null&&Ft!==null&&E(de,Ft,Re,Le,!0)}}e:{if(ue=ee?ms(ee):window,Ie=ue.nodeName&&ue.nodeName.toLowerCase(),Ie==="select"||Ie==="input"&&ue.type==="file")var De=dd;else if(ic(ue))if(Or)De=ql;else{De=Ys;var Ue=Za}else(Ie=ue.nodeName)&&Ie.toLowerCase()==="input"&&(ue.type==="checkbox"||ue.type==="radio")&&(De=Qa);if(De&&(De=De(n,ee))){$a(de,De,u,he);break e}Ue&&Ue(n,ue,ee),n==="focusout"&&(Ue=ue._wrapperState)&&Ue.controlled&&ue.type==="number"&&bt(ue,"number",ue.value)}switch(Ue=ee?ms(ee):window,n){case"focusin":(ic(Ue)||Ue.contentEditable==="true")&&(Js=Ue,Xs=ee,na=null);break;case"focusout":na=Xs=Js=null;break;case"mousedown":Ja=!0;break;case"contextmenu":case"mouseup":case"dragend":Ja=!1,lc(de,u,he);break;case"selectionchange":if(Ya)break;case"keydown":case"keyup":lc(de,u,he)}var Be;if(Ci)e:{switch(n){case"compositionstart":var Ze="onCompositionStart";break e;case"compositionend":Ze="onCompositionEnd";break e;case"compositionupdate":Ze="onCompositionUpdate";break e}Ze=void 0}else ti?Zs(n,u)&&(Ze="onCompositionEnd"):n==="keydown"&&u.keyCode===229&&(Ze="onCompositionStart");Ze&&(nc&&u.locale!=="ko"&&(ti||Ze!=="onCompositionStart"?Ze==="onCompositionEnd"&&ti&&(Be=Zo()):(jn=he,nn="value"in jn?jn.value:jn.textContent,ti=!0)),Ue=d(ee,Ze),0<Ue.length&&(Ze=new I(Ze,n,null,u,he),de.push({event:Ze,listeners:Ue}),Be?Ze.data=Be:(Be=$l(u),Be!==null&&(Ze.data=Be)))),(Be=ei?cd(n,u):Ai(n,u))&&(ee=d(ee,"onBeforeInput"),0<ee.length&&(he=new I("onBeforeInput","beforeinput",null,u,he),de.push({event:he,listeners:ee}),he.data=Be))}eu(de,s)})}function l(n,s,u){return{instance:n,listener:s,currentTarget:u}}function d(n,s){for(var u=s+"Capture",f=[];n!==null;){var g=n,v=g.stateNode;g.tag===5&&v!==null&&(g=v,v=Gi(n,u),v!=null&&f.unshift(l(n,v,g)),v=Gi(n,s),v!=null&&f.push(l(n,v,g))),n=n.return}return f}function m(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function E(n,s,u,f,g){for(var v=s._reactName,S=[];u!==null&&u!==f;){var O=u,H=O.alternate,ee=O.stateNode;if(H!==null&&H===f)break;O.tag===5&&ee!==null&&(O=ee,g?(H=Gi(u,v),H!=null&&S.unshift(l(u,H,O))):g||(H=Gi(u,v),H!=null&&S.push(l(u,H,O)))),u=u.return}S.length!==0&&n.push({event:s,listeners:S})}var P=/\r\n?/g,z=/\u0000|\uFFFD/g;function K(n){return(typeof n=="string"?n:""+n).replace(P,`
`).replace(z,"")}function J(n,s,u){if(s=K(s),K(n)!==s&&u)throw Error(t(425))}function le(){}var we=null,Fe=null;function et(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Yt=typeof setTimeout=="function"?setTimeout:void 0,Wt=typeof clearTimeout=="function"?clearTimeout:void 0,Un=typeof Promise=="function"?Promise:void 0,En=typeof queueMicrotask=="function"?queueMicrotask:typeof Un<"u"?function(n){return Un.resolve(null).then(n).catch(io)}:Yt;function io(n){setTimeout(function(){throw n})}function nu(n,s){var u=s,f=0;do{var g=u.nextSibling;if(n.removeChild(u),g&&g.nodeType===8)if(u=g.data,u==="/$"){if(f===0){n.removeChild(g),vn(s);return}f--}else u!=="$"&&u!=="$?"&&u!=="$!"||f++;u=g}while(u);vn(s)}function Di(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function pc(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var u=n.data;if(u==="$"||u==="$!"||u==="$?"){if(s===0)return n;s--}else u==="/$"&&s++}n=n.previousSibling}return null}var ds=Math.random().toString(36).slice(2),Fr="__reactFiber$"+ds,so="__reactProps$"+ds,_t="__reactContainer$"+ds,oo="__reactEvents$"+ds,pd="__reactListeners$"+ds,md="__reactHandles$"+ds;function fs(n){var s=n[Fr];if(s)return s;for(var u=n.parentNode;u;){if(s=u[_t]||u[Fr]){if(u=s.alternate,s.child!==null||u!==null&&u.child!==null)for(n=pc(n);n!==null;){if(u=n[Fr])return u;n=pc(n)}return s}n=u,u=n.parentNode}return null}function ps(n){return n=n[Fr]||n[_t],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function ms(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function el(n){return n[so]||null}var gd=[],tl=-1;function ao(n){return{current:n}}function St(n){0>tl||(n.current=gd[tl],gd[tl]=null,tl--)}function Et(n,s){tl++,gd[tl]=n.current,n.current=s}var lo={},Tn=ao(lo),Jn=ao(!1),sa=lo;function nl(n,s){var u=n.type.contextTypes;if(!u)return lo;var f=n.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===s)return f.__reactInternalMemoizedMaskedChildContext;var g={},v;for(v in u)g[v]=s[v];return f&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=g),g}function Xn(n){return n=n.childContextTypes,n!=null}function mc(){St(Jn),St(Tn)}function Tm(n,s,u){if(Tn.current!==lo)throw Error(t(168));Et(Tn,s),Et(Jn,u)}function Im(n,s,u){var f=n.stateNode;if(s=s.childContextTypes,typeof f.getChildContext!="function")return u;f=f.getChildContext();for(var g in f)if(!(g in s))throw Error(t(108,Xe(n)||"Unknown",g));return oe({},u,f)}function gc(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||lo,sa=Tn.current,Et(Tn,n),Et(Jn,Jn.current),!0}function Sm(n,s,u){var f=n.stateNode;if(!f)throw Error(t(169));u?(n=Im(n,s,sa),f.__reactInternalMemoizedMergedChildContext=n,St(Jn),St(Tn),Et(Tn,n)):St(Jn),Et(Jn,u)}var gs=null,_c=!1,_d=!1;function Pm(n){gs===null?gs=[n]:gs.push(n)}function rw(n){_c=!0,Pm(n)}function uo(){if(!_d&&gs!==null){_d=!0;var n=0,s=tt;try{var u=gs;for(tt=1;n<u.length;n++){var f=u[n];do f=f(!0);while(f!==null)}gs=null,_c=!1}catch(g){throw gs!==null&&(gs=gs.slice(n+1)),$o(Fs,uo),g}finally{tt=s,_d=!1}}return null}var rl=[],il=0,yc=null,vc=0,zr=[],Ur=0,oa=null,_s=1,ys="";function aa(n,s){rl[il++]=vc,rl[il++]=yc,yc=n,vc=s}function bm(n,s,u){zr[Ur++]=_s,zr[Ur++]=ys,zr[Ur++]=oa,oa=n;var f=_s;n=ys;var g=32-Qe(f)-1;f&=~(1<<g),u+=1;var v=32-Qe(s)+g;if(30<v){var S=g-g%5;v=(f&(1<<S)-1).toString(32),f>>=S,g-=S,_s=1<<32-Qe(s)+g|u<<g|f,ys=v+n}else _s=1<<v|u<<g|f,ys=n}function yd(n){n.return!==null&&(aa(n,1),bm(n,1,0))}function vd(n){for(;n===yc;)yc=rl[--il],rl[il]=null,vc=rl[--il],rl[il]=null;for(;n===oa;)oa=zr[--Ur],zr[Ur]=null,ys=zr[--Ur],zr[Ur]=null,_s=zr[--Ur],zr[Ur]=null}var mr=null,gr=null,Nt=!1,ri=null;function km(n,s){var u=$r(5,null,null,0);u.elementType="DELETED",u.stateNode=s,u.return=n,s=n.deletions,s===null?(n.deletions=[u],n.flags|=16):s.push(u)}function Cm(n,s){switch(n.tag){case 5:var u=n.type;return s=s.nodeType!==1||u.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,mr=n,gr=Di(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,mr=n,gr=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(u=oa!==null?{id:_s,overflow:ys}:null,n.memoizedState={dehydrated:s,treeContext:u,retryLane:1073741824},u=$r(18,null,null,0),u.stateNode=s,u.return=n,n.child=u,mr=n,gr=null,!0):!1;default:return!1}}function xd(n){return(n.mode&1)!==0&&(n.flags&128)===0}function wd(n){if(Nt){var s=gr;if(s){var u=s;if(!Cm(n,s)){if(xd(n))throw Error(t(418));s=Di(u.nextSibling);var f=mr;s&&Cm(n,s)?km(f,u):(n.flags=n.flags&-4097|2,Nt=!1,mr=n)}}else{if(xd(n))throw Error(t(418));n.flags=n.flags&-4097|2,Nt=!1,mr=n}}}function Am(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;mr=n}function xc(n){if(n!==mr)return!1;if(!Nt)return Am(n),Nt=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!et(n.type,n.memoizedProps)),s&&(s=gr)){if(xd(n))throw Nm(),Error(t(418));for(;s;)km(n,s),s=Di(s.nextSibling)}if(Am(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var u=n.data;if(u==="/$"){if(s===0){gr=Di(n.nextSibling);break e}s--}else u!=="$"&&u!=="$!"&&u!=="$?"||s++}n=n.nextSibling}gr=null}}else gr=mr?Di(n.stateNode.nextSibling):null;return!0}function Nm(){for(var n=gr;n;)n=Di(n.nextSibling)}function sl(){gr=mr=null,Nt=!1}function Ed(n){ri===null?ri=[n]:ri.push(n)}var iw=Oe.ReactCurrentBatchConfig;function ru(n,s,u){if(n=u.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var f=u.stateNode}if(!f)throw Error(t(147,n));var g=f,v=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===v?s.ref:(s=function(S){var O=g.refs;S===null?delete O[v]:O[v]=S},s._stringRef=v,s)}if(typeof n!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,n))}return n}function wc(n,s){throw n=Object.prototype.toString.call(s),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function Rm(n){var s=n._init;return s(n._payload)}function Lm(n){function s(Z,$){if(n){var Q=Z.deletions;Q===null?(Z.deletions=[$],Z.flags|=16):Q.push($)}}function u(Z,$){if(!n)return null;for(;$!==null;)s(Z,$),$=$.sibling;return null}function f(Z,$){for(Z=new Map;$!==null;)$.key!==null?Z.set($.key,$):Z.set($.index,$),$=$.sibling;return Z}function g(Z,$){return Z=yo(Z,$),Z.index=0,Z.sibling=null,Z}function v(Z,$,Q){return Z.index=Q,n?(Q=Z.alternate,Q!==null?(Q=Q.index,Q<$?(Z.flags|=2,$):Q):(Z.flags|=2,$)):(Z.flags|=1048576,$)}function S(Z){return n&&Z.alternate===null&&(Z.flags|=2),Z}function O(Z,$,Q,me){return $===null||$.tag!==6?($=pf(Q,Z.mode,me),$.return=Z,$):($=g($,Q),$.return=Z,$)}function H(Z,$,Q,me){var De=Q.type;return De===F?he(Z,$,Q.props.children,me,Q.key):$!==null&&($.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===pe&&Rm(De)===$.type)?(me=g($,Q.props),me.ref=ru(Z,$,Q),me.return=Z,me):(me=$c(Q.type,Q.key,Q.props,null,Z.mode,me),me.ref=ru(Z,$,Q),me.return=Z,me)}function ee(Z,$,Q,me){return $===null||$.tag!==4||$.stateNode.containerInfo!==Q.containerInfo||$.stateNode.implementation!==Q.implementation?($=mf(Q,Z.mode,me),$.return=Z,$):($=g($,Q.children||[]),$.return=Z,$)}function he(Z,$,Q,me,De){return $===null||$.tag!==7?($=ma(Q,Z.mode,me,De),$.return=Z,$):($=g($,Q),$.return=Z,$)}function de(Z,$,Q){if(typeof $=="string"&&$!==""||typeof $=="number")return $=pf(""+$,Z.mode,Q),$.return=Z,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case be:return Q=$c($.type,$.key,$.props,null,Z.mode,Q),Q.ref=ru(Z,null,$),Q.return=Z,Q;case fe:return $=mf($,Z.mode,Q),$.return=Z,$;case pe:var me=$._init;return de(Z,me($._payload),Q)}if(kt($)||ke($))return $=ma($,Z.mode,Q,null),$.return=Z,$;wc(Z,$)}return null}function ue(Z,$,Q,me){var De=$!==null?$.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number")return De!==null?null:O(Z,$,""+Q,me);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case be:return Q.key===De?H(Z,$,Q,me):null;case fe:return Q.key===De?ee(Z,$,Q,me):null;case pe:return De=Q._init,ue(Z,$,De(Q._payload),me)}if(kt(Q)||ke(Q))return De!==null?null:he(Z,$,Q,me,null);wc(Z,Q)}return null}function Ie(Z,$,Q,me,De){if(typeof me=="string"&&me!==""||typeof me=="number")return Z=Z.get(Q)||null,O($,Z,""+me,De);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case be:return Z=Z.get(me.key===null?Q:me.key)||null,H($,Z,me,De);case fe:return Z=Z.get(me.key===null?Q:me.key)||null,ee($,Z,me,De);case pe:var Ue=me._init;return Ie(Z,$,Q,Ue(me._payload),De)}if(kt(me)||ke(me))return Z=Z.get(Q)||null,he($,Z,me,De,null);wc($,me)}return null}function Re(Z,$,Q,me){for(var De=null,Ue=null,Be=$,Ze=$=0,on=null;Be!==null&&Ze<Q.length;Ze++){Be.index>Ze?(on=Be,Be=null):on=Be.sibling;var pt=ue(Z,Be,Q[Ze],me);if(pt===null){Be===null&&(Be=on);break}n&&Be&&pt.alternate===null&&s(Z,Be),$=v(pt,$,Ze),Ue===null?De=pt:Ue.sibling=pt,Ue=pt,Be=on}if(Ze===Q.length)return u(Z,Be),Nt&&aa(Z,Ze),De;if(Be===null){for(;Ze<Q.length;Ze++)Be=de(Z,Q[Ze],me),Be!==null&&($=v(Be,$,Ze),Ue===null?De=Be:Ue.sibling=Be,Ue=Be);return Nt&&aa(Z,Ze),De}for(Be=f(Z,Be);Ze<Q.length;Ze++)on=Ie(Be,Z,Ze,Q[Ze],me),on!==null&&(n&&on.alternate!==null&&Be.delete(on.key===null?Ze:on.key),$=v(on,$,Ze),Ue===null?De=on:Ue.sibling=on,Ue=on);return n&&Be.forEach(function(vo){return s(Z,vo)}),Nt&&aa(Z,Ze),De}function Le(Z,$,Q,me){var De=ke(Q);if(typeof De!="function")throw Error(t(150));if(Q=De.call(Q),Q==null)throw Error(t(151));for(var Ue=De=null,Be=$,Ze=$=0,on=null,pt=Q.next();Be!==null&&!pt.done;Ze++,pt=Q.next()){Be.index>Ze?(on=Be,Be=null):on=Be.sibling;var vo=ue(Z,Be,pt.value,me);if(vo===null){Be===null&&(Be=on);break}n&&Be&&vo.alternate===null&&s(Z,Be),$=v(vo,$,Ze),Ue===null?De=vo:Ue.sibling=vo,Ue=vo,Be=on}if(pt.done)return u(Z,Be),Nt&&aa(Z,Ze),De;if(Be===null){for(;!pt.done;Ze++,pt=Q.next())pt=de(Z,pt.value,me),pt!==null&&($=v(pt,$,Ze),Ue===null?De=pt:Ue.sibling=pt,Ue=pt);return Nt&&aa(Z,Ze),De}for(Be=f(Z,Be);!pt.done;Ze++,pt=Q.next())pt=Ie(Be,Z,Ze,pt.value,me),pt!==null&&(n&&pt.alternate!==null&&Be.delete(pt.key===null?Ze:pt.key),$=v(pt,$,Ze),Ue===null?De=pt:Ue.sibling=pt,Ue=pt);return n&&Be.forEach(function(jw){return s(Z,jw)}),Nt&&aa(Z,Ze),De}function Ft(Z,$,Q,me){if(typeof Q=="object"&&Q!==null&&Q.type===F&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case be:e:{for(var De=Q.key,Ue=$;Ue!==null;){if(Ue.key===De){if(De=Q.type,De===F){if(Ue.tag===7){u(Z,Ue.sibling),$=g(Ue,Q.props.children),$.return=Z,Z=$;break e}}else if(Ue.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===pe&&Rm(De)===Ue.type){u(Z,Ue.sibling),$=g(Ue,Q.props),$.ref=ru(Z,Ue,Q),$.return=Z,Z=$;break e}u(Z,Ue);break}else s(Z,Ue);Ue=Ue.sibling}Q.type===F?($=ma(Q.props.children,Z.mode,me,Q.key),$.return=Z,Z=$):(me=$c(Q.type,Q.key,Q.props,null,Z.mode,me),me.ref=ru(Z,$,Q),me.return=Z,Z=me)}return S(Z);case fe:e:{for(Ue=Q.key;$!==null;){if($.key===Ue)if($.tag===4&&$.stateNode.containerInfo===Q.containerInfo&&$.stateNode.implementation===Q.implementation){u(Z,$.sibling),$=g($,Q.children||[]),$.return=Z,Z=$;break e}else{u(Z,$);break}else s(Z,$);$=$.sibling}$=mf(Q,Z.mode,me),$.return=Z,Z=$}return S(Z);case pe:return Ue=Q._init,Ft(Z,$,Ue(Q._payload),me)}if(kt(Q))return Re(Z,$,Q,me);if(ke(Q))return Le(Z,$,Q,me);wc(Z,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"?(Q=""+Q,$!==null&&$.tag===6?(u(Z,$.sibling),$=g($,Q),$.return=Z,Z=$):(u(Z,$),$=pf(Q,Z.mode,me),$.return=Z,Z=$),S(Z)):u(Z,$)}return Ft}var ol=Lm(!0),Dm=Lm(!1),Ec=ao(null),Tc=null,al=null,Td=null;function Id(){Td=al=Tc=null}function Sd(n){var s=Ec.current;St(Ec),n._currentValue=s}function Pd(n,s,u){for(;n!==null;){var f=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,f!==null&&(f.childLanes|=s)):f!==null&&(f.childLanes&s)!==s&&(f.childLanes|=s),n===u)break;n=n.return}}function ll(n,s){Tc=n,Td=al=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&s)!==0&&(er=!0),n.firstContext=null)}function Br(n){var s=n._currentValue;if(Td!==n)if(n={context:n,memoizedValue:s,next:null},al===null){if(Tc===null)throw Error(t(308));al=n,Tc.dependencies={lanes:0,firstContext:n}}else al=al.next=n;return s}var la=null;function bd(n){la===null?la=[n]:la.push(n)}function Mm(n,s,u,f){var g=s.interleaved;return g===null?(u.next=u,bd(s)):(u.next=g.next,g.next=u),s.interleaved=u,vs(n,f)}function vs(n,s){n.lanes|=s;var u=n.alternate;for(u!==null&&(u.lanes|=s),u=n,n=n.return;n!==null;)n.childLanes|=s,u=n.alternate,u!==null&&(u.childLanes|=s),u=n,n=n.return;return u.tag===3?u.stateNode:null}var co=!1;function kd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Om(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function xs(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function ho(n,s,u){var f=n.updateQueue;if(f===null)return null;if(f=f.shared,(ht&2)!==0){var g=f.pending;return g===null?s.next=s:(s.next=g.next,g.next=s),f.pending=s,vs(n,u)}return g=f.interleaved,g===null?(s.next=s,bd(f)):(s.next=g.next,g.next=s),f.interleaved=s,vs(n,u)}function Ic(n,s,u){if(s=s.updateQueue,s!==null&&(s=s.shared,(u&4194240)!==0)){var f=s.lanes;f&=n.pendingLanes,u|=f,s.lanes=u,ur(n,u)}}function jm(n,s){var u=n.updateQueue,f=n.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var g=null,v=null;if(u=u.firstBaseUpdate,u!==null){do{var S={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};v===null?g=v=S:v=v.next=S,u=u.next}while(u!==null);v===null?g=v=s:v=v.next=s}else g=v=s;u={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:f.shared,effects:f.effects},n.updateQueue=u;return}n=u.lastBaseUpdate,n===null?u.firstBaseUpdate=s:n.next=s,u.lastBaseUpdate=s}function Sc(n,s,u,f){var g=n.updateQueue;co=!1;var v=g.firstBaseUpdate,S=g.lastBaseUpdate,O=g.shared.pending;if(O!==null){g.shared.pending=null;var H=O,ee=H.next;H.next=null,S===null?v=ee:S.next=ee,S=H;var he=n.alternate;he!==null&&(he=he.updateQueue,O=he.lastBaseUpdate,O!==S&&(O===null?he.firstBaseUpdate=ee:O.next=ee,he.lastBaseUpdate=H))}if(v!==null){var de=g.baseState;S=0,he=ee=H=null,O=v;do{var ue=O.lane,Ie=O.eventTime;if((f&ue)===ue){he!==null&&(he=he.next={eventTime:Ie,lane:0,tag:O.tag,payload:O.payload,callback:O.callback,next:null});e:{var Re=n,Le=O;switch(ue=s,Ie=u,Le.tag){case 1:if(Re=Le.payload,typeof Re=="function"){de=Re.call(Ie,de,ue);break e}de=Re;break e;case 3:Re.flags=Re.flags&-65537|128;case 0:if(Re=Le.payload,ue=typeof Re=="function"?Re.call(Ie,de,ue):Re,ue==null)break e;de=oe({},de,ue);break e;case 2:co=!0}}O.callback!==null&&O.lane!==0&&(n.flags|=64,ue=g.effects,ue===null?g.effects=[O]:ue.push(O))}else Ie={eventTime:Ie,lane:ue,tag:O.tag,payload:O.payload,callback:O.callback,next:null},he===null?(ee=he=Ie,H=de):he=he.next=Ie,S|=ue;if(O=O.next,O===null){if(O=g.shared.pending,O===null)break;ue=O,O=ue.next,ue.next=null,g.lastBaseUpdate=ue,g.shared.pending=null}}while(!0);if(he===null&&(H=de),g.baseState=H,g.firstBaseUpdate=ee,g.lastBaseUpdate=he,s=g.shared.interleaved,s!==null){g=s;do S|=g.lane,g=g.next;while(g!==s)}else v===null&&(g.shared.lanes=0);ha|=S,n.lanes=S,n.memoizedState=de}}function Vm(n,s,u){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var f=n[s],g=f.callback;if(g!==null){if(f.callback=null,f=u,typeof g!="function")throw Error(t(191,g));g.call(f)}}}var iu={},Mi=ao(iu),su=ao(iu),ou=ao(iu);function ua(n){if(n===iu)throw Error(t(174));return n}function Cd(n,s){switch(Et(ou,s),Et(su,n),Et(Mi,iu),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:qi(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=qi(s,n)}St(Mi),Et(Mi,s)}function ul(){St(Mi),St(su),St(ou)}function Fm(n){ua(ou.current);var s=ua(Mi.current),u=qi(s,n.type);s!==u&&(Et(su,n),Et(Mi,u))}function Ad(n){su.current===n&&(St(Mi),St(su))}var Lt=ao(0);function Pc(n){for(var s=n;s!==null;){if(s.tag===13){var u=s.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Nd=[];function Rd(){for(var n=0;n<Nd.length;n++)Nd[n]._workInProgressVersionPrimary=null;Nd.length=0}var bc=Oe.ReactCurrentDispatcher,Ld=Oe.ReactCurrentBatchConfig,ca=0,Dt=null,Jt=null,rn=null,kc=!1,au=!1,lu=0,sw=0;function In(){throw Error(t(321))}function Dd(n,s){if(s===null)return!1;for(var u=0;u<s.length&&u<n.length;u++)if(!fr(n[u],s[u]))return!1;return!0}function Md(n,s,u,f,g,v){if(ca=v,Dt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,bc.current=n===null||n.memoizedState===null?uw:cw,n=u(f,g),au){v=0;do{if(au=!1,lu=0,25<=v)throw Error(t(301));v+=1,rn=Jt=null,s.updateQueue=null,bc.current=hw,n=u(f,g)}while(au)}if(bc.current=Nc,s=Jt!==null&&Jt.next!==null,ca=0,rn=Jt=Dt=null,kc=!1,s)throw Error(t(300));return n}function Od(){var n=lu!==0;return lu=0,n}function Oi(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rn===null?Dt.memoizedState=rn=n:rn=rn.next=n,rn}function Hr(){if(Jt===null){var n=Dt.alternate;n=n!==null?n.memoizedState:null}else n=Jt.next;var s=rn===null?Dt.memoizedState:rn.next;if(s!==null)rn=s,Jt=n;else{if(n===null)throw Error(t(310));Jt=n,n={memoizedState:Jt.memoizedState,baseState:Jt.baseState,baseQueue:Jt.baseQueue,queue:Jt.queue,next:null},rn===null?Dt.memoizedState=rn=n:rn=rn.next=n}return rn}function uu(n,s){return typeof s=="function"?s(n):s}function jd(n){var s=Hr(),u=s.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=n;var f=Jt,g=f.baseQueue,v=u.pending;if(v!==null){if(g!==null){var S=g.next;g.next=v.next,v.next=S}f.baseQueue=g=v,u.pending=null}if(g!==null){v=g.next,f=f.baseState;var O=S=null,H=null,ee=v;do{var he=ee.lane;if((ca&he)===he)H!==null&&(H=H.next={lane:0,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),f=ee.hasEagerState?ee.eagerState:n(f,ee.action);else{var de={lane:he,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null};H===null?(O=H=de,S=f):H=H.next=de,Dt.lanes|=he,ha|=he}ee=ee.next}while(ee!==null&&ee!==v);H===null?S=f:H.next=O,fr(f,s.memoizedState)||(er=!0),s.memoizedState=f,s.baseState=S,s.baseQueue=H,u.lastRenderedState=f}if(n=u.interleaved,n!==null){g=n;do v=g.lane,Dt.lanes|=v,ha|=v,g=g.next;while(g!==n)}else g===null&&(u.lanes=0);return[s.memoizedState,u.dispatch]}function Vd(n){var s=Hr(),u=s.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=n;var f=u.dispatch,g=u.pending,v=s.memoizedState;if(g!==null){u.pending=null;var S=g=g.next;do v=n(v,S.action),S=S.next;while(S!==g);fr(v,s.memoizedState)||(er=!0),s.memoizedState=v,s.baseQueue===null&&(s.baseState=v),u.lastRenderedState=v}return[v,f]}function zm(){}function Um(n,s){var u=Dt,f=Hr(),g=s(),v=!fr(f.memoizedState,g);if(v&&(f.memoizedState=g,er=!0),f=f.queue,Fd(Wm.bind(null,u,f,n),[n]),f.getSnapshot!==s||v||rn!==null&&rn.memoizedState.tag&1){if(u.flags|=2048,cu(9,Hm.bind(null,u,f,g,s),void 0,null),sn===null)throw Error(t(349));(ca&30)!==0||Bm(u,s,g)}return g}function Bm(n,s,u){n.flags|=16384,n={getSnapshot:s,value:u},s=Dt.updateQueue,s===null?(s={lastEffect:null,stores:null},Dt.updateQueue=s,s.stores=[n]):(u=s.stores,u===null?s.stores=[n]:u.push(n))}function Hm(n,s,u,f){s.value=u,s.getSnapshot=f,$m(s)&&qm(n)}function Wm(n,s,u){return u(function(){$m(s)&&qm(n)})}function $m(n){var s=n.getSnapshot;n=n.value;try{var u=s();return!fr(n,u)}catch{return!0}}function qm(n){var s=vs(n,1);s!==null&&ai(s,n,1,-1)}function Gm(n){var s=Oi();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:uu,lastRenderedState:n},s.queue=n,n=n.dispatch=lw.bind(null,Dt,n),[s.memoizedState,n]}function cu(n,s,u,f){return n={tag:n,create:s,destroy:u,deps:f,next:null},s=Dt.updateQueue,s===null?(s={lastEffect:null,stores:null},Dt.updateQueue=s,s.lastEffect=n.next=n):(u=s.lastEffect,u===null?s.lastEffect=n.next=n:(f=u.next,u.next=n,n.next=f,s.lastEffect=n)),n}function Km(){return Hr().memoizedState}function Cc(n,s,u,f){var g=Oi();Dt.flags|=n,g.memoizedState=cu(1|s,u,void 0,f===void 0?null:f)}function Ac(n,s,u,f){var g=Hr();f=f===void 0?null:f;var v=void 0;if(Jt!==null){var S=Jt.memoizedState;if(v=S.destroy,f!==null&&Dd(f,S.deps)){g.memoizedState=cu(s,u,v,f);return}}Dt.flags|=n,g.memoizedState=cu(1|s,u,v,f)}function Zm(n,s){return Cc(8390656,8,n,s)}function Fd(n,s){return Ac(2048,8,n,s)}function Qm(n,s){return Ac(4,2,n,s)}function Ym(n,s){return Ac(4,4,n,s)}function Jm(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Xm(n,s,u){return u=u!=null?u.concat([n]):null,Ac(4,4,Jm.bind(null,s,n),u)}function zd(){}function eg(n,s){var u=Hr();s=s===void 0?null:s;var f=u.memoizedState;return f!==null&&s!==null&&Dd(s,f[1])?f[0]:(u.memoizedState=[n,s],n)}function tg(n,s){var u=Hr();s=s===void 0?null:s;var f=u.memoizedState;return f!==null&&s!==null&&Dd(s,f[1])?f[0]:(n=n(),u.memoizedState=[n,s],n)}function ng(n,s,u){return(ca&21)===0?(n.baseState&&(n.baseState=!1,er=!0),n.memoizedState=u):(fr(u,s)||(u=Go(),Dt.lanes|=u,ha|=u,n.baseState=!0),s)}function ow(n,s){var u=tt;tt=u!==0&&4>u?u:4,n(!0);var f=Ld.transition;Ld.transition={};try{n(!1),s()}finally{tt=u,Ld.transition=f}}function rg(){return Hr().memoizedState}function aw(n,s,u){var f=go(n);if(u={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null},ig(n))sg(s,u);else if(u=Mm(n,s,u,f),u!==null){var g=Hn();ai(u,n,f,g),og(u,s,f)}}function lw(n,s,u){var f=go(n),g={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null};if(ig(n))sg(s,g);else{var v=n.alternate;if(n.lanes===0&&(v===null||v.lanes===0)&&(v=s.lastRenderedReducer,v!==null))try{var S=s.lastRenderedState,O=v(S,u);if(g.hasEagerState=!0,g.eagerState=O,fr(O,S)){var H=s.interleaved;H===null?(g.next=g,bd(s)):(g.next=H.next,H.next=g),s.interleaved=g;return}}catch{}finally{}u=Mm(n,s,g,f),u!==null&&(g=Hn(),ai(u,n,f,g),og(u,s,f))}}function ig(n){var s=n.alternate;return n===Dt||s!==null&&s===Dt}function sg(n,s){au=kc=!0;var u=n.pending;u===null?s.next=s:(s.next=u.next,u.next=s),n.pending=s}function og(n,s,u){if((u&4194240)!==0){var f=s.lanes;f&=n.pendingLanes,u|=f,s.lanes=u,ur(n,u)}}var Nc={readContext:Br,useCallback:In,useContext:In,useEffect:In,useImperativeHandle:In,useInsertionEffect:In,useLayoutEffect:In,useMemo:In,useReducer:In,useRef:In,useState:In,useDebugValue:In,useDeferredValue:In,useTransition:In,useMutableSource:In,useSyncExternalStore:In,useId:In,unstable_isNewReconciler:!1},uw={readContext:Br,useCallback:function(n,s){return Oi().memoizedState=[n,s===void 0?null:s],n},useContext:Br,useEffect:Zm,useImperativeHandle:function(n,s,u){return u=u!=null?u.concat([n]):null,Cc(4194308,4,Jm.bind(null,s,n),u)},useLayoutEffect:function(n,s){return Cc(4194308,4,n,s)},useInsertionEffect:function(n,s){return Cc(4,2,n,s)},useMemo:function(n,s){var u=Oi();return s=s===void 0?null:s,n=n(),u.memoizedState=[n,s],n},useReducer:function(n,s,u){var f=Oi();return s=u!==void 0?u(s):s,f.memoizedState=f.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},f.queue=n,n=n.dispatch=aw.bind(null,Dt,n),[f.memoizedState,n]},useRef:function(n){var s=Oi();return n={current:n},s.memoizedState=n},useState:Gm,useDebugValue:zd,useDeferredValue:function(n){return Oi().memoizedState=n},useTransition:function(){var n=Gm(!1),s=n[0];return n=ow.bind(null,n[1]),Oi().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,u){var f=Dt,g=Oi();if(Nt){if(u===void 0)throw Error(t(407));u=u()}else{if(u=s(),sn===null)throw Error(t(349));(ca&30)!==0||Bm(f,s,u)}g.memoizedState=u;var v={value:u,getSnapshot:s};return g.queue=v,Zm(Wm.bind(null,f,v,n),[n]),f.flags|=2048,cu(9,Hm.bind(null,f,v,u,s),void 0,null),u},useId:function(){var n=Oi(),s=sn.identifierPrefix;if(Nt){var u=ys,f=_s;u=(f&~(1<<32-Qe(f)-1)).toString(32)+u,s=":"+s+"R"+u,u=lu++,0<u&&(s+="H"+u.toString(32)),s+=":"}else u=sw++,s=":"+s+"r"+u.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},cw={readContext:Br,useCallback:eg,useContext:Br,useEffect:Fd,useImperativeHandle:Xm,useInsertionEffect:Qm,useLayoutEffect:Ym,useMemo:tg,useReducer:jd,useRef:Km,useState:function(){return jd(uu)},useDebugValue:zd,useDeferredValue:function(n){var s=Hr();return ng(s,Jt.memoizedState,n)},useTransition:function(){var n=jd(uu)[0],s=Hr().memoizedState;return[n,s]},useMutableSource:zm,useSyncExternalStore:Um,useId:rg,unstable_isNewReconciler:!1},hw={readContext:Br,useCallback:eg,useContext:Br,useEffect:Fd,useImperativeHandle:Xm,useInsertionEffect:Qm,useLayoutEffect:Ym,useMemo:tg,useReducer:Vd,useRef:Km,useState:function(){return Vd(uu)},useDebugValue:zd,useDeferredValue:function(n){var s=Hr();return Jt===null?s.memoizedState=n:ng(s,Jt.memoizedState,n)},useTransition:function(){var n=Vd(uu)[0],s=Hr().memoizedState;return[n,s]},useMutableSource:zm,useSyncExternalStore:Um,useId:rg,unstable_isNewReconciler:!1};function ii(n,s){if(n&&n.defaultProps){s=oe({},s),n=n.defaultProps;for(var u in n)s[u]===void 0&&(s[u]=n[u]);return s}return s}function Ud(n,s,u,f){s=n.memoizedState,u=u(f,s),u=u==null?s:oe({},s,u),n.memoizedState=u,n.lanes===0&&(n.updateQueue.baseState=u)}var Rc={isMounted:function(n){return(n=n._reactInternals)?qn(n)===n:!1},enqueueSetState:function(n,s,u){n=n._reactInternals;var f=Hn(),g=go(n),v=xs(f,g);v.payload=s,u!=null&&(v.callback=u),s=ho(n,v,g),s!==null&&(ai(s,n,g,f),Ic(s,n,g))},enqueueReplaceState:function(n,s,u){n=n._reactInternals;var f=Hn(),g=go(n),v=xs(f,g);v.tag=1,v.payload=s,u!=null&&(v.callback=u),s=ho(n,v,g),s!==null&&(ai(s,n,g,f),Ic(s,n,g))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var u=Hn(),f=go(n),g=xs(u,f);g.tag=2,s!=null&&(g.callback=s),s=ho(n,g,f),s!==null&&(ai(s,n,f,u),Ic(s,n,f))}};function ag(n,s,u,f,g,v,S){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(f,v,S):s.prototype&&s.prototype.isPureReactComponent?!Ni(u,f)||!Ni(g,v):!0}function lg(n,s,u){var f=!1,g=lo,v=s.contextType;return typeof v=="object"&&v!==null?v=Br(v):(g=Xn(s)?sa:Tn.current,f=s.contextTypes,v=(f=f!=null)?nl(n,g):lo),s=new s(u,v),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Rc,n.stateNode=s,s._reactInternals=n,f&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=g,n.__reactInternalMemoizedMaskedChildContext=v),s}function ug(n,s,u,f){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(u,f),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(u,f),s.state!==n&&Rc.enqueueReplaceState(s,s.state,null)}function Bd(n,s,u,f){var g=n.stateNode;g.props=u,g.state=n.memoizedState,g.refs={},kd(n);var v=s.contextType;typeof v=="object"&&v!==null?g.context=Br(v):(v=Xn(s)?sa:Tn.current,g.context=nl(n,v)),g.state=n.memoizedState,v=s.getDerivedStateFromProps,typeof v=="function"&&(Ud(n,s,v,u),g.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(s=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),s!==g.state&&Rc.enqueueReplaceState(g,g.state,null),Sc(n,u,g,f),g.state=n.memoizedState),typeof g.componentDidMount=="function"&&(n.flags|=4194308)}function cl(n,s){try{var u="",f=s;do u+=Se(f),f=f.return;while(f);var g=u}catch(v){g=`
Error generating stack: `+v.message+`
`+v.stack}return{value:n,source:s,stack:g,digest:null}}function Hd(n,s,u){return{value:n,source:null,stack:u??null,digest:s??null}}function Wd(n,s){try{console.error(s.value)}catch(u){setTimeout(function(){throw u})}}var dw=typeof WeakMap=="function"?WeakMap:Map;function cg(n,s,u){u=xs(-1,u),u.tag=3,u.payload={element:null};var f=s.value;return u.callback=function(){Fc||(Fc=!0,of=f),Wd(n,s)},u}function hg(n,s,u){u=xs(-1,u),u.tag=3;var f=n.type.getDerivedStateFromError;if(typeof f=="function"){var g=s.value;u.payload=function(){return f(g)},u.callback=function(){Wd(n,s)}}var v=n.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(u.callback=function(){Wd(n,s),typeof f!="function"&&(po===null?po=new Set([this]):po.add(this));var S=s.stack;this.componentDidCatch(s.value,{componentStack:S!==null?S:""})}),u}function dg(n,s,u){var f=n.pingCache;if(f===null){f=n.pingCache=new dw;var g=new Set;f.set(s,g)}else g=f.get(s),g===void 0&&(g=new Set,f.set(s,g));g.has(u)||(g.add(u),n=Pw.bind(null,n,s,u),s.then(n,n))}function fg(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function pg(n,s,u,f,g){return(n.mode&1)===0?(n===s?n.flags|=65536:(n.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(s=xs(-1,1),s.tag=2,ho(u,s,1))),u.lanes|=1),n):(n.flags|=65536,n.lanes=g,n)}var fw=Oe.ReactCurrentOwner,er=!1;function Bn(n,s,u,f){s.child=n===null?Dm(s,null,u,f):ol(s,n.child,u,f)}function mg(n,s,u,f,g){u=u.render;var v=s.ref;return ll(s,g),f=Md(n,s,u,f,v,g),u=Od(),n!==null&&!er?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~g,ws(n,s,g)):(Nt&&u&&yd(s),s.flags|=1,Bn(n,s,f,g),s.child)}function gg(n,s,u,f,g){if(n===null){var v=u.type;return typeof v=="function"&&!ff(v)&&v.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(s.tag=15,s.type=v,_g(n,s,v,f,g)):(n=$c(u.type,null,f,s,s.mode,g),n.ref=s.ref,n.return=s,s.child=n)}if(v=n.child,(n.lanes&g)===0){var S=v.memoizedProps;if(u=u.compare,u=u!==null?u:Ni,u(S,f)&&n.ref===s.ref)return ws(n,s,g)}return s.flags|=1,n=yo(v,f),n.ref=s.ref,n.return=s,s.child=n}function _g(n,s,u,f,g){if(n!==null){var v=n.memoizedProps;if(Ni(v,f)&&n.ref===s.ref)if(er=!1,s.pendingProps=f=v,(n.lanes&g)!==0)(n.flags&131072)!==0&&(er=!0);else return s.lanes=n.lanes,ws(n,s,g)}return $d(n,s,u,f,g)}function yg(n,s,u){var f=s.pendingProps,g=f.children,v=n!==null?n.memoizedState:null;if(f.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Et(dl,_r),_r|=u;else{if((u&1073741824)===0)return n=v!==null?v.baseLanes|u:u,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,Et(dl,_r),_r|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=v!==null?v.baseLanes:u,Et(dl,_r),_r|=f}else v!==null?(f=v.baseLanes|u,s.memoizedState=null):f=u,Et(dl,_r),_r|=f;return Bn(n,s,g,u),s.child}function vg(n,s){var u=s.ref;(n===null&&u!==null||n!==null&&n.ref!==u)&&(s.flags|=512,s.flags|=2097152)}function $d(n,s,u,f,g){var v=Xn(u)?sa:Tn.current;return v=nl(s,v),ll(s,g),u=Md(n,s,u,f,v,g),f=Od(),n!==null&&!er?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~g,ws(n,s,g)):(Nt&&f&&yd(s),s.flags|=1,Bn(n,s,u,g),s.child)}function xg(n,s,u,f,g){if(Xn(u)){var v=!0;gc(s)}else v=!1;if(ll(s,g),s.stateNode===null)Dc(n,s),lg(s,u,f),Bd(s,u,f,g),f=!0;else if(n===null){var S=s.stateNode,O=s.memoizedProps;S.props=O;var H=S.context,ee=u.contextType;typeof ee=="object"&&ee!==null?ee=Br(ee):(ee=Xn(u)?sa:Tn.current,ee=nl(s,ee));var he=u.getDerivedStateFromProps,de=typeof he=="function"||typeof S.getSnapshotBeforeUpdate=="function";de||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(O!==f||H!==ee)&&ug(s,S,f,ee),co=!1;var ue=s.memoizedState;S.state=ue,Sc(s,f,S,g),H=s.memoizedState,O!==f||ue!==H||Jn.current||co?(typeof he=="function"&&(Ud(s,u,he,f),H=s.memoizedState),(O=co||ag(s,u,O,f,ue,H,ee))?(de||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(s.flags|=4194308)):(typeof S.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=f,s.memoizedState=H),S.props=f,S.state=H,S.context=ee,f=O):(typeof S.componentDidMount=="function"&&(s.flags|=4194308),f=!1)}else{S=s.stateNode,Om(n,s),O=s.memoizedProps,ee=s.type===s.elementType?O:ii(s.type,O),S.props=ee,de=s.pendingProps,ue=S.context,H=u.contextType,typeof H=="object"&&H!==null?H=Br(H):(H=Xn(u)?sa:Tn.current,H=nl(s,H));var Ie=u.getDerivedStateFromProps;(he=typeof Ie=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(O!==de||ue!==H)&&ug(s,S,f,H),co=!1,ue=s.memoizedState,S.state=ue,Sc(s,f,S,g);var Re=s.memoizedState;O!==de||ue!==Re||Jn.current||co?(typeof Ie=="function"&&(Ud(s,u,Ie,f),Re=s.memoizedState),(ee=co||ag(s,u,ee,f,ue,Re,H)||!1)?(he||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(f,Re,H),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(f,Re,H)),typeof S.componentDidUpdate=="function"&&(s.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof S.componentDidUpdate!="function"||O===n.memoizedProps&&ue===n.memoizedState||(s.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||O===n.memoizedProps&&ue===n.memoizedState||(s.flags|=1024),s.memoizedProps=f,s.memoizedState=Re),S.props=f,S.state=Re,S.context=H,f=ee):(typeof S.componentDidUpdate!="function"||O===n.memoizedProps&&ue===n.memoizedState||(s.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||O===n.memoizedProps&&ue===n.memoizedState||(s.flags|=1024),f=!1)}return qd(n,s,u,f,v,g)}function qd(n,s,u,f,g,v){vg(n,s);var S=(s.flags&128)!==0;if(!f&&!S)return g&&Sm(s,u,!1),ws(n,s,v);f=s.stateNode,fw.current=s;var O=S&&typeof u.getDerivedStateFromError!="function"?null:f.render();return s.flags|=1,n!==null&&S?(s.child=ol(s,n.child,null,v),s.child=ol(s,null,O,v)):Bn(n,s,O,v),s.memoizedState=f.state,g&&Sm(s,u,!0),s.child}function wg(n){var s=n.stateNode;s.pendingContext?Tm(n,s.pendingContext,s.pendingContext!==s.context):s.context&&Tm(n,s.context,!1),Cd(n,s.containerInfo)}function Eg(n,s,u,f,g){return sl(),Ed(g),s.flags|=256,Bn(n,s,u,f),s.child}var Gd={dehydrated:null,treeContext:null,retryLane:0};function Kd(n){return{baseLanes:n,cachePool:null,transitions:null}}function Tg(n,s,u){var f=s.pendingProps,g=Lt.current,v=!1,S=(s.flags&128)!==0,O;if((O=S)||(O=n!==null&&n.memoizedState===null?!1:(g&2)!==0),O?(v=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(g|=1),Et(Lt,g&1),n===null)return wd(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((s.mode&1)===0?s.lanes=1:n.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(S=f.children,n=f.fallback,v?(f=s.mode,v=s.child,S={mode:"hidden",children:S},(f&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=S):v=qc(S,f,0,null),n=ma(n,f,u,null),v.return=s,n.return=s,v.sibling=n,s.child=v,s.child.memoizedState=Kd(u),s.memoizedState=Gd,n):Zd(s,S));if(g=n.memoizedState,g!==null&&(O=g.dehydrated,O!==null))return pw(n,s,S,f,O,g,u);if(v){v=f.fallback,S=s.mode,g=n.child,O=g.sibling;var H={mode:"hidden",children:f.children};return(S&1)===0&&s.child!==g?(f=s.child,f.childLanes=0,f.pendingProps=H,s.deletions=null):(f=yo(g,H),f.subtreeFlags=g.subtreeFlags&14680064),O!==null?v=yo(O,v):(v=ma(v,S,u,null),v.flags|=2),v.return=s,f.return=s,f.sibling=v,s.child=f,f=v,v=s.child,S=n.child.memoizedState,S=S===null?Kd(u):{baseLanes:S.baseLanes|u,cachePool:null,transitions:S.transitions},v.memoizedState=S,v.childLanes=n.childLanes&~u,s.memoizedState=Gd,f}return v=n.child,n=v.sibling,f=yo(v,{mode:"visible",children:f.children}),(s.mode&1)===0&&(f.lanes=u),f.return=s,f.sibling=null,n!==null&&(u=s.deletions,u===null?(s.deletions=[n],s.flags|=16):u.push(n)),s.child=f,s.memoizedState=null,f}function Zd(n,s){return s=qc({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function Lc(n,s,u,f){return f!==null&&Ed(f),ol(s,n.child,null,u),n=Zd(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function pw(n,s,u,f,g,v,S){if(u)return s.flags&256?(s.flags&=-257,f=Hd(Error(t(422))),Lc(n,s,S,f)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(v=f.fallback,g=s.mode,f=qc({mode:"visible",children:f.children},g,0,null),v=ma(v,g,S,null),v.flags|=2,f.return=s,v.return=s,f.sibling=v,s.child=f,(s.mode&1)!==0&&ol(s,n.child,null,S),s.child.memoizedState=Kd(S),s.memoizedState=Gd,v);if((s.mode&1)===0)return Lc(n,s,S,null);if(g.data==="$!"){if(f=g.nextSibling&&g.nextSibling.dataset,f)var O=f.dgst;return f=O,v=Error(t(419)),f=Hd(v,f,void 0),Lc(n,s,S,f)}if(O=(S&n.childLanes)!==0,er||O){if(f=sn,f!==null){switch(S&-S){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(f.suspendedLanes|S))!==0?0:g,g!==0&&g!==v.retryLane&&(v.retryLane=g,vs(n,g),ai(f,n,g,-1))}return df(),f=Hd(Error(t(421))),Lc(n,s,S,f)}return g.data==="$?"?(s.flags|=128,s.child=n.child,s=bw.bind(null,n),g._reactRetry=s,null):(n=v.treeContext,gr=Di(g.nextSibling),mr=s,Nt=!0,ri=null,n!==null&&(zr[Ur++]=_s,zr[Ur++]=ys,zr[Ur++]=oa,_s=n.id,ys=n.overflow,oa=s),s=Zd(s,f.children),s.flags|=4096,s)}function Ig(n,s,u){n.lanes|=s;var f=n.alternate;f!==null&&(f.lanes|=s),Pd(n.return,s,u)}function Qd(n,s,u,f,g){var v=n.memoizedState;v===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:g}:(v.isBackwards=s,v.rendering=null,v.renderingStartTime=0,v.last=f,v.tail=u,v.tailMode=g)}function Sg(n,s,u){var f=s.pendingProps,g=f.revealOrder,v=f.tail;if(Bn(n,s,f.children,u),f=Lt.current,(f&2)!==0)f=f&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Ig(n,u,s);else if(n.tag===19)Ig(n,u,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}f&=1}if(Et(Lt,f),(s.mode&1)===0)s.memoizedState=null;else switch(g){case"forwards":for(u=s.child,g=null;u!==null;)n=u.alternate,n!==null&&Pc(n)===null&&(g=u),u=u.sibling;u=g,u===null?(g=s.child,s.child=null):(g=u.sibling,u.sibling=null),Qd(s,!1,g,u,v);break;case"backwards":for(u=null,g=s.child,s.child=null;g!==null;){if(n=g.alternate,n!==null&&Pc(n)===null){s.child=g;break}n=g.sibling,g.sibling=u,u=g,g=n}Qd(s,!0,u,null,v);break;case"together":Qd(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Dc(n,s){(s.mode&1)===0&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function ws(n,s,u){if(n!==null&&(s.dependencies=n.dependencies),ha|=s.lanes,(u&s.childLanes)===0)return null;if(n!==null&&s.child!==n.child)throw Error(t(153));if(s.child!==null){for(n=s.child,u=yo(n,n.pendingProps),s.child=u,u.return=s;n.sibling!==null;)n=n.sibling,u=u.sibling=yo(n,n.pendingProps),u.return=s;u.sibling=null}return s.child}function mw(n,s,u){switch(s.tag){case 3:wg(s),sl();break;case 5:Fm(s);break;case 1:Xn(s.type)&&gc(s);break;case 4:Cd(s,s.stateNode.containerInfo);break;case 10:var f=s.type._context,g=s.memoizedProps.value;Et(Ec,f._currentValue),f._currentValue=g;break;case 13:if(f=s.memoizedState,f!==null)return f.dehydrated!==null?(Et(Lt,Lt.current&1),s.flags|=128,null):(u&s.child.childLanes)!==0?Tg(n,s,u):(Et(Lt,Lt.current&1),n=ws(n,s,u),n!==null?n.sibling:null);Et(Lt,Lt.current&1);break;case 19:if(f=(u&s.childLanes)!==0,(n.flags&128)!==0){if(f)return Sg(n,s,u);s.flags|=128}if(g=s.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Et(Lt,Lt.current),f)break;return null;case 22:case 23:return s.lanes=0,yg(n,s,u)}return ws(n,s,u)}var Pg,Yd,bg,kg;Pg=function(n,s){for(var u=s.child;u!==null;){if(u.tag===5||u.tag===6)n.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===s)break;for(;u.sibling===null;){if(u.return===null||u.return===s)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},Yd=function(){},bg=function(n,s,u,f){var g=n.memoizedProps;if(g!==f){n=s.stateNode,ua(Mi.current);var v=null;switch(u){case"input":g=di(n,g),f=di(n,f),v=[];break;case"select":g=oe({},g,{value:void 0}),f=oe({},f,{value:void 0}),v=[];break;case"textarea":g=Ds(n,g),f=Ds(n,f),v=[];break;default:typeof g.onClick!="function"&&typeof f.onClick=="function"&&(n.onclick=le)}lr(u,f);var S;u=null;for(ee in g)if(!f.hasOwnProperty(ee)&&g.hasOwnProperty(ee)&&g[ee]!=null)if(ee==="style"){var O=g[ee];for(S in O)O.hasOwnProperty(S)&&(u||(u={}),u[S]="")}else ee!=="dangerouslySetInnerHTML"&&ee!=="children"&&ee!=="suppressContentEditableWarning"&&ee!=="suppressHydrationWarning"&&ee!=="autoFocus"&&(a.hasOwnProperty(ee)?v||(v=[]):(v=v||[]).push(ee,null));for(ee in f){var H=f[ee];if(O=g!=null?g[ee]:void 0,f.hasOwnProperty(ee)&&H!==O&&(H!=null||O!=null))if(ee==="style")if(O){for(S in O)!O.hasOwnProperty(S)||H&&H.hasOwnProperty(S)||(u||(u={}),u[S]="");for(S in H)H.hasOwnProperty(S)&&O[S]!==H[S]&&(u||(u={}),u[S]=H[S])}else u||(v||(v=[]),v.push(ee,u)),u=H;else ee==="dangerouslySetInnerHTML"?(H=H?H.__html:void 0,O=O?O.__html:void 0,H!=null&&O!==H&&(v=v||[]).push(ee,H)):ee==="children"?typeof H!="string"&&typeof H!="number"||(v=v||[]).push(ee,""+H):ee!=="suppressContentEditableWarning"&&ee!=="suppressHydrationWarning"&&(a.hasOwnProperty(ee)?(H!=null&&ee==="onScroll"&&vt("scroll",n),v||O===H||(v=[])):(v=v||[]).push(ee,H))}u&&(v=v||[]).push("style",u);var ee=v;(s.updateQueue=ee)&&(s.flags|=4)}},kg=function(n,s,u,f){u!==f&&(s.flags|=4)};function hu(n,s){if(!Nt)switch(n.tailMode){case"hidden":s=n.tail;for(var u=null;s!==null;)s.alternate!==null&&(u=s),s=s.sibling;u===null?n.tail=null:u.sibling=null;break;case"collapsed":u=n.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:f.sibling=null}}function Sn(n){var s=n.alternate!==null&&n.alternate.child===n.child,u=0,f=0;if(s)for(var g=n.child;g!==null;)u|=g.lanes|g.childLanes,f|=g.subtreeFlags&14680064,f|=g.flags&14680064,g.return=n,g=g.sibling;else for(g=n.child;g!==null;)u|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=n,g=g.sibling;return n.subtreeFlags|=f,n.childLanes=u,s}function gw(n,s,u){var f=s.pendingProps;switch(vd(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Sn(s),null;case 1:return Xn(s.type)&&mc(),Sn(s),null;case 3:return f=s.stateNode,ul(),St(Jn),St(Tn),Rd(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(n===null||n.child===null)&&(xc(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,ri!==null&&(uf(ri),ri=null))),Yd(n,s),Sn(s),null;case 5:Ad(s);var g=ua(ou.current);if(u=s.type,n!==null&&s.stateNode!=null)bg(n,s,u,f,g),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!f){if(s.stateNode===null)throw Error(t(166));return Sn(s),null}if(n=ua(Mi.current),xc(s)){f=s.stateNode,u=s.type;var v=s.memoizedProps;switch(f[Fr]=s,f[so]=v,n=(s.mode&1)!==0,u){case"dialog":vt("cancel",f),vt("close",f);break;case"iframe":case"object":case"embed":vt("load",f);break;case"video":case"audio":for(g=0;g<no.length;g++)vt(no[g],f);break;case"source":vt("error",f);break;case"img":case"image":case"link":vt("error",f),vt("load",f);break;case"details":vt("toggle",f);break;case"input":fi(f,v),vt("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!v.multiple},vt("invalid",f);break;case"textarea":Ms(f,v),vt("invalid",f)}lr(u,v),g=null;for(var S in v)if(v.hasOwnProperty(S)){var O=v[S];S==="children"?typeof O=="string"?f.textContent!==O&&(v.suppressHydrationWarning!==!0&&J(f.textContent,O,n),g=["children",O]):typeof O=="number"&&f.textContent!==""+O&&(v.suppressHydrationWarning!==!0&&J(f.textContent,O,n),g=["children",""+O]):a.hasOwnProperty(S)&&O!=null&&S==="onScroll"&&vt("scroll",f)}switch(u){case"input":gn(f),ar(f,v,!0);break;case"textarea":gn(f),pi(f);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(f.onclick=le)}f=g,s.updateQueue=f,f!==null&&(s.flags|=4)}else{S=g.nodeType===9?g:g.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=$i(u)),n==="http://www.w3.org/1999/xhtml"?u==="script"?(n=S.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof f.is=="string"?n=S.createElement(u,{is:f.is}):(n=S.createElement(u),u==="select"&&(S=n,f.multiple?S.multiple=!0:f.size&&(S.size=f.size))):n=S.createElementNS(n,u),n[Fr]=s,n[so]=f,Pg(n,s,!1,!1),s.stateNode=n;e:{switch(S=xr(u,f),u){case"dialog":vt("cancel",n),vt("close",n),g=f;break;case"iframe":case"object":case"embed":vt("load",n),g=f;break;case"video":case"audio":for(g=0;g<no.length;g++)vt(no[g],n);g=f;break;case"source":vt("error",n),g=f;break;case"img":case"image":case"link":vt("error",n),vt("load",n),g=f;break;case"details":vt("toggle",n),g=f;break;case"input":fi(n,f),g=di(n,f),vt("invalid",n);break;case"option":g=f;break;case"select":n._wrapperState={wasMultiple:!!f.multiple},g=oe({},f,{value:void 0}),vt("invalid",n);break;case"textarea":Ms(n,f),g=Ds(n,f),vt("invalid",n);break;default:g=f}lr(u,g),O=g;for(v in O)if(O.hasOwnProperty(v)){var H=O[v];v==="style"?gi(n,H):v==="dangerouslySetInnerHTML"?(H=H?H.__html:void 0,H!=null&&Oa(n,H)):v==="children"?typeof H=="string"?(u!=="textarea"||H!=="")&&mi(n,H):typeof H=="number"&&mi(n,""+H):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(a.hasOwnProperty(v)?H!=null&&v==="onScroll"&&vt("scroll",n):H!=null&&Te(n,v,H,S))}switch(u){case"input":gn(n),ar(n,f,!1);break;case"textarea":gn(n),pi(n);break;case"option":f.value!=null&&n.setAttribute("value",""+re(f.value));break;case"select":n.multiple=!!f.multiple,v=f.value,v!=null?Rn(n,!!f.multiple,v,!1):f.defaultValue!=null&&Rn(n,!!f.multiple,f.defaultValue,!0);break;default:typeof g.onClick=="function"&&(n.onclick=le)}switch(u){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Sn(s),null;case 6:if(n&&s.stateNode!=null)kg(n,s,n.memoizedProps,f);else{if(typeof f!="string"&&s.stateNode===null)throw Error(t(166));if(u=ua(ou.current),ua(Mi.current),xc(s)){if(f=s.stateNode,u=s.memoizedProps,f[Fr]=s,(v=f.nodeValue!==u)&&(n=mr,n!==null))switch(n.tag){case 3:J(f.nodeValue,u,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&J(f.nodeValue,u,(n.mode&1)!==0)}v&&(s.flags|=4)}else f=(u.nodeType===9?u:u.ownerDocument).createTextNode(f),f[Fr]=s,s.stateNode=f}return Sn(s),null;case 13:if(St(Lt),f=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Nt&&gr!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Nm(),sl(),s.flags|=98560,v=!1;else if(v=xc(s),f!==null&&f.dehydrated!==null){if(n===null){if(!v)throw Error(t(318));if(v=s.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(t(317));v[Fr]=s}else sl(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Sn(s),v=!1}else ri!==null&&(uf(ri),ri=null),v=!0;if(!v)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=u,s):(f=f!==null,f!==(n!==null&&n.memoizedState!==null)&&f&&(s.child.flags|=8192,(s.mode&1)!==0&&(n===null||(Lt.current&1)!==0?Xt===0&&(Xt=3):df())),s.updateQueue!==null&&(s.flags|=4),Sn(s),null);case 4:return ul(),Yd(n,s),n===null&&ro(s.stateNode.containerInfo),Sn(s),null;case 10:return Sd(s.type._context),Sn(s),null;case 17:return Xn(s.type)&&mc(),Sn(s),null;case 19:if(St(Lt),v=s.memoizedState,v===null)return Sn(s),null;if(f=(s.flags&128)!==0,S=v.rendering,S===null)if(f)hu(v,!1);else{if(Xt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(S=Pc(n),S!==null){for(s.flags|=128,hu(v,!1),f=S.updateQueue,f!==null&&(s.updateQueue=f,s.flags|=4),s.subtreeFlags=0,f=u,u=s.child;u!==null;)v=u,n=f,v.flags&=14680066,S=v.alternate,S===null?(v.childLanes=0,v.lanes=n,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=S.childLanes,v.lanes=S.lanes,v.child=S.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=S.memoizedProps,v.memoizedState=S.memoizedState,v.updateQueue=S.updateQueue,v.type=S.type,n=S.dependencies,v.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),u=u.sibling;return Et(Lt,Lt.current&1|2),s.child}n=n.sibling}v.tail!==null&&xt()>fl&&(s.flags|=128,f=!0,hu(v,!1),s.lanes=4194304)}else{if(!f)if(n=Pc(S),n!==null){if(s.flags|=128,f=!0,u=n.updateQueue,u!==null&&(s.updateQueue=u,s.flags|=4),hu(v,!0),v.tail===null&&v.tailMode==="hidden"&&!S.alternate&&!Nt)return Sn(s),null}else 2*xt()-v.renderingStartTime>fl&&u!==1073741824&&(s.flags|=128,f=!0,hu(v,!1),s.lanes=4194304);v.isBackwards?(S.sibling=s.child,s.child=S):(u=v.last,u!==null?u.sibling=S:s.child=S,v.last=S)}return v.tail!==null?(s=v.tail,v.rendering=s,v.tail=s.sibling,v.renderingStartTime=xt(),s.sibling=null,u=Lt.current,Et(Lt,f?u&1|2:u&1),s):(Sn(s),null);case 22:case 23:return hf(),f=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==f&&(s.flags|=8192),f&&(s.mode&1)!==0?(_r&1073741824)!==0&&(Sn(s),s.subtreeFlags&6&&(s.flags|=8192)):Sn(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function _w(n,s){switch(vd(s),s.tag){case 1:return Xn(s.type)&&mc(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return ul(),St(Jn),St(Tn),Rd(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 5:return Ad(s),null;case 13:if(St(Lt),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(t(340));sl()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return St(Lt),null;case 4:return ul(),null;case 10:return Sd(s.type._context),null;case 22:case 23:return hf(),null;case 24:return null;default:return null}}var Mc=!1,Pn=!1,yw=typeof WeakSet=="function"?WeakSet:Set,Ae=null;function hl(n,s){var u=n.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(f){Ot(n,s,f)}else u.current=null}function Jd(n,s,u){try{u()}catch(f){Ot(n,s,f)}}var Cg=!1;function vw(n,s){if(we=Ar,n=Kl(),Zl(n)){if("selectionStart"in n)var u={start:n.selectionStart,end:n.selectionEnd};else e:{u=(u=n.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var g=f.anchorOffset,v=f.focusNode;f=f.focusOffset;try{u.nodeType,v.nodeType}catch{u=null;break e}var S=0,O=-1,H=-1,ee=0,he=0,de=n,ue=null;t:for(;;){for(var Ie;de!==u||g!==0&&de.nodeType!==3||(O=S+g),de!==v||f!==0&&de.nodeType!==3||(H=S+f),de.nodeType===3&&(S+=de.nodeValue.length),(Ie=de.firstChild)!==null;)ue=de,de=Ie;for(;;){if(de===n)break t;if(ue===u&&++ee===g&&(O=S),ue===v&&++he===f&&(H=S),(Ie=de.nextSibling)!==null)break;de=ue,ue=de.parentNode}de=Ie}u=O===-1||H===-1?null:{start:O,end:H}}else u=null}u=u||{start:0,end:0}}else u=null;for(Fe={focusedElem:n,selectionRange:u},Ar=!1,Ae=s;Ae!==null;)if(s=Ae,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,Ae=n;else for(;Ae!==null;){s=Ae;try{var Re=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(Re!==null){var Le=Re.memoizedProps,Ft=Re.memoizedState,Z=s.stateNode,$=Z.getSnapshotBeforeUpdate(s.elementType===s.type?Le:ii(s.type,Le),Ft);Z.__reactInternalSnapshotBeforeUpdate=$}break;case 3:var Q=s.stateNode.containerInfo;Q.nodeType===1?Q.textContent="":Q.nodeType===9&&Q.documentElement&&Q.removeChild(Q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(me){Ot(s,s.return,me)}if(n=s.sibling,n!==null){n.return=s.return,Ae=n;break}Ae=s.return}return Re=Cg,Cg=!1,Re}function du(n,s,u){var f=s.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var g=f=f.next;do{if((g.tag&n)===n){var v=g.destroy;g.destroy=void 0,v!==void 0&&Jd(s,u,v)}g=g.next}while(g!==f)}}function Oc(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var u=s=s.next;do{if((u.tag&n)===n){var f=u.create;u.destroy=f()}u=u.next}while(u!==s)}}function Xd(n){var s=n.ref;if(s!==null){var u=n.stateNode;switch(n.tag){case 5:n=u;break;default:n=u}typeof s=="function"?s(n):s.current=n}}function Ag(n){var s=n.alternate;s!==null&&(n.alternate=null,Ag(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[Fr],delete s[so],delete s[oo],delete s[pd],delete s[md])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Ng(n){return n.tag===5||n.tag===3||n.tag===4}function Rg(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Ng(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function ef(n,s,u){var f=n.tag;if(f===5||f===6)n=n.stateNode,s?u.nodeType===8?u.parentNode.insertBefore(n,s):u.insertBefore(n,s):(u.nodeType===8?(s=u.parentNode,s.insertBefore(n,u)):(s=u,s.appendChild(n)),u=u._reactRootContainer,u!=null||s.onclick!==null||(s.onclick=le));else if(f!==4&&(n=n.child,n!==null))for(ef(n,s,u),n=n.sibling;n!==null;)ef(n,s,u),n=n.sibling}function tf(n,s,u){var f=n.tag;if(f===5||f===6)n=n.stateNode,s?u.insertBefore(n,s):u.appendChild(n);else if(f!==4&&(n=n.child,n!==null))for(tf(n,s,u),n=n.sibling;n!==null;)tf(n,s,u),n=n.sibling}var hn=null,si=!1;function fo(n,s,u){for(u=u.child;u!==null;)Lg(n,s,u),u=u.sibling}function Lg(n,s,u){if(_n&&typeof _n.onCommitFiberUnmount=="function")try{_n.onCommitFiberUnmount(Ei,u)}catch{}switch(u.tag){case 5:Pn||hl(u,s);case 6:var f=hn,g=si;hn=null,fo(n,s,u),hn=f,si=g,hn!==null&&(si?(n=hn,u=u.stateNode,n.nodeType===8?n.parentNode.removeChild(u):n.removeChild(u)):hn.removeChild(u.stateNode));break;case 18:hn!==null&&(si?(n=hn,u=u.stateNode,n.nodeType===8?nu(n.parentNode,u):n.nodeType===1&&nu(n,u),vn(n)):nu(hn,u.stateNode));break;case 4:f=hn,g=si,hn=u.stateNode.containerInfo,si=!0,fo(n,s,u),hn=f,si=g;break;case 0:case 11:case 14:case 15:if(!Pn&&(f=u.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){g=f=f.next;do{var v=g,S=v.destroy;v=v.tag,S!==void 0&&((v&2)!==0||(v&4)!==0)&&Jd(u,s,S),g=g.next}while(g!==f)}fo(n,s,u);break;case 1:if(!Pn&&(hl(u,s),f=u.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=u.memoizedProps,f.state=u.memoizedState,f.componentWillUnmount()}catch(O){Ot(u,s,O)}fo(n,s,u);break;case 21:fo(n,s,u);break;case 22:u.mode&1?(Pn=(f=Pn)||u.memoizedState!==null,fo(n,s,u),Pn=f):fo(n,s,u);break;default:fo(n,s,u)}}function Dg(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var u=n.stateNode;u===null&&(u=n.stateNode=new yw),s.forEach(function(f){var g=kw.bind(null,n,f);u.has(f)||(u.add(f),f.then(g,g))})}}function oi(n,s){var u=s.deletions;if(u!==null)for(var f=0;f<u.length;f++){var g=u[f];try{var v=n,S=s,O=S;e:for(;O!==null;){switch(O.tag){case 5:hn=O.stateNode,si=!1;break e;case 3:hn=O.stateNode.containerInfo,si=!0;break e;case 4:hn=O.stateNode.containerInfo,si=!0;break e}O=O.return}if(hn===null)throw Error(t(160));Lg(v,S,g),hn=null,si=!1;var H=g.alternate;H!==null&&(H.return=null),g.return=null}catch(ee){Ot(g,s,ee)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Mg(s,n),s=s.sibling}function Mg(n,s){var u=n.alternate,f=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(oi(s,n),ji(n),f&4){try{du(3,n,n.return),Oc(3,n)}catch(Le){Ot(n,n.return,Le)}try{du(5,n,n.return)}catch(Le){Ot(n,n.return,Le)}}break;case 1:oi(s,n),ji(n),f&512&&u!==null&&hl(u,u.return);break;case 5:if(oi(s,n),ji(n),f&512&&u!==null&&hl(u,u.return),n.flags&32){var g=n.stateNode;try{mi(g,"")}catch(Le){Ot(n,n.return,Le)}}if(f&4&&(g=n.stateNode,g!=null)){var v=n.memoizedProps,S=u!==null?u.memoizedProps:v,O=n.type,H=n.updateQueue;if(n.updateQueue=null,H!==null)try{O==="input"&&v.type==="radio"&&v.name!=null&&Kr(g,v),xr(O,S);var ee=xr(O,v);for(S=0;S<H.length;S+=2){var he=H[S],de=H[S+1];he==="style"?gi(g,de):he==="dangerouslySetInnerHTML"?Oa(g,de):he==="children"?mi(g,de):Te(g,he,de,ee)}switch(O){case"input":or(g,v);break;case"textarea":Ma(g,v);break;case"select":var ue=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!v.multiple;var Ie=v.value;Ie!=null?Rn(g,!!v.multiple,Ie,!1):ue!==!!v.multiple&&(v.defaultValue!=null?Rn(g,!!v.multiple,v.defaultValue,!0):Rn(g,!!v.multiple,v.multiple?[]:"",!1))}g[so]=v}catch(Le){Ot(n,n.return,Le)}}break;case 6:if(oi(s,n),ji(n),f&4){if(n.stateNode===null)throw Error(t(162));g=n.stateNode,v=n.memoizedProps;try{g.nodeValue=v}catch(Le){Ot(n,n.return,Le)}}break;case 3:if(oi(s,n),ji(n),f&4&&u!==null&&u.memoizedState.isDehydrated)try{vn(s.containerInfo)}catch(Le){Ot(n,n.return,Le)}break;case 4:oi(s,n),ji(n);break;case 13:oi(s,n),ji(n),g=n.child,g.flags&8192&&(v=g.memoizedState!==null,g.stateNode.isHidden=v,!v||g.alternate!==null&&g.alternate.memoizedState!==null||(sf=xt())),f&4&&Dg(n);break;case 22:if(he=u!==null&&u.memoizedState!==null,n.mode&1?(Pn=(ee=Pn)||he,oi(s,n),Pn=ee):oi(s,n),ji(n),f&8192){if(ee=n.memoizedState!==null,(n.stateNode.isHidden=ee)&&!he&&(n.mode&1)!==0)for(Ae=n,he=n.child;he!==null;){for(de=Ae=he;Ae!==null;){switch(ue=Ae,Ie=ue.child,ue.tag){case 0:case 11:case 14:case 15:du(4,ue,ue.return);break;case 1:hl(ue,ue.return);var Re=ue.stateNode;if(typeof Re.componentWillUnmount=="function"){f=ue,u=ue.return;try{s=f,Re.props=s.memoizedProps,Re.state=s.memoizedState,Re.componentWillUnmount()}catch(Le){Ot(f,u,Le)}}break;case 5:hl(ue,ue.return);break;case 22:if(ue.memoizedState!==null){Vg(de);continue}}Ie!==null?(Ie.return=ue,Ae=Ie):Vg(de)}he=he.sibling}e:for(he=null,de=n;;){if(de.tag===5){if(he===null){he=de;try{g=de.stateNode,ee?(v=g.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(O=de.stateNode,H=de.memoizedProps.style,S=H!=null&&H.hasOwnProperty("display")?H.display:null,O.style.display=Yr("display",S))}catch(Le){Ot(n,n.return,Le)}}}else if(de.tag===6){if(he===null)try{de.stateNode.nodeValue=ee?"":de.memoizedProps}catch(Le){Ot(n,n.return,Le)}}else if((de.tag!==22&&de.tag!==23||de.memoizedState===null||de===n)&&de.child!==null){de.child.return=de,de=de.child;continue}if(de===n)break e;for(;de.sibling===null;){if(de.return===null||de.return===n)break e;he===de&&(he=null),de=de.return}he===de&&(he=null),de.sibling.return=de.return,de=de.sibling}}break;case 19:oi(s,n),ji(n),f&4&&Dg(n);break;case 21:break;default:oi(s,n),ji(n)}}function ji(n){var s=n.flags;if(s&2){try{e:{for(var u=n.return;u!==null;){if(Ng(u)){var f=u;break e}u=u.return}throw Error(t(160))}switch(f.tag){case 5:var g=f.stateNode;f.flags&32&&(mi(g,""),f.flags&=-33);var v=Rg(n);tf(n,v,g);break;case 3:case 4:var S=f.stateNode.containerInfo,O=Rg(n);ef(n,O,S);break;default:throw Error(t(161))}}catch(H){Ot(n,n.return,H)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function xw(n,s,u){Ae=n,Og(n)}function Og(n,s,u){for(var f=(n.mode&1)!==0;Ae!==null;){var g=Ae,v=g.child;if(g.tag===22&&f){var S=g.memoizedState!==null||Mc;if(!S){var O=g.alternate,H=O!==null&&O.memoizedState!==null||Pn;O=Mc;var ee=Pn;if(Mc=S,(Pn=H)&&!ee)for(Ae=g;Ae!==null;)S=Ae,H=S.child,S.tag===22&&S.memoizedState!==null?Fg(g):H!==null?(H.return=S,Ae=H):Fg(g);for(;v!==null;)Ae=v,Og(v),v=v.sibling;Ae=g,Mc=O,Pn=ee}jg(n)}else(g.subtreeFlags&8772)!==0&&v!==null?(v.return=g,Ae=v):jg(n)}}function jg(n){for(;Ae!==null;){var s=Ae;if((s.flags&8772)!==0){var u=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Pn||Oc(5,s);break;case 1:var f=s.stateNode;if(s.flags&4&&!Pn)if(u===null)f.componentDidMount();else{var g=s.elementType===s.type?u.memoizedProps:ii(s.type,u.memoizedProps);f.componentDidUpdate(g,u.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var v=s.updateQueue;v!==null&&Vm(s,v,f);break;case 3:var S=s.updateQueue;if(S!==null){if(u=null,s.child!==null)switch(s.child.tag){case 5:u=s.child.stateNode;break;case 1:u=s.child.stateNode}Vm(s,S,u)}break;case 5:var O=s.stateNode;if(u===null&&s.flags&4){u=O;var H=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":H.autoFocus&&u.focus();break;case"img":H.src&&(u.src=H.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var ee=s.alternate;if(ee!==null){var he=ee.memoizedState;if(he!==null){var de=he.dehydrated;de!==null&&vn(de)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Pn||s.flags&512&&Xd(s)}catch(ue){Ot(s,s.return,ue)}}if(s===n){Ae=null;break}if(u=s.sibling,u!==null){u.return=s.return,Ae=u;break}Ae=s.return}}function Vg(n){for(;Ae!==null;){var s=Ae;if(s===n){Ae=null;break}var u=s.sibling;if(u!==null){u.return=s.return,Ae=u;break}Ae=s.return}}function Fg(n){for(;Ae!==null;){var s=Ae;try{switch(s.tag){case 0:case 11:case 15:var u=s.return;try{Oc(4,s)}catch(H){Ot(s,u,H)}break;case 1:var f=s.stateNode;if(typeof f.componentDidMount=="function"){var g=s.return;try{f.componentDidMount()}catch(H){Ot(s,g,H)}}var v=s.return;try{Xd(s)}catch(H){Ot(s,v,H)}break;case 5:var S=s.return;try{Xd(s)}catch(H){Ot(s,S,H)}}}catch(H){Ot(s,s.return,H)}if(s===n){Ae=null;break}var O=s.sibling;if(O!==null){O.return=s.return,Ae=O;break}Ae=s.return}}var ww=Math.ceil,jc=Oe.ReactCurrentDispatcher,nf=Oe.ReactCurrentOwner,Wr=Oe.ReactCurrentBatchConfig,ht=0,sn=null,$t=null,dn=0,_r=0,dl=ao(0),Xt=0,fu=null,ha=0,Vc=0,rf=0,pu=null,tr=null,sf=0,fl=1/0,Es=null,Fc=!1,of=null,po=null,zc=!1,mo=null,Uc=0,mu=0,af=null,Bc=-1,Hc=0;function Hn(){return(ht&6)!==0?xt():Bc!==-1?Bc:Bc=xt()}function go(n){return(n.mode&1)===0?1:(ht&2)!==0&&dn!==0?dn&-dn:iw.transition!==null?(Hc===0&&(Hc=Go()),Hc):(n=tt,n!==0||(n=window.event,n=n===void 0?16:nt(n.type)),n)}function ai(n,s,u,f){if(50<mu)throw mu=0,af=null,Error(t(185));Dn(n,u,f),((ht&2)===0||n!==sn)&&(n===sn&&((ht&2)===0&&(Vc|=u),Xt===4&&_o(n,dn)),nr(n,f),u===1&&ht===0&&(s.mode&1)===0&&(fl=xt()+500,_c&&uo()))}function nr(n,s){var u=n.callbackNode;br(n,s);var f=mt(n,n===sn?dn:0);if(f===0)u!==null&&Yi(u),n.callbackNode=null,n.callbackPriority=0;else if(s=f&-f,n.callbackPriority!==s){if(u!=null&&Yi(u),s===1)n.tag===0?rw(Ug.bind(null,n)):Pm(Ug.bind(null,n)),En(function(){(ht&6)===0&&uo()}),u=null;else{switch(yn(f)){case 1:u=Fs;break;case 4:u=qo;break;case 16:u=Xi;break;case 536870912:u=Sr;break;default:u=Xi}u=Zg(u,zg.bind(null,n))}n.callbackPriority=s,n.callbackNode=u}}function zg(n,s){if(Bc=-1,Hc=0,(ht&6)!==0)throw Error(t(327));var u=n.callbackNode;if(pl()&&n.callbackNode!==u)return null;var f=mt(n,n===sn?dn:0);if(f===0)return null;if((f&30)!==0||(f&n.expiredLanes)!==0||s)s=Wc(n,f);else{s=f;var g=ht;ht|=2;var v=Hg();(sn!==n||dn!==s)&&(Es=null,fl=xt()+500,fa(n,s));do try{Iw();break}catch(O){Bg(n,O)}while(!0);Id(),jc.current=v,ht=g,$t!==null?s=0:(sn=null,dn=0,s=Xt)}if(s!==0){if(s===2&&(g=tn(n),g!==0&&(f=g,s=lf(n,g))),s===1)throw u=fu,fa(n,0),_o(n,f),nr(n,xt()),u;if(s===6)_o(n,f);else{if(g=n.current.alternate,(f&30)===0&&!Ew(g)&&(s=Wc(n,f),s===2&&(v=tn(n),v!==0&&(f=v,s=lf(n,v))),s===1))throw u=fu,fa(n,0),_o(n,f),nr(n,xt()),u;switch(n.finishedWork=g,n.finishedLanes=f,s){case 0:case 1:throw Error(t(345));case 2:pa(n,tr,Es);break;case 3:if(_o(n,f),(f&130023424)===f&&(s=sf+500-xt(),10<s)){if(mt(n,0)!==0)break;if(g=n.suspendedLanes,(g&f)!==f){Hn(),n.pingedLanes|=n.suspendedLanes&g;break}n.timeoutHandle=Yt(pa.bind(null,n,tr,Es),s);break}pa(n,tr,Es);break;case 4:if(_o(n,f),(f&4194240)===f)break;for(s=n.eventTimes,g=-1;0<f;){var S=31-Qe(f);v=1<<S,S=s[S],S>g&&(g=S),f&=~v}if(f=g,f=xt()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*ww(f/1960))-f,10<f){n.timeoutHandle=Yt(pa.bind(null,n,tr,Es),f);break}pa(n,tr,Es);break;case 5:pa(n,tr,Es);break;default:throw Error(t(329))}}}return nr(n,xt()),n.callbackNode===u?zg.bind(null,n):null}function lf(n,s){var u=pu;return n.current.memoizedState.isDehydrated&&(fa(n,s).flags|=256),n=Wc(n,s),n!==2&&(s=tr,tr=u,s!==null&&uf(s)),n}function uf(n){tr===null?tr=n:tr.push.apply(tr,n)}function Ew(n){for(var s=n;;){if(s.flags&16384){var u=s.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var f=0;f<u.length;f++){var g=u[f],v=g.getSnapshot;g=g.value;try{if(!fr(v(),g))return!1}catch{return!1}}}if(u=s.child,s.subtreeFlags&16384&&u!==null)u.return=s,s=u;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function _o(n,s){for(s&=~rf,s&=~Vc,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var u=31-Qe(s),f=1<<u;n[u]=-1,s&=~f}}function Ug(n){if((ht&6)!==0)throw Error(t(327));pl();var s=mt(n,0);if((s&1)===0)return nr(n,xt()),null;var u=Wc(n,s);if(n.tag!==0&&u===2){var f=tn(n);f!==0&&(s=f,u=lf(n,f))}if(u===1)throw u=fu,fa(n,0),_o(n,s),nr(n,xt()),u;if(u===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,pa(n,tr,Es),nr(n,xt()),null}function cf(n,s){var u=ht;ht|=1;try{return n(s)}finally{ht=u,ht===0&&(fl=xt()+500,_c&&uo())}}function da(n){mo!==null&&mo.tag===0&&(ht&6)===0&&pl();var s=ht;ht|=1;var u=Wr.transition,f=tt;try{if(Wr.transition=null,tt=1,n)return n()}finally{tt=f,Wr.transition=u,ht=s,(ht&6)===0&&uo()}}function hf(){_r=dl.current,St(dl)}function fa(n,s){n.finishedWork=null,n.finishedLanes=0;var u=n.timeoutHandle;if(u!==-1&&(n.timeoutHandle=-1,Wt(u)),$t!==null)for(u=$t.return;u!==null;){var f=u;switch(vd(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&mc();break;case 3:ul(),St(Jn),St(Tn),Rd();break;case 5:Ad(f);break;case 4:ul();break;case 13:St(Lt);break;case 19:St(Lt);break;case 10:Sd(f.type._context);break;case 22:case 23:hf()}u=u.return}if(sn=n,$t=n=yo(n.current,null),dn=_r=s,Xt=0,fu=null,rf=Vc=ha=0,tr=pu=null,la!==null){for(s=0;s<la.length;s++)if(u=la[s],f=u.interleaved,f!==null){u.interleaved=null;var g=f.next,v=u.pending;if(v!==null){var S=v.next;v.next=g,f.next=S}u.pending=f}la=null}return n}function Bg(n,s){do{var u=$t;try{if(Id(),bc.current=Nc,kc){for(var f=Dt.memoizedState;f!==null;){var g=f.queue;g!==null&&(g.pending=null),f=f.next}kc=!1}if(ca=0,rn=Jt=Dt=null,au=!1,lu=0,nf.current=null,u===null||u.return===null){Xt=1,fu=s,$t=null;break}e:{var v=n,S=u.return,O=u,H=s;if(s=dn,O.flags|=32768,H!==null&&typeof H=="object"&&typeof H.then=="function"){var ee=H,he=O,de=he.tag;if((he.mode&1)===0&&(de===0||de===11||de===15)){var ue=he.alternate;ue?(he.updateQueue=ue.updateQueue,he.memoizedState=ue.memoizedState,he.lanes=ue.lanes):(he.updateQueue=null,he.memoizedState=null)}var Ie=fg(S);if(Ie!==null){Ie.flags&=-257,pg(Ie,S,O,v,s),Ie.mode&1&&dg(v,ee,s),s=Ie,H=ee;var Re=s.updateQueue;if(Re===null){var Le=new Set;Le.add(H),s.updateQueue=Le}else Re.add(H);break e}else{if((s&1)===0){dg(v,ee,s),df();break e}H=Error(t(426))}}else if(Nt&&O.mode&1){var Ft=fg(S);if(Ft!==null){(Ft.flags&65536)===0&&(Ft.flags|=256),pg(Ft,S,O,v,s),Ed(cl(H,O));break e}}v=H=cl(H,O),Xt!==4&&(Xt=2),pu===null?pu=[v]:pu.push(v),v=S;do{switch(v.tag){case 3:v.flags|=65536,s&=-s,v.lanes|=s;var Z=cg(v,H,s);jm(v,Z);break e;case 1:O=H;var $=v.type,Q=v.stateNode;if((v.flags&128)===0&&(typeof $.getDerivedStateFromError=="function"||Q!==null&&typeof Q.componentDidCatch=="function"&&(po===null||!po.has(Q)))){v.flags|=65536,s&=-s,v.lanes|=s;var me=hg(v,O,s);jm(v,me);break e}}v=v.return}while(v!==null)}$g(u)}catch(De){s=De,$t===u&&u!==null&&($t=u=u.return);continue}break}while(!0)}function Hg(){var n=jc.current;return jc.current=Nc,n===null?Nc:n}function df(){(Xt===0||Xt===3||Xt===2)&&(Xt=4),sn===null||(ha&268435455)===0&&(Vc&268435455)===0||_o(sn,dn)}function Wc(n,s){var u=ht;ht|=2;var f=Hg();(sn!==n||dn!==s)&&(Es=null,fa(n,s));do try{Tw();break}catch(g){Bg(n,g)}while(!0);if(Id(),ht=u,jc.current=f,$t!==null)throw Error(t(261));return sn=null,dn=0,Xt}function Tw(){for(;$t!==null;)Wg($t)}function Iw(){for(;$t!==null&&!Ji();)Wg($t)}function Wg(n){var s=Kg(n.alternate,n,_r);n.memoizedProps=n.pendingProps,s===null?$g(n):$t=s,nf.current=null}function $g(n){var s=n;do{var u=s.alternate;if(n=s.return,(s.flags&32768)===0){if(u=gw(u,s,_r),u!==null){$t=u;return}}else{if(u=_w(u,s),u!==null){u.flags&=32767,$t=u;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Xt=6,$t=null;return}}if(s=s.sibling,s!==null){$t=s;return}$t=s=n}while(s!==null);Xt===0&&(Xt=5)}function pa(n,s,u){var f=tt,g=Wr.transition;try{Wr.transition=null,tt=1,Sw(n,s,u,f)}finally{Wr.transition=g,tt=f}return null}function Sw(n,s,u,f){do pl();while(mo!==null);if((ht&6)!==0)throw Error(t(327));u=n.finishedWork;var g=n.finishedLanes;if(u===null)return null;if(n.finishedWork=null,n.finishedLanes=0,u===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var v=u.lanes|u.childLanes;if(Ct(n,v),n===sn&&($t=sn=null,dn=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||zc||(zc=!0,Zg(Xi,function(){return pl(),null})),v=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||v){v=Wr.transition,Wr.transition=null;var S=tt;tt=1;var O=ht;ht|=4,nf.current=null,vw(n,u),Mg(u,n),jr(Fe),Ar=!!we,Fe=we=null,n.current=u,xw(u),Gn(),ht=O,tt=S,Wr.transition=v}else n.current=u;if(zc&&(zc=!1,mo=n,Uc=g),v=n.pendingLanes,v===0&&(po=null),Ti(u.stateNode),nr(n,xt()),s!==null)for(f=n.onRecoverableError,u=0;u<s.length;u++)g=s[u],f(g.value,{componentStack:g.stack,digest:g.digest});if(Fc)throw Fc=!1,n=of,of=null,n;return(Uc&1)!==0&&n.tag!==0&&pl(),v=n.pendingLanes,(v&1)!==0?n===af?mu++:(mu=0,af=n):mu=0,uo(),null}function pl(){if(mo!==null){var n=yn(Uc),s=Wr.transition,u=tt;try{if(Wr.transition=null,tt=16>n?16:n,mo===null)var f=!1;else{if(n=mo,mo=null,Uc=0,(ht&6)!==0)throw Error(t(331));var g=ht;for(ht|=4,Ae=n.current;Ae!==null;){var v=Ae,S=v.child;if((Ae.flags&16)!==0){var O=v.deletions;if(O!==null){for(var H=0;H<O.length;H++){var ee=O[H];for(Ae=ee;Ae!==null;){var he=Ae;switch(he.tag){case 0:case 11:case 15:du(8,he,v)}var de=he.child;if(de!==null)de.return=he,Ae=de;else for(;Ae!==null;){he=Ae;var ue=he.sibling,Ie=he.return;if(Ag(he),he===ee){Ae=null;break}if(ue!==null){ue.return=Ie,Ae=ue;break}Ae=Ie}}}var Re=v.alternate;if(Re!==null){var Le=Re.child;if(Le!==null){Re.child=null;do{var Ft=Le.sibling;Le.sibling=null,Le=Ft}while(Le!==null)}}Ae=v}}if((v.subtreeFlags&2064)!==0&&S!==null)S.return=v,Ae=S;else e:for(;Ae!==null;){if(v=Ae,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:du(9,v,v.return)}var Z=v.sibling;if(Z!==null){Z.return=v.return,Ae=Z;break e}Ae=v.return}}var $=n.current;for(Ae=$;Ae!==null;){S=Ae;var Q=S.child;if((S.subtreeFlags&2064)!==0&&Q!==null)Q.return=S,Ae=Q;else e:for(S=$;Ae!==null;){if(O=Ae,(O.flags&2048)!==0)try{switch(O.tag){case 0:case 11:case 15:Oc(9,O)}}catch(De){Ot(O,O.return,De)}if(O===S){Ae=null;break e}var me=O.sibling;if(me!==null){me.return=O.return,Ae=me;break e}Ae=O.return}}if(ht=g,uo(),_n&&typeof _n.onPostCommitFiberRoot=="function")try{_n.onPostCommitFiberRoot(Ei,n)}catch{}f=!0}return f}finally{tt=u,Wr.transition=s}}return!1}function qg(n,s,u){s=cl(u,s),s=cg(n,s,1),n=ho(n,s,1),s=Hn(),n!==null&&(Dn(n,1,s),nr(n,s))}function Ot(n,s,u){if(n.tag===3)qg(n,n,u);else for(;s!==null;){if(s.tag===3){qg(s,n,u);break}else if(s.tag===1){var f=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(po===null||!po.has(f))){n=cl(u,n),n=hg(s,n,1),s=ho(s,n,1),n=Hn(),s!==null&&(Dn(s,1,n),nr(s,n));break}}s=s.return}}function Pw(n,s,u){var f=n.pingCache;f!==null&&f.delete(s),s=Hn(),n.pingedLanes|=n.suspendedLanes&u,sn===n&&(dn&u)===u&&(Xt===4||Xt===3&&(dn&130023424)===dn&&500>xt()-sf?fa(n,0):rf|=u),nr(n,s)}function Gg(n,s){s===0&&((n.mode&1)===0?s=1:(s=Pr,Pr<<=1,(Pr&130023424)===0&&(Pr=4194304)));var u=Hn();n=vs(n,s),n!==null&&(Dn(n,s,u),nr(n,u))}function bw(n){var s=n.memoizedState,u=0;s!==null&&(u=s.retryLane),Gg(n,u)}function kw(n,s){var u=0;switch(n.tag){case 13:var f=n.stateNode,g=n.memoizedState;g!==null&&(u=g.retryLane);break;case 19:f=n.stateNode;break;default:throw Error(t(314))}f!==null&&f.delete(s),Gg(n,u)}var Kg;Kg=function(n,s,u){if(n!==null)if(n.memoizedProps!==s.pendingProps||Jn.current)er=!0;else{if((n.lanes&u)===0&&(s.flags&128)===0)return er=!1,mw(n,s,u);er=(n.flags&131072)!==0}else er=!1,Nt&&(s.flags&1048576)!==0&&bm(s,vc,s.index);switch(s.lanes=0,s.tag){case 2:var f=s.type;Dc(n,s),n=s.pendingProps;var g=nl(s,Tn.current);ll(s,u),g=Md(null,s,f,n,g,u);var v=Od();return s.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Xn(f)?(v=!0,gc(s)):v=!1,s.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,kd(s),g.updater=Rc,s.stateNode=g,g._reactInternals=s,Bd(s,f,n,u),s=qd(null,s,f,!0,v,u)):(s.tag=0,Nt&&v&&yd(s),Bn(null,s,g,u),s=s.child),s;case 16:f=s.elementType;e:{switch(Dc(n,s),n=s.pendingProps,g=f._init,f=g(f._payload),s.type=f,g=s.tag=Aw(f),n=ii(f,n),g){case 0:s=$d(null,s,f,n,u);break e;case 1:s=xg(null,s,f,n,u);break e;case 11:s=mg(null,s,f,n,u);break e;case 14:s=gg(null,s,f,ii(f.type,n),u);break e}throw Error(t(306,f,""))}return s;case 0:return f=s.type,g=s.pendingProps,g=s.elementType===f?g:ii(f,g),$d(n,s,f,g,u);case 1:return f=s.type,g=s.pendingProps,g=s.elementType===f?g:ii(f,g),xg(n,s,f,g,u);case 3:e:{if(wg(s),n===null)throw Error(t(387));f=s.pendingProps,v=s.memoizedState,g=v.element,Om(n,s),Sc(s,f,null,u);var S=s.memoizedState;if(f=S.element,v.isDehydrated)if(v={element:f,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},s.updateQueue.baseState=v,s.memoizedState=v,s.flags&256){g=cl(Error(t(423)),s),s=Eg(n,s,f,u,g);break e}else if(f!==g){g=cl(Error(t(424)),s),s=Eg(n,s,f,u,g);break e}else for(gr=Di(s.stateNode.containerInfo.firstChild),mr=s,Nt=!0,ri=null,u=Dm(s,null,f,u),s.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(sl(),f===g){s=ws(n,s,u);break e}Bn(n,s,f,u)}s=s.child}return s;case 5:return Fm(s),n===null&&wd(s),f=s.type,g=s.pendingProps,v=n!==null?n.memoizedProps:null,S=g.children,et(f,g)?S=null:v!==null&&et(f,v)&&(s.flags|=32),vg(n,s),Bn(n,s,S,u),s.child;case 6:return n===null&&wd(s),null;case 13:return Tg(n,s,u);case 4:return Cd(s,s.stateNode.containerInfo),f=s.pendingProps,n===null?s.child=ol(s,null,f,u):Bn(n,s,f,u),s.child;case 11:return f=s.type,g=s.pendingProps,g=s.elementType===f?g:ii(f,g),mg(n,s,f,g,u);case 7:return Bn(n,s,s.pendingProps,u),s.child;case 8:return Bn(n,s,s.pendingProps.children,u),s.child;case 12:return Bn(n,s,s.pendingProps.children,u),s.child;case 10:e:{if(f=s.type._context,g=s.pendingProps,v=s.memoizedProps,S=g.value,Et(Ec,f._currentValue),f._currentValue=S,v!==null)if(fr(v.value,S)){if(v.children===g.children&&!Jn.current){s=ws(n,s,u);break e}}else for(v=s.child,v!==null&&(v.return=s);v!==null;){var O=v.dependencies;if(O!==null){S=v.child;for(var H=O.firstContext;H!==null;){if(H.context===f){if(v.tag===1){H=xs(-1,u&-u),H.tag=2;var ee=v.updateQueue;if(ee!==null){ee=ee.shared;var he=ee.pending;he===null?H.next=H:(H.next=he.next,he.next=H),ee.pending=H}}v.lanes|=u,H=v.alternate,H!==null&&(H.lanes|=u),Pd(v.return,u,s),O.lanes|=u;break}H=H.next}}else if(v.tag===10)S=v.type===s.type?null:v.child;else if(v.tag===18){if(S=v.return,S===null)throw Error(t(341));S.lanes|=u,O=S.alternate,O!==null&&(O.lanes|=u),Pd(S,u,s),S=v.sibling}else S=v.child;if(S!==null)S.return=v;else for(S=v;S!==null;){if(S===s){S=null;break}if(v=S.sibling,v!==null){v.return=S.return,S=v;break}S=S.return}v=S}Bn(n,s,g.children,u),s=s.child}return s;case 9:return g=s.type,f=s.pendingProps.children,ll(s,u),g=Br(g),f=f(g),s.flags|=1,Bn(n,s,f,u),s.child;case 14:return f=s.type,g=ii(f,s.pendingProps),g=ii(f.type,g),gg(n,s,f,g,u);case 15:return _g(n,s,s.type,s.pendingProps,u);case 17:return f=s.type,g=s.pendingProps,g=s.elementType===f?g:ii(f,g),Dc(n,s),s.tag=1,Xn(f)?(n=!0,gc(s)):n=!1,ll(s,u),lg(s,f,g),Bd(s,f,g,u),qd(null,s,f,!0,n,u);case 19:return Sg(n,s,u);case 22:return yg(n,s,u)}throw Error(t(156,s.tag))};function Zg(n,s){return $o(n,s)}function Cw(n,s,u,f){this.tag=n,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $r(n,s,u,f){return new Cw(n,s,u,f)}function ff(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Aw(n){if(typeof n=="function")return ff(n)?1:0;if(n!=null){if(n=n.$$typeof,n===R)return 11;if(n===Ke)return 14}return 2}function yo(n,s){var u=n.alternate;return u===null?(u=$r(n.tag,s,n.key,n.mode),u.elementType=n.elementType,u.type=n.type,u.stateNode=n.stateNode,u.alternate=n,n.alternate=u):(u.pendingProps=s,u.type=n.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=n.flags&14680064,u.childLanes=n.childLanes,u.lanes=n.lanes,u.child=n.child,u.memoizedProps=n.memoizedProps,u.memoizedState=n.memoizedState,u.updateQueue=n.updateQueue,s=n.dependencies,u.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},u.sibling=n.sibling,u.index=n.index,u.ref=n.ref,u}function $c(n,s,u,f,g,v){var S=2;if(f=n,typeof n=="function")ff(n)&&(S=1);else if(typeof n=="string")S=5;else e:switch(n){case F:return ma(u.children,g,v,s);case D:S=8,g|=8;break;case M:return n=$r(12,u,s,g|2),n.elementType=M,n.lanes=v,n;case A:return n=$r(13,u,s,g),n.elementType=A,n.lanes=v,n;case ye:return n=$r(19,u,s,g),n.elementType=ye,n.lanes=v,n;case Ve:return qc(u,g,v,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case B:S=10;break e;case j:S=9;break e;case R:S=11;break e;case Ke:S=14;break e;case pe:S=16,f=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return s=$r(S,u,s,g),s.elementType=n,s.type=f,s.lanes=v,s}function ma(n,s,u,f){return n=$r(7,n,f,s),n.lanes=u,n}function qc(n,s,u,f){return n=$r(22,n,f,s),n.elementType=Ve,n.lanes=u,n.stateNode={isHidden:!1},n}function pf(n,s,u){return n=$r(6,n,null,s),n.lanes=u,n}function mf(n,s,u){return s=$r(4,n.children!==null?n.children:[],n.key,s),s.lanes=u,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function Nw(n,s,u,f,g){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ii(0),this.expirationTimes=Ii(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ii(0),this.identifierPrefix=f,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function gf(n,s,u,f,g,v,S,O,H){return n=new Nw(n,s,u,O,H),s===1?(s=1,v===!0&&(s|=8)):s=0,v=$r(3,null,null,s),n.current=v,v.stateNode=n,v.memoizedState={element:f,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},kd(v),n}function Rw(n,s,u){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:fe,key:f==null?null:""+f,children:n,containerInfo:s,implementation:u}}function Qg(n){if(!n)return lo;n=n._reactInternals;e:{if(qn(n)!==n||n.tag!==1)throw Error(t(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Xn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(n.tag===1){var u=n.type;if(Xn(u))return Im(n,u,s)}return s}function Yg(n,s,u,f,g,v,S,O,H){return n=gf(u,f,!0,n,g,v,S,O,H),n.context=Qg(null),u=n.current,f=Hn(),g=go(u),v=xs(f,g),v.callback=s??null,ho(u,v,g),n.current.lanes=g,Dn(n,g,f),nr(n,f),n}function Gc(n,s,u,f){var g=s.current,v=Hn(),S=go(g);return u=Qg(u),s.context===null?s.context=u:s.pendingContext=u,s=xs(v,S),s.payload={element:n},f=f===void 0?null:f,f!==null&&(s.callback=f),n=ho(g,s,S),n!==null&&(ai(n,g,S,v),Ic(n,g,S)),S}function Kc(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Jg(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var u=n.retryLane;n.retryLane=u!==0&&u<s?u:s}}function _f(n,s){Jg(n,s),(n=n.alternate)&&Jg(n,s)}function Lw(){return null}var Xg=typeof reportError=="function"?reportError:function(n){console.error(n)};function yf(n){this._internalRoot=n}Zc.prototype.render=yf.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(t(409));Gc(n,s,null,null)},Zc.prototype.unmount=yf.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;da(function(){Gc(null,n,null,null)}),s[_t]=null}};function Zc(n){this._internalRoot=n}Zc.prototype.unstable_scheduleHydration=function(n){if(n){var s=rs();n={blockedOn:null,target:n,priority:s};for(var u=0;u<At.length&&s!==0&&s<At[u].priority;u++);At.splice(u,0,n),u===0&&bi(n)}};function vf(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Qc(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function e_(){}function Dw(n,s,u,f,g){if(g){if(typeof f=="function"){var v=f;f=function(){var ee=Kc(S);v.call(ee)}}var S=Yg(s,f,n,0,null,!1,!1,"",e_);return n._reactRootContainer=S,n[_t]=S.current,ro(n.nodeType===8?n.parentNode:n),da(),S}for(;g=n.lastChild;)n.removeChild(g);if(typeof f=="function"){var O=f;f=function(){var ee=Kc(H);O.call(ee)}}var H=gf(n,0,!1,null,null,!1,!1,"",e_);return n._reactRootContainer=H,n[_t]=H.current,ro(n.nodeType===8?n.parentNode:n),da(function(){Gc(s,H,u,f)}),H}function Yc(n,s,u,f,g){var v=u._reactRootContainer;if(v){var S=v;if(typeof g=="function"){var O=g;g=function(){var H=Kc(S);O.call(H)}}Gc(s,S,n,g)}else S=Dw(u,s,n,g,f);return Kc(S)}ts=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var u=Ee(s.pendingLanes);u!==0&&(ur(s,u|1),nr(s,xt()),(ht&6)===0&&(fl=xt()+500,uo()))}break;case 13:da(function(){var f=vs(n,1);if(f!==null){var g=Hn();ai(f,n,1,g)}}),_f(n,1)}},kr=function(n){if(n.tag===13){var s=vs(n,134217728);if(s!==null){var u=Hn();ai(s,n,134217728,u)}_f(n,134217728)}},ns=function(n){if(n.tag===13){var s=go(n),u=vs(n,s);if(u!==null){var f=Hn();ai(u,n,s,f)}_f(n,s)}},rs=function(){return tt},Si=function(n,s){var u=tt;try{return tt=n,s()}finally{tt=u}},wr=function(n,s,u){switch(s){case"input":if(or(n,u),s=u.name,u.type==="radio"&&s!=null){for(u=n;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<u.length;s++){var f=u[s];if(f!==n&&f.form===n.form){var g=el(f);if(!g)throw Error(t(90));jt(f),or(f,g)}}}break;case"textarea":Ma(n,u);break;case"select":s=u.value,s!=null&&Rn(n,!!u.multiple,s,!1)}},Va=cf,Fa=da;var Mw={usingClientEntryPoint:!1,Events:[ps,ms,el,yi,vi,cf]},gu={findFiberByHostInstance:fs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ow={bundleType:gu.bundleType,version:gu.version,rendererPackageName:gu.rendererPackageName,rendererConfig:gu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Oe.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Ba(n),n===null?null:n.stateNode},findFiberByHostInstance:gu.findFiberByHostInstance||Lw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jc.isDisabled&&Jc.supportsFiber)try{Ei=Jc.inject(Ow),_n=Jc}catch{}}return rr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Mw,rr.createPortal=function(n,s){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vf(s))throw Error(t(200));return Rw(n,s,null,u)},rr.createRoot=function(n,s){if(!vf(n))throw Error(t(299));var u=!1,f="",g=Xg;return s!=null&&(s.unstable_strictMode===!0&&(u=!0),s.identifierPrefix!==void 0&&(f=s.identifierPrefix),s.onRecoverableError!==void 0&&(g=s.onRecoverableError)),s=gf(n,1,!1,null,null,u,!1,f,g),n[_t]=s.current,ro(n.nodeType===8?n.parentNode:n),new yf(s)},rr.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Ba(s),n=n===null?null:n.stateNode,n},rr.flushSync=function(n){return da(n)},rr.hydrate=function(n,s,u){if(!Qc(s))throw Error(t(200));return Yc(null,n,s,!0,u)},rr.hydrateRoot=function(n,s,u){if(!vf(n))throw Error(t(405));var f=u!=null&&u.hydratedSources||null,g=!1,v="",S=Xg;if(u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(v=u.identifierPrefix),u.onRecoverableError!==void 0&&(S=u.onRecoverableError)),s=Yg(s,null,n,1,u??null,g,!1,v,S),n[_t]=s.current,ro(n),f)for(n=0;n<f.length;n++)u=f[n],g=u._getVersion,g=g(u._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[u,g]:s.mutableSourceEagerHydrationData.push(u,g);return new Zc(s)},rr.render=function(n,s,u){if(!Qc(s))throw Error(t(200));return Yc(null,n,s,!1,u)},rr.unmountComponentAtNode=function(n){if(!Qc(n))throw Error(t(40));return n._reactRootContainer?(da(function(){Yc(null,null,n,!1,function(){n._reactRootContainer=null,n[_t]=null})}),!0):!1},rr.unstable_batchedUpdates=cf,rr.unstable_renderSubtreeIntoContainer=function(n,s,u,f){if(!Qc(u))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Yc(n,s,u,!1,f)},rr.version="18.3.1-next-f1338f8080-20240426",rr}var l_;function sv(){if(l_)return Ef.exports;l_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Ef.exports=Hw(),Ef.exports}var u_;function Ww(){if(u_)return Xc;u_=1;var r=sv();return Xc.createRoot=r.createRoot,Xc.hydrateRoot=r.hydrateRoot,Xc}var $w=Ww();const qw=()=>{};var c_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov=function(r){const e=[];let t=0;for(let o=0;o<r.length;o++){let a=r.charCodeAt(o);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&o+1<r.length&&(r.charCodeAt(o+1)&64512)===56320?(a=65536+((a&1023)<<10)+(r.charCodeAt(++o)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},Gw=function(r){const e=[];let t=0,o=0;for(;t<r.length;){const a=r[t++];if(a<128)e[o++]=String.fromCharCode(a);else if(a>191&&a<224){const c=r[t++];e[o++]=String.fromCharCode((a&31)<<6|c&63)}else if(a>239&&a<365){const c=r[t++],p=r[t++],y=r[t++],w=((a&7)<<18|(c&63)<<12|(p&63)<<6|y&63)-65536;e[o++]=String.fromCharCode(55296+(w>>10)),e[o++]=String.fromCharCode(56320+(w&1023))}else{const c=r[t++],p=r[t++];e[o++]=String.fromCharCode((a&15)<<12|(c&63)<<6|p&63)}}return e.join("")},av={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let a=0;a<r.length;a+=3){const c=r[a],p=a+1<r.length,y=p?r[a+1]:0,w=a+2<r.length,T=w?r[a+2]:0,b=c>>2,k=(c&3)<<4|y>>4;let N=(y&15)<<2|T>>6,V=T&63;w||(V=64,p||(N=64)),o.push(t[b],t[k],t[N],t[V])}return o.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(ov(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):Gw(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let a=0;a<r.length;){const c=t[r.charAt(a++)],y=a<r.length?t[r.charAt(a)]:0;++a;const T=a<r.length?t[r.charAt(a)]:64;++a;const k=a<r.length?t[r.charAt(a)]:64;if(++a,c==null||y==null||T==null||k==null)throw new Kw;const N=c<<2|y>>4;if(o.push(N),T!==64){const V=y<<4&240|T>>2;if(o.push(V),k!==64){const U=T<<6&192|k;o.push(U)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class Kw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Zw=function(r){const e=ov(r);return av.encodeByteArray(e,!0)},xh=function(r){return Zw(r).replace(/\./g,"")},lv=function(r){try{return av.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yw=()=>Qw().__FIREBASE_DEFAULTS__,Jw=()=>{if(typeof process>"u"||typeof c_>"u")return;const r=c_.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},Xw=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&lv(r[1]);return e&&JSON.parse(e)},Uh=()=>{try{return qw()||Yw()||Jw()||Xw()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},uv=r=>{var e,t;return(t=(e=Uh())==null?void 0:e.emulatorHosts)==null?void 0:t[r]},e1=r=>{const e=uv(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const o=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),o]:[e.substring(0,t),o]},cv=()=>{var r;return(r=Uh())==null?void 0:r.config},hv=r=>{var e;return(e=Uh())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,o)=>{t?this.reject(t):this.resolve(o),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,o))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ml(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function dv(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n1(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},o=e||"demo-project",a=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const p={iss:`https://securetoken.google.com/${o}`,aud:o,iat:a,exp:a+3600,auth_time:a,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...r};return[xh(JSON.stringify(t)),xh(JSON.stringify(p)),""].join(".")}const Pu={};function r1(){const r={prod:[],emulator:[]};for(const e of Object.keys(Pu))Pu[e]?r.emulator.push(e):r.prod.push(e);return r}function i1(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let h_=!1;function fv(r,e){if(typeof window>"u"||typeof document>"u"||!Ml(window.location.host)||Pu[r]===e||Pu[r]||h_)return;Pu[r]=e;function t(N){return`__firebase__banner__${N}`}const o="__firebase__banner",c=r1().prod.length>0;function p(){const N=document.getElementById(o);N&&N.remove()}function y(N){N.style.display="flex",N.style.background="#7faaf0",N.style.position="fixed",N.style.bottom="5px",N.style.left="5px",N.style.padding=".5em",N.style.borderRadius="5px",N.style.alignItems="center"}function w(N,V){N.setAttribute("width","24"),N.setAttribute("id",V),N.setAttribute("height","24"),N.setAttribute("viewBox","0 0 24 24"),N.setAttribute("fill","none"),N.style.marginLeft="-6px"}function T(){const N=document.createElement("span");return N.style.cursor="pointer",N.style.marginLeft="16px",N.style.fontSize="24px",N.innerHTML=" &times;",N.onclick=()=>{h_=!0,p()},N}function b(N,V){N.setAttribute("id",V),N.innerText="Learn more",N.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",N.setAttribute("target","__blank"),N.style.paddingLeft="5px",N.style.textDecoration="underline"}function k(){const N=i1(o),V=t("text"),U=document.getElementById(V)||document.createElement("span"),q=t("learnmore"),te=document.getElementById(q)||document.createElement("a"),ce=t("preprendIcon"),ge=document.getElementById(ce)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(N.created){const Te=N.element;y(Te),b(te,q);const Oe=T();w(ge,ce),Te.append(ge,U,te,Oe),document.body.appendChild(Te)}c?(U.innerText="Preview backend disconnected.",ge.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ge.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,U.innerText="Preview backend running in this workspace."),U.setAttribute("id",V)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",k):k()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function s1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(An())}function o1(){var e;const r=(e=Uh())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function a1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function l1(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function u1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function c1(){const r=An();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function h1(){return!o1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function d1(){try{return typeof indexedDB=="object"}catch{return!1}}function f1(){return new Promise((r,e)=>{try{let t=!0;const o="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(o);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(o),r(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var c;e(((c=a.error)==null?void 0:c.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p1="FirebaseError";class Ls extends Error{constructor(e,t,o){super(t),this.code=e,this.customData=o,this.name=p1,Object.setPrototypeOf(this,Ls.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Bu.prototype.create)}}class Bu{constructor(e,t,o){this.service=e,this.serviceName=t,this.errors=o}create(e,...t){const o=t[0]||{},a=`${this.service}/${e}`,c=this.errors[e],p=c?m1(c,o):"Error",y=`${this.serviceName}: ${p} (${a}).`;return new Ls(a,y,o)}}function m1(r,e){return r.replace(g1,(t,o)=>{const a=e[o];return a!=null?String(a):`<${o}?>`})}const g1=/\{\$([^}]+)}/g;function _1(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function wa(r,e){if(r===e)return!0;const t=Object.keys(r),o=Object.keys(e);for(const a of t){if(!o.includes(a))return!1;const c=r[a],p=e[a];if(d_(c)&&d_(p)){if(!wa(c,p))return!1}else if(c!==p)return!1}for(const a of o)if(!t.includes(a))return!1;return!0}function d_(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hu(r){const e=[];for(const[t,o]of Object.entries(r))Array.isArray(o)?o.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(o));return e.length?"&"+e.join("&"):""}function vu(r){const e={};return r.replace(/^\?/,"").split("&").forEach(o=>{if(o){const[a,c]=o.split("=");e[decodeURIComponent(a)]=decodeURIComponent(c)}}),e}function xu(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function y1(r,e){const t=new v1(r,e);return t.subscribe.bind(t)}class v1{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(o=>{this.error(o)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,o){let a;if(e===void 0&&t===void 0&&o===void 0)throw new Error("Missing Observer.");x1(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:o},a.next===void 0&&(a.next=Sf),a.error===void 0&&(a.error=Sf),a.complete===void 0&&(a.complete=Sf);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(o){typeof console<"u"&&console.error&&console.error(o)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function x1(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Sf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(r){return r&&r._delegate?r._delegate:r}class Ea{constructor(e,t,o){this.name=e,this.instanceFactory=t,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ga="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const o=new t1;if(this.instancesDeferred.set(t,o),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&o.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(o)return null;throw a}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(T1(e))try{this.getOrInitializeService({instanceIdentifier:ga})}catch{}for(const[t,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:a});o.resolve(c)}catch{}}}}clearInstance(e=ga){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ga){return this.instances.has(e)}getOptions(e=ga){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,o=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:o,options:t});for(const[c,p]of this.instancesDeferred.entries()){const y=this.normalizeInstanceIdentifier(c);o===y&&p.resolve(a)}return a}onInit(e,t){const o=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(o)??new Set;a.add(e),this.onInitCallbacks.set(o,a);const c=this.instances.get(o);return c&&e(c,o),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const o=this.onInitCallbacks.get(t);if(o)for(const a of o)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let o=this.instances.get(e);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:E1(e),options:t}),this.instances.set(e,o),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(o,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,o)}catch{}return o||null}normalizeInstanceIdentifier(e=ga){return this.component?this.component.multipleInstances?e:ga:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function E1(r){return r===ga?void 0:r}function T1(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new w1(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var it;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(it||(it={}));const S1={debug:it.DEBUG,verbose:it.VERBOSE,info:it.INFO,warn:it.WARN,error:it.ERROR,silent:it.SILENT},P1=it.INFO,b1={[it.DEBUG]:"log",[it.VERBOSE]:"log",[it.INFO]:"info",[it.WARN]:"warn",[it.ERROR]:"error"},k1=(r,e,...t)=>{if(e<r.logLevel)return;const o=new Date().toISOString(),a=b1[e];if(a)console[a](`[${o}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class _p{constructor(e){this.name=e,this._logLevel=P1,this._logHandler=k1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in it))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?S1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,it.DEBUG,...e),this._logHandler(this,it.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,it.VERBOSE,...e),this._logHandler(this,it.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,it.INFO,...e),this._logHandler(this,it.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,it.WARN,...e),this._logHandler(this,it.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,it.ERROR,...e),this._logHandler(this,it.ERROR,...e)}}const C1=(r,e)=>e.some(t=>r instanceof t);let f_,p_;function A1(){return f_||(f_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function N1(){return p_||(p_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const pv=new WeakMap,zf=new WeakMap,mv=new WeakMap,Pf=new WeakMap,yp=new WeakMap;function R1(r){const e=new Promise((t,o)=>{const a=()=>{r.removeEventListener("success",c),r.removeEventListener("error",p)},c=()=>{t(Po(r.result)),a()},p=()=>{o(r.error),a()};r.addEventListener("success",c),r.addEventListener("error",p)});return e.then(t=>{t instanceof IDBCursor&&pv.set(t,r)}).catch(()=>{}),yp.set(e,r),e}function L1(r){if(zf.has(r))return;const e=new Promise((t,o)=>{const a=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",p),r.removeEventListener("abort",p)},c=()=>{t(),a()},p=()=>{o(r.error||new DOMException("AbortError","AbortError")),a()};r.addEventListener("complete",c),r.addEventListener("error",p),r.addEventListener("abort",p)});zf.set(r,e)}let Uf={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return zf.get(r);if(e==="objectStoreNames")return r.objectStoreNames||mv.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Po(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function D1(r){Uf=r(Uf)}function M1(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const o=r.call(bf(this),e,...t);return mv.set(o,e.sort?e.sort():[e]),Po(o)}:N1().includes(r)?function(...e){return r.apply(bf(this),e),Po(pv.get(this))}:function(...e){return Po(r.apply(bf(this),e))}}function O1(r){return typeof r=="function"?M1(r):(r instanceof IDBTransaction&&L1(r),C1(r,A1())?new Proxy(r,Uf):r)}function Po(r){if(r instanceof IDBRequest)return R1(r);if(Pf.has(r))return Pf.get(r);const e=O1(r);return e!==r&&(Pf.set(r,e),yp.set(e,r)),e}const bf=r=>yp.get(r);function j1(r,e,{blocked:t,upgrade:o,blocking:a,terminated:c}={}){const p=indexedDB.open(r,e),y=Po(p);return o&&p.addEventListener("upgradeneeded",w=>{o(Po(p.result),w.oldVersion,w.newVersion,Po(p.transaction),w)}),t&&p.addEventListener("blocked",w=>t(w.oldVersion,w.newVersion,w)),y.then(w=>{c&&w.addEventListener("close",()=>c()),a&&w.addEventListener("versionchange",T=>a(T.oldVersion,T.newVersion,T))}).catch(()=>{}),y}const V1=["get","getKey","getAll","getAllKeys","count"],F1=["put","add","delete","clear"],kf=new Map;function m_(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(kf.get(e))return kf.get(e);const t=e.replace(/FromIndex$/,""),o=e!==t,a=F1.includes(t);if(!(t in(o?IDBIndex:IDBObjectStore).prototype)||!(a||V1.includes(t)))return;const c=async function(p,...y){const w=this.transaction(p,a?"readwrite":"readonly");let T=w.store;return o&&(T=T.index(y.shift())),(await Promise.all([T[t](...y),a&&w.done]))[0]};return kf.set(e,c),c}D1(r=>({...r,get:(e,t,o)=>m_(e,t)||r.get(e,t,o),has:(e,t)=>!!m_(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(U1(t)){const o=t.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(t=>t).join(" ")}}function U1(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Bf="@firebase/app",g_="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks=new _p("@firebase/app"),B1="@firebase/app-compat",H1="@firebase/analytics-compat",W1="@firebase/analytics",$1="@firebase/app-check-compat",q1="@firebase/app-check",G1="@firebase/auth",K1="@firebase/auth-compat",Z1="@firebase/database",Q1="@firebase/data-connect",Y1="@firebase/database-compat",J1="@firebase/functions",X1="@firebase/functions-compat",eE="@firebase/installations",tE="@firebase/installations-compat",nE="@firebase/messaging",rE="@firebase/messaging-compat",iE="@firebase/performance",sE="@firebase/performance-compat",oE="@firebase/remote-config",aE="@firebase/remote-config-compat",lE="@firebase/storage",uE="@firebase/storage-compat",cE="@firebase/firestore",hE="@firebase/ai",dE="@firebase/firestore-compat",fE="firebase",pE="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hf="[DEFAULT]",mE={[Bf]:"fire-core",[B1]:"fire-core-compat",[W1]:"fire-analytics",[H1]:"fire-analytics-compat",[q1]:"fire-app-check",[$1]:"fire-app-check-compat",[G1]:"fire-auth",[K1]:"fire-auth-compat",[Z1]:"fire-rtdb",[Q1]:"fire-data-connect",[Y1]:"fire-rtdb-compat",[J1]:"fire-fn",[X1]:"fire-fn-compat",[eE]:"fire-iid",[tE]:"fire-iid-compat",[nE]:"fire-fcm",[rE]:"fire-fcm-compat",[iE]:"fire-perf",[sE]:"fire-perf-compat",[oE]:"fire-rc",[aE]:"fire-rc-compat",[lE]:"fire-gcs",[uE]:"fire-gcs-compat",[cE]:"fire-fst",[dE]:"fire-fst-compat",[hE]:"fire-vertex","fire-js":"fire-js",[fE]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wh=new Map,gE=new Map,Wf=new Map;function __(r,e){try{r.container.addComponent(e)}catch(t){ks.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function kl(r){const e=r.name;if(Wf.has(e))return ks.debug(`There were multiple attempts to register component ${e}.`),!1;Wf.set(e,r);for(const t of wh.values())__(t,r);for(const t of gE.values())__(t,r);return!0}function vp(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function qr(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _E={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},bo=new Bu("app","Firebase",_E);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE{constructor(e,t,o){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new Ea("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw bo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ol=pE;function gv(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const o={name:Hf,automaticDataCollectionEnabled:!0,...e},a=o.name;if(typeof a!="string"||!a)throw bo.create("bad-app-name",{appName:String(a)});if(t||(t=cv()),!t)throw bo.create("no-options");const c=wh.get(a);if(c){if(wa(t,c.options)&&wa(o,c.config))return c;throw bo.create("duplicate-app",{appName:a})}const p=new I1(a);for(const w of Wf.values())p.addComponent(w);const y=new yE(t,o,p);return wh.set(a,y),y}function _v(r=Hf){const e=wh.get(r);if(!e&&r===Hf&&cv())return gv();if(!e)throw bo.create("no-app",{appName:r});return e}function ko(r,e,t){let o=mE[r]??r;t&&(o+=`-${t}`);const a=o.match(/\s|\//),c=e.match(/\s|\//);if(a||c){const p=[`Unable to register library "${o}" with version "${e}":`];a&&p.push(`library name "${o}" contains illegal characters (whitespace or "/")`),a&&c&&p.push("and"),c&&p.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ks.warn(p.join(" "));return}kl(new Ea(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE="firebase-heartbeat-database",xE=1,Ru="firebase-heartbeat-store";let Cf=null;function yv(){return Cf||(Cf=j1(vE,xE,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Ru)}catch(t){console.warn(t)}}}}).catch(r=>{throw bo.create("idb-open",{originalErrorMessage:r.message})})),Cf}async function wE(r){try{const t=(await yv()).transaction(Ru),o=await t.objectStore(Ru).get(vv(r));return await t.done,o}catch(e){if(e instanceof Ls)ks.warn(e.message);else{const t=bo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ks.warn(t.message)}}}async function y_(r,e){try{const o=(await yv()).transaction(Ru,"readwrite");await o.objectStore(Ru).put(e,vv(r)),await o.done}catch(t){if(t instanceof Ls)ks.warn(t.message);else{const o=bo.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ks.warn(o.message)}}}function vv(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE=1024,TE=30;class IE{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new PE(t),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=v_();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(p=>p.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:a}),this._heartbeatsCache.heartbeats.length>TE){const p=bE(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(p,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(o){ks.warn(o)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=v_(),{heartbeatsToSend:o,unsentEntries:a}=SE(this._heartbeatsCache.heartbeats),c=xh(JSON.stringify({version:2,heartbeats:o}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(t){return ks.warn(t),""}}}function v_(){return new Date().toISOString().substring(0,10)}function SE(r,e=EE){const t=[];let o=r.slice();for(const a of r){const c=t.find(p=>p.agent===a.agent);if(c){if(c.dates.push(a.date),x_(t)>e){c.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),x_(t)>e){t.pop();break}o=o.slice(1)}return{heartbeatsToSend:t,unsentEntries:o}}class PE{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return d1()?f1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await wE(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return y_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return y_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function x_(r){return xh(JSON.stringify({version:2,heartbeats:r})).length}function bE(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let o=1;o<r.length;o++)r[o].date<t&&(t=r[o].date,e=o);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kE(r){kl(new Ea("platform-logger",e=>new z1(e),"PRIVATE")),kl(new Ea("heartbeat",e=>new IE(e),"PRIVATE")),ko(Bf,g_,r),ko(Bf,g_,"esm2020"),ko("fire-js","")}kE("");function xv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const CE=xv,wv=new Bu("auth","Firebase",xv());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eh=new _p("@firebase/auth");function AE(r,...e){Eh.logLevel<=it.WARN&&Eh.warn(`Auth (${Ol}): ${r}`,...e)}function lh(r,...e){Eh.logLevel<=it.ERROR&&Eh.error(`Auth (${Ol}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ci(r,...e){throw xp(r,...e)}function Fi(r,...e){return xp(r,...e)}function Ev(r,e,t){const o={...CE(),[e]:t};return new Bu("auth","Firebase",o).create(e,{appName:r.name})}function Ss(r){return Ev(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function xp(r,...e){if(typeof r!="string"){const t=e[0],o=[...e.slice(1)];return o[0]&&(o[0].appName=r.name),r._errorFactory.create(t,...o)}return wv.create(r,...e)}function We(r,e,...t){if(!r)throw xp(e,...t)}function Ts(r){const e="INTERNAL ASSERTION FAILED: "+r;throw lh(e),new Error(e)}function Cs(r,e){r||Ts(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $f(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function NE(){return w_()==="http:"||w_()==="https:"}function w_(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RE(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(NE()||l1()||"connection"in navigator)?navigator.onLine:!0}function LE(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Cs(t>e,"Short delay should be less than long delay!"),this.isMobile=s1()||u1()}get(){return RE()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wp(r,e){Cs(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{static initialize(e,t,o){this.fetchImpl=e,t&&(this.headersImpl=t),o&&(this.responseImpl=o)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ts("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ts("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ts("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],OE=new Wu(3e4,6e4);function jo(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Vo(r,e,t,o,a={}){return Iv(r,a,async()=>{let c={},p={};o&&(e==="GET"?p=o:c={body:JSON.stringify(o)});const y=Hu({key:r.config.apiKey,...p}).slice(1),w=await r._getAdditionalHeaders();w["Content-Type"]="application/json",r.languageCode&&(w["X-Firebase-Locale"]=r.languageCode);const T={method:e,headers:w,...c};return a1()||(T.referrerPolicy="no-referrer"),r.emulatorConfig&&Ml(r.emulatorConfig.host)&&(T.credentials="include"),Tv.fetch()(await Sv(r,r.config.apiHost,t,y),T)})}async function Iv(r,e,t){r._canInitEmulator=!1;const o={...DE,...e};try{const a=new VE(r),c=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const p=await c.json();if("needConfirmation"in p)throw eh(r,"account-exists-with-different-credential",p);if(c.ok&&!("errorMessage"in p))return p;{const y=c.ok?p.errorMessage:p.error.message,[w,T]=y.split(" : ");if(w==="FEDERATED_USER_ID_ALREADY_LINKED")throw eh(r,"credential-already-in-use",p);if(w==="EMAIL_EXISTS")throw eh(r,"email-already-in-use",p);if(w==="USER_DISABLED")throw eh(r,"user-disabled",p);const b=o[w]||w.toLowerCase().replace(/[_\s]+/g,"-");if(T)throw Ev(r,b,T);ci(r,b)}}catch(a){if(a instanceof Ls)throw a;ci(r,"network-request-failed",{message:String(a)})}}async function $u(r,e,t,o,a={}){const c=await Vo(r,e,t,o,a);return"mfaPendingCredential"in c&&ci(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function Sv(r,e,t,o){const a=`${e}${t}?${o}`,c=r,p=c.config.emulator?wp(r.config,a):`${r.config.apiScheme}://${a}`;return ME.includes(t)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(p).toString():p}function jE(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class VE{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,o)=>{this.timer=setTimeout(()=>o(Fi(this.auth,"network-request-failed")),OE.get())})}}function eh(r,e,t){const o={appName:r.name};t.email&&(o.email=t.email),t.phoneNumber&&(o.phoneNumber=t.phoneNumber);const a=Fi(r,e,o);return a.customData._tokenResponse=t,a}function E_(r){return r!==void 0&&r.enterprise!==void 0}class FE{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return jE(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function zE(r,e){return Vo(r,"GET","/v2/recaptchaConfig",jo(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UE(r,e){return Vo(r,"POST","/v1/accounts:delete",e)}async function Th(r,e){return Vo(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bu(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function BE(r,e=!1){const t=Ut(r),o=await t.getIdToken(e),a=Ep(o);We(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const c=typeof a.firebase=="object"?a.firebase:void 0,p=c==null?void 0:c.sign_in_provider;return{claims:a,token:o,authTime:bu(Af(a.auth_time)),issuedAtTime:bu(Af(a.iat)),expirationTime:bu(Af(a.exp)),signInProvider:p||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function Af(r){return Number(r)*1e3}function Ep(r){const[e,t,o]=r.split(".");if(e===void 0||t===void 0||o===void 0)return lh("JWT malformed, contained fewer than 3 sections"),null;try{const a=lv(t);return a?JSON.parse(a):(lh("Failed to decode base64 JWT payload"),null)}catch(a){return lh("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function T_(r){const e=Ep(r);return We(e,"internal-error"),We(typeof e.exp<"u","internal-error"),We(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lu(r,e,t=!1){if(t)return e;try{return await e}catch(o){throw o instanceof Ls&&HE(o)&&r.auth.currentUser===r&&await r.auth.signOut(),o}}function HE({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const o=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=bu(this.lastLoginAt),this.creationTime=bu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ih(r){var k;const e=r.auth,t=await r.getIdToken(),o=await Lu(r,Th(e,{idToken:t}));We(o==null?void 0:o.users.length,e,"internal-error");const a=o.users[0];r._notifyReloadListener(a);const c=(k=a.providerUserInfo)!=null&&k.length?Pv(a.providerUserInfo):[],p=qE(r.providerData,c),y=r.isAnonymous,w=!(r.email&&a.passwordHash)&&!(p!=null&&p.length),T=y?w:!1,b={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:p,metadata:new qf(a.createdAt,a.lastLoginAt),isAnonymous:T};Object.assign(r,b)}async function $E(r){const e=Ut(r);await Ih(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function qE(r,e){return[...r.filter(o=>!e.some(a=>a.providerId===o.providerId)),...e]}function Pv(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GE(r,e){const t=await Iv(r,{},async()=>{const o=Hu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:c}=r.config,p=await Sv(r,a,"/v1/token",`key=${c}`),y=await r._getAdditionalHeaders();y["Content-Type"]="application/x-www-form-urlencoded";const w={method:"POST",headers:y,body:o};return r.emulatorConfig&&Ml(r.emulatorConfig.host)&&(w.credentials="include"),Tv.fetch()(p,w)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function KE(r,e){return Vo(r,"POST","/v2/accounts:revokeToken",jo(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){We(e.idToken,"internal-error"),We(typeof e.idToken<"u","internal-error"),We(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):T_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){We(e.length!==0,"internal-error");const t=T_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(We(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:o,refreshToken:a,expiresIn:c}=await GE(e,t);this.updateTokensAndExpiration(o,a,Number(c))}updateTokensAndExpiration(e,t,o){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+o*1e3}static fromJSON(e,t){const{refreshToken:o,accessToken:a,expirationTime:c}=t,p=new wl;return o&&(We(typeof o=="string","internal-error",{appName:e}),p.refreshToken=o),a&&(We(typeof a=="string","internal-error",{appName:e}),p.accessToken=a),c&&(We(typeof c=="number","internal-error",{appName:e}),p.expirationTime=c),p}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new wl,this.toJSON())}_performRefresh(){return Ts("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xo(r,e){We(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class li{constructor({uid:e,auth:t,stsTokenManager:o,...a}){this.providerId="firebase",this.proactiveRefresh=new WE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new qf(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Lu(this,this.stsTokenManager.getToken(this.auth,e));return We(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return BE(this,e)}reload(){return $E(this)}_assign(e){this!==e&&(We(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new li({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){We(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let o=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),o=!0),t&&await Ih(this),await this.auth._persistUserIfCurrent(this),o&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(qr(this.auth.app))return Promise.reject(Ss(this.auth));const e=await this.getIdToken();return await Lu(this,UE(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const o=t.displayName??void 0,a=t.email??void 0,c=t.phoneNumber??void 0,p=t.photoURL??void 0,y=t.tenantId??void 0,w=t._redirectEventId??void 0,T=t.createdAt??void 0,b=t.lastLoginAt??void 0,{uid:k,emailVerified:N,isAnonymous:V,providerData:U,stsTokenManager:q}=t;We(k&&q,e,"internal-error");const te=wl.fromJSON(this.name,q);We(typeof k=="string",e,"internal-error"),xo(o,e.name),xo(a,e.name),We(typeof N=="boolean",e,"internal-error"),We(typeof V=="boolean",e,"internal-error"),xo(c,e.name),xo(p,e.name),xo(y,e.name),xo(w,e.name),xo(T,e.name),xo(b,e.name);const ce=new li({uid:k,auth:e,email:a,emailVerified:N,displayName:o,isAnonymous:V,photoURL:p,phoneNumber:c,tenantId:y,stsTokenManager:te,createdAt:T,lastLoginAt:b});return U&&Array.isArray(U)&&(ce.providerData=U.map(ge=>({...ge}))),w&&(ce._redirectEventId=w),ce}static async _fromIdTokenResponse(e,t,o=!1){const a=new wl;a.updateFromServerResponse(t);const c=new li({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:o});return await Ih(c),c}static async _fromGetAccountInfoResponse(e,t,o){const a=t.users[0];We(a.localId!==void 0,"internal-error");const c=a.providerUserInfo!==void 0?Pv(a.providerUserInfo):[],p=!(a.email&&a.passwordHash)&&!(c!=null&&c.length),y=new wl;y.updateFromIdToken(o);const w=new li({uid:a.localId,auth:e,stsTokenManager:y,isAnonymous:p}),T={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new qf(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(c!=null&&c.length)};return Object.assign(w,T),w}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I_=new Map;function Is(r){Cs(r instanceof Function,"Expected a class definition");let e=I_.get(r);return e?(Cs(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,I_.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}bv.type="NONE";const S_=bv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uh(r,e,t){return`firebase:${r}:${e}:${t}`}class El{constructor(e,t,o){this.persistence=e,this.auth=t,this.userKey=o;const{config:a,name:c}=this.auth;this.fullUserKey=uh(this.userKey,a.apiKey,c),this.fullPersistenceKey=uh("persistence",a.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Th(this.auth,{idToken:e}).catch(()=>{});return t?li._fromGetAccountInfoResponse(this.auth,t,e):null}return li._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,o="authUser"){if(!t.length)return new El(Is(S_),e,o);const a=(await Promise.all(t.map(async T=>{if(await T._isAvailable())return T}))).filter(T=>T);let c=a[0]||Is(S_);const p=uh(o,e.config.apiKey,e.name);let y=null;for(const T of t)try{const b=await T._get(p);if(b){let k;if(typeof b=="string"){const N=await Th(e,{idToken:b}).catch(()=>{});if(!N)break;k=await li._fromGetAccountInfoResponse(e,N,b)}else k=li._fromJSON(e,b);T!==c&&(y=k),c=T;break}}catch{}const w=a.filter(T=>T._shouldAllowMigration);return!c._shouldAllowMigration||!w.length?new El(c,e,o):(c=w[0],y&&await c._set(p,y.toJSON()),await Promise.all(t.map(async T=>{if(T!==c)try{await T._remove(p)}catch{}})),new El(c,e,o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P_(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Nv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(kv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Lv(e))return"Blackberry";if(Dv(e))return"Webos";if(Cv(e))return"Safari";if((e.includes("chrome/")||Av(e))&&!e.includes("edge/"))return"Chrome";if(Rv(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,o=r.match(t);if((o==null?void 0:o.length)===2)return o[1]}return"Other"}function kv(r=An()){return/firefox\//i.test(r)}function Cv(r=An()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Av(r=An()){return/crios\//i.test(r)}function Nv(r=An()){return/iemobile/i.test(r)}function Rv(r=An()){return/android/i.test(r)}function Lv(r=An()){return/blackberry/i.test(r)}function Dv(r=An()){return/webos/i.test(r)}function Tp(r=An()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function ZE(r=An()){var e;return Tp(r)&&!!((e=window.navigator)!=null&&e.standalone)}function QE(){return c1()&&document.documentMode===10}function Mv(r=An()){return Tp(r)||Rv(r)||Dv(r)||Lv(r)||/windows phone/i.test(r)||Nv(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ov(r,e=[]){let t;switch(r){case"Browser":t=P_(An());break;case"Worker":t=`${P_(An())}-${r}`;break;default:t=r}const o=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ol}/${o}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const o=c=>new Promise((p,y)=>{try{const w=e(c);p(w)}catch(w){y(w)}});o.onAbort=t,this.queue.push(o);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const o of this.queue)await o(e),o.onAbort&&t.push(o.onAbort)}catch(o){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:o==null?void 0:o.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JE(r,e={}){return Vo(r,"GET","/v2/passwordPolicy",jo(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XE=6;class eT{constructor(e){var o;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??XE,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((o=e.allowedNonAlphanumericCharacters)==null?void 0:o.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const o=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;o&&(t.meetsMinPasswordLength=e.length>=o),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let o;for(let a=0;a<e.length;a++)o=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,o>="a"&&o<="z",o>="A"&&o<="Z",o>="0"&&o<="9",this.allowedNonAlphanumericCharacters.includes(o))}updatePasswordCharacterOptionsStatuses(e,t,o,a,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=o)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(e,t,o,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=o,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new b_(this),this.idTokenSubscription=new b_(this),this.beforeStateQueue=new YE(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=wv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Is(t)),this._initializationPromise=this.queue(async()=>{var o,a,c;if(!this._deleted&&(this.persistenceManager=await El.create(this,e),(o=this._resolvePersistenceManagerAvailable)==null||o.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((c=this.currentUser)==null?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Th(this,{idToken:e}),o=await li._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(o)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var c;if(qr(this.app)){const p=this.app.settings.authIdToken;return p?new Promise(y=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(p).then(y,y))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let o=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const p=(c=this.redirectUser)==null?void 0:c._redirectEventId,y=o==null?void 0:o._redirectEventId,w=await this.tryRedirectSignIn(e);(!p||p===y)&&(w!=null&&w.user)&&(o=w.user,a=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(o)}catch(p){o=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(p))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return We(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Ih(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=LE()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(qr(this.app))return Promise.reject(Ss(this));const t=e?Ut(e):null;return t&&We(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&We(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return qr(this.app)?Promise.reject(Ss(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return qr(this.app)?Promise.reject(Ss(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Is(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await JE(this),t=new eT(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Bu("auth","Firebase",e())}onAuthStateChanged(e,t,o){return this.registerStateListener(this.authStateSubscription,e,t,o)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,o){return this.registerStateListener(this.idTokenSubscription,e,t,o)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const o=this.onAuthStateChanged(()=>{o(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),o={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(o.tenantId=this.tenantId),await KE(this,o)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const o=await this.getOrInitRedirectPersistenceManager(t);return e===null?o.removeCurrentUser():o.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Is(e)||this._popupRedirectResolver;We(t,this,"argument-error"),this.redirectPersistenceManager=await El.create(this,[Is(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,o;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((o=this.redirectUser)==null?void 0:o._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,o,a){if(this._deleted)return()=>{};const c=typeof t=="function"?t:t.next.bind(t);let p=!1;const y=this._isInitialized?Promise.resolve():this._initializationPromise;if(We(y,this,"internal-error"),y.then(()=>{p||c(this.currentUser)}),typeof t=="function"){const w=e.addObserver(t,o,a);return()=>{p=!0,w()}}else{const w=e.addObserver(t);return()=>{p=!0,w()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return We(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ov(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const o=await this._getAppCheckToken();return o&&(e["X-Firebase-AppCheck"]=o),e}async _getAppCheckToken(){var t;if(qr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&AE(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Ca(r){return Ut(r)}class b_{constructor(e){this.auth=e,this.observer=null,this.addObserver=y1(t=>this.observer=t)}get next(){return We(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function nT(r){Bh=r}function jv(r){return Bh.loadJS(r)}function rT(){return Bh.recaptchaEnterpriseScript}function iT(){return Bh.gapiScript}function sT(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class oT{constructor(){this.enterprise=new aT}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class aT{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const lT="recaptcha-enterprise",Vv="NO_RECAPTCHA";class uT{constructor(e){this.type=lT,this.auth=Ca(e)}async verify(e="verify",t=!1){async function o(c){if(!t){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(p,y)=>{zE(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(w=>{if(w.recaptchaKey===void 0)y(new Error("recaptcha Enterprise site key undefined"));else{const T=new FE(w);return c.tenantId==null?c._agentRecaptchaConfig=T:c._tenantRecaptchaConfigs[c.tenantId]=T,p(T.siteKey)}}).catch(w=>{y(w)})})}function a(c,p,y){const w=window.grecaptcha;E_(w)?w.enterprise.ready(()=>{w.enterprise.execute(c,{action:e}).then(T=>{p(T)}).catch(()=>{p(Vv)})}):y(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new oT().execute("siteKey",{action:"verify"}):new Promise((c,p)=>{o(this.auth).then(y=>{if(!t&&E_(window.grecaptcha))a(y,c,p);else{if(typeof window>"u"){p(new Error("RecaptchaVerifier is only supported in browser"));return}let w=rT();w.length!==0&&(w+=y),jv(w).then(()=>{a(y,c,p)}).catch(T=>{p(T)})}}).catch(y=>{p(y)})})}}async function k_(r,e,t,o=!1,a=!1){const c=new uT(r);let p;if(a)p=Vv;else try{p=await c.verify(t)}catch{p=await c.verify(t,!0)}const y={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in y){const w=y.phoneEnrollmentInfo.phoneNumber,T=y.phoneEnrollmentInfo.recaptchaToken;Object.assign(y,{phoneEnrollmentInfo:{phoneNumber:w,recaptchaToken:T,captchaResponse:p,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in y){const w=y.phoneSignInInfo.recaptchaToken;Object.assign(y,{phoneSignInInfo:{recaptchaToken:w,captchaResponse:p,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return y}return o?Object.assign(y,{captchaResp:p}):Object.assign(y,{captchaResponse:p}),Object.assign(y,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(y,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),y}async function Gf(r,e,t,o,a){var c;if((c=r._getRecaptchaConfig())!=null&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const p=await k_(r,e,t,t==="getOobCode");return o(r,p)}else return o(r,e).catch(async p=>{if(p.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const y=await k_(r,e,t,t==="getOobCode");return o(r,y)}else return Promise.reject(p)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cT(r,e){const t=vp(r,"auth");if(t.isInitialized()){const a=t.getImmediate(),c=t.getOptions();if(wa(c,e??{}))return a;ci(a,"already-initialized")}return t.initialize({options:e})}function hT(r,e){const t=(e==null?void 0:e.persistence)||[],o=(Array.isArray(t)?t:[t]).map(Is);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(o,e==null?void 0:e.popupRedirectResolver)}function dT(r,e,t){const o=Ca(r);We(/^https?:\/\//.test(e),o,"invalid-emulator-scheme");const a=!1,c=Fv(e),{host:p,port:y}=fT(e),w=y===null?"":`:${y}`,T={url:`${c}//${p}${w}/`},b=Object.freeze({host:p,port:y,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!o._canInitEmulator){We(o.config.emulator&&o.emulatorConfig,o,"emulator-config-failed"),We(wa(T,o.config.emulator)&&wa(b,o.emulatorConfig),o,"emulator-config-failed");return}o.config.emulator=T,o.emulatorConfig=b,o.settings.appVerificationDisabledForTesting=!0,Ml(p)?(dv(`${c}//${p}${w}`),fv("Auth",!0)):pT()}function Fv(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function fT(r){const e=Fv(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const o=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(o);if(a){const c=a[1];return{host:c,port:C_(o.substr(c.length+1))}}else{const[c,p]=o.split(":");return{host:c,port:C_(p)}}}function C_(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function pT(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ts("not implemented")}_getIdTokenResponse(e){return Ts("not implemented")}_linkToIdToken(e,t){return Ts("not implemented")}_getReauthenticationResolver(e){return Ts("not implemented")}}async function mT(r,e){return Vo(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gT(r,e){return $u(r,"POST","/v1/accounts:signInWithPassword",jo(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _T(r,e){return $u(r,"POST","/v1/accounts:signInWithEmailLink",jo(r,e))}async function yT(r,e){return $u(r,"POST","/v1/accounts:signInWithEmailLink",jo(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du extends Ip{constructor(e,t,o,a=null){super("password",o),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new Du(e,t,"password")}static _fromEmailAndCode(e,t,o=null){return new Du(e,t,"emailLink",o)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gf(e,t,"signInWithPassword",gT);case"emailLink":return _T(e,{email:this._email,oobCode:this._password});default:ci(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const o={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gf(e,o,"signUpPassword",mT);case"emailLink":return yT(e,{idToken:t,email:this._email,oobCode:this._password});default:ci(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tl(r,e){return $u(r,"POST","/v1/accounts:signInWithIdp",jo(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vT="http://localhost";class Ta extends Ip{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ta(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ci("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:o,signInMethod:a,...c}=t;if(!o||!a)return null;const p=new Ta(o,a);return p.idToken=c.idToken||void 0,p.accessToken=c.accessToken||void 0,p.secret=c.secret,p.nonce=c.nonce,p.pendingToken=c.pendingToken||null,p}_getIdTokenResponse(e){const t=this.buildRequest();return Tl(e,t)}_linkToIdToken(e,t){const o=this.buildRequest();return o.idToken=t,Tl(e,o)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Tl(e,t)}buildRequest(){const e={requestUri:vT,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Hu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xT(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function wT(r){const e=vu(xu(r)).link,t=e?vu(xu(e)).deep_link_id:null,o=vu(xu(r)).deep_link_id;return(o?vu(xu(o)).link:null)||o||t||e||r}class Sp{constructor(e){const t=vu(xu(e)),o=t.apiKey??null,a=t.oobCode??null,c=xT(t.mode??null);We(o&&a&&c,"argument-error"),this.apiKey=o,this.operation=c,this.code=a,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=wT(e);try{return new Sp(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(){this.providerId=Aa.PROVIDER_ID}static credential(e,t){return Du._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const o=Sp.parseLink(t);return We(o,"argument-error"),Du._fromEmailAndCode(e,o.code,o.tenantId)}}Aa.PROVIDER_ID="password";Aa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Aa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu extends zv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo extends qu{constructor(){super("facebook.com")}static credential(e){return Ta._fromParams({providerId:wo.PROVIDER_ID,signInMethod:wo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wo.credentialFromTaggedObject(e)}static credentialFromError(e){return wo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wo.credential(e.oauthAccessToken)}catch{return null}}}wo.FACEBOOK_SIGN_IN_METHOD="facebook.com";wo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo extends qu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ta._fromParams({providerId:Eo.PROVIDER_ID,signInMethod:Eo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Eo.credentialFromTaggedObject(e)}static credentialFromError(e){return Eo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:o}=e;if(!t&&!o)return null;try{return Eo.credential(t,o)}catch{return null}}}Eo.GOOGLE_SIGN_IN_METHOD="google.com";Eo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To extends qu{constructor(){super("github.com")}static credential(e){return Ta._fromParams({providerId:To.PROVIDER_ID,signInMethod:To.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return To.credentialFromTaggedObject(e)}static credentialFromError(e){return To.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return To.credential(e.oauthAccessToken)}catch{return null}}}To.GITHUB_SIGN_IN_METHOD="github.com";To.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io extends qu{constructor(){super("twitter.com")}static credential(e,t){return Ta._fromParams({providerId:Io.PROVIDER_ID,signInMethod:Io.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Io.credentialFromTaggedObject(e)}static credentialFromError(e){return Io.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:o}=e;if(!t||!o)return null;try{return Io.credential(t,o)}catch{return null}}}Io.TWITTER_SIGN_IN_METHOD="twitter.com";Io.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ET(r,e){return $u(r,"POST","/v1/accounts:signUp",jo(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,o,a=!1){const c=await li._fromIdTokenResponse(e,o,a),p=A_(o);return new Ia({user:c,providerId:p,_tokenResponse:o,operationType:t})}static async _forOperation(e,t,o){await e._updateTokensIfNecessary(o,!0);const a=A_(o);return new Ia({user:e,providerId:a,_tokenResponse:o,operationType:t})}}function A_(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh extends Ls{constructor(e,t,o,a){super(t.code,t.message),this.operationType=o,this.user=a,Object.setPrototypeOf(this,Sh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:o}}static _fromErrorAndOperation(e,t,o,a){return new Sh(e,t,o,a)}}function Uv(r,e,t,o){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Sh._fromErrorAndOperation(r,c,e,o):c})}async function TT(r,e,t=!1){const o=await Lu(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Ia._forOperation(r,"link",o)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bv(r,e,t=!1){const{auth:o}=r;if(qr(o.app))return Promise.reject(Ss(o));const a="reauthenticate";try{const c=await Lu(r,Uv(o,a,e,r),t);We(c.idToken,o,"internal-error");const p=Ep(c.idToken);We(p,o,"internal-error");const{sub:y}=p;return We(r.uid===y,o,"user-mismatch"),Ia._forOperation(r,a,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&ci(o,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hv(r,e,t=!1){if(qr(r.app))return Promise.reject(Ss(r));const o="signIn",a=await Uv(r,o,e),c=await Ia._fromIdTokenResponse(r,o,a);return t||await r._updateCurrentUser(c.user),c}async function IT(r,e){return Hv(Ca(r),e)}async function ST(r,e){return Bv(Ut(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wv(r){const e=Ca(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function PT(r,e,t){if(qr(r.app))return Promise.reject(Ss(r));const o=Ca(r),p=await Gf(o,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ET).catch(w=>{throw w.code==="auth/password-does-not-meet-requirements"&&Wv(r),w}),y=await Ia._fromIdTokenResponse(o,"signIn",p);return await o._updateCurrentUser(y.user),y}function bT(r,e,t){return qr(r.app)?Promise.reject(Ss(r)):IT(Ut(r),Aa.credential(e,t)).catch(async o=>{throw o.code==="auth/password-does-not-meet-requirements"&&Wv(r),o})}function kT(r,e,t,o){return Ut(r).onIdTokenChanged(e,t,o)}function CT(r,e,t){return Ut(r).beforeAuthStateChanged(e,t)}function AT(r,e,t,o){return Ut(r).onAuthStateChanged(e,t,o)}function NT(r){return Ut(r).signOut()}async function RT(r){return Ut(r).delete()}const Ph="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ph,"1"),this.storage.removeItem(Ph),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LT=1e3,DT=10;class qv extends $v{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Mv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const o=this.storage.getItem(t),a=this.localCache[t];o!==a&&e(t,a,o)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((p,y,w)=>{this.notifyListeners(p,w)});return}const o=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const p=this.storage.getItem(o);!t&&this.localCache[o]===p||this.notifyListeners(o,p)},c=this.storage.getItem(o);QE()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,DT):a()}notifyListeners(e,t){this.localCache[e]=t;const o=this.listeners[e];if(o)for(const a of Array.from(o))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,o)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:o}),!0)})},LT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}qv.type="LOCAL";const MT=qv;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv extends $v{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Gv.type="SESSION";const Kv=Gv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OT(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const o=new Hh(e);return this.receivers.push(o),o}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:o,eventType:a,data:c}=t.data,p=this.handlersMap[a];if(!(p!=null&&p.size))return;t.ports[0].postMessage({status:"ack",eventId:o,eventType:a});const y=Array.from(p).map(async T=>T(t.origin,c)),w=await OT(y);t.ports[0].postMessage({status:"done",eventId:o,eventType:a,response:w})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Hh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pp(r="",e=10){let t="";for(let o=0;o<e;o++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,o=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let c,p;return new Promise((y,w)=>{const T=Pp("",20);a.port1.start();const b=setTimeout(()=>{w(new Error("unsupported_event"))},o);p={messageChannel:a,onMessage(k){const N=k;if(N.data.eventId===T)switch(N.data.status){case"ack":clearTimeout(b),c=setTimeout(()=>{w(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),y(N.data.response);break;default:clearTimeout(b),clearTimeout(c),w(new Error("invalid_response"));break}}},this.handlers.add(p),a.port1.addEventListener("message",p.onMessage),this.target.postMessage({eventType:e,eventId:T,data:t},[a.port2])}).finally(()=>{p&&this.removeMessageHandler(p)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zi(){return window}function VT(r){zi().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zv(){return typeof zi().WorkerGlobalScope<"u"&&typeof zi().importScripts=="function"}async function FT(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function zT(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function UT(){return Zv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qv="firebaseLocalStorageDb",BT=1,bh="firebaseLocalStorage",Yv="fbase_key";class Gu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Wh(r,e){return r.transaction([bh],e?"readwrite":"readonly").objectStore(bh)}function HT(){const r=indexedDB.deleteDatabase(Qv);return new Gu(r).toPromise()}function Kf(){const r=indexedDB.open(Qv,BT);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const o=r.result;try{o.createObjectStore(bh,{keyPath:Yv})}catch(a){t(a)}}),r.addEventListener("success",async()=>{const o=r.result;o.objectStoreNames.contains(bh)?e(o):(o.close(),await HT(),e(await Kf()))})})}async function N_(r,e,t){const o=Wh(r,!0).put({[Yv]:e,value:t});return new Gu(o).toPromise()}async function WT(r,e){const t=Wh(r,!1).get(e),o=await new Gu(t).toPromise();return o===void 0?null:o.value}function R_(r,e){const t=Wh(r,!0).delete(e);return new Gu(t).toPromise()}const $T=800,qT=3;class Jv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Kf(),this.db)}async _withRetries(e){let t=0;for(;;)try{const o=await this._openDb();return await e(o)}catch(o){if(t++>qT)throw o;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Zv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Hh._getInstance(UT()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,o;if(this.activeServiceWorker=await FT(),!this.activeServiceWorker)return;this.sender=new jT(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(o=e[0])!=null&&o.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||zT()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Kf();return await N_(e,Ph,"1"),await R_(e,Ph),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(o=>N_(o,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(o=>WT(o,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>R_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const c=Wh(a,!1).getAll();return new Gu(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],o=new Set;if(e.length!==0)for(const{fbase_key:a,value:c}of e)o.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(c)&&(this.notifyListeners(a,c),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!o.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const o=this.listeners[e];if(o)for(const a of Array.from(o))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),$T)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Jv.type="LOCAL";const GT=Jv;new Wu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KT(r,e){return e?Is(e):(We(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp extends Ip{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Tl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Tl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Tl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function ZT(r){return Hv(r.auth,new bp(r),r.bypassAuthState)}function QT(r){const{auth:e,user:t}=r;return We(t,e,"internal-error"),Bv(t,new bp(r),r.bypassAuthState)}async function YT(r){const{auth:e,user:t}=r;return We(t,e,"internal-error"),TT(t,new bp(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(e,t,o,a,c=!1){this.auth=e,this.resolver=o,this.user=a,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(o){this.reject(o)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:o,postBody:a,tenantId:c,error:p,type:y}=e;if(p){this.reject(p);return}const w={auth:this.auth,requestUri:t,sessionId:o,tenantId:c||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(y)(w))}catch(T){this.reject(T)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ZT;case"linkViaPopup":case"linkViaRedirect":return YT;case"reauthViaPopup":case"reauthViaRedirect":return QT;default:ci(this.auth,"internal-error")}}resolve(e){Cs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Cs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JT=new Wu(2e3,1e4);class xl extends Xv{constructor(e,t,o,a,c){super(e,t,a,c),this.provider=o,this.authWindow=null,this.pollId=null,xl.currentPopupAction&&xl.currentPopupAction.cancel(),xl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return We(e,this.auth,"internal-error"),e}async onExecution(){Cs(this.filter.length===1,"Popup operations only handle one event");const e=Pp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Fi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Fi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,xl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,o;if((o=(t=this.authWindow)==null?void 0:t.window)!=null&&o.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Fi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,JT.get())};e()}}xl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT="pendingRedirect",ch=new Map;class eI extends Xv{constructor(e,t,o=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,o),this.eventId=null}async execute(){let e=ch.get(this.auth._key());if(!e){try{const o=await tI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(o)}catch(t){e=()=>Promise.reject(t)}ch.set(this.auth._key(),e)}return this.bypassAuthState||ch.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function tI(r,e){const t=iI(e),o=rI(r);if(!await o._isAvailable())return!1;const a=await o._get(t)==="true";return await o._remove(t),a}function nI(r,e){ch.set(r._key(),e)}function rI(r){return Is(r._redirectPersistence)}function iI(r){return uh(XT,r.config.apiKey,r.name)}async function sI(r,e,t=!1){if(qr(r.app))return Promise.reject(Ss(r));const o=Ca(r),a=KT(o,e),p=await new eI(o,a,t).execute();return p&&!t&&(delete p.user._redirectEventId,await o._persistUserIfCurrent(p.user),await o._setRedirectUser(null,e)),p}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oI=600*1e3;class aI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(o=>{this.isEventForConsumer(e,o)&&(t=!0,this.sendToConsumer(e,o),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!lI(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var o;if(e.error&&!e0(e)){const a=((o=e.error.code)==null?void 0:o.split("auth/")[1])||"internal-error";t.onError(Fi(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const o=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&o}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=oI&&this.cachedEventUids.clear(),this.cachedEventUids.has(L_(e))}saveEventToCache(e){this.cachedEventUids.add(L_(e)),this.lastProcessedEventTime=Date.now()}}function L_(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function e0({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function lI(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return e0(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uI(r,e={}){return Vo(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,hI=/^https?/;async function dI(r){if(r.config.emulator)return;const{authorizedDomains:e}=await uI(r);for(const t of e)try{if(fI(t))return}catch{}ci(r,"unauthorized-domain")}function fI(r){const e=$f(),{protocol:t,hostname:o}=new URL(e);if(r.startsWith("chrome-extension://")){const p=new URL(r);return p.hostname===""&&o===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&p.hostname===o}if(!hI.test(t))return!1;if(cI.test(r))return o===r;const a=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(o)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI=new Wu(3e4,6e4);function D_(){const r=zi().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function mI(r){return new Promise((e,t)=>{var a,c,p;function o(){D_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{D_(),t(Fi(r,"network-request-failed"))},timeout:pI.get()})}if((c=(a=zi().gapi)==null?void 0:a.iframes)!=null&&c.Iframe)e(gapi.iframes.getContext());else if((p=zi().gapi)!=null&&p.load)o();else{const y=sT("iframefcb");return zi()[y]=()=>{gapi.load?o():t(Fi(r,"network-request-failed"))},jv(`${iT()}?onload=${y}`).catch(w=>t(w))}}).catch(e=>{throw hh=null,e})}let hh=null;function gI(r){return hh=hh||mI(r),hh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I=new Wu(5e3,15e3),yI="__/auth/iframe",vI="emulator/auth/iframe",xI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},wI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function EI(r){const e=r.config;We(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?wp(e,vI):`https://${r.config.authDomain}/${yI}`,o={apiKey:e.apiKey,appName:r.name,v:Ol},a=wI.get(r.config.apiHost);a&&(o.eid=a);const c=r._getFrameworks();return c.length&&(o.fw=c.join(",")),`${t}?${Hu(o).slice(1)}`}async function TI(r){const e=await gI(r),t=zi().gapi;return We(t,r,"internal-error"),e.open({where:document.body,url:EI(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xI,dontclear:!0},o=>new Promise(async(a,c)=>{await o.restyle({setHideOnLeave:!1});const p=Fi(r,"network-request-failed"),y=zi().setTimeout(()=>{c(p)},_I.get());function w(){zi().clearTimeout(y),a(o)}o.ping(w).then(w,()=>{c(p)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},SI=500,PI=600,bI="_blank",kI="http://localhost";class M_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function CI(r,e,t,o=SI,a=PI){const c=Math.max((window.screen.availHeight-a)/2,0).toString(),p=Math.max((window.screen.availWidth-o)/2,0).toString();let y="";const w={...II,width:o.toString(),height:a.toString(),top:c,left:p},T=An().toLowerCase();t&&(y=Av(T)?bI:t),kv(T)&&(e=e||kI,w.scrollbars="yes");const b=Object.entries(w).reduce((N,[V,U])=>`${N}${V}=${U},`,"");if(ZE(T)&&y!=="_self")return AI(e||"",y),new M_(null);const k=window.open(e||"",y,b);We(k,r,"popup-blocked");try{k.focus()}catch{}return new M_(k)}function AI(r,e){const t=document.createElement("a");t.href=r,t.target=e;const o=document.createEvent("MouseEvent");o.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI="__/auth/handler",RI="emulator/auth/handler",LI=encodeURIComponent("fac");async function O_(r,e,t,o,a,c){We(r.config.authDomain,r,"auth-domain-config-required"),We(r.config.apiKey,r,"invalid-api-key");const p={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:o,v:Ol,eventId:a};if(e instanceof zv){e.setDefaultLanguage(r.languageCode),p.providerId=e.providerId||"",_1(e.getCustomParameters())||(p.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,k]of Object.entries({}))p[b]=k}if(e instanceof qu){const b=e.getScopes().filter(k=>k!=="");b.length>0&&(p.scopes=b.join(","))}r.tenantId&&(p.tid=r.tenantId);const y=p;for(const b of Object.keys(y))y[b]===void 0&&delete y[b];const w=await r._getAppCheckToken(),T=w?`#${LI}=${encodeURIComponent(w)}`:"";return`${DI(r)}?${Hu(y).slice(1)}${T}`}function DI({config:r}){return r.emulator?wp(r,RI):`https://${r.authDomain}/${NI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nf="webStorageSupport";class MI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Kv,this._completeRedirectFn=sI,this._overrideRedirectResult=nI}async _openPopup(e,t,o,a){var p;Cs((p=this.eventManagers[e._key()])==null?void 0:p.manager,"_initialize() not called before _openPopup()");const c=await O_(e,t,o,$f(),a);return CI(e,c,Pp())}async _openRedirect(e,t,o,a){await this._originValidation(e);const c=await O_(e,t,o,$f(),a);return VT(c),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:c}=this.eventManagers[t];return a?Promise.resolve(a):(Cs(c,"If manager is not set, promise should be"),c)}const o=this.initAndGetManager(e);return this.eventManagers[t]={promise:o},o.catch(()=>{delete this.eventManagers[t]}),o}async initAndGetManager(e){const t=await TI(e),o=new aI(e);return t.register("authEvent",a=>(We(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:o.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:o},this.iframes[e._key()]=t,o}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Nf,{type:Nf},a=>{var p;const c=(p=a==null?void 0:a[0])==null?void 0:p[Nf];c!==void 0&&t(!!c),ci(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=dI(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Mv()||Cv()||Tp()}}const OI=MI;var j_="@firebase/auth",V_="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(o=>{e((o==null?void 0:o.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){We(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VI(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function FI(r){kl(new Ea("auth",(e,{options:t})=>{const o=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:p,authDomain:y}=o.options;We(p&&!p.includes(":"),"invalid-api-key",{appName:o.name});const w={apiKey:p,authDomain:y,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ov(r)},T=new tT(o,a,c,w);return hT(T,t),T},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,o)=>{e.getProvider("auth-internal").initialize()})),kl(new Ea("auth-internal",e=>{const t=Ca(e.getProvider("auth").getImmediate());return(o=>new jI(o))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ko(j_,V_,VI(r)),ko(j_,V_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zI=300,UI=hv("authIdTokenMaxAge")||zI;let F_=null;const BI=r=>async e=>{const t=e&&await e.getIdTokenResult(),o=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(o&&o>UI)return;const a=t==null?void 0:t.token;F_!==a&&(F_=a,await fetch(r,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function HI(r=_v()){const e=vp(r,"auth");if(e.isInitialized())return e.getImmediate();const t=cT(r,{popupRedirectResolver:OI,persistence:[GT,MT,Kv]}),o=hv("authTokenSyncURL");if(o&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(o,location.origin);if(location.origin===c.origin){const p=BI(c.toString());CT(t,p,()=>p(t.currentUser)),kT(t,y=>p(y))}}const a=uv("auth");return a&&dT(t,`http://${a}`),t}function WI(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}nT({loadJS(r){return new Promise((e,t)=>{const o=document.createElement("script");o.setAttribute("src",r),o.onload=e,o.onerror=a=>{const c=Fi("internal-error");c.customData=a,t(c)},o.type="text/javascript",o.charset="UTF-8",WI().appendChild(o)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});FI("Browser");/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $I=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),t0=(...r)=>r.filter((e,t,o)=>!!e&&e.trim()!==""&&o.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var qI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GI=ie.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:o,className:a="",children:c,iconNode:p,...y},w)=>ie.createElement("svg",{ref:w,...qI,width:e,height:e,stroke:r,strokeWidth:o?Number(t)*24/Number(e):t,className:t0("lucide",a),...y},[...p.map(([T,b])=>ie.createElement(T,b)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=(r,e)=>{const t=ie.forwardRef(({className:o,...a},c)=>ie.createElement(GI,{ref:c,iconNode:e,className:t0(`lucide-${$I(r)}`,o),...a}));return t.displayName=`${r}`,t};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KI=Ge("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zf=Ge("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZI=Ge("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QI=Ge("Bed",[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const th=Ge("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z_=Ge("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kp=Ge("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $h=Ge("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n0=Ge("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YI=Ge("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JI=Ge("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XI=Ge("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eS=Ge("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tS=Ge("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nS=Ge("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rS=Ge("Coffee",[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iS=Ge("Compass",[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sS=Ge("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cp=Ge("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U_=Ge("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B_=Ge("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H_=Ge("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r0=Ge("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oS=Ge("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aS=Ge("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wn=Ge("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=Ge("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lS=Ge("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uS=Ge("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qh=Ge("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cS=Ge("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W_=Ge("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ap=Ge("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qf=Ge("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hS=Ge("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $_=Ge("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dS=Ge("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Na=Ge("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Il=Ge("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fS=Ge("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pS=Ge("TramFront",[["rect",{width:"16",height:"16",x:"4",y:"3",rx:"2",key:"1wxw4b"}],["path",{d:"M4 11h16",key:"mpoxn0"}],["path",{d:"M12 3v8",key:"1h2ygw"}],["path",{d:"m8 19-2 3",key:"13i0xs"}],["path",{d:"m18 22-2-3",key:"1p0ohu"}],["path",{d:"M8 15h.01",key:"a7atzg"}],["path",{d:"M16 15h.01",key:"rnfrdf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ku=Ge("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mS=Ge("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gS=Ge("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Np=Ge("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _S=Ge("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q_=Ge("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sa=Ge("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var yS="firebase",vS="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ko(yS,vS,"app");var G_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Co,i0;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(F,D){function M(){}M.prototype=D.prototype,F.F=D.prototype,F.prototype=new M,F.prototype.constructor=F,F.D=function(B,j,R){for(var A=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)A[ye-2]=arguments[ye];return D.prototype[j].apply(B,A)}}function t(){this.blockSize=-1}function o(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(o,t),o.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(F,D,M){M||(M=0);const B=Array(16);if(typeof D=="string")for(var j=0;j<16;++j)B[j]=D.charCodeAt(M++)|D.charCodeAt(M++)<<8|D.charCodeAt(M++)<<16|D.charCodeAt(M++)<<24;else for(j=0;j<16;++j)B[j]=D[M++]|D[M++]<<8|D[M++]<<16|D[M++]<<24;D=F.g[0],M=F.g[1],j=F.g[2];let R=F.g[3],A;A=D+(R^M&(j^R))+B[0]+3614090360&4294967295,D=M+(A<<7&4294967295|A>>>25),A=R+(j^D&(M^j))+B[1]+3905402710&4294967295,R=D+(A<<12&4294967295|A>>>20),A=j+(M^R&(D^M))+B[2]+606105819&4294967295,j=R+(A<<17&4294967295|A>>>15),A=M+(D^j&(R^D))+B[3]+3250441966&4294967295,M=j+(A<<22&4294967295|A>>>10),A=D+(R^M&(j^R))+B[4]+4118548399&4294967295,D=M+(A<<7&4294967295|A>>>25),A=R+(j^D&(M^j))+B[5]+1200080426&4294967295,R=D+(A<<12&4294967295|A>>>20),A=j+(M^R&(D^M))+B[6]+2821735955&4294967295,j=R+(A<<17&4294967295|A>>>15),A=M+(D^j&(R^D))+B[7]+4249261313&4294967295,M=j+(A<<22&4294967295|A>>>10),A=D+(R^M&(j^R))+B[8]+1770035416&4294967295,D=M+(A<<7&4294967295|A>>>25),A=R+(j^D&(M^j))+B[9]+2336552879&4294967295,R=D+(A<<12&4294967295|A>>>20),A=j+(M^R&(D^M))+B[10]+4294925233&4294967295,j=R+(A<<17&4294967295|A>>>15),A=M+(D^j&(R^D))+B[11]+2304563134&4294967295,M=j+(A<<22&4294967295|A>>>10),A=D+(R^M&(j^R))+B[12]+1804603682&4294967295,D=M+(A<<7&4294967295|A>>>25),A=R+(j^D&(M^j))+B[13]+4254626195&4294967295,R=D+(A<<12&4294967295|A>>>20),A=j+(M^R&(D^M))+B[14]+2792965006&4294967295,j=R+(A<<17&4294967295|A>>>15),A=M+(D^j&(R^D))+B[15]+1236535329&4294967295,M=j+(A<<22&4294967295|A>>>10),A=D+(j^R&(M^j))+B[1]+4129170786&4294967295,D=M+(A<<5&4294967295|A>>>27),A=R+(M^j&(D^M))+B[6]+3225465664&4294967295,R=D+(A<<9&4294967295|A>>>23),A=j+(D^M&(R^D))+B[11]+643717713&4294967295,j=R+(A<<14&4294967295|A>>>18),A=M+(R^D&(j^R))+B[0]+3921069994&4294967295,M=j+(A<<20&4294967295|A>>>12),A=D+(j^R&(M^j))+B[5]+3593408605&4294967295,D=M+(A<<5&4294967295|A>>>27),A=R+(M^j&(D^M))+B[10]+38016083&4294967295,R=D+(A<<9&4294967295|A>>>23),A=j+(D^M&(R^D))+B[15]+3634488961&4294967295,j=R+(A<<14&4294967295|A>>>18),A=M+(R^D&(j^R))+B[4]+3889429448&4294967295,M=j+(A<<20&4294967295|A>>>12),A=D+(j^R&(M^j))+B[9]+568446438&4294967295,D=M+(A<<5&4294967295|A>>>27),A=R+(M^j&(D^M))+B[14]+3275163606&4294967295,R=D+(A<<9&4294967295|A>>>23),A=j+(D^M&(R^D))+B[3]+4107603335&4294967295,j=R+(A<<14&4294967295|A>>>18),A=M+(R^D&(j^R))+B[8]+1163531501&4294967295,M=j+(A<<20&4294967295|A>>>12),A=D+(j^R&(M^j))+B[13]+2850285829&4294967295,D=M+(A<<5&4294967295|A>>>27),A=R+(M^j&(D^M))+B[2]+4243563512&4294967295,R=D+(A<<9&4294967295|A>>>23),A=j+(D^M&(R^D))+B[7]+1735328473&4294967295,j=R+(A<<14&4294967295|A>>>18),A=M+(R^D&(j^R))+B[12]+2368359562&4294967295,M=j+(A<<20&4294967295|A>>>12),A=D+(M^j^R)+B[5]+4294588738&4294967295,D=M+(A<<4&4294967295|A>>>28),A=R+(D^M^j)+B[8]+2272392833&4294967295,R=D+(A<<11&4294967295|A>>>21),A=j+(R^D^M)+B[11]+1839030562&4294967295,j=R+(A<<16&4294967295|A>>>16),A=M+(j^R^D)+B[14]+4259657740&4294967295,M=j+(A<<23&4294967295|A>>>9),A=D+(M^j^R)+B[1]+2763975236&4294967295,D=M+(A<<4&4294967295|A>>>28),A=R+(D^M^j)+B[4]+1272893353&4294967295,R=D+(A<<11&4294967295|A>>>21),A=j+(R^D^M)+B[7]+4139469664&4294967295,j=R+(A<<16&4294967295|A>>>16),A=M+(j^R^D)+B[10]+3200236656&4294967295,M=j+(A<<23&4294967295|A>>>9),A=D+(M^j^R)+B[13]+681279174&4294967295,D=M+(A<<4&4294967295|A>>>28),A=R+(D^M^j)+B[0]+3936430074&4294967295,R=D+(A<<11&4294967295|A>>>21),A=j+(R^D^M)+B[3]+3572445317&4294967295,j=R+(A<<16&4294967295|A>>>16),A=M+(j^R^D)+B[6]+76029189&4294967295,M=j+(A<<23&4294967295|A>>>9),A=D+(M^j^R)+B[9]+3654602809&4294967295,D=M+(A<<4&4294967295|A>>>28),A=R+(D^M^j)+B[12]+3873151461&4294967295,R=D+(A<<11&4294967295|A>>>21),A=j+(R^D^M)+B[15]+530742520&4294967295,j=R+(A<<16&4294967295|A>>>16),A=M+(j^R^D)+B[2]+3299628645&4294967295,M=j+(A<<23&4294967295|A>>>9),A=D+(j^(M|~R))+B[0]+4096336452&4294967295,D=M+(A<<6&4294967295|A>>>26),A=R+(M^(D|~j))+B[7]+1126891415&4294967295,R=D+(A<<10&4294967295|A>>>22),A=j+(D^(R|~M))+B[14]+2878612391&4294967295,j=R+(A<<15&4294967295|A>>>17),A=M+(R^(j|~D))+B[5]+4237533241&4294967295,M=j+(A<<21&4294967295|A>>>11),A=D+(j^(M|~R))+B[12]+1700485571&4294967295,D=M+(A<<6&4294967295|A>>>26),A=R+(M^(D|~j))+B[3]+2399980690&4294967295,R=D+(A<<10&4294967295|A>>>22),A=j+(D^(R|~M))+B[10]+4293915773&4294967295,j=R+(A<<15&4294967295|A>>>17),A=M+(R^(j|~D))+B[1]+2240044497&4294967295,M=j+(A<<21&4294967295|A>>>11),A=D+(j^(M|~R))+B[8]+1873313359&4294967295,D=M+(A<<6&4294967295|A>>>26),A=R+(M^(D|~j))+B[15]+4264355552&4294967295,R=D+(A<<10&4294967295|A>>>22),A=j+(D^(R|~M))+B[6]+2734768916&4294967295,j=R+(A<<15&4294967295|A>>>17),A=M+(R^(j|~D))+B[13]+1309151649&4294967295,M=j+(A<<21&4294967295|A>>>11),A=D+(j^(M|~R))+B[4]+4149444226&4294967295,D=M+(A<<6&4294967295|A>>>26),A=R+(M^(D|~j))+B[11]+3174756917&4294967295,R=D+(A<<10&4294967295|A>>>22),A=j+(D^(R|~M))+B[2]+718787259&4294967295,j=R+(A<<15&4294967295|A>>>17),A=M+(R^(j|~D))+B[9]+3951481745&4294967295,F.g[0]=F.g[0]+D&4294967295,F.g[1]=F.g[1]+(j+(A<<21&4294967295|A>>>11))&4294967295,F.g[2]=F.g[2]+j&4294967295,F.g[3]=F.g[3]+R&4294967295}o.prototype.v=function(F,D){D===void 0&&(D=F.length);const M=D-this.blockSize,B=this.C;let j=this.h,R=0;for(;R<D;){if(j==0)for(;R<=M;)a(this,F,R),R+=this.blockSize;if(typeof F=="string"){for(;R<D;)if(B[j++]=F.charCodeAt(R++),j==this.blockSize){a(this,B),j=0;break}}else for(;R<D;)if(B[j++]=F[R++],j==this.blockSize){a(this,B),j=0;break}}this.h=j,this.o+=D},o.prototype.A=function(){var F=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);F[0]=128;for(var D=1;D<F.length-8;++D)F[D]=0;D=this.o*8;for(var M=F.length-8;M<F.length;++M)F[M]=D&255,D/=256;for(this.v(F),F=Array(16),D=0,M=0;M<4;++M)for(let B=0;B<32;B+=8)F[D++]=this.g[M]>>>B&255;return F};function c(F,D){var M=y;return Object.prototype.hasOwnProperty.call(M,F)?M[F]:M[F]=D(F)}function p(F,D){this.h=D;const M=[];let B=!0;for(let j=F.length-1;j>=0;j--){const R=F[j]|0;B&&R==D||(M[j]=R,B=!1)}this.g=M}var y={};function w(F){return-128<=F&&F<128?c(F,function(D){return new p([D|0],D<0?-1:0)}):new p([F|0],F<0?-1:0)}function T(F){if(isNaN(F)||!isFinite(F))return k;if(F<0)return te(T(-F));const D=[];let M=1;for(let B=0;F>=M;B++)D[B]=F/M|0,M*=4294967296;return new p(D,0)}function b(F,D){if(F.length==0)throw Error("number format error: empty string");if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(F.charAt(0)=="-")return te(b(F.substring(1),D));if(F.indexOf("-")>=0)throw Error('number format error: interior "-" character');const M=T(Math.pow(D,8));let B=k;for(let R=0;R<F.length;R+=8){var j=Math.min(8,F.length-R);const A=parseInt(F.substring(R,R+j),D);j<8?(j=T(Math.pow(D,j)),B=B.j(j).add(T(A))):(B=B.j(M),B=B.add(T(A)))}return B}var k=w(0),N=w(1),V=w(16777216);r=p.prototype,r.m=function(){if(q(this))return-te(this).m();let F=0,D=1;for(let M=0;M<this.g.length;M++){const B=this.i(M);F+=(B>=0?B:4294967296+B)*D,D*=4294967296}return F},r.toString=function(F){if(F=F||10,F<2||36<F)throw Error("radix out of range: "+F);if(U(this))return"0";if(q(this))return"-"+te(this).toString(F);const D=T(Math.pow(F,6));var M=this;let B="";for(;;){const j=Oe(M,D).g;M=ce(M,j.j(D));let R=((M.g.length>0?M.g[0]:M.h)>>>0).toString(F);if(M=j,U(M))return R+B;for(;R.length<6;)R="0"+R;B=R+B}},r.i=function(F){return F<0?0:F<this.g.length?this.g[F]:this.h};function U(F){if(F.h!=0)return!1;for(let D=0;D<F.g.length;D++)if(F.g[D]!=0)return!1;return!0}function q(F){return F.h==-1}r.l=function(F){return F=ce(this,F),q(F)?-1:U(F)?0:1};function te(F){const D=F.g.length,M=[];for(let B=0;B<D;B++)M[B]=~F.g[B];return new p(M,~F.h).add(N)}r.abs=function(){return q(this)?te(this):this},r.add=function(F){const D=Math.max(this.g.length,F.g.length),M=[];let B=0;for(let j=0;j<=D;j++){let R=B+(this.i(j)&65535)+(F.i(j)&65535),A=(R>>>16)+(this.i(j)>>>16)+(F.i(j)>>>16);B=A>>>16,R&=65535,A&=65535,M[j]=A<<16|R}return new p(M,M[M.length-1]&-2147483648?-1:0)};function ce(F,D){return F.add(te(D))}r.j=function(F){if(U(this)||U(F))return k;if(q(this))return q(F)?te(this).j(te(F)):te(te(this).j(F));if(q(F))return te(this.j(te(F)));if(this.l(V)<0&&F.l(V)<0)return T(this.m()*F.m());const D=this.g.length+F.g.length,M=[];for(var B=0;B<2*D;B++)M[B]=0;for(B=0;B<this.g.length;B++)for(let j=0;j<F.g.length;j++){const R=this.i(B)>>>16,A=this.i(B)&65535,ye=F.i(j)>>>16,Ke=F.i(j)&65535;M[2*B+2*j]+=A*Ke,ge(M,2*B+2*j),M[2*B+2*j+1]+=R*Ke,ge(M,2*B+2*j+1),M[2*B+2*j+1]+=A*ye,ge(M,2*B+2*j+1),M[2*B+2*j+2]+=R*ye,ge(M,2*B+2*j+2)}for(F=0;F<D;F++)M[F]=M[2*F+1]<<16|M[2*F];for(F=D;F<2*D;F++)M[F]=0;return new p(M,0)};function ge(F,D){for(;(F[D]&65535)!=F[D];)F[D+1]+=F[D]>>>16,F[D]&=65535,D++}function Te(F,D){this.g=F,this.h=D}function Oe(F,D){if(U(D))throw Error("division by zero");if(U(F))return new Te(k,k);if(q(F))return D=Oe(te(F),D),new Te(te(D.g),te(D.h));if(q(D))return D=Oe(F,te(D)),new Te(te(D.g),D.h);if(F.g.length>30){if(q(F)||q(D))throw Error("slowDivide_ only works with positive integers.");for(var M=N,B=D;B.l(F)<=0;)M=be(M),B=be(B);var j=fe(M,1),R=fe(B,1);for(B=fe(B,2),M=fe(M,2);!U(B);){var A=R.add(B);A.l(F)<=0&&(j=j.add(M),R=A),B=fe(B,1),M=fe(M,1)}return D=ce(F,j.j(D)),new Te(j,D)}for(j=k;F.l(D)>=0;){for(M=Math.max(1,Math.floor(F.m()/D.m())),B=Math.ceil(Math.log(M)/Math.LN2),B=B<=48?1:Math.pow(2,B-48),R=T(M),A=R.j(D);q(A)||A.l(F)>0;)M-=B,R=T(M),A=R.j(D);U(R)&&(R=N),j=j.add(R),F=ce(F,A)}return new Te(j,F)}r.B=function(F){return Oe(this,F).h},r.and=function(F){const D=Math.max(this.g.length,F.g.length),M=[];for(let B=0;B<D;B++)M[B]=this.i(B)&F.i(B);return new p(M,this.h&F.h)},r.or=function(F){const D=Math.max(this.g.length,F.g.length),M=[];for(let B=0;B<D;B++)M[B]=this.i(B)|F.i(B);return new p(M,this.h|F.h)},r.xor=function(F){const D=Math.max(this.g.length,F.g.length),M=[];for(let B=0;B<D;B++)M[B]=this.i(B)^F.i(B);return new p(M,this.h^F.h)};function be(F){const D=F.g.length+1,M=[];for(let B=0;B<D;B++)M[B]=F.i(B)<<1|F.i(B-1)>>>31;return new p(M,F.h)}function fe(F,D){const M=D>>5;D%=32;const B=F.g.length-M,j=[];for(let R=0;R<B;R++)j[R]=D>0?F.i(R+M)>>>D|F.i(R+M+1)<<32-D:F.i(R+M);return new p(j,F.h)}o.prototype.digest=o.prototype.A,o.prototype.reset=o.prototype.u,o.prototype.update=o.prototype.v,i0=o,p.prototype.add=p.prototype.add,p.prototype.multiply=p.prototype.j,p.prototype.modulo=p.prototype.B,p.prototype.compare=p.prototype.l,p.prototype.toNumber=p.prototype.m,p.prototype.toString=p.prototype.toString,p.prototype.getBits=p.prototype.i,p.fromNumber=T,p.fromString=b,Co=p}).apply(typeof G_<"u"?G_:typeof self<"u"?self:typeof window<"u"?window:{});var nh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var s0,wu,o0,dh,Yf,a0,l0,u0;(function(){var r,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof nh=="object"&&nh];for(var x=0;x<h.length;++x){var I=h[x];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var o=t(this);function a(h,x){if(x)e:{var I=o;h=h.split(".");for(var C=0;C<h.length-1;C++){var G=h[C];if(!(G in I))break e;I=I[G]}h=h[h.length-1],C=I[h],x=x(C),x!=C&&x!=null&&e(I,h,{configurable:!0,writable:!0,value:x})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(x){var I=[],C;for(C in x)Object.prototype.hasOwnProperty.call(x,C)&&I.push([C,x[C]]);return I}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},p=this||self;function y(h){var x=typeof h;return x=="object"&&h!=null||x=="function"}function w(h,x,I){return h.call.apply(h.bind,arguments)}function T(h,x,I){return T=w,T.apply(null,arguments)}function b(h,x){var I=Array.prototype.slice.call(arguments,1);return function(){var C=I.slice();return C.push.apply(C,arguments),h.apply(this,C)}}function k(h,x){function I(){}I.prototype=x.prototype,h.Z=x.prototype,h.prototype=new I,h.prototype.constructor=h,h.Ob=function(C,G,Y){for(var _e=Array(arguments.length-2),He=2;He<arguments.length;He++)_e[He-2]=arguments[He];return x.prototype[G].apply(C,_e)}}var N=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function V(h){const x=h.length;if(x>0){const I=Array(x);for(let C=0;C<x;C++)I[C]=h[C];return I}return[]}function U(h,x){for(let C=1;C<arguments.length;C++){const G=arguments[C];var I=typeof G;if(I=I!="object"?I:G?Array.isArray(G)?"array":I:"null",I=="array"||I=="object"&&typeof G.length=="number"){I=h.length||0;const Y=G.length||0;h.length=I+Y;for(let _e=0;_e<Y;_e++)h[I+_e]=G[_e]}else h.push(G)}}class q{constructor(x,I){this.i=x,this.j=I,this.h=0,this.g=null}get(){let x;return this.h>0?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}function te(h){p.setTimeout(()=>{throw h},0)}function ce(){var h=F;let x=null;return h.g&&(x=h.g,h.g=h.g.next,h.g||(h.h=null),x.next=null),x}class ge{constructor(){this.h=this.g=null}add(x,I){const C=Te.get();C.set(x,I),this.h?this.h.next=C:this.g=C,this.h=C}}var Te=new q(()=>new Oe,h=>h.reset());class Oe{constructor(){this.next=this.g=this.h=null}set(x,I){this.h=x,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let be,fe=!1,F=new ge,D=()=>{const h=Promise.resolve(void 0);be=()=>{h.then(M)}};function M(){for(var h;h=ce();){try{h.h.call(h.g)}catch(I){te(I)}var x=Te;x.j(h),x.h<100&&(x.h++,h.next=x.g,x.g=h)}fe=!1}function B(){this.u=this.u,this.C=this.C}B.prototype.u=!1,B.prototype.dispose=function(){this.u||(this.u=!0,this.N())},B.prototype[Symbol.dispose]=function(){this.dispose()},B.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(h,x){this.type=h,this.g=this.target=x,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var R=(function(){if(!p.addEventListener||!Object.defineProperty)return!1;var h=!1,x=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const I=()=>{};p.addEventListener("test",I,x),p.removeEventListener("test",I,x)}catch{}return h})();function A(h){return/^[\s\xa0]*$/.test(h)}function ye(h,x){j.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,x)}k(ye,j),ye.prototype.init=function(h,x){const I=this.type=h.type,C=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=x,x=h.relatedTarget,x||(I=="mouseover"?x=h.fromElement:I=="mouseout"&&(x=h.toElement)),this.relatedTarget=x,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&ye.Z.h.call(this)},ye.prototype.h=function(){ye.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Ke="closure_listenable_"+(Math.random()*1e6|0),pe=0;function Ve(h,x,I,C,G){this.listener=h,this.proxy=null,this.src=x,this.type=I,this.capture=!!C,this.ha=G,this.key=++pe,this.da=this.fa=!1}function X(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ke(h,x,I){for(const C in h)x.call(I,h[C],C,h)}function oe(h,x){for(const I in h)x.call(void 0,h[I],I,h)}function W(h){const x={};for(const I in h)x[I]=h[I];return x}const ne="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Me(h,x){let I,C;for(let G=1;G<arguments.length;G++){C=arguments[G];for(I in C)h[I]=C[I];for(let Y=0;Y<ne.length;Y++)I=ne[Y],Object.prototype.hasOwnProperty.call(C,I)&&(h[I]=C[I])}}function Ne(h){this.src=h,this.g={},this.h=0}Ne.prototype.add=function(h,x,I,C,G){const Y=h.toString();h=this.g[Y],h||(h=this.g[Y]=[],this.h++);const _e=xe(h,x,C,G);return _e>-1?(x=h[_e],I||(x.fa=!1)):(x=new Ve(x,this.src,Y,!!C,G),x.fa=I,h.push(x)),x};function Se(h,x){const I=x.type;if(I in h.g){var C=h.g[I],G=Array.prototype.indexOf.call(C,x,void 0),Y;(Y=G>=0)&&Array.prototype.splice.call(C,G,1),Y&&(X(x),h.g[I].length==0&&(delete h.g[I],h.h--))}}function xe(h,x,I,C){for(let G=0;G<h.length;++G){const Y=h[G];if(!Y.da&&Y.listener==x&&Y.capture==!!I&&Y.ha==C)return G}return-1}var Xe="closure_lm_"+(Math.random()*1e6|0),re={};function qe(h,x,I,C,G){if(Array.isArray(x)){for(let Y=0;Y<x.length;Y++)qe(h,x[Y],I,C,G);return null}return I=ar(I),h&&h[Ke]?h.J(x,I,y(C)?!!C.capture:!1,G):dt(h,x,I,!1,C,G)}function dt(h,x,I,C,G,Y){if(!x)throw Error("Invalid event type");const _e=y(G)?!!G.capture:!!G;let He=Kr(h);if(He||(h[Xe]=He=new Ne(h)),I=He.add(x,I,C,_e,Y),I.proxy)return I;if(C=gn(),I.proxy=C,C.src=h,C.listener=I,h.addEventListener)R||(G=_e),G===void 0&&(G=!1),h.addEventListener(x.toString(),C,G);else if(h.attachEvent)h.attachEvent(di(x.toString()),C);else if(h.addListener&&h.removeListener)h.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return I}function gn(){function h(I){return x.call(h.src,h.listener,I)}const x=fi;return h}function jt(h,x,I,C,G){if(Array.isArray(x))for(var Y=0;Y<x.length;Y++)jt(h,x[Y],I,C,G);else C=y(C)?!!C.capture:!!C,I=ar(I),h&&h[Ke]?(h=h.i,Y=String(x).toString(),Y in h.g&&(x=h.g[Y],I=xe(x,I,C,G),I>-1&&(X(x[I]),Array.prototype.splice.call(x,I,1),x.length==0&&(delete h.g[Y],h.h--)))):h&&(h=Kr(h))&&(x=h.g[x.toString()],h=-1,x&&(h=xe(x,I,C,G)),(I=h>-1?x[h]:null)&&Nn(I))}function Nn(h){if(typeof h!="number"&&h&&!h.da){var x=h.src;if(x&&x[Ke])Se(x.i,h);else{var I=h.type,C=h.proxy;x.removeEventListener?x.removeEventListener(I,C,h.capture):x.detachEvent?x.detachEvent(di(I),C):x.addListener&&x.removeListener&&x.removeListener(C),(I=Kr(x))?(Se(I,h),I.h==0&&(I.src=null,x[Xe]=null)):X(h)}}}function di(h){return h in re?re[h]:re[h]="on"+h}function fi(h,x){if(h.da)h=!0;else{x=new ye(x,this);const I=h.listener,C=h.ha||h.src;h.fa&&Nn(h),h=I.call(C,x)}return h}function Kr(h){return h=h[Xe],h instanceof Ne?h:null}var or="__closure_events_fn_"+(Math.random()*1e9>>>0);function ar(h){return typeof h=="function"?h:(h[or]||(h[or]=function(x){return h.handleEvent(x)}),h[or])}function bt(){B.call(this),this.i=new Ne(this),this.M=this,this.G=null}k(bt,B),bt.prototype[Ke]=!0,bt.prototype.removeEventListener=function(h,x,I,C){jt(this,h,x,I,C)};function kt(h,x){var I,C=h.G;if(C)for(I=[];C;C=C.G)I.push(C);if(h=h.M,C=x.type||x,typeof x=="string")x=new j(x,h);else if(x instanceof j)x.target=x.target||h;else{var G=x;x=new j(C,h),Me(x,G)}G=!0;let Y,_e;if(I)for(_e=I.length-1;_e>=0;_e--)Y=x.g=I[_e],G=Rn(Y,C,!0,x)&&G;if(Y=x.g=h,G=Rn(Y,C,!0,x)&&G,G=Rn(Y,C,!1,x)&&G,I)for(_e=0;_e<I.length;_e++)Y=x.g=I[_e],G=Rn(Y,C,!1,x)&&G}bt.prototype.N=function(){if(bt.Z.N.call(this),this.i){var h=this.i;for(const x in h.g){const I=h.g[x];for(let C=0;C<I.length;C++)X(I[C]);delete h.g[x],h.h--}}this.G=null},bt.prototype.J=function(h,x,I,C){return this.i.add(String(h),x,!1,I,C)},bt.prototype.K=function(h,x,I,C){return this.i.add(String(h),x,!0,I,C)};function Rn(h,x,I,C){if(x=h.i.g[String(x)],!x)return!0;x=x.concat();let G=!0;for(let Y=0;Y<x.length;++Y){const _e=x[Y];if(_e&&!_e.da&&_e.capture==I){const He=_e.listener,ut=_e.ha||_e.src;_e.fa&&Se(h.i,_e),G=He.call(ut,C)!==!1&&G}}return G&&!C.defaultPrevented}function Ds(h,x){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=T(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(x)>2147483647?-1:p.setTimeout(h,x||0)}function Ms(h){h.g=Ds(()=>{h.g=null,h.i&&(h.i=!1,Ms(h))},h.l);const x=h.h;h.h=null,h.m.apply(null,x)}class Ma extends B{constructor(x,I){super(),this.m=x,this.l=I,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:Ms(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function pi(h){B.call(this),this.h=h,this.g={}}k(pi,B);var $i=[];function qi(h){ke(h.g,function(x,I){this.g.hasOwnProperty(I)&&Nn(x)},h),h.g={}}pi.prototype.N=function(){pi.Z.N.call(this),qi(this)},pi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Zr=p.JSON.stringify,Oa=p.JSON.parse,mi=class{stringify(h){return p.JSON.stringify(h,void 0)}parse(h){return p.JSON.parse(h,void 0)}};function Qr(){}function ja(){}var Yr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function gi(){j.call(this,"d")}k(gi,j);function Os(){j.call(this,"c")}k(Os,j);var lr={},xr=null;function _i(){return xr=xr||new bt}lr.Ia="serverreachability";function js(h){j.call(this,lr.Ia,h)}k(js,j);function wr(h){const x=_i();kt(x,new js(x))}lr.STAT_EVENT="statevent";function Er(h,x){j.call(this,lr.STAT_EVENT,h),this.stat=x}k(Er,j);function It(h){const x=_i();kt(x,new Er(x,h))}lr.Ja="timingevent";function Uo(h,x){j.call(this,lr.Ja,h),this.size=x}k(Uo,j);function yi(h,x){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){h()},x)}function vi(){this.g=!0}vi.prototype.ua=function(){this.g=!1};function Va(h,x,I,C,G,Y){h.info(function(){if(h.g)if(Y){var _e="",He=Y.split("&");for(let ft=0;ft<He.length;ft++){var ut=He[ft].split("=");if(ut.length>1){const Rt=ut[0];ut=ut[1];const Fn=Rt.split("_");_e=Fn.length>=2&&Fn[1]=="type"?_e+(Rt+"="+ut+"&"):_e+(Rt+"=redacted&")}}}else _e=null;else _e=Y;return"XMLHTTP REQ ("+C+") [attempt "+G+"]: "+x+`
`+I+`
`+_e})}function Fa(h,x,I,C,G,Y,_e){h.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+G+"]: "+x+`
`+I+`
`+Y+" "+_e})}function Tr(h,x,I,C){h.info(function(){return"XMLHTTP TEXT ("+x+"): "+Gi(h,I)+(C?" "+C:"")})}function Vs(h,x){h.info(function(){return"TIMEOUT: "+x})}vi.prototype.info=function(){};function Gi(h,x){if(!h.g)return x;if(!x)return null;try{const Y=JSON.parse(x);if(Y){for(h=0;h<Y.length;h++)if(Array.isArray(Y[h])){var I=Y[h];if(!(I.length<2)){var C=I[1];if(Array.isArray(C)&&!(C.length<1)){var G=C[0];if(G!="noop"&&G!="stop"&&G!="close")for(let _e=1;_e<C.length;_e++)C[_e]=""}}}}return Zr(Y)}catch{return x}}var xi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},wi={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},za;function Bt(){}k(Bt,Qr),Bt.prototype.g=function(){return new XMLHttpRequest},za=new Bt;function Ce(h){return encodeURIComponent(String(h))}function Ki(h){var x=1;h=h.split(":");const I=[];for(;x>0&&h.length;)I.push(h.shift()),x--;return h.length&&I.push(h.join(":")),I}function Ln(h,x,I,C){this.j=h,this.i=x,this.l=I,this.S=C||1,this.V=new pi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Bo}function Bo(){this.i=null,this.g="",this.h=!1}var Ho={},Zi={};function qn(h,x,I){h.M=1,h.A=mt(ln(x)),h.u=I,h.R=!0,Ir(h,null)}function Ir(h,x){h.F=Date.now(),Qi(h),h.B=ln(h.A);var I=h.B,C=h.S;Array.isArray(C)||(C=[String(C)]),rs(I.i,"t",C),h.C=0,I=h.j.L,h.h=new Bo,h.g=Yo(h.j,I?x:null,!h.u),h.P>0&&(h.O=new Ma(T(h.Y,h,h.g),h.P)),x=h.V,I=h.g,C=h.ba;var G="readystatechange";Array.isArray(G)||(G&&($i[0]=G.toString()),G=$i);for(let Y=0;Y<G.length;Y++){const _e=qe(I,G[Y],C||x.handleEvent,!1,x.h||x);if(!_e)break;x.g[_e.key]=_e}x=h.J?W(h.J):{},h.u?(h.v||(h.v="POST"),x["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,x)):(h.v="GET",h.g.ea(h.B,h.v,null,x)),wr(),Va(h.i,h.v,h.B,h.l,h.S,h.u)}Ln.prototype.ba=function(h){h=h.target;const x=this.O;x&&Nr(h)==3?x.j():this.Y(h)},Ln.prototype.Y=function(h){try{if(h==this.g)e:{const He=Nr(this.g),ut=this.g.ya(),ft=this.g.ca();if(!(He<3)&&(He!=3||this.g&&(this.h.h||this.g.la()||Ko(this.g)))){this.K||He!=4||ut==7||(ut==8||ft<=0?wr(3):wr(2)),Yi(this);var x=this.g.ca();this.X=x;var I=Wo(this);if(this.o=x==200,Fa(this.i,this.v,this.B,this.l,this.S,He,x),this.o){if(this.U&&!this.L){t:{if(this.g){var C,G=this.g;if((C=G.g?G.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(C)){var Y=C;break t}}Y=null}if(h=Y)Tr(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,xt(this,h);else{this.o=!1,this.m=3,It(12),Gn(this),Ji(this);break e}}if(this.R){h=!0;let Rt;for(;!this.K&&this.C<I.length;)if(Rt=Ba(this,I),Rt==Zi){He==4&&(this.m=4,It(14),h=!1),Tr(this.i,this.l,null,"[Incomplete Response]");break}else if(Rt==Ho){this.m=4,It(15),Tr(this.i,this.l,I,"[Invalid Chunk]"),h=!1;break}else Tr(this.i,this.l,Rt,null),xt(this,Rt);if(Ua(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),He!=4||I.length!=0||this.h.h||(this.m=1,It(16),h=!1),this.o=this.o&&h,!h)Tr(this.i,this.l,I,"[Invalid Chunked Response]"),Gn(this),Ji(this);else if(I.length>0&&!this.W){this.W=!0;var _e=this.j;_e.g==this&&_e.aa&&!_e.P&&(_e.j.info("Great, no buffering proxy detected. Bytes received: "+I.length),us(_e),_e.P=!0,It(11))}}else Tr(this.i,this.l,I,null),xt(this,I);He==4&&Gn(this),this.o&&!this.K&&(He==4?cn(this.j,this):(this.o=!1,Qi(this)))}else os(this.g),x==400&&I.indexOf("Unknown SID")>0?(this.m=3,It(12)):(this.m=0,It(13)),Gn(this),Ji(this)}}}catch{}finally{}};function Wo(h){if(!Ua(h))return h.g.la();const x=Ko(h.g);if(x==="")return"";let I="";const C=x.length,G=Nr(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Gn(h),Ji(h),"";h.h.i=new p.TextDecoder}for(let Y=0;Y<C;Y++)h.h.h=!0,I+=h.h.i.decode(x[Y],{stream:!(G&&Y==C-1)});return x.length=0,h.h.g+=I,h.C=0,h.h.g}function Ua(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Ba(h,x){var I=h.C,C=x.indexOf(`
`,I);return C==-1?Zi:(I=Number(x.substring(I,C)),isNaN(I)?Ho:(C+=1,C+I>x.length?Zi:(x=x.slice(C,C+I),h.C=C+I,x)))}Ln.prototype.cancel=function(){this.K=!0,Gn(this)};function Qi(h){h.T=Date.now()+h.H,$o(h,h.H)}function $o(h,x){if(h.D!=null)throw Error("WatchDog timer not null");h.D=yi(T(h.aa,h),x)}function Yi(h){h.D&&(p.clearTimeout(h.D),h.D=null)}Ln.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Vs(this.i,this.B),this.M!=2&&(wr(),It(17)),Gn(this),this.m=2,Ji(this)):$o(this,this.T-h)};function Ji(h){h.j.I==0||h.K||cn(h.j,h)}function Gn(h){Yi(h);var x=h.O;x&&typeof x.dispose=="function"&&x.dispose(),h.O=null,qi(h.V),h.g&&(x=h.g,h.g=null,x.abort(),x.dispose())}function xt(h,x){try{var I=h.j;if(I.I!=0&&(I.g==h||es(I.h,h))){if(!h.L&&es(I.h,h)&&I.I==3){try{var C=I.Ba.g.parse(x)}catch{C=null}if(Array.isArray(C)&&C.length==3){var G=C;if(G[0]==0){e:if(!I.v){if(I.g)if(I.g.F+3e3<h.F)Bs(I),jn(I);else break e;Lr(I),It(18)}}else I.xa=G[1],0<I.xa-I.K&&G[2]<37500&&I.F&&I.A==0&&!I.C&&(I.C=yi(T(I.Va,I),6e3));Xi(I.h)<=1&&I.ta&&(I.ta=void 0)}else xn(I,11)}else if((h.L||I.g==h)&&Bs(I),!A(x))for(G=I.Ba.g.parse(x),x=0;x<G.length;x++){let ft=G[x];const Rt=ft[0];if(!(Rt<=I.K))if(I.K=Rt,ft=ft[1],I.I==2)if(ft[0]=="c"){I.M=ft[1],I.ba=ft[2];const Fn=ft[3];Fn!=null&&(I.ka=Fn,I.j.info("VER="+I.ka));const hr=ft[4];hr!=null&&(I.za=hr,I.j.info("SVER="+I.za));const Yn=ft[5];Yn!=null&&typeof Yn=="number"&&Yn>0&&(C=1.5*Yn,I.O=C,I.j.info("backChannelRequestTimeoutMs_="+C)),C=I;const Mr=h.g;if(Mr){const Gs=Mr.g?Mr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Gs){var Y=C.h;Y.g||Gs.indexOf("spdy")==-1&&Gs.indexOf("quic")==-1&&Gs.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(Sr(Y,Y.h),Y.h=null))}if(C.G){const Ks=Mr.g?Mr.g.getResponseHeader("X-HTTP-Session-Id"):null;Ks&&(C.wa=Ks,Ee(C.J,C.G,Ks))}}I.I=3,I.l&&I.l.ra(),I.aa&&(I.T=Date.now()-h.F,I.j.info("Handshake RTT: "+I.T+"ms")),C=I;var _e=h;if(C.na=Ws(C,C.L?C.ba:null,C.W),_e.L){Ei(C.h,_e);var He=_e,ut=C.O;ut&&(He.H=ut),He.D&&(Yi(He),Qi(He)),C.g=_e}else Qt(C);I.i.length>0&&Vn(I)}else ft[0]!="stop"&&ft[0]!="close"||xn(I,7);else I.I==3&&(ft[0]=="stop"||ft[0]=="close"?ft[0]=="stop"?xn(I,7):nt(I):ft[0]!="noop"&&I.l&&I.l.qa(ft),I.A=0)}}wr(4)}catch{}}var Wl=class{constructor(h,x){this.g=h,this.map=x}};function Fs(h){this.l=h||10,p.PerformanceNavigationTiming?(h=p.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function qo(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Xi(h){return h.h?1:h.g?h.g.size:0}function es(h,x){return h.h?h.h==x:h.g?h.g.has(x):!1}function Sr(h,x){h.g?h.g.add(x):h.h=x}function Ei(h,x){h.h&&h.h==x?h.h=null:h.g&&h.g.has(x)&&h.g.delete(x)}Fs.prototype.cancel=function(){if(this.i=_n(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function _n(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let x=h.i;for(const I of h.g.values())x=x.concat(I.G);return x}return V(h.i)}var Ti=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qe(h,x){if(h){h=h.split("&");for(let I=0;I<h.length;I++){const C=h[I].indexOf("=");let G,Y=null;C>=0?(G=h[I].substring(0,C),Y=h[I].substring(C+1)):G=h[I],x(G,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function lt(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let x;h instanceof lt?(this.l=h.l,Kn(this,h.j),this.o=h.o,this.g=h.g,un(this,h.u),this.h=h.h,Pr(this,Si(h.i)),this.m=h.m):h&&(x=String(h).match(Ti))?(this.l=!1,Kn(this,x[1]||"",!0),this.o=Jr(x[2]||""),this.g=Jr(x[3]||"",!0),un(this,x[4]),this.h=Jr(x[5]||"",!0),Pr(this,x[6]||"",!0),this.m=Jr(x[7]||"")):(this.l=!1,this.i=new tt(null,this.l))}lt.prototype.toString=function(){const h=[];var x=this.j;x&&h.push(br(x,Go,!0),":");var I=this.g;return(I||x=="file")&&(h.push("//"),(x=this.o)&&h.push(br(x,Go,!0),"@"),h.push(Ce(I).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.u,I!=null&&h.push(":",String(I))),(I=this.h)&&(this.g&&I.charAt(0)!="/"&&h.push("/"),h.push(br(I,I.charAt(0)=="/"?Dn:Ii,!0))),(I=this.i.toString())&&h.push("?",I),(I=this.m)&&h.push("#",br(I,ur)),h.join("")},lt.prototype.resolve=function(h){const x=ln(this);let I=!!h.j;I?Kn(x,h.j):I=!!h.o,I?x.o=h.o:I=!!h.g,I?x.g=h.g:I=h.u!=null;var C=h.h;if(I)un(x,h.u);else if(I=!!h.h){if(C.charAt(0)!="/")if(this.g&&!this.h)C="/"+C;else{var G=x.h.lastIndexOf("/");G!=-1&&(C=x.h.slice(0,G+1)+C)}if(G=C,G==".."||G==".")C="";else if(G.indexOf("./")!=-1||G.indexOf("/.")!=-1){C=G.lastIndexOf("/",0)==0,G=G.split("/");const Y=[];for(let _e=0;_e<G.length;){const He=G[_e++];He=="."?C&&_e==G.length&&Y.push(""):He==".."?((Y.length>1||Y.length==1&&Y[0]!="")&&Y.pop(),C&&_e==G.length&&Y.push("")):(Y.push(He),C=!0)}C=Y.join("/")}else C=G}return I?x.h=C:I=h.i.toString()!=="",I?Pr(x,Si(h.i)):I=!!h.m,I&&(x.m=h.m),x};function ln(h){return new lt(h)}function Kn(h,x,I){h.j=I?Jr(x,!0):x,h.j&&(h.j=h.j.replace(/:$/,""))}function un(h,x){if(x){if(x=Number(x),isNaN(x)||x<0)throw Error("Bad port number "+x);h.u=x}else h.u=null}function Pr(h,x,I){x instanceof tt?(h.i=x,Pi(h.i,h.l)):(I||(x=br(x,Ct)),h.i=new tt(x,h.l))}function Ee(h,x,I){h.i.set(x,I)}function mt(h){return Ee(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Jr(h,x){return h?x?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function br(h,x,I){return typeof h=="string"?(h=encodeURI(h).replace(x,tn),I&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function tn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Go=/[#\/\?@]/g,Ii=/[#\?:]/g,Dn=/[#\?]/g,Ct=/[#\?@]/g,ur=/#/g;function tt(h,x){this.h=this.g=null,this.i=h||null,this.j=!!x}function yn(h){h.g||(h.g=new Map,h.h=0,h.i&&Qe(h.i,function(x,I){h.add(decodeURIComponent(x.replace(/\+/g," ")),I)}))}r=tt.prototype,r.add=function(h,x){yn(this),this.i=null,h=Zn(this,h);let I=this.g.get(h);return I||this.g.set(h,I=[]),I.push(x),this.h+=1,this};function ts(h,x){yn(h),x=Zn(h,x),h.g.has(x)&&(h.i=null,h.h-=h.g.get(x).length,h.g.delete(x))}function kr(h,x){return yn(h),x=Zn(h,x),h.g.has(x)}r.forEach=function(h,x){yn(this),this.g.forEach(function(I,C){I.forEach(function(G){h.call(x,G,C,this)},this)},this)};function ns(h,x){yn(h);let I=[];if(typeof x=="string")kr(h,x)&&(I=I.concat(h.g.get(Zn(h,x))));else for(h=Array.from(h.g.values()),x=0;x<h.length;x++)I=I.concat(h[x]);return I}r.set=function(h,x){return yn(this),this.i=null,h=Zn(this,h),kr(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[x]),this.h+=1,this},r.get=function(h,x){return h?(h=ns(this,h),h.length>0?String(h[0]):x):x};function rs(h,x,I){ts(h,x),I.length>0&&(h.i=null,h.g.set(Zn(h,x),V(I)),h.h+=I.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],x=Array.from(this.g.keys());for(let C=0;C<x.length;C++){var I=x[C];const G=Ce(I);I=ns(this,I);for(let Y=0;Y<I.length;Y++){let _e=G;I[Y]!==""&&(_e+="="+Ce(I[Y])),h.push(_e)}}return this.i=h.join("&")};function Si(h){const x=new tt;return x.i=h.i,h.g&&(x.g=new Map(h.g),x.h=h.h),x}function Zn(h,x){return x=String(x),h.j&&(x=x.toLowerCase()),x}function Pi(h,x){x&&!h.j&&(yn(h),h.i=null,h.g.forEach(function(I,C){const G=C.toLowerCase();C!=G&&(ts(this,C),rs(this,G,I))},h)),h.j=x}function Mn(h,x){const I=new vi;if(p.Image){const C=new Image;C.onload=b(Vt,I,"TestLoadImage: loaded",!0,x,C),C.onerror=b(Vt,I,"TestLoadImage: error",!1,x,C),C.onabort=b(Vt,I,"TestLoadImage: abort",!1,x,C),C.ontimeout=b(Vt,I,"TestLoadImage: timeout",!1,x,C),p.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=h}else x(!1)}function cr(h,x){const I=new vi,C=new AbortController,G=setTimeout(()=>{C.abort(),Vt(I,"TestPingServer: timeout",!1,x)},1e4);fetch(h,{signal:C.signal}).then(Y=>{clearTimeout(G),Y.ok?Vt(I,"TestPingServer: ok",!0,x):Vt(I,"TestPingServer: server error",!1,x)}).catch(()=>{clearTimeout(G),Vt(I,"TestPingServer: error",!1,x)})}function Vt(h,x,I,C,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),C(I)}catch{}}function is(){this.g=new mi}function ze(h){this.i=h.Sb||null,this.h=h.ab||!1}k(ze,Qr),ze.prototype.g=function(){return new At(this.i,this.h)};function At(h,x){bt.call(this),this.H=h,this.o=x,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}k(At,bt),r=At.prototype,r.open=function(h,x){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=x,this.readyState=1,On(this)},r.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const x={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(x.body=h),(this.H||p).fetch(new Request(this.D,x)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Xr(this)),this.readyState=0},r.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,On(this)),this.g&&(this.readyState=3,On(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof p.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;gt(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function gt(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}r.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var x=h.value?h.value:new Uint8Array(0);(x=this.B.decode(x,{stream:!h.done}))&&(this.response=this.responseText+=x)}h.done?Xr(this):On(this),this.readyState==3&&gt(this)}},r.Oa=function(h){this.g&&(this.response=this.responseText=h,Xr(this))},r.Na=function(h){this.g&&(this.response=h,Xr(this))},r.ga=function(){this.g&&Xr(this)};function Xr(h){h.readyState=4,h.l=null,h.j=null,h.B=null,On(h)}r.setRequestHeader=function(h,x){this.A.append(h,x)},r.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],x=this.h.entries();for(var I=x.next();!I.done;)I=I.value,h.push(I[0]+": "+I[1]),I=x.next();return h.join(`\r
`)};function On(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(At.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function zs(h){let x="";return ke(h,function(I,C){x+=C,x+=":",x+=I,x+=`\r
`}),x}function bi(h,x,I){e:{for(C in I){var C=!1;break e}C=!0}C||(I=zs(I),typeof h=="string"?I!=null&&Ce(I):Ee(h,x,I))}function at(h){bt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}k(at,bt);var Us=/^https?$/i,ss=["POST","PUT"];r=at.prototype,r.Fa=function(h){this.H=h},r.ea=function(h,x,I,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);x=x?x.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():za.g(),this.g.onreadystatechange=N(T(this.Ca,this));try{this.B=!0,this.g.open(x,String(h),!0),this.B=!1}catch(Y){wt(this,Y);return}if(h=I||"",I=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var G in C)I.set(G,C[G]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const Y of C.keys())I.set(Y,C.get(Y));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(I.keys()).find(Y=>Y.toLowerCase()=="content-type"),G=p.FormData&&h instanceof p.FormData,!(Array.prototype.indexOf.call(ss,x,void 0)>=0)||C||G||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,_e]of I)this.g.setRequestHeader(Y,_e);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(Y){wt(this,Y)}};function wt(h,x){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=x,h.o=5,vn(h),Ar(h)}function vn(h){h.A||(h.A=!0,kt(h,"complete"),kt(h,"error"))}r.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,kt(this,"complete"),kt(this,"abort"),Ar(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ar(this,!0)),at.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Cr(this):this.Xa())},r.Xa=function(){Cr(this)};function Cr(h){if(h.h&&typeof c<"u"){if(h.v&&Nr(h)==4)setTimeout(h.Ca.bind(h),0);else if(kt(h,"readystatechange"),Nr(h)==4){h.h=!1;try{const Y=h.ca();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break e;default:x=!1}var I;if(!(I=x)){var C;if(C=Y===0){let _e=String(h.D).match(Ti)[1]||null;!_e&&p.self&&p.self.location&&(_e=p.self.location.protocol.slice(0,-1)),C=!Us.test(_e?_e.toLowerCase():"")}I=C}if(I)kt(h,"complete"),kt(h,"success");else{h.o=6;try{var G=Nr(h)>2?h.g.statusText:""}catch{G=""}h.l=G+" ["+h.ca()+"]",vn(h)}}finally{Ar(h)}}}}function Ar(h,x){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const I=h.g;h.g=null,x||kt(h,"ready");try{I.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Nr(h){return h.g?h.g.readyState:0}r.ca=function(){try{return Nr(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(h){if(this.g){var x=this.g.responseText;return h&&x.indexOf(h)==0&&(x=x.substring(h.length)),Oa(x)}};function Ko(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function os(h){const x={};h=(h.g&&Nr(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<h.length;C++){if(A(h[C]))continue;var I=Ki(h[C]);const G=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const Y=x[G]||[];x[G]=Y,Y.push(I)}oe(x,function(C){return C.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Rr(h,x,I){return I&&I.internalChannelParams&&I.internalChannelParams[h]||x}function as(h){this.za=0,this.i=[],this.j=new vi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Rr("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Rr("baseRetryDelayMs",5e3,h),this.Za=Rr("retryDelaySeedMs",1e4,h),this.Ta=Rr("forwardChannelMaxRetries",2,h),this.va=Rr("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Fs(h&&h.concurrentRequestLimit),this.Ba=new is,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=as.prototype,r.ka=8,r.I=1,r.connect=function(h,x,I,C){It(0),this.W=h,this.H=x||{},I&&C!==void 0&&(this.H.OSID=I,this.H.OAID=C),this.F=this.X,this.J=Ws(this,null,this.W),Vn(this)};function nt(h){if(nn(h),h.I==3){var x=h.V++,I=ln(h.J);if(Ee(I,"SID",h.M),Ee(I,"RID",x),Ee(I,"TYPE","terminate"),Qn(h,I),x=new Ln(h,h.j,x),x.M=2,x.A=mt(ln(I)),I=!1,p.navigator&&p.navigator.sendBeacon)try{I=p.navigator.sendBeacon(x.A.toString(),"")}catch{}!I&&p.Image&&(new Image().src=x.A,I=!0),I||(x.g=Yo(x.j,null),x.g.ea(x.A)),x.F=Date.now(),Qi(x)}wn(h)}function jn(h){h.g&&(us(h),h.g.cancel(),h.g=null)}function nn(h){jn(h),h.v&&(p.clearTimeout(h.v),h.v=null),Bs(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&p.clearTimeout(h.m),h.m=null)}function Vn(h){if(!qo(h.h)&&!h.m){h.m=!0;var x=h.Ea;be||D(),fe||(be(),fe=!0),F.add(x,h),h.D=0}}function Zo(h,x){return Xi(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=x.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=yi(T(h.Ea,h,x),Hs(h,h.D)),h.D++,!0)}r.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const G=new Ln(this,this.j,h);let Y=this.o;if(this.U&&(Y?(Y=W(Y),Me(Y,this.U)):Y=this.U),this.u!==null||this.R||(G.J=Y,Y=null),this.S)e:{for(var x=0,I=0;I<this.i.length;I++){t:{var C=this.i[I];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(x+=C,x>4096){x=I;break e}if(x===4096||I===this.i.length-1){x=I+1;break e}}x=1e3}else x=1e3;x=Qo(this,G,x),I=ln(this.J),Ee(I,"RID",h),Ee(I,"CVER",22),this.G&&Ee(I,"X-HTTP-Session-Id",this.G),Qn(this,I),Y&&(this.R?x="headers="+Ce(zs(Y))+"&"+x:this.u&&bi(I,this.u,Y)),Sr(this.h,G),this.Ra&&Ee(I,"TYPE","init"),this.S?(Ee(I,"$req",x),Ee(I,"SID","null"),G.U=!0,qn(G,I,null)):qn(G,I,x),this.I=2}}else this.I==3&&(h?ls(this,h):this.i.length==0||qo(this.h)||ls(this))};function ls(h,x){var I;x?I=x.l:I=h.V++;const C=ln(h.J);Ee(C,"SID",h.M),Ee(C,"RID",I),Ee(C,"AID",h.K),Qn(h,C),h.u&&h.o&&bi(C,h.u,h.o),I=new Ln(h,h.j,I,h.D+1),h.u===null&&(I.J=h.o),x&&(h.i=x.G.concat(h.i)),x=Qo(h,I,1e3),I.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Sr(h.h,I),qn(I,C,x)}function Qn(h,x){h.H&&ke(h.H,function(I,C){Ee(x,C,I)}),h.l&&ke({},function(I,C){Ee(x,C,I)})}function Qo(h,x,I){I=Math.min(h.i.length,I);const C=h.l?T(h.l.Ka,h.l,h):null;e:{var G=h.i;let He=-1;for(;;){const ut=["count="+I];He==-1?I>0?(He=G[0].g,ut.push("ofs="+He)):He=0:ut.push("ofs="+He);let ft=!0;for(let Rt=0;Rt<I;Rt++){var Y=G[Rt].g;const Fn=G[Rt].map;if(Y-=He,Y<0)He=Math.max(0,G[Rt].g-100),ft=!1;else try{Y="req"+Y+"_"||"";try{var _e=Fn instanceof Map?Fn:Object.entries(Fn);for(const[hr,Yn]of _e){let Mr=Yn;y(Yn)&&(Mr=Zr(Yn)),ut.push(Y+hr+"="+encodeURIComponent(Mr))}}catch(hr){throw ut.push(Y+"type="+encodeURIComponent("_badmap")),hr}}catch{C&&C(Fn)}}if(ft){_e=ut.join("&");break e}}_e=void 0}return h=h.i.splice(0,I),x.G=h,_e}function Qt(h){if(!h.g&&!h.v){h.Y=1;var x=h.Da;be||D(),fe||(be(),fe=!0),F.add(x,h),h.A=0}}function Lr(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=yi(T(h.Da,h),Hs(h,h.A)),h.A++,!0)}r.Da=function(){if(this.v=null,Dr(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=yi(T(this.Wa,this),h)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,It(10),jn(this),Dr(this))};function us(h){h.B!=null&&(p.clearTimeout(h.B),h.B=null)}function Dr(h){h.g=new Ln(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var x=ln(h.na);Ee(x,"RID","rpc"),Ee(x,"SID",h.M),Ee(x,"AID",h.K),Ee(x,"CI",h.F?"0":"1"),!h.F&&h.ia&&Ee(x,"TO",h.ia),Ee(x,"TYPE","xmlhttp"),Qn(h,x),h.u&&h.o&&bi(x,h.u,h.o),h.O&&(h.g.H=h.O);var I=h.g;h=h.ba,I.M=1,I.A=mt(ln(x)),I.u=null,I.R=!0,Ir(I,h)}r.Va=function(){this.C!=null&&(this.C=null,jn(this),Lr(this),It(19))};function Bs(h){h.C!=null&&(p.clearTimeout(h.C),h.C=null)}function cn(h,x){var I=null;if(h.g==x){Bs(h),us(h),h.g=null;var C=2}else if(es(h.h,x))I=x.G,Ei(h.h,x),C=1;else return;if(h.I!=0){if(x.o)if(C==1){I=x.u?x.u.length:0,x=Date.now()-x.F;var G=h.D;C=_i(),kt(C,new Uo(C,I)),Vn(h)}else Qt(h);else if(G=x.m,G==3||G==0&&x.X>0||!(C==1&&Zo(h,x)||C==2&&Lr(h)))switch(I&&I.length>0&&(x=h.h,x.i=x.i.concat(I)),G){case 1:xn(h,5);break;case 4:xn(h,10);break;case 3:xn(h,6);break;default:xn(h,2)}}}function Hs(h,x){let I=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(I*=2),I*x}function xn(h,x){if(h.j.info("Error code "+x),x==2){var I=T(h.bb,h),C=h.Ua;const G=!C;C=new lt(C||"//www.google.com/images/cleardot.gif"),p.location&&p.location.protocol=="http"||Kn(C,"https"),mt(C),G?Mn(C.toString(),I):cr(C.toString(),I)}else It(2);h.I=0,h.l&&h.l.pa(x),wn(h),nn(h)}r.bb=function(h){h?(this.j.info("Successfully pinged google.com"),It(2)):(this.j.info("Failed to ping google.com"),It(1))};function wn(h){if(h.I=0,h.ja=[],h.l){const x=_n(h.h);(x.length!=0||h.i.length!=0)&&(U(h.ja,x),U(h.ja,h.i),h.h.i.length=0,V(h.i),h.i.length=0),h.l.oa()}}function Ws(h,x,I){var C=I instanceof lt?ln(I):new lt(I);if(C.g!="")x&&(C.g=x+"."+C.g),un(C,C.u);else{var G=p.location;C=G.protocol,x=x?x+"."+G.hostname:G.hostname,G=+G.port;const Y=new lt(null);C&&Kn(Y,C),x&&(Y.g=x),G&&un(Y,G),I&&(Y.h=I),C=Y}return I=h.G,x=h.wa,I&&x&&Ee(C,I,x),Ee(C,"VER",h.ka),Qn(h,C),C}function Yo(h,x,I){if(x&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return x=h.Aa&&!h.ma?new at(new ze({ab:I})):new at(h.ma),x.Fa(h.L),x}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function $s(){}r=$s.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function qs(){}qs.prototype.g=function(h,x){return new Ht(h,x)};function Ht(h,x){bt.call(this),this.g=new as(x),this.l=h,this.h=x&&x.messageUrlParams||null,h=x&&x.messageHeaders||null,x&&x.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=x&&x.initMessageHeaders||null,x&&x.messageContentType&&(h?h["X-WebChannel-Content-Type"]=x.messageContentType:h={"X-WebChannel-Content-Type":x.messageContentType}),x&&x.sa&&(h?h["X-WebChannel-Client-Profile"]=x.sa:h={"X-WebChannel-Client-Profile":x.sa}),this.g.U=h,(h=x&&x.Qb)&&!A(h)&&(this.g.u=h),this.A=x&&x.supportsCrossDomainXhr||!1,this.v=x&&x.sendRawJson||!1,(x=x&&x.httpSessionIdParam)&&!A(x)&&(this.g.G=x,h=this.h,h!==null&&x in h&&(h=this.h,x in h&&delete h[x])),this.j=new ki(this)}k(Ht,bt),Ht.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ht.prototype.close=function(){nt(this.g)},Ht.prototype.o=function(h){var x=this.g;if(typeof h=="string"){var I={};I.__data__=h,h=I}else this.v&&(I={},I.__data__=Zr(h),h=I);x.i.push(new Wl(x.Ya++,h)),x.I==3&&Vn(x)},Ht.prototype.N=function(){this.g.l=null,delete this.j,nt(this.g),delete this.g,Ht.Z.N.call(this)};function Jo(h){gi.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var x=h.__sm__;if(x){e:{for(const I in x){h=I;break e}h=void 0}(this.i=h)&&(h=this.i,x=x!==null&&h in x?x[h]:void 0),this.data=x}else this.data=h}k(Jo,gi);function Ha(){Os.call(this),this.status=1}k(Ha,Os);function ki(h){this.g=h}k(ki,$s),ki.prototype.ra=function(){kt(this.g,"a")},ki.prototype.qa=function(h){kt(this.g,new Jo(h))},ki.prototype.pa=function(h){kt(this.g,new Ha)},ki.prototype.oa=function(){kt(this.g,"b")},qs.prototype.createWebChannel=qs.prototype.g,Ht.prototype.send=Ht.prototype.o,Ht.prototype.open=Ht.prototype.m,Ht.prototype.close=Ht.prototype.close,u0=function(){return new qs},l0=function(){return _i()},a0=lr,Yf={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},xi.NO_ERROR=0,xi.TIMEOUT=8,xi.HTTP_ERROR=6,dh=xi,wi.COMPLETE="complete",o0=wi,ja.EventType=Yr,Yr.OPEN="a",Yr.CLOSE="b",Yr.ERROR="c",Yr.MESSAGE="d",bt.prototype.listen=bt.prototype.J,wu=ja,at.prototype.listenOnce=at.prototype.K,at.prototype.getLastError=at.prototype.Ha,at.prototype.getLastErrorCode=at.prototype.ya,at.prototype.getStatus=at.prototype.ca,at.prototype.getResponseJson=at.prototype.La,at.prototype.getResponseText=at.prototype.la,at.prototype.send=at.prototype.ea,at.prototype.setWithCredentials=at.prototype.Fa,s0=at}).apply(typeof nh<"u"?nh:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}kn.UNAUTHENTICATED=new kn(null),kn.GOOGLE_CREDENTIALS=new kn("google-credentials-uid"),kn.FIRST_PARTY=new kn("first-party-uid"),kn.MOCK_USER=new kn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jl="12.9.0";function xS(r){jl=r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pa=new _p("@firebase/firestore");function gl(){return Pa.logLevel}function Pe(r,...e){if(Pa.logLevel<=it.DEBUG){const t=e.map(Rp);Pa.debug(`Firestore (${jl}): ${r}`,...t)}}function As(r,...e){if(Pa.logLevel<=it.ERROR){const t=e.map(Rp);Pa.error(`Firestore (${jl}): ${r}`,...t)}}function ba(r,...e){if(Pa.logLevel<=it.WARN){const t=e.map(Rp);Pa.warn(`Firestore (${jl}): ${r}`,...t)}}function Rp(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $e(r,e,t){let o="Unexpected state";typeof e=="string"?o=e:t=e,c0(r,o,t)}function c0(r,e,t){let o=`FIRESTORE (${jl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{o+=" CONTEXT: "+JSON.stringify(t)}catch{o+=" CONTEXT: "+t}throw As(o),new Error(o)}function yt(r,e,t,o){let a="Unexpected state";typeof t=="string"?a=t:o=t,r||c0(e,a,o)}function Je(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ve extends Ls{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class wS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(kn.UNAUTHENTICATED)))}shutdown(){}}class ES{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class TS{constructor(e){this.t=e,this.currentUser=kn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){yt(this.o===void 0,42304);let o=this.i;const a=w=>this.i!==o?(o=this.i,t(w)):Promise.resolve();let c=new bs;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new bs,e.enqueueRetryable((()=>a(this.currentUser)))};const p=()=>{const w=c;e.enqueueRetryable((async()=>{await w.promise,await a(this.currentUser)}))},y=w=>{Pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=w,this.o&&(this.auth.addAuthTokenListener(this.o),p())};this.t.onInit((w=>y(w))),setTimeout((()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?y(w):(Pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new bs)}}),0),p()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((o=>this.i!==e?(Pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(yt(typeof o.accessToken=="string",31837,{l:o}),new h0(o.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return yt(e===null||typeof e=="string",2055,{h:e}),new kn(e)}}class IS{constructor(e,t,o){this.P=e,this.T=t,this.I=o,this.type="FirstParty",this.user=kn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class SS{constructor(e,t,o){this.P=e,this.T=t,this.I=o}getToken(){return Promise.resolve(new IS(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(kn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class K_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class PS{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,qr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){yt(this.o===void 0,3512);const o=c=>{c.error!=null&&Pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const p=c.token!==this.m;return this.m=c.token,Pe("FirebaseAppCheckTokenProvider",`Received ${p?"new":"existing"} token.`),p?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>o(c)))};const a=c=>{Pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>a(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?a(c):Pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new K_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(yt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new K_(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bS(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let o=0;o<r;o++)t[o]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let o="";for(;o.length<20;){const a=bS(40);for(let c=0;c<a.length;++c)o.length<20&&a[c]<t&&(o+=e.charAt(a[c]%62))}return o}}function st(r,e){return r<e?-1:r>e?1:0}function Jf(r,e){const t=Math.min(r.length,e.length);for(let o=0;o<t;o++){const a=r.charAt(o),c=e.charAt(o);if(a!==c)return Rf(a)===Rf(c)?st(a,c):Rf(a)?1:-1}return st(r.length,e.length)}const kS=55296,CS=57343;function Rf(r){const e=r.charCodeAt(0);return e>=kS&&e<=CS}function Cl(r,e,t){return r.length===e.length&&r.every(((o,a)=>t(o,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z_="__name__";class Vi{constructor(e,t,o){t===void 0?t=0:t>e.length&&$e(637,{offset:t,range:e.length}),o===void 0?o=e.length-t:o>e.length-t&&$e(1746,{length:o,range:e.length-t}),this.segments=e,this.offset=t,this.len=o}get length(){return this.len}isEqual(e){return Vi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Vi?e.forEach((o=>{t.push(o)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,o=this.limit();t<o;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const o=Math.min(e.length,t.length);for(let a=0;a<o;a++){const c=Vi.compareSegments(e.get(a),t.get(a));if(c!==0)return c}return st(e.length,t.length)}static compareSegments(e,t){const o=Vi.isNumericId(e),a=Vi.isNumericId(t);return o&&!a?-1:!o&&a?1:o&&a?Vi.extractNumericId(e).compare(Vi.extractNumericId(t)):Jf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Co.fromString(e.substring(4,e.length-2))}}class Tt extends Vi{construct(e,t,o){return new Tt(e,t,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const o of e){if(o.indexOf("//")>=0)throw new ve(se.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);t.push(...o.split("/").filter((a=>a.length>0)))}return new Tt(t)}static emptyPath(){return new Tt([])}}const AS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pn extends Vi{construct(e,t,o){return new pn(e,t,o)}static isValidIdentifier(e){return AS.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Z_}static keyField(){return new pn([Z_])}static fromServerFormat(e){const t=[];let o="",a=0;const c=()=>{if(o.length===0)throw new ve(se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(o),o=""};let p=!1;for(;a<e.length;){const y=e[a];if(y==="\\"){if(a+1===e.length)throw new ve(se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[a+1];if(w!=="\\"&&w!=="."&&w!=="`")throw new ve(se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=w,a+=2}else y==="`"?(p=!p,a++):y!=="."||p?(o+=y,a++):(c(),a++)}if(c(),p)throw new ve(se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pn(t)}static emptyPath(){return new pn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e){this.path=e}static fromPath(e){return new je(Tt.fromString(e))}static fromName(e){return new je(Tt.fromString(e).popFirst(5))}static empty(){return new je(Tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Tt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new je(new Tt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d0(r,e,t){if(!t)throw new ve(se.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function NS(r,e,t,o){if(e===!0&&o===!0)throw new ve(se.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Q_(r){if(!je.isDocumentKey(r))throw new ve(se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Y_(r){if(je.isDocumentKey(r))throw new ve(se.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function f0(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Gh(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(o){return o.constructor?o.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":$e(12329,{type:typeof r})}function Ns(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ve(se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Gh(r);throw new ve(se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(r,e){const t={typeString:r};return e&&(t.value=e),t}function Zu(r,e){if(!f0(r))throw new ve(se.INVALID_ARGUMENT,"JSON must be an object");let t;for(const o in e)if(e[o]){const a=e[o].typeString,c="value"in e[o]?{value:e[o].value}:void 0;if(!(o in r)){t=`JSON missing required field: '${o}'`;break}const p=r[o];if(a&&typeof p!==a){t=`JSON field '${o}' must be a ${a}.`;break}if(c!==void 0&&p!==c.value){t=`Expected '${o}' field to equal '${c.value}'`;break}}if(t)throw new ve(se.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J_=-62135596800,X_=1e6;class Pt{static now(){return Pt.fromMillis(Date.now())}static fromDate(e){return Pt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),o=Math.floor((e-1e3*t)*X_);return new Pt(t,o)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ve(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ve(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<J_)throw new ve(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ve(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/X_}_compareTo(e){return this.seconds===e.seconds?st(this.nanoseconds,e.nanoseconds):st(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Pt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Zu(e,Pt._jsonSchema))return new Pt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-J_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Pt._jsonSchemaVersion="firestore/timestamp/1.0",Pt._jsonSchema={type:Kt("string",Pt._jsonSchemaVersion),seconds:Kt("number"),nanoseconds:Kt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{static fromTimestamp(e){return new Ye(e)}static min(){return new Ye(new Pt(0,0))}static max(){return new Ye(new Pt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mu=-1;function RS(r,e){const t=r.toTimestamp().seconds,o=r.toTimestamp().nanoseconds+1,a=Ye.fromTimestamp(o===1e9?new Pt(t+1,0):new Pt(t,o));return new No(a,je.empty(),e)}function LS(r){return new No(r.readTime,r.key,Mu)}class No{constructor(e,t,o){this.readTime=e,this.documentKey=t,this.largestBatchId=o}static min(){return new No(Ye.min(),je.empty(),Mu)}static max(){return new No(Ye.max(),je.empty(),Mu)}}function DS(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=je.comparator(r.documentKey,e.documentKey),t!==0?t:st(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class OS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vl(r){if(r.code!==se.FAILED_PRECONDITION||r.message!==MS)throw r;Pe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&$e(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ae(((o,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(o,a)},this.catchCallback=c=>{this.wrapFailure(t,c).next(o,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ae?t:ae.resolve(t)}catch(t){return ae.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ae.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ae.reject(t)}static resolve(e){return new ae(((t,o)=>{t(e)}))}static reject(e){return new ae(((t,o)=>{o(e)}))}static waitFor(e){return new ae(((t,o)=>{let a=0,c=0,p=!1;e.forEach((y=>{++a,y.next((()=>{++c,p&&c===a&&t()}),(w=>o(w)))})),p=!0,c===a&&t()}))}static or(e){let t=ae.resolve(!1);for(const o of e)t=t.next((a=>a?ae.resolve(a):o()));return t}static forEach(e,t){const o=[];return e.forEach(((a,c)=>{o.push(t.call(this,a,c))})),this.waitFor(o)}static mapArray(e,t){return new ae(((o,a)=>{const c=e.length,p=new Array(c);let y=0;for(let w=0;w<c;w++){const T=w;t(e[T]).next((b=>{p[T]=b,++y,y===c&&o(p)}),(b=>a(b)))}}))}static doWhile(e,t){return new ae(((o,a)=>{const c=()=>{e()===!0?t().next((()=>{c()}),a):o()};c()}))}}function jS(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Fl(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=o=>this.ae(o),this.ue=o=>t.writeSequenceNumber(o))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Kh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dp=-1;function Zh(r){return r==null}function kh(r){return r===0&&1/r==-1/0}function VS(r){return typeof r=="number"&&Number.isInteger(r)&&!kh(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p0="";function FS(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=ey(e)),e=zS(r.get(t),e);return ey(e)}function zS(r,e){let t=e;const o=r.length;for(let a=0;a<o;a++){const c=r.charAt(a);switch(c){case"\0":t+="";break;case p0:t+="";break;default:t+=c}}return t}function ey(r){return r+p0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ty(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Fo(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function m0(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e,t){this.comparator=e,this.root=t||fn.EMPTY}insert(e,t){return new Mt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,fn.BLACK,null,null))}remove(e){return new Mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,fn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const o=this.comparator(e,t.key);if(o===0)return t.value;o<0?t=t.left:o>0&&(t=t.right)}return null}indexOf(e){let t=0,o=this.root;for(;!o.isEmpty();){const a=this.comparator(e,o.key);if(a===0)return t+o.left.size;a<0?o=o.left:(t+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,o)=>(e(t,o),!1)))}toString(){const e=[];return this.inorderTraversal(((t,o)=>(e.push(`${t}:${o}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new rh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new rh(this.root,e,this.comparator,!1)}getReverseIterator(){return new rh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new rh(this.root,e,this.comparator,!0)}}class rh{constructor(e,t,o,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?o(e.key,t):1,t&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class fn{constructor(e,t,o,a,c){this.key=e,this.value=t,this.color=o??fn.RED,this.left=a??fn.EMPTY,this.right=c??fn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,o,a,c){return new fn(e??this.key,t??this.value,o??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,o){let a=this;const c=o(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,t,o),null):c===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,o)),a.fixUp()}removeMin(){if(this.left.isEmpty())return fn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let o,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return fn.EMPTY;o=a.right.min(),a=a.copy(o.key,o.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,fn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,fn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw $e(43730,{key:this.key,value:this.value});if(this.right.isRed())throw $e(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw $e(27949);return e+(this.isRed()?0:1)}}fn.EMPTY=null,fn.RED=!0,fn.BLACK=!1;fn.EMPTY=new class{constructor(){this.size=0}get key(){throw $e(57766)}get value(){throw $e(16141)}get color(){throw $e(16727)}get left(){throw $e(29726)}get right(){throw $e(36894)}copy(e,t,o,a,c){return this}insert(e,t,o){return new fn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.comparator=e,this.data=new Mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,o)=>(e(t),!1)))}forEachInRange(e,t){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const a=o.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let o;for(o=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ny(this.data.getIterator())}getIteratorFrom(e){return new ny(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((o=>{t=t.add(o)})),t}isEqual(e){if(!(e instanceof en)||this.size!==e.size)return!1;const t=this.data.getIterator(),o=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=o.getNext().key;if(this.comparator(a,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new en(this.comparator);return t.data=e,t}}class ny{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e){this.fields=e,e.sort(pn.comparator)}static empty(){return new yr([])}unionWith(e){let t=new en(pn.comparator);for(const o of this.fields)t=t.add(o);for(const o of e)t=t.add(o);return new yr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Cl(this.fields,e.fields,((t,o)=>t.isEqual(o)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new g0("Invalid base64 string: "+c):c}})(e);return new mn(t)}static fromUint8Array(e){const t=(function(a){let c="";for(let p=0;p<a.length;++p)c+=String.fromCharCode(a[p]);return c})(e);return new mn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const o=new Uint8Array(t.length);for(let a=0;a<t.length;a++)o[a]=t.charCodeAt(a);return o})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return st(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}mn.EMPTY_BYTE_STRING=new mn("");const US=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ro(r){if(yt(!!r,39018),typeof r=="string"){let e=0;const t=US.exec(r);if(yt(!!t,46558,{timestamp:r}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const o=new Date(r);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:zt(r.seconds),nanos:zt(r.nanos)}}function zt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Lo(r){return typeof r=="string"?mn.fromBase64String(r):mn.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0="server_timestamp",y0="__type__",v0="__previous_value__",x0="__local_write_time__";function Mp(r){var t,o;return((o=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[y0])==null?void 0:o.stringValue)===_0}function Qh(r){const e=r.mapValue.fields[v0];return Mp(e)?Qh(e):e}function Ou(r){const e=Ro(r.mapValue.fields[x0].timestampValue);return new Pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(e,t,o,a,c,p,y,w,T,b,k){this.databaseId=e,this.appId=t,this.persistenceKey=o,this.host=a,this.ssl=c,this.forceLongPolling=p,this.autoDetectLongPolling=y,this.longPollingOptions=w,this.useFetchStreams=T,this.isUsingEmulator=b,this.apiKey=k}}const Ch="(default)";class ju{constructor(e,t){this.projectId=e,this.database=t||Ch}static empty(){return new ju("","")}get isDefaultDatabase(){return this.database===Ch}isEqual(e){return e instanceof ju&&e.projectId===this.projectId&&e.database===this.database}}function HS(r,e){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new ve(se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ju(r.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w0="__type__",WS="__max__",ih={mapValue:{}},E0="__vector__",Ah="value";function Do(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Mp(r)?4:qS(r)?9007199254740991:$S(r)?10:11:$e(28295,{value:r})}function Wi(r,e){if(r===e)return!0;const t=Do(r);if(t!==Do(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Ou(r).isEqual(Ou(e));case 3:return(function(a,c){if(typeof a.timestampValue=="string"&&typeof c.timestampValue=="string"&&a.timestampValue.length===c.timestampValue.length)return a.timestampValue===c.timestampValue;const p=Ro(a.timestampValue),y=Ro(c.timestampValue);return p.seconds===y.seconds&&p.nanos===y.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(a,c){return Lo(a.bytesValue).isEqual(Lo(c.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(a,c){return zt(a.geoPointValue.latitude)===zt(c.geoPointValue.latitude)&&zt(a.geoPointValue.longitude)===zt(c.geoPointValue.longitude)})(r,e);case 2:return(function(a,c){if("integerValue"in a&&"integerValue"in c)return zt(a.integerValue)===zt(c.integerValue);if("doubleValue"in a&&"doubleValue"in c){const p=zt(a.doubleValue),y=zt(c.doubleValue);return p===y?kh(p)===kh(y):isNaN(p)&&isNaN(y)}return!1})(r,e);case 9:return Cl(r.arrayValue.values||[],e.arrayValue.values||[],Wi);case 10:case 11:return(function(a,c){const p=a.mapValue.fields||{},y=c.mapValue.fields||{};if(ty(p)!==ty(y))return!1;for(const w in p)if(p.hasOwnProperty(w)&&(y[w]===void 0||!Wi(p[w],y[w])))return!1;return!0})(r,e);default:return $e(52216,{left:r})}}function Vu(r,e){return(r.values||[]).find((t=>Wi(t,e)))!==void 0}function Al(r,e){if(r===e)return 0;const t=Do(r),o=Do(e);if(t!==o)return st(t,o);switch(t){case 0:case 9007199254740991:return 0;case 1:return st(r.booleanValue,e.booleanValue);case 2:return(function(c,p){const y=zt(c.integerValue||c.doubleValue),w=zt(p.integerValue||p.doubleValue);return y<w?-1:y>w?1:y===w?0:isNaN(y)?isNaN(w)?0:-1:1})(r,e);case 3:return ry(r.timestampValue,e.timestampValue);case 4:return ry(Ou(r),Ou(e));case 5:return Jf(r.stringValue,e.stringValue);case 6:return(function(c,p){const y=Lo(c),w=Lo(p);return y.compareTo(w)})(r.bytesValue,e.bytesValue);case 7:return(function(c,p){const y=c.split("/"),w=p.split("/");for(let T=0;T<y.length&&T<w.length;T++){const b=st(y[T],w[T]);if(b!==0)return b}return st(y.length,w.length)})(r.referenceValue,e.referenceValue);case 8:return(function(c,p){const y=st(zt(c.latitude),zt(p.latitude));return y!==0?y:st(zt(c.longitude),zt(p.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return iy(r.arrayValue,e.arrayValue);case 10:return(function(c,p){var N,V,U,q;const y=c.fields||{},w=p.fields||{},T=(N=y[Ah])==null?void 0:N.arrayValue,b=(V=w[Ah])==null?void 0:V.arrayValue,k=st(((U=T==null?void 0:T.values)==null?void 0:U.length)||0,((q=b==null?void 0:b.values)==null?void 0:q.length)||0);return k!==0?k:iy(T,b)})(r.mapValue,e.mapValue);case 11:return(function(c,p){if(c===ih.mapValue&&p===ih.mapValue)return 0;if(c===ih.mapValue)return 1;if(p===ih.mapValue)return-1;const y=c.fields||{},w=Object.keys(y),T=p.fields||{},b=Object.keys(T);w.sort(),b.sort();for(let k=0;k<w.length&&k<b.length;++k){const N=Jf(w[k],b[k]);if(N!==0)return N;const V=Al(y[w[k]],T[b[k]]);if(V!==0)return V}return st(w.length,b.length)})(r.mapValue,e.mapValue);default:throw $e(23264,{he:t})}}function ry(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return st(r,e);const t=Ro(r),o=Ro(e),a=st(t.seconds,o.seconds);return a!==0?a:st(t.nanos,o.nanos)}function iy(r,e){const t=r.values||[],o=e.values||[];for(let a=0;a<t.length&&a<o.length;++a){const c=Al(t[a],o[a]);if(c)return c}return st(t.length,o.length)}function Nl(r){return Xf(r)}function Xf(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const o=Ro(t);return`time(${o.seconds},${o.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return Lo(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return je.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let o="[",a=!0;for(const c of t.values||[])a?a=!1:o+=",",o+=Xf(c);return o+"]"})(r.arrayValue):"mapValue"in r?(function(t){const o=Object.keys(t.fields||{}).sort();let a="{",c=!0;for(const p of o)c?c=!1:a+=",",a+=`${p}:${Xf(t.fields[p])}`;return a+"}"})(r.mapValue):$e(61005,{value:r})}function fh(r){switch(Do(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Qh(r);return e?16+fh(e):16;case 5:return 2*r.stringValue.length;case 6:return Lo(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(o){return(o.values||[]).reduce(((a,c)=>a+fh(c)),0)})(r.arrayValue);case 10:case 11:return(function(o){let a=0;return Fo(o.fields,((c,p)=>{a+=c.length+fh(p)})),a})(r.mapValue);default:throw $e(13486,{value:r})}}function sy(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function ep(r){return!!r&&"integerValue"in r}function Op(r){return!!r&&"arrayValue"in r}function oy(r){return!!r&&"nullValue"in r}function ay(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function ph(r){return!!r&&"mapValue"in r}function $S(r){var t,o;return((o=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[w0])==null?void 0:o.stringValue)===E0}function ku(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Fo(r.mapValue.fields,((t,o)=>e.mapValue.fields[t]=ku(o))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ku(r.arrayValue.values[t]);return e}return{...r}}function qS(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===WS}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e){this.value=e}static empty(){return new sr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let o=0;o<e.length-1;++o)if(t=(t.mapValue.fields||{})[e.get(o)],!ph(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ku(t)}setAll(e){let t=pn.emptyPath(),o={},a=[];e.forEach(((p,y)=>{if(!t.isImmediateParentOf(y)){const w=this.getFieldsMap(t);this.applyChanges(w,o,a),o={},a=[],t=y.popLast()}p?o[y.lastSegment()]=ku(p):a.push(y.lastSegment())}));const c=this.getFieldsMap(t);this.applyChanges(c,o,a)}delete(e){const t=this.field(e.popLast());ph(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Wi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let o=0;o<e.length;++o){let a=t.mapValue.fields[e.get(o)];ph(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(o)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,o){Fo(t,((a,c)=>e[a]=c));for(const a of o)delete e[a]}clone(){return new sr(ku(this.value))}}function T0(r){const e=[];return Fo(r.fields,((t,o)=>{const a=new pn([t]);if(ph(o)){const c=T0(o.mapValue).fields;if(c.length===0)e.push(a);else for(const p of c)e.push(a.child(p))}else e.push(a)})),new yr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e,t,o,a,c,p,y){this.key=e,this.documentType=t,this.version=o,this.readTime=a,this.createTime=c,this.data=p,this.documentState=y}static newInvalidDocument(e){return new Cn(e,0,Ye.min(),Ye.min(),Ye.min(),sr.empty(),0)}static newFoundDocument(e,t,o,a){return new Cn(e,1,t,Ye.min(),o,a,0)}static newNoDocument(e,t){return new Cn(e,2,t,Ye.min(),Ye.min(),sr.empty(),0)}static newUnknownDocument(e,t){return new Cn(e,3,t,Ye.min(),Ye.min(),sr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ye.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=sr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=sr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Cn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Cn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(e,t){this.position=e,this.inclusive=t}}function ly(r,e,t){let o=0;for(let a=0;a<r.position.length;a++){const c=e[a],p=r.position[a];if(c.field.isKeyField()?o=je.comparator(je.fromName(p.referenceValue),t.key):o=Al(p,t.data.field(c.field)),c.dir==="desc"&&(o*=-1),o!==0)break}return o}function uy(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Wi(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(e,t="asc"){this.field=e,this.dir=t}}function GS(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{}class Gt extends I0{constructor(e,t,o){super(),this.field=e,this.op=t,this.value=o}static create(e,t,o){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,o):new ZS(e,t,o):t==="array-contains"?new JS(e,o):t==="in"?new XS(e,o):t==="not-in"?new eP(e,o):t==="array-contains-any"?new tP(e,o):new Gt(e,t,o)}static createKeyFieldInFilter(e,t,o){return t==="in"?new QS(e,o):new YS(e,o)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Al(t,this.value)):t!==null&&Do(this.value)===Do(t)&&this.matchesComparison(Al(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return $e(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hi extends I0{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new hi(e,t)}matches(e){return S0(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function S0(r){return r.op==="and"}function P0(r){return KS(r)&&S0(r)}function KS(r){for(const e of r.filters)if(e instanceof hi)return!1;return!0}function tp(r){if(r instanceof Gt)return r.field.canonicalString()+r.op.toString()+Nl(r.value);if(P0(r))return r.filters.map((e=>tp(e))).join(",");{const e=r.filters.map((t=>tp(t))).join(",");return`${r.op}(${e})`}}function b0(r,e){return r instanceof Gt?(function(o,a){return a instanceof Gt&&o.op===a.op&&o.field.isEqual(a.field)&&Wi(o.value,a.value)})(r,e):r instanceof hi?(function(o,a){return a instanceof hi&&o.op===a.op&&o.filters.length===a.filters.length?o.filters.reduce(((c,p,y)=>c&&b0(p,a.filters[y])),!0):!1})(r,e):void $e(19439)}function k0(r){return r instanceof Gt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Nl(t.value)}`})(r):r instanceof hi?(function(t){return t.op.toString()+" {"+t.getFilters().map(k0).join(" ,")+"}"})(r):"Filter"}class ZS extends Gt{constructor(e,t,o){super(e,t,o),this.key=je.fromName(o.referenceValue)}matches(e){const t=je.comparator(e.key,this.key);return this.matchesComparison(t)}}class QS extends Gt{constructor(e,t){super(e,"in",t),this.keys=C0("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class YS extends Gt{constructor(e,t){super(e,"not-in",t),this.keys=C0("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function C0(r,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((o=>je.fromName(o.referenceValue)))}class JS extends Gt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Op(t)&&Vu(t.arrayValue,this.value)}}class XS extends Gt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Vu(this.value.arrayValue,t)}}class eP extends Gt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Vu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Vu(this.value.arrayValue,t)}}class tP extends Gt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Op(t)||!t.arrayValue.values)&&t.arrayValue.values.some((o=>Vu(this.value.arrayValue,o)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{constructor(e,t=null,o=[],a=[],c=null,p=null,y=null){this.path=e,this.collectionGroup=t,this.orderBy=o,this.filters=a,this.limit=c,this.startAt=p,this.endAt=y,this.Te=null}}function cy(r,e=null,t=[],o=[],a=null,c=null,p=null){return new nP(r,e,t,o,a,c,p)}function jp(r){const e=Je(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((o=>tp(o))).join(","),t+="|ob:",t+=e.orderBy.map((o=>(function(c){return c.field.canonicalString()+c.dir})(o))).join(","),Zh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((o=>Nl(o))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((o=>Nl(o))).join(",")),e.Te=t}return e.Te}function Vp(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!GS(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!b0(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!uy(r.startAt,e.startAt)&&uy(r.endAt,e.endAt)}function np(r){return je.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(e,t=null,o=[],a=[],c=null,p="F",y=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=o,this.filters=a,this.limit=c,this.limitType=p,this.startAt=y,this.endAt=w,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function rP(r,e,t,o,a,c,p,y){return new zl(r,e,t,o,a,c,p,y)}function Fp(r){return new zl(r)}function hy(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function iP(r){return je.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function A0(r){return r.collectionGroup!==null}function Cu(r){const e=Je(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),t.add(c.field.canonicalString());const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(p){let y=new en(pn.comparator);return p.filters.forEach((w=>{w.getFlattenedFilters().forEach((T=>{T.isInequality()&&(y=y.add(T.field))}))})),y})(e).forEach((c=>{t.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new Fu(c,o))})),t.has(pn.keyField().canonicalString())||e.Ie.push(new Fu(pn.keyField(),o))}return e.Ie}function Ui(r){const e=Je(r);return e.Ee||(e.Ee=sP(e,Cu(r))),e.Ee}function sP(r,e){if(r.limitType==="F")return cy(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((a=>{const c=a.dir==="desc"?"asc":"desc";return new Fu(a.field,c)}));const t=r.endAt?new Nh(r.endAt.position,r.endAt.inclusive):null,o=r.startAt?new Nh(r.startAt.position,r.startAt.inclusive):null;return cy(r.path,r.collectionGroup,e,r.filters,r.limit,t,o)}}function rp(r,e){const t=r.filters.concat([e]);return new zl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function oP(r,e){const t=r.explicitOrderBy.concat([e]);return new zl(r.path,r.collectionGroup,t,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}function ip(r,e,t){return new zl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Yh(r,e){return Vp(Ui(r),Ui(e))&&r.limitType===e.limitType}function N0(r){return`${jp(Ui(r))}|lt:${r.limitType}`}function _l(r){return`Query(target=${(function(t){let o=t.path.canonicalString();return t.collectionGroup!==null&&(o+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(o+=`, filters: [${t.filters.map((a=>k0(a))).join(", ")}]`),Zh(t.limit)||(o+=", limit: "+t.limit),t.orderBy.length>0&&(o+=`, orderBy: [${t.orderBy.map((a=>(function(p){return`${p.field.canonicalString()} (${p.dir})`})(a))).join(", ")}]`),t.startAt&&(o+=", startAt: ",o+=t.startAt.inclusive?"b:":"a:",o+=t.startAt.position.map((a=>Nl(a))).join(",")),t.endAt&&(o+=", endAt: ",o+=t.endAt.inclusive?"a:":"b:",o+=t.endAt.position.map((a=>Nl(a))).join(",")),`Target(${o})`})(Ui(r))}; limitType=${r.limitType})`}function Jh(r,e){return e.isFoundDocument()&&(function(o,a){const c=a.key.path;return o.collectionGroup!==null?a.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(c):je.isDocumentKey(o.path)?o.path.isEqual(c):o.path.isImmediateParentOf(c)})(r,e)&&(function(o,a){for(const c of Cu(o))if(!c.field.isKeyField()&&a.data.field(c.field)===null)return!1;return!0})(r,e)&&(function(o,a){for(const c of o.filters)if(!c.matches(a))return!1;return!0})(r,e)&&(function(o,a){return!(o.startAt&&!(function(p,y,w){const T=ly(p,y,w);return p.inclusive?T<=0:T<0})(o.startAt,Cu(o),a)||o.endAt&&!(function(p,y,w){const T=ly(p,y,w);return p.inclusive?T>=0:T>0})(o.endAt,Cu(o),a))})(r,e)}function aP(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function R0(r){return(e,t)=>{let o=!1;for(const a of Cu(r)){const c=lP(a,e,t);if(c!==0)return c;o=o||a.field.isKeyField()}return 0}}function lP(r,e,t){const o=r.field.isKeyField()?je.comparator(e.key,t.key):(function(c,p,y){const w=p.data.field(c),T=y.data.field(c);return w!==null&&T!==null?Al(w,T):$e(42886)})(r.field,e,t);switch(r.dir){case"asc":return o;case"desc":return-1*o;default:return $e(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),o=this.inner[t];if(o!==void 0){for(const[a,c]of o)if(this.equalsFn(a,e))return c}}has(e){return this.get(e)!==void 0}set(e,t){const o=this.mapKeyFn(e),a=this.inner[o];if(a===void 0)return this.inner[o]=[[e,t]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),o=this.inner[t];if(o===void 0)return!1;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return o.length===1?delete this.inner[t]:o.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Fo(this.inner,((t,o)=>{for(const[a,c]of o)e(a,c)}))}isEmpty(){return m0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uP=new Mt(je.comparator);function Rs(){return uP}const L0=new Mt(je.comparator);function Eu(...r){let e=L0;for(const t of r)e=e.insert(t.key,t);return e}function D0(r){let e=L0;return r.forEach(((t,o)=>e=e.insert(t,o.overlayedDocument))),e}function _a(){return Au()}function M0(){return Au()}function Au(){return new Ra((r=>r.toString()),((r,e)=>r.isEqual(e)))}const cP=new Mt(je.comparator),hP=new en(je.comparator);function ot(...r){let e=hP;for(const t of r)e=e.add(t);return e}const dP=new en(st);function fP(){return dP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zp(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:kh(e)?"-0":e}}function O0(r){return{integerValue:""+r}}function pP(r,e){return VS(e)?O0(e):zp(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(){this._=void 0}}function mP(r,e,t){return r instanceof Rh?(function(a,c){const p={fields:{[y0]:{stringValue:_0},[x0]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return c&&Mp(c)&&(c=Qh(c)),c&&(p.fields[v0]=c),{mapValue:p}})(t,e):r instanceof zu?V0(r,e):r instanceof Uu?F0(r,e):(function(a,c){const p=j0(a,c),y=dy(p)+dy(a.Ae);return ep(p)&&ep(a.Ae)?O0(y):zp(a.serializer,y)})(r,e)}function gP(r,e,t){return r instanceof zu?V0(r,e):r instanceof Uu?F0(r,e):t}function j0(r,e){return r instanceof Lh?(function(o){return ep(o)||(function(c){return!!c&&"doubleValue"in c})(o)})(e)?e:{integerValue:0}:null}class Rh extends Xh{}class zu extends Xh{constructor(e){super(),this.elements=e}}function V0(r,e){const t=z0(e);for(const o of r.elements)t.some((a=>Wi(a,o)))||t.push(o);return{arrayValue:{values:t}}}class Uu extends Xh{constructor(e){super(),this.elements=e}}function F0(r,e){let t=z0(e);for(const o of r.elements)t=t.filter((a=>!Wi(a,o)));return{arrayValue:{values:t}}}class Lh extends Xh{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function dy(r){return zt(r.integerValue||r.doubleValue)}function z0(r){return Op(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function _P(r,e){return r.field.isEqual(e.field)&&(function(o,a){return o instanceof zu&&a instanceof zu||o instanceof Uu&&a instanceof Uu?Cl(o.elements,a.elements,Wi):o instanceof Lh&&a instanceof Lh?Wi(o.Ae,a.Ae):o instanceof Rh&&a instanceof Rh})(r.transform,e.transform)}class yP{constructor(e,t){this.version=e,this.transformResults=t}}class vr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new vr}static exists(e){return new vr(void 0,e)}static updateTime(e){return new vr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function mh(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class ed{}function U0(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new td(r.key,vr.none()):new Qu(r.key,r.data,vr.none());{const t=r.data,o=sr.empty();let a=new en(pn.comparator);for(let c of e.fields)if(!a.has(c)){let p=t.field(c);p===null&&c.length>1&&(c=c.popLast(),p=t.field(c)),p===null?o.delete(c):o.set(c,p),a=a.add(c)}return new zo(r.key,o,new yr(a.toArray()),vr.none())}}function vP(r,e,t){r instanceof Qu?(function(a,c,p){const y=a.value.clone(),w=py(a.fieldTransforms,c,p.transformResults);y.setAll(w),c.convertToFoundDocument(p.version,y).setHasCommittedMutations()})(r,e,t):r instanceof zo?(function(a,c,p){if(!mh(a.precondition,c))return void c.convertToUnknownDocument(p.version);const y=py(a.fieldTransforms,c,p.transformResults),w=c.data;w.setAll(B0(a)),w.setAll(y),c.convertToFoundDocument(p.version,w).setHasCommittedMutations()})(r,e,t):(function(a,c,p){c.convertToNoDocument(p.version).setHasCommittedMutations()})(0,e,t)}function Nu(r,e,t,o){return r instanceof Qu?(function(c,p,y,w){if(!mh(c.precondition,p))return y;const T=c.value.clone(),b=my(c.fieldTransforms,w,p);return T.setAll(b),p.convertToFoundDocument(p.version,T).setHasLocalMutations(),null})(r,e,t,o):r instanceof zo?(function(c,p,y,w){if(!mh(c.precondition,p))return y;const T=my(c.fieldTransforms,w,p),b=p.data;return b.setAll(B0(c)),b.setAll(T),p.convertToFoundDocument(p.version,b).setHasLocalMutations(),y===null?null:y.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((k=>k.field)))})(r,e,t,o):(function(c,p,y){return mh(c.precondition,p)?(p.convertToNoDocument(p.version).setHasLocalMutations(),null):y})(r,e,t)}function xP(r,e){let t=null;for(const o of r.fieldTransforms){const a=e.data.field(o.field),c=j0(o.transform,a||null);c!=null&&(t===null&&(t=sr.empty()),t.set(o.field,c))}return t||null}function fy(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(o,a){return o===void 0&&a===void 0||!(!o||!a)&&Cl(o,a,((c,p)=>_P(c,p)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Qu extends ed{constructor(e,t,o,a=[]){super(),this.key=e,this.value=t,this.precondition=o,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class zo extends ed{constructor(e,t,o,a,c=[]){super(),this.key=e,this.data=t,this.fieldMask=o,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function B0(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const o=r.data.field(t);e.set(t,o)}})),e}function py(r,e,t){const o=new Map;yt(r.length===t.length,32656,{Ve:t.length,de:r.length});for(let a=0;a<t.length;a++){const c=r[a],p=c.transform,y=e.data.field(c.field);o.set(c.field,gP(p,y,t[a]))}return o}function my(r,e,t){const o=new Map;for(const a of r){const c=a.transform,p=t.data.field(a.field);o.set(a.field,mP(c,p,e))}return o}class td extends ed{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class wP extends ed{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(e,t,o,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=o,this.mutations=a}applyToRemoteDocument(e,t){const o=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&vP(c,e,o[a])}}applyToLocalView(e,t){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(t=Nu(o,e,t,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(t=Nu(o,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const o=M0();return this.mutations.forEach((a=>{const c=e.get(a.key),p=c.overlayedDocument;let y=this.applyToLocalView(p,c.mutatedFields);y=t.has(a.key)?null:y;const w=U0(p,y);w!==null&&o.set(a.key,w),p.isValidDocument()||p.convertToNoDocument(Ye.min())})),o}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ot())}isEqual(e){return this.batchId===e.batchId&&Cl(this.mutations,e.mutations,((t,o)=>fy(t,o)))&&Cl(this.baseMutations,e.baseMutations,((t,o)=>fy(t,o)))}}class Up{constructor(e,t,o,a){this.batch=e,this.commitVersion=t,this.mutationResults=o,this.docVersions=a}static from(e,t,o){yt(e.mutations.length===o.length,58842,{me:e.mutations.length,fe:o.length});let a=(function(){return cP})();const c=e.mutations;for(let p=0;p<c.length;p++)a=a.insert(c[p].key,o[p].version);return new Up(e,t,o,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qt,ct;function SP(r){switch(r){case se.OK:return $e(64938);case se.CANCELLED:case se.UNKNOWN:case se.DEADLINE_EXCEEDED:case se.RESOURCE_EXHAUSTED:case se.INTERNAL:case se.UNAVAILABLE:case se.UNAUTHENTICATED:return!1;case se.INVALID_ARGUMENT:case se.NOT_FOUND:case se.ALREADY_EXISTS:case se.PERMISSION_DENIED:case se.FAILED_PRECONDITION:case se.ABORTED:case se.OUT_OF_RANGE:case se.UNIMPLEMENTED:case se.DATA_LOSS:return!0;default:return $e(15467,{code:r})}}function H0(r){if(r===void 0)return As("GRPC error has no .code"),se.UNKNOWN;switch(r){case qt.OK:return se.OK;case qt.CANCELLED:return se.CANCELLED;case qt.UNKNOWN:return se.UNKNOWN;case qt.DEADLINE_EXCEEDED:return se.DEADLINE_EXCEEDED;case qt.RESOURCE_EXHAUSTED:return se.RESOURCE_EXHAUSTED;case qt.INTERNAL:return se.INTERNAL;case qt.UNAVAILABLE:return se.UNAVAILABLE;case qt.UNAUTHENTICATED:return se.UNAUTHENTICATED;case qt.INVALID_ARGUMENT:return se.INVALID_ARGUMENT;case qt.NOT_FOUND:return se.NOT_FOUND;case qt.ALREADY_EXISTS:return se.ALREADY_EXISTS;case qt.PERMISSION_DENIED:return se.PERMISSION_DENIED;case qt.FAILED_PRECONDITION:return se.FAILED_PRECONDITION;case qt.ABORTED:return se.ABORTED;case qt.OUT_OF_RANGE:return se.OUT_OF_RANGE;case qt.UNIMPLEMENTED:return se.UNIMPLEMENTED;case qt.DATA_LOSS:return se.DATA_LOSS;default:return $e(39323,{code:r})}}(ct=qt||(qt={}))[ct.OK=0]="OK",ct[ct.CANCELLED=1]="CANCELLED",ct[ct.UNKNOWN=2]="UNKNOWN",ct[ct.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ct[ct.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ct[ct.NOT_FOUND=5]="NOT_FOUND",ct[ct.ALREADY_EXISTS=6]="ALREADY_EXISTS",ct[ct.PERMISSION_DENIED=7]="PERMISSION_DENIED",ct[ct.UNAUTHENTICATED=16]="UNAUTHENTICATED",ct[ct.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ct[ct.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ct[ct.ABORTED=10]="ABORTED",ct[ct.OUT_OF_RANGE=11]="OUT_OF_RANGE",ct[ct.UNIMPLEMENTED=12]="UNIMPLEMENTED",ct[ct.INTERNAL=13]="INTERNAL",ct[ct.UNAVAILABLE=14]="UNAVAILABLE",ct[ct.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bP=new Co([4294967295,4294967295],0);function gy(r){const e=PP().encode(r),t=new i0;return t.update(e),new Uint8Array(t.digest())}function _y(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),o=e.getUint32(4,!0),a=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Co([t,o],0),new Co([a,c],0)]}class Bp{constructor(e,t,o){if(this.bitmap=e,this.padding=t,this.hashCount=o,t<0||t>=8)throw new Tu(`Invalid padding: ${t}`);if(o<0)throw new Tu(`Invalid hash count: ${o}`);if(e.length>0&&this.hashCount===0)throw new Tu(`Invalid hash count: ${o}`);if(e.length===0&&t!==0)throw new Tu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Co.fromNumber(this.ge)}ye(e,t,o){let a=e.add(t.multiply(Co.fromNumber(o)));return a.compare(bP)===1&&(a=new Co([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=gy(e),[o,a]=_y(t);for(let c=0;c<this.hashCount;c++){const p=this.ye(o,a,c);if(!this.we(p))return!1}return!0}static create(e,t,o){const a=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),p=new Bp(c,a,t);return o.forEach((y=>p.insert(y))),p}insert(e){if(this.ge===0)return;const t=gy(e),[o,a]=_y(t);for(let c=0;c<this.hashCount;c++){const p=this.ye(o,a,c);this.be(p)}}be(e){const t=Math.floor(e/8),o=e%8;this.bitmap[t]|=1<<o}}class Tu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(e,t,o,a,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=o,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,o){const a=new Map;return a.set(e,Yu.createSynthesizedTargetChangeForCurrentChange(e,t,o)),new nd(Ye.min(),a,new Mt(st),Rs(),ot())}}class Yu{constructor(e,t,o,a,c){this.resumeToken=e,this.current=t,this.addedDocuments=o,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,o){return new Yu(o,t,ot(),ot(),ot())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(e,t,o,a){this.Se=e,this.removedTargetIds=t,this.key=o,this.De=a}}class W0{constructor(e,t){this.targetId=e,this.Ce=t}}class $0{constructor(e,t,o=mn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=o,this.cause=a}}class yy{constructor(){this.ve=0,this.Fe=vy(),this.Me=mn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ot(),t=ot(),o=ot();return this.Fe.forEach(((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:o=o.add(a);break;default:$e(38017,{changeType:c})}})),new Yu(this.Me,this.xe,e,t,o)}Ke(){this.Oe=!1,this.Fe=vy()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,yt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class kP{constructor(e){this.Ge=e,this.ze=new Map,this.je=Rs(),this.He=sh(),this.Je=sh(),this.Ze=new Mt(st)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const o=this.nt(t);switch(e.state){case 0:this.rt(t)&&o.Le(e.resumeToken);break;case 1:o.We(),o.Ne||o.Ke(),o.Le(e.resumeToken);break;case 2:o.We(),o.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(o.Qe(),o.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),o.Le(e.resumeToken));break;default:$e(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((o,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,o=e.Ce.count,a=this.ot(t);if(a){const c=a.target;if(np(c))if(o===0){const p=new je(c.path);this.et(t,p,Cn.newNoDocument(p,Ye.min()))}else yt(o===1,20013,{expectedCount:o});else{const p=this._t(t);if(p!==o){const y=this.ut(e),w=y?this.ct(y,e,p):1;if(w!==0){this.it(t);const T=w===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,T)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:o="",padding:a=0},hashCount:c=0}=t;let p,y;try{p=Lo(o).toUint8Array()}catch(w){if(w instanceof g0)return ba("Decoding the base64 bloom filter in existence filter failed ("+w.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw w}try{y=new Bp(p,a,c)}catch(w){return ba(w instanceof Tu?"BloomFilter error: ":"Applying bloom filter failed: ",w),null}return y.ge===0?null:y}ct(e,t,o){return t.Ce.count===o-this.Pt(e,t.targetId)?0:2}Pt(e,t){const o=this.Ge.getRemoteKeysForTarget(t);let a=0;return o.forEach((c=>{const p=this.Ge.ht(),y=`projects/${p.projectId}/databases/${p.database}/documents/${c.path.canonicalString()}`;e.mightContain(y)||(this.et(t,c,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((c,p)=>{const y=this.ot(p);if(y){if(c.current&&np(y.target)){const w=new je(y.target.path);this.It(w).has(p)||this.Et(p,w)||this.et(p,w,Cn.newNoDocument(w,e))}c.Be&&(t.set(p,c.ke()),c.Ke())}}));let o=ot();this.Je.forEach(((c,p)=>{let y=!0;p.forEachWhile((w=>{const T=this.ot(w);return!T||T.purpose==="TargetPurposeLimboResolution"||(y=!1,!1)})),y&&(o=o.add(c))})),this.je.forEach(((c,p)=>p.setReadTime(e)));const a=new nd(e,t,this.Ze,this.je,o);return this.je=Rs(),this.He=sh(),this.Je=sh(),this.Ze=new Mt(st),a}Ye(e,t){if(!this.rt(e))return;const o=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,o),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,o){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.qe(t,1):a.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),o&&(this.je=this.je.insert(t,o))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new yy,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new en(st),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new en(st),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Pe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new yy),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function sh(){return new Mt(je.comparator)}function vy(){return new Mt(je.comparator)}const CP={asc:"ASCENDING",desc:"DESCENDING"},AP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},NP={and:"AND",or:"OR"};class RP{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function sp(r,e){return r.useProto3Json||Zh(e)?e:{value:e}}function Dh(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function q0(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function LP(r,e){return Dh(r,e.toTimestamp())}function Bi(r){return yt(!!r,49232),Ye.fromTimestamp((function(t){const o=Ro(t);return new Pt(o.seconds,o.nanos)})(r))}function Hp(r,e){return op(r,e).canonicalString()}function op(r,e){const t=(function(a){return new Tt(["projects",a.projectId,"databases",a.database])})(r).child("documents");return e===void 0?t:t.child(e)}function G0(r){const e=Tt.fromString(r);return yt(J0(e),10190,{key:e.toString()}),e}function ap(r,e){return Hp(r.databaseId,e.path)}function Lf(r,e){const t=G0(e);if(t.get(1)!==r.databaseId.projectId)throw new ve(se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new ve(se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new je(Z0(t))}function K0(r,e){return Hp(r.databaseId,e)}function DP(r){const e=G0(r);return e.length===4?Tt.emptyPath():Z0(e)}function lp(r){return new Tt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Z0(r){return yt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function xy(r,e,t){return{name:ap(r,e),fields:t.value.mapValue.fields}}function MP(r,e){let t;if("targetChange"in e){e.targetChange;const o=(function(T){return T==="NO_CHANGE"?0:T==="ADD"?1:T==="REMOVE"?2:T==="CURRENT"?3:T==="RESET"?4:$e(39313,{state:T})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],c=(function(T,b){return T.useProto3Json?(yt(b===void 0||typeof b=="string",58123),mn.fromBase64String(b||"")):(yt(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),mn.fromUint8Array(b||new Uint8Array))})(r,e.targetChange.resumeToken),p=e.targetChange.cause,y=p&&(function(T){const b=T.code===void 0?se.UNKNOWN:H0(T.code);return new ve(b,T.message||"")})(p);t=new $0(o,a,c,y||null)}else if("documentChange"in e){e.documentChange;const o=e.documentChange;o.document,o.document.name,o.document.updateTime;const a=Lf(r,o.document.name),c=Bi(o.document.updateTime),p=o.document.createTime?Bi(o.document.createTime):Ye.min(),y=new sr({mapValue:{fields:o.document.fields}}),w=Cn.newFoundDocument(a,c,p,y),T=o.targetIds||[],b=o.removedTargetIds||[];t=new gh(T,b,w.key,w)}else if("documentDelete"in e){e.documentDelete;const o=e.documentDelete;o.document;const a=Lf(r,o.document),c=o.readTime?Bi(o.readTime):Ye.min(),p=Cn.newNoDocument(a,c),y=o.removedTargetIds||[];t=new gh([],y,p.key,p)}else if("documentRemove"in e){e.documentRemove;const o=e.documentRemove;o.document;const a=Lf(r,o.document),c=o.removedTargetIds||[];t=new gh([],c,a,null)}else{if(!("filter"in e))return $e(11601,{Vt:e});{e.filter;const o=e.filter;o.targetId;const{count:a=0,unchangedNames:c}=o,p=new IP(a,c),y=o.targetId;t=new W0(y,p)}}return t}function OP(r,e){let t;if(e instanceof Qu)t={update:xy(r,e.key,e.value)};else if(e instanceof td)t={delete:ap(r,e.key)};else if(e instanceof zo)t={update:xy(r,e.key,e.data),updateMask:$P(e.fieldMask)};else{if(!(e instanceof wP))return $e(16599,{dt:e.type});t={verify:ap(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((o=>(function(c,p){const y=p.transform;if(y instanceof Rh)return{fieldPath:p.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(y instanceof zu)return{fieldPath:p.field.canonicalString(),appendMissingElements:{values:y.elements}};if(y instanceof Uu)return{fieldPath:p.field.canonicalString(),removeAllFromArray:{values:y.elements}};if(y instanceof Lh)return{fieldPath:p.field.canonicalString(),increment:y.Ae};throw $e(20930,{transform:p.transform})})(0,o)))),e.precondition.isNone||(t.currentDocument=(function(a,c){return c.updateTime!==void 0?{updateTime:LP(a,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:$e(27497)})(r,e.precondition)),t}function jP(r,e){return r&&r.length>0?(yt(e!==void 0,14353),r.map((t=>(function(a,c){let p=a.updateTime?Bi(a.updateTime):Bi(c);return p.isEqual(Ye.min())&&(p=Bi(c)),new yP(p,a.transformResults||[])})(t,e)))):[]}function VP(r,e){return{documents:[K0(r,e.path)]}}function FP(r,e){const t={structuredQuery:{}},o=e.path;let a;e.collectionGroup!==null?(a=o,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=o.popLast(),t.structuredQuery.from=[{collectionId:o.lastSegment()}]),t.parent=K0(r,a);const c=(function(T){if(T.length!==0)return Y0(hi.create(T,"and"))})(e.filters);c&&(t.structuredQuery.where=c);const p=(function(T){if(T.length!==0)return T.map((b=>(function(N){return{field:yl(N.field),direction:BP(N.dir)}})(b)))})(e.orderBy);p&&(t.structuredQuery.orderBy=p);const y=sp(r,e.limit);return y!==null&&(t.structuredQuery.limit=y),e.startAt&&(t.structuredQuery.startAt=(function(T){return{before:T.inclusive,values:T.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(T){return{before:!T.inclusive,values:T.position}})(e.endAt)),{ft:t,parent:a}}function zP(r){let e=DP(r.parent);const t=r.structuredQuery,o=t.from?t.from.length:0;let a=null;if(o>0){yt(o===1,65062);const b=t.from[0];b.allDescendants?a=b.collectionId:e=e.child(b.collectionId)}let c=[];t.where&&(c=(function(k){const N=Q0(k);return N instanceof hi&&P0(N)?N.getFilters():[N]})(t.where));let p=[];t.orderBy&&(p=(function(k){return k.map((N=>(function(U){return new Fu(vl(U.field),(function(te){switch(te){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(U.direction))})(N)))})(t.orderBy));let y=null;t.limit&&(y=(function(k){let N;return N=typeof k=="object"?k.value:k,Zh(N)?null:N})(t.limit));let w=null;t.startAt&&(w=(function(k){const N=!!k.before,V=k.values||[];return new Nh(V,N)})(t.startAt));let T=null;return t.endAt&&(T=(function(k){const N=!k.before,V=k.values||[];return new Nh(V,N)})(t.endAt)),rP(e,a,p,c,y,"F",w,T)}function UP(r,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return $e(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Q0(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const o=vl(t.unaryFilter.field);return Gt.create(o,"==",{doubleValue:NaN});case"IS_NULL":const a=vl(t.unaryFilter.field);return Gt.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=vl(t.unaryFilter.field);return Gt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const p=vl(t.unaryFilter.field);return Gt.create(p,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return $e(61313);default:return $e(60726)}})(r):r.fieldFilter!==void 0?(function(t){return Gt.create(vl(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return $e(58110);default:return $e(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return hi.create(t.compositeFilter.filters.map((o=>Q0(o))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return $e(1026)}})(t.compositeFilter.op))})(r):$e(30097,{filter:r})}function BP(r){return CP[r]}function HP(r){return AP[r]}function WP(r){return NP[r]}function yl(r){return{fieldPath:r.canonicalString()}}function vl(r){return pn.fromServerFormat(r.fieldPath)}function Y0(r){return r instanceof Gt?(function(t){if(t.op==="=="){if(ay(t.value))return{unaryFilter:{field:yl(t.field),op:"IS_NAN"}};if(oy(t.value))return{unaryFilter:{field:yl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(ay(t.value))return{unaryFilter:{field:yl(t.field),op:"IS_NOT_NAN"}};if(oy(t.value))return{unaryFilter:{field:yl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yl(t.field),op:HP(t.op),value:t.value}}})(r):r instanceof hi?(function(t){const o=t.getFilters().map((a=>Y0(a)));return o.length===1?o[0]:{compositeFilter:{op:WP(t.op),filters:o}}})(r):$e(54877,{filter:r})}function $P(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function J0(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}function X0(r){return!!r&&typeof r._toProto=="function"&&r._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e,t,o,a,c=Ye.min(),p=Ye.min(),y=mn.EMPTY_BYTE_STRING,w=null){this.target=e,this.targetId=t,this.purpose=o,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=p,this.resumeToken=y,this.expectedCount=w}withSequenceNumber(e){return new So(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new So(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new So(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new So(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(e){this.yt=e}}function GP(r){const e=zP({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?ip(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(){this.Sn=new ZP}addToCollectionParentIndex(e,t){return this.Sn.add(t),ae.resolve()}getCollectionParents(e,t){return ae.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return ae.resolve()}deleteFieldIndex(e,t){return ae.resolve()}deleteAllFieldIndexes(e){return ae.resolve()}createTargetIndexes(e,t){return ae.resolve()}getDocumentsMatchingTarget(e,t){return ae.resolve(null)}getIndexType(e,t){return ae.resolve(0)}getFieldIndexes(e,t){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,t){return ae.resolve(No.min())}getMinOffsetFromCollectionGroup(e,t){return ae.resolve(No.min())}updateCollectionGroup(e,t,o){return ae.resolve()}updateIndexEntries(e,t){return ae.resolve()}}class ZP{constructor(){this.index={}}add(e){const t=e.lastSegment(),o=e.popLast(),a=this.index[t]||new en(Tt.comparator),c=!a.has(o);return this.index[t]=a.add(o),c}has(e){const t=e.lastSegment(),o=e.popLast(),a=this.index[t];return a&&a.has(o)}getEntries(e){return(this.index[e]||new en(Tt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ex=41943040;class ir{static withCacheSize(e){return new ir(e,ir.DEFAULT_COLLECTION_PERCENTILE,ir.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ir.DEFAULT_COLLECTION_PERCENTILE=10,ir.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ir.DEFAULT=new ir(ex,ir.DEFAULT_COLLECTION_PERCENTILE,ir.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ir.DISABLED=new ir(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Rl(0)}static ar(){return new Rl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ey="LruGarbageCollector",QP=1048576;function Ty([r,e],[t,o]){const a=st(r,t);return a===0?st(e,o):a}class YP{constructor(e){this.Pr=e,this.buffer=new en(Ty),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const o=this.buffer.last();Ty(t,o)<0&&(this.buffer=this.buffer.delete(o).add(t))}}get maxValue(){return this.buffer.last()[0]}}class JP{constructor(e,t,o){this.garbageCollector=e,this.asyncQueue=t,this.localStore=o,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Pe(Ey,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Fl(t)?Pe(Ey,"Ignoring IndexedDB error during garbage collection: ",t):await Vl(t)}await this.Ar(3e5)}))}}class XP{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((o=>Math.floor(t/100*o)))}nthSequenceNumber(e,t){if(t===0)return ae.resolve(Kh.ce);const o=new YP(t);return this.Vr.forEachTarget(e,(a=>o.Er(a.sequenceNumber))).next((()=>this.Vr.mr(e,(a=>o.Er(a))))).next((()=>o.maxValue))}removeTargets(e,t,o){return this.Vr.removeTargets(e,t,o)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Pe("LruGarbageCollector","Garbage collection skipped; disabled"),ae.resolve(wy)):this.getCacheSize(e).next((o=>o<this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),wy):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let o,a,c,p,y,w,T;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((k=>(k>this.params.maximumSequenceNumbersToCollect?(Pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${k}`),a=this.params.maximumSequenceNumbersToCollect):a=k,p=Date.now(),this.nthSequenceNumber(e,a)))).next((k=>(o=k,y=Date.now(),this.removeTargets(e,o,t)))).next((k=>(c=k,w=Date.now(),this.removeOrphanedDocuments(e,o)))).next((k=>(T=Date.now(),gl()<=it.DEBUG&&Pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${p-b}ms
	Determined least recently used ${a} in `+(y-p)+`ms
	Removed ${c} targets in `+(w-y)+`ms
	Removed ${k} documents in `+(T-w)+`ms
Total Duration: ${T-b}ms`),ae.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:k}))))}}function eb(r,e){return new XP(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(){this.changes=new Ra((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Cn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const o=this.changes.get(t);return o!==void 0?ae.resolve(o):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{constructor(e,t,o,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=o,this.indexManager=a}getDocument(e,t){let o=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(o=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(o!==null&&Nu(o.mutation,a,yr.empty(),Pt.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((o=>this.getLocalViewOfDocuments(e,o,ot()).next((()=>o))))}getLocalViewOfDocuments(e,t,o=ot()){const a=_a();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,o).next((c=>{let p=Eu();return c.forEach(((y,w)=>{p=p.insert(y,w.overlayedDocument)})),p}))))}getOverlayedDocuments(e,t){const o=_a();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,ot())))}populateOverlays(e,t,o){const a=[];return o.forEach((c=>{t.has(c)||a.push(c)})),this.documentOverlayCache.getOverlays(e,a).next((c=>{c.forEach(((p,y)=>{t.set(p,y)}))}))}computeViews(e,t,o,a){let c=Rs();const p=Au(),y=(function(){return Au()})();return t.forEach(((w,T)=>{const b=o.get(T.key);a.has(T.key)&&(b===void 0||b.mutation instanceof zo)?c=c.insert(T.key,T):b!==void 0?(p.set(T.key,b.mutation.getFieldMask()),Nu(b.mutation,T,b.mutation.getFieldMask(),Pt.now())):p.set(T.key,yr.empty())})),this.recalculateAndSaveOverlays(e,c).next((w=>(w.forEach(((T,b)=>p.set(T,b))),t.forEach(((T,b)=>y.set(T,new nb(b,p.get(T)??null)))),y)))}recalculateAndSaveOverlays(e,t){const o=Au();let a=new Mt(((p,y)=>p-y)),c=ot();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((p=>{for(const y of p)y.keys().forEach((w=>{const T=t.get(w);if(T===null)return;let b=o.get(w)||yr.empty();b=y.applyToLocalView(T,b),o.set(w,b);const k=(a.get(y.batchId)||ot()).add(w);a=a.insert(y.batchId,k)}))})).next((()=>{const p=[],y=a.getReverseIterator();for(;y.hasNext();){const w=y.getNext(),T=w.key,b=w.value,k=M0();b.forEach((N=>{if(!c.has(N)){const V=U0(t.get(N),o.get(N));V!==null&&k.set(N,V),c=c.add(N)}})),p.push(this.documentOverlayCache.saveOverlays(e,T,k))}return ae.waitFor(p)})).next((()=>o))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((o=>this.recalculateAndSaveOverlays(e,o)))}getDocumentsMatchingQuery(e,t,o,a){return iP(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):A0(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,o,a):this.getDocumentsMatchingCollectionQuery(e,t,o,a)}getNextDocuments(e,t,o,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,o,a).next((c=>{const p=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,o.largestBatchId,a-c.size):ae.resolve(_a());let y=Mu,w=c;return p.next((T=>ae.forEach(T,((b,k)=>(y<k.largestBatchId&&(y=k.largestBatchId),c.get(b)?ae.resolve():this.remoteDocumentCache.getEntry(e,b).next((N=>{w=w.insert(b,N)}))))).next((()=>this.populateOverlays(e,T,c))).next((()=>this.computeViews(e,w,T,ot()))).next((b=>({batchId:y,changes:D0(b)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new je(t)).next((o=>{let a=Eu();return o.isFoundDocument()&&(a=a.insert(o.key,o)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,o,a){const c=t.collectionGroup;let p=Eu();return this.indexManager.getCollectionParents(e,c).next((y=>ae.forEach(y,(w=>{const T=(function(k,N){return new zl(N,null,k.explicitOrderBy.slice(),k.filters.slice(),k.limit,k.limitType,k.startAt,k.endAt)})(t,w.child(c));return this.getDocumentsMatchingCollectionQuery(e,T,o,a).next((b=>{b.forEach(((k,N)=>{p=p.insert(k,N)}))}))})).next((()=>p))))}getDocumentsMatchingCollectionQuery(e,t,o,a){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,o.largestBatchId).next((p=>(c=p,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,o,c,a)))).next((p=>{c.forEach(((w,T)=>{const b=T.getKey();p.get(b)===null&&(p=p.insert(b,Cn.newInvalidDocument(b)))}));let y=Eu();return p.forEach(((w,T)=>{const b=c.get(w);b!==void 0&&Nu(b.mutation,T,yr.empty(),Pt.now()),Jh(t,T)&&(y=y.insert(w,T))})),y}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return ae.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:Bi(a.createTime)}})(t)),ae.resolve()}getNamedQuery(e,t){return ae.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(a){return{name:a.name,query:GP(a.bundledQuery),readTime:Bi(a.readTime)}})(t)),ae.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(){this.overlays=new Mt(je.comparator),this.Lr=new Map}getOverlay(e,t){return ae.resolve(this.overlays.get(t))}getOverlays(e,t){const o=_a();return ae.forEach(t,(a=>this.getOverlay(e,a).next((c=>{c!==null&&o.set(a,c)})))).next((()=>o))}saveOverlays(e,t,o){return o.forEach(((a,c)=>{this.bt(e,t,c)})),ae.resolve()}removeOverlaysForBatchId(e,t,o){const a=this.Lr.get(o);return a!==void 0&&(a.forEach((c=>this.overlays=this.overlays.remove(c))),this.Lr.delete(o)),ae.resolve()}getOverlaysForCollection(e,t,o){const a=_a(),c=t.length+1,p=new je(t.child("")),y=this.overlays.getIteratorFrom(p);for(;y.hasNext();){const w=y.getNext().value,T=w.getKey();if(!t.isPrefixOf(T.path))break;T.path.length===c&&w.largestBatchId>o&&a.set(w.getKey(),w)}return ae.resolve(a)}getOverlaysForCollectionGroup(e,t,o,a){let c=new Mt(((T,b)=>T-b));const p=this.overlays.getIterator();for(;p.hasNext();){const T=p.getNext().value;if(T.getKey().getCollectionGroup()===t&&T.largestBatchId>o){let b=c.get(T.largestBatchId);b===null&&(b=_a(),c=c.insert(T.largestBatchId,b)),b.set(T.getKey(),T)}}const y=_a(),w=c.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach(((T,b)=>y.set(T,b))),!(y.size()>=a)););return ae.resolve(y)}bt(e,t,o){const a=this.overlays.get(o.key);if(a!==null){const p=this.Lr.get(a.largestBatchId).delete(o.key);this.Lr.set(a.largestBatchId,p)}this.overlays=this.overlays.insert(o.key,new TP(t,o));let c=this.Lr.get(t);c===void 0&&(c=ot(),this.Lr.set(t,c)),this.Lr.set(t,c.add(o.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(){this.sessionToken=mn.EMPTY_BYTE_STRING}getSessionToken(e){return ae.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ae.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(){this.kr=new en(an.Kr),this.qr=new en(an.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const o=new an(e,t);this.kr=this.kr.add(o),this.qr=this.qr.add(o)}$r(e,t){e.forEach((o=>this.addReference(o,t)))}removeReference(e,t){this.Wr(new an(e,t))}Qr(e,t){e.forEach((o=>this.removeReference(o,t)))}Gr(e){const t=new je(new Tt([])),o=new an(t,e),a=new an(t,e+1),c=[];return this.qr.forEachInRange([o,a],(p=>{this.Wr(p),c.push(p.key)})),c}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new je(new Tt([])),o=new an(t,e),a=new an(t,e+1);let c=ot();return this.qr.forEachInRange([o,a],(p=>{c=c.add(p.key)})),c}containsKey(e){const t=new an(e,0),o=this.kr.firstAfterOrEqual(t);return o!==null&&e.isEqual(o.key)}}class an{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return je.comparator(e.key,t.key)||st(e.Hr,t.Hr)}static Ur(e,t){return st(e.Hr,t.Hr)||je.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new en(an.Kr)}checkEmpty(e){return ae.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,o,a){const c=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const p=new EP(c,t,o,a);this.mutationQueue.push(p);for(const y of a)this.Jr=this.Jr.add(new an(y.key,c)),this.indexManager.addToCollectionParentIndex(e,y.key.path.popLast());return ae.resolve(p)}lookupMutationBatch(e,t){return ae.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const o=t+1,a=this.Xr(o),c=a<0?0:a;return ae.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(this.mutationQueue.length===0?Dp:this.Yn-1)}getAllMutationBatches(e){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const o=new an(t,0),a=new an(t,Number.POSITIVE_INFINITY),c=[];return this.Jr.forEachInRange([o,a],(p=>{const y=this.Zr(p.Hr);c.push(y)})),ae.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new en(st);return t.forEach((a=>{const c=new an(a,0),p=new an(a,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([c,p],(y=>{o=o.add(y.Hr)}))})),ae.resolve(this.Yr(o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,a=o.length+1;let c=o;je.isDocumentKey(c)||(c=c.child(""));const p=new an(new je(c),0);let y=new en(st);return this.Jr.forEachWhile((w=>{const T=w.key.path;return!!o.isPrefixOf(T)&&(T.length===a&&(y=y.add(w.Hr)),!0)}),p),ae.resolve(this.Yr(y))}Yr(e){const t=[];return e.forEach((o=>{const a=this.Zr(o);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){yt(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let o=this.Jr;return ae.forEach(t.mutations,(a=>{const c=new an(a.key,t.batchId);return o=o.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Jr=o}))}nr(e){}containsKey(e,t){const o=new an(t,0),a=this.Jr.firstAfterOrEqual(o);return ae.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,ae.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(e){this.ti=e,this.docs=(function(){return new Mt(je.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const o=t.key,a=this.docs.get(o),c=a?a.size:0,p=this.ti(t);return this.docs=this.docs.insert(o,{document:t.mutableCopy(),size:p}),this.size+=p-c,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const o=this.docs.get(t);return ae.resolve(o?o.document.mutableCopy():Cn.newInvalidDocument(t))}getEntries(e,t){let o=Rs();return t.forEach((a=>{const c=this.docs.get(a);o=o.insert(a,c?c.document.mutableCopy():Cn.newInvalidDocument(a))})),ae.resolve(o)}getDocumentsMatchingQuery(e,t,o,a){let c=Rs();const p=t.path,y=new je(p.child("__id-9223372036854775808__")),w=this.docs.getIteratorFrom(y);for(;w.hasNext();){const{key:T,value:{document:b}}=w.getNext();if(!p.isPrefixOf(T.path))break;T.path.length>p.length+1||DS(LS(b),o)<=0||(a.has(b.key)||Jh(t,b))&&(c=c.insert(b.key,b.mutableCopy()))}return ae.resolve(c)}getAllFromCollectionGroup(e,t,o,a){$e(9500)}ni(e,t){return ae.forEach(this.docs,(o=>t(o)))}newChangeBuffer(e){return new ub(this)}getSize(e){return ae.resolve(this.size)}}class ub extends tb{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((o,a)=>{a.isValidDocument()?t.push(this.Mr.addEntry(e,a)):this.Mr.removeEntry(o)})),ae.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(e){this.persistence=e,this.ri=new Ra((t=>jp(t)),Vp),this.lastRemoteSnapshotVersion=Ye.min(),this.highestTargetId=0,this.ii=0,this.si=new Wp,this.targetCount=0,this.oi=Rl._r()}forEachTarget(e,t){return this.ri.forEach(((o,a)=>t(a))),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,t,o){return o&&(this.lastRemoteSnapshotVersion=o),t>this.ii&&(this.ii=t),ae.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Rl(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,ae.resolve()}updateTargetData(e,t){return this.lr(t),ae.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,t,o){let a=0;const c=[];return this.ri.forEach(((p,y)=>{y.sequenceNumber<=t&&o.get(y.targetId)===null&&(this.ri.delete(p),c.push(this.removeMatchingKeysForTargetId(e,y.targetId)),a++)})),ae.waitFor(c).next((()=>a))}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,t){const o=this.ri.get(t)||null;return ae.resolve(o)}addMatchingKeys(e,t,o){return this.si.$r(t,o),ae.resolve()}removeMatchingKeys(e,t,o){this.si.Qr(t,o);const a=this.persistence.referenceDelegate,c=[];return a&&t.forEach((p=>{c.push(a.markPotentiallyOrphaned(e,p))})),ae.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),ae.resolve()}getMatchingKeysForTargetId(e,t){const o=this.si.jr(t);return ae.resolve(o)}containsKey(e,t){return ae.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(e,t){this._i={},this.overlays={},this.ai=new Kh(0),this.ui=!1,this.ui=!0,this.ci=new ob,this.referenceDelegate=e(this),this.li=new cb(this),this.indexManager=new KP,this.remoteDocumentCache=(function(a){return new lb(a)})((o=>this.referenceDelegate.hi(o))),this.serializer=new qP(t),this.Pi=new ib(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new sb,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let o=this._i[e.toKey()];return o||(o=new ab(t,this.referenceDelegate),this._i[e.toKey()]=o),o}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,o){Pe("MemoryPersistence","Starting transaction:",e);const a=new hb(this.ai.next());return this.referenceDelegate.Ti(),o(a).next((c=>this.referenceDelegate.Ii(a).next((()=>c)))).toPromise().then((c=>(a.raiseOnCommittedEvent(),c)))}Ei(e,t){return ae.or(Object.values(this._i).map((o=>()=>o.containsKey(e,t))))}}class hb extends OS{constructor(e){super(),this.currentSequenceNumber=e}}class $p{constructor(e){this.persistence=e,this.Ri=new Wp,this.Ai=null}static Vi(e){return new $p(e)}get di(){if(this.Ai)return this.Ai;throw $e(60996)}addReference(e,t,o){return this.Ri.addReference(o,t),this.di.delete(o.toString()),ae.resolve()}removeReference(e,t,o){return this.Ri.removeReference(o,t),this.di.add(o.toString()),ae.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),ae.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((a=>this.di.add(a.toString())));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((c=>this.di.add(c.toString())))})).next((()=>o.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.di,(o=>{const a=je.fromPath(o);return this.mi(e,a).next((c=>{c||t.removeEntry(a,Ye.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((o=>{o?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return ae.or([()=>ae.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Mh{constructor(e,t){this.persistence=e,this.fi=new Ra((o=>FS(o.path)),((o,a)=>o.isEqual(a))),this.garbageCollector=eb(this,t)}static Vi(e,t){return new Mh(e,t)}Ti(){}Ii(e){return ae.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((o=>t.next((a=>o+a))))}pr(e){let t=0;return this.mr(e,(o=>{t++})).next((()=>t))}mr(e,t){return ae.forEach(this.fi,((o,a)=>this.wr(e,o,a).next((c=>c?ae.resolve():t(a)))))}removeTargets(e,t,o){return this.persistence.getTargetCache().removeTargets(e,t,o)}removeOrphanedDocuments(e,t){let o=0;const a=this.persistence.getRemoteDocumentCache(),c=a.newChangeBuffer();return a.ni(e,(p=>this.wr(e,p,t).next((y=>{y||(o++,c.removeEntry(p,Ye.min()))})))).next((()=>c.apply(e))).next((()=>o))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),ae.resolve()}removeTarget(e,t){const o=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,o)}addReference(e,t,o){return this.fi.set(o,e.currentSequenceNumber),ae.resolve()}removeReference(e,t,o){return this.fi.set(o,e.currentSequenceNumber),ae.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),ae.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=fh(e.data.value)),t}wr(e,t,o){return ae.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.fi.get(t);return ae.resolve(a!==void 0&&a>o)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(e,t,o,a){this.targetId=e,this.fromCache=t,this.Ts=o,this.Is=a}static Es(e,t){let o=ot(),a=ot();for(const c of t.docChanges)switch(c.type){case 0:o=o.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new qp(e,t.fromCache,o,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class db{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return h1()?8:jS(An())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,o,a){const c={result:null};return this.gs(e,t).next((p=>{c.result=p})).next((()=>{if(!c.result)return this.ps(e,t,a,o).next((p=>{c.result=p}))})).next((()=>{if(c.result)return;const p=new db;return this.ys(e,t,p).next((y=>{if(c.result=y,this.As)return this.ws(e,t,p,y.size)}))})).next((()=>c.result))}ws(e,t,o,a){return o.documentReadCount<this.Vs?(gl()<=it.DEBUG&&Pe("QueryEngine","SDK will not create cache indexes for query:",_l(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ae.resolve()):(gl()<=it.DEBUG&&Pe("QueryEngine","Query:",_l(t),"scans",o.documentReadCount,"local documents and returns",a,"documents as results."),o.documentReadCount>this.ds*a?(gl()<=it.DEBUG&&Pe("QueryEngine","The SDK decides to create cache indexes for query:",_l(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ui(t))):ae.resolve())}gs(e,t){if(hy(t))return ae.resolve(null);let o=Ui(t);return this.indexManager.getIndexType(e,o).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=ip(t,null,"F"),o=Ui(t)),this.indexManager.getDocumentsMatchingTarget(e,o).next((c=>{const p=ot(...c);return this.fs.getDocuments(e,p).next((y=>this.indexManager.getMinOffset(e,o).next((w=>{const T=this.bs(t,y);return this.Ss(t,T,p,w.readTime)?this.gs(e,ip(t,null,"F")):this.Ds(e,T,t,w)}))))})))))}ps(e,t,o,a){return hy(t)||a.isEqual(Ye.min())?ae.resolve(null):this.fs.getDocuments(e,o).next((c=>{const p=this.bs(t,c);return this.Ss(t,p,o,a)?ae.resolve(null):(gl()<=it.DEBUG&&Pe("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),_l(t)),this.Ds(e,p,t,RS(a,Mu)).next((y=>y)))}))}bs(e,t){let o=new en(R0(e));return t.forEach(((a,c)=>{Jh(e,c)&&(o=o.add(c))})),o}Ss(e,t,o,a){if(e.limit===null)return!1;if(o.size!==t.size)return!0;const c=e.limitType==="F"?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}ys(e,t,o){return gl()<=it.DEBUG&&Pe("QueryEngine","Using full collection scan to execute query:",_l(t)),this.fs.getDocumentsMatchingQuery(e,t,No.min(),o)}Ds(e,t,o,a){return this.fs.getDocumentsMatchingQuery(e,o,a).next((c=>(t.forEach((p=>{c=c.insert(p.key,p)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gp="LocalStore",pb=3e8;class mb{constructor(e,t,o,a){this.persistence=e,this.Cs=t,this.serializer=a,this.vs=new Mt(st),this.Fs=new Ra((c=>jp(c)),Vp),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(o)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new rb(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function gb(r,e,t,o){return new mb(r,e,t,o)}async function nx(r,e){const t=Je(r);return await t.persistence.runTransaction("Handle user change","readonly",(o=>{let a;return t.mutationQueue.getAllMutationBatches(o).next((c=>(a=c,t.Os(e),t.mutationQueue.getAllMutationBatches(o)))).next((c=>{const p=[],y=[];let w=ot();for(const T of a){p.push(T.batchId);for(const b of T.mutations)w=w.add(b.key)}for(const T of c){y.push(T.batchId);for(const b of T.mutations)w=w.add(b.key)}return t.localDocuments.getDocuments(o,w).next((T=>({Ns:T,removedBatchIds:p,addedBatchIds:y})))}))}))}function _b(r,e){const t=Je(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(o=>{const a=e.batch.keys(),c=t.xs.newChangeBuffer({trackRemovals:!0});return(function(y,w,T,b){const k=T.batch,N=k.keys();let V=ae.resolve();return N.forEach((U=>{V=V.next((()=>b.getEntry(w,U))).next((q=>{const te=T.docVersions.get(U);yt(te!==null,48541),q.version.compareTo(te)<0&&(k.applyToRemoteDocument(q,T),q.isValidDocument()&&(q.setReadTime(T.commitVersion),b.addEntry(q)))}))})),V.next((()=>y.mutationQueue.removeMutationBatch(w,k)))})(t,o,e,c).next((()=>c.apply(o))).next((()=>t.mutationQueue.performConsistencyCheck(o))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(o,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,(function(y){let w=ot();for(let T=0;T<y.mutationResults.length;++T)y.mutationResults[T].transformResults.length>0&&(w=w.add(y.batch.mutations[T].key));return w})(e)))).next((()=>t.localDocuments.getDocuments(o,a)))}))}function rx(r){const e=Je(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function yb(r,e){const t=Je(r),o=e.snapshotVersion;let a=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const p=t.xs.newChangeBuffer({trackRemovals:!0});a=t.vs;const y=[];e.targetChanges.forEach(((b,k)=>{const N=a.get(k);if(!N)return;y.push(t.li.removeMatchingKeys(c,b.removedDocuments,k).next((()=>t.li.addMatchingKeys(c,b.addedDocuments,k))));let V=N.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(k)!==null?V=V.withResumeToken(mn.EMPTY_BYTE_STRING,Ye.min()).withLastLimboFreeSnapshotVersion(Ye.min()):b.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(b.resumeToken,o)),a=a.insert(k,V),(function(q,te,ce){return q.resumeToken.approximateByteSize()===0||te.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=pb?!0:ce.addedDocuments.size+ce.modifiedDocuments.size+ce.removedDocuments.size>0})(N,V,b)&&y.push(t.li.updateTargetData(c,V))}));let w=Rs(),T=ot();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&y.push(t.persistence.referenceDelegate.updateLimboDocument(c,b))})),y.push(vb(c,p,e.documentUpdates).next((b=>{w=b.Bs,T=b.Ls}))),!o.isEqual(Ye.min())){const b=t.li.getLastRemoteSnapshotVersion(c).next((k=>t.li.setTargetsMetadata(c,c.currentSequenceNumber,o)));y.push(b)}return ae.waitFor(y).next((()=>p.apply(c))).next((()=>t.localDocuments.getLocalViewOfDocuments(c,w,T))).next((()=>w))})).then((c=>(t.vs=a,c)))}function vb(r,e,t){let o=ot(),a=ot();return t.forEach((c=>o=o.add(c))),e.getEntries(r,o).next((c=>{let p=Rs();return t.forEach(((y,w)=>{const T=c.get(y);w.isFoundDocument()!==T.isFoundDocument()&&(a=a.add(y)),w.isNoDocument()&&w.version.isEqual(Ye.min())?(e.removeEntry(y,w.readTime),p=p.insert(y,w)):!T.isValidDocument()||w.version.compareTo(T.version)>0||w.version.compareTo(T.version)===0&&T.hasPendingWrites?(e.addEntry(w),p=p.insert(y,w)):Pe(Gp,"Ignoring outdated watch update for ",y,". Current version:",T.version," Watch version:",w.version)})),{Bs:p,Ls:a}}))}function xb(r,e){const t=Je(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(o=>(e===void 0&&(e=Dp),t.mutationQueue.getNextMutationBatchAfterBatchId(o,e))))}function wb(r,e){const t=Je(r);return t.persistence.runTransaction("Allocate target","readwrite",(o=>{let a;return t.li.getTargetData(o,e).next((c=>c?(a=c,ae.resolve(a)):t.li.allocateTargetId(o).next((p=>(a=new So(e,p,"TargetPurposeListen",o.currentSequenceNumber),t.li.addTargetData(o,a).next((()=>a)))))))})).then((o=>{const a=t.vs.get(o.targetId);return(a===null||o.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.vs=t.vs.insert(o.targetId,o),t.Fs.set(e,o.targetId)),o}))}async function up(r,e,t){const o=Je(r),a=o.vs.get(e),c=t?"readwrite":"readwrite-primary";try{t||await o.persistence.runTransaction("Release target",c,(p=>o.persistence.referenceDelegate.removeTarget(p,a)))}catch(p){if(!Fl(p))throw p;Pe(Gp,`Failed to update sequence numbers for target ${e}: ${p}`)}o.vs=o.vs.remove(e),o.Fs.delete(a.target)}function Iy(r,e,t){const o=Je(r);let a=Ye.min(),c=ot();return o.persistence.runTransaction("Execute query","readwrite",(p=>(function(w,T,b){const k=Je(w),N=k.Fs.get(b);return N!==void 0?ae.resolve(k.vs.get(N)):k.li.getTargetData(T,b)})(o,p,Ui(e)).next((y=>{if(y)return a=y.lastLimboFreeSnapshotVersion,o.li.getMatchingKeysForTargetId(p,y.targetId).next((w=>{c=w}))})).next((()=>o.Cs.getDocumentsMatchingQuery(p,e,t?a:Ye.min(),t?c:ot()))).next((y=>(Eb(o,aP(e),y),{documents:y,ks:c})))))}function Eb(r,e,t){let o=r.Ms.get(e)||Ye.min();t.forEach(((a,c)=>{c.readTime.compareTo(o)>0&&(o=c.readTime)})),r.Ms.set(e,o)}class Sy{constructor(){this.activeTargetIds=fP()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Tb{constructor(){this.vo=new Sy,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,o){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,o){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Sy,Promise.resolve()}handleUserChange(e,t,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Py="ConnectivityMonitor";class by{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Pe(Py,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Pe(Py,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oh=null;function cp(){return oh===null?oh=(function(){return 268435456+Math.round(2147483648*Math.random())})():oh++,"0x"+oh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Df="RestConnection",Sb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class Pb{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${o}/databases/${a}`,this.$o=this.databaseId.database===Ch?`project_id=${o}`:`project_id=${o}&database_id=${a}`}Wo(e,t,o,a,c){const p=cp(),y=this.Qo(e,t.toUriEncodedString());Pe(Df,`Sending RPC '${e}' ${p}:`,y,o);const w={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(w,a,c);const{host:T}=new URL(y),b=Ml(T);return this.zo(e,y,w,o,b).then((k=>(Pe(Df,`Received RPC '${e}' ${p}: `,k),k)),(k=>{throw ba(Df,`RPC '${e}' ${p} failed with error: `,k,"url: ",y,"request:",o),k}))}jo(e,t,o,a,c,p){return this.Wo(e,t,o,a,c)}Go(e,t,o){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+jl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,c)=>e[c]=a)),o&&o.headers.forEach(((a,c)=>e[c]=a))}Qo(e,t){const o=Sb[e];let a=`${this.qo}/v1/${t}:${o}`;return this.databaseInfo.apiKey&&(a=`${a}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),a}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bn="WebChannelConnection",yu=(r,e,t)=>{r.listen(e,(o=>{try{t(o)}catch(a){setTimeout((()=>{throw a}),0)}}))};class Sl extends Pb{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Sl.c_){const e=l0();yu(e,a0.STAT_EVENT,(t=>{t.stat===Yf.PROXY?Pe(bn,"STAT_EVENT: detected buffering proxy"):t.stat===Yf.NOPROXY&&Pe(bn,"STAT_EVENT: detected no buffering proxy")})),Sl.c_=!0}}zo(e,t,o,a,c){const p=cp();return new Promise(((y,w)=>{const T=new s0;T.setWithCredentials(!0),T.listenOnce(o0.COMPLETE,(()=>{try{switch(T.getLastErrorCode()){case dh.NO_ERROR:const k=T.getResponseJson();Pe(bn,`XHR for RPC '${e}' ${p} received:`,JSON.stringify(k)),y(k);break;case dh.TIMEOUT:Pe(bn,`RPC '${e}' ${p} timed out`),w(new ve(se.DEADLINE_EXCEEDED,"Request time out"));break;case dh.HTTP_ERROR:const N=T.getStatus();if(Pe(bn,`RPC '${e}' ${p} failed with status:`,N,"response text:",T.getResponseText()),N>0){let V=T.getResponseJson();Array.isArray(V)&&(V=V[0]);const U=V==null?void 0:V.error;if(U&&U.status&&U.message){const q=(function(ce){const ge=ce.toLowerCase().replace(/_/g,"-");return Object.values(se).indexOf(ge)>=0?ge:se.UNKNOWN})(U.status);w(new ve(q,U.message))}else w(new ve(se.UNKNOWN,"Server responded with status "+T.getStatus()))}else w(new ve(se.UNAVAILABLE,"Connection failed."));break;default:$e(9055,{l_:e,streamId:p,h_:T.getLastErrorCode(),P_:T.getLastError()})}}finally{Pe(bn,`RPC '${e}' ${p} completed.`)}}));const b=JSON.stringify(a);Pe(bn,`RPC '${e}' ${p} sending request:`,a),T.send(t,"POST",b,o,15)}))}T_(e,t,o){const a=cp(),c=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],p=this.createWebChannelTransport(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},w=this.longPollingOptions.timeoutSeconds;w!==void 0&&(y.longPollingTimeout=Math.round(1e3*w)),this.useFetchStreams&&(y.useFetchStreams=!0),this.Go(y.initMessageHeaders,t,o),y.encodeInitMessageHeaders=!0;const T=c.join("");Pe(bn,`Creating RPC '${e}' stream ${a}: ${T}`,y);const b=p.createWebChannel(T,y);this.I_(b);let k=!1,N=!1;const V=new bb({Ho:U=>{N?Pe(bn,`Not sending because RPC '${e}' stream ${a} is closed:`,U):(k||(Pe(bn,`Opening RPC '${e}' stream ${a} transport.`),b.open(),k=!0),Pe(bn,`RPC '${e}' stream ${a} sending:`,U),b.send(U))},Jo:()=>b.close()});return yu(b,wu.EventType.OPEN,(()=>{N||(Pe(bn,`RPC '${e}' stream ${a} transport opened.`),V.i_())})),yu(b,wu.EventType.CLOSE,(()=>{N||(N=!0,Pe(bn,`RPC '${e}' stream ${a} transport closed`),V.o_(),this.E_(b))})),yu(b,wu.EventType.ERROR,(U=>{N||(N=!0,ba(bn,`RPC '${e}' stream ${a} transport errored. Name:`,U.name,"Message:",U.message),V.o_(new ve(se.UNAVAILABLE,"The operation could not be completed")))})),yu(b,wu.EventType.MESSAGE,(U=>{var q;if(!N){const te=U.data[0];yt(!!te,16349);const ce=te,ge=(ce==null?void 0:ce.error)||((q=ce[0])==null?void 0:q.error);if(ge){Pe(bn,`RPC '${e}' stream ${a} received error:`,ge);const Te=ge.status;let Oe=(function(F){const D=qt[F];if(D!==void 0)return H0(D)})(Te),be=ge.message;Te==="NOT_FOUND"&&be.includes("database")&&be.includes("does not exist")&&be.includes(this.databaseId.database)&&ba(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),Oe===void 0&&(Oe=se.INTERNAL,be="Unknown error status: "+Te+" with message "+ge.message),N=!0,V.o_(new ve(Oe,be)),b.close()}else Pe(bn,`RPC '${e}' stream ${a} received:`,te),V.__(te)}})),Sl.u_(),setTimeout((()=>{V.s_()}),0),V}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,o){super.Go(e,t,o),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return u0()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kb(r){return new Sl(r)}function Mf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rd(r){return new RP(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Sl.c_=!1;class ix{constructor(e,t,o=1e3,a=1.5,c=6e4){this.Ci=e,this.timerId=t,this.R_=o,this.A_=a,this.V_=c,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),o=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-o);a>0&&Pe("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${o} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ky="PersistentStream";class sx{constructor(e,t,o,a,c,p,y,w){this.Ci=e,this.b_=o,this.S_=a,this.connection=c,this.authCredentialsProvider=p,this.appCheckCredentialsProvider=y,this.listener=w,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new ix(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===se.RESOURCE_EXHAUSTED?(As(t.toString()),As("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===se.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([o,a])=>{this.D_===t&&this.G_(o,a)}),(o=>{e((()=>{const a=new ve(se.UNKNOWN,"Fetching auth token failed: "+o.message);return this.z_(a)}))}))}G_(e,t){const o=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{o((()=>this.listener.Zo()))})),this.stream.Yo((()=>{o((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((a=>{o((()=>this.z_(a)))})),this.stream.onMessage((a=>{o((()=>++this.F_==1?this.H_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Pe(ky,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(Pe(ky,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Cb extends sx{constructor(e,t,o,a,c,p){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,o,a,p),this.serializer=c}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=MP(this.serializer,e),o=(function(c){if(!("targetChange"in c))return Ye.min();const p=c.targetChange;return p.targetIds&&p.targetIds.length?Ye.min():p.readTime?Bi(p.readTime):Ye.min()})(e);return this.listener.J_(t,o)}Z_(e){const t={};t.database=lp(this.serializer),t.addTarget=(function(c,p){let y;const w=p.target;if(y=np(w)?{documents:VP(c,w)}:{query:FP(c,w).ft},y.targetId=p.targetId,p.resumeToken.approximateByteSize()>0){y.resumeToken=q0(c,p.resumeToken);const T=sp(c,p.expectedCount);T!==null&&(y.expectedCount=T)}else if(p.snapshotVersion.compareTo(Ye.min())>0){y.readTime=Dh(c,p.snapshotVersion.toTimestamp());const T=sp(c,p.expectedCount);T!==null&&(y.expectedCount=T)}return y})(this.serializer,e);const o=UP(this.serializer,e);o&&(t.labels=o),this.K_(t)}X_(e){const t={};t.database=lp(this.serializer),t.removeTarget=e,this.K_(t)}}class Ab extends sx{constructor(e,t,o,a,c,p){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,o,a,p),this.serializer=c}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return yt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,yt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){yt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=jP(e.writeResults,e.commitTime),o=Bi(e.commitTime);return this.listener.na(o,t)}ra(){const e={};e.database=lp(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((o=>OP(this.serializer,o)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{}class Rb extends Nb{constructor(e,t,o,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=o,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new ve(se.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,o,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,p])=>this.connection.Wo(e,op(t,o),a,c,p))).catch((c=>{throw c.name==="FirebaseError"?(c.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ve(se.UNKNOWN,c.toString())}))}jo(e,t,o,a,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([p,y])=>this.connection.jo(e,op(t,o),a,p,y,c))).catch((p=>{throw p.name==="FirebaseError"?(p.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),p):new ve(se.UNKNOWN,p.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function Lb(r,e,t,o){return new Rb(r,e,t,o)}class Db{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(As(t),this.aa=!1):Pe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ka="RemoteStore";class Mb{constructor(e,t,o,a,c){this.localStore=e,this.datastore=t,this.asyncQueue=o,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=c,this.Aa.Mo((p=>{o.enqueueAndForget((async()=>{La(this)&&(Pe(ka,"Restarting streams for network reachability change."),await(async function(w){const T=Je(w);T.Ea.add(4),await Ju(T),T.Va.set("Unknown"),T.Ea.delete(4),await id(T)})(this))}))})),this.Va=new Db(o,a)}}async function id(r){if(La(r))for(const e of r.Ra)await e(!0)}async function Ju(r){for(const e of r.Ra)await e(!1)}function ox(r,e){const t=Je(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Yp(t)?Qp(t):Ul(t).O_()&&Zp(t,e))}function Kp(r,e){const t=Je(r),o=Ul(t);t.Ia.delete(e),o.O_()&&ax(t,e),t.Ia.size===0&&(o.O_()?o.L_():La(t)&&t.Va.set("Unknown"))}function Zp(r,e){if(r.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ye.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ul(r).Z_(e)}function ax(r,e){r.da.$e(e),Ul(r).X_(e)}function Qp(r){r.da=new kP({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Ul(r).start(),r.Va.ua()}function Yp(r){return La(r)&&!Ul(r).x_()&&r.Ia.size>0}function La(r){return Je(r).Ea.size===0}function lx(r){r.da=void 0}async function Ob(r){r.Va.set("Online")}async function jb(r){r.Ia.forEach(((e,t)=>{Zp(r,e)}))}async function Vb(r,e){lx(r),Yp(r)?(r.Va.ha(e),Qp(r)):r.Va.set("Unknown")}async function Fb(r,e,t){if(r.Va.set("Online"),e instanceof $0&&e.state===2&&e.cause)try{await(async function(a,c){const p=c.cause;for(const y of c.targetIds)a.Ia.has(y)&&(await a.remoteSyncer.rejectListen(y,p),a.Ia.delete(y),a.da.removeTarget(y))})(r,e)}catch(o){Pe(ka,"Failed to remove targets %s: %s ",e.targetIds.join(","),o),await Oh(r,o)}else if(e instanceof gh?r.da.Xe(e):e instanceof W0?r.da.st(e):r.da.tt(e),!t.isEqual(Ye.min()))try{const o=await rx(r.localStore);t.compareTo(o)>=0&&await(function(c,p){const y=c.da.Tt(p);return y.targetChanges.forEach(((w,T)=>{if(w.resumeToken.approximateByteSize()>0){const b=c.Ia.get(T);b&&c.Ia.set(T,b.withResumeToken(w.resumeToken,p))}})),y.targetMismatches.forEach(((w,T)=>{const b=c.Ia.get(w);if(!b)return;c.Ia.set(w,b.withResumeToken(mn.EMPTY_BYTE_STRING,b.snapshotVersion)),ax(c,w);const k=new So(b.target,w,T,b.sequenceNumber);Zp(c,k)})),c.remoteSyncer.applyRemoteEvent(y)})(r,t)}catch(o){Pe(ka,"Failed to raise snapshot:",o),await Oh(r,o)}}async function Oh(r,e,t){if(!Fl(e))throw e;r.Ea.add(1),await Ju(r),r.Va.set("Offline"),t||(t=()=>rx(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{Pe(ka,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await id(r)}))}function ux(r,e){return e().catch((t=>Oh(r,t,e)))}async function sd(r){const e=Je(r),t=Mo(e);let o=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Dp;for(;zb(e);)try{const a=await xb(e.localStore,o);if(a===null){e.Ta.length===0&&t.L_();break}o=a.batchId,Ub(e,a)}catch(a){await Oh(e,a)}cx(e)&&hx(e)}function zb(r){return La(r)&&r.Ta.length<10}function Ub(r,e){r.Ta.push(e);const t=Mo(r);t.O_()&&t.Y_&&t.ea(e.mutations)}function cx(r){return La(r)&&!Mo(r).x_()&&r.Ta.length>0}function hx(r){Mo(r).start()}async function Bb(r){Mo(r).ra()}async function Hb(r){const e=Mo(r);for(const t of r.Ta)e.ea(t.mutations)}async function Wb(r,e,t){const o=r.Ta.shift(),a=Up.from(o,e,t);await ux(r,(()=>r.remoteSyncer.applySuccessfulWrite(a))),await sd(r)}async function $b(r,e){e&&Mo(r).Y_&&await(async function(o,a){if((function(p){return SP(p)&&p!==se.ABORTED})(a.code)){const c=o.Ta.shift();Mo(o).B_(),await ux(o,(()=>o.remoteSyncer.rejectFailedWrite(c.batchId,a))),await sd(o)}})(r,e),cx(r)&&hx(r)}async function Cy(r,e){const t=Je(r);t.asyncQueue.verifyOperationInProgress(),Pe(ka,"RemoteStore received new credentials");const o=La(t);t.Ea.add(3),await Ju(t),o&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await id(t)}async function qb(r,e){const t=Je(r);e?(t.Ea.delete(2),await id(t)):e||(t.Ea.add(2),await Ju(t),t.Va.set("Unknown"))}function Ul(r){return r.ma||(r.ma=(function(t,o,a){const c=Je(t);return c.sa(),new Cb(o,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(r.datastore,r.asyncQueue,{Zo:Ob.bind(null,r),Yo:jb.bind(null,r),t_:Vb.bind(null,r),J_:Fb.bind(null,r)}),r.Ra.push((async e=>{e?(r.ma.B_(),Yp(r)?Qp(r):r.Va.set("Unknown")):(await r.ma.stop(),lx(r))}))),r.ma}function Mo(r){return r.fa||(r.fa=(function(t,o,a){const c=Je(t);return c.sa(),new Ab(o,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),Yo:Bb.bind(null,r),t_:$b.bind(null,r),ta:Hb.bind(null,r),na:Wb.bind(null,r)}),r.Ra.push((async e=>{e?(r.fa.B_(),await sd(r)):(await r.fa.stop(),r.Ta.length>0&&(Pe(ka,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e,t,o,a,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=o,this.op=a,this.removalCallback=c,this.deferred=new bs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((p=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,o,a,c){const p=Date.now()+o,y=new Jp(e,t,p,a,c);return y.start(o),y}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ve(se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Xp(r,e){if(As("AsyncQueue",`${e}: ${r}`),Fl(r))return new ve(se.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{static emptySet(e){return new Pl(e.comparator)}constructor(e){this.comparator=e?(t,o)=>e(t,o)||je.comparator(t.key,o.key):(t,o)=>je.comparator(t.key,o.key),this.keyedMap=Eu(),this.sortedSet=new Mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,o)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Pl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=o.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const o=new Pl;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=t,o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{constructor(){this.ga=new Mt(je.comparator)}track(e){const t=e.doc.key,o=this.ga.get(t);o?e.type!==0&&o.type===3?this.ga=this.ga.insert(t,e):e.type===3&&o.type!==1?this.ga=this.ga.insert(t,{type:o.type,doc:e.doc}):e.type===2&&o.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&o.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&o.type===0?this.ga=this.ga.remove(t):e.type===1&&o.type===2?this.ga=this.ga.insert(t,{type:1,doc:o.doc}):e.type===0&&o.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):$e(63341,{Vt:e,pa:o}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,o)=>{e.push(o)})),e}}class Ll{constructor(e,t,o,a,c,p,y,w,T){this.query=e,this.docs=t,this.oldDocs=o,this.docChanges=a,this.mutatedKeys=c,this.fromCache=p,this.syncStateChanged=y,this.excludesMetadataChanges=w,this.hasCachedResults=T}static fromInitialDocuments(e,t,o,a,c){const p=[];return t.forEach((y=>{p.push({type:0,doc:y})})),new Ll(e,t,Pl.emptySet(t),p,o,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Yh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,o=e.docChanges;if(t.length!==o.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==o[a].type||!t[a].doc.isEqual(o[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class Kb{constructor(){this.queries=Ny(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,o){const a=Je(t),c=a.queries;a.queries=Ny(),c.forEach(((p,y)=>{for(const w of y.ba)w.onError(o)}))})(this,new ve(se.ABORTED,"Firestore shutting down"))}}function Ny(){return new Ra((r=>N0(r)),Yh)}async function dx(r,e){const t=Je(r);let o=3;const a=e.query;let c=t.queries.get(a);c?!c.Sa()&&e.Da()&&(o=2):(c=new Gb,o=e.Da()?0:1);try{switch(o){case 0:c.wa=await t.onListen(a,!0);break;case 1:c.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(p){const y=Xp(p,`Initialization of query '${_l(e.query)}' failed`);return void e.onError(y)}t.queries.set(a,c),c.ba.push(e),e.va(t.onlineState),c.wa&&e.Fa(c.wa)&&em(t)}async function fx(r,e){const t=Je(r),o=e.query;let a=3;const c=t.queries.get(o);if(c){const p=c.ba.indexOf(e);p>=0&&(c.ba.splice(p,1),c.ba.length===0?a=e.Da()?0:1:!c.Sa()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(o),t.onUnlisten(o,!0);case 1:return t.queries.delete(o),t.onUnlisten(o,!1);case 2:return t.onLastRemoteStoreUnlisten(o);default:return}}function Zb(r,e){const t=Je(r);let o=!1;for(const a of e){const c=a.query,p=t.queries.get(c);if(p){for(const y of p.ba)y.Fa(a)&&(o=!0);p.wa=a}}o&&em(t)}function Qb(r,e,t){const o=Je(r),a=o.queries.get(e);if(a)for(const c of a.ba)c.onError(t);o.queries.delete(e)}function em(r){r.Ca.forEach((e=>{e.next()}))}var hp,Ry;(Ry=hp||(hp={})).Ma="default",Ry.Cache="cache";class px{constructor(e,t,o){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=o||{}}Fa(e){if(!this.options.includeMetadataChanges){const o=[];for(const a of e.docChanges)a.type!==3&&o.push(a);e=new Ll(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const o=t!=="Offline";return(!this.options.Ka||!o)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Ll.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==hp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(e){this.key=e}}class gx{constructor(e){this.key=e}}class Yb{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ot(),this.mutatedKeys=ot(),this.eu=R0(e),this.tu=new Pl(this.eu)}get nu(){return this.Za}ru(e,t){const o=t?t.iu:new Ay,a=t?t.tu:this.tu;let c=t?t.mutatedKeys:this.mutatedKeys,p=a,y=!1;const w=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,T=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((b,k)=>{const N=a.get(b),V=Jh(this.query,k)?k:null,U=!!N&&this.mutatedKeys.has(N.key),q=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let te=!1;N&&V?N.data.isEqual(V.data)?U!==q&&(o.track({type:3,doc:V}),te=!0):this.su(N,V)||(o.track({type:2,doc:V}),te=!0,(w&&this.eu(V,w)>0||T&&this.eu(V,T)<0)&&(y=!0)):!N&&V?(o.track({type:0,doc:V}),te=!0):N&&!V&&(o.track({type:1,doc:N}),te=!0,(w||T)&&(y=!0)),te&&(V?(p=p.add(V),c=q?c.add(b):c.delete(b)):(p=p.delete(b),c=c.delete(b)))})),this.query.limit!==null)for(;p.size>this.query.limit;){const b=this.query.limitType==="F"?p.last():p.first();p=p.delete(b.key),c=c.delete(b.key),o.track({type:1,doc:b})}return{tu:p,iu:o,Ss:y,mutatedKeys:c}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,o,a){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const p=e.iu.ya();p.sort(((b,k)=>(function(V,U){const q=te=>{switch(te){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $e(20277,{Vt:te})}};return q(V)-q(U)})(b.type,k.type)||this.eu(b.doc,k.doc))),this.ou(o),a=a??!1;const y=t&&!a?this._u():[],w=this.Ya.size===0&&this.current&&!a?1:0,T=w!==this.Xa;return this.Xa=w,p.length!==0||T?{snapshot:new Ll(this.query,e.tu,c,p,e.mutatedKeys,w===0,T,!1,!!o&&o.resumeToken.approximateByteSize()>0),au:y}:{au:y}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ay,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=ot(),this.tu.forEach((o=>{this.uu(o.key)&&(this.Ya=this.Ya.add(o.key))}));const t=[];return e.forEach((o=>{this.Ya.has(o)||t.push(new gx(o))})),this.Ya.forEach((o=>{e.has(o)||t.push(new mx(o))})),t}cu(e){this.Za=e.ks,this.Ya=ot();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ll.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const tm="SyncEngine";class Jb{constructor(e,t,o){this.query=e,this.targetId=t,this.view=o}}class Xb{constructor(e){this.key=e,this.hu=!1}}class ek{constructor(e,t,o,a,c,p){this.localStore=e,this.remoteStore=t,this.eventManager=o,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=p,this.Pu={},this.Tu=new Ra((y=>N0(y)),Yh),this.Iu=new Map,this.Eu=new Set,this.Ru=new Mt(je.comparator),this.Au=new Map,this.Vu=new Wp,this.du={},this.mu=new Map,this.fu=Rl.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function tk(r,e,t=!0){const o=Ex(r);let a;const c=o.Tu.get(e);return c?(o.sharedClientState.addLocalQueryTarget(c.targetId),a=c.view.lu()):a=await _x(o,e,t,!0),a}async function nk(r,e){const t=Ex(r);await _x(t,e,!0,!1)}async function _x(r,e,t,o){const a=await wb(r.localStore,Ui(e)),c=a.targetId,p=r.sharedClientState.addLocalQueryTarget(c,t);let y;return o&&(y=await rk(r,e,c,p==="current",a.resumeToken)),r.isPrimaryClient&&t&&ox(r.remoteStore,a),y}async function rk(r,e,t,o,a){r.pu=(k,N,V)=>(async function(q,te,ce,ge){let Te=te.view.ru(ce);Te.Ss&&(Te=await Iy(q.localStore,te.query,!1).then((({documents:F})=>te.view.ru(F,Te))));const Oe=ge&&ge.targetChanges.get(te.targetId),be=ge&&ge.targetMismatches.get(te.targetId)!=null,fe=te.view.applyChanges(Te,q.isPrimaryClient,Oe,be);return Dy(q,te.targetId,fe.au),fe.snapshot})(r,k,N,V);const c=await Iy(r.localStore,e,!0),p=new Yb(e,c.ks),y=p.ru(c.documents),w=Yu.createSynthesizedTargetChangeForCurrentChange(t,o&&r.onlineState!=="Offline",a),T=p.applyChanges(y,r.isPrimaryClient,w);Dy(r,t,T.au);const b=new Jb(e,t,p);return r.Tu.set(e,b),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),T.snapshot}async function ik(r,e,t){const o=Je(r),a=o.Tu.get(e),c=o.Iu.get(a.targetId);if(c.length>1)return o.Iu.set(a.targetId,c.filter((p=>!Yh(p,e)))),void o.Tu.delete(e);o.isPrimaryClient?(o.sharedClientState.removeLocalQueryTarget(a.targetId),o.sharedClientState.isActiveQueryTarget(a.targetId)||await up(o.localStore,a.targetId,!1).then((()=>{o.sharedClientState.clearQueryState(a.targetId),t&&Kp(o.remoteStore,a.targetId),dp(o,a.targetId)})).catch(Vl)):(dp(o,a.targetId),await up(o.localStore,a.targetId,!0))}async function sk(r,e){const t=Je(r),o=t.Tu.get(e),a=t.Iu.get(o.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(o.targetId),Kp(t.remoteStore,o.targetId))}async function ok(r,e,t){const o=fk(r);try{const a=await(function(p,y){const w=Je(p),T=Pt.now(),b=y.reduce(((V,U)=>V.add(U.key)),ot());let k,N;return w.persistence.runTransaction("Locally write mutations","readwrite",(V=>{let U=Rs(),q=ot();return w.xs.getEntries(V,b).next((te=>{U=te,U.forEach(((ce,ge)=>{ge.isValidDocument()||(q=q.add(ce))}))})).next((()=>w.localDocuments.getOverlayedDocuments(V,U))).next((te=>{k=te;const ce=[];for(const ge of y){const Te=xP(ge,k.get(ge.key).overlayedDocument);Te!=null&&ce.push(new zo(ge.key,Te,T0(Te.value.mapValue),vr.exists(!0)))}return w.mutationQueue.addMutationBatch(V,T,ce,y)})).next((te=>{N=te;const ce=te.applyToLocalDocumentSet(k,q);return w.documentOverlayCache.saveOverlays(V,te.batchId,ce)}))})).then((()=>({batchId:N.batchId,changes:D0(k)})))})(o.localStore,e);o.sharedClientState.addPendingMutation(a.batchId),(function(p,y,w){let T=p.du[p.currentUser.toKey()];T||(T=new Mt(st)),T=T.insert(y,w),p.du[p.currentUser.toKey()]=T})(o,a.batchId,t),await Xu(o,a.changes),await sd(o.remoteStore)}catch(a){const c=Xp(a,"Failed to persist write");t.reject(c)}}async function yx(r,e){const t=Je(r);try{const o=await yb(t.localStore,e);e.targetChanges.forEach(((a,c)=>{const p=t.Au.get(c);p&&(yt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?p.hu=!0:a.modifiedDocuments.size>0?yt(p.hu,14607):a.removedDocuments.size>0&&(yt(p.hu,42227),p.hu=!1))})),await Xu(t,o,e)}catch(o){await Vl(o)}}function Ly(r,e,t){const o=Je(r);if(o.isPrimaryClient&&t===0||!o.isPrimaryClient&&t===1){const a=[];o.Tu.forEach(((c,p)=>{const y=p.view.va(e);y.snapshot&&a.push(y.snapshot)})),(function(p,y){const w=Je(p);w.onlineState=y;let T=!1;w.queries.forEach(((b,k)=>{for(const N of k.ba)N.va(y)&&(T=!0)})),T&&em(w)})(o.eventManager,e),a.length&&o.Pu.J_(a),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}async function ak(r,e,t){const o=Je(r);o.sharedClientState.updateQueryState(e,"rejected",t);const a=o.Au.get(e),c=a&&a.key;if(c){let p=new Mt(je.comparator);p=p.insert(c,Cn.newNoDocument(c,Ye.min()));const y=ot().add(c),w=new nd(Ye.min(),new Map,new Mt(st),p,y);await yx(o,w),o.Ru=o.Ru.remove(c),o.Au.delete(e),nm(o)}else await up(o.localStore,e,!1).then((()=>dp(o,e,t))).catch(Vl)}async function lk(r,e){const t=Je(r),o=e.batch.batchId;try{const a=await _b(t.localStore,e);xx(t,o,null),vx(t,o),t.sharedClientState.updateMutationState(o,"acknowledged"),await Xu(t,a)}catch(a){await Vl(a)}}async function uk(r,e,t){const o=Je(r);try{const a=await(function(p,y){const w=Je(p);return w.persistence.runTransaction("Reject batch","readwrite-primary",(T=>{let b;return w.mutationQueue.lookupMutationBatch(T,y).next((k=>(yt(k!==null,37113),b=k.keys(),w.mutationQueue.removeMutationBatch(T,k)))).next((()=>w.mutationQueue.performConsistencyCheck(T))).next((()=>w.documentOverlayCache.removeOverlaysForBatchId(T,b,y))).next((()=>w.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(T,b))).next((()=>w.localDocuments.getDocuments(T,b)))}))})(o.localStore,e);xx(o,e,t),vx(o,e),o.sharedClientState.updateMutationState(e,"rejected",t),await Xu(o,a)}catch(a){await Vl(a)}}function vx(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function xx(r,e,t){const o=Je(r);let a=o.du[o.currentUser.toKey()];if(a){const c=a.get(e);c&&(t?c.reject(t):c.resolve(),a=a.remove(e)),o.du[o.currentUser.toKey()]=a}}function dp(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const o of r.Iu.get(e))r.Tu.delete(o),t&&r.Pu.yu(o,t);r.Iu.delete(e),r.isPrimaryClient&&r.Vu.Gr(e).forEach((o=>{r.Vu.containsKey(o)||wx(r,o)}))}function wx(r,e){r.Eu.delete(e.path.canonicalString());const t=r.Ru.get(e);t!==null&&(Kp(r.remoteStore,t),r.Ru=r.Ru.remove(e),r.Au.delete(t),nm(r))}function Dy(r,e,t){for(const o of t)o instanceof mx?(r.Vu.addReference(o.key,e),ck(r,o)):o instanceof gx?(Pe(tm,"Document no longer in limbo: "+o.key),r.Vu.removeReference(o.key,e),r.Vu.containsKey(o.key)||wx(r,o.key)):$e(19791,{wu:o})}function ck(r,e){const t=e.key,o=t.path.canonicalString();r.Ru.get(t)||r.Eu.has(o)||(Pe(tm,"New document in limbo: "+t),r.Eu.add(o),nm(r))}function nm(r){for(;r.Eu.size>0&&r.Ru.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new je(Tt.fromString(e)),o=r.fu.next();r.Au.set(o,new Xb(t)),r.Ru=r.Ru.insert(t,o),ox(r.remoteStore,new So(Ui(Fp(t.path)),o,"TargetPurposeLimboResolution",Kh.ce))}}async function Xu(r,e,t){const o=Je(r),a=[],c=[],p=[];o.Tu.isEmpty()||(o.Tu.forEach(((y,w)=>{p.push(o.pu(w,e,t).then((T=>{var b;if((T||t)&&o.isPrimaryClient){const k=T?!T.fromCache:(b=t==null?void 0:t.targetChanges.get(w.targetId))==null?void 0:b.current;o.sharedClientState.updateQueryState(w.targetId,k?"current":"not-current")}if(T){a.push(T);const k=qp.Es(w.targetId,T);c.push(k)}})))})),await Promise.all(p),o.Pu.J_(a),await(async function(w,T){const b=Je(w);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(k=>ae.forEach(T,(N=>ae.forEach(N.Ts,(V=>b.persistence.referenceDelegate.addReference(k,N.targetId,V))).next((()=>ae.forEach(N.Is,(V=>b.persistence.referenceDelegate.removeReference(k,N.targetId,V)))))))))}catch(k){if(!Fl(k))throw k;Pe(Gp,"Failed to update sequence numbers: "+k)}for(const k of T){const N=k.targetId;if(!k.fromCache){const V=b.vs.get(N),U=V.snapshotVersion,q=V.withLastLimboFreeSnapshotVersion(U);b.vs=b.vs.insert(N,q)}}})(o.localStore,c))}async function hk(r,e){const t=Je(r);if(!t.currentUser.isEqual(e)){Pe(tm,"User change. New user:",e.toKey());const o=await nx(t.localStore,e);t.currentUser=e,(function(c,p){c.mu.forEach((y=>{y.forEach((w=>{w.reject(new ve(se.CANCELLED,p))}))})),c.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),await Xu(t,o.Ns)}}function dk(r,e){const t=Je(r),o=t.Au.get(e);if(o&&o.hu)return ot().add(o.key);{let a=ot();const c=t.Iu.get(e);if(!c)return a;for(const p of c){const y=t.Tu.get(p);a=a.unionWith(y.view.nu)}return a}}function Ex(r){const e=Je(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=yx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ak.bind(null,e),e.Pu.J_=Zb.bind(null,e.eventManager),e.Pu.yu=Qb.bind(null,e.eventManager),e}function fk(r){const e=Je(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=lk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=uk.bind(null,e),e}class jh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=rd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return gb(this.persistence,new fb,e.initialUser,this.serializer)}Cu(e){return new tx($p.Vi,this.serializer)}Du(e){return new Tb}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}jh.provider={build:()=>new jh};class pk extends jh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){yt(this.persistence.referenceDelegate instanceof Mh,46915);const o=this.persistence.referenceDelegate.garbageCollector;return new JP(o,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?ir.withCacheSize(this.cacheSizeBytes):ir.DEFAULT;return new tx((o=>Mh.Vi(o,t)),this.serializer)}}class fp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=o=>Ly(this.syncEngine,o,1),this.remoteStore.remoteSyncer.handleCredentialChange=hk.bind(null,this.syncEngine),await qb(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Kb})()}createDatastore(e){const t=rd(e.databaseInfo.databaseId),o=kb(e.databaseInfo);return Lb(e.authCredentials,e.appCheckCredentials,o,t)}createRemoteStore(e){return(function(o,a,c,p,y){return new Mb(o,a,c,p,y)})(this.localStore,this.datastore,e.asyncQueue,(t=>Ly(this.syncEngine,t,0)),(function(){return by.v()?new by:new Ib})())}createSyncEngine(e,t){return(function(a,c,p,y,w,T,b){const k=new ek(a,c,p,y,w,T);return b&&(k.gu=!0),k})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(a){const c=Je(a);Pe(ka,"RemoteStore shutting down."),c.Ea.add(5),await Ju(c),c.Aa.shutdown(),c.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}fp.provider={build:()=>new fp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):As("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oo="FirestoreClient";class mk{constructor(e,t,o,a,c){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=o,this._databaseInfo=a,this.user=kn.UNAUTHENTICATED,this.clientId=Lp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(o,(async p=>{Pe(Oo,"Received user=",p.uid),await this.authCredentialListener(p),this.user=p})),this.appCheckCredentials.start(o,(p=>(Pe(Oo,"Received new app check token=",p),this.appCheckCredentialListener(p,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new bs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const o=Xp(t,"Failed to shutdown persistence");e.reject(o)}})),e.promise}}async function Of(r,e){r.asyncQueue.verifyOperationInProgress(),Pe(Oo,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let o=t.initialUser;r.setCredentialChangeListener((async a=>{o.isEqual(a)||(await nx(e.localStore,a),o=a)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function My(r,e){r.asyncQueue.verifyOperationInProgress();const t=await gk(r);Pe(Oo,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((o=>Cy(e.remoteStore,o))),r.setAppCheckTokenChangeListener(((o,a)=>Cy(e.remoteStore,a))),r._onlineComponents=e}async function gk(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){Pe(Oo,"Using user provided OfflineComponentProvider");try{await Of(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===se.FAILED_PRECONDITION||a.code===se.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;ba("Error using user provided cache. Falling back to memory cache: "+t),await Of(r,new jh)}}else Pe(Oo,"Using default OfflineComponentProvider"),await Of(r,new pk(void 0));return r._offlineComponents}async function Ix(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(Pe(Oo,"Using user provided OnlineComponentProvider"),await My(r,r._uninitializedComponentsProvider._online)):(Pe(Oo,"Using default OnlineComponentProvider"),await My(r,new fp))),r._onlineComponents}function _k(r){return Ix(r).then((e=>e.syncEngine))}async function Sx(r){const e=await Ix(r),t=e.eventManager;return t.onListen=tk.bind(null,e.syncEngine),t.onUnlisten=ik.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=nk.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=sk.bind(null,e.syncEngine),t}function yk(r,e,t={}){const o=new bs;return r.asyncQueue.enqueueAndForget((async()=>(function(c,p,y,w,T){const b=new Tx({next:N=>{b.Nu(),p.enqueueAndForget((()=>fx(c,k)));const V=N.docs.has(y);!V&&N.fromCache?T.reject(new ve(se.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&N.fromCache&&w&&w.source==="server"?T.reject(new ve(se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):T.resolve(N)},error:N=>T.reject(N)}),k=new px(Fp(y.path),b,{includeMetadataChanges:!0,Ka:!0});return dx(c,k)})(await Sx(r),r.asyncQueue,e,t,o))),o.promise}function vk(r,e,t={}){const o=new bs;return r.asyncQueue.enqueueAndForget((async()=>(function(c,p,y,w,T){const b=new Tx({next:N=>{b.Nu(),p.enqueueAndForget((()=>fx(c,k))),N.fromCache&&w.source==="server"?T.reject(new ve(se.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):T.resolve(N)},error:N=>T.reject(N)}),k=new px(y,b,{includeMetadataChanges:!0,Ka:!0});return dx(c,k)})(await Sx(r),r.asyncQueue,e,t,o))),o.promise}function xk(r,e){const t=new bs;return r.asyncQueue.enqueueAndForget((async()=>ok(await _k(r),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Px(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wk="ComponentProvider",Oy=new Map;function Ek(r,e,t,o,a){return new BS(r,e,t,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,Px(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator,o)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bx="firestore.googleapis.com",jy=!0;class Vy{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ve(se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=bx,this.ssl=jy}else this.host=e.host,this.ssl=e.ssl??jy;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ex;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<QP)throw new ve(se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}NS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Px(e.experimentalLongPollingOptions??{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ve(se.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ve(se.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ve(se.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(o,a){return o.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class od{constructor(e,t,o,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=o,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Vy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ve(se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ve(se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Vy(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(o){if(!o)return new wS;switch(o.type){case"firstParty":return new SS(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new ve(se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const o=Oy.get(t);o&&(Pe(wk,"Removing Datastore"),Oy.delete(t),o.terminate())})(this),Promise.resolve()}}function Tk(r,e,t,o={}){var T;r=Ns(r,od);const a=Ml(e),c=r._getSettings(),p={...c,emulatorOptions:r._getEmulatorOptions()},y=`${e}:${t}`;a&&(dv(`https://${y}`),fv("Firestore",!0)),c.host!==bx&&c.host!==y&&ba("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const w={...c,host:y,ssl:a,emulatorOptions:o};if(!wa(w,p)&&(r._setSettings(w),o.mockUserToken)){let b,k;if(typeof o.mockUserToken=="string")b=o.mockUserToken,k=kn.MOCK_USER;else{b=n1(o.mockUserToken,(T=r._app)==null?void 0:T.options.projectId);const N=o.mockUserToken.sub||o.mockUserToken.user_id;if(!N)throw new ve(se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");k=new kn(N)}r._authCredentials=new ES(new h0(b,k))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(e,t,o){this.converter=t,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new Da(this.firestore,e,this._query)}}class Zt{constructor(e,t,o){this.converter=t,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ao(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Zt(this.firestore,e,this._key)}toJSON(){return{type:Zt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,o){if(Zu(t,Zt._jsonSchema))return new Zt(e,o||null,new je(Tt.fromString(t.referencePath)))}}Zt._jsonSchemaVersion="firestore/documentReference/1.0",Zt._jsonSchema={type:Kt("string",Zt._jsonSchemaVersion),referencePath:Kt("string")};class Ao extends Da{constructor(e,t,o){super(e,t,Fp(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Zt(this.firestore,null,new je(e))}withConverter(e){return new Ao(this.firestore,e,this._path)}}function kx(r,e,...t){if(r=Ut(r),d0("collection","path",e),r instanceof od){const o=Tt.fromString(e,...t);return Y_(o),new Ao(r,null,o)}{if(!(r instanceof Zt||r instanceof Ao))throw new ve(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=r._path.child(Tt.fromString(e,...t));return Y_(o),new Ao(r.firestore,null,o)}}function rm(r,e,...t){if(r=Ut(r),arguments.length===1&&(e=Lp.newId()),d0("doc","path",e),r instanceof od){const o=Tt.fromString(e,...t);return Q_(o),new Zt(r,null,new je(o))}{if(!(r instanceof Zt||r instanceof Ao))throw new ve(se.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=r._path.child(Tt.fromString(e,...t));return Q_(o),new Zt(r.firestore,r instanceof Ao?r.converter:null,new je(o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fy="AsyncQueue";class zy{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ix(this,"async_queue_retry"),this._c=()=>{const o=Mf();o&&Pe(Fy,"Visibility state changed to "+o.visibilityState),this.M_.w_()},this.ac=e;const t=Mf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Mf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new bs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Fl(e))throw e;Pe(Fy,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((o=>{throw this.nc=o,this.rc=!1,As("INTERNAL UNHANDLED ERROR: ",Uy(o)),o})).then((o=>(this.rc=!1,o))))));return this.ac=t,t}enqueueAfterDelay(e,t,o){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=Jp.createAndSchedule(this,e,t,o,(c=>this.hc(c)));return this.tc.push(a),a}uc(){this.nc&&$e(47125,{Pc:Uy(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,o)=>t.targetTimeMs-o.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Uy(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class Bl extends od{constructor(e,t,o,a){super(e,t,o,a),this.type="firestore",this._queue=new zy,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new zy(e),this._firestoreClient=void 0,await e}}}function Ik(r,e){const t=typeof r=="object"?r:_v(),o=typeof r=="string"?r:Ch,a=vp(t,"firestore").getImmediate({identifier:o});if(!a._initialized){const c=e1("firestore");c&&Tk(a,...c)}return a}function ad(r){if(r._terminated)throw new ve(se.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||Sk(r),r._firestoreClient}function Sk(r){var o,a,c,p;const e=r._freezeSettings(),t=Ek(r._databaseId,((o=r._app)==null?void 0:o.options.appId)||"",r._persistenceKey,(a=r._app)==null?void 0:a.options.apiKey,e);r._componentsProvider||(c=e.localCache)!=null&&c._offlineComponentProvider&&((p=e.localCache)!=null&&p._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new mk(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(w){const T=w==null?void 0:w._online.build();return{_offline:w==null?void 0:w._offline.build(T),_online:T}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Gr(mn.fromBase64String(e))}catch(t){throw new ve(se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Gr(mn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Gr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Zu(e,Gr._jsonSchema))return Gr.fromBase64String(e.bytes)}}Gr._jsonSchemaVersion="firestore/bytes/1.0",Gr._jsonSchema={type:Kt("string",Gr._jsonSchemaVersion),bytes:Kt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ve(se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ve(se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ve(se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return st(this._lat,e._lat)||st(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Hi._jsonSchemaVersion}}static fromJSON(e){if(Zu(e,Hi._jsonSchema))return new Hi(e.latitude,e.longitude)}}Hi._jsonSchemaVersion="firestore/geoPoint/1.0",Hi._jsonSchema={type:Kt("string",Hi._jsonSchemaVersion),latitude:Kt("number"),longitude:Kt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(o,a){if(o.length!==a.length)return!1;for(let c=0;c<o.length;++c)if(o[c]!==a[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ui._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Zu(e,ui._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ui(e.vectorValues);throw new ve(se.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ui._jsonSchemaVersion="firestore/vectorValue/1.0",ui._jsonSchema={type:Kt("string",ui._jsonSchemaVersion),vectorValues:Kt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pk=/^__.*__$/;class bk{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return this.fieldMask!==null?new zo(e,this.data,this.fieldMask,t,this.fieldTransforms):new Qu(e,this.data,t,this.fieldTransforms)}}class Cx{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return new zo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Ax(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $e(40011,{dataSource:r})}}class om{constructor(e,t,o,a,c,p){this.settings=e,this.databaseId=t,this.serializer=o,this.ignoreUndefinedProperties=a,c===void 0&&this.validatePath(),this.fieldTransforms=c||[],this.fieldMask=p||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new om({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var a;const t=(a=this.path)==null?void 0:a.child(e),o=this.contextWith({path:t,arrayElement:!1});return o.validatePathSegment(e),o}childContextForFieldPath(e){var a;const t=(a=this.path)==null?void 0:a.child(e),o=this.contextWith({path:t,arrayElement:!1});return o.validatePath(),o}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Vh(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(Ax(this.dataSource)&&Pk.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class kk{constructor(e,t,o){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=o||rd(e)}createContext(e,t,o,a=!1){return new om({dataSource:e,methodName:t,targetDoc:o,path:pn.emptyPath(),arrayElement:!1,hasConverter:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function am(r){const e=r._freezeSettings(),t=rd(r._databaseId);return new kk(r._databaseId,!!e.ignoreUndefinedProperties,t)}function Nx(r,e,t,o,a,c={}){const p=r.createContext(c.merge||c.mergeFields?2:0,e,t,a);lm("Data must be an object, but it was:",p,o);const y=Rx(o,p);let w,T;if(c.merge)w=new yr(p.fieldMask),T=p.fieldTransforms;else if(c.mergeFields){const b=[];for(const k of c.mergeFields){const N=Dl(e,k,t);if(!p.contains(N))throw new ve(se.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);Mx(b,N)||b.push(N)}w=new yr(b),T=p.fieldTransforms.filter((k=>w.covers(k.field)))}else w=null,T=p.fieldTransforms;return new bk(new sr(y),w,T)}class ld extends sm{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ld}}function Ck(r,e,t,o){const a=r.createContext(1,e,t);lm("Data must be an object, but it was:",a,o);const c=[],p=sr.empty();Fo(o,((w,T)=>{const b=Dx(e,w,t);T=Ut(T);const k=a.childContextForFieldPath(b);if(T instanceof ld)c.push(b);else{const N=ec(T,k);N!=null&&(c.push(b),p.set(b,N))}}));const y=new yr(c);return new Cx(p,y,a.fieldTransforms)}function Ak(r,e,t,o,a,c){const p=r.createContext(1,e,t),y=[Dl(e,o,t)],w=[a];if(c.length%2!=0)throw new ve(se.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<c.length;N+=2)y.push(Dl(e,c[N])),w.push(c[N+1]);const T=[],b=sr.empty();for(let N=y.length-1;N>=0;--N)if(!Mx(T,y[N])){const V=y[N];let U=w[N];U=Ut(U);const q=p.childContextForFieldPath(V);if(U instanceof ld)T.push(V);else{const te=ec(U,q);te!=null&&(T.push(V),b.set(V,te))}}const k=new yr(T);return new Cx(b,k,p.fieldTransforms)}function Nk(r,e,t,o=!1){return ec(t,r.createContext(o?4:3,e))}function ec(r,e){if(Lx(r=Ut(r)))return lm("Unsupported field value:",e,r),Rx(r,e);if(r instanceof sm)return(function(o,a){if(!Ax(a.dataSource))throw a.createError(`${o._methodName}() can only be used with update() and set()`);if(!a.path)throw a.createError(`${o._methodName}() is not currently supported inside arrays`);const c=o._toFieldTransform(a);c&&a.fieldTransforms.push(c)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(o,a){const c=[];let p=0;for(const y of o){let w=ec(y,a.childContextForArray(p));w==null&&(w={nullValue:"NULL_VALUE"}),c.push(w),p++}return{arrayValue:{values:c}}})(r,e)}return(function(o,a){if((o=Ut(o))===null)return{nullValue:"NULL_VALUE"};if(typeof o=="number")return pP(a.serializer,o);if(typeof o=="boolean")return{booleanValue:o};if(typeof o=="string")return{stringValue:o};if(o instanceof Date){const c=Pt.fromDate(o);return{timestampValue:Dh(a.serializer,c)}}if(o instanceof Pt){const c=new Pt(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:Dh(a.serializer,c)}}if(o instanceof Hi)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof Gr)return{bytesValue:q0(a.serializer,o._byteString)};if(o instanceof Zt){const c=a.databaseId,p=o.firestore._databaseId;if(!p.isEqual(c))throw a.createError(`Document reference is for database ${p.projectId}/${p.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Hp(o.firestore._databaseId||a.databaseId,o._key.path)}}if(o instanceof ui)return(function(p,y){const w=p instanceof ui?p.toArray():p;return{mapValue:{fields:{[w0]:{stringValue:E0},[Ah]:{arrayValue:{values:w.map((b=>{if(typeof b!="number")throw y.createError("VectorValues must only contain numeric values.");return zp(y.serializer,b)}))}}}}}})(o,a);if(X0(o))return o._toProto(a.serializer);throw a.createError(`Unsupported field value: ${Gh(o)}`)})(r,e)}function Rx(r,e){const t={};return m0(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fo(r,((o,a)=>{const c=ec(a,e.childContextForField(o));c!=null&&(t[o]=c)})),{mapValue:{fields:t}}}function Lx(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Pt||r instanceof Hi||r instanceof Gr||r instanceof Zt||r instanceof sm||r instanceof ui||X0(r))}function lm(r,e,t){if(!Lx(t)||!f0(t)){const o=Gh(t);throw o==="an object"?e.createError(r+" a custom object"):e.createError(r+" "+o)}}function Dl(r,e,t){if((e=Ut(e))instanceof im)return e._internalPath;if(typeof e=="string")return Dx(r,e);throw Vh("Field path arguments must be of type string or ",r,!1,void 0,t)}const Rk=new RegExp("[~\\*/\\[\\]]");function Dx(r,e,t){if(e.search(Rk)>=0)throw Vh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new im(...e.split("."))._internalPath}catch{throw Vh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Vh(r,e,t,o,a){const c=o&&!o.isEmpty(),p=a!==void 0;let y=`Function ${e}() called with invalid data`;t&&(y+=" (via `toFirestore()`)"),y+=". ";let w="";return(c||p)&&(w+=" (found",c&&(w+=` in field ${o}`),p&&(w+=` in document ${a}`),w+=")"),new ve(se.INVALID_ARGUMENT,y+r+w)}function Mx(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{convertValue(e,t="none"){switch(Do(e)){case 0:return null;case 1:return e.booleanValue;case 2:return zt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Lo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw $e(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const o={};return Fo(e,((a,c)=>{o[a]=this.convertValue(c,t)})),o}convertVectorValue(e){var o,a,c;const t=(c=(a=(o=e.fields)==null?void 0:o[Ah].arrayValue)==null?void 0:a.values)==null?void 0:c.map((p=>zt(p.doubleValue)));return new ui(t)}convertGeoPoint(e){return new Hi(zt(e.latitude),zt(e.longitude))}convertArray(e,t){return(e.values||[]).map((o=>this.convertValue(o,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const o=Qh(e);return o==null?null:this.convertValue(o,t);case"estimate":return this.convertTimestamp(Ou(e));default:return null}}convertTimestamp(e){const t=Ro(e);return new Pt(t.seconds,t.nanos)}convertDocumentKey(e,t){const o=Tt.fromString(e);yt(J0(o),9688,{name:e});const a=new ju(o.get(1),o.get(3)),c=new je(o.popFirst(5));return a.isEqual(t)||As(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox extends Lk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Zt(this.firestore,null,t)}}const By="@firebase/firestore",Hy="4.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(e,t,o,a,c){this._firestore=e,this._userDataWriter=t,this._key=o,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Zt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Dk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(Dl("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Dk extends jx{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mk(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ve(se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class um{}class Vx extends um{}function Ok(r,e,...t){let o=[];e instanceof um&&o.push(e),o=o.concat(t),(function(c){const p=c.filter((w=>w instanceof hm)).length,y=c.filter((w=>w instanceof cm)).length;if(p>1||p>0&&y>0)throw new ve(se.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(o);for(const a of o)r=a._apply(r);return r}class cm extends Vx{constructor(e,t,o){super(),this._field=e,this._op=t,this._value=o,this.type="where"}static _create(e,t,o){return new cm(e,t,o)}_apply(e){const t=this._parse(e);return Fx(e._query,t),new Da(e.firestore,e.converter,rp(e._query,t))}_parse(e){const t=am(e.firestore);return(function(c,p,y,w,T,b,k){let N;if(T.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new ve(se.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){$y(k,b);const U=[];for(const q of k)U.push(Wy(w,c,q));N={arrayValue:{values:U}}}else N=Wy(w,c,k)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||$y(k,b),N=Nk(y,p,k,b==="in"||b==="not-in");return Gt.create(T,b,N)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class hm extends um{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new hm(e,t)}_parse(e){const t=this._queryConstraints.map((o=>o._parse(e))).filter((o=>o.getFilters().length>0));return t.length===1?t[0]:hi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,c){let p=a;const y=c.getFlattenedFilters();for(const w of y)Fx(p,w),p=rp(p,w)})(e._query,t),new Da(e.firestore,e.converter,rp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class dm extends Vx{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new dm(e,t)}_apply(e){const t=(function(a,c,p){if(a.startAt!==null)throw new ve(se.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new ve(se.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Fu(c,p)})(e._query,this._field,this._direction);return new Da(e.firestore,e.converter,oP(e._query,t))}}function jk(r,e="asc"){const t=e,o=Dl("orderBy",r);return dm._create(o,t)}function Wy(r,e,t){if(typeof(t=Ut(t))=="string"){if(t==="")throw new ve(se.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!A0(e)&&t.indexOf("/")!==-1)throw new ve(se.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const o=e.path.child(Tt.fromString(t));if(!je.isDocumentKey(o))throw new ve(se.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return sy(r,new je(o))}if(t instanceof Zt)return sy(r,t._key);throw new ve(se.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Gh(t)}.`)}function $y(r,e){if(!Array.isArray(r)||r.length===0)throw new ve(se.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Fx(r,e){const t=(function(a,c){for(const p of a)for(const y of p.getFlattenedFilters())if(c.indexOf(y.op)>=0)return y.op;return null})(r.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ve(se.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ve(se.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function zx(r,e,t){let o;return o=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,o}class Iu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ya extends jx{constructor(e,t,o,a,c,p){super(e,t,o,a,p),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new _h(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const o=this._document.data.field(Dl("DocumentSnapshot.get",e));if(o!==null)return this._userDataWriter.convertValue(o,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(se.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ya._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ya._jsonSchemaVersion="firestore/documentSnapshot/1.0",ya._jsonSchema={type:Kt("string",ya._jsonSchemaVersion),bundleSource:Kt("string","DocumentSnapshot"),bundleName:Kt("string"),bundle:Kt("string")};class _h extends ya{data(e={}){return super.data(e)}}class bl{constructor(e,t,o,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Iu(a.hasPendingWrites,a.fromCache),this.query=o}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((o=>{e.call(t,new _h(this._firestore,this._userDataWriter,o.key,o,new Iu(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ve(se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,c){if(a._snapshot.oldDocs.isEmpty()){let p=0;return a._snapshot.docChanges.map((y=>{const w=new _h(a._firestore,a._userDataWriter,y.doc.key,y.doc,new Iu(a._snapshot.mutatedKeys.has(y.doc.key),a._snapshot.fromCache),a.query.converter);return y.doc,{type:"added",doc:w,oldIndex:-1,newIndex:p++}}))}{let p=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((y=>c||y.type!==3)).map((y=>{const w=new _h(a._firestore,a._userDataWriter,y.doc.key,y.doc,new Iu(a._snapshot.mutatedKeys.has(y.doc.key),a._snapshot.fromCache),a.query.converter);let T=-1,b=-1;return y.type!==0&&(T=p.indexOf(y.doc.key),p=p.delete(y.doc.key)),y.type!==1&&(p=p.add(y.doc),b=p.indexOf(y.doc.key)),{type:Vk(y.type),doc:w,oldIndex:T,newIndex:b}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(se.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=bl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Lp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],o=[],a=[];return this.docs.forEach((c=>{c._document!==null&&(t.push(c._document),o.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),a.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Vk(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $e(61501,{type:r})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bl._jsonSchemaVersion="firestore/querySnapshot/1.0",bl._jsonSchema={type:Kt("string",bl._jsonSchemaVersion),bundleSource:Kt("string","QuerySnapshot"),bundleName:Kt("string"),bundle:Kt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=am(e)}set(e,t,o){this._verifyNotCommitted();const a=jf(e,this._firestore),c=zx(a.converter,t,o),p=Nx(this._dataReader,"WriteBatch.set",a._key,c,a.converter!==null,o);return this._mutations.push(p.toMutation(a._key,vr.none())),this}update(e,t,o,...a){this._verifyNotCommitted();const c=jf(e,this._firestore);let p;return p=typeof(t=Ut(t))=="string"||t instanceof im?Ak(this._dataReader,"WriteBatch.update",c._key,t,o,a):Ck(this._dataReader,"WriteBatch.update",c._key,t),this._mutations.push(p.toMutation(c._key,vr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=jf(e,this._firestore);return this._mutations=this._mutations.concat(new td(t._key,vr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ve(se.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function jf(r,e){if((r=Ut(r)).firestore!==e)throw new ve(se.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ux(r){r=Ns(r,Zt);const e=Ns(r.firestore,Bl),t=ad(e);return yk(t,r._key).then((o=>zk(e,r,o)))}function pp(r){r=Ns(r,Da);const e=Ns(r.firestore,Bl),t=ad(e),o=new Ox(e);return Mk(r._query),vk(t,r._query).then((a=>new bl(e,o,r,a)))}function fm(r,e,t){r=Ns(r,Zt);const o=Ns(r.firestore,Bl),a=zx(r.converter,e,t),c=am(o);return pm(o,[Nx(c,"setDoc",r._key,a,r.converter!==null,t).toMutation(r._key,vr.none())])}function qy(r){return pm(Ns(r.firestore,Bl),[new td(r._key,vr.none())])}function pm(r,e){const t=ad(r);return xk(t,e)}function zk(r,e,t){const o=t.docs.get(e._key),a=new Ox(r);return new ya(r,a,e._key,o,new Iu(t.hasPendingWrites,t.fromCache),e.converter)}function Uk(r){return r=Ns(r,Bl),ad(r),new Fk(r,(e=>pm(r,e)))}(function(e,t=!0){xS(Ol),kl(new Ea("firestore",((o,{instanceIdentifier:a,options:c})=>{const p=o.getProvider("app").getImmediate(),y=new Bl(new TS(o.getProvider("auth-internal")),new PS(p,o.getProvider("app-check-internal")),HS(p,a),p);return c={useFetchStreams:t,...c},y._setSettings(c),y}),"PUBLIC").setMultipleInstances(!0)),ko(By,Hy,e),ko(By,Hy,"esm2020")})();const Bk={apiKey:"AIzaSyBAf83WJpNKrse4AIIGYajoGt_Q0jeQ5zs",authDomain:"wandr-b02f5.firebaseapp.com",projectId:"wandr-b02f5",storageBucket:"wandr-b02f5.firebasestorage.app",messagingSenderId:"426584594137",appId:"1:426584594137:web:5beca6fa60330f90b410c8"},Bx=gv(Bk),Fh=HI(Bx),Hl=Ik(Bx);function Hk(){const[r,e]=ie.useState(null),[t,o]=ie.useState(!0);return ie.useEffect(()=>AT(Fh,c=>{e(c),o(!1)}),[]),{user:r,loading:t}}function Hx(r){return kx(Hl,"users",r,"trips")}function Wx(r,e){return rm(Hl,"users",r,"trips",e)}function mm(r,e){return rm(Hl,"users",r,"chats",e)}function Wk(r){return kx(Hl,"users",r,"chats")}function gm(r){return rm(Hl,"users",r,"settings","main")}async function $k(r){return(await pp(Ok(Hx(r),jk("createdAt","desc")))).docs.map(t=>t.data())}async function Gy(r,e){await fm(Wx(r,e.id),e)}async function qk(r,e){await Promise.all([qy(Wx(r,e)),qy(mm(r,e))])}async function Gk(r,e){const t=await Ux(mm(r,e));return t.exists()?t.data().messages??[]:[]}async function Kk(r,e,t){await fm(mm(r,e),{messages:t})}async function Zk(r){const e=await Ux(gm(r));if(!e.exists())return{perplexityKey:"",anthropicKey:""};const t=e.data();return{perplexityKey:t.perplexityKey??t.apiKey??"",anthropicKey:t.anthropicKey??""}}async function Qk(r,e){await fm(gm(r),{perplexityKey:e.perplexityKey,anthropicKey:e.anthropicKey},{merge:!0})}async function Yk(r){const e=Uk(Hl),[t,o]=await Promise.all([pp(Hx(r)),pp(Wk(r))]);t.docs.forEach(a=>e.delete(a.ref)),o.docs.forEach(a=>e.delete(a.ref)),e.delete(gm(r)),await e.commit()}let yh=null;function Ky(r){yh=r}function Jk(){return Math.random().toString(36).slice(2,9)}function $n(r,e){const t=e??Jk();return yh==null||yh({...r,id:t,timestamp:new Date().toISOString()}),t}let zh=[],va=null;function Zy(r){va=r}function Qy(){return[...zh]}function Xk(){zh=[],va==null||va(null)}function eC(){return Math.random().toString(36).slice(2,9)}function ah(r,e,t,o){const a={id:eC(),level:r,category:e,message:t,data:o!==void 0?o:void 0,timestamp:new Date().toISOString()};zh=[...zh.slice(-299),a],va==null||va(a);const c=[`[${e}] ${t}`,...o!==void 0?[o]:[]];r==="error"?console.error(...c):r==="warn"?console.warn(...c):r==="debug"?console.debug(...c):console.log(...c)}const xa={debug:(r,e,t)=>ah("debug",r,e,t),info:(r,e,t)=>ah("info",r,e,t),warn:(r,e,t)=>ah("warn",r,e,t),error:(r,e,t)=>ah("error",r,e,t)},tC="https://api.perplexity.ai/chat/completions",nC="sonar-pro",rC="sonar";async function $x(r,e,t,o={}){var b,k,N;const{maxTokens:a=8192,model:c=nC}=o,p=[{role:"system",content:e},...r];xa.debug("ai.perplexity",`Request  ${c}`,{model:c,maxTokens:a,lastUserMessage:(k=(b=r[r.length-1])==null?void 0:b.content)==null?void 0:k.slice(0,200)});const y=await fetch(tC,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({model:c,max_tokens:a,messages:p})});if(!y.ok){const V=await y.json().catch(()=>({})),U=((N=V==null?void 0:V.error)==null?void 0:N.message)||`Perplexity API error ${y.status}`;throw xa.error("ai.perplexity",`HTTP ${y.status}`,{status:y.status,message:U}),new Error(U)}const T=(await y.json()).choices[0].message.content;return xa.debug("ai.perplexity",`Response (${T.length} chars)`,{preview:T.slice(0,300)}),T}const iC="https://api.anthropic.com/v1/messages",Vf="claude-haiku-4-5-20251001";async function qx(r,e,t,o={}){var T;const{maxTokens:a=8192}=o,c=typeof r=="string"?r.slice(0,200):r.filter(b=>b.type==="text").map(b=>b.text).join(" ").slice(0,200);xa.debug("ai.claude",`Request  ${Vf}`,{model:Vf,maxTokens:a,blocks:Array.isArray(r)?r.map(b=>b.type):"text",preview:c});const p=await fetch(iC,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":t,"anthropic-version":"2023-06-01","anthropic-dangerous-direct-browser-access":"true"},body:JSON.stringify({model:Vf,max_tokens:a,system:e,messages:[{role:"user",content:r}]})});if(!p.ok){const b=await p.json().catch(()=>({})),k=((T=b==null?void 0:b.error)==null?void 0:T.message)||`Claude API error ${p.status}`;throw xa.error("ai.claude",`HTTP ${p.status}`,{status:p.status,message:k}),p.status===401||k.toLowerCase().includes("api-key")||k.toLowerCase().includes("authentication")?new Error("Invalid Claude API key  please check your Anthropic key in Settings."):new Error(k)}const w=(await p.json()).content.find(b=>b.type==="text");if(!w)throw new Error("No text content in Claude response");return xa.debug("ai.claude",`Response (${w.text.length} chars)`,{preview:w.text.slice(0,300)}),w.text}function Gx(r,e){var w;if(!(e!=null&&e.text)&&!((w=e==null?void 0:e.files)!=null&&w.length))return r;const t=e.files??[],o=t.filter(T=>T.mimeType.startsWith("image/")),a=t.filter(T=>T.mimeType==="application/pdf"),c=t.filter(T=>T.mimeType==="text/plain"||T.mimeType==="text/markdown");if(!o.length&&!a.length){let T="";e.text&&(T+=`User notes: ${e.text}

`);for(const b of c)try{T+=`--- ${b.name} ---
${atob(b.dataBase64)}

`}catch{}return T+r}const p=[];for(const T of o)p.push({type:"image",source:{type:"base64",media_type:T.mimeType,data:T.dataBase64}});for(const T of a)p.push({type:"document",source:{type:"base64",media_type:"application/pdf",data:T.dataBase64}});let y="";e.text&&(y+=`User notes: ${e.text}

`);for(const T of c)try{y+=`--- ${T.name} ---
${atob(T.dataBase64)}

`}catch{}return y+=r,p.push({type:"text",text:y}),p}async function _m(r,e,t,o,a={}){if(!t)throw new Error("An Anthropic (Claude) API key is required to generate content. Please add it in Settings.");const c=Gx(r,o);return qx(c,e,t,a)}function Kx(r){if(Array.isArray(r))return r;if(r&&typeof r=="object"){for(const e of Object.values(r))if(Array.isArray(e)&&e.length>0)return e}throw new Error("AI returned an unexpected format. Please try again.")}function sC(r,e,t,o){let a=0,c=!1;for(let p=e;p<r.length;p++){const y=r[p];if(c){if(y==="\\"){p++;continue}y==='"'&&(c=!1);continue}if(y==='"'){c=!0;continue}if(y===t){a++;continue}if(y===o&&(a--,a===0))return r.slice(e,p+1)}return null}function ym(r){const e=r.replace(/^```(?:json|JSON)?\s*/m,"").replace(/```\s*$/m,"").trim();for(const t of[e,r]){try{return JSON.parse(t)}catch{}const o=t.indexOf("{"),a=t.indexOf("["),c=[];o!==-1&&c.push([o,"{","}"]),a!==-1&&c.push([a,"[","]"]),c.sort((p,y)=>p[0]-y[0]);for(const[p,y,w]of c){const T=sC(t,p,y,w);if(T)try{return JSON.parse(T)}catch{}}}throw xa.error("ai.parse","JSON parse failed  full raw response below",{raw:r}),new Error("AI returned an unexpected format. Please try again.")}async function oC(r){const{destination:e,startDate:t,endDate:o,interests:a,budget:c,travelers:p,anthropicKey:y,context:w}=r,T=$n({message:`Creating trip to ${e}`,status:"pending"}),b=`Trip to ${e} (${t}  ${o}).
Interests: ${a.join(", ")}. Budget: $${c}. Travelers: ${p}.

Fill in this JSON exactly (no other text):
{
  "name": "<catchy 3-5 word trip name>",
  "emoji": "<single emoji>",
  "description": "<2 sentences about this trip>",
  "coverGradient": "<exactly one of: from-violet-900 to-indigo-900 | from-blue-900 to-cyan-900 | from-emerald-900 to-teal-900 | from-rose-900 to-pink-900 | from-amber-900 to-orange-900 | from-slate-900 to-blue-900>"
}`;try{const k=await _m(b,"You are a travel expert. Respond with ONLY a valid JSON object  no markdown, no code fences, no explanation. Raw JSON only.",y,w,{maxTokens:512}),N=ym(k);return $n({message:`Trip "${N.name}" created`,status:"success"},T),N}catch(k){const N=k instanceof Error?k.message:"Unknown error";throw $n({message:"Failed to create trip",detail:N,status:"error"},T),k}}async function aC(r,e){const t=Math.ceil((new Date(r.endDate).getTime()-new Date(r.startDate).getTime())/864e5)+1,o=$n({message:`Generating ${t}-day itinerary for ${r.destination}`,status:"pending"}),a=[];for(let y=0;y<t;y++){const w=new Date(r.startDate+"T12:00:00");w.setDate(w.getDate()+y),a.push(w.toISOString().split("T")[0])}const c=r.notes?`
Additional context: ${r.notes}`:"",p=`Create a ${t}-day itinerary for ${r.destination}.
Dates: ${a.join(", ")}. Interests: ${r.interests.join(", ")}.
Budget: ${r.currency}${r.budget} for ${r.travelers} person(s).${c}

Return a JSON array of ${t} objects. Each object:
{"id":"day-N","date":"YYYY-MM-DD","title":"Day theme","activities":[
  {"id":"act-N-M","time":"HH:MM","title":"Name","description":"One sentence.","category":"food|sightseeing|activity|transport|accommodation|free","estimatedCost":0,"lat":0.0000,"lng":0.0000}
]}
Exactly 4 activities per day. Include accurate GPS coordinates (lat/lng) for each specific location. Keep descriptions to 1 sentence.`;try{const y=await _m(p,"Respond with ONLY a valid JSON array  no markdown, no code fences, no explanation. Raw JSON array only.",e,void 0,{maxTokens:8192}),w=Kx(ym(y)).filter(T=>T!=null).map((T,b)=>{const k=new Date(r.startDate+"T12:00:00");return k.setDate(k.getDate()+b),{...T,date:k.toISOString().split("T")[0],activities:Array.isArray(T.activities)?T.activities:[]}});return $n({message:`Itinerary ready  ${w.length} days, ${w.reduce((T,b)=>T+b.activities.length,0)} activities`,status:"success"},o),w}catch(y){const w=y instanceof Error?y.message:"Unknown error";throw $n({message:"Failed to generate itinerary",detail:w,status:"error"},o),y}}async function lC(r,e){const t=Math.ceil((new Date(r.endDate).getTime()-new Date(r.startDate).getTime())/864e5)+1,o=$n({message:`Generating packing list for ${r.destination}`,status:"pending"}),a=r.notes?`
Additional context: ${r.notes}`:"",c=`Packing list for ${t}-day trip to ${r.destination}.
Activities: ${r.interests.join(", ")}. Travelers: ${r.travelers}.${a}

Return a JSON array of exactly 25 items:
[{"id":"item-N","name":"Item","category":"Documents|Clothing|Toiletries|Electronics|Health & Safety|Activities|Miscellaneous","packed":false,"quantity":1,"essential":true}]
Mark passport, medications as essential:true. Others essential:false.`;try{const p=await _m(c,"Respond with ONLY a valid JSON array  no markdown, no code fences, no explanation. Raw JSON array only.",e,void 0,{maxTokens:3e3}),y=Kx(ym(p));return $n({message:`Packing list ready  ${y.length} items`,status:"success"},o),y}catch(p){const y=p instanceof Error?p.message:"Unknown error";throw $n({message:"Failed to generate packing list",detail:y,status:"error"},o),p}}async function uC(r,e,t,o,a,c){const p=$n({message:"AI assistant responding",status:"pending"}),y=t.notes?`
Trip notes: ${t.notes}`:"",w=`You are a travel assistant for a trip to ${t.destination} (${t.startDate}  ${t.endDate}).
${t.travelers} traveler(s). Budget: ${t.currency}${t.budget}. Interests: ${t.interests.join(", ")}.${y}
Be concise and specific. 2-4 sentences per answer.`;try{let T;if((c!=null&&c.length||!o)&&a){const b=Gx(r,c!=null&&c.length?{files:c}:void 0),k=e.length?`Previous conversation:
${e.map(V=>`${V.role}: ${V.content}`).join(`
`)}

`:"",N=typeof b=="string"?[{type:"text",text:k+b}]:[{type:"text",text:k},...b];T=await qx(N,w,a,{maxTokens:1024})}else T=await $x([...e,{role:"user",content:r}],w,o,{maxTokens:1024});return $n({message:"AI assistant replied",status:"success"},p),T}catch(T){const b=T instanceof Error?T.message:"Unknown error";throw $n({message:"AI chat error",detail:b,status:"error"},p),T}}async function cC(r,e,t){const o=$n({message:"Searching travel info",status:"pending"}),a=`You are a real-time travel search assistant. The user is planning a trip to ${e.destination} from ${e.startDate} to ${e.endDate} with ${e.travelers} traveler(s), budget ${e.currency}${e.budget}. Provide up-to-date, specific answers using web search. Be concise but thorough. Use clear sections when listing multiple items.`;try{const c=await $x([{role:"user",content:r}],a,t,{maxTokens:2048,model:rC});return $n({message:"Search complete",status:"success"},o),c}catch(c){const p=c instanceof Error?c.message:"Unknown error";throw $n({message:"Search failed",detail:p,status:"error"},o),c}}function hC(r){switch(r){case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":return"Invalid email or password.";case"auth/email-already-in-use":return"An account with this email already exists.";case"auth/weak-password":return"Password must be at least 6 characters.";case"auth/invalid-email":return"Please enter a valid email address.";case"auth/too-many-requests":return"Too many failed attempts. Please try again later.";default:return"Something went wrong. Please try again."}}function dC(){const[r,e]=ie.useState("login"),[t,o]=ie.useState(""),[a,c]=ie.useState(""),[p,y]=ie.useState(""),[w,T]=ie.useState(!1),b=async N=>{N.preventDefault(),y(""),T(!0);try{r==="create"?await PT(Fh,t,a):await bT(Fh,t,a)}catch(V){y(hC(V.code))}finally{T(!1)}},k=()=>{e(N=>N==="login"?"create":"login"),y("")};return _.jsx("div",{className:"min-h-screen bg-gray-950 flex items-center justify-center p-4",children:_.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-8 w-full max-w-md shadow-2xl",children:[_.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[_.jsx("div",{className:"p-2.5 bg-indigo-500/20 rounded-xl border border-indigo-500/30",children:_.jsx(Ap,{className:"w-6 h-6 text-indigo-400"})}),_.jsxs("div",{children:[_.jsx("h1",{className:"text-xl font-bold text-gray-100",children:"Wandr"}),_.jsx("p",{className:"text-xs text-indigo-400",children:"AI Trip Planner"})]})]}),_.jsx("h2",{className:"text-lg font-semibold text-gray-100 mb-6",children:r==="login"?"Sign in to your account":"Create your account"}),_.jsxs("form",{onSubmit:b,className:"space-y-4",children:[_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm text-gray-400 mb-1.5",children:"Email"}),_.jsxs("div",{className:"relative",children:[_.jsx(uS,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-600"}),_.jsx("input",{type:"email",value:t,onChange:N=>o(N.target.value),required:!0,placeholder:"you@example.com",className:"w-full bg-gray-800 border border-gray-700 rounded-xl pl-10 pr-4 py-3 text-gray-100 placeholder-gray-600 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition"})]})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm text-gray-400 mb-1.5",children:"Password"}),_.jsxs("div",{className:"relative",children:[_.jsx(Ps,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-600"}),_.jsx("input",{type:"password",value:a,onChange:N=>c(N.target.value),required:!0,minLength:6,placeholder:"Minimum 6 characters",className:"w-full bg-gray-800 border border-gray-700 rounded-xl pl-10 pr-4 py-3 text-gray-100 placeholder-gray-600 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition"})]})]}),p&&_.jsx("p",{className:"text-sm text-red-400 bg-red-500/10 border border-red-500/20 rounded-xl px-4 py-2.5",children:p}),_.jsxs("button",{type:"submit",disabled:w||!t||!a,className:"w-full py-3 bg-indigo-600 hover:bg-indigo-500 disabled:opacity-40 disabled:cursor-not-allowed rounded-xl font-medium transition shadow-lg shadow-indigo-900/30 flex items-center justify-center gap-2",children:[w&&_.jsx(Wn,{className:"w-4 h-4 animate-spin"}),r==="login"?"Sign In":"Create Account"]})]}),_.jsxs("p",{className:"text-center text-sm text-gray-500 mt-6",children:[r==="login"?"Don't have an account?":"Already have an account?"," ",_.jsx("button",{onClick:k,className:"text-indigo-400 hover:text-indigo-300 transition font-medium",children:r==="login"?"Create one":"Sign in"})]})]})})}function fC({onSave:r,existing:e,onClose:t,onLogout:o,onDeleteAccount:a}){const[c,p]=ie.useState(e.perplexityKey),[y,w]=ie.useState(e.anthropicKey),[T,b]=ie.useState(!1),[k,N]=ie.useState(!1),[V,U]=ie.useState(!1),[q,te]=ie.useState(!1),[ce,ge]=ie.useState(""),[Te,Oe]=ie.useState(""),[be,fe]=ie.useState(!1),F=()=>{r({perplexityKey:c.trim(),anthropicKey:y.trim()}),U(!0),setTimeout(()=>U(!1),2e3)},D=async()=>{fe(!0),Oe("");try{await a(ce)}catch(M){const B=M;B.code==="auth/wrong-password"||B.code==="auth/invalid-credential"?Oe("Incorrect password."):Oe("Failed to delete account. Please try again."),fe(!1)}};return _.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:_.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-8 w-full max-w-md shadow-2xl",children:[_.jsxs("div",{className:"flex items-center justify-between mb-8",children:[_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("div",{className:"p-2 bg-gray-800 rounded-lg",children:_.jsx(aS,{className:"w-5 h-5 text-gray-400"})}),_.jsxs("div",{children:[_.jsx("h2",{className:"font-semibold text-gray-100",children:"API Settings"}),_.jsx("p",{className:"text-xs text-gray-500",children:"Configure your AI provider keys"})]})]}),_.jsx("button",{onClick:t,className:"p-1.5 text-gray-500 hover:text-gray-300 hover:bg-gray-800 rounded-lg transition",title:"Close",children:_.jsx(Sa,{className:"w-4 h-4"})})]}),_.jsxs("div",{className:"space-y-6",children:[_.jsxs("div",{children:[_.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Perplexity API Key",e.perplexityKey&&_.jsx("span",{className:"ml-2 text-xs text-emerald-400",children:" configured"})]}),_.jsxs("div",{className:"relative",children:[_.jsx("input",{type:T?"text":"password",value:c,onChange:M=>p(M.target.value),placeholder:"pplx-...",className:"w-full bg-gray-800 border border-gray-700 rounded-xl px-4 py-3 pr-10 text-gray-100 placeholder-gray-600 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition font-mono text-sm"}),_.jsx("button",{type:"button",onClick:()=>b(M=>!M),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-300 transition",children:T?_.jsx(B_,{className:"w-4 h-4"}):_.jsx(H_,{className:"w-4 h-4"})})]}),_.jsx("p",{className:"mt-1.5 text-xs text-gray-500",children:"Used for travel search and AI chat."}),_.jsxs("div",{className:"flex items-center gap-3 mt-1.5",children:[_.jsxs("a",{href:"https://www.perplexity.ai/settings/api",target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-1 text-xs text-indigo-400 hover:text-indigo-300 transition",children:[_.jsx(U_,{className:"w-3 h-3"}),"Get your key"]}),e.perplexityKey&&_.jsxs("a",{href:"https://www.perplexity.ai/account/api/group",target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-1 text-xs text-amber-400 hover:text-amber-300 transition",children:[_.jsx(q_,{className:"w-3 h-3"}),"Check balance"]})]})]}),_.jsxs("div",{children:[_.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Anthropic API Key",e.anthropicKey&&_.jsx("span",{className:"ml-2 text-xs text-emerald-400",children:" configured"})]}),_.jsxs("div",{className:"relative",children:[_.jsx("input",{type:k?"text":"password",value:y,onChange:M=>w(M.target.value),placeholder:"sk-ant-...",className:"w-full bg-gray-800 border border-gray-700 rounded-xl px-4 py-3 pr-10 text-gray-100 placeholder-gray-600 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition font-mono text-sm"}),_.jsx("button",{type:"button",onClick:()=>N(M=>!M),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-300 transition",children:k?_.jsx(B_,{className:"w-4 h-4"}):_.jsx(H_,{className:"w-4 h-4"})})]}),_.jsx("p",{className:"mt-1.5 text-xs text-gray-500",children:"Used for trip generation, itinerary, packing lists, and AI chat."}),_.jsxs("div",{className:"flex items-center gap-3 mt-1.5",children:[_.jsxs("a",{href:"https://console.anthropic.com/settings/keys",target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-1 text-xs text-indigo-400 hover:text-indigo-300 transition",children:[_.jsx(U_,{className:"w-3 h-3"}),"Get your key"]}),e.anthropicKey&&_.jsxs("a",{href:"https://console.anthropic.com/settings/billing",target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-1 text-xs text-amber-400 hover:text-amber-300 transition",children:[_.jsx(q_,{className:"w-3 h-3"}),"Check balance"]})]})]}),_.jsx("button",{onClick:F,className:`w-full py-3 rounded-xl font-medium transition shadow-lg shadow-indigo-900/30 ${V?"bg-emerald-600 hover:bg-emerald-500":"bg-indigo-600 hover:bg-indigo-500"}`,children:V?" Saved":"Save Keys"})]}),_.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-800",children:[_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsxs("button",{onClick:o,className:"flex items-center gap-2 text-sm text-gray-400 hover:text-gray-200 transition",children:[_.jsx(lS,{className:"w-4 h-4"}),"Sign out"]}),_.jsx("button",{onClick:()=>te(!0),className:"text-sm text-red-500 hover:text-red-400 transition",children:"Delete account"})]}),q&&_.jsxs("div",{className:"mt-4 p-4 bg-red-500/10 border border-red-500/20 rounded-xl space-y-3",children:[_.jsx("p",{className:"text-sm text-red-300 leading-relaxed",children:"This will permanently delete all your trips, chat history, and your account. Enter your password to confirm."}),_.jsx("input",{type:"password",value:ce,onChange:M=>{ge(M.target.value),Oe("")},placeholder:"Your password",className:"w-full bg-gray-800 border border-gray-700 rounded-xl px-4 py-2.5 text-gray-100 placeholder-gray-600 text-sm focus:outline-none focus:border-red-500 transition"}),Te&&_.jsx("p",{className:"text-xs text-red-400",children:Te}),_.jsxs("div",{className:"flex gap-2",children:[_.jsx("button",{onClick:()=>{te(!1),ge(""),Oe("")},className:"flex-1 py-2 text-sm text-gray-400 hover:text-gray-200 bg-gray-800 hover:bg-gray-700 rounded-xl transition",children:"Cancel"}),_.jsxs("button",{onClick:D,disabled:!ce||be,className:"flex-1 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-500 disabled:opacity-40 rounded-xl transition flex items-center justify-center gap-1.5",children:[be&&_.jsx(Wn,{className:"w-3.5 h-3.5 animate-spin"}),"Delete everything"]})]})]})]})]})})}function Yy({trip:r,onClick:e}){const t=new Date(r.startDate),o=new Date(r.endDate),a=Math.ceil((o.getTime()-t.getTime())/864e5)+1,p={planning:{bg:"bg-amber-500/20",text:"text-amber-300",label:"Planning"},upcoming:{bg:"bg-blue-500/20",text:"text-blue-300",label:"Upcoming"},completed:{bg:"bg-emerald-500/20",text:"text-emerald-300",label:"Completed"}}[r.status];return _.jsxs("button",{onClick:e,className:"group w-full text-left rounded-2xl overflow-hidden border border-gray-800 hover:border-gray-600 transition-all duration-200 hover:-translate-y-0.5 hover:shadow-xl hover:shadow-black/40 bg-gray-900",children:[_.jsxs("div",{className:`h-32 bg-gradient-to-br ${r.coverGradient} relative overflow-hidden`,children:[_.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/40 to-transparent"}),_.jsx("div",{className:"absolute bottom-3 left-4 text-4xl drop-shadow-lg",children:r.emoji}),_.jsx("div",{className:"absolute top-3 right-3",children:_.jsx("span",{className:`text-xs px-2.5 py-1 rounded-full font-medium backdrop-blur-sm ${p.bg} ${p.text}`,children:p.label})})]}),_.jsxs("div",{className:"p-4",children:[_.jsx("h3",{className:"font-semibold text-gray-100 group-hover:text-white truncate leading-tight",children:r.name}),_.jsxs("div",{className:"flex items-center gap-1.5 mt-1",children:[_.jsx(qh,{className:"w-3.5 h-3.5 text-gray-500 shrink-0"}),_.jsx("span",{className:"text-sm text-gray-400 truncate",children:r.destination})]}),_.jsxs("div",{className:"flex items-center justify-between mt-3 text-xs text-gray-500",children:[_.jsxs("span",{className:"flex items-center gap-1",children:[_.jsx(kp,{className:"w-3.5 h-3.5"}),t.toLocaleDateString("en",{month:"short",day:"numeric"})]}),_.jsxs("span",{className:"flex items-center gap-1",children:[_.jsx(Np,{className:"w-3.5 h-3.5"}),r.travelers]}),_.jsxs("span",{className:"font-medium text-gray-400",children:[a,"d"]})]})]})]})}function pC({trips:r,onNewTrip:e,onSelectTrip:t,onSettingsClick:o,hasAiKey:a}){const c=r.filter(y=>y.status!=="completed"),p=r.filter(y=>y.status==="completed");return _.jsxs("div",{className:"min-h-screen flex flex-col",children:[_.jsx("header",{className:"border-b border-gray-800 bg-gray-950/90 backdrop-blur-sm sticky top-0 z-10",children:_.jsxs("div",{className:"max-w-6xl mx-auto px-4 md:px-6 py-4 flex items-center justify-between",children:[_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("div",{className:"p-2 bg-indigo-500/20 rounded-xl border border-indigo-500/20",children:_.jsx(Ap,{className:"w-5 h-5 text-indigo-400"})}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("span",{className:"text-xl font-bold tracking-tight",children:"Wandr"}),_.jsx("span",{className:"text-xs text-indigo-400 bg-indigo-500/10 border border-indigo-500/20 px-2 py-0.5 rounded-full font-medium",children:"AI"})]})]}),_.jsxs("button",{onClick:o,className:"relative p-2 text-gray-400 hover:text-gray-200 hover:bg-gray-800 rounded-lg transition",title:"API Settings",children:[_.jsx(Na,{className:"w-5 h-5"}),!a&&_.jsx("span",{className:"absolute top-1.5 right-1.5 w-2 h-2 bg-amber-400 rounded-full"})]})]})}),_.jsxs("main",{className:"flex-1 max-w-6xl mx-auto w-full px-4 md:px-6 py-6 md:py-8",children:[_.jsxs("div",{className:"flex items-start justify-between mb-8",children:[_.jsxs("div",{children:[_.jsx("h1",{className:"text-3xl font-bold text-gray-100",children:"Your Trips"}),_.jsx("p",{className:"text-gray-400 mt-1",children:"Plan and explore the world with AI"})]}),_.jsxs("button",{onClick:e,className:"flex items-center gap-2 px-3 md:px-5 py-2.5 bg-indigo-600 hover:bg-indigo-500 rounded-xl font-medium transition shadow-lg shadow-indigo-900/30 shrink-0",children:[_.jsx(Qf,{className:"w-4 h-4"}),_.jsx("span",{className:"hidden sm:inline",children:"New Trip"})]})]}),!a&&_.jsxs("div",{className:"mb-6 flex items-center justify-between gap-3 bg-amber-500/10 border border-amber-500/20 rounded-xl px-4 py-3",children:[_.jsx("p",{className:"text-sm text-amber-300",children:"AI features are disabled  add your Perplexity API key to generate itineraries, packing lists, and use AI chat."}),_.jsx("button",{onClick:o,className:"shrink-0 text-xs font-medium text-amber-300 hover:text-amber-200 bg-amber-500/20 hover:bg-amber-500/30 px-3 py-1.5 rounded-lg transition",children:"Set up"})]}),r.length===0&&_.jsxs("div",{className:"flex flex-col items-center justify-center py-24 text-center",children:[_.jsx("div",{className:"w-20 h-20 bg-indigo-500/10 border border-indigo-500/20 rounded-3xl flex items-center justify-center mb-5",children:_.jsx(iS,{className:"w-10 h-10 text-indigo-400"})}),_.jsx("h2",{className:"text-xl font-semibold text-gray-200 mb-2",children:"No trips yet"}),_.jsx("p",{className:"text-gray-500 max-w-sm mb-6 leading-relaxed",children:"Create your first trip and let AI build a personalized itinerary, packing list, and travel guide."}),_.jsxs("button",{onClick:e,className:"flex items-center gap-2 px-6 py-3 bg-indigo-600 hover:bg-indigo-500 rounded-xl font-medium transition",children:[_.jsx(Qf,{className:"w-4 h-4"}),"Plan your first trip"]})]}),c.length>0&&_.jsxs("section",{className:"mb-8",children:[_.jsx("h2",{className:"text-xs font-semibold text-gray-500 uppercase tracking-widest mb-4",children:"Upcoming & Planning"}),_.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:c.map(y=>_.jsx(Yy,{trip:y,onClick:()=>t(y)},y.id))})]}),p.length>0&&_.jsxs("section",{children:[_.jsx("h2",{className:"text-xs font-semibold text-gray-500 uppercase tracking-widest mb-4",children:"Completed"}),_.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 opacity-70",children:p.map(y=>_.jsx(Yy,{trip:y,onClick:()=>t(y)},y.id))})]})]})]})}const Jy=[{id:"culture",label:"Culture & History",emoji:""},{id:"food",label:"Food & Dining",emoji:""},{id:"nature",label:"Nature & Outdoors",emoji:""},{id:"adventure",label:"Adventure",emoji:""},{id:"beach",label:"Beach & Relaxation",emoji:""},{id:"shopping",label:"Shopping",emoji:""},{id:"nightlife",label:"Nightlife",emoji:""},{id:"photography",label:"Photography",emoji:""},{id:"family",label:"Family-Friendly",emoji:""},{id:"luxury",label:"Luxury",emoji:""},{id:"backpacking",label:"Budget Travel",emoji:""},{id:"wellness",label:"Wellness & Spa",emoji:""}],mC=[500,1500,3e3,5e3,1e4],ml=5,gC=4*1024*1024;function _C(){return Math.random().toString(36).slice(2,9)}function Xy(r){return r<1024?`${r} B`:r<1024*1024?`${(r/1024).toFixed(0)} KB`:`${(r/(1024*1024)).toFixed(1)} MB`}function yC({onBack:r,onCreate:e,hasAiKey:t,hasClaudeKey:o,onSettingsClick:a}){const[c,p]=ie.useState(1),[y,w]=ie.useState(!1),[T,b]=ie.useState(""),[k,N]=ie.useState(""),[V,U]=ie.useState(""),[q,te]=ie.useState(""),[ce,ge]=ie.useState(2),[Te,Oe]=ie.useState([]),[be,fe]=ie.useState(3e3),[F,D]=ie.useState("USD"),[M,B]=ie.useState(""),[j,R]=ie.useState([]),[A,ye]=ie.useState(!1),[Ke,pe]=ie.useState(""),Ve=ie.useRef(null),X=new Date().toISOString().split("T")[0],ke=k.trim()!==""&&V!==""&&q!==""&&new Date(q)>=new Date(V),oe=Te.length>0&&be>0,W=V&&q?Math.ceil((new Date(q).getTime()-new Date(V).getTime())/864e5)+1:null,ne=re=>Oe(qe=>qe.includes(re)?qe.filter(dt=>dt!==re):[...qe,re]),Me=["image/jpeg","image/png","image/webp","image/gif","application/pdf","text/plain","text/markdown"],Ne=".jpg,.jpeg,.png,.webp,.gif,.pdf,.txt,.md",Se=ie.useCallback(re=>{pe("");const qe=Array.from(re),dt=ml-j.length;if(dt<=0){pe(`Maximum ${ml} files.`);return}let gn=0;qe.slice(0,dt).forEach(jt=>{if(!Me.includes(jt.type)){pe(`"${jt.name}" is not a supported file type.`);return}if(jt.size>gC){pe(`"${jt.name}" exceeds the 4 MB limit.`);return}const Nn=new FileReader;Nn.onload=di=>{var ar;const fi=(ar=di.target)==null?void 0:ar.result,Kr=fi.split(",")[1],or={id:_C(),name:jt.name,mimeType:jt.type,dataBase64:Kr,previewUrl:jt.type.startsWith("image/")?fi:void 0,size:jt.size};R(bt=>[...bt,or])},Nn.readAsDataURL(jt),gn++}),qe.length>dt+gn&&pe(`Only the first ${dt} files were added (limit: ${ml}).`)},[j.length]),xe=re=>R(qe=>qe.filter(dt=>dt.id!==re)),Xe=async()=>{w(!0),b("");const re={text:M.trim()||void 0,files:j.length?j:void 0};try{await e({destination:k,startDate:V,endDate:q,travelers:ce,budget:be,currency:F,interests:Te,context:re.text||re.files?re:void 0})}catch(qe){b(qe instanceof Error?qe.message:"Failed to create trip"),w(!1)}};return _.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-950",children:[_.jsx("header",{className:"border-b border-gray-800 bg-gray-950",children:_.jsxs("div",{className:"max-w-2xl mx-auto px-6 py-4 flex items-center gap-4",children:[_.jsx("button",{onClick:r,className:"p-2 text-gray-400 hover:text-gray-200 hover:bg-gray-800 rounded-lg transition",children:_.jsx(Zf,{className:"w-5 h-5"})}),_.jsxs("div",{className:"flex-1",children:[_.jsx("h1",{className:"font-semibold text-gray-100",children:"New Trip"}),_.jsxs("p",{className:"text-xs text-gray-500",children:["Step ",c," of 4"]})]}),_.jsx("div",{className:"flex gap-1.5",children:[1,2,3,4].map(re=>_.jsx("div",{className:`h-1.5 w-8 rounded-full transition-colors duration-300 ${re<=c?"bg-indigo-500":"bg-gray-800"}`},re))})]})}),_.jsxs("main",{className:"flex-1 max-w-2xl mx-auto w-full px-6 py-10",children:[c===1&&_.jsxs("div",{className:"space-y-7",children:[_.jsxs("div",{children:[_.jsx("h2",{className:"text-2xl font-bold text-gray-100 mb-1",children:"Where are you going?"}),_.jsx("p",{className:"text-gray-400",children:"Tell us your destination and travel dates."})]}),_.jsxs("div",{children:[_.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[_.jsx(qh,{className:"w-4 h-4 inline mr-1.5 text-gray-500"}),"Destination"]}),_.jsx("input",{type:"text",value:k,onChange:re=>N(re.target.value),placeholder:"e.g. Tokyo, Japan",className:"w-full bg-gray-900 border border-gray-700 rounded-xl px-4 py-3 text-gray-100 placeholder-gray-600 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition",autoFocus:!0})]}),_.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[_.jsxs("div",{children:[_.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[_.jsx(kp,{className:"w-4 h-4 inline mr-1.5 text-gray-500"}),"Start Date"]}),_.jsx("input",{type:"date",value:V,min:X,onChange:re=>{U(re.target.value),q&&re.target.value>q&&te(re.target.value)},className:"w-full bg-gray-900 border border-gray-700 rounded-xl px-4 py-3 text-gray-100 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition [color-scheme:dark]"})]}),_.jsxs("div",{children:[_.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["End Date",W&&_.jsxs("span",{className:"ml-2 text-xs text-indigo-400",children:[W,"d"]})]}),_.jsx("input",{type:"date",value:q,min:V||X,onChange:re=>te(re.target.value),className:"w-full bg-gray-900 border border-gray-700 rounded-xl px-4 py-3 text-gray-100 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition [color-scheme:dark]"})]})]}),_.jsxs("div",{children:[_.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:[_.jsx(Np,{className:"w-4 h-4 inline mr-1.5 text-gray-500"}),"Travelers"]}),_.jsxs("div",{className:"flex items-center gap-4",children:[_.jsx("button",{type:"button",onClick:()=>ge(Math.max(1,ce-1)),className:"w-10 h-10 bg-gray-800 hover:bg-gray-700 rounded-xl flex items-center justify-center text-xl font-light text-gray-300 transition",children:""}),_.jsx("span",{className:"text-2xl font-bold w-8 text-center text-gray-100",children:ce}),_.jsx("button",{type:"button",onClick:()=>ge(ce+1),className:"w-10 h-10 bg-gray-800 hover:bg-gray-700 rounded-xl flex items-center justify-center text-xl font-light text-gray-300 transition",children:"+"}),_.jsx("span",{className:"text-gray-400 text-sm",children:ce===1?"traveler":"travelers"})]})]})]}),c===2&&_.jsxs("div",{className:"space-y-7",children:[_.jsxs("div",{children:[_.jsx("h2",{className:"text-2xl font-bold text-gray-100 mb-1",children:"What's your style?"}),_.jsx("p",{className:"text-gray-400",children:"Pick interests and set your total budget."})]}),_.jsxs("div",{children:[_.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:["Interests ",_.jsx("span",{className:"text-gray-500",children:"(select all that apply)"})]}),_.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:Jy.map(({id:re,label:qe,emoji:dt})=>{const gn=Te.includes(re);return _.jsxs("button",{type:"button",onClick:()=>ne(re),className:`flex items-center gap-2 px-3 py-2.5 rounded-xl text-sm border transition-all text-left ${gn?"bg-indigo-600/20 border-indigo-500/60 text-indigo-200":"bg-gray-900 border-gray-700 text-gray-300 hover:border-gray-500 hover:text-gray-200"}`,children:[_.jsx("span",{className:"text-base",children:dt}),_.jsx("span",{className:"flex-1 leading-tight",children:qe}),gn&&_.jsx($h,{className:"w-3.5 h-3.5 text-indigo-400 shrink-0"})]},re)})})]}),_.jsxs("div",{children:[_.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[_.jsx(Cp,{className:"w-4 h-4 inline mr-1.5 text-gray-500"}),"Total Budget (all travelers)"]}),_.jsxs("div",{className:"flex gap-2",children:[_.jsx("select",{value:F,onChange:re=>D(re.target.value),className:"bg-gray-900 border border-gray-700 rounded-xl px-3 py-3 text-gray-100 focus:outline-none focus:border-indigo-500 transition",children:["USD","EUR","GBP","JPY","AUD","CAD"].map(re=>_.jsx("option",{value:re,children:re},re))}),_.jsx("input",{type:"number",value:be,min:100,step:100,onChange:re=>fe(Number(re.target.value)),className:"flex-1 bg-gray-900 border border-gray-700 rounded-xl px-4 py-3 text-gray-100 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition"})]}),_.jsx("div",{className:"flex gap-2 mt-2.5",children:mC.map(re=>_.jsxs("button",{type:"button",onClick:()=>fe(re),className:`flex-1 py-1.5 text-xs rounded-lg border transition ${be===re?"bg-indigo-600/20 border-indigo-500/40 text-indigo-300":"bg-gray-900 border-gray-700 text-gray-500 hover:text-gray-300 hover:border-gray-600"}`,children:["$",(re/1e3).toFixed(0)+(re>=1e3?"k":"")]},re))})]})]}),c===3&&_.jsxs("div",{className:"space-y-6",children:[_.jsxs("div",{className:"flex items-start justify-between gap-2",children:[_.jsxs("div",{children:[_.jsx("h2",{className:"text-2xl font-bold text-gray-100 mb-1",children:"Anything to add?"}),_.jsx("p",{className:"text-gray-400 text-sm leading-relaxed",children:"Give the AI extra context for a more personalised trip. Fully optional."})]}),_.jsx("button",{onClick:()=>p(4),className:"shrink-0 text-xs text-gray-500 hover:text-gray-300 underline underline-offset-2 mt-1 transition",children:"Skip"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:" Notes"}),_.jsx("textarea",{value:M,onChange:re=>B(re.target.value),rows:4,placeholder:`e.g. "I'm celebrating my anniversary, I have a hotel booked near the Eiffel Tower, I'm vegetarian, I can't do early mornings"`,className:"w-full bg-gray-900 border border-gray-700 rounded-xl px-4 py-3 text-gray-100 placeholder-gray-600 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition resize-none text-sm leading-relaxed"}),_.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Saved with the trip  used by AI whenever you generate the itinerary or packing list."})]}),_.jsxs("div",{children:[_.jsxs("div",{className:"flex items-center justify-between mb-2",children:[_.jsxs("label",{className:"text-sm font-medium text-gray-300",children:[" Files & Images",_.jsxs("span",{className:"ml-2 text-xs font-normal text-gray-500",children:[j.length,"/",ml]})]}),!o&&_.jsx("span",{className:"text-xs text-amber-400 bg-amber-500/10 border border-amber-500/20 px-2 py-0.5 rounded-full",children:"Images & PDFs need Claude key"})]}),_.jsxs("div",{onDragOver:re=>{re.preventDefault(),ye(!0)},onDragLeave:()=>ye(!1),onDrop:re=>{re.preventDefault(),ye(!1),Se(re.dataTransfer.files)},onClick:()=>{var re;return(re=Ve.current)==null?void 0:re.click()},className:`border-2 border-dashed rounded-xl px-4 py-6 flex flex-col items-center gap-2 cursor-pointer transition ${A?"border-indigo-500 bg-indigo-500/5":j.length>=ml?"border-gray-800 opacity-50 cursor-not-allowed":"border-gray-700 hover:border-gray-500 hover:bg-gray-900/50"}`,children:[_.jsx("input",{ref:Ve,type:"file",multiple:!0,accept:Ne,onChange:re=>re.target.files&&Se(re.target.files),className:"hidden",disabled:j.length>=ml}),_.jsx(mS,{className:"w-6 h-6 text-gray-500"}),_.jsxs("p",{className:"text-sm text-gray-400 text-center",children:["Drop files here or ",_.jsx("span",{className:"text-indigo-400",children:"browse"})]}),_.jsx("p",{className:"text-xs text-gray-600 text-center",children:"JPG  PNG  WEBP  GIF  PDF  TXT  MD  Max 4 MB each"})]}),Ke&&_.jsx("p",{className:"text-xs text-red-400 mt-2",children:Ke}),j.length>0&&_.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:j.map(re=>re.previewUrl?_.jsxs("div",{className:"relative group",children:[_.jsx("img",{src:re.previewUrl,alt:re.name,className:"w-20 h-20 object-cover rounded-xl border border-gray-700"}),_.jsx("button",{onClick:()=>xe(re.id),className:"absolute -top-1.5 -right-1.5 w-5 h-5 bg-gray-900 border border-gray-600 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition hover:bg-red-500/20 hover:border-red-500/50",children:_.jsx(Sa,{className:"w-3 h-3 text-gray-300"})}),_.jsx("p",{className:"text-[10px] text-gray-500 mt-1 truncate w-20 text-center",children:Xy(re.size)})]},re.id):_.jsxs("div",{className:"flex items-center gap-2 bg-gray-900 border border-gray-700 rounded-xl px-3 py-2 max-w-[220px]",children:[re.mimeType==="application/pdf"?_.jsx(r0,{className:"w-4 h-4 text-red-400 shrink-0"}):_.jsx(oS,{className:"w-4 h-4 text-blue-400 shrink-0"}),_.jsxs("div",{className:"flex-1 min-w-0",children:[_.jsx("p",{className:"text-xs text-gray-300 truncate",children:re.name}),_.jsx("p",{className:"text-[10px] text-gray-600",children:Xy(re.size)})]}),_.jsx("button",{onClick:()=>xe(re.id),className:"shrink-0 p-0.5 text-gray-600 hover:text-gray-300 transition",children:_.jsx(Sa,{className:"w-3.5 h-3.5"})})]},re.id))}),j.some(re=>re.mimeType.startsWith("image/")||re.mimeType==="application/pdf")&&!o&&_.jsxs("div",{className:"mt-3 flex items-start gap-2 bg-amber-500/10 border border-amber-500/20 rounded-xl px-3 py-2.5",children:[_.jsx("span",{className:"text-base shrink-0",children:""}),_.jsx("p",{className:"text-xs text-amber-300 leading-relaxed",children:"Images and PDFs will be ignored  add a Claude API key in Settings to enable vision analysis. Text notes and .txt/.md files still work."})]})]})]}),c===4&&_.jsxs("div",{className:"space-y-6",children:[_.jsxs("div",{children:[_.jsx("h2",{className:"text-2xl font-bold text-gray-100 mb-1",children:"Ready to create!"}),_.jsx("p",{className:"text-gray-400",children:"AI will generate your trip name, description, and set up the foundation for your itinerary."})]}),_.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-6 space-y-5",children:[_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("div",{className:"p-2.5 bg-indigo-500/20 rounded-xl",children:_.jsx(Ap,{className:"w-5 h-5 text-indigo-400"})}),_.jsxs("div",{children:[_.jsx("p",{className:"font-semibold text-gray-100",children:k}),_.jsxs("p",{className:"text-sm text-gray-400",children:[new Date(V).toLocaleDateString("en",{month:"long",day:"numeric"})," "," ",new Date(q).toLocaleDateString("en",{month:"long",day:"numeric",year:"numeric"}),W&&_.jsxs("span",{className:"ml-1.5 text-gray-500",children:["(",W," days)"]})]})]})]}),_.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[_.jsxs("div",{className:"bg-gray-800/60 rounded-xl p-3",children:[_.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Travelers"}),_.jsxs("p",{className:"font-medium text-gray-200",children:[ce," ",ce===1?"person":"people"]})]}),_.jsxs("div",{className:"bg-gray-800/60 rounded-xl p-3",children:[_.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Budget"}),_.jsxs("p",{className:"font-medium text-gray-200",children:[F," ",be.toLocaleString()]})]})]}),_.jsxs("div",{children:[_.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Interests"}),_.jsx("div",{className:"flex flex-wrap gap-1.5",children:Te.map(re=>{const qe=Jy.find(dt=>dt.id===re);return qe?_.jsxs("span",{className:"text-xs bg-indigo-500/15 text-indigo-300 border border-indigo-500/25 px-2.5 py-1 rounded-full",children:[qe.emoji," ",qe.label]},re):null})})]}),(M||j.length>0)&&_.jsxs("div",{className:"border-t border-gray-800 pt-4",children:[_.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Context added"}),_.jsxs("div",{className:"space-y-1.5",children:[M&&_.jsxs("p",{className:"text-xs text-gray-400 bg-gray-800/60 rounded-lg px-3 py-2 line-clamp-2",children:[" ",M]}),j.length>0&&_.jsxs("p",{className:"text-xs text-gray-400 bg-gray-800/60 rounded-lg px-3 py-2",children:[" ",j.length," file",j.length!==1?"s":"",": ",j.map(re=>re.name).join(", ")]})]})]})]}),!t&&_.jsxs("div",{className:"flex items-center justify-between gap-3 bg-amber-500/10 border border-amber-500/20 rounded-xl px-4 py-3",children:[_.jsx("p",{className:"text-sm text-amber-300",children:"A Perplexity or Claude API key is required to create trips with AI."}),_.jsxs("button",{onClick:a,className:"shrink-0 flex items-center gap-1.5 text-xs font-medium text-amber-300 hover:text-amber-200 bg-amber-500/20 hover:bg-amber-500/30 px-3 py-1.5 rounded-lg transition",children:[_.jsx(Na,{className:"w-3.5 h-3.5"}),"Set up"]})]}),T&&_.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-4 text-sm text-red-300",children:[_.jsx("strong",{children:"Error:"})," ",T]}),_.jsx("button",{onClick:Xe,disabled:y||!t,className:"w-full py-4 bg-indigo-600 hover:bg-indigo-500 disabled:opacity-40 disabled:cursor-not-allowed rounded-xl font-semibold flex items-center justify-center gap-2.5 transition shadow-lg shadow-indigo-900/30 text-base",children:y?_.jsxs(_.Fragment,{children:[_.jsx(Wn,{className:"w-5 h-5 animate-spin"}),"AI is crafting your trip"]}):_.jsxs(_.Fragment,{children:[_.jsx(Il,{className:"w-5 h-5"}),"Create Trip with AI"]})})]}),c<4&&_.jsxs("div",{className:"flex justify-between mt-10",children:[c>1?_.jsxs("button",{onClick:()=>p(re=>re-1),className:"flex items-center gap-2 px-4 py-2.5 text-gray-400 hover:text-gray-200 hover:bg-gray-800 rounded-xl transition",children:[_.jsx(Zf,{className:"w-4 h-4"}),"Back"]}):_.jsx("div",{}),_.jsxs("button",{onClick:()=>p(re=>re+1),disabled:c===1?!ke:c===2?!oe:!1,className:"flex items-center gap-2 px-6 py-2.5 bg-indigo-600 hover:bg-indigo-500 disabled:opacity-40 disabled:cursor-not-allowed rounded-xl font-medium transition",children:[c===3?"Review":"Next",_.jsx(ZI,{className:"w-4 h-4"})]})]})]})]})}const vC=["accommodation","transport","food","activity","sightseeing","free"],ev={accommodation:{Icon:QI,cls:"text-purple-400 bg-purple-500/10 border-purple-500/20"},transport:{Icon:pS,cls:"text-blue-400 bg-blue-500/10 border-blue-500/20"},food:{Icon:_S,cls:"text-orange-400 bg-orange-500/10 border-orange-500/20"},activity:{Icon:fS,cls:"text-indigo-400 bg-indigo-500/10 border-indigo-500/20"},sightseeing:{Icon:qh,cls:"text-emerald-400 bg-emerald-500/10 border-emerald-500/20"},free:{Icon:rS,cls:"text-gray-400 bg-gray-500/10 border-gray-700"}};function xC(){return Math.random().toString(36).slice(2,9)}function tv({value:r,onChange:e,onSave:t,onCancel:o}){var c;const a="w-full bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-sm text-gray-100 placeholder-gray-600 focus:outline-none focus:border-indigo-500 transition";return _.jsxs("div",{className:"bg-gray-900 border border-indigo-500/40 rounded-xl p-4 space-y-3",children:[_.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[_.jsxs("div",{children:[_.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Time"}),_.jsx("input",{type:"time",value:r.time??"09:00",onChange:p=>e({...r,time:p.target.value}),className:a+" [color-scheme:dark]"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Category"}),_.jsx("select",{value:r.category??"activity",onChange:p=>e({...r,category:p.target.value}),className:a,children:vC.map(p=>_.jsx("option",{value:p,children:p},p))})]})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Activity name"}),_.jsx("input",{type:"text",value:r.title??"",onChange:p=>e({...r,title:p.target.value}),placeholder:"e.g. Visit the Eiffel Tower",className:a,autoFocus:!0})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Description"}),_.jsx("textarea",{value:r.description??"",onChange:p=>e({...r,description:p.target.value}),placeholder:"Brief description",rows:2,className:a+" resize-none"})]}),_.jsxs("div",{children:[_.jsxs("label",{className:"block text-xs text-gray-500 mb-1",children:[_.jsx(Cp,{className:"w-3 h-3 inline"})," Estimated cost per person"]}),_.jsx("input",{type:"number",min:0,step:5,value:r.estimatedCost??0,onChange:p=>e({...r,estimatedCost:Number(p.target.value)}),className:a})]}),_.jsxs("div",{className:"flex justify-end gap-2 pt-1",children:[_.jsxs("button",{onClick:o,className:"flex items-center gap-1.5 px-3 py-1.5 text-sm text-gray-400 hover:text-gray-200 hover:bg-gray-800 rounded-lg transition",children:[_.jsx(Sa,{className:"w-3.5 h-3.5"})," Cancel"]}),_.jsxs("button",{onClick:t,disabled:!((c=r.title)!=null&&c.trim()),className:"flex items-center gap-1.5 px-4 py-1.5 text-sm bg-indigo-600 hover:bg-indigo-500 disabled:opacity-40 rounded-lg font-medium transition",children:[_.jsx($h,{className:"w-3.5 h-3.5"})," Save"]})]})]})}function wC({trip:r,onGenerate:e,onUpdate:t,hasAiKey:o,onSettingsClick:a}){const[c,p]=ie.useState(!1),[y,w]=ie.useState(""),[T,b]=ie.useState(0),[k,N]=ie.useState(null),[V,U]=ie.useState({}),[q,te]=ie.useState(!1),[ce,ge]=ie.useState(""),Te=async()=>{p(!0),w(""),N(null);try{await e(r)}catch(pe){w(pe instanceof Error?pe.message:"Failed to generate itinerary")}finally{p(!1)}},Oe=(pe,Ve)=>{t({...r,itinerary:r.itinerary.map(X=>X.id===pe?Ve(X):X)})},be=pe=>{if(!k)return;const Ve=!r.itinerary.flatMap(X=>X.activities).find(X=>X.id===k);Oe(pe,X=>({...X,activities:Ve?[...X.activities,{id:k,time:"12:00",title:"",description:"",category:"activity",estimatedCost:0,...V}]:X.activities.map(ke=>ke.id===k?{...ke,...V}:ke)})),N(null),U({})},fe=(pe,Ve)=>{Oe(pe,X=>({...X,activities:X.activities.filter(ke=>ke.id!==Ve)}))},F=pe=>{const Ve=xC();N(Ve),U({time:"12:00",title:"",description:"",category:"activity",estimatedCost:0})},D=pe=>{ce.trim()&&Oe(pe,Ve=>({...Ve,title:ce.trim()})),te(!1)},M=r.itinerary.flatMap(pe=>pe.activities??[]),j=M.reduce((pe,Ve)=>pe+(Ve.estimatedCost||0),0)*r.travelers,R=r.budget-j,A=R<0,ye=Math.min(100,r.budget>0?j/r.budget*100:0);if(r.itinerary.length===0)return _.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[_.jsx("div",{className:"w-16 h-16 bg-indigo-500/10 border border-indigo-500/20 rounded-2xl flex items-center justify-center mb-5",children:_.jsx("span",{className:"text-3xl",children:""})}),_.jsx("h3",{className:"text-xl font-semibold text-gray-200 mb-2",children:"No itinerary yet"}),_.jsx("p",{className:"text-gray-500 max-w-sm mb-6 leading-relaxed",children:o?"AI will create a personalized day-by-day schedule based on your destination, interests, and travel dates.":"Add activities manually using the button below, or set up your Perplexity API key to generate one with AI."}),y&&_.jsx("div",{className:"mb-5 text-sm text-red-300 bg-red-500/10 border border-red-500/20 rounded-xl px-4 py-3 max-w-sm",children:y}),o?_.jsxs("button",{onClick:Te,disabled:c,className:"flex items-center gap-2 px-6 py-3 bg-indigo-600 hover:bg-indigo-500 disabled:opacity-60 rounded-xl font-medium transition",children:[c?_.jsx(Wn,{className:"w-5 h-5 animate-spin"}):_.jsx(Il,{className:"w-5 h-5"}),c?"Generating itinerary":"Generate Itinerary"]}):_.jsxs("button",{onClick:a,className:"flex items-center gap-2 px-5 py-2.5 bg-gray-800 hover:bg-gray-700 border border-gray-700 rounded-xl text-sm text-gray-300 transition",children:[_.jsx(Na,{className:"w-4 h-4"}),"Set up AI in Settings"]})]});const Ke=r.itinerary[T];return _.jsxs("div",{className:"space-y-4",children:[j>0&&_.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl px-5 py-4",children:[_.jsxs("div",{className:"flex items-center justify-between mb-2 text-sm",children:[_.jsx("span",{className:"text-gray-400 font-medium",children:"Provisional budget"}),_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsxs("span",{className:"text-gray-400",children:[_.jsxs("span",{className:"text-gray-200 font-semibold",children:[r.currency," ",j.toLocaleString()]}),_.jsxs("span",{className:"text-gray-600",children:[" / ",r.currency," ",r.budget.toLocaleString()]})]}),_.jsxs("span",{className:`text-xs font-medium px-2 py-0.5 rounded-full ${A?"bg-red-500/15 text-red-300 border border-red-500/25":"bg-emerald-500/15 text-emerald-300 border border-emerald-500/25"}`,children:[A?" ":" ",r.currency," ",Math.abs(R).toLocaleString()," ",A?"over":"left"]})]})]}),_.jsx("div",{className:"h-2 bg-gray-800 rounded-full overflow-hidden",children:_.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${A?"bg-red-500":ye>80?"bg-amber-500":"bg-emerald-500"}`,style:{width:`${ye}%`}})}),_.jsxs("p",{className:"text-xs text-gray-600 mt-1.5",children:["Based on ",M.filter(pe=>pe.estimatedCost>0).length," activities with cost estimates  ",r.travelers," traveler(s)"]})]}),_.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:gap-5",children:[_.jsxs("div",{className:"md:w-24 md:shrink-0",children:[_.jsxs("div",{className:"flex md:flex-col gap-1 overflow-x-auto md:overflow-visible scrollbar-hide pb-1 md:pb-0 md:space-y-1",children:[r.itinerary.map((pe,Ve)=>{const X=new Date(pe.date+"T12:00:00"),ke=Ve===T;return _.jsxs("button",{onClick:()=>{b(Ve),N(null)},className:`shrink-0 md:w-full text-center px-3 md:px-2 py-2 md:py-2.5 rounded-xl transition ${ke?"bg-indigo-600 text-white":"text-gray-400 hover:bg-gray-800 hover:text-gray-200"}`,children:[_.jsx("p",{className:"text-xs font-medium opacity-80",children:X.toLocaleDateString("en",{weekday:"short"})}),_.jsx("p",{className:"text-base md:text-xl font-bold leading-tight",children:X.getDate()}),_.jsx("p",{className:"text-xs opacity-60 hidden md:block",children:X.toLocaleDateString("en",{month:"short"})})]},pe.id)}),o?_.jsxs("button",{onClick:Te,disabled:c,className:"md:hidden shrink-0 flex flex-col items-center justify-center gap-0.5 px-3 py-2 text-gray-600 hover:text-gray-400 hover:bg-gray-800 rounded-xl transition",children:[c?_.jsx(Wn,{className:"w-3.5 h-3.5 animate-spin"}):_.jsx(Il,{className:"w-3.5 h-3.5"}),_.jsx("span",{className:"text-xs",children:"Regen"})]}):_.jsxs("button",{onClick:a,className:"md:hidden shrink-0 flex flex-col items-center justify-center gap-0.5 px-3 py-2 text-gray-700 hover:text-gray-500 hover:bg-gray-800 rounded-xl transition",title:"Set up AI key",children:[_.jsx(Ps,{className:"w-3.5 h-3.5"}),_.jsx("span",{className:"text-xs",children:"AI"})]})]}),o?_.jsxs("button",{onClick:Te,disabled:c,title:"Regenerate itinerary",className:"hidden md:flex w-full mt-1 p-2 text-xs text-gray-600 hover:text-gray-400 hover:bg-gray-800 rounded-xl transition items-center justify-center gap-1",children:[c?_.jsx(Wn,{className:"w-3.5 h-3.5 animate-spin"}):_.jsx(Il,{className:"w-3.5 h-3.5"}),"Regen"]}):_.jsxs("button",{onClick:a,title:"Set up Perplexity key to regenerate",className:"hidden md:flex w-full mt-1 p-2 text-xs text-gray-700 hover:text-gray-500 hover:bg-gray-800 rounded-xl transition items-center justify-center gap-1",children:[_.jsx(Ps,{className:"w-3.5 h-3.5"}),"Regen"]})]}),_.jsxs("div",{className:"flex-1 min-w-0",children:[_.jsxs("div",{className:"flex items-start justify-between mb-4",children:[_.jsxs("div",{className:"flex-1 min-w-0",children:[q?_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("input",{value:ce,onChange:pe=>ge(pe.target.value),onKeyDown:pe=>{pe.key==="Enter"&&D(Ke.id),pe.key==="Escape"&&te(!1)},className:"flex-1 bg-gray-800 border border-indigo-500 rounded-lg px-3 py-1.5 text-gray-100 text-base font-semibold focus:outline-none",autoFocus:!0}),_.jsx("button",{onClick:()=>D(Ke.id),className:"p-1.5 text-emerald-400 hover:bg-gray-800 rounded-lg transition",children:_.jsx($h,{className:"w-4 h-4"})}),_.jsx("button",{onClick:()=>te(!1),className:"p-1.5 text-gray-500 hover:bg-gray-800 rounded-lg transition",children:_.jsx(Sa,{className:"w-4 h-4"})})]}):_.jsxs("button",{onClick:()=>{te(!0),ge(Ke.title)},className:"group flex items-center gap-2 text-left",children:[_.jsx("h3",{className:"text-lg font-semibold text-gray-100 group-hover:text-white",children:Ke.title}),_.jsx(W_,{className:"w-3.5 h-3.5 text-gray-600 group-hover:text-gray-400 opacity-0 group-hover:opacity-100 transition"})]}),_.jsx("p",{className:"text-sm text-gray-400 mt-0.5",children:new Date(Ke.date+"T12:00:00").toLocaleDateString("en",{weekday:"long",month:"long",day:"numeric"})})]}),(()=>{const pe=(Ke.activities??[]).reduce((Ve,X)=>Ve+(X.estimatedCost||0),0)*r.travelers;return pe>0?_.jsxs("span",{className:"text-xs text-gray-400 bg-gray-800 px-3 py-1.5 rounded-lg shrink-0 ml-3 font-medium",children:[r.currency," ",pe.toLocaleString()," est."]}):null})()]}),_.jsxs("div",{className:"space-y-2.5",children:[(Ke.activities??[]).map(pe=>{const{Icon:Ve,cls:X}=ev[pe.category]??ev.free;return k===pe.id?_.jsx(tv,{value:V,onChange:U,onSave:()=>be(Ke.id),onCancel:()=>{N(null),U({})}},pe.id):_.jsxs("div",{className:"group flex gap-3 bg-gray-900 border border-gray-800 hover:border-gray-700 rounded-xl p-4 transition",children:[_.jsx("div",{className:`p-2 rounded-lg border shrink-0 ${X}`,children:_.jsx(Ve,{className:"w-4 h-4"})}),_.jsxs("div",{className:"flex-1 min-w-0",children:[_.jsxs("div",{className:"flex items-center gap-2 justify-between",children:[_.jsx("h4",{className:"font-medium text-gray-200 truncate",children:pe.title}),_.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[_.jsxs("span",{className:"text-xs text-gray-500 flex items-center gap-0.5 mr-1",children:[_.jsx(nS,{className:"w-3 h-3"}),pe.time]}),_.jsx("button",{onClick:()=>{N(pe.id),U({...pe})},className:"opacity-0 group-hover:opacity-100 p-1.5 text-gray-500 hover:text-indigo-400 hover:bg-gray-800 rounded-lg transition",title:"Edit activity",children:_.jsx(W_,{className:"w-3.5 h-3.5"})}),_.jsx("button",{onClick:()=>fe(Ke.id,pe.id),className:"opacity-0 group-hover:opacity-100 p-1.5 text-gray-500 hover:text-red-400 hover:bg-gray-800 rounded-lg transition",title:"Delete activity",children:_.jsx(Ku,{className:"w-3.5 h-3.5"})})]})]}),_.jsx("p",{className:"text-sm text-gray-400 mt-0.5 leading-relaxed",children:pe.description}),pe.estimatedCost>0&&_.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["~",r.currency,pe.estimatedCost," /person  ",r.currency,(pe.estimatedCost*r.travelers).toLocaleString()," total"]})]})]},pe.id)}),k&&!(Ke.activities??[]).find(pe=>pe.id===k)&&_.jsx(tv,{value:V,onChange:U,onSave:()=>be(Ke.id),onCancel:()=>{N(null),U({})}}),!k&&_.jsxs("button",{onClick:()=>F(Ke.id),className:"w-full flex items-center justify-center gap-2 py-3 border border-dashed border-gray-700 hover:border-indigo-500/50 hover:bg-indigo-500/5 rounded-xl text-sm text-gray-500 hover:text-indigo-400 transition",children:[_.jsx(Qf,{className:"w-4 h-4"}),"Add activity"]})]}),y&&_.jsx("div",{className:"mt-4 text-sm text-red-300 bg-red-500/10 border border-red-500/20 rounded-xl px-4 py-3",children:y})]})]})]})}const EC={Documents:"",Clothing:"",Toiletries:"",Electronics:"","Health & Safety":"",Activities:"",Miscellaneous:""};function TC({trip:r,onGenerate:e,onUpdate:t,hasAiKey:o,onSettingsClick:a}){const[c,p]=ie.useState(!1),[y,w]=ie.useState(""),T=async()=>{p(!0),w("");try{await e(r)}catch(ce){w(ce instanceof Error?ce.message:"Failed to generate packing list")}finally{p(!1)}},b=ce=>{t({...r,packingList:r.packingList.map(ge=>ge.id===ce?{...ge,packed:!ge.packed}:ge)})},k=()=>{t({...r,packingList:r.packingList.map(ce=>({...ce,packed:!0}))})},N=()=>{t({...r,packingList:r.packingList.map(ce=>({...ce,packed:!1}))})};if(r.packingList.length===0)return _.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[_.jsx("div",{className:"w-16 h-16 bg-indigo-500/10 border border-indigo-500/20 rounded-2xl flex items-center justify-center mb-5",children:_.jsx("span",{className:"text-3xl",children:""})}),_.jsx("h3",{className:"text-xl font-semibold text-gray-200 mb-2",children:"No packing list yet"}),_.jsx("p",{className:"text-gray-500 max-w-sm mb-6 leading-relaxed",children:o?"AI will create a smart, categorized packing list tailored to your destination, activities, and trip duration.":"Set up your Perplexity API key to generate a smart packing list with AI."}),y&&_.jsx("div",{className:"mb-5 text-sm text-red-300 bg-red-500/10 border border-red-500/20 rounded-xl px-4 py-3 max-w-sm",children:y}),o?_.jsxs("button",{onClick:T,disabled:c,className:"flex items-center gap-2 px-6 py-3 bg-indigo-600 hover:bg-indigo-500 disabled:opacity-60 rounded-xl font-medium transition",children:[c?_.jsx(Wn,{className:"w-5 h-5 animate-spin"}):_.jsx(Il,{className:"w-5 h-5"}),c?"Generating packing list":"Generate Packing List"]}):_.jsxs("button",{onClick:a,className:"flex items-center gap-2 px-5 py-2.5 bg-gray-800 hover:bg-gray-700 border border-gray-700 rounded-xl text-sm text-gray-300 transition",children:[_.jsx(Na,{className:"w-4 h-4"}),"Set up AI in Settings"]})]});const V=r.packingList.filter(ce=>ce.packed).length,U=r.packingList.length,q=U>0?Math.round(V/U*100):0,te=[...new Set(r.packingList.map(ce=>ce.category))];return _.jsxs("div",{className:"space-y-5",children:[_.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-5",children:[_.jsxs("div",{className:"flex items-center justify-between mb-3",children:[_.jsxs("div",{children:[_.jsx("h3",{className:"font-semibold text-gray-200",children:"Packing Progress"}),_.jsxs("p",{className:"text-sm text-gray-500 mt-0.5",children:[V," of ",U," items packed"]})]}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("button",{onClick:N,className:"text-xs text-gray-500 hover:text-gray-300 px-3 py-1.5 rounded-lg hover:bg-gray-800 transition",children:"Unpack all"}),_.jsx("button",{onClick:k,className:"text-xs text-indigo-400 hover:text-indigo-300 px-3 py-1.5 rounded-lg hover:bg-gray-800 transition",children:"Pack all"})]})]}),_.jsx("div",{className:"h-2 bg-gray-800 rounded-full overflow-hidden",children:_.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${q===100?"bg-emerald-500":"bg-indigo-500"}`,style:{width:`${q}%`}})}),_.jsxs("div",{className:"flex items-center justify-between mt-2",children:[_.jsxs("span",{className:"text-xs text-gray-500",children:[q,"% packed"]}),q===100&&_.jsx("span",{className:"text-xs text-emerald-400 font-medium",children:"All packed! "}),o?_.jsxs("button",{onClick:T,disabled:c,className:"text-xs text-gray-500 hover:text-indigo-400 flex items-center gap-1 transition",children:[c?_.jsx(Wn,{className:"w-3 h-3 animate-spin"}):_.jsx(Il,{className:"w-3 h-3"}),"Regenerate"]}):_.jsxs("button",{onClick:a,className:"text-xs text-gray-700 hover:text-gray-500 flex items-center gap-1 transition",title:"Set up Perplexity key to regenerate",children:[_.jsx(Ps,{className:"w-3 h-3"}),"Regenerate"]})]})]}),y&&_.jsx("div",{className:"text-sm text-red-300 bg-red-500/10 border border-red-500/20 rounded-xl px-4 py-3",children:y}),(()=>{const ce=r.packingList.filter(ge=>ge.essential&&!ge.packed);return ce.length>0?_.jsxs("div",{className:"flex items-start gap-3 bg-amber-500/10 border border-amber-500/20 rounded-xl p-4",children:[_.jsx(XI,{className:"w-4 h-4 text-amber-400 shrink-0 mt-0.5"}),_.jsxs("div",{children:[_.jsxs("p",{className:"text-sm font-medium text-amber-300",children:[ce.length," essential item",ce.length!==1?"s":""," not packed"]}),_.jsxs("p",{className:"text-xs text-amber-400/70 mt-0.5",children:[ce.slice(0,3).map(ge=>ge.name).join(", "),ce.length>3?` and ${ce.length-3} more`:""]})]})]}):null})(),te.map(ce=>{const ge=r.packingList.filter(be=>be.category===ce),Te=ge.filter(be=>be.packed).length,Oe=EC[ce]??"";return _.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl overflow-hidden",children:[_.jsxs("div",{className:"px-5 py-3 border-b border-gray-800 flex items-center justify-between",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("span",{className:"text-base",children:Oe}),_.jsx("h4",{className:"font-medium text-gray-300 text-sm",children:ce})]}),_.jsxs("span",{className:"text-xs text-gray-500",children:[Te,"/",ge.length]})]}),_.jsx("div",{className:"divide-y divide-gray-800/50",children:ge.map(be=>_.jsxs("button",{onClick:()=>b(be.id),className:"w-full flex items-center gap-3 px-5 py-3 hover:bg-gray-800/50 transition text-left",children:[_.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center shrink-0 transition-colors ${be.packed?"bg-indigo-600 border-indigo-600":"border-gray-600 hover:border-gray-400"}`,children:be.packed&&_.jsx($h,{className:"w-3 h-3 text-white",strokeWidth:3})}),_.jsx("span",{className:`flex-1 text-sm transition-colors ${be.packed?"text-gray-600 line-through":"text-gray-200"}`,children:be.name}),_.jsxs("div",{className:"flex items-center gap-1.5 shrink-0",children:[be.quantity>1&&_.jsxs("span",{className:"text-xs text-gray-500",children:["",be.quantity]}),be.essential&&!be.packed&&_.jsx("span",{className:"text-xs text-amber-400 bg-amber-500/10 border border-amber-500/20 px-1.5 py-0.5 rounded",children:"essential"})]})]},be.id))})]},ce)})]})}const IC=["What are the must-try local foods?","Best way to get around the city?","What should I know about local customs?","Hidden gems most tourists miss?","Best time of day to visit popular sites?","Safety tips for this destination?"],SC="image/jpeg,image/png,image/webp,image/gif,application/pdf,text/plain,text/markdown",PC=4*1024*1024;function vh(){return Math.random().toString(36).slice(2,9)}async function bC(r){return r.size>PC?null:new Promise(e=>{const t=new FileReader;t.onload=()=>{const o=t.result,a=o.split(",")[1];e({id:vh(),name:r.name,mimeType:r.type||"application/octet-stream",dataBase64:a,previewUrl:r.type.startsWith("image/")?o:void 0,size:r.size})},t.onerror=()=>e(null),t.readAsDataURL(r)})}function kC({trip:r,perplexityKey:e,anthropicKey:t,hasAiKey:o,onSettingsClick:a,getChatHistory:c,saveChatHistory:p}){const[y,w]=ie.useState([]),[T,b]=ie.useState(""),[k,N]=ie.useState(!1),[V,U]=ie.useState([]),q=ie.useRef(null),te=ie.useRef(null),ce=ie.useRef(null);ie.useEffect(()=>{let fe=!1;return c(r.id).then(F=>{fe||w(F)}),()=>{fe=!0}},[r.id]),ie.useEffect(()=>{var fe;(fe=q.current)==null||fe.scrollIntoView({behavior:"smooth"})},[y]);const ge=async fe=>{if(!fe)return;const F=3-V.length,D=Array.from(fe).slice(0,F),M=await Promise.all(D.map(bC));U(B=>[...B,...M.filter(j=>j!==null)])},Te=fe=>U(F=>F.filter(D=>D.id!==fe)),Oe=async fe=>{var j;if(!fe.trim()&&V.length===0||k)return;const F=V.length?`${fe.trim()}${fe.trim()?`
`:""} ${V.map(R=>R.name).join(", ")}`:fe.trim(),D={id:vh(),role:"user",content:F,timestamp:new Date().toISOString()},M=[...y,D];w(M),b("");const B=[...V];U([]),N(!0),(j=te.current)==null||j.focus();try{const R=y.map(pe=>({role:pe.role,content:pe.content})),A=await uC(fe.trim()||"(see attached file)",R,r,e,t,B.length?B:void 0),ye={id:vh(),role:"assistant",content:A,timestamp:new Date().toISOString()},Ke=[...M,ye];w(Ke),await p(r.id,Ke)}catch(R){const A=R instanceof Error?R.message:"Something went wrong",ye={id:vh(),role:"assistant",content:`Sorry, I ran into an error: ${A}`,timestamp:new Date().toISOString()},Ke=[...M,ye];w(Ke),await p(r.id,Ke)}finally{N(!1)}},be=async()=>{confirm("Clear chat history?")&&(w([]),await p(r.id,[]))};return o?_.jsxs("div",{className:"flex flex-col",style:{height:"calc(100dvh - 300px)",minHeight:"280px"},children:[_.jsxs("div",{className:"flex items-center justify-between pb-3 mb-3 border-b border-gray-800",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("div",{className:"w-7 h-7 bg-indigo-500/20 rounded-lg flex items-center justify-center",children:_.jsx(th,{className:"w-4 h-4 text-indigo-400"})}),_.jsx("span",{className:"text-sm font-medium text-gray-300",children:"AI Travel Assistant"}),_.jsx("span",{className:"text-xs text-emerald-400 bg-emerald-500/10 px-2 py-0.5 rounded-full",children:"Online"}),t&&_.jsx("span",{className:"text-xs text-indigo-300 bg-indigo-500/10 px-2 py-0.5 rounded-full",children:"Vision"})]}),y.length>0&&_.jsx("button",{onClick:be,className:"p-1.5 text-gray-600 hover:text-gray-400 hover:bg-gray-800 rounded-lg transition",title:"Clear chat",children:_.jsx(Ku,{className:"w-4 h-4"})})]}),_.jsxs("div",{className:"flex-1 overflow-y-auto space-y-4",children:[y.length===0&&_.jsxs("div",{className:"flex flex-col items-center text-center pt-6 pb-4",children:[_.jsx("div",{className:"w-14 h-14 bg-indigo-500/10 border border-indigo-500/20 rounded-2xl flex items-center justify-center mb-3",children:_.jsx(th,{className:"w-7 h-7 text-indigo-400"})}),_.jsxs("p",{className:"font-medium text-gray-300 mb-1",children:["Ask me anything about ",r.destination]}),_.jsxs("p",{className:"text-sm text-gray-500 mb-5 max-w-sm",children:["I know your trip details, interests, and budget.",t?" Attach images or files for visual help.":" Let me help you plan the perfect experience."]}),_.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:IC.map(fe=>_.jsx("button",{onClick:()=>Oe(fe),className:"text-sm text-indigo-300 bg-indigo-500/10 hover:bg-indigo-500/20 border border-indigo-500/20 hover:border-indigo-500/40 px-3 py-1.5 rounded-full transition",children:fe},fe))})]}),y.map(fe=>_.jsxs("div",{className:`flex gap-2.5 ${fe.role==="user"?"flex-row-reverse":"flex-row"}`,children:[_.jsx("div",{className:`w-7 h-7 rounded-lg flex items-center justify-center shrink-0 mt-0.5 ${fe.role==="assistant"?"bg-indigo-500/20":"bg-gray-700"}`,children:fe.role==="assistant"?_.jsx(th,{className:"w-3.5 h-3.5 text-indigo-400"}):_.jsx(gS,{className:"w-3.5 h-3.5 text-gray-300"})}),_.jsx("div",{className:`max-w-[78%] rounded-2xl px-4 py-3 text-sm leading-relaxed whitespace-pre-wrap ${fe.role==="user"?"bg-indigo-600 text-white rounded-tr-sm":"bg-gray-900 border border-gray-800 text-gray-200 rounded-tl-sm"}`,children:fe.content})]},fe.id)),k&&_.jsxs("div",{className:"flex gap-2.5",children:[_.jsx("div",{className:"w-7 h-7 rounded-lg bg-indigo-500/20 flex items-center justify-center shrink-0",children:_.jsx(th,{className:"w-3.5 h-3.5 text-indigo-400"})}),_.jsx("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl rounded-tl-sm px-4 py-3",children:_.jsxs("div",{className:"flex gap-1 items-center h-4",children:[_.jsx("span",{className:"w-1.5 h-1.5 bg-gray-500 rounded-full animate-bounce [animation-delay:0ms]"}),_.jsx("span",{className:"w-1.5 h-1.5 bg-gray-500 rounded-full animate-bounce [animation-delay:150ms]"}),_.jsx("span",{className:"w-1.5 h-1.5 bg-gray-500 rounded-full animate-bounce [animation-delay:300ms]"})]})})]}),_.jsx("div",{ref:q})]}),V.length>0&&_.jsx("div",{className:"flex gap-2 pt-3 flex-wrap",children:V.map(fe=>_.jsxs("div",{className:"relative group",children:[fe.previewUrl?_.jsx("img",{src:fe.previewUrl,alt:fe.name,className:"w-14 h-14 rounded-lg object-cover border border-gray-700"}):_.jsxs("div",{className:"w-14 h-14 rounded-lg border border-gray-700 bg-gray-800 flex flex-col items-center justify-center gap-1 px-1",children:[_.jsx(r0,{className:"w-5 h-5 text-gray-400 shrink-0"}),_.jsx("span",{className:"text-[9px] text-gray-500 truncate w-full text-center",children:fe.name})]}),_.jsx("button",{onClick:()=>Te(fe.id),className:"absolute -top-1.5 -right-1.5 w-4 h-4 bg-gray-900 border border-gray-600 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition",children:_.jsx(Sa,{className:"w-2.5 h-2.5 text-gray-300"})})]},fe.id))}),_.jsxs("div",{className:"pt-3 border-t border-gray-800 mt-3",children:[_.jsx("input",{ref:ce,type:"file",accept:SC,multiple:!0,className:"hidden",onChange:fe=>ge(fe.target.files),onClick:fe=>{fe.target.value=""}}),_.jsxs("form",{onSubmit:fe=>{fe.preventDefault(),Oe(T)},className:"flex gap-2",children:[t&&_.jsx("button",{type:"button",onClick:()=>{var fe;return(fe=ce.current)==null?void 0:fe.click()},disabled:k||V.length>=3,title:"Attach image or file (max 3)",className:"p-3 text-gray-500 hover:text-indigo-400 hover:bg-gray-800 disabled:opacity-30 disabled:cursor-not-allowed rounded-xl transition shrink-0",children:_.jsx(cS,{className:"w-5 h-5"})}),_.jsx("input",{ref:te,value:T,onChange:fe=>b(fe.target.value),placeholder:V.length?"Add a message or just send the file":`Ask about ${r.destination}...`,disabled:k,className:"flex-1 bg-gray-900 border border-gray-700 rounded-xl px-4 py-3 text-gray-100 placeholder-gray-600 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition disabled:opacity-50 text-sm"}),_.jsx("button",{type:"submit",disabled:!T.trim()&&V.length===0||k,className:"p-3 bg-indigo-600 hover:bg-indigo-500 disabled:opacity-40 disabled:cursor-not-allowed rounded-xl transition shrink-0",children:k?_.jsx(Wn,{className:"w-5 h-5 animate-spin"}):_.jsx(dS,{className:"w-5 h-5"})})]})]})]}):_.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[_.jsx("div",{className:"w-16 h-16 bg-gray-800 border border-gray-700 rounded-2xl flex items-center justify-center mb-5",children:_.jsx(Ps,{className:"w-7 h-7 text-gray-500"})}),_.jsx("h3",{className:"text-lg font-semibold text-gray-400 mb-2",children:"AI Chat unavailable"}),_.jsxs("p",{className:"text-gray-600 max-w-sm mb-6 leading-relaxed text-sm",children:["Add your Perplexity API key to chat with an AI assistant about your trip to ",r.destination,"."]}),_.jsxs("button",{onClick:a,className:"flex items-center gap-2 px-5 py-2.5 bg-gray-800 hover:bg-gray-700 border border-gray-700 rounded-xl text-sm text-gray-300 transition",children:[_.jsx(Na,{className:"w-4 h-4"}),"Set up in Settings"]})]})}function Zx(r,e){const t=ie.useRef(e);ie.useEffect(function(){e!==t.current&&r.attributionControl!=null&&(t.current!=null&&r.attributionControl.removeAttribution(t.current),e!=null&&r.attributionControl.addAttribution(e)),t.current=e},[r,e])}var CC=sv();const AC=1;function NC(r){return Object.freeze({__version:AC,map:r})}function RC(r,e){return Object.freeze({...r,...e})}const Qx=ie.createContext(null),Yx=Qx.Provider;function vm(){const r=ie.useContext(Qx);if(r==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return r}function LC(r){function e(t,o){const{instance:a,context:c}=r(t).current;return ie.useImperativeHandle(o,()=>a),t.children==null?null:Ff.createElement(Yx,{value:c},t.children)}return ie.forwardRef(e)}function DC(r){function e(t,o){const[a,c]=ie.useState(!1),{instance:p}=r(t,c).current;ie.useImperativeHandle(o,()=>p),ie.useEffect(function(){a&&p.update()},[p,a,t.children]);const y=p._contentNode;return y?CC.createPortal(t.children,y):null}return ie.forwardRef(e)}function MC(r){function e(t,o){const{instance:a}=r(t).current;return ie.useImperativeHandle(o,()=>a),null}return ie.forwardRef(e)}function Jx(r,e){const t=ie.useRef();ie.useEffect(function(){return e!=null&&r.instance.on(e),t.current=e,function(){t.current!=null&&r.instance.off(t.current),t.current=null}},[r,e])}function xm(r,e){const t=r.pane??e.pane;return t?{...r,pane:t}:r}function OC(r,e){return function(o,a){const c=vm(),p=r(xm(o,c),c);return Zx(c.map,o.attribution),Jx(p.current,o.eventHandlers),e(p.current,c,o,a),p}}var Su={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var jC=Su.exports,nv;function VC(){return nv||(nv=1,(function(r,e){(function(t,o){o(e)})(jC,(function(t){var o="1.9.4";function a(i){var l,d,m,E;for(d=1,m=arguments.length;d<m;d++){E=arguments[d];for(l in E)i[l]=E[l]}return i}var c=Object.create||(function(){function i(){}return function(l){return i.prototype=l,new i}})();function p(i,l){var d=Array.prototype.slice;if(i.bind)return i.bind.apply(i,d.call(arguments,1));var m=d.call(arguments,2);return function(){return i.apply(l,m.length?m.concat(d.call(arguments)):arguments)}}var y=0;function w(i){return"_leaflet_id"in i||(i._leaflet_id=++y),i._leaflet_id}function T(i,l,d){var m,E,P,z;return z=function(){m=!1,E&&(P.apply(d,E),E=!1)},P=function(){m?E=arguments:(i.apply(d,arguments),setTimeout(z,l),m=!0)},P}function b(i,l,d){var m=l[1],E=l[0],P=m-E;return i===m&&d?i:((i-E)%P+P)%P+E}function k(){return!1}function N(i,l){if(l===!1)return i;var d=Math.pow(10,l===void 0?6:l);return Math.round(i*d)/d}function V(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}function U(i){return V(i).split(/\s+/)}function q(i,l){Object.prototype.hasOwnProperty.call(i,"options")||(i.options=i.options?c(i.options):{});for(var d in l)i.options[d]=l[d];return i.options}function te(i,l,d){var m=[];for(var E in i)m.push(encodeURIComponent(d?E.toUpperCase():E)+"="+encodeURIComponent(i[E]));return(!l||l.indexOf("?")===-1?"?":"&")+m.join("&")}var ce=/\{ *([\w_ -]+) *\}/g;function ge(i,l){return i.replace(ce,function(d,m){var E=l[m];if(E===void 0)throw new Error("No value provided for variable "+d);return typeof E=="function"&&(E=E(l)),E})}var Te=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"};function Oe(i,l){for(var d=0;d<i.length;d++)if(i[d]===l)return d;return-1}var be="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function fe(i){return window["webkit"+i]||window["moz"+i]||window["ms"+i]}var F=0;function D(i){var l=+new Date,d=Math.max(0,16-(l-F));return F=l+d,window.setTimeout(i,d)}var M=window.requestAnimationFrame||fe("RequestAnimationFrame")||D,B=window.cancelAnimationFrame||fe("CancelAnimationFrame")||fe("CancelRequestAnimationFrame")||function(i){window.clearTimeout(i)};function j(i,l,d){if(d&&M===D)i.call(l);else return M.call(window,p(i,l))}function R(i){i&&B.call(window,i)}var A={__proto__:null,extend:a,create:c,bind:p,get lastId(){return y},stamp:w,throttle:T,wrapNum:b,falseFn:k,formatNum:N,trim:V,splitWords:U,setOptions:q,getParamString:te,template:ge,isArray:Te,indexOf:Oe,emptyImageUrl:be,requestFn:M,cancelFn:B,requestAnimFrame:j,cancelAnimFrame:R};function ye(){}ye.extend=function(i){var l=function(){q(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},d=l.__super__=this.prototype,m=c(d);m.constructor=l,l.prototype=m;for(var E in this)Object.prototype.hasOwnProperty.call(this,E)&&E!=="prototype"&&E!=="__super__"&&(l[E]=this[E]);return i.statics&&a(l,i.statics),i.includes&&(Ke(i.includes),a.apply(null,[m].concat(i.includes))),a(m,i),delete m.statics,delete m.includes,m.options&&(m.options=d.options?c(d.options):{},a(m.options,i.options)),m._initHooks=[],m.callInitHooks=function(){if(!this._initHooksCalled){d.callInitHooks&&d.callInitHooks.call(this),this._initHooksCalled=!0;for(var P=0,z=m._initHooks.length;P<z;P++)m._initHooks[P].call(this)}},l},ye.include=function(i){var l=this.prototype.options;return a(this.prototype,i),i.options&&(this.prototype.options=l,this.mergeOptions(i.options)),this},ye.mergeOptions=function(i){return a(this.prototype.options,i),this},ye.addInitHook=function(i){var l=Array.prototype.slice.call(arguments,1),d=typeof i=="function"?i:function(){this[i].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(d),this};function Ke(i){if(!(typeof L>"u"||!L||!L.Mixin)){i=Te(i)?i:[i];for(var l=0;l<i.length;l++)i[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var pe={on:function(i,l,d){if(typeof i=="object")for(var m in i)this._on(m,i[m],l);else{i=U(i);for(var E=0,P=i.length;E<P;E++)this._on(i[E],l,d)}return this},off:function(i,l,d){if(!arguments.length)delete this._events;else if(typeof i=="object")for(var m in i)this._off(m,i[m],l);else{i=U(i);for(var E=arguments.length===1,P=0,z=i.length;P<z;P++)E?this._off(i[P]):this._off(i[P],l,d)}return this},_on:function(i,l,d,m){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(i,l,d)===!1){d===this&&(d=void 0);var E={fn:l,ctx:d};m&&(E.once=!0),this._events=this._events||{},this._events[i]=this._events[i]||[],this._events[i].push(E)}},_off:function(i,l,d){var m,E,P;if(this._events&&(m=this._events[i],!!m)){if(arguments.length===1){if(this._firingCount)for(E=0,P=m.length;E<P;E++)m[E].fn=k;delete this._events[i];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var z=this._listens(i,l,d);if(z!==!1){var K=m[z];this._firingCount&&(K.fn=k,this._events[i]=m=m.slice()),m.splice(z,1)}}},fire:function(i,l,d){if(!this.listens(i,d))return this;var m=a({},l,{type:i,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var E=this._events[i];if(E){this._firingCount=this._firingCount+1||1;for(var P=0,z=E.length;P<z;P++){var K=E[P],J=K.fn;K.once&&this.off(i,J,K.ctx),J.call(K.ctx||this,m)}this._firingCount--}}return d&&this._propagateEvent(m),this},listens:function(i,l,d,m){typeof i!="string"&&console.warn('"string" type argument expected');var E=l;typeof l!="function"&&(m=!!l,E=void 0,d=void 0);var P=this._events&&this._events[i];if(P&&P.length&&this._listens(i,E,d)!==!1)return!0;if(m){for(var z in this._eventParents)if(this._eventParents[z].listens(i,l,d,m))return!0}return!1},_listens:function(i,l,d){if(!this._events)return!1;var m=this._events[i]||[];if(!l)return!!m.length;d===this&&(d=void 0);for(var E=0,P=m.length;E<P;E++)if(m[E].fn===l&&m[E].ctx===d)return E;return!1},once:function(i,l,d){if(typeof i=="object")for(var m in i)this._on(m,i[m],l,!0);else{i=U(i);for(var E=0,P=i.length;E<P;E++)this._on(i[E],l,d,!0)}return this},addEventParent:function(i){return this._eventParents=this._eventParents||{},this._eventParents[w(i)]=i,this},removeEventParent:function(i){return this._eventParents&&delete this._eventParents[w(i)],this},_propagateEvent:function(i){for(var l in this._eventParents)this._eventParents[l].fire(i.type,a({layer:i.target,propagatedFrom:i.target},i),!0)}};pe.addEventListener=pe.on,pe.removeEventListener=pe.clearAllEventListeners=pe.off,pe.addOneTimeEventListener=pe.once,pe.fireEvent=pe.fire,pe.hasEventListeners=pe.listens;var Ve=ye.extend(pe);function X(i,l,d){this.x=d?Math.round(i):i,this.y=d?Math.round(l):l}var ke=Math.trunc||function(i){return i>0?Math.floor(i):Math.ceil(i)};X.prototype={clone:function(){return new X(this.x,this.y)},add:function(i){return this.clone()._add(oe(i))},_add:function(i){return this.x+=i.x,this.y+=i.y,this},subtract:function(i){return this.clone()._subtract(oe(i))},_subtract:function(i){return this.x-=i.x,this.y-=i.y,this},divideBy:function(i){return this.clone()._divideBy(i)},_divideBy:function(i){return this.x/=i,this.y/=i,this},multiplyBy:function(i){return this.clone()._multiplyBy(i)},_multiplyBy:function(i){return this.x*=i,this.y*=i,this},scaleBy:function(i){return new X(this.x*i.x,this.y*i.y)},unscaleBy:function(i){return new X(this.x/i.x,this.y/i.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ke(this.x),this.y=ke(this.y),this},distanceTo:function(i){i=oe(i);var l=i.x-this.x,d=i.y-this.y;return Math.sqrt(l*l+d*d)},equals:function(i){return i=oe(i),i.x===this.x&&i.y===this.y},contains:function(i){return i=oe(i),Math.abs(i.x)<=Math.abs(this.x)&&Math.abs(i.y)<=Math.abs(this.y)},toString:function(){return"Point("+N(this.x)+", "+N(this.y)+")"}};function oe(i,l,d){return i instanceof X?i:Te(i)?new X(i[0],i[1]):i==null?i:typeof i=="object"&&"x"in i&&"y"in i?new X(i.x,i.y):new X(i,l,d)}function W(i,l){if(i)for(var d=l?[i,l]:i,m=0,E=d.length;m<E;m++)this.extend(d[m])}W.prototype={extend:function(i){var l,d;if(!i)return this;if(i instanceof X||typeof i[0]=="number"||"x"in i)l=d=oe(i);else if(i=ne(i),l=i.min,d=i.max,!l||!d)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=d.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(d.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(d.y,this.max.y)),this},getCenter:function(i){return oe((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,i)},getBottomLeft:function(){return oe(this.min.x,this.max.y)},getTopRight:function(){return oe(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(i){var l,d;return typeof i[0]=="number"||i instanceof X?i=oe(i):i=ne(i),i instanceof W?(l=i.min,d=i.max):l=d=i,l.x>=this.min.x&&d.x<=this.max.x&&l.y>=this.min.y&&d.y<=this.max.y},intersects:function(i){i=ne(i);var l=this.min,d=this.max,m=i.min,E=i.max,P=E.x>=l.x&&m.x<=d.x,z=E.y>=l.y&&m.y<=d.y;return P&&z},overlaps:function(i){i=ne(i);var l=this.min,d=this.max,m=i.min,E=i.max,P=E.x>l.x&&m.x<d.x,z=E.y>l.y&&m.y<d.y;return P&&z},isValid:function(){return!!(this.min&&this.max)},pad:function(i){var l=this.min,d=this.max,m=Math.abs(l.x-d.x)*i,E=Math.abs(l.y-d.y)*i;return ne(oe(l.x-m,l.y-E),oe(d.x+m,d.y+E))},equals:function(i){return i?(i=ne(i),this.min.equals(i.getTopLeft())&&this.max.equals(i.getBottomRight())):!1}};function ne(i,l){return!i||i instanceof W?i:new W(i,l)}function Me(i,l){if(i)for(var d=l?[i,l]:i,m=0,E=d.length;m<E;m++)this.extend(d[m])}Me.prototype={extend:function(i){var l=this._southWest,d=this._northEast,m,E;if(i instanceof Se)m=i,E=i;else if(i instanceof Me){if(m=i._southWest,E=i._northEast,!m||!E)return this}else return i?this.extend(xe(i)||Ne(i)):this;return!l&&!d?(this._southWest=new Se(m.lat,m.lng),this._northEast=new Se(E.lat,E.lng)):(l.lat=Math.min(m.lat,l.lat),l.lng=Math.min(m.lng,l.lng),d.lat=Math.max(E.lat,d.lat),d.lng=Math.max(E.lng,d.lng)),this},pad:function(i){var l=this._southWest,d=this._northEast,m=Math.abs(l.lat-d.lat)*i,E=Math.abs(l.lng-d.lng)*i;return new Me(new Se(l.lat-m,l.lng-E),new Se(d.lat+m,d.lng+E))},getCenter:function(){return new Se((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Se(this.getNorth(),this.getWest())},getSouthEast:function(){return new Se(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(i){typeof i[0]=="number"||i instanceof Se||"lat"in i?i=xe(i):i=Ne(i);var l=this._southWest,d=this._northEast,m,E;return i instanceof Me?(m=i.getSouthWest(),E=i.getNorthEast()):m=E=i,m.lat>=l.lat&&E.lat<=d.lat&&m.lng>=l.lng&&E.lng<=d.lng},intersects:function(i){i=Ne(i);var l=this._southWest,d=this._northEast,m=i.getSouthWest(),E=i.getNorthEast(),P=E.lat>=l.lat&&m.lat<=d.lat,z=E.lng>=l.lng&&m.lng<=d.lng;return P&&z},overlaps:function(i){i=Ne(i);var l=this._southWest,d=this._northEast,m=i.getSouthWest(),E=i.getNorthEast(),P=E.lat>l.lat&&m.lat<d.lat,z=E.lng>l.lng&&m.lng<d.lng;return P&&z},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(i,l){return i?(i=Ne(i),this._southWest.equals(i.getSouthWest(),l)&&this._northEast.equals(i.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Ne(i,l){return i instanceof Me?i:new Me(i,l)}function Se(i,l,d){if(isNaN(i)||isNaN(l))throw new Error("Invalid LatLng object: ("+i+", "+l+")");this.lat=+i,this.lng=+l,d!==void 0&&(this.alt=+d)}Se.prototype={equals:function(i,l){if(!i)return!1;i=xe(i);var d=Math.max(Math.abs(this.lat-i.lat),Math.abs(this.lng-i.lng));return d<=(l===void 0?1e-9:l)},toString:function(i){return"LatLng("+N(this.lat,i)+", "+N(this.lng,i)+")"},distanceTo:function(i){return re.distance(this,xe(i))},wrap:function(){return re.wrapLatLng(this)},toBounds:function(i){var l=180*i/40075017,d=l/Math.cos(Math.PI/180*this.lat);return Ne([this.lat-l,this.lng-d],[this.lat+l,this.lng+d])},clone:function(){return new Se(this.lat,this.lng,this.alt)}};function xe(i,l,d){return i instanceof Se?i:Te(i)&&typeof i[0]!="object"?i.length===3?new Se(i[0],i[1],i[2]):i.length===2?new Se(i[0],i[1]):null:i==null?i:typeof i=="object"&&"lat"in i?new Se(i.lat,"lng"in i?i.lng:i.lon,i.alt):l===void 0?null:new Se(i,l,d)}var Xe={latLngToPoint:function(i,l){var d=this.projection.project(i),m=this.scale(l);return this.transformation._transform(d,m)},pointToLatLng:function(i,l){var d=this.scale(l),m=this.transformation.untransform(i,d);return this.projection.unproject(m)},project:function(i){return this.projection.project(i)},unproject:function(i){return this.projection.unproject(i)},scale:function(i){return 256*Math.pow(2,i)},zoom:function(i){return Math.log(i/256)/Math.LN2},getProjectedBounds:function(i){if(this.infinite)return null;var l=this.projection.bounds,d=this.scale(i),m=this.transformation.transform(l.min,d),E=this.transformation.transform(l.max,d);return new W(m,E)},infinite:!1,wrapLatLng:function(i){var l=this.wrapLng?b(i.lng,this.wrapLng,!0):i.lng,d=this.wrapLat?b(i.lat,this.wrapLat,!0):i.lat,m=i.alt;return new Se(d,l,m)},wrapLatLngBounds:function(i){var l=i.getCenter(),d=this.wrapLatLng(l),m=l.lat-d.lat,E=l.lng-d.lng;if(m===0&&E===0)return i;var P=i.getSouthWest(),z=i.getNorthEast(),K=new Se(P.lat-m,P.lng-E),J=new Se(z.lat-m,z.lng-E);return new Me(K,J)}},re=a({},Xe,{wrapLng:[-180,180],R:6371e3,distance:function(i,l){var d=Math.PI/180,m=i.lat*d,E=l.lat*d,P=Math.sin((l.lat-i.lat)*d/2),z=Math.sin((l.lng-i.lng)*d/2),K=P*P+Math.cos(m)*Math.cos(E)*z*z,J=2*Math.atan2(Math.sqrt(K),Math.sqrt(1-K));return this.R*J}}),qe=6378137,dt={R:qe,MAX_LATITUDE:85.0511287798,project:function(i){var l=Math.PI/180,d=this.MAX_LATITUDE,m=Math.max(Math.min(d,i.lat),-d),E=Math.sin(m*l);return new X(this.R*i.lng*l,this.R*Math.log((1+E)/(1-E))/2)},unproject:function(i){var l=180/Math.PI;return new Se((2*Math.atan(Math.exp(i.y/this.R))-Math.PI/2)*l,i.x*l/this.R)},bounds:(function(){var i=qe*Math.PI;return new W([-i,-i],[i,i])})()};function gn(i,l,d,m){if(Te(i)){this._a=i[0],this._b=i[1],this._c=i[2],this._d=i[3];return}this._a=i,this._b=l,this._c=d,this._d=m}gn.prototype={transform:function(i,l){return this._transform(i.clone(),l)},_transform:function(i,l){return l=l||1,i.x=l*(this._a*i.x+this._b),i.y=l*(this._c*i.y+this._d),i},untransform:function(i,l){return l=l||1,new X((i.x/l-this._b)/this._a,(i.y/l-this._d)/this._c)}};function jt(i,l,d,m){return new gn(i,l,d,m)}var Nn=a({},re,{code:"EPSG:3857",projection:dt,transformation:(function(){var i=.5/(Math.PI*dt.R);return jt(i,.5,-i,.5)})()}),di=a({},Nn,{code:"EPSG:900913"});function fi(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function Kr(i,l){var d="",m,E,P,z,K,J;for(m=0,P=i.length;m<P;m++){for(K=i[m],E=0,z=K.length;E<z;E++)J=K[E],d+=(E?"L":"M")+J.x+" "+J.y;d+=l?Ce.svg?"z":"x":""}return d||"M0 0"}var or=document.documentElement.style,ar="ActiveXObject"in window,bt=ar&&!document.addEventListener,kt="msLaunchUri"in navigator&&!("documentMode"in document),Rn=Bt("webkit"),Ds=Bt("android"),Ms=Bt("android 2")||Bt("android 3"),Ma=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),pi=Ds&&Bt("Google")&&Ma<537&&!("AudioNode"in window),$i=!!window.opera,qi=!kt&&Bt("chrome"),Zr=Bt("gecko")&&!Rn&&!$i&&!ar,Oa=!qi&&Bt("safari"),mi=Bt("phantom"),Qr="OTransition"in or,ja=navigator.platform.indexOf("Win")===0,Yr=ar&&"transition"in or,gi="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Ms,Os="MozPerspective"in or,lr=!window.L_DISABLE_3D&&(Yr||gi||Os)&&!Qr&&!mi,xr=typeof orientation<"u"||Bt("mobile"),_i=xr&&Rn,js=xr&&gi,wr=!window.PointerEvent&&window.MSPointerEvent,Er=!!(window.PointerEvent||wr),It="ontouchstart"in window||!!window.TouchEvent,Uo=!window.L_NO_TOUCH&&(It||Er),yi=xr&&$i,vi=xr&&Zr,Va=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Fa=(function(){var i=!1;try{var l=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("testPassiveEventSupport",k,l),window.removeEventListener("testPassiveEventSupport",k,l)}catch{}return i})(),Tr=(function(){return!!document.createElement("canvas").getContext})(),Vs=!!(document.createElementNS&&fi("svg").createSVGRect),Gi=!!Vs&&(function(){var i=document.createElement("div");return i.innerHTML="<svg/>",(i.firstChild&&i.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),xi=!Vs&&(function(){try{var i=document.createElement("div");i.innerHTML='<v:shape adj="1"/>';var l=i.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}})(),wi=navigator.platform.indexOf("Mac")===0,za=navigator.platform.indexOf("Linux")===0;function Bt(i){return navigator.userAgent.toLowerCase().indexOf(i)>=0}var Ce={ie:ar,ielt9:bt,edge:kt,webkit:Rn,android:Ds,android23:Ms,androidStock:pi,opera:$i,chrome:qi,gecko:Zr,safari:Oa,phantom:mi,opera12:Qr,win:ja,ie3d:Yr,webkit3d:gi,gecko3d:Os,any3d:lr,mobile:xr,mobileWebkit:_i,mobileWebkit3d:js,msPointer:wr,pointer:Er,touch:Uo,touchNative:It,mobileOpera:yi,mobileGecko:vi,retina:Va,passiveEvents:Fa,canvas:Tr,svg:Vs,vml:xi,inlineSvg:Gi,mac:wi,linux:za},Ki=Ce.msPointer?"MSPointerDown":"pointerdown",Ln=Ce.msPointer?"MSPointerMove":"pointermove",Bo=Ce.msPointer?"MSPointerUp":"pointerup",Ho=Ce.msPointer?"MSPointerCancel":"pointercancel",Zi={touchstart:Ki,touchmove:Ln,touchend:Bo,touchcancel:Ho},qn={touchstart:xt,touchmove:Gn,touchend:Gn,touchcancel:Gn},Ir={},Wo=!1;function Ua(i,l,d){return l==="touchstart"&&Ji(),qn[l]?(d=qn[l].bind(this,d),i.addEventListener(Zi[l],d,!1),d):(console.warn("wrong event specified:",l),k)}function Ba(i,l,d){if(!Zi[l]){console.warn("wrong event specified:",l);return}i.removeEventListener(Zi[l],d,!1)}function Qi(i){Ir[i.pointerId]=i}function $o(i){Ir[i.pointerId]&&(Ir[i.pointerId]=i)}function Yi(i){delete Ir[i.pointerId]}function Ji(){Wo||(document.addEventListener(Ki,Qi,!0),document.addEventListener(Ln,$o,!0),document.addEventListener(Bo,Yi,!0),document.addEventListener(Ho,Yi,!0),Wo=!0)}function Gn(i,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var d in Ir)l.touches.push(Ir[d]);l.changedTouches=[l],i(l)}}function xt(i,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&wt(l),Gn(i,l)}function Wl(i){var l={},d,m;for(m in i)d=i[m],l[m]=d&&d.bind?d.bind(i):d;return i=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var Fs=200;function qo(i,l){i.addEventListener("dblclick",l);var d=0,m;function E(P){if(P.detail!==1){m=P.detail;return}if(!(P.pointerType==="mouse"||P.sourceCapabilities&&!P.sourceCapabilities.firesTouchEvents)){var z=Cr(P);if(!(z.some(function(J){return J instanceof HTMLLabelElement&&J.attributes.for})&&!z.some(function(J){return J instanceof HTMLInputElement||J instanceof HTMLSelectElement}))){var K=Date.now();K-d<=Fs?(m++,m===2&&l(Wl(P))):m=1,d=K}}}return i.addEventListener("click",E),{dblclick:l,simDblclick:E}}function Xi(i,l){i.removeEventListener("dblclick",l.dblclick),i.removeEventListener("click",l.simDblclick)}var es=Ii(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Sr=Ii(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ei=Sr==="webkitTransition"||Sr==="OTransition"?Sr+"End":"transitionend";function _n(i){return typeof i=="string"?document.getElementById(i):i}function Ti(i,l){var d=i.style[l]||i.currentStyle&&i.currentStyle[l];if((!d||d==="auto")&&document.defaultView){var m=document.defaultView.getComputedStyle(i,null);d=m?m[l]:null}return d==="auto"?null:d}function Qe(i,l,d){var m=document.createElement(i);return m.className=l||"",d&&d.appendChild(m),m}function lt(i){var l=i.parentNode;l&&l.removeChild(i)}function ln(i){for(;i.firstChild;)i.removeChild(i.firstChild)}function Kn(i){var l=i.parentNode;l&&l.lastChild!==i&&l.appendChild(i)}function un(i){var l=i.parentNode;l&&l.firstChild!==i&&l.insertBefore(i,l.firstChild)}function Pr(i,l){if(i.classList!==void 0)return i.classList.contains(l);var d=br(i);return d.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(d)}function Ee(i,l){if(i.classList!==void 0)for(var d=U(l),m=0,E=d.length;m<E;m++)i.classList.add(d[m]);else if(!Pr(i,l)){var P=br(i);Jr(i,(P?P+" ":"")+l)}}function mt(i,l){i.classList!==void 0?i.classList.remove(l):Jr(i,V((" "+br(i)+" ").replace(" "+l+" "," ")))}function Jr(i,l){i.className.baseVal===void 0?i.className=l:i.className.baseVal=l}function br(i){return i.correspondingElement&&(i=i.correspondingElement),i.className.baseVal===void 0?i.className:i.className.baseVal}function tn(i,l){"opacity"in i.style?i.style.opacity=l:"filter"in i.style&&Go(i,l)}function Go(i,l){var d=!1,m="DXImageTransform.Microsoft.Alpha";try{d=i.filters.item(m)}catch{if(l===1)return}l=Math.round(l*100),d?(d.Enabled=l!==100,d.Opacity=l):i.style.filter+=" progid:"+m+"(opacity="+l+")"}function Ii(i){for(var l=document.documentElement.style,d=0;d<i.length;d++)if(i[d]in l)return i[d];return!1}function Dn(i,l,d){var m=l||new X(0,0);i.style[es]=(Ce.ie3d?"translate("+m.x+"px,"+m.y+"px)":"translate3d("+m.x+"px,"+m.y+"px,0)")+(d?" scale("+d+")":"")}function Ct(i,l){i._leaflet_pos=l,Ce.any3d?Dn(i,l):(i.style.left=l.x+"px",i.style.top=l.y+"px")}function ur(i){return i._leaflet_pos||new X(0,0)}var tt,yn,ts;if("onselectstart"in document)tt=function(){ze(window,"selectstart",wt)},yn=function(){gt(window,"selectstart",wt)};else{var kr=Ii(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);tt=function(){if(kr){var i=document.documentElement.style;ts=i[kr],i[kr]="none"}},yn=function(){kr&&(document.documentElement.style[kr]=ts,ts=void 0)}}function ns(){ze(window,"dragstart",wt)}function rs(){gt(window,"dragstart",wt)}var Si,Zn;function Pi(i){for(;i.tabIndex===-1;)i=i.parentNode;i.style&&(Mn(),Si=i,Zn=i.style.outlineStyle,i.style.outlineStyle="none",ze(window,"keydown",Mn))}function Mn(){Si&&(Si.style.outlineStyle=Zn,Si=void 0,Zn=void 0,gt(window,"keydown",Mn))}function cr(i){do i=i.parentNode;while((!i.offsetWidth||!i.offsetHeight)&&i!==document.body);return i}function Vt(i){var l=i.getBoundingClientRect();return{x:l.width/i.offsetWidth||1,y:l.height/i.offsetHeight||1,boundingClientRect:l}}var is={__proto__:null,TRANSFORM:es,TRANSITION:Sr,TRANSITION_END:Ei,get:_n,getStyle:Ti,create:Qe,remove:lt,empty:ln,toFront:Kn,toBack:un,hasClass:Pr,addClass:Ee,removeClass:mt,setClass:Jr,getClass:br,setOpacity:tn,testProp:Ii,setTransform:Dn,setPosition:Ct,getPosition:ur,get disableTextSelection(){return tt},get enableTextSelection(){return yn},disableImageDrag:ns,enableImageDrag:rs,preventOutline:Pi,restoreOutline:Mn,getSizedParentNode:cr,getScale:Vt};function ze(i,l,d,m){if(l&&typeof l=="object")for(var E in l)zs(i,E,l[E],d);else{l=U(l);for(var P=0,z=l.length;P<z;P++)zs(i,l[P],d,m)}return this}var At="_leaflet_events";function gt(i,l,d,m){if(arguments.length===1)Xr(i),delete i[At];else if(l&&typeof l=="object")for(var E in l)bi(i,E,l[E],d);else if(l=U(l),arguments.length===2)Xr(i,function(K){return Oe(l,K)!==-1});else for(var P=0,z=l.length;P<z;P++)bi(i,l[P],d,m);return this}function Xr(i,l){for(var d in i[At]){var m=d.split(/\d/)[0];(!l||l(m))&&bi(i,m,null,null,d)}}var On={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function zs(i,l,d,m){var E=l+w(d)+(m?"_"+w(m):"");if(i[At]&&i[At][E])return this;var P=function(K){return d.call(m||i,K||window.event)},z=P;!Ce.touchNative&&Ce.pointer&&l.indexOf("touch")===0?P=Ua(i,l,P):Ce.touch&&l==="dblclick"?P=qo(i,P):"addEventListener"in i?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?i.addEventListener(On[l]||l,P,Ce.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(P=function(K){K=K||window.event,os(i,K)&&z(K)},i.addEventListener(On[l],P,!1)):i.addEventListener(l,z,!1):i.attachEvent("on"+l,P),i[At]=i[At]||{},i[At][E]=P}function bi(i,l,d,m,E){E=E||l+w(d)+(m?"_"+w(m):"");var P=i[At]&&i[At][E];if(!P)return this;!Ce.touchNative&&Ce.pointer&&l.indexOf("touch")===0?Ba(i,l,P):Ce.touch&&l==="dblclick"?Xi(i,P):"removeEventListener"in i?i.removeEventListener(On[l]||l,P,!1):i.detachEvent("on"+l,P),i[At][E]=null}function at(i){return i.stopPropagation?i.stopPropagation():i.originalEvent?i.originalEvent._stopped=!0:i.cancelBubble=!0,this}function Us(i){return zs(i,"wheel",at),this}function ss(i){return ze(i,"mousedown touchstart dblclick contextmenu",at),i._leaflet_disable_click=!0,this}function wt(i){return i.preventDefault?i.preventDefault():i.returnValue=!1,this}function vn(i){return wt(i),at(i),this}function Cr(i){if(i.composedPath)return i.composedPath();for(var l=[],d=i.target;d;)l.push(d),d=d.parentNode;return l}function Ar(i,l){if(!l)return new X(i.clientX,i.clientY);var d=Vt(l),m=d.boundingClientRect;return new X((i.clientX-m.left)/d.x-l.clientLeft,(i.clientY-m.top)/d.y-l.clientTop)}var Nr=Ce.linux&&Ce.chrome?window.devicePixelRatio:Ce.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Ko(i){return Ce.edge?i.wheelDeltaY/2:i.deltaY&&i.deltaMode===0?-i.deltaY/Nr:i.deltaY&&i.deltaMode===1?-i.deltaY*20:i.deltaY&&i.deltaMode===2?-i.deltaY*60:i.deltaX||i.deltaZ?0:i.wheelDelta?(i.wheelDeltaY||i.wheelDelta)/2:i.detail&&Math.abs(i.detail)<32765?-i.detail*20:i.detail?i.detail/-32765*60:0}function os(i,l){var d=l.relatedTarget;if(!d)return!0;try{for(;d&&d!==i;)d=d.parentNode}catch{return!1}return d!==i}var Rr={__proto__:null,on:ze,off:gt,stopPropagation:at,disableScrollPropagation:Us,disableClickPropagation:ss,preventDefault:wt,stop:vn,getPropagationPath:Cr,getMousePosition:Ar,getWheelDelta:Ko,isExternalTarget:os,addListener:ze,removeListener:gt},as=Ve.extend({run:function(i,l,d,m){this.stop(),this._el=i,this._inProgress=!0,this._duration=d||.25,this._easeOutPower=1/Math.max(m||.5,.2),this._startPos=ur(i),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=j(this._animate,this),this._step()},_step:function(i){var l=+new Date-this._startTime,d=this._duration*1e3;l<d?this._runFrame(this._easeOut(l/d),i):(this._runFrame(1),this._complete())},_runFrame:function(i,l){var d=this._startPos.add(this._offset.multiplyBy(i));l&&d._round(),Ct(this._el,d),this.fire("step")},_complete:function(){R(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(i){return 1-Math.pow(1-i,this._easeOutPower)}}),nt=Ve.extend({options:{crs:Nn,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(i,l){l=q(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(i),this._initLayout(),this._onResize=p(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(xe(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Sr&&Ce.any3d&&!Ce.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ze(this._proxy,Ei,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(i,l,d){if(l=l===void 0?this._zoom:this._limitZoom(l),i=this._limitCenter(xe(i),l,this.options.maxBounds),d=d||{},this._stop(),this._loaded&&!d.reset&&d!==!0){d.animate!==void 0&&(d.zoom=a({animate:d.animate},d.zoom),d.pan=a({animate:d.animate,duration:d.duration},d.pan));var m=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(i,l,d.zoom):this._tryAnimatedPan(i,d.pan);if(m)return clearTimeout(this._sizeTimer),this}return this._resetView(i,l,d.pan&&d.pan.noMoveStart),this},setZoom:function(i,l){return this._loaded?this.setView(this.getCenter(),i,{zoom:l}):(this._zoom=i,this)},zoomIn:function(i,l){return i=i||(Ce.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+i,l)},zoomOut:function(i,l){return i=i||(Ce.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-i,l)},setZoomAround:function(i,l,d){var m=this.getZoomScale(l),E=this.getSize().divideBy(2),P=i instanceof X?i:this.latLngToContainerPoint(i),z=P.subtract(E).multiplyBy(1-1/m),K=this.containerPointToLatLng(E.add(z));return this.setView(K,l,{zoom:d})},_getBoundsCenterZoom:function(i,l){l=l||{},i=i.getBounds?i.getBounds():Ne(i);var d=oe(l.paddingTopLeft||l.padding||[0,0]),m=oe(l.paddingBottomRight||l.padding||[0,0]),E=this.getBoundsZoom(i,!1,d.add(m));if(E=typeof l.maxZoom=="number"?Math.min(l.maxZoom,E):E,E===1/0)return{center:i.getCenter(),zoom:E};var P=m.subtract(d).divideBy(2),z=this.project(i.getSouthWest(),E),K=this.project(i.getNorthEast(),E),J=this.unproject(z.add(K).divideBy(2).add(P),E);return{center:J,zoom:E}},fitBounds:function(i,l){if(i=Ne(i),!i.isValid())throw new Error("Bounds are not valid.");var d=this._getBoundsCenterZoom(i,l);return this.setView(d.center,d.zoom,l)},fitWorld:function(i){return this.fitBounds([[-90,-180],[90,180]],i)},panTo:function(i,l){return this.setView(i,this._zoom,{pan:l})},panBy:function(i,l){if(i=oe(i).round(),l=l||{},!i.x&&!i.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(i))return this._resetView(this.unproject(this.project(this.getCenter()).add(i)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new as,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){Ee(this._mapPane,"leaflet-pan-anim");var d=this._getMapPanePos().subtract(i).round();this._panAnim.run(this._mapPane,d,l.duration||.25,l.easeLinearity)}else this._rawPanBy(i),this.fire("move").fire("moveend");return this},flyTo:function(i,l,d){if(d=d||{},d.animate===!1||!Ce.any3d)return this.setView(i,l,d);this._stop();var m=this.project(this.getCenter()),E=this.project(i),P=this.getSize(),z=this._zoom;i=xe(i),l=l===void 0?z:l;var K=Math.max(P.x,P.y),J=K*this.getZoomScale(z,l),le=E.distanceTo(m)||1,we=1.42,Fe=we*we;function et(_t){var oo=_t?-1:1,pd=_t?J:K,md=J*J-K*K+oo*Fe*Fe*le*le,fs=2*pd*Fe*le,ps=md/fs,ms=Math.sqrt(ps*ps+1)-ps,el=ms<1e-9?-18:Math.log(ms);return el}function Yt(_t){return(Math.exp(_t)-Math.exp(-_t))/2}function Wt(_t){return(Math.exp(_t)+Math.exp(-_t))/2}function Un(_t){return Yt(_t)/Wt(_t)}var En=et(0);function io(_t){return K*(Wt(En)/Wt(En+we*_t))}function nu(_t){return K*(Wt(En)*Un(En+we*_t)-Yt(En))/Fe}function Di(_t){return 1-Math.pow(1-_t,1.5)}var pc=Date.now(),ds=(et(1)-En)/we,Fr=d.duration?1e3*d.duration:1e3*ds*.8;function so(){var _t=(Date.now()-pc)/Fr,oo=Di(_t)*ds;_t<=1?(this._flyToFrame=j(so,this),this._move(this.unproject(m.add(E.subtract(m).multiplyBy(nu(oo)/le)),z),this.getScaleZoom(K/io(oo),z),{flyTo:!0})):this._move(i,l)._moveEnd(!0)}return this._moveStart(!0,d.noMoveStart),so.call(this),this},flyToBounds:function(i,l){var d=this._getBoundsCenterZoom(i,l);return this.flyTo(d.center,d.zoom,l)},setMaxBounds:function(i){return i=Ne(i),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),i.isValid()?(this.options.maxBounds=i,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(i){var l=this.options.minZoom;return this.options.minZoom=i,this._loaded&&l!==i&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(i):this},setMaxZoom:function(i){var l=this.options.maxZoom;return this.options.maxZoom=i,this._loaded&&l!==i&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(i):this},panInsideBounds:function(i,l){this._enforcingBounds=!0;var d=this.getCenter(),m=this._limitCenter(d,this._zoom,Ne(i));return d.equals(m)||this.panTo(m,l),this._enforcingBounds=!1,this},panInside:function(i,l){l=l||{};var d=oe(l.paddingTopLeft||l.padding||[0,0]),m=oe(l.paddingBottomRight||l.padding||[0,0]),E=this.project(this.getCenter()),P=this.project(i),z=this.getPixelBounds(),K=ne([z.min.add(d),z.max.subtract(m)]),J=K.getSize();if(!K.contains(P)){this._enforcingBounds=!0;var le=P.subtract(K.getCenter()),we=K.extend(P).getSize().subtract(J);E.x+=le.x<0?-we.x:we.x,E.y+=le.y<0?-we.y:we.y,this.panTo(this.unproject(E),l),this._enforcingBounds=!1}return this},invalidateSize:function(i){if(!this._loaded)return this;i=a({animate:!1,pan:!0},i===!0?{animate:!0}:i);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var d=this.getSize(),m=l.divideBy(2).round(),E=d.divideBy(2).round(),P=m.subtract(E);return!P.x&&!P.y?this:(i.animate&&i.pan?this.panBy(P):(i.pan&&this._rawPanBy(P),this.fire("move"),i.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(p(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:d}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(i){if(i=this._locateOptions=a({timeout:1e4,watch:!1},i),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=p(this._handleGeolocationResponse,this),d=p(this._handleGeolocationError,this);return i.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,d,i):navigator.geolocation.getCurrentPosition(l,d,i),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(i){if(this._container._leaflet_id){var l=i.code,d=i.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+d+"."})}},_handleGeolocationResponse:function(i){if(this._container._leaflet_id){var l=i.coords.latitude,d=i.coords.longitude,m=new Se(l,d),E=m.toBounds(i.coords.accuracy*2),P=this._locateOptions;if(P.setView){var z=this.getBoundsZoom(E);this.setView(m,P.maxZoom?Math.min(z,P.maxZoom):z)}var K={latlng:m,bounds:E,timestamp:i.timestamp};for(var J in i.coords)typeof i.coords[J]=="number"&&(K[J]=i.coords[J]);this.fire("locationfound",K)}},addHandler:function(i,l){if(!l)return this;var d=this[i]=new l(this);return this._handlers.push(d),this.options[i]&&d.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),lt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(R(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var i;for(i in this._layers)this._layers[i].remove();for(i in this._panes)lt(this._panes[i]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(i,l){var d="leaflet-pane"+(i?" leaflet-"+i.replace("Pane","")+"-pane":""),m=Qe("div",d,l||this._mapPane);return i&&(this._panes[i]=m),m},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var i=this.getPixelBounds(),l=this.unproject(i.getBottomLeft()),d=this.unproject(i.getTopRight());return new Me(l,d)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(i,l,d){i=Ne(i),d=oe(d||[0,0]);var m=this.getZoom()||0,E=this.getMinZoom(),P=this.getMaxZoom(),z=i.getNorthWest(),K=i.getSouthEast(),J=this.getSize().subtract(d),le=ne(this.project(K,m),this.project(z,m)).getSize(),we=Ce.any3d?this.options.zoomSnap:1,Fe=J.x/le.x,et=J.y/le.y,Yt=l?Math.max(Fe,et):Math.min(Fe,et);return m=this.getScaleZoom(Yt,m),we&&(m=Math.round(m/(we/100))*(we/100),m=l?Math.ceil(m/we)*we:Math.floor(m/we)*we),Math.max(E,Math.min(P,m))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new X(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(i,l){var d=this._getTopLeftPoint(i,l);return new W(d,d.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(i){return this.options.crs.getProjectedBounds(i===void 0?this.getZoom():i)},getPane:function(i){return typeof i=="string"?this._panes[i]:i},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(i,l){var d=this.options.crs;return l=l===void 0?this._zoom:l,d.scale(i)/d.scale(l)},getScaleZoom:function(i,l){var d=this.options.crs;l=l===void 0?this._zoom:l;var m=d.zoom(i*d.scale(l));return isNaN(m)?1/0:m},project:function(i,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(xe(i),l)},unproject:function(i,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(oe(i),l)},layerPointToLatLng:function(i){var l=oe(i).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(i){var l=this.project(xe(i))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(i){return this.options.crs.wrapLatLng(xe(i))},wrapLatLngBounds:function(i){return this.options.crs.wrapLatLngBounds(Ne(i))},distance:function(i,l){return this.options.crs.distance(xe(i),xe(l))},containerPointToLayerPoint:function(i){return oe(i).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(i){return oe(i).add(this._getMapPanePos())},containerPointToLatLng:function(i){var l=this.containerPointToLayerPoint(oe(i));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(i){return this.layerPointToContainerPoint(this.latLngToLayerPoint(xe(i)))},mouseEventToContainerPoint:function(i){return Ar(i,this._container)},mouseEventToLayerPoint:function(i){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(i))},mouseEventToLatLng:function(i){return this.layerPointToLatLng(this.mouseEventToLayerPoint(i))},_initContainer:function(i){var l=this._container=_n(i);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ze(l,"scroll",this._onScroll,this),this._containerId=w(l)},_initLayout:function(){var i=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ce.any3d,Ee(i,"leaflet-container"+(Ce.touch?" leaflet-touch":"")+(Ce.retina?" leaflet-retina":"")+(Ce.ielt9?" leaflet-oldie":"")+(Ce.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=Ti(i,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(i.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var i=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ct(this._mapPane,new X(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Ee(i.markerPane,"leaflet-zoom-hide"),Ee(i.shadowPane,"leaflet-zoom-hide"))},_resetView:function(i,l,d){Ct(this._mapPane,new X(0,0));var m=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var E=this._zoom!==l;this._moveStart(E,d)._move(i,l)._moveEnd(E),this.fire("viewreset"),m&&this.fire("load")},_moveStart:function(i,l){return i&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(i,l,d,m){l===void 0&&(l=this._zoom);var E=this._zoom!==l;return this._zoom=l,this._lastCenter=i,this._pixelOrigin=this._getNewPixelOrigin(i),m?d&&d.pinch&&this.fire("zoom",d):((E||d&&d.pinch)&&this.fire("zoom",d),this.fire("move",d)),this},_moveEnd:function(i){return i&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return R(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(i){Ct(this._mapPane,this._getMapPanePos().subtract(i))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(i){this._targets={},this._targets[w(this._container)]=this;var l=i?gt:ze;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),Ce.any3d&&this.options.transform3DLimit&&(i?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){R(this._resizeRequest),this._resizeRequest=j(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var i=this._getMapPanePos();Math.max(Math.abs(i.x),Math.abs(i.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(i,l){for(var d=[],m,E=l==="mouseout"||l==="mouseover",P=i.target||i.srcElement,z=!1;P;){if(m=this._targets[w(P)],m&&(l==="click"||l==="preclick")&&this._draggableMoved(m)){z=!0;break}if(m&&m.listens(l,!0)&&(E&&!os(P,i)||(d.push(m),E))||P===this._container)break;P=P.parentNode}return!d.length&&!z&&!E&&this.listens(l,!0)&&(d=[this]),d},_isClickDisabled:function(i){for(;i&&i!==this._container;){if(i._leaflet_disable_click)return!0;i=i.parentNode}},_handleDOMEvent:function(i){var l=i.target||i.srcElement;if(!(!this._loaded||l._leaflet_disable_events||i.type==="click"&&this._isClickDisabled(l))){var d=i.type;d==="mousedown"&&Pi(l),this._fireDOMEvent(i,d)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(i,l,d){if(i.type==="click"){var m=a({},i);m.type="preclick",this._fireDOMEvent(m,m.type,d)}var E=this._findEventTargets(i,l);if(d){for(var P=[],z=0;z<d.length;z++)d[z].listens(l,!0)&&P.push(d[z]);E=P.concat(E)}if(E.length){l==="contextmenu"&&wt(i);var K=E[0],J={originalEvent:i};if(i.type!=="keypress"&&i.type!=="keydown"&&i.type!=="keyup"){var le=K.getLatLng&&(!K._radius||K._radius<=10);J.containerPoint=le?this.latLngToContainerPoint(K.getLatLng()):this.mouseEventToContainerPoint(i),J.layerPoint=this.containerPointToLayerPoint(J.containerPoint),J.latlng=le?K.getLatLng():this.layerPointToLatLng(J.layerPoint)}for(z=0;z<E.length;z++)if(E[z].fire(l,J,!0),J.originalEvent._stopped||E[z].options.bubblingMouseEvents===!1&&Oe(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(i){return i=i.dragging&&i.dragging.enabled()?i:this,i.dragging&&i.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var i=0,l=this._handlers.length;i<l;i++)this._handlers[i].disable()},whenReady:function(i,l){return this._loaded?i.call(l||this,{target:this}):this.on("load",i,l),this},_getMapPanePos:function(){return ur(this._mapPane)||new X(0,0)},_moved:function(){var i=this._getMapPanePos();return i&&!i.equals([0,0])},_getTopLeftPoint:function(i,l){var d=i&&l!==void 0?this._getNewPixelOrigin(i,l):this.getPixelOrigin();return d.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(i,l){var d=this.getSize()._divideBy(2);return this.project(i,l)._subtract(d)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(i,l,d){var m=this._getNewPixelOrigin(d,l);return this.project(i,l)._subtract(m)},_latLngBoundsToNewLayerBounds:function(i,l,d){var m=this._getNewPixelOrigin(d,l);return ne([this.project(i.getSouthWest(),l)._subtract(m),this.project(i.getNorthWest(),l)._subtract(m),this.project(i.getSouthEast(),l)._subtract(m),this.project(i.getNorthEast(),l)._subtract(m)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(i){return this.latLngToLayerPoint(i).subtract(this._getCenterLayerPoint())},_limitCenter:function(i,l,d){if(!d)return i;var m=this.project(i,l),E=this.getSize().divideBy(2),P=new W(m.subtract(E),m.add(E)),z=this._getBoundsOffset(P,d,l);return Math.abs(z.x)<=1&&Math.abs(z.y)<=1?i:this.unproject(m.add(z),l)},_limitOffset:function(i,l){if(!l)return i;var d=this.getPixelBounds(),m=new W(d.min.add(i),d.max.add(i));return i.add(this._getBoundsOffset(m,l))},_getBoundsOffset:function(i,l,d){var m=ne(this.project(l.getNorthEast(),d),this.project(l.getSouthWest(),d)),E=m.min.subtract(i.min),P=m.max.subtract(i.max),z=this._rebound(E.x,-P.x),K=this._rebound(E.y,-P.y);return new X(z,K)},_rebound:function(i,l){return i+l>0?Math.round(i-l)/2:Math.max(0,Math.ceil(i))-Math.max(0,Math.floor(l))},_limitZoom:function(i){var l=this.getMinZoom(),d=this.getMaxZoom(),m=Ce.any3d?this.options.zoomSnap:1;return m&&(i=Math.round(i/m)*m),Math.max(l,Math.min(d,i))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){mt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(i,l){var d=this._getCenterOffset(i)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(d)?!1:(this.panBy(d,l),!0)},_createAnimProxy:function(){var i=this._proxy=Qe("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(i),this.on("zoomanim",function(l){var d=es,m=this._proxy.style[d];Dn(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),m===this._proxy.style[d]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){lt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var i=this.getCenter(),l=this.getZoom();Dn(this._proxy,this.project(i,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(i){this._animatingZoom&&i.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(i,l,d){if(this._animatingZoom)return!0;if(d=d||{},!this._zoomAnimated||d.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var m=this.getZoomScale(l),E=this._getCenterOffset(i)._divideBy(1-1/m);return d.animate!==!0&&!this.getSize().contains(E)?!1:(j(function(){this._moveStart(!0,d.noMoveStart||!1)._animateZoom(i,l,!0)},this),!0)},_animateZoom:function(i,l,d,m){this._mapPane&&(d&&(this._animatingZoom=!0,this._animateToCenter=i,this._animateToZoom=l,Ee(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:i,zoom:l,noUpdate:m}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(p(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&mt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function jn(i,l){return new nt(i,l)}var nn=ye.extend({options:{position:"topright"},initialize:function(i){q(this,i)},getPosition:function(){return this.options.position},setPosition:function(i){var l=this._map;return l&&l.removeControl(this),this.options.position=i,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(i){this.remove(),this._map=i;var l=this._container=this.onAdd(i),d=this.getPosition(),m=i._controlCorners[d];return Ee(l,"leaflet-control"),d.indexOf("bottom")!==-1?m.insertBefore(l,m.firstChild):m.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(lt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(i){this._map&&i&&i.screenX>0&&i.screenY>0&&this._map.getContainer().focus()}}),Vn=function(i){return new nn(i)};nt.include({addControl:function(i){return i.addTo(this),this},removeControl:function(i){return i.remove(),this},_initControlPos:function(){var i=this._controlCorners={},l="leaflet-",d=this._controlContainer=Qe("div",l+"control-container",this._container);function m(E,P){var z=l+E+" "+l+P;i[E+P]=Qe("div",z,d)}m("top","left"),m("top","right"),m("bottom","left"),m("bottom","right")},_clearControlPos:function(){for(var i in this._controlCorners)lt(this._controlCorners[i]);lt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Zo=nn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(i,l,d,m){return d<m?-1:m<d?1:0}},initialize:function(i,l,d){q(this,d),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var m in i)this._addLayer(i[m],m);for(m in l)this._addLayer(l[m],m,!0)},onAdd:function(i){this._initLayout(),this._update(),this._map=i,i.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(i){return nn.prototype.addTo.call(this,i),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(i,l){return this._addLayer(i,l),this._map?this._update():this},addOverlay:function(i,l){return this._addLayer(i,l,!0),this._map?this._update():this},removeLayer:function(i){i.off("add remove",this._onLayerChange,this);var l=this._getLayer(w(i));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){Ee(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var i=this._map.getSize().y-(this._container.offsetTop+50);return i<this._section.clientHeight?(Ee(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=i+"px"):mt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return mt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var i="leaflet-control-layers",l=this._container=Qe("div",i),d=this.options.collapsed;l.setAttribute("aria-haspopup",!0),ss(l),Us(l);var m=this._section=Qe("section",i+"-list");d&&(this._map.on("click",this.collapse,this),ze(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var E=this._layersLink=Qe("a",i+"-toggle",l);E.href="#",E.title="Layers",E.setAttribute("role","button"),ze(E,{keydown:function(P){P.keyCode===13&&this._expandSafely()},click:function(P){wt(P),this._expandSafely()}},this),d||this.expand(),this._baseLayersList=Qe("div",i+"-base",m),this._separator=Qe("div",i+"-separator",m),this._overlaysList=Qe("div",i+"-overlays",m),l.appendChild(m)},_getLayer:function(i){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&w(this._layers[l].layer)===i)return this._layers[l]},_addLayer:function(i,l,d){this._map&&i.on("add remove",this._onLayerChange,this),this._layers.push({layer:i,name:l,overlay:d}),this.options.sortLayers&&this._layers.sort(p(function(m,E){return this.options.sortFunction(m.layer,E.layer,m.name,E.name)},this)),this.options.autoZIndex&&i.setZIndex&&(this._lastZIndex++,i.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ln(this._baseLayersList),ln(this._overlaysList),this._layerControlInputs=[];var i,l,d,m,E=0;for(d=0;d<this._layers.length;d++)m=this._layers[d],this._addItem(m),l=l||m.overlay,i=i||!m.overlay,E+=m.overlay?0:1;return this.options.hideSingleBase&&(i=i&&E>1,this._baseLayersList.style.display=i?"":"none"),this._separator.style.display=l&&i?"":"none",this},_onLayerChange:function(i){this._handlingClick||this._update();var l=this._getLayer(w(i.target)),d=l.overlay?i.type==="add"?"overlayadd":"overlayremove":i.type==="add"?"baselayerchange":null;d&&this._map.fire(d,l)},_createRadioElement:function(i,l){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+i+'"'+(l?' checked="checked"':"")+"/>",m=document.createElement("div");return m.innerHTML=d,m.firstChild},_addItem:function(i){var l=document.createElement("label"),d=this._map.hasLayer(i.layer),m;i.overlay?(m=document.createElement("input"),m.type="checkbox",m.className="leaflet-control-layers-selector",m.defaultChecked=d):m=this._createRadioElement("leaflet-base-layers_"+w(this),d),this._layerControlInputs.push(m),m.layerId=w(i.layer),ze(m,"click",this._onInputClick,this);var E=document.createElement("span");E.innerHTML=" "+i.name;var P=document.createElement("span");l.appendChild(P),P.appendChild(m),P.appendChild(E);var z=i.overlay?this._overlaysList:this._baseLayersList;return z.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var i=this._layerControlInputs,l,d,m=[],E=[];this._handlingClick=!0;for(var P=i.length-1;P>=0;P--)l=i[P],d=this._getLayer(l.layerId).layer,l.checked?m.push(d):l.checked||E.push(d);for(P=0;P<E.length;P++)this._map.hasLayer(E[P])&&this._map.removeLayer(E[P]);for(P=0;P<m.length;P++)this._map.hasLayer(m[P])||this._map.addLayer(m[P]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var i=this._layerControlInputs,l,d,m=this._map.getZoom(),E=i.length-1;E>=0;E--)l=i[E],d=this._getLayer(l.layerId).layer,l.disabled=d.options.minZoom!==void 0&&m<d.options.minZoom||d.options.maxZoom!==void 0&&m>d.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var i=this._section;this._preventClick=!0,ze(i,"click",wt),this.expand();var l=this;setTimeout(function(){gt(i,"click",wt),l._preventClick=!1})}}),ls=function(i,l,d){return new Zo(i,l,d)},Qn=nn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(i){var l="leaflet-control-zoom",d=Qe("div",l+" leaflet-bar"),m=this.options;return this._zoomInButton=this._createButton(m.zoomInText,m.zoomInTitle,l+"-in",d,this._zoomIn),this._zoomOutButton=this._createButton(m.zoomOutText,m.zoomOutTitle,l+"-out",d,this._zoomOut),this._updateDisabled(),i.on("zoomend zoomlevelschange",this._updateDisabled,this),d},onRemove:function(i){i.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(i){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(i.shiftKey?3:1))},_zoomOut:function(i){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(i.shiftKey?3:1))},_createButton:function(i,l,d,m,E){var P=Qe("a",d,m);return P.innerHTML=i,P.href="#",P.title=l,P.setAttribute("role","button"),P.setAttribute("aria-label",l),ss(P),ze(P,"click",vn),ze(P,"click",E,this),ze(P,"click",this._refocusOnMap,this),P},_updateDisabled:function(){var i=this._map,l="leaflet-disabled";mt(this._zoomInButton,l),mt(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||i._zoom===i.getMinZoom())&&(Ee(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||i._zoom===i.getMaxZoom())&&(Ee(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});nt.mergeOptions({zoomControl:!0}),nt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Qn,this.addControl(this.zoomControl))});var Qo=function(i){return new Qn(i)},Qt=nn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(i){var l="leaflet-control-scale",d=Qe("div",l),m=this.options;return this._addScales(m,l+"-line",d),i.on(m.updateWhenIdle?"moveend":"move",this._update,this),i.whenReady(this._update,this),d},onRemove:function(i){i.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(i,l,d){i.metric&&(this._mScale=Qe("div",l,d)),i.imperial&&(this._iScale=Qe("div",l,d))},_update:function(){var i=this._map,l=i.getSize().y/2,d=i.distance(i.containerPointToLatLng([0,l]),i.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(d)},_updateScales:function(i){this.options.metric&&i&&this._updateMetric(i),this.options.imperial&&i&&this._updateImperial(i)},_updateMetric:function(i){var l=this._getRoundNum(i),d=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,d,l/i)},_updateImperial:function(i){var l=i*3.2808399,d,m,E;l>5280?(d=l/5280,m=this._getRoundNum(d),this._updateScale(this._iScale,m+" mi",m/d)):(E=this._getRoundNum(l),this._updateScale(this._iScale,E+" ft",E/l))},_updateScale:function(i,l,d){i.style.width=Math.round(this.options.maxWidth*d)+"px",i.innerHTML=l},_getRoundNum:function(i){var l=Math.pow(10,(Math.floor(i)+"").length-1),d=i/l;return d=d>=10?10:d>=5?5:d>=3?3:d>=2?2:1,l*d}}),Lr=function(i){return new Qt(i)},us='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Dr=nn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ce.inlineSvg?us+" ":"")+"Leaflet</a>"},initialize:function(i){q(this,i),this._attributions={}},onAdd:function(i){i.attributionControl=this,this._container=Qe("div","leaflet-control-attribution"),ss(this._container);for(var l in i._layers)i._layers[l].getAttribution&&this.addAttribution(i._layers[l].getAttribution());return this._update(),i.on("layeradd",this._addAttribution,this),this._container},onRemove:function(i){i.off("layeradd",this._addAttribution,this)},_addAttribution:function(i){i.layer.getAttribution&&(this.addAttribution(i.layer.getAttribution()),i.layer.once("remove",function(){this.removeAttribution(i.layer.getAttribution())},this))},setPrefix:function(i){return this.options.prefix=i,this._update(),this},addAttribution:function(i){return i?(this._attributions[i]||(this._attributions[i]=0),this._attributions[i]++,this._update(),this):this},removeAttribution:function(i){return i?(this._attributions[i]&&(this._attributions[i]--,this._update()),this):this},_update:function(){if(this._map){var i=[];for(var l in this._attributions)this._attributions[l]&&i.push(l);var d=[];this.options.prefix&&d.push(this.options.prefix),i.length&&d.push(i.join(", ")),this._container.innerHTML=d.join(' <span aria-hidden="true">|</span> ')}}});nt.mergeOptions({attributionControl:!0}),nt.addInitHook(function(){this.options.attributionControl&&new Dr().addTo(this)});var Bs=function(i){return new Dr(i)};nn.Layers=Zo,nn.Zoom=Qn,nn.Scale=Qt,nn.Attribution=Dr,Vn.layers=ls,Vn.zoom=Qo,Vn.scale=Lr,Vn.attribution=Bs;var cn=ye.extend({initialize:function(i){this._map=i},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});cn.addTo=function(i,l){return i.addHandler(l,this),this};var Hs={Events:pe},xn=Ce.touch?"touchstart mousedown":"mousedown",wn=Ve.extend({options:{clickTolerance:3},initialize:function(i,l,d,m){q(this,m),this._element=i,this._dragStartTarget=l||i,this._preventOutline=d},enable:function(){this._enabled||(ze(this._dragStartTarget,xn,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(wn._dragging===this&&this.finishDrag(!0),gt(this._dragStartTarget,xn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(i){if(this._enabled&&(this._moved=!1,!Pr(this._element,"leaflet-zoom-anim"))){if(i.touches&&i.touches.length!==1){wn._dragging===this&&this.finishDrag();return}if(!(wn._dragging||i.shiftKey||i.which!==1&&i.button!==1&&!i.touches)&&(wn._dragging=this,this._preventOutline&&Pi(this._element),ns(),tt(),!this._moving)){this.fire("down");var l=i.touches?i.touches[0]:i,d=cr(this._element);this._startPoint=new X(l.clientX,l.clientY),this._startPos=ur(this._element),this._parentScale=Vt(d);var m=i.type==="mousedown";ze(document,m?"mousemove":"touchmove",this._onMove,this),ze(document,m?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(i){if(this._enabled){if(i.touches&&i.touches.length>1){this._moved=!0;return}var l=i.touches&&i.touches.length===1?i.touches[0]:i,d=new X(l.clientX,l.clientY)._subtract(this._startPoint);!d.x&&!d.y||Math.abs(d.x)+Math.abs(d.y)<this.options.clickTolerance||(d.x/=this._parentScale.x,d.y/=this._parentScale.y,wt(i),this._moved||(this.fire("dragstart"),this._moved=!0,Ee(document.body,"leaflet-dragging"),this._lastTarget=i.target||i.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Ee(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(d),this._moving=!0,this._lastEvent=i,this._updatePosition())}},_updatePosition:function(){var i={originalEvent:this._lastEvent};this.fire("predrag",i),Ct(this._element,this._newPos),this.fire("drag",i)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(i){mt(document.body,"leaflet-dragging"),this._lastTarget&&(mt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),gt(document,"mousemove touchmove",this._onMove,this),gt(document,"mouseup touchend touchcancel",this._onUp,this),rs(),yn();var l=this._moved&&this._moving;this._moving=!1,wn._dragging=!1,l&&this.fire("dragend",{noInertia:i,distance:this._newPos.distanceTo(this._startPos)})}});function Ws(i,l,d){var m,E=[1,4,2,8],P,z,K,J,le,we,Fe,et;for(P=0,we=i.length;P<we;P++)i[P]._code=Y(i[P],l);for(K=0;K<4;K++){for(Fe=E[K],m=[],P=0,we=i.length,z=we-1;P<we;z=P++)J=i[P],le=i[z],J._code&Fe?le._code&Fe||(et=G(le,J,Fe,l,d),et._code=Y(et,l),m.push(et)):(le._code&Fe&&(et=G(le,J,Fe,l,d),et._code=Y(et,l),m.push(et)),m.push(J));i=m}return i}function Yo(i,l){var d,m,E,P,z,K,J,le,we;if(!i||i.length===0)throw new Error("latlngs not passed");ut(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var Fe=xe([0,0]),et=Ne(i),Yt=et.getNorthWest().distanceTo(et.getSouthWest())*et.getNorthEast().distanceTo(et.getNorthWest());Yt<1700&&(Fe=$s(i));var Wt=i.length,Un=[];for(d=0;d<Wt;d++){var En=xe(i[d]);Un.push(l.project(xe([En.lat-Fe.lat,En.lng-Fe.lng])))}for(K=J=le=0,d=0,m=Wt-1;d<Wt;m=d++)E=Un[d],P=Un[m],z=E.y*P.x-P.y*E.x,J+=(E.x+P.x)*z,le+=(E.y+P.y)*z,K+=z*3;K===0?we=Un[0]:we=[J/K,le/K];var io=l.unproject(oe(we));return xe([io.lat+Fe.lat,io.lng+Fe.lng])}function $s(i){for(var l=0,d=0,m=0,E=0;E<i.length;E++){var P=xe(i[E]);l+=P.lat,d+=P.lng,m++}return xe([l/m,d/m])}var qs={__proto__:null,clipPolygon:Ws,polygonCenter:Yo,centroid:$s};function Ht(i,l){if(!l||!i.length)return i.slice();var d=l*l;return i=x(i,d),i=ki(i,d),i}function Jo(i,l,d){return Math.sqrt(He(i,l,d,!0))}function Ha(i,l,d){return He(i,l,d)}function ki(i,l){var d=i.length,m=typeof Uint8Array<"u"?Uint8Array:Array,E=new m(d);E[0]=E[d-1]=1,h(i,E,l,0,d-1);var P,z=[];for(P=0;P<d;P++)E[P]&&z.push(i[P]);return z}function h(i,l,d,m,E){var P=0,z,K,J;for(K=m+1;K<=E-1;K++)J=He(i[K],i[m],i[E],!0),J>P&&(z=K,P=J);P>d&&(l[z]=1,h(i,l,d,m,z),h(i,l,d,z,E))}function x(i,l){for(var d=[i[0]],m=1,E=0,P=i.length;m<P;m++)_e(i[m],i[E])>l&&(d.push(i[m]),E=m);return E<P-1&&d.push(i[P-1]),d}var I;function C(i,l,d,m,E){var P=m?I:Y(i,d),z=Y(l,d),K,J,le;for(I=z;;){if(!(P|z))return[i,l];if(P&z)return!1;K=P||z,J=G(i,l,K,d,E),le=Y(J,d),K===P?(i=J,P=le):(l=J,z=le)}}function G(i,l,d,m,E){var P=l.x-i.x,z=l.y-i.y,K=m.min,J=m.max,le,we;return d&8?(le=i.x+P*(J.y-i.y)/z,we=J.y):d&4?(le=i.x+P*(K.y-i.y)/z,we=K.y):d&2?(le=J.x,we=i.y+z*(J.x-i.x)/P):d&1&&(le=K.x,we=i.y+z*(K.x-i.x)/P),new X(le,we,E)}function Y(i,l){var d=0;return i.x<l.min.x?d|=1:i.x>l.max.x&&(d|=2),i.y<l.min.y?d|=4:i.y>l.max.y&&(d|=8),d}function _e(i,l){var d=l.x-i.x,m=l.y-i.y;return d*d+m*m}function He(i,l,d,m){var E=l.x,P=l.y,z=d.x-E,K=d.y-P,J=z*z+K*K,le;return J>0&&(le=((i.x-E)*z+(i.y-P)*K)/J,le>1?(E=d.x,P=d.y):le>0&&(E+=z*le,P+=K*le)),z=i.x-E,K=i.y-P,m?z*z+K*K:new X(E,P)}function ut(i){return!Te(i[0])||typeof i[0][0]!="object"&&typeof i[0][0]<"u"}function ft(i){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),ut(i)}function Rt(i,l){var d,m,E,P,z,K,J,le;if(!i||i.length===0)throw new Error("latlngs not passed");ut(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var we=xe([0,0]),Fe=Ne(i),et=Fe.getNorthWest().distanceTo(Fe.getSouthWest())*Fe.getNorthEast().distanceTo(Fe.getNorthWest());et<1700&&(we=$s(i));var Yt=i.length,Wt=[];for(d=0;d<Yt;d++){var Un=xe(i[d]);Wt.push(l.project(xe([Un.lat-we.lat,Un.lng-we.lng])))}for(d=0,m=0;d<Yt-1;d++)m+=Wt[d].distanceTo(Wt[d+1])/2;if(m===0)le=Wt[0];else for(d=0,P=0;d<Yt-1;d++)if(z=Wt[d],K=Wt[d+1],E=z.distanceTo(K),P+=E,P>m){J=(P-m)/E,le=[K.x-J*(K.x-z.x),K.y-J*(K.y-z.y)];break}var En=l.unproject(oe(le));return xe([En.lat+we.lat,En.lng+we.lng])}var Fn={__proto__:null,simplify:Ht,pointToSegmentDistance:Jo,closestPointOnSegment:Ha,clipSegment:C,_getEdgeIntersection:G,_getBitCode:Y,_sqClosestPointOnSegment:He,isFlat:ut,_flat:ft,polylineCenter:Rt},hr={project:function(i){return new X(i.lng,i.lat)},unproject:function(i){return new Se(i.y,i.x)},bounds:new W([-180,-90],[180,90])},Yn={R:6378137,R_MINOR:6356752314245179e-9,bounds:new W([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(i){var l=Math.PI/180,d=this.R,m=i.lat*l,E=this.R_MINOR/d,P=Math.sqrt(1-E*E),z=P*Math.sin(m),K=Math.tan(Math.PI/4-m/2)/Math.pow((1-z)/(1+z),P/2);return m=-d*Math.log(Math.max(K,1e-10)),new X(i.lng*l*d,m)},unproject:function(i){for(var l=180/Math.PI,d=this.R,m=this.R_MINOR/d,E=Math.sqrt(1-m*m),P=Math.exp(-i.y/d),z=Math.PI/2-2*Math.atan(P),K=0,J=.1,le;K<15&&Math.abs(J)>1e-7;K++)le=E*Math.sin(z),le=Math.pow((1-le)/(1+le),E/2),J=Math.PI/2-2*Math.atan(P*le)-z,z+=J;return new Se(z*l,i.x*l/d)}},Mr={__proto__:null,LonLat:hr,Mercator:Yn,SphericalMercator:dt},Gs=a({},re,{code:"EPSG:3395",projection:Yn,transformation:(function(){var i=.5/(Math.PI*Yn.R);return jt(i,.5,-i,.5)})()}),Ks=a({},re,{code:"EPSG:4326",projection:hr,transformation:jt(1/180,1,-1/180,.5)}),ud=a({},Xe,{projection:hr,transformation:jt(1,0,-1,0),scale:function(i){return Math.pow(2,i)},zoom:function(i){return Math.log(i)/Math.LN2},distance:function(i,l){var d=l.lng-i.lng,m=l.lat-i.lat;return Math.sqrt(d*d+m*m)},infinite:!0});Xe.Earth=re,Xe.EPSG3395=Gs,Xe.EPSG3857=Nn,Xe.EPSG900913=di,Xe.EPSG4326=Ks,Xe.Simple=ud;var dr=Ve.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(i){return i.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(i){return i&&i.removeLayer(this),this},getPane:function(i){return this._map.getPane(i?this.options[i]||i:this.options.pane)},addInteractiveTarget:function(i){return this._map._targets[w(i)]=this,this},removeInteractiveTarget:function(i){return delete this._map._targets[w(i)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(i){var l=i.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var d=this.getEvents();l.on(d,this),this.once("remove",function(){l.off(d,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});nt.include({addLayer:function(i){if(!i._layerAdd)throw new Error("The provided object is not a Layer.");var l=w(i);return this._layers[l]?this:(this._layers[l]=i,i._mapToAdd=this,i.beforeAdd&&i.beforeAdd(this),this.whenReady(i._layerAdd,i),this)},removeLayer:function(i){var l=w(i);return this._layers[l]?(this._loaded&&i.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:i}),i.fire("remove")),i._map=i._mapToAdd=null,this):this},hasLayer:function(i){return w(i)in this._layers},eachLayer:function(i,l){for(var d in this._layers)i.call(l,this._layers[d]);return this},_addLayers:function(i){i=i?Te(i)?i:[i]:[];for(var l=0,d=i.length;l<d;l++)this.addLayer(i[l])},_addZoomLimit:function(i){(!isNaN(i.options.maxZoom)||!isNaN(i.options.minZoom))&&(this._zoomBoundLayers[w(i)]=i,this._updateZoomLevels())},_removeZoomLimit:function(i){var l=w(i);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var i=1/0,l=-1/0,d=this._getZoomSpan();for(var m in this._zoomBoundLayers){var E=this._zoomBoundLayers[m].options;i=E.minZoom===void 0?i:Math.min(i,E.minZoom),l=E.maxZoom===void 0?l:Math.max(l,E.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=i===1/0?void 0:i,d!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ci=dr.extend({initialize:function(i,l){q(this,l),this._layers={};var d,m;if(i)for(d=0,m=i.length;d<m;d++)this.addLayer(i[d])},addLayer:function(i){var l=this.getLayerId(i);return this._layers[l]=i,this._map&&this._map.addLayer(i),this},removeLayer:function(i){var l=i in this._layers?i:this.getLayerId(i);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(i){var l=typeof i=="number"?i:this.getLayerId(i);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(i){var l=Array.prototype.slice.call(arguments,1),d,m;for(d in this._layers)m=this._layers[d],m[i]&&m[i].apply(m,l);return this},onAdd:function(i){this.eachLayer(i.addLayer,i)},onRemove:function(i){this.eachLayer(i.removeLayer,i)},eachLayer:function(i,l){for(var d in this._layers)i.call(l,this._layers[d]);return this},getLayer:function(i){return this._layers[i]},getLayers:function(){var i=[];return this.eachLayer(i.push,i),i},setZIndex:function(i){return this.invoke("setZIndex",i)},getLayerId:function(i){return w(i)}}),Xo=function(i,l){return new Ci(i,l)},ei=Ci.extend({addLayer:function(i){return this.hasLayer(i)?this:(i.addEventParent(this),Ci.prototype.addLayer.call(this,i),this.fire("layeradd",{layer:i}))},removeLayer:function(i){return this.hasLayer(i)?(i in this._layers&&(i=this._layers[i]),i.removeEventParent(this),Ci.prototype.removeLayer.call(this,i),this.fire("layerremove",{layer:i})):this},setStyle:function(i){return this.invoke("setStyle",i)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var i=new Me;for(var l in this._layers){var d=this._layers[l];i.extend(d.getBounds?d.getBounds():d.getLatLng())}return i}}),nc=function(i,l){return new ei(i,l)},cs=ye.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(i){q(this,i)},createIcon:function(i){return this._createIcon("icon",i)},createShadow:function(i){return this._createIcon("shadow",i)},_createIcon:function(i,l){var d=this._getIconUrl(i);if(!d){if(i==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var m=this._createImg(d,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(m,i),(this.options.crossOrigin||this.options.crossOrigin==="")&&(m.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),m},_setIconStyles:function(i,l){var d=this.options,m=d[l+"Size"];typeof m=="number"&&(m=[m,m]);var E=oe(m),P=oe(l==="shadow"&&d.shadowAnchor||d.iconAnchor||E&&E.divideBy(2,!0));i.className="leaflet-marker-"+l+" "+(d.className||""),P&&(i.style.marginLeft=-P.x+"px",i.style.marginTop=-P.y+"px"),E&&(i.style.width=E.x+"px",i.style.height=E.y+"px")},_createImg:function(i,l){return l=l||document.createElement("img"),l.src=i,l},_getIconUrl:function(i){return Ce.retina&&this.options[i+"RetinaUrl"]||this.options[i+"Url"]}});function rc(i){return new cs(i)}var Zs=cs.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(i){return typeof Zs.imagePath!="string"&&(Zs.imagePath=this._detectIconPath()),(this.options.imagePath||Zs.imagePath)+cs.prototype._getIconUrl.call(this,i)},_stripUrl:function(i){var l=function(d,m,E){var P=m.exec(d);return P&&P[E]};return i=l(i,/^url\((['"])?(.+)\1\)$/,2),i&&l(i,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var i=Qe("div","leaflet-default-icon-path",document.body),l=Ti(i,"background-image")||Ti(i,"backgroundImage");if(document.body.removeChild(i),l=this._stripUrl(l),l)return l;var d=document.querySelector('link[href$="leaflet.css"]');return d?d.href.substring(0,d.href.length-11-1):""}}),$l=cn.extend({initialize:function(i){this._marker=i},addHooks:function(){var i=this._marker._icon;this._draggable||(this._draggable=new wn(i,i,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Ee(i,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&mt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(i){var l=this._marker,d=l._map,m=this._marker.options.autoPanSpeed,E=this._marker.options.autoPanPadding,P=ur(l._icon),z=d.getPixelBounds(),K=d.getPixelOrigin(),J=ne(z.min._subtract(K).add(E),z.max._subtract(K).subtract(E));if(!J.contains(P)){var le=oe((Math.max(J.max.x,P.x)-J.max.x)/(z.max.x-J.max.x)-(Math.min(J.min.x,P.x)-J.min.x)/(z.min.x-J.min.x),(Math.max(J.max.y,P.y)-J.max.y)/(z.max.y-J.max.y)-(Math.min(J.min.y,P.y)-J.min.y)/(z.min.y-J.min.y)).multiplyBy(m);d.panBy(le,{animate:!1}),this._draggable._newPos._add(le),this._draggable._startPos._add(le),Ct(l._icon,this._draggable._newPos),this._onDrag(i),this._panRequest=j(this._adjustPan.bind(this,i))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(i){this._marker.options.autoPan&&(R(this._panRequest),this._panRequest=j(this._adjustPan.bind(this,i)))},_onDrag:function(i){var l=this._marker,d=l._shadow,m=ur(l._icon),E=l._map.layerPointToLatLng(m);d&&Ct(d,m),l._latlng=E,i.latlng=E,i.oldLatLng=this._oldLatLng,l.fire("move",i).fire("drag",i)},_onDragEnd:function(i){R(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",i)}}),ti=dr.extend({options:{icon:new Zs,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(i,l){q(this,l),this._latlng=xe(i)},onAdd:function(i){this._zoomAnimated=this._zoomAnimated&&i.options.markerZoomAnimation,this._zoomAnimated&&i.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(i){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&i.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(i){var l=this._latlng;return this._latlng=xe(i),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(i){return this.options.zIndexOffset=i,this.update()},getIcon:function(){return this.options.icon},setIcon:function(i){return this.options.icon=i,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var i=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(i)}return this},_initIcon:function(){var i=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),d=i.icon.createIcon(this._icon),m=!1;d!==this._icon&&(this._icon&&this._removeIcon(),m=!0,i.title&&(d.title=i.title),d.tagName==="IMG"&&(d.alt=i.alt||"")),Ee(d,l),i.keyboard&&(d.tabIndex="0",d.setAttribute("role","button")),this._icon=d,i.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ze(d,"focus",this._panOnFocus,this);var E=i.icon.createShadow(this._shadow),P=!1;E!==this._shadow&&(this._removeShadow(),P=!0),E&&(Ee(E,l),E.alt=""),this._shadow=E,i.opacity<1&&this._updateOpacity(),m&&this.getPane().appendChild(this._icon),this._initInteraction(),E&&P&&this.getPane(i.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&gt(this._icon,"focus",this._panOnFocus,this),lt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&lt(this._shadow),this._shadow=null},_setPos:function(i){this._icon&&Ct(this._icon,i),this._shadow&&Ct(this._shadow,i),this._zIndex=i.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(i){this._icon&&(this._icon.style.zIndex=this._zIndex+i)},_animateZoom:function(i){var l=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(Ee(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),$l)){var i=this.options.draggable;this.dragging&&(i=this.dragging.enabled(),this.dragging.disable()),this.dragging=new $l(this),i&&this.dragging.enable()}},setOpacity:function(i){return this.options.opacity=i,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var i=this.options.opacity;this._icon&&tn(this._icon,i),this._shadow&&tn(this._shadow,i)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var i=this._map;if(i){var l=this.options.icon.options,d=l.iconSize?oe(l.iconSize):oe(0,0),m=l.iconAnchor?oe(l.iconAnchor):oe(0,0);i.panInside(this._latlng,{paddingTopLeft:m,paddingBottomRight:d.subtract(m)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function cd(i,l){return new ti(i,l)}var Ai=dr.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(i){this._renderer=i.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(i){return q(this,i),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&i&&Object.prototype.hasOwnProperty.call(i,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Wa=Ai.extend({options:{fill:!0,radius:10},initialize:function(i,l){q(this,l),this._latlng=xe(i),this._radius=this.options.radius},setLatLng:function(i){var l=this._latlng;return this._latlng=xe(i),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(i){return this.options.radius=this._radius=i,this.redraw()},getRadius:function(){return this._radius},setStyle:function(i){var l=i&&i.radius||this._radius;return Ai.prototype.setStyle.call(this,i),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var i=this._radius,l=this._radiusY||i,d=this._clickTolerance(),m=[i+d,l+d];this._pxBounds=new W(this._point.subtract(m),this._point.add(m))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(i){return i.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function ic(i,l){return new Wa(i,l)}var $a=Wa.extend({initialize:function(i,l,d){if(typeof l=="number"&&(l=a({},d,{radius:l})),q(this,l),this._latlng=xe(i),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(i){return this._mRadius=i,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var i=[this._radius,this._radiusY||this._radius];return new Me(this._map.layerPointToLatLng(this._point.subtract(i)),this._map.layerPointToLatLng(this._point.add(i)))},setStyle:Ai.prototype.setStyle,_project:function(){var i=this._latlng.lng,l=this._latlng.lat,d=this._map,m=d.options.crs;if(m.distance===re.distance){var E=Math.PI/180,P=this._mRadius/re.R/E,z=d.project([l+P,i]),K=d.project([l-P,i]),J=z.add(K).divideBy(2),le=d.unproject(J).lat,we=Math.acos((Math.cos(P*E)-Math.sin(l*E)*Math.sin(le*E))/(Math.cos(l*E)*Math.cos(le*E)))/E;(isNaN(we)||we===0)&&(we=P/Math.cos(Math.PI/180*l)),this._point=J.subtract(d.getPixelOrigin()),this._radius=isNaN(we)?0:J.x-d.project([le,i-we]).x,this._radiusY=J.y-z.y}else{var Fe=m.unproject(m.project(this._latlng).subtract([this._mRadius,0]));this._point=d.latLngToLayerPoint(this._latlng),this._radius=this._point.x-d.latLngToLayerPoint(Fe).x}this._updateBounds()}});function ea(i,l,d){return new $a(i,l,d)}var zn=Ai.extend({options:{smoothFactor:1,noClip:!1},initialize:function(i,l){q(this,l),this._setLatLngs(i)},getLatLngs:function(){return this._latlngs},setLatLngs:function(i){return this._setLatLngs(i),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(i){for(var l=1/0,d=null,m=He,E,P,z=0,K=this._parts.length;z<K;z++)for(var J=this._parts[z],le=1,we=J.length;le<we;le++){E=J[le-1],P=J[le];var Fe=m(i,E,P,!0);Fe<l&&(l=Fe,d=m(i,E,P))}return d&&(d.distance=Math.sqrt(l)),d},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Rt(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(i,l){return l=l||this._defaultShape(),i=xe(i),l.push(i),this._bounds.extend(i),this.redraw()},_setLatLngs:function(i){this._bounds=new Me,this._latlngs=this._convertLatLngs(i)},_defaultShape:function(){return ut(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(i){for(var l=[],d=ut(i),m=0,E=i.length;m<E;m++)d?(l[m]=xe(i[m]),this._bounds.extend(l[m])):l[m]=this._convertLatLngs(i[m]);return l},_project:function(){var i=new W;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,i),this._bounds.isValid()&&i.isValid()&&(this._rawPxBounds=i,this._updateBounds())},_updateBounds:function(){var i=this._clickTolerance(),l=new X(i,i);this._rawPxBounds&&(this._pxBounds=new W([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(i,l,d){var m=i[0]instanceof Se,E=i.length,P,z;if(m){for(z=[],P=0;P<E;P++)z[P]=this._map.latLngToLayerPoint(i[P]),d.extend(z[P]);l.push(z)}else for(P=0;P<E;P++)this._projectLatlngs(i[P],l,d)},_clipPoints:function(){var i=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,d,m,E,P,z,K,J;for(d=0,E=0,P=this._rings.length;d<P;d++)for(J=this._rings[d],m=0,z=J.length;m<z-1;m++)K=C(J[m],J[m+1],i,m,!0),K&&(l[E]=l[E]||[],l[E].push(K[0]),(K[1]!==J[m+1]||m===z-2)&&(l[E].push(K[1]),E++))}},_simplifyPoints:function(){for(var i=this._parts,l=this.options.smoothFactor,d=0,m=i.length;d<m;d++)i[d]=Ht(i[d],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(i,l){var d,m,E,P,z,K,J=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(d=0,P=this._parts.length;d<P;d++)for(K=this._parts[d],m=0,z=K.length,E=z-1;m<z;E=m++)if(!(!l&&m===0)&&Jo(i,K[E],K[m])<=J)return!0;return!1}});function hd(i,l){return new zn(i,l)}zn._flat=ft;var ni=zn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Yo(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(i){var l=zn.prototype._convertLatLngs.call(this,i),d=l.length;return d>=2&&l[0]instanceof Se&&l[0].equals(l[d-1])&&l.pop(),l},_setLatLngs:function(i){zn.prototype._setLatLngs.call(this,i),ut(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return ut(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var i=this._renderer._bounds,l=this.options.weight,d=new X(l,l);if(i=new W(i.min.subtract(d),i.max.add(d)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}for(var m=0,E=this._rings.length,P;m<E;m++)P=Ws(this._rings[m],i,!0),P.length&&this._parts.push(P)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(i){var l=!1,d,m,E,P,z,K,J,le;if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(P=0,J=this._parts.length;P<J;P++)for(d=this._parts[P],z=0,le=d.length,K=le-1;z<le;K=z++)m=d[z],E=d[K],m.y>i.y!=E.y>i.y&&i.x<(E.x-m.x)*(i.y-m.y)/(E.y-m.y)+m.x&&(l=!l);return l||zn.prototype._containsPoint.call(this,i,!0)}});function dd(i,l){return new ni(i,l)}var Or=ei.extend({initialize:function(i,l){q(this,l),this._layers={},i&&this.addData(i)},addData:function(i){var l=Te(i)?i:i.features,d,m,E;if(l){for(d=0,m=l.length;d<m;d++)E=l[d],(E.geometries||E.geometry||E.features||E.coordinates)&&this.addData(E);return this}var P=this.options;if(P.filter&&!P.filter(i))return this;var z=Qs(i,P);return z?(z.feature=Qa(i),z.defaultOptions=z.options,this.resetStyle(z),P.onEachFeature&&P.onEachFeature(i,z),this.addLayer(z)):this},resetStyle:function(i){return i===void 0?this.eachLayer(this.resetStyle,this):(i.options=a({},i.defaultOptions),this._setLayerStyle(i,this.options.style),this)},setStyle:function(i){return this.eachLayer(function(l){this._setLayerStyle(l,i)},this)},_setLayerStyle:function(i,l){i.setStyle&&(typeof l=="function"&&(l=l(i.feature)),i.setStyle(l))}});function Qs(i,l){var d=i.type==="Feature"?i.geometry:i,m=d?d.coordinates:null,E=[],P=l&&l.pointToLayer,z=l&&l.coordsToLatLng||Ga,K,J,le,we;if(!m&&!d)return null;switch(d.type){case"Point":return K=z(m),qa(P,i,K,l);case"MultiPoint":for(le=0,we=m.length;le<we;le++)K=z(m[le]),E.push(qa(P,i,K,l));return new ei(E);case"LineString":case"MultiLineString":return J=ta(m,d.type==="LineString"?0:1,z),new zn(J,l);case"Polygon":case"MultiPolygon":return J=ta(m,d.type==="Polygon"?1:2,z),new ni(J,l);case"GeometryCollection":for(le=0,we=d.geometries.length;le<we;le++){var Fe=Qs({geometry:d.geometries[le],type:"Feature",properties:i.properties},l);Fe&&E.push(Fe)}return new ei(E);case"FeatureCollection":for(le=0,we=d.features.length;le<we;le++){var et=Qs(d.features[le],l);et&&E.push(et)}return new ei(E);default:throw new Error("Invalid GeoJSON object.")}}function qa(i,l,d,m){return i?i(l,d):new ti(d,m&&m.markersInheritOptions&&m)}function Ga(i){return new Se(i[1],i[0],i[2])}function ta(i,l,d){for(var m=[],E=0,P=i.length,z;E<P;E++)z=l?ta(i[E],l-1,d):(d||Ga)(i[E]),m.push(z);return m}function Ka(i,l){return i=xe(i),i.alt!==void 0?[N(i.lng,l),N(i.lat,l),N(i.alt,l)]:[N(i.lng,l),N(i.lat,l)]}function Za(i,l,d,m){for(var E=[],P=0,z=i.length;P<z;P++)E.push(l?Za(i[P],ut(i[P])?0:l-1,d,m):Ka(i[P],m));return!l&&d&&E.length>0&&E.push(E[0].slice()),E}function Ys(i,l){return i.feature?a({},i.feature,{geometry:l}):Qa(l)}function Qa(i){return i.type==="Feature"||i.type==="FeatureCollection"?i:{type:"Feature",properties:{},geometry:i}}var ql={toGeoJSON:function(i){return Ys(this,{type:"Point",coordinates:Ka(this.getLatLng(),i)})}};ti.include(ql),$a.include(ql),Wa.include(ql),zn.include({toGeoJSON:function(i){var l=!ut(this._latlngs),d=Za(this._latlngs,l?1:0,!1,i);return Ys(this,{type:(l?"Multi":"")+"LineString",coordinates:d})}}),ni.include({toGeoJSON:function(i){var l=!ut(this._latlngs),d=l&&!ut(this._latlngs[0]),m=Za(this._latlngs,d?2:l?1:0,!0,i);return l||(m=[m]),Ys(this,{type:(d?"Multi":"")+"Polygon",coordinates:m})}}),Ci.include({toMultiPoint:function(i){var l=[];return this.eachLayer(function(d){l.push(d.toGeoJSON(i).geometry.coordinates)}),Ys(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(i){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(i);var d=l==="GeometryCollection",m=[];return this.eachLayer(function(E){if(E.toGeoJSON){var P=E.toGeoJSON(i);if(d)m.push(P.geometry);else{var z=Qa(P);z.type==="FeatureCollection"?m.push.apply(m,z.features):m.push(z)}}}),d?Ys(this,{geometries:m,type:"GeometryCollection"}):{type:"FeatureCollection",features:m}}});function sc(i,l){return new Or(i,l)}var fr=sc,Ni=dr.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(i,l,d){this._url=i,this._bounds=Ne(l),q(this,d)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Ee(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){lt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(i){return this.options.opacity=i,this._image&&this._updateOpacity(),this},setStyle:function(i){return i.opacity&&this.setOpacity(i.opacity),this},bringToFront:function(){return this._map&&Kn(this._image),this},bringToBack:function(){return this._map&&un(this._image),this},setUrl:function(i){return this._url=i,this._image&&(this._image.src=i),this},setBounds:function(i){return this._bounds=Ne(i),this._map&&this._reset(),this},getEvents:function(){var i={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var i=this._url.tagName==="IMG",l=this._image=i?this._url:Qe("img");if(Ee(l,"leaflet-image-layer"),this._zoomAnimated&&Ee(l,"leaflet-zoom-animated"),this.options.className&&Ee(l,this.options.className),l.onselectstart=k,l.onmousemove=k,l.onload=p(this.fire,this,"load"),l.onerror=p(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),i){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(i){var l=this._map.getZoomScale(i.zoom),d=this._map._latLngBoundsToNewLayerBounds(this._bounds,i.zoom,i.center).min;Dn(this._image,d,l)},_reset:function(){var i=this._image,l=new W(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),d=l.getSize();Ct(i,l.min),i.style.width=d.x+"px",i.style.height=d.y+"px"},_updateOpacity:function(){tn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var i=this.options.errorOverlayUrl;i&&this._url!==i&&(this._url=i,this._image.src=i)},getCenter:function(){return this._bounds.getCenter()}}),oc=function(i,l,d){return new Ni(i,l,d)},Gl=Ni.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var i=this._url.tagName==="VIDEO",l=this._image=i?this._url:Qe("video");if(Ee(l,"leaflet-image-layer"),this._zoomAnimated&&Ee(l,"leaflet-zoom-animated"),this.options.className&&Ee(l,this.options.className),l.onselectstart=k,l.onmousemove=k,l.onloadeddata=p(this.fire,this,"load"),i){for(var d=l.getElementsByTagName("source"),m=[],E=0;E<d.length;E++)m.push(d[E].src);this._url=d.length>0?m:[l.src];return}Te(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var P=0;P<this._url.length;P++){var z=Qe("source");z.src=this._url[P],l.appendChild(z)}}});function ac(i,l,d){return new Gl(i,l,d)}var Kl=Ni.extend({_initImage:function(){var i=this._image=this._url;Ee(i,"leaflet-image-layer"),this._zoomAnimated&&Ee(i,"leaflet-zoom-animated"),this.options.className&&Ee(i,this.options.className),i.onselectstart=k,i.onmousemove=k}});function Zl(i,l,d){return new Kl(i,l,d)}var jr=dr.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(i,l){i&&(i instanceof Se||Te(i))?(this._latlng=xe(i),q(this,l)):(q(this,i),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(i){return i=arguments.length?i:this._source._map,i.hasLayer(this)||i.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(i){return this._map?this.close():(arguments.length?this._source=i:i=this._source,this._prepareOpen(),this.openOn(i._map)),this},onAdd:function(i){this._zoomAnimated=i._zoomAnimated,this._container||this._initLayout(),i._fadeAnimated&&tn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),i._fadeAnimated&&tn(this._container,1),this.bringToFront(),this.options.interactive&&(Ee(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(i){i._fadeAnimated?(tn(this._container,0),this._removeTimeout=setTimeout(p(lt,void 0,this._container),200)):lt(this._container),this.options.interactive&&(mt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(i){return this._latlng=xe(i),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(i){return this._content=i,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var i={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Kn(this._container),this},bringToBack:function(){return this._map&&un(this._container),this},_prepareOpen:function(i){var l=this._source;if(!l._map)return!1;if(l instanceof ei){l=null;var d=this._source._layers;for(var m in d)if(d[m]._map){l=d[m];break}if(!l)return!1;this._source=l}if(!i)if(l.getCenter)i=l.getCenter();else if(l.getLatLng)i=l.getLatLng();else if(l.getBounds)i=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(i),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var i=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")i.innerHTML=l;else{for(;i.hasChildNodes();)i.removeChild(i.firstChild);i.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var i=this._map.latLngToLayerPoint(this._latlng),l=oe(this.options.offset),d=this._getAnchor();this._zoomAnimated?Ct(this._container,i.add(d)):l=l.add(i).add(d);var m=this._containerBottom=-l.y,E=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=m+"px",this._container.style.left=E+"px"}},_getAnchor:function(){return[0,0]}});nt.include({_initOverlay:function(i,l,d,m){var E=l;return E instanceof i||(E=new i(m).setContent(l)),d&&E.setLatLng(d),E}}),dr.include({_initOverlay:function(i,l,d,m){var E=d;return E instanceof i?(q(E,m),E._source=this):(E=l&&!m?l:new i(m,this),E.setContent(d)),E}});var Ya=jr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(i){return i=arguments.length?i:this._source._map,!i.hasLayer(this)&&i._popup&&i._popup.options.autoClose&&i.removeLayer(i._popup),i._popup=this,jr.prototype.openOn.call(this,i)},onAdd:function(i){jr.prototype.onAdd.call(this,i),i.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Ai||this._source.on("preclick",at))},onRemove:function(i){jr.prototype.onRemove.call(this,i),i.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Ai||this._source.off("preclick",at))},getEvents:function(){var i=jr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(i.preclick=this.close),this.options.keepInView&&(i.moveend=this._adjustPan),i},_initLayout:function(){var i="leaflet-popup",l=this._container=Qe("div",i+" "+(this.options.className||"")+" leaflet-zoom-animated"),d=this._wrapper=Qe("div",i+"-content-wrapper",l);if(this._contentNode=Qe("div",i+"-content",d),ss(l),Us(this._contentNode),ze(l,"contextmenu",at),this._tipContainer=Qe("div",i+"-tip-container",l),this._tip=Qe("div",i+"-tip",this._tipContainer),this.options.closeButton){var m=this._closeButton=Qe("a",i+"-close-button",l);m.setAttribute("role","button"),m.setAttribute("aria-label","Close popup"),m.href="#close",m.innerHTML='<span aria-hidden="true">&#215;</span>',ze(m,"click",function(E){wt(E),this.close()},this)}},_updateLayout:function(){var i=this._contentNode,l=i.style;l.width="",l.whiteSpace="nowrap";var d=i.offsetWidth;d=Math.min(d,this.options.maxWidth),d=Math.max(d,this.options.minWidth),l.width=d+1+"px",l.whiteSpace="",l.height="";var m=i.offsetHeight,E=this.options.maxHeight,P="leaflet-popup-scrolled";E&&m>E?(l.height=E+"px",Ee(i,P)):mt(i,P),this._containerWidth=this._container.offsetWidth},_animateZoom:function(i){var l=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center),d=this._getAnchor();Ct(this._container,l.add(d))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var i=this._map,l=parseInt(Ti(this._container,"marginBottom"),10)||0,d=this._container.offsetHeight+l,m=this._containerWidth,E=new X(this._containerLeft,-d-this._containerBottom);E._add(ur(this._container));var P=i.layerPointToContainerPoint(E),z=oe(this.options.autoPanPadding),K=oe(this.options.autoPanPaddingTopLeft||z),J=oe(this.options.autoPanPaddingBottomRight||z),le=i.getSize(),we=0,Fe=0;P.x+m+J.x>le.x&&(we=P.x+m-le.x+J.x),P.x-we-K.x<0&&(we=P.x-K.x),P.y+d+J.y>le.y&&(Fe=P.y+d-le.y+J.y),P.y-Fe-K.y<0&&(Fe=P.y-K.y),(we||Fe)&&(this.options.keepInView&&(this._autopanning=!0),i.fire("autopanstart").panBy([we,Fe]))}},_getAnchor:function(){return oe(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Js=function(i,l){return new Ya(i,l)};nt.mergeOptions({closePopupOnClick:!0}),nt.include({openPopup:function(i,l,d){return this._initOverlay(Ya,i,l,d).openOn(this),this},closePopup:function(i){return i=arguments.length?i:this._popup,i&&i.close(),this}}),dr.include({bindPopup:function(i,l){return this._popup=this._initOverlay(Ya,this._popup,i,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(i){return this._popup&&(this instanceof ei||(this._popup._source=this),this._popup._prepareOpen(i||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(i){return this._popup&&this._popup.setContent(i),this},getPopup:function(){return this._popup},_openPopup:function(i){if(!(!this._popup||!this._map)){vn(i);var l=i.layer||i.target;if(this._popup._source===l&&!(l instanceof Ai)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(i.latlng);return}this._popup._source=l,this.openPopup(i.latlng)}},_movePopup:function(i){this._popup.setLatLng(i.latlng)},_onKeyPress:function(i){i.originalEvent.keyCode===13&&this._openPopup(i)}});var Xs=jr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(i){jr.prototype.onAdd.call(this,i),this.setOpacity(this.options.opacity),i.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(i){jr.prototype.onRemove.call(this,i),i.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var i=jr.prototype.getEvents.call(this);return this.options.permanent||(i.preclick=this.close),i},_initLayout:function(){var i="leaflet-tooltip",l=i+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Qe("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+w(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(i){var l,d,m=this._map,E=this._container,P=m.latLngToContainerPoint(m.getCenter()),z=m.layerPointToContainerPoint(i),K=this.options.direction,J=E.offsetWidth,le=E.offsetHeight,we=oe(this.options.offset),Fe=this._getAnchor();K==="top"?(l=J/2,d=le):K==="bottom"?(l=J/2,d=0):K==="center"?(l=J/2,d=le/2):K==="right"?(l=0,d=le/2):K==="left"?(l=J,d=le/2):z.x<P.x?(K="right",l=0,d=le/2):(K="left",l=J+(we.x+Fe.x)*2,d=le/2),i=i.subtract(oe(l,d,!0)).add(we).add(Fe),mt(E,"leaflet-tooltip-right"),mt(E,"leaflet-tooltip-left"),mt(E,"leaflet-tooltip-top"),mt(E,"leaflet-tooltip-bottom"),Ee(E,"leaflet-tooltip-"+K),Ct(E,i)},_updatePosition:function(){var i=this._map.latLngToLayerPoint(this._latlng);this._setPosition(i)},setOpacity:function(i){this.options.opacity=i,this._container&&tn(this._container,i)},_animateZoom:function(i){var l=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center);this._setPosition(l)},_getAnchor:function(){return oe(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),na=function(i,l){return new Xs(i,l)};nt.include({openTooltip:function(i,l,d){return this._initOverlay(Xs,i,l,d).openOn(this),this},closeTooltip:function(i){return i.close(),this}}),dr.include({bindTooltip:function(i,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Xs,this._tooltip,i,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(i){if(!(!i&&this._tooltipHandlersAdded)){var l=i?"off":"on",d={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?d.add=this._openTooltip:(d.mouseover=this._openTooltip,d.mouseout=this.closeTooltip,d.click=this._openTooltip,this._map?this._addFocusListeners():d.add=this._addFocusListeners),this._tooltip.options.sticky&&(d.mousemove=this._moveTooltip),this[l](d),this._tooltipHandlersAdded=!i}},openTooltip:function(i){return this._tooltip&&(this instanceof ei||(this._tooltip._source=this),this._tooltip._prepareOpen(i)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(i){return this._tooltip&&this._tooltip.setContent(i),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(i){var l=typeof i.getElement=="function"&&i.getElement();l&&(ze(l,"focus",function(){this._tooltip._source=i,this.openTooltip()},this),ze(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(i){var l=typeof i.getElement=="function"&&i.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(i){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(i)});return}this._tooltip._source=i.layer||i.target,this.openTooltip(this._tooltip.options.sticky?i.latlng:void 0)}},_moveTooltip:function(i){var l=i.latlng,d,m;this._tooltip.options.sticky&&i.originalEvent&&(d=this._map.mouseEventToContainerPoint(i.originalEvent),m=this._map.containerPointToLayerPoint(d),l=this._map.layerPointToLatLng(m)),this._tooltip.setLatLng(l)}});var Ja=cs.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(i){var l=i&&i.tagName==="DIV"?i:document.createElement("div"),d=this.options;if(d.html instanceof Element?(ln(l),l.appendChild(d.html)):l.innerHTML=d.html!==!1?d.html:"",d.bgPos){var m=oe(d.bgPos);l.style.backgroundPosition=-m.x+"px "+-m.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function lc(i){return new Ja(i)}cs.Default=Zs;var Ri=dr.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ce.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(i){q(this,i)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(i){i._addZoomLimit(this)},onRemove:function(i){this._removeAllTiles(),lt(this._container),i._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Kn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(un(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(i){return this.options.opacity=i,this._updateOpacity(),this},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var i=this._clampZoom(this._map.getZoom());i!==this._tileZoom&&(this._tileZoom=i,this._updateLevels()),this._update()}return this},getEvents:function(){var i={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=T(this._onMoveEnd,this.options.updateInterval,this)),i.move=this._onMove),this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},createTile:function(){return document.createElement("div")},getTileSize:function(){var i=this.options.tileSize;return i instanceof X?i:new X(i,i)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(i){for(var l=this.getPane().children,d=-i(-1/0,1/0),m=0,E=l.length,P;m<E;m++)P=l[m].style.zIndex,l[m]!==this._container&&P&&(d=i(d,+P));isFinite(d)&&(this.options.zIndex=d+i(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ce.ielt9){tn(this._container,this.options.opacity);var i=+new Date,l=!1,d=!1;for(var m in this._tiles){var E=this._tiles[m];if(!(!E.current||!E.loaded)){var P=Math.min(1,(i-E.loaded)/200);tn(E.el,P),P<1?l=!0:(E.active?d=!0:this._onOpaqueTile(E),E.active=!0)}}d&&!this._noPrune&&this._pruneTiles(),l&&(R(this._fadeFrame),this._fadeFrame=j(this._updateOpacity,this))}},_onOpaqueTile:k,_initContainer:function(){this._container||(this._container=Qe("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var i=this._tileZoom,l=this.options.maxZoom;if(i!==void 0){for(var d in this._levels)d=Number(d),this._levels[d].el.children.length||d===i?(this._levels[d].el.style.zIndex=l-Math.abs(i-d),this._onUpdateLevel(d)):(lt(this._levels[d].el),this._removeTilesAtZoom(d),this._onRemoveLevel(d),delete this._levels[d]);var m=this._levels[i],E=this._map;return m||(m=this._levels[i]={},m.el=Qe("div","leaflet-tile-container leaflet-zoom-animated",this._container),m.el.style.zIndex=l,m.origin=E.project(E.unproject(E.getPixelOrigin()),i).round(),m.zoom=i,this._setZoomTransform(m,E.getCenter(),E.getZoom()),k(m.el.offsetWidth),this._onCreateLevel(m)),this._level=m,m}},_onUpdateLevel:k,_onRemoveLevel:k,_onCreateLevel:k,_pruneTiles:function(){if(this._map){var i,l,d=this._map.getZoom();if(d>this.options.maxZoom||d<this.options.minZoom){this._removeAllTiles();return}for(i in this._tiles)l=this._tiles[i],l.retain=l.current;for(i in this._tiles)if(l=this._tiles[i],l.current&&!l.active){var m=l.coords;this._retainParent(m.x,m.y,m.z,m.z-5)||this._retainChildren(m.x,m.y,m.z,m.z+2)}for(i in this._tiles)this._tiles[i].retain||this._removeTile(i)}},_removeTilesAtZoom:function(i){for(var l in this._tiles)this._tiles[l].coords.z===i&&this._removeTile(l)},_removeAllTiles:function(){for(var i in this._tiles)this._removeTile(i)},_invalidateAll:function(){for(var i in this._levels)lt(this._levels[i].el),this._onRemoveLevel(Number(i)),delete this._levels[i];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(i,l,d,m){var E=Math.floor(i/2),P=Math.floor(l/2),z=d-1,K=new X(+E,+P);K.z=+z;var J=this._tileCoordsToKey(K),le=this._tiles[J];return le&&le.active?(le.retain=!0,!0):(le&&le.loaded&&(le.retain=!0),z>m?this._retainParent(E,P,z,m):!1)},_retainChildren:function(i,l,d,m){for(var E=2*i;E<2*i+2;E++)for(var P=2*l;P<2*l+2;P++){var z=new X(E,P);z.z=d+1;var K=this._tileCoordsToKey(z),J=this._tiles[K];if(J&&J.active){J.retain=!0;continue}else J&&J.loaded&&(J.retain=!0);d+1<m&&this._retainChildren(E,P,d+1,m)}},_resetView:function(i){var l=i&&(i.pinch||i.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(i){this._setView(i.center,i.zoom,!0,i.noUpdate)},_clampZoom:function(i){var l=this.options;return l.minNativeZoom!==void 0&&i<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<i?l.maxNativeZoom:i},_setView:function(i,l,d,m){var E=Math.round(l);this.options.maxZoom!==void 0&&E>this.options.maxZoom||this.options.minZoom!==void 0&&E<this.options.minZoom?E=void 0:E=this._clampZoom(E);var P=this.options.updateWhenZooming&&E!==this._tileZoom;(!m||P)&&(this._tileZoom=E,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),E!==void 0&&this._update(i),d||this._pruneTiles(),this._noPrune=!!d),this._setZoomTransforms(i,l)},_setZoomTransforms:function(i,l){for(var d in this._levels)this._setZoomTransform(this._levels[d],i,l)},_setZoomTransform:function(i,l,d){var m=this._map.getZoomScale(d,i.zoom),E=i.origin.multiplyBy(m).subtract(this._map._getNewPixelOrigin(l,d)).round();Ce.any3d?Dn(i.el,E,m):Ct(i.el,E)},_resetGrid:function(){var i=this._map,l=i.options.crs,d=this._tileSize=this.getTileSize(),m=this._tileZoom,E=this._map.getPixelWorldBounds(this._tileZoom);E&&(this._globalTileRange=this._pxBoundsToTileRange(E)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(i.project([0,l.wrapLng[0]],m).x/d.x),Math.ceil(i.project([0,l.wrapLng[1]],m).x/d.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(i.project([l.wrapLat[0],0],m).y/d.x),Math.ceil(i.project([l.wrapLat[1],0],m).y/d.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(i){var l=this._map,d=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),m=l.getZoomScale(d,this._tileZoom),E=l.project(i,this._tileZoom).floor(),P=l.getSize().divideBy(m*2);return new W(E.subtract(P),E.add(P))},_update:function(i){var l=this._map;if(l){var d=this._clampZoom(l.getZoom());if(i===void 0&&(i=l.getCenter()),this._tileZoom!==void 0){var m=this._getTiledPixelBounds(i),E=this._pxBoundsToTileRange(m),P=E.getCenter(),z=[],K=this.options.keepBuffer,J=new W(E.getBottomLeft().subtract([K,-K]),E.getTopRight().add([K,-K]));if(!(isFinite(E.min.x)&&isFinite(E.min.y)&&isFinite(E.max.x)&&isFinite(E.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var le in this._tiles){var we=this._tiles[le].coords;(we.z!==this._tileZoom||!J.contains(new X(we.x,we.y)))&&(this._tiles[le].current=!1)}if(Math.abs(d-this._tileZoom)>1){this._setView(i,d);return}for(var Fe=E.min.y;Fe<=E.max.y;Fe++)for(var et=E.min.x;et<=E.max.x;et++){var Yt=new X(et,Fe);if(Yt.z=this._tileZoom,!!this._isValidTile(Yt)){var Wt=this._tiles[this._tileCoordsToKey(Yt)];Wt?Wt.current=!0:z.push(Yt)}}if(z.sort(function(En,io){return En.distanceTo(P)-io.distanceTo(P)}),z.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Un=document.createDocumentFragment();for(et=0;et<z.length;et++)this._addTile(z[et],Un);this._level.el.appendChild(Un)}}}},_isValidTile:function(i){var l=this._map.options.crs;if(!l.infinite){var d=this._globalTileRange;if(!l.wrapLng&&(i.x<d.min.x||i.x>d.max.x)||!l.wrapLat&&(i.y<d.min.y||i.y>d.max.y))return!1}if(!this.options.bounds)return!0;var m=this._tileCoordsToBounds(i);return Ne(this.options.bounds).overlaps(m)},_keyToBounds:function(i){return this._tileCoordsToBounds(this._keyToTileCoords(i))},_tileCoordsToNwSe:function(i){var l=this._map,d=this.getTileSize(),m=i.scaleBy(d),E=m.add(d),P=l.unproject(m,i.z),z=l.unproject(E,i.z);return[P,z]},_tileCoordsToBounds:function(i){var l=this._tileCoordsToNwSe(i),d=new Me(l[0],l[1]);return this.options.noWrap||(d=this._map.wrapLatLngBounds(d)),d},_tileCoordsToKey:function(i){return i.x+":"+i.y+":"+i.z},_keyToTileCoords:function(i){var l=i.split(":"),d=new X(+l[0],+l[1]);return d.z=+l[2],d},_removeTile:function(i){var l=this._tiles[i];l&&(lt(l.el),delete this._tiles[i],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(i)}))},_initTile:function(i){Ee(i,"leaflet-tile");var l=this.getTileSize();i.style.width=l.x+"px",i.style.height=l.y+"px",i.onselectstart=k,i.onmousemove=k,Ce.ielt9&&this.options.opacity<1&&tn(i,this.options.opacity)},_addTile:function(i,l){var d=this._getTilePos(i),m=this._tileCoordsToKey(i),E=this.createTile(this._wrapCoords(i),p(this._tileReady,this,i));this._initTile(E),this.createTile.length<2&&j(p(this._tileReady,this,i,null,E)),Ct(E,d),this._tiles[m]={el:E,coords:i,current:!0},l.appendChild(E),this.fire("tileloadstart",{tile:E,coords:i})},_tileReady:function(i,l,d){l&&this.fire("tileerror",{error:l,tile:d,coords:i});var m=this._tileCoordsToKey(i);d=this._tiles[m],d&&(d.loaded=+new Date,this._map._fadeAnimated?(tn(d.el,0),R(this._fadeFrame),this._fadeFrame=j(this._updateOpacity,this)):(d.active=!0,this._pruneTiles()),l||(Ee(d.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:d.el,coords:i})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ce.ielt9||!this._map._fadeAnimated?j(this._pruneTiles,this):setTimeout(p(this._pruneTiles,this),250)))},_getTilePos:function(i){return i.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(i){var l=new X(this._wrapX?b(i.x,this._wrapX):i.x,this._wrapY?b(i.y,this._wrapY):i.y);return l.z=i.z,l},_pxBoundsToTileRange:function(i){var l=this.getTileSize();return new W(i.min.unscaleBy(l).floor(),i.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var i in this._tiles)if(!this._tiles[i].loaded)return!1;return!0}});function eo(i){return new Ri(i)}var Li=Ri.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(i,l){this._url=i,l=q(this,l),l.detectRetina&&Ce.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(i,l){return this._url===i&&l===void 0&&(l=!0),this._url=i,l||this.redraw(),this},createTile:function(i,l){var d=document.createElement("img");return ze(d,"load",p(this._tileOnLoad,this,l,d)),ze(d,"error",p(this._tileOnError,this,l,d)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(d.referrerPolicy=this.options.referrerPolicy),d.alt="",d.src=this.getTileUrl(i),d},getTileUrl:function(i){var l={r:Ce.retina?"@2x":"",s:this._getSubdomain(i),x:i.x,y:i.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var d=this._globalTileRange.max.y-i.y;this.options.tms&&(l.y=d),l["-y"]=d}return ge(this._url,a(l,this.options))},_tileOnLoad:function(i,l){Ce.ielt9?setTimeout(p(i,this,null,l),0):i(null,l)},_tileOnError:function(i,l,d){var m=this.options.errorTileUrl;m&&l.getAttribute("src")!==m&&(l.src=m),i(d,l)},_onTileRemove:function(i){i.tile.onload=null},_getZoomForUrl:function(){var i=this._tileZoom,l=this.options.maxZoom,d=this.options.zoomReverse,m=this.options.zoomOffset;return d&&(i=l-i),i+m},_getSubdomain:function(i){var l=Math.abs(i.x+i.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var i,l;for(i in this._tiles)if(this._tiles[i].coords.z!==this._tileZoom&&(l=this._tiles[i].el,l.onload=k,l.onerror=k,!l.complete)){l.src=be;var d=this._tiles[i].coords;lt(l),delete this._tiles[i],this.fire("tileabort",{tile:l,coords:d})}},_removeTile:function(i){var l=this._tiles[i];if(l)return l.el.setAttribute("src",be),Ri.prototype._removeTile.call(this,i)},_tileReady:function(i,l,d){if(!(!this._map||d&&d.getAttribute("src")===be))return Ri.prototype._tileReady.call(this,i,l,d)}});function Ql(i,l){return new Li(i,l)}var ra=Li.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(i,l){this._url=i;var d=a({},this.defaultWmsParams);for(var m in l)m in this.options||(d[m]=l[m]);l=q(this,l);var E=l.detectRetina&&Ce.retina?2:1,P=this.getTileSize();d.width=P.x*E,d.height=P.y*E,this.wmsParams=d},onAdd:function(i){this._crs=this.options.crs||i.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,Li.prototype.onAdd.call(this,i)},getTileUrl:function(i){var l=this._tileCoordsToNwSe(i),d=this._crs,m=ne(d.project(l[0]),d.project(l[1])),E=m.min,P=m.max,z=(this._wmsVersion>=1.3&&this._crs===Ks?[E.y,E.x,P.y,P.x]:[E.x,E.y,P.x,P.y]).join(","),K=Li.prototype.getTileUrl.call(this,i);return K+te(this.wmsParams,K,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+z},setParams:function(i,l){return a(this.wmsParams,i),l||this.redraw(),this}});function uc(i,l){return new ra(i,l)}Li.WMS=ra,Ql.wms=uc;var Vr=dr.extend({options:{padding:.1},initialize:function(i){q(this,i),w(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Ee(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var i={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(i.zoomanim=this._onAnimZoom),i},_onAnimZoom:function(i){this._updateTransform(i.center,i.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(i,l){var d=this._map.getZoomScale(l,this._zoom),m=this._map.getSize().multiplyBy(.5+this.options.padding),E=this._map.project(this._center,l),P=m.multiplyBy(-d).add(E).subtract(this._map._getNewPixelOrigin(i,l));Ce.any3d?Dn(this._container,P,d):Ct(this._container,P)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var i in this._layers)this._layers[i]._reset()},_onZoomEnd:function(){for(var i in this._layers)this._layers[i]._project()},_updatePaths:function(){for(var i in this._layers)this._layers[i]._update()},_update:function(){var i=this.options.padding,l=this._map.getSize(),d=this._map.containerPointToLayerPoint(l.multiplyBy(-i)).round();this._bounds=new W(d,d.add(l.multiplyBy(1+i*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Yl=Vr.extend({options:{tolerance:0},getEvents:function(){var i=Vr.prototype.getEvents.call(this);return i.viewprereset=this._onViewPreReset,i},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Vr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var i=this._container=document.createElement("canvas");ze(i,"mousemove",this._onMouseMove,this),ze(i,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ze(i,"mouseout",this._handleMouseOut,this),i._leaflet_disable_events=!0,this._ctx=i.getContext("2d")},_destroyContainer:function(){R(this._redrawRequest),delete this._ctx,lt(this._container),gt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var i;this._redrawBounds=null;for(var l in this._layers)i=this._layers[l],i._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Vr.prototype._update.call(this);var i=this._bounds,l=this._container,d=i.getSize(),m=Ce.retina?2:1;Ct(l,i.min),l.width=m*d.x,l.height=m*d.y,l.style.width=d.x+"px",l.style.height=d.y+"px",Ce.retina&&this._ctx.scale(2,2),this._ctx.translate(-i.min.x,-i.min.y),this.fire("update")}},_reset:function(){Vr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(i){this._updateDashArray(i),this._layers[w(i)]=i;var l=i._order={layer:i,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(i){this._requestRedraw(i)},_removePath:function(i){var l=i._order,d=l.next,m=l.prev;d?d.prev=m:this._drawLast=m,m?m.next=d:this._drawFirst=d,delete i._order,delete this._layers[w(i)],this._requestRedraw(i)},_updatePath:function(i){this._extendRedrawBounds(i),i._project(),i._update(),this._requestRedraw(i)},_updateStyle:function(i){this._updateDashArray(i),this._requestRedraw(i)},_updateDashArray:function(i){if(typeof i.options.dashArray=="string"){var l=i.options.dashArray.split(/[, ]+/),d=[],m,E;for(E=0;E<l.length;E++){if(m=Number(l[E]),isNaN(m))return;d.push(m)}i.options._dashArray=d}else i.options._dashArray=i.options.dashArray},_requestRedraw:function(i){this._map&&(this._extendRedrawBounds(i),this._redrawRequest=this._redrawRequest||j(this._redraw,this))},_extendRedrawBounds:function(i){if(i._pxBounds){var l=(i.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new W,this._redrawBounds.extend(i._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(i._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var i=this._redrawBounds;if(i){var l=i.getSize();this._ctx.clearRect(i.min.x,i.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var i,l=this._redrawBounds;if(this._ctx.save(),l){var d=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,d.x,d.y),this._ctx.clip()}this._drawing=!0;for(var m=this._drawFirst;m;m=m.next)i=m.layer,(!l||i._pxBounds&&i._pxBounds.intersects(l))&&i._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(i,l){if(this._drawing){var d,m,E,P,z=i._parts,K=z.length,J=this._ctx;if(K){for(J.beginPath(),d=0;d<K;d++){for(m=0,E=z[d].length;m<E;m++)P=z[d][m],J[m?"lineTo":"moveTo"](P.x,P.y);l&&J.closePath()}this._fillStroke(J,i)}}},_updateCircle:function(i){if(!(!this._drawing||i._empty())){var l=i._point,d=this._ctx,m=Math.max(Math.round(i._radius),1),E=(Math.max(Math.round(i._radiusY),1)||m)/m;E!==1&&(d.save(),d.scale(1,E)),d.beginPath(),d.arc(l.x,l.y/E,m,0,Math.PI*2,!1),E!==1&&d.restore(),this._fillStroke(d,i)}},_fillStroke:function(i,l){var d=l.options;d.fill&&(i.globalAlpha=d.fillOpacity,i.fillStyle=d.fillColor||d.color,i.fill(d.fillRule||"evenodd")),d.stroke&&d.weight!==0&&(i.setLineDash&&i.setLineDash(l.options&&l.options._dashArray||[]),i.globalAlpha=d.opacity,i.lineWidth=d.weight,i.strokeStyle=d.color,i.lineCap=d.lineCap,i.lineJoin=d.lineJoin,i.stroke())},_onClick:function(i){for(var l=this._map.mouseEventToLayerPoint(i),d,m,E=this._drawFirst;E;E=E.next)d=E.layer,d.options.interactive&&d._containsPoint(l)&&(!(i.type==="click"||i.type==="preclick")||!this._map._draggableMoved(d))&&(m=d);this._fireEvent(m?[m]:!1,i)},_onMouseMove:function(i){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(i);this._handleMouseHover(i,l)}},_handleMouseOut:function(i){var l=this._hoveredLayer;l&&(mt(this._container,"leaflet-interactive"),this._fireEvent([l],i,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(i,l){if(!this._mouseHoverThrottled){for(var d,m,E=this._drawFirst;E;E=E.next)d=E.layer,d.options.interactive&&d._containsPoint(l)&&(m=d);m!==this._hoveredLayer&&(this._handleMouseOut(i),m&&(Ee(this._container,"leaflet-interactive"),this._fireEvent([m],i,"mouseover"),this._hoveredLayer=m)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,i),this._mouseHoverThrottled=!0,setTimeout(p(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(i,l,d){this._map._fireDOMEvent(l,d||l.type,i)},_bringToFront:function(i){var l=i._order;if(l){var d=l.next,m=l.prev;if(d)d.prev=m;else return;m?m.next=d:d&&(this._drawFirst=d),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(i)}},_bringToBack:function(i){var l=i._order;if(l){var d=l.next,m=l.prev;if(m)m.next=d;else return;d?d.prev=m:m&&(this._drawLast=m),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(i)}}});function Jl(i){return Ce.canvas?new Yl(i):null}var to=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(i){return document.createElement("<lvml:"+i+' class="lvml">')}}catch{}return function(i){return document.createElement("<"+i+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),cc={_initContainer:function(){this._container=Qe("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Vr.prototype._update.call(this),this.fire("update"))},_initPath:function(i){var l=i._container=to("shape");Ee(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",i._path=to("path"),l.appendChild(i._path),this._updateStyle(i),this._layers[w(i)]=i},_addPath:function(i){var l=i._container;this._container.appendChild(l),i.options.interactive&&i.addInteractiveTarget(l)},_removePath:function(i){var l=i._container;lt(l),i.removeInteractiveTarget(l),delete this._layers[w(i)]},_updateStyle:function(i){var l=i._stroke,d=i._fill,m=i.options,E=i._container;E.stroked=!!m.stroke,E.filled=!!m.fill,m.stroke?(l||(l=i._stroke=to("stroke")),E.appendChild(l),l.weight=m.weight+"px",l.color=m.color,l.opacity=m.opacity,m.dashArray?l.dashStyle=Te(m.dashArray)?m.dashArray.join(" "):m.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=m.lineCap.replace("butt","flat"),l.joinstyle=m.lineJoin):l&&(E.removeChild(l),i._stroke=null),m.fill?(d||(d=i._fill=to("fill")),E.appendChild(d),d.color=m.fillColor||m.color,d.opacity=m.fillOpacity):d&&(E.removeChild(d),i._fill=null)},_updateCircle:function(i){var l=i._point.round(),d=Math.round(i._radius),m=Math.round(i._radiusY||d);this._setPath(i,i._empty()?"M0 0":"AL "+l.x+","+l.y+" "+d+","+m+" 0,"+65535*360)},_setPath:function(i,l){i._path.v=l},_bringToFront:function(i){Kn(i._container)},_bringToBack:function(i){un(i._container)}},pr=Ce.vml?to:fi,hs=Vr.extend({_initContainer:function(){this._container=pr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=pr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){lt(this._container),gt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Vr.prototype._update.call(this);var i=this._bounds,l=i.getSize(),d=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,d.setAttribute("width",l.x),d.setAttribute("height",l.y)),Ct(d,i.min),d.setAttribute("viewBox",[i.min.x,i.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(i){var l=i._path=pr("path");i.options.className&&Ee(l,i.options.className),i.options.interactive&&Ee(l,"leaflet-interactive"),this._updateStyle(i),this._layers[w(i)]=i},_addPath:function(i){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(i._path),i.addInteractiveTarget(i._path)},_removePath:function(i){lt(i._path),i.removeInteractiveTarget(i._path),delete this._layers[w(i)]},_updatePath:function(i){i._project(),i._update()},_updateStyle:function(i){var l=i._path,d=i.options;l&&(d.stroke?(l.setAttribute("stroke",d.color),l.setAttribute("stroke-opacity",d.opacity),l.setAttribute("stroke-width",d.weight),l.setAttribute("stroke-linecap",d.lineCap),l.setAttribute("stroke-linejoin",d.lineJoin),d.dashArray?l.setAttribute("stroke-dasharray",d.dashArray):l.removeAttribute("stroke-dasharray"),d.dashOffset?l.setAttribute("stroke-dashoffset",d.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),d.fill?(l.setAttribute("fill",d.fillColor||d.color),l.setAttribute("fill-opacity",d.fillOpacity),l.setAttribute("fill-rule",d.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(i,l){this._setPath(i,Kr(i._parts,l))},_updateCircle:function(i){var l=i._point,d=Math.max(Math.round(i._radius),1),m=Math.max(Math.round(i._radiusY),1)||d,E="a"+d+","+m+" 0 1,0 ",P=i._empty()?"M0 0":"M"+(l.x-d)+","+l.y+E+d*2+",0 "+E+-d*2+",0 ";this._setPath(i,P)},_setPath:function(i,l){i._path.setAttribute("d",l)},_bringToFront:function(i){Kn(i._path)},_bringToBack:function(i){un(i._path)}});Ce.vml&&hs.include(cc);function Xa(i){return Ce.svg||Ce.vml?new hs(i):null}nt.include({getRenderer:function(i){var l=i.options.renderer||this._getPaneRenderer(i.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(i){if(i==="overlayPane"||i===void 0)return!1;var l=this._paneRenderers[i];return l===void 0&&(l=this._createRenderer({pane:i}),this._paneRenderers[i]=l),l},_createRenderer:function(i){return this.options.preferCanvas&&Jl(i)||Xa(i)}});var hc=ni.extend({initialize:function(i,l){ni.prototype.initialize.call(this,this._boundsToLatLngs(i),l)},setBounds:function(i){return this.setLatLngs(this._boundsToLatLngs(i))},_boundsToLatLngs:function(i){return i=Ne(i),[i.getSouthWest(),i.getNorthWest(),i.getNorthEast(),i.getSouthEast()]}});function fd(i,l){return new hc(i,l)}hs.create=pr,hs.pointsToPath=Kr,Or.geometryToLayer=Qs,Or.coordsToLatLng=Ga,Or.coordsToLatLngs=ta,Or.latLngToCoords=Ka,Or.latLngsToCoords=Za,Or.getFeature=Ys,Or.asFeature=Qa,nt.mergeOptions({boxZoom:!0});var no=cn.extend({initialize:function(i){this._map=i,this._container=i._container,this._pane=i._panes.overlayPane,this._resetStateTimeout=0,i.on("unload",this._destroy,this)},addHooks:function(){ze(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){gt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){lt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(i){if(!i.shiftKey||i.which!==1&&i.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),tt(),ns(),this._startPoint=this._map.mouseEventToContainerPoint(i),ze(document,{contextmenu:vn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(i){this._moved||(this._moved=!0,this._box=Qe("div","leaflet-zoom-box",this._container),Ee(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(i);var l=new W(this._point,this._startPoint),d=l.getSize();Ct(this._box,l.min),this._box.style.width=d.x+"px",this._box.style.height=d.y+"px"},_finish:function(){this._moved&&(lt(this._box),mt(this._container,"leaflet-crosshair")),yn(),rs(),gt(document,{contextmenu:vn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(i){if(!(i.which!==1&&i.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(p(this._resetState,this),0);var l=new Me(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(i){i.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});nt.addInitHook("addHandler","boxZoom",no),nt.mergeOptions({doubleClickZoom:!0});var dc=cn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(i){var l=this._map,d=l.getZoom(),m=l.options.zoomDelta,E=i.originalEvent.shiftKey?d-m:d+m;l.options.doubleClickZoom==="center"?l.setZoom(E):l.setZoomAround(i.containerPoint,E)}});nt.addInitHook("addHandler","doubleClickZoom",dc),nt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Xl=cn.extend({addHooks:function(){if(!this._draggable){var i=this._map;this._draggable=new wn(i._mapPane,i._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),i.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),i.on("zoomend",this._onZoomEnd,this),i.whenReady(this._onZoomEnd,this))}Ee(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){mt(this._map._container,"leaflet-grab"),mt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var i=this._map;if(i._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=Ne(this._map.options.maxBounds);this._offsetLimit=ne(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;i.fire("movestart").fire("dragstart"),i.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(i){if(this._map.options.inertia){var l=this._lastTime=+new Date,d=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(d),this._times.push(l),this._prunePositions(l)}this._map.fire("move",i).fire("drag",i)},_prunePositions:function(i){for(;this._positions.length>1&&i-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var i=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(i).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(i,l){return i-(i-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var i=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;i.x<l.min.x&&(i.x=this._viscousLimit(i.x,l.min.x)),i.y<l.min.y&&(i.y=this._viscousLimit(i.y,l.min.y)),i.x>l.max.x&&(i.x=this._viscousLimit(i.x,l.max.x)),i.y>l.max.y&&(i.y=this._viscousLimit(i.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(i)}},_onPreDragWrap:function(){var i=this._worldWidth,l=Math.round(i/2),d=this._initialWorldOffset,m=this._draggable._newPos.x,E=(m-l+d)%i+l-d,P=(m+l+d)%i-l-d,z=Math.abs(E+d)<Math.abs(P+d)?E:P;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=z},_onDragEnd:function(i){var l=this._map,d=l.options,m=!d.inertia||i.noInertia||this._times.length<2;if(l.fire("dragend",i),m)l.fire("moveend");else{this._prunePositions(+new Date);var E=this._lastPos.subtract(this._positions[0]),P=(this._lastTime-this._times[0])/1e3,z=d.easeLinearity,K=E.multiplyBy(z/P),J=K.distanceTo([0,0]),le=Math.min(d.inertiaMaxSpeed,J),we=K.multiplyBy(le/J),Fe=le/(d.inertiaDeceleration*z),et=we.multiplyBy(-Fe/2).round();!et.x&&!et.y?l.fire("moveend"):(et=l._limitOffset(et,l.options.maxBounds),j(function(){l.panBy(et,{duration:Fe,easeLinearity:z,noMoveStart:!0,animate:!0})}))}}});nt.addInitHook("addHandler","dragging",Xl),nt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var eu=cn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(i){this._map=i,this._setPanDelta(i.options.keyboardPanDelta),this._setZoomDelta(i.options.zoomDelta)},addHooks:function(){var i=this._map._container;i.tabIndex<=0&&(i.tabIndex="0"),ze(i,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),gt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var i=document.body,l=document.documentElement,d=i.scrollTop||l.scrollTop,m=i.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(m,d)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(i){var l=this._panKeys={},d=this.keyCodes,m,E;for(m=0,E=d.left.length;m<E;m++)l[d.left[m]]=[-1*i,0];for(m=0,E=d.right.length;m<E;m++)l[d.right[m]]=[i,0];for(m=0,E=d.down.length;m<E;m++)l[d.down[m]]=[0,i];for(m=0,E=d.up.length;m<E;m++)l[d.up[m]]=[0,-1*i]},_setZoomDelta:function(i){var l=this._zoomKeys={},d=this.keyCodes,m,E;for(m=0,E=d.zoomIn.length;m<E;m++)l[d.zoomIn[m]]=i;for(m=0,E=d.zoomOut.length;m<E;m++)l[d.zoomOut[m]]=-i},_addHooks:function(){ze(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){gt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(i){if(!(i.altKey||i.ctrlKey||i.metaKey)){var l=i.keyCode,d=this._map,m;if(l in this._panKeys){if(!d._panAnim||!d._panAnim._inProgress)if(m=this._panKeys[l],i.shiftKey&&(m=oe(m).multiplyBy(3)),d.options.maxBounds&&(m=d._limitOffset(oe(m),d.options.maxBounds)),d.options.worldCopyJump){var E=d.wrapLatLng(d.unproject(d.project(d.getCenter()).add(m)));d.panTo(E)}else d.panBy(m)}else if(l in this._zoomKeys)d.setZoom(d.getZoom()+(i.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&d._popup&&d._popup.options.closeOnEscapeKey)d.closePopup();else return;vn(i)}}});nt.addInitHook("addHandler","keyboard",eu),nt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var vt=cn.extend({addHooks:function(){ze(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){gt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(i){var l=Ko(i),d=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(i),this._startTime||(this._startTime=+new Date);var m=Math.max(d-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(p(this._performZoom,this),m),vn(i)},_performZoom:function(){var i=this._map,l=i.getZoom(),d=this._map.options.zoomSnap||0;i._stop();var m=this._delta/(this._map.options.wheelPxPerZoomLevel*4),E=4*Math.log(2/(1+Math.exp(-Math.abs(m))))/Math.LN2,P=d?Math.ceil(E/d)*d:E,z=i._limitZoom(l+(this._delta>0?P:-P))-l;this._delta=0,this._startTime=null,z&&(i.options.scrollWheelZoom==="center"?i.setZoom(l+z):i.setZoomAround(this._lastMousePos,l+z))}});nt.addInitHook("addHandler","scrollWheelZoom",vt);var tu=600;nt.mergeOptions({tapHold:Ce.touchNative&&Ce.safari&&Ce.mobile,tapTolerance:15});var ia=cn.extend({addHooks:function(){ze(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){gt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(i){if(clearTimeout(this._holdTimeout),i.touches.length===1){var l=i.touches[0];this._startPos=this._newPos=new X(l.clientX,l.clientY),this._holdTimeout=setTimeout(p(function(){this._cancel(),this._isTapValid()&&(ze(document,"touchend",wt),ze(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),tu),ze(document,"touchend touchcancel contextmenu",this._cancel,this),ze(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function i(){gt(document,"touchend",wt),gt(document,"touchend touchcancel",i)},_cancel:function(){clearTimeout(this._holdTimeout),gt(document,"touchend touchcancel contextmenu",this._cancel,this),gt(document,"touchmove",this._onMove,this)},_onMove:function(i){var l=i.touches[0];this._newPos=new X(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(i,l){var d=new MouseEvent(i,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});d._simulated=!0,l.target.dispatchEvent(d)}});nt.addInitHook("addHandler","tapHold",ia),nt.mergeOptions({touchZoom:Ce.touch,bounceAtZoomLimits:!0});var ro=cn.extend({addHooks:function(){Ee(this._map._container,"leaflet-touch-zoom"),ze(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){mt(this._map._container,"leaflet-touch-zoom"),gt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(i){var l=this._map;if(!(!i.touches||i.touches.length!==2||l._animatingZoom||this._zooming)){var d=l.mouseEventToContainerPoint(i.touches[0]),m=l.mouseEventToContainerPoint(i.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(d.add(m)._divideBy(2))),this._startDist=d.distanceTo(m),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),ze(document,"touchmove",this._onTouchMove,this),ze(document,"touchend touchcancel",this._onTouchEnd,this),wt(i)}},_onTouchMove:function(i){if(!(!i.touches||i.touches.length!==2||!this._zooming)){var l=this._map,d=l.mouseEventToContainerPoint(i.touches[0]),m=l.mouseEventToContainerPoint(i.touches[1]),E=d.distanceTo(m)/this._startDist;if(this._zoom=l.getScaleZoom(E,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&E<1||this._zoom>l.getMaxZoom()&&E>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,E===1)return}else{var P=d._add(m)._divideBy(2)._subtract(this._centerPoint);if(E===1&&P.x===0&&P.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(P),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),R(this._animRequest);var z=p(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=j(z,this,!0),wt(i)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,R(this._animRequest),gt(document,"touchmove",this._onTouchMove,this),gt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});nt.addInitHook("addHandler","touchZoom",ro),nt.BoxZoom=no,nt.DoubleClickZoom=dc,nt.Drag=Xl,nt.Keyboard=eu,nt.ScrollWheelZoom=vt,nt.TapHold=ia,nt.TouchZoom=ro,t.Bounds=W,t.Browser=Ce,t.CRS=Xe,t.Canvas=Yl,t.Circle=$a,t.CircleMarker=Wa,t.Class=ye,t.Control=nn,t.DivIcon=Ja,t.DivOverlay=jr,t.DomEvent=Rr,t.DomUtil=is,t.Draggable=wn,t.Evented=Ve,t.FeatureGroup=ei,t.GeoJSON=Or,t.GridLayer=Ri,t.Handler=cn,t.Icon=cs,t.ImageOverlay=Ni,t.LatLng=Se,t.LatLngBounds=Me,t.Layer=dr,t.LayerGroup=Ci,t.LineUtil=Fn,t.Map=nt,t.Marker=ti,t.Mixin=Hs,t.Path=Ai,t.Point=X,t.PolyUtil=qs,t.Polygon=ni,t.Polyline=zn,t.Popup=Ya,t.PosAnimation=as,t.Projection=Mr,t.Rectangle=hc,t.Renderer=Vr,t.SVG=hs,t.SVGOverlay=Kl,t.TileLayer=Li,t.Tooltip=Xs,t.Transformation=gn,t.Util=A,t.VideoOverlay=Gl,t.bind=p,t.bounds=ne,t.canvas=Jl,t.circle=ea,t.circleMarker=ic,t.control=Vn,t.divIcon=lc,t.extend=a,t.featureGroup=nc,t.geoJSON=sc,t.geoJson=fr,t.gridLayer=eo,t.icon=rc,t.imageOverlay=oc,t.latLng=xe,t.latLngBounds=Ne,t.layerGroup=Xo,t.map=jn,t.marker=cd,t.point=oe,t.polygon=dd,t.polyline=hd,t.popup=Js,t.rectangle=fd,t.setOptions=q,t.stamp=w,t.svg=Xa,t.svgOverlay=Zl,t.tileLayer=Ql,t.tooltip=na,t.transformation=jt,t.version=o,t.videoOverlay=ac;var fc=window.L;t.noConflict=function(){return window.L=fc,this},window.L=t}))})(Su,Su.exports)),Su.exports}var tc=VC();const Xx=iv(tc);function wm(r,e,t){return Object.freeze({instance:r,context:e,container:t})}function Em(r,e){return e==null?function(o,a){const c=ie.useRef();return c.current||(c.current=r(o,a)),c}:function(o,a){const c=ie.useRef();c.current||(c.current=r(o,a));const p=ie.useRef(o),{instance:y}=c.current;return ie.useEffect(function(){p.current!==o&&(e(y,o,p.current),p.current=o)},[y,o,a]),c}}function FC(r,e){ie.useEffect(function(){return(e.layerContainer??e.map).addLayer(r.instance),function(){var c;(c=e.layerContainer)==null||c.removeLayer(r.instance),e.map.removeLayer(r.instance)}},[e,r])}function ew(r){return function(t){const o=vm(),a=r(xm(t,o),o);return Zx(o.map,t.attribution),Jx(a.current,t.eventHandlers),FC(a.current,o),a}}function zC(r,e){const t=Em(r,e),o=ew(t);return LC(o)}function UC(r,e){const t=Em(r),o=OC(t,e);return DC(o)}function BC(r,e){const t=Em(r,e),o=ew(t);return MC(o)}function HC(r,e,t){const{opacity:o,zIndex:a}=e;o!=null&&o!==t.opacity&&r.setOpacity(o),a!=null&&a!==t.zIndex&&r.setZIndex(a)}function WC(){return vm().map}function mp(){return mp=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=t[o])}return r},mp.apply(this,arguments)}function $C({bounds:r,boundsOptions:e,center:t,children:o,className:a,id:c,placeholder:p,style:y,whenReady:w,zoom:T,...b},k){const[N]=ie.useState({className:a,id:c,style:y}),[V,U]=ie.useState(null);ie.useImperativeHandle(k,()=>(V==null?void 0:V.map)??null,[V]);const q=ie.useCallback(ce=>{if(ce!==null&&V===null){const ge=new tc.Map(ce,b);t!=null&&T!=null?ge.setView(t,T):r!=null&&ge.fitBounds(r,e),w!=null&&ge.whenReady(w),U(NC(ge))}},[]);ie.useEffect(()=>()=>{V==null||V.map.remove()},[V]);const te=V?Ff.createElement(Yx,{value:V},o):p??null;return Ff.createElement("div",mp({},N,{ref:q}),te)}const qC=ie.forwardRef($C),GC=zC(function({position:e,...t},o){const a=new tc.Marker(e,t);return wm(a,RC(o,{overlayContainer:a}))},function(e,t,o){t.position!==o.position&&e.setLatLng(t.position),t.icon!=null&&t.icon!==o.icon&&e.setIcon(t.icon),t.zIndexOffset!=null&&t.zIndexOffset!==o.zIndexOffset&&e.setZIndexOffset(t.zIndexOffset),t.opacity!=null&&t.opacity!==o.opacity&&e.setOpacity(t.opacity),e.dragging!=null&&t.draggable!==o.draggable&&(t.draggable===!0?e.dragging.enable():e.dragging.disable())}),KC=UC(function(e,t){const o=new tc.Popup(e,t.overlayContainer);return wm(o,t)},function(e,t,{position:o},a){ie.useEffect(function(){const{instance:p}=e;function y(T){T.popup===p&&(p.update(),a(!0))}function w(T){T.popup===p&&a(!1)}return t.map.on({popupopen:y,popupclose:w}),t.overlayContainer==null?(o!=null&&p.setLatLng(o),p.openOn(t.map)):t.overlayContainer.bindPopup(p),function(){var b;t.map.off({popupopen:y,popupclose:w}),(b=t.overlayContainer)==null||b.unbindPopup(),t.map.removeLayer(p)}},[e,t,a,o])}),ZC=BC(function({url:e,...t},o){const a=new tc.TileLayer(e,xm(t,o));return wm(a,o)},function(e,t,o){HC(e,t,o);const{url:a}=t;a!=null&&a!==o.url&&e.setUrl(a)}),tw={food:"#f97316",sightseeing:"#3b82f6",activity:"#22c55e",transport:"#6b7280",accommodation:"#a855f7",free:"#14b8a6"},nw={food:"",sightseeing:"",activity:"",transport:"",accommodation:"",free:""};function QC(r){const e=tw[r]??"#6366f1",t=nw[r]??"";return Xx.divIcon({className:"",html:`<div style="background:${e};width:32px;height:32px;border-radius:50%;border:2.5px solid rgba(255,255,255,0.9);box-shadow:0 2px 8px rgba(0,0,0,.45);display:flex;align-items:center;justify-content:center;font-size:15px">${t}</div>`,iconSize:[32,32],iconAnchor:[16,16],popupAnchor:[0,-20]})}function YC({positions:r,fallback:e,posKey:t}){const o=WC();return ie.useEffect(()=>{r.length>1?o.fitBounds(Xx.latLngBounds(r),{padding:[50,50],animate:!0,duration:.7}):r.length===1?o.setView(r[0],14,{animate:!0,duration:.7}):e&&o.setView(e,12,{animate:!0,duration:.7})},[t,e==null?void 0:e[0],e==null?void 0:e[1]]),null}function JC({trip:r}){const[e,t]=ie.useState(null),[o,a]=ie.useState(null),[c,p]=ie.useState(!1),y=r.itinerary.some(U=>U.activities.some(q=>q.lat&&q.lng));ie.useEffect(()=>{y||(p(!0),fetch(`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(r.destination)}&format=json&limit=1`,{headers:{"Accept-Language":"en"}}).then(U=>U.json()).then(U=>{U[0]&&a([parseFloat(U[0].lat),parseFloat(U[0].lon)])}).catch(()=>{}).finally(()=>p(!1)))},[r.destination,y]);const w=r.itinerary.flatMap(U=>U.activities.map(q=>({...q,dayId:U.id,dayDate:U.date,dayTitle:U.title}))),b=(e?w.filter(U=>U.dayId===e):w).filter(U=>U.lat&&U.lng),k=b.map(U=>[U.lat,U.lng]),N=k.map(U=>`${U[0]},${U[1]}`).join("|"),V=r.itinerary.length===0;return _.jsxs("div",{className:"space-y-4",children:[r.itinerary.length>0&&_.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-1 scrollbar-hide",children:[_.jsx("button",{onClick:()=>t(null),className:`shrink-0 px-3 py-1.5 rounded-full text-sm font-medium transition ${e===null?"bg-indigo-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:"All days"}),r.itinerary.map((U,q)=>_.jsxs("button",{onClick:()=>t(U.id===e?null:U.id),className:`shrink-0 px-3 py-1.5 rounded-full text-sm font-medium transition ${e===U.id?"bg-indigo-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:["Day ",q+1]},U.id))]}),_.jsxs("div",{className:"relative rounded-2xl overflow-hidden border border-gray-800",style:{height:"460px"},children:[c&&_.jsxs("div",{className:"absolute inset-0 bg-gray-900/80 z-[500] flex items-center justify-center gap-2",children:[_.jsx(Wn,{className:"w-5 h-5 animate-spin text-indigo-400"}),_.jsxs("span",{className:"text-sm text-gray-400",children:["Locating ",r.destination,""]})]}),_.jsxs(qC,{center:[20,0],zoom:2,style:{height:"100%",width:"100%"},scrollWheelZoom:!0,children:[_.jsx(ZC,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),_.jsx(YC,{positions:k,fallback:o,posKey:N}),b.map(U=>_.jsx(GC,{position:[U.lat,U.lng],icon:QC(U.category),children:_.jsx(KC,{children:_.jsxs("div",{className:"text-gray-800 text-sm",style:{minWidth:"180px"},children:[_.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[_.jsx("span",{children:nw[U.category]??""}),_.jsx("span",{className:"font-semibold",children:U.title})]}),_.jsxs("p",{className:"text-xs text-gray-500 mb-1",children:[U.dayDate,"  ",U.time]}),_.jsx("p",{className:"text-xs text-gray-600 leading-snug",children:U.description}),(U.estimatedCost??0)>0&&_.jsxs("p",{className:"text-xs text-gray-500 mt-1 font-medium",children:["~$",U.estimatedCost]})]})})},`${U.id}-${U.dayId}`))]})]}),V&&_.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-6 text-center",children:[_.jsx("span",{className:"text-3xl block mb-3",children:""}),_.jsx("h3",{className:"font-semibold text-gray-300 mb-1",children:"No itinerary yet"}),_.jsx("p",{className:"text-sm text-gray-500",children:"Generate an itinerary first  each activity will appear as a pin on the map."})]}),!V&&b.length===0&&!c&&_.jsxs("div",{className:"bg-amber-500/10 border border-amber-500/20 rounded-2xl p-4 text-center",children:[_.jsx("p",{className:"text-sm text-amber-300 font-medium",children:"No GPS coordinates in your itinerary"}),_.jsx("p",{className:"text-xs text-amber-400/70 mt-1",children:"Regenerate your itinerary  the AI will include location coordinates for each activity."})]}),b.length>0&&_.jsx("div",{className:"flex flex-wrap gap-x-4 gap-y-2",children:Object.entries(tw).map(([U,q])=>b.some(te=>te.category===U)?_.jsxs("div",{className:"flex items-center gap-1.5",children:[_.jsx("div",{className:"w-3 h-3 rounded-full shrink-0",style:{backgroundColor:q}}),_.jsx("span",{className:"text-xs text-gray-500 capitalize",children:U})]},U):null)})]})}const XC=[{label:" Weather",query:"Current weather forecast and what to pack"},{label:" Flights",query:"Current flight prices and booking recommendations"},{label:" Hotels",query:"Best hotels and accommodation options with current prices"},{label:" Events",query:"Events, festivals and activities happening during my trip"},{label:" Restaurants",query:"Best local restaurants and must-try dishes"},{label:" Travel Tips",query:"Essential travel tips, visa requirements and local customs"}];function e2({trip:r,perplexityKey:e,hasSearchKey:t,onSettingsClick:o}){const[a,c]=ie.useState(""),[p,y]=ie.useState(""),[w,T]=ie.useState(!1),[b,k]=ie.useState(""),[N,V]=ie.useState(""),U=async q=>{if(!(!q.trim()||w)){T(!0),k(""),y(""),V(q);try{const te=await cC(q,r,e);y(te)}catch(te){k(te instanceof Error?te.message:"Search failed")}finally{T(!1)}}};return t?_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-5",children:[_.jsx("h3",{className:"font-semibold text-gray-200 mb-1",children:"Live Travel Search"}),_.jsxs("p",{className:"text-sm text-gray-500",children:["Real-time info for ",_.jsx("span",{className:"text-gray-300",children:r.destination}),"  powered by Perplexity Sonar"]})]}),_.jsx("div",{className:"flex flex-wrap gap-2",children:XC.map(q=>_.jsx("button",{onClick:()=>{c(q.query),U(q.query)},disabled:w,className:`px-3 py-1.5 rounded-full text-sm font-medium transition disabled:opacity-50 ${N===q.query&&(w||p)?"bg-indigo-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700 hover:text-gray-200"}`,children:q.label},q.label))}),_.jsxs("form",{onSubmit:q=>{q.preventDefault(),U(a)},className:"flex gap-2",children:[_.jsx("input",{value:a,onChange:q=>c(q.target.value),placeholder:`Search anything about ${r.destination}`,disabled:w,className:"flex-1 bg-gray-900 border border-gray-700 rounded-xl px-4 py-3 text-gray-100 placeholder-gray-600 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition disabled:opacity-50 text-sm"}),_.jsx("button",{type:"submit",disabled:!a.trim()||w,className:"px-4 py-3 bg-indigo-600 hover:bg-indigo-500 disabled:opacity-40 disabled:cursor-not-allowed rounded-xl transition shrink-0",children:w?_.jsx(Wn,{className:"w-5 h-5 animate-spin"}):_.jsx($_,{className:"w-5 h-5"})})]}),b&&_.jsx("div",{className:"text-sm text-red-300 bg-red-500/10 border border-red-500/20 rounded-xl px-4 py-3",children:b}),w&&_.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-8 flex flex-col items-center gap-3",children:[_.jsx(Wn,{className:"w-8 h-8 animate-spin text-indigo-400"}),_.jsx("p",{className:"text-sm text-gray-500",children:"Searching the web for real-time info"})]}),p&&!w&&_.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-5",children:[_.jsxs("div",{className:"flex items-center gap-2 mb-4 pb-3 border-b border-gray-800",children:[_.jsx("div",{className:"w-6 h-6 bg-indigo-500/20 rounded-lg flex items-center justify-center",children:_.jsx($_,{className:"w-3.5 h-3.5 text-indigo-400"})}),_.jsx("span",{className:"text-sm font-medium text-gray-300",children:"Results"}),_.jsx("span",{className:"text-xs text-emerald-400 bg-emerald-500/10 px-2 py-0.5 rounded-full ml-auto",children:"Live"})]}),_.jsx("div",{className:"text-sm text-gray-300 leading-relaxed whitespace-pre-wrap",children:p})]})]}):_.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[_.jsx("div",{className:"w-16 h-16 bg-gray-800 border border-gray-700 rounded-2xl flex items-center justify-center mb-5",children:_.jsx(Ps,{className:"w-7 h-7 text-gray-500"})}),_.jsx("h3",{className:"text-lg font-semibold text-gray-400 mb-2",children:"Travel Search unavailable"}),_.jsxs("p",{className:"text-gray-600 max-w-sm mb-6 leading-relaxed text-sm",children:["Add your Perplexity API key to search real-time travel info  flights, hotels, weather, events, and more for ",r.destination,"."]}),_.jsxs("button",{onClick:o,className:"flex items-center gap-2 px-5 py-2.5 bg-gray-800 hover:bg-gray-700 border border-gray-700 rounded-xl text-sm text-gray-300 transition",children:[_.jsx(Na,{className:"w-4 h-4"}),"Set up in Settings"]})]})}const rv=[{id:"overview",label:"Overview",emoji:""},{id:"itinerary",label:"Itinerary",emoji:""},{id:"packing",label:"Packing",emoji:""},{id:"map",label:"Map",emoji:""},{id:"chat",label:"AI Chat",emoji:"",searchOnly:!0},{id:"search",label:"Search",emoji:"",searchOnly:!0}],t2={planning:"upcoming",upcoming:"completed",completed:"planning"},n2={planning:"bg-amber-500/20 border-amber-500/30 text-amber-300 hover:bg-amber-500/30",upcoming:"bg-blue-500/20 border-blue-500/30 text-blue-300 hover:bg-blue-500/30",completed:"bg-emerald-500/20 border-emerald-500/30 text-emerald-300 hover:bg-emerald-500/30"};function r2({trip:r,activeTab:e,onTabChange:t,onBack:o,onDelete:a,onGenerateItinerary:c,onGeneratePackingList:p,onUpdateTrip:y,getChatHistory:w,saveChatHistory:T,perplexityKey:b,anthropicKey:k,hasGenerationKey:N,hasSearchKey:V,onSettingsClick:U}){const q=new Date(r.startDate+"T12:00:00"),te=new Date(r.endDate+"T12:00:00"),ce=Math.ceil((te.getTime()-q.getTime())/864e5)+1,ge=()=>{confirm(`Delete "${r.name}"? This cannot be undone.`)&&a(r.id)},Te=()=>y({...r,status:t2[r.status]}),Oe=r.itinerary.reduce((R,A)=>{var ye;return R+(((ye=A.activities)==null?void 0:ye.length)??0)},0),be=r.packingList.filter(R=>R.packed).length,fe=r.itinerary.flatMap(R=>R.activities??[]).reduce((R,A)=>R+(A.estimatedCost||0),0),F=fe*r.travelers,D=r.budget-F,M=Math.min(100,r.budget>0?F/r.budget*100:0),B=D<0,j=!N&&!V;return _.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-950 pb-16 md:pb-0",children:[_.jsxs("div",{className:`bg-gradient-to-br ${r.coverGradient} relative`,children:[_.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/20 via-transparent to-black/50"}),_.jsxs("div",{className:"relative max-w-5xl mx-auto px-4 md:px-6 pt-4 flex items-center justify-between",children:[_.jsx("button",{onClick:o,className:"p-2 text-white/70 hover:text-white hover:bg-white/10 rounded-lg transition",children:_.jsx(Zf,{className:"w-5 h-5"})}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsxs("button",{onClick:U,className:"relative p-2 text-white/50 hover:text-white hover:bg-white/10 rounded-lg transition",title:"API Settings",children:[_.jsx(Na,{className:"w-4 h-4"}),j&&_.jsx("span",{className:"absolute top-1.5 right-1.5 w-1.5 h-1.5 bg-amber-400 rounded-full"})]}),_.jsxs("button",{onClick:Te,className:`text-xs px-2.5 py-1.5 rounded-full font-medium border transition ${n2[r.status]}`,children:[_.jsx(hS,{className:"w-3 h-3 inline mr-1"}),r.status]}),_.jsx("button",{onClick:ge,className:"p-2 text-white/40 hover:text-red-300 hover:bg-red-500/20 rounded-lg transition",children:_.jsx(Ku,{className:"w-4 h-4"})})]})]}),_.jsx("div",{className:"relative max-w-5xl mx-auto px-4 md:px-6 pt-3 pb-4 md:pb-5",children:_.jsxs("div",{className:"flex items-start gap-3",children:[_.jsx("span",{className:"text-4xl md:text-5xl drop-shadow-lg shrink-0 mt-0.5",children:r.emoji}),_.jsxs("div",{className:"flex-1 min-w-0",children:[_.jsx("h1",{className:"text-xl md:text-2xl font-bold text-white leading-tight",children:r.name}),_.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5 text-white/70",children:[_.jsx(qh,{className:"w-3.5 h-3.5 shrink-0"}),_.jsx("span",{className:"text-sm truncate",children:r.destination})]}),_.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-white/60 overflow-x-auto scrollbar-hide",children:[_.jsxs("span",{className:"flex items-center gap-1 shrink-0",children:[_.jsx(kp,{className:"w-3.5 h-3.5"}),q.toLocaleDateString("en",{month:"short",day:"numeric"})," "," ",te.toLocaleDateString("en",{month:"short",day:"numeric",year:"numeric"}),_.jsxs("span",{className:"text-white/30 ml-1",children:["(",ce,"d)"]})]}),_.jsxs("span",{className:"flex items-center gap-1 shrink-0",children:[_.jsx(Np,{className:"w-3.5 h-3.5"}),r.travelers]}),_.jsxs("span",{className:"flex items-center gap-1 shrink-0",children:[_.jsx(Cp,{className:"w-3.5 h-3.5"}),r.currency," ",r.budget.toLocaleString()]})]})]})]})}),_.jsx("div",{className:"hidden md:block relative max-w-5xl mx-auto px-6 pb-0",children:_.jsx("div",{className:"flex gap-1 w-fit overflow-x-auto",children:rv.map(R=>{const A=!!(R.searchOnly&&!V);return _.jsxs("button",{onClick:()=>!A&&t(R.id),disabled:A,className:`px-4 py-2.5 rounded-t-xl text-sm font-medium transition flex items-center gap-1.5 whitespace-nowrap ${A?"text-white/30 cursor-not-allowed":e===R.id?"bg-gray-950 text-white":"text-white/60 hover:text-white/90 hover:bg-white/10"}`,children:[_.jsx("span",{children:R.emoji}),R.label,A&&_.jsx(Ps,{className:"w-3 h-3"})]},R.id)})})})]}),_.jsxs("div",{className:"flex-1 max-w-5xl mx-auto w-full px-4 md:px-6 py-5 md:py-6",children:[e==="overview"&&_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-5 md:p-6",children:[_.jsx("h3",{className:"font-semibold text-gray-200 mb-2",children:"About this trip"}),_.jsx("p",{className:"text-gray-400 leading-relaxed text-sm md:text-base",children:r.description})]}),_.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[{label:"Days",value:ce,suffix:""},{label:"Activities",value:Oe||"",suffix:""},{label:"Items packed",value:be||"",suffix:r.packingList.length>0?`/${r.packingList.length}`:""},{label:"Interests",value:r.interests.length,suffix:""}].map(({label:R,value:A,suffix:ye})=>_.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-4 md:p-5 text-center",children:[_.jsxs("p",{className:"text-xl md:text-2xl font-bold text-indigo-400",children:[A,ye&&_.jsx("span",{className:"text-sm text-gray-500",children:ye})]}),_.jsx("p",{className:"text-xs text-gray-500 mt-1",children:R})]},R))}),_.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-5 md:p-6",children:[_.jsxs("div",{className:"flex items-center justify-between mb-4",children:[_.jsx("h3",{className:"font-semibold text-gray-200",children:"Provisional Budget"}),_.jsx("span",{className:`text-xs font-medium px-2.5 py-1 rounded-full border ${F===0?"bg-gray-800 text-gray-500 border-gray-700":B?"bg-red-500/15 text-red-300 border-red-500/25":"bg-emerald-500/15 text-emerald-300 border-emerald-500/25"}`,children:F===0?"No estimates yet":B?` ${r.currency}${Math.abs(D).toLocaleString()} over`:` ${r.currency}${D.toLocaleString()} left`})]}),_.jsx("div",{className:"grid grid-cols-3 gap-2 md:gap-3 mb-4 text-center",children:[{label:"Allocated",val:`${r.currency} ${r.budget.toLocaleString()}`,color:"text-gray-200"},{label:"Est. spend",val:`${r.currency} ${F.toLocaleString()}`,color:F===0?"text-gray-500":B?"text-red-400":"text-gray-200"},{label:"Remaining",val:F===0?"":`${r.currency} ${D.toLocaleString()}`,color:F===0?"text-gray-500":B?"text-red-400":"text-emerald-400"}].map(({label:R,val:A,color:ye})=>_.jsxs("div",{className:"bg-gray-800/60 rounded-xl p-3",children:[_.jsx("p",{className:"text-xs text-gray-500 mb-1",children:R}),_.jsx("p",{className:`font-semibold text-sm ${ye}`,children:A})]},R))}),_.jsx("div",{className:"h-2 bg-gray-800 rounded-full overflow-hidden",children:_.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${B?"bg-red-500":M>80?"bg-amber-500":"bg-emerald-500"}`,style:{width:`${M}%`}})}),_.jsx("p",{className:"text-xs text-gray-600 mt-2",children:F===0?"Add cost estimates to activities to track spending.":`${r.currency}${fe.toLocaleString()} /person  ${r.travelers} traveler(s)`})]}),_.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-5 md:p-6",children:[_.jsx("h3",{className:"font-semibold text-gray-200 mb-3",children:"Interests"}),_.jsx("div",{className:"flex flex-wrap gap-2",children:r.interests.map(R=>_.jsx("span",{className:"text-sm bg-indigo-500/15 text-indigo-300 border border-indigo-500/25 px-3 py-1 rounded-full",children:R},R))})]}),_.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[{tab:"itinerary",emoji:"",title:"Itinerary",desc:r.itinerary.length?`${ce} days planned`:"View & edit day-by-day",locked:!1},{tab:"packing",emoji:"",title:"Packing",desc:r.packingList.length?`${be}/${r.packingList.length} packed`:"View packing list",locked:!1},{tab:"chat",emoji:"",title:"AI Chat",desc:V?"Ask anything about your trip":"Requires Perplexity key",locked:!V},{tab:"search",emoji:"",title:"Search",desc:V?"Real-time flights, hotels, weather":"Requires Perplexity key",locked:!V}].map(({tab:R,emoji:A,title:ye,desc:Ke,locked:pe})=>_.jsxs("button",{onClick:()=>!pe&&t(R),disabled:pe,className:`flex items-center gap-3 bg-gray-900 border rounded-2xl p-4 text-left transition group ${pe?"border-gray-800 opacity-50 cursor-not-allowed":"border-gray-800 hover:border-gray-600"}`,children:[_.jsx("span",{className:`text-2xl ${pe?"grayscale":""}`,children:A}),_.jsxs("div",{className:"flex-1 min-w-0",children:[_.jsxs("p",{className:`font-medium text-sm flex items-center gap-1.5 ${pe?"text-gray-500":"text-gray-200 group-hover:text-white transition"}`,children:[ye,pe&&_.jsx(Ps,{className:"w-3 h-3"})]}),_.jsx("p",{className:"text-xs text-gray-500 truncate",children:Ke})]})]},R))})]}),e==="itinerary"&&_.jsx(wC,{trip:r,onGenerate:c,onUpdate:y,hasAiKey:N,onSettingsClick:U}),e==="packing"&&_.jsx(TC,{trip:r,onGenerate:p,onUpdate:y,hasAiKey:N,onSettingsClick:U}),e==="map"&&_.jsx(JC,{trip:r}),e==="chat"&&_.jsx(kC,{trip:r,perplexityKey:b,anthropicKey:k,hasAiKey:V,onSettingsClick:U,getChatHistory:w,saveChatHistory:T}),e==="search"&&_.jsx(e2,{trip:r,perplexityKey:b,hasSearchKey:V,onSettingsClick:U})]}),_.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 z-30 bg-gray-900/95 backdrop-blur-md border-t border-gray-800",children:_.jsx("div",{className:"flex items-center overflow-x-auto px-2 pt-1 pb-2 gap-1 scrollbar-hide",children:rv.map(R=>{const A=!!(R.searchOnly&&!V);return _.jsxs("button",{onClick:()=>!A&&t(R.id),disabled:A,className:`flex flex-col items-center gap-0.5 shrink-0 min-w-[52px] py-1.5 px-1 rounded-xl transition ${A?"text-gray-700 cursor-not-allowed":e===R.id?"text-indigo-400":"text-gray-500"}`,children:[_.jsx("span",{className:`text-xl leading-none ${A?"grayscale opacity-40":""}`,children:R.emoji}),_.jsxs("span",{className:"text-[10px] font-medium flex items-center gap-0.5 whitespace-nowrap",children:[R.label,A&&_.jsx(Ps,{className:"w-2.5 h-2.5"})]}),e===R.id&&!A&&_.jsx("span",{className:"w-1 h-1 bg-indigo-400 rounded-full"})]},R.id)})})})]})}function i2(){try{const r=new AudioContext,e=(t,o,a)=>{const c=r.createOscillator(),p=r.createGain();c.connect(p),p.connect(r.destination),c.type="sine",c.frequency.setValueAtTime(t,r.currentTime+o),p.gain.setValueAtTime(0,r.currentTime+o),p.gain.linearRampToValueAtTime(.18,r.currentTime+o+.02),p.gain.exponentialRampToValueAtTime(.001,r.currentTime+o+a),c.start(r.currentTime+o),c.stop(r.currentTime+o+a)};e(880,0,.5),e(1320,.18,.6),setTimeout(()=>r.close(),1200)}catch{}}function s2(){const[r,e]=ie.useState([]),[t,o]=ie.useState(!0),[a,c]=ie.useState(!1),p=ie.useRef(null),y=ie.useRef(null),w=()=>{y.current&&(clearTimeout(y.current),y.current=null)},T=()=>{w(),y.current=setTimeout(()=>{i2(),y.current=null},1e4)};ie.useEffect(()=>{const U=()=>w();return window.addEventListener("pointerdown",U),window.addEventListener("keydown",U),()=>{window.removeEventListener("pointerdown",U),window.removeEventListener("keydown",U)}},[]),ie.useEffect(()=>(Ky(U=>{e(q=>{const te=q.findIndex(ce=>ce.id===U.id);if(te!==-1){q[te].status==="pending"&&U.status!=="pending"&&T();const ge=[...q];return ge[te]=U,ge}return[...q.slice(-49),U]}),c(!0),setTimeout(()=>c(!1),2e3)}),()=>Ky(null)),[]),ie.useEffect(()=>{var U;t&&((U=p.current)==null||U.scrollIntoView({behavior:"smooth"}))},[r,t]);const b=r.filter(U=>U.status==="pending").length,k=r.length>0,N=U=>U==="pending"?_.jsx(Wn,{className:"w-3.5 h-3.5 text-indigo-400 animate-spin shrink-0"}):U==="success"?_.jsx(eS,{className:"w-3.5 h-3.5 text-emerald-400 shrink-0"}):_.jsx(tS,{className:"w-3.5 h-3.5 text-red-400 shrink-0"}),V=U=>U==="pending"?"border-l-indigo-500":U==="success"?"border-l-emerald-500":"border-l-red-500";return _.jsxs("div",{className:`fixed z-40 rounded-2xl border border-gray-700 shadow-2xl shadow-black/60 overflow-hidden transition-all duration-200
        bottom-[72px] left-3 right-3
        md:bottom-4 md:left-auto md:right-4 md:w-80 ${a?"ring-1 ring-indigo-500/40":""}`,children:[_.jsxs("button",{onClick:()=>o(U=>!U),className:"w-full flex items-center justify-between px-4 py-3 bg-gray-900 hover:bg-gray-800 transition",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx(KI,{className:"w-4 h-4 text-indigo-400"}),_.jsx("span",{className:"text-sm font-medium text-gray-200",children:"Activity"}),b>0&&_.jsxs("span",{className:"flex items-center gap-1 text-xs text-indigo-300 bg-indigo-500/20 px-2 py-0.5 rounded-full",children:[_.jsx(Wn,{className:"w-2.5 h-2.5 animate-spin"}),b," running"]}),!t&&k&&b===0&&_.jsxs("span",{className:"text-xs text-gray-500",children:[r.length," events"]})]}),_.jsxs("div",{className:"flex items-center gap-1",children:[t&&k&&_.jsx("span",{onClick:U=>{U.stopPropagation(),e([])},className:"p-1 text-gray-600 hover:text-gray-400 rounded transition cursor-pointer",title:"Clear log",children:_.jsx(Ku,{className:"w-3.5 h-3.5"})}),t?_.jsx(n0,{className:"w-4 h-4 text-gray-400"}):_.jsx(JI,{className:"w-4 h-4 text-gray-400"})]})]}),t&&_.jsxs("div",{className:"bg-gray-950 max-h-64 overflow-y-auto",children:[r.length===0?_.jsx("div",{className:"px-4 py-6 text-center text-xs text-gray-600",children:"No activity yet. Start by creating a trip or generating content."}):_.jsx("div",{className:"divide-y divide-gray-800/50",children:r.map(U=>_.jsx("div",{className:`px-4 py-2.5 border-l-2 ${V(U.status)}`,children:_.jsxs("div",{className:"flex items-start gap-2",children:[_.jsx("div",{className:"mt-0.5",children:N(U.status)}),_.jsxs("div",{className:"flex-1 min-w-0",children:[_.jsx("p",{className:"text-xs text-gray-300 leading-snug",children:U.message}),U.detail&&_.jsx("p",{className:"text-xs text-red-400 mt-0.5 leading-snug",children:U.detail}),_.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:new Date(U.timestamp).toLocaleTimeString("en",{hour:"2-digit",minute:"2-digit",second:"2-digit"})})]})]})},U.id))}),_.jsx("div",{ref:p})]})]})}const o2={debug:"text-gray-400",info:"text-blue-300",warn:"text-amber-300",error:"text-red-400"},a2={debug:"bg-gray-800",info:"bg-blue-500/10 border-l-blue-500",warn:"bg-amber-500/10 border-l-amber-500",error:"bg-red-500/10 border-l-red-500"};function l2({data:r}){const[e,t]=ie.useState(!1);if(r==null)return null;const o=typeof r=="string"?r:JSON.stringify(r,null,2),a=o.length>120;return _.jsxs("div",{className:"mt-1",children:[a?_.jsxs("button",{onClick:()=>t(c=>!c),className:"flex items-center gap-1 text-xs text-gray-500 hover:text-gray-300 transition",children:[e?_.jsx(n0,{className:"w-3 h-3"}):_.jsx(YI,{className:"w-3 h-3"}),e?"Collapse":`Expand (${o.length} chars)`]}):null,(!a||e)&&_.jsx("pre",{className:"text-[10px] text-gray-400 bg-gray-900 rounded p-2 mt-1 overflow-x-auto whitespace-pre-wrap break-all max-h-48 overflow-y-auto",children:o})]})}function u2(){const[r,e]=ie.useState(!1),[t,o]=ie.useState(()=>Qy()),[a,c]=ie.useState("all"),[p,y]=ie.useState(""),[w,T]=ie.useState(!1),b=ie.useRef(null);ie.useEffect(()=>{const V=U=>{U.ctrlKey&&U.shiftKey&&U.key==="D"&&(U.preventDefault(),e(q=>!q))};return window.addEventListener("keydown",V),()=>window.removeEventListener("keydown",V)},[]),ie.useEffect(()=>(Zy(V=>{if(!V){o([]);return}o(Qy())}),()=>Zy(null)),[]),ie.useEffect(()=>{var V;r&&((V=b.current)==null||V.scrollIntoView({behavior:"smooth"}))},[t,r]);const k=t.filter(V=>(a==="all"||V.level===a)&&(!p||V.message.toLowerCase().includes(p.toLowerCase())||V.category.toLowerCase().includes(p.toLowerCase()))),N=()=>{const V=k.map(U=>`[${U.timestamp}] [${U.level.toUpperCase()}] [${U.category}] ${U.message}`+(U.data!==void 0?`
`+JSON.stringify(U.data,null,2):"")).join(`

`);navigator.clipboard.writeText(V).then(()=>{T(!0),setTimeout(()=>T(!1),2e3)})};return r?_.jsxs("div",{className:"fixed inset-x-2 bottom-2 top-2 z-50 md:inset-x-auto md:left-auto md:right-2 md:top-2 md:bottom-2 md:w-[560px] flex flex-col bg-gray-950 border border-gray-700 rounded-2xl shadow-2xl overflow-hidden",children:[_.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 border-b border-gray-800 shrink-0",children:[_.jsx(z_,{className:"w-4 h-4 text-indigo-400 shrink-0"}),_.jsx("span",{className:"font-medium text-sm text-gray-200",children:"Debug Log"}),_.jsxs("span",{className:"text-xs text-gray-600 ml-1",children:[t.length," entries"]}),_.jsx("div",{className:"flex gap-1 ml-2",children:["all","debug","info","warn","error"].map(V=>_.jsx("button",{onClick:()=>c(V),className:`text-xs px-2 py-0.5 rounded-full transition ${a===V?"bg-indigo-600 text-white":"text-gray-500 hover:text-gray-300 hover:bg-gray-800"}`,children:V},V))}),_.jsxs("div",{className:"flex items-center gap-1 ml-auto",children:[_.jsxs("button",{onClick:N,title:"Copy all visible logs",className:"p-1.5 text-gray-500 hover:text-gray-300 hover:bg-gray-800 rounded-lg transition text-xs flex items-center gap-1",children:[_.jsx(sS,{className:"w-3.5 h-3.5"}),w?"Copied!":"Copy"]}),_.jsx("button",{onClick:()=>{Xk(),o([])},title:"Clear",className:"p-1.5 text-gray-500 hover:text-red-400 hover:bg-gray-800 rounded-lg transition",children:_.jsx(Ku,{className:"w-3.5 h-3.5"})}),_.jsx("button",{onClick:()=>e(!1),className:"p-1.5 text-gray-500 hover:text-gray-300 hover:bg-gray-800 rounded-lg transition",children:_.jsx(Sa,{className:"w-3.5 h-3.5"})})]})]}),_.jsx("div",{className:"px-3 py-2 border-b border-gray-800 shrink-0",children:_.jsx("input",{value:p,onChange:V=>y(V.target.value),placeholder:"Filter messages or categories",className:"w-full bg-gray-900 border border-gray-700 rounded-lg px-3 py-1.5 text-xs text-gray-200 placeholder-gray-600 focus:outline-none focus:border-indigo-500 transition"})}),_.jsxs("div",{className:"flex-1 overflow-y-auto text-xs font-mono",children:[k.length===0?_.jsx("div",{className:"flex items-center justify-center h-20 text-gray-600",children:"No entries"}):k.map(V=>_.jsxs("div",{className:`px-3 py-2 border-b border-gray-800/60 border-l-2 ${a2[V.level]}`,children:[_.jsxs("div",{className:"flex items-baseline gap-2 flex-wrap",children:[_.jsxs("span",{className:"text-gray-600 shrink-0",children:[new Date(V.timestamp).toLocaleTimeString("en",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"}),_.jsxs("span",{className:"text-gray-700",children:[".",String(new Date(V.timestamp).getMilliseconds()).padStart(3,"0")]})]}),_.jsx("span",{className:`uppercase font-bold shrink-0 ${o2[V.level]}`,children:V.level}),_.jsx("span",{className:"text-indigo-400 shrink-0",children:V.category}),_.jsx("span",{className:"text-gray-300 break-all",children:V.message})]}),V.data!==void 0&&_.jsx(l2,{data:V.data})]},V.id)),_.jsx("div",{ref:b})]}),_.jsxs("div",{className:"px-3 py-2 border-t border-gray-800 text-[10px] text-gray-600 shrink-0",children:["Ctrl+Shift+D to toggle  ",k.length," of ",t.length," shown"]})]}):_.jsx("button",{onClick:()=>e(!0),title:"Debug panel (Ctrl+Shift+D)",className:"fixed bottom-4 left-4 z-50 w-8 h-8 bg-gray-900 border border-gray-700 rounded-lg flex items-center justify-center text-gray-600 hover:text-gray-300 hover:border-gray-500 transition shadow-lg",children:_.jsx(z_,{className:"w-4 h-4"})})}function c2(){return Math.random().toString(36).slice(2,11)}function h2(){const{user:r,loading:e}=Hk(),[t,o]=ie.useState([]),[a,c]=ie.useState("dashboard"),[p,y]=ie.useState(null),[w,T]=ie.useState("overview"),[b,k]=ie.useState(""),[N,V]=ie.useState(""),[U,q]=ie.useState(!1);ie.useEffect(()=>{if(!r){o([]),k(""),V(""),c("dashboard"),y(null);return}let R=!1;return Promise.all([$k(r.uid).catch(()=>[]),Zk(r.uid).catch(()=>({perplexityKey:"",anthropicKey:""}))]).then(([A,ye])=>{R||(o(A),k(ye.perplexityKey),V(ye.anthropicKey))}),()=>{R=!0}},[r]);const te=async R=>{k(R.perplexityKey),V(R.anthropicKey),r&&await Qk(r.uid,R)},ce=()=>NT(Fh),ge=async R=>{if(!(r!=null&&r.email))return;const A=Aa.credential(r.email,R);await ST(r,A),await Yk(r.uid),await RT(r)},Te=async R=>{var Ke,pe;const A=await oC({...R,anthropicKey:N,context:R.context}),ye={id:c2(),name:A.name,emoji:A.emoji,description:A.description,coverGradient:A.coverGradient,destination:R.destination,country:((Ke=R.destination.split(",").pop())==null?void 0:Ke.trim())??R.destination,startDate:R.startDate,endDate:R.endDate,travelers:R.travelers,budget:R.budget,currency:R.currency,interests:R.interests,notes:((pe=R.context)==null?void 0:pe.text)||void 0,itinerary:[],packingList:[],status:"planning",createdAt:new Date().toISOString()};return o(Ve=>[...Ve,ye]),y(ye),T("overview"),c("detail"),r&&await Gy(r.uid,ye),ye},Oe=async R=>{o(A=>A.map(ye=>ye.id===R.id?R:ye)),y(R),r&&await Gy(r.uid,R)},be=async R=>{o(A=>A.filter(ye=>ye.id!==R)),c("dashboard"),y(null),r&&await qk(r.uid,R)},fe=async R=>{const A=await aC(R,N),ye={...R,itinerary:A};return await Oe(ye),ye},F=async R=>{const A=await lC(R,N),ye={...R,packingList:A};return await Oe(ye),ye},D=R=>r?Gk(r.uid,R):Promise.resolve([]),M=(R,A)=>r?Kk(r.uid,R,A):Promise.resolve();if(e)return _.jsx("div",{className:"min-h-screen bg-gray-950 flex items-center justify-center",children:_.jsx(Wn,{className:"w-8 h-8 text-indigo-400 animate-spin"})});if(!r)return _.jsx(dC,{});const B=!!N,j=!!b;return _.jsxs("div",{className:"min-h-screen bg-gray-950 text-gray-100 font-sans",children:[_.jsx(s2,{}),_.jsx(u2,{}),U&&_.jsx(fC,{onSave:te,existing:{perplexityKey:b,anthropicKey:N},onClose:()=>q(!1),onLogout:ce,onDeleteAccount:ge}),a==="dashboard"&&_.jsx(pC,{trips:t,onNewTrip:()=>c("wizard"),onSelectTrip:R=>{y(R),T("overview"),c("detail")},onSettingsClick:()=>q(!0),hasAiKey:B}),a==="wizard"&&_.jsx(yC,{onBack:()=>c("dashboard"),onCreate:Te,hasAiKey:B,hasClaudeKey:!!N,onSettingsClick:()=>q(!0)}),a==="detail"&&p&&_.jsx(r2,{trip:p,activeTab:w,onTabChange:T,onBack:()=>c("dashboard"),onDelete:be,onGenerateItinerary:fe,onGeneratePackingList:F,onUpdateTrip:Oe,getChatHistory:D,saveChatHistory:M,perplexityKey:b,anthropicKey:N,hasGenerationKey:B,hasSearchKey:j,onSettingsClick:()=>q(!0)})]})}$w.createRoot(document.getElementById("root")).render(_.jsx(ie.StrictMode,{children:_.jsx(h2,{})}));
