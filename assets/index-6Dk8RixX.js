(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();var ld={exports:{}},ba={},ud={exports:{}},Re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dg;function Qw(){if(dg)return Re;dg=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),I=Symbol.iterator;function k(L){return L===null||typeof L!="object"?null:(L=I&&L[I]||L["@@iterator"],typeof L=="function"?L:null)}var F={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,$={};function q(L,G,Ae){this.props=L,this.context=G,this.refs=$,this.updater=Ae||F}q.prototype.isReactComponent={},q.prototype.setState=function(L,G){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,G,"setState")},q.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function ce(){}ce.prototype=q.prototype;function ee(L,G,Ae){this.props=L,this.context=G,this.refs=$,this.updater=Ae||F}var Z=ee.prototype=new ce;Z.constructor=ee,B(Z,q.prototype),Z.isPureReactComponent=!0;var we=Array.isArray,Se=Object.prototype.hasOwnProperty,ye={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function T(L,G,Ae){var ke,be={},De=null,qe=null;if(G!=null)for(ke in G.ref!==void 0&&(qe=G.ref),G.key!==void 0&&(De=""+G.key),G)Se.call(G,ke)&&!N.hasOwnProperty(ke)&&(be[ke]=G[ke]);var Fe=arguments.length-2;if(Fe===1)be.children=Ae;else if(1<Fe){for(var Ge=Array(Fe),Bt=0;Bt<Fe;Bt++)Ge[Bt]=arguments[Bt+2];be.children=Ge}if(L&&L.defaultProps)for(ke in Fe=L.defaultProps,Fe)be[ke]===void 0&&(be[ke]=Fe[ke]);return{$$typeof:r,type:L,key:De,ref:qe,props:be,_owner:ye.current}}function A(L,G){return{$$typeof:r,type:L.type,key:G,ref:L.ref,props:L.props,_owner:L._owner}}function P(L){return typeof L=="object"&&L!==null&&L.$$typeof===r}function b(L){var G={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(Ae){return G[Ae]})}var R=/\/+/g;function S(L,G){return typeof L=="object"&&L!==null&&L.key!=null?b(""+L.key):G.toString(36)}function te(L,G,Ae,ke,be){var De=typeof L;(De==="undefined"||De==="boolean")&&(L=null);var qe=!1;if(L===null)qe=!0;else switch(De){case"string":case"number":qe=!0;break;case"object":switch(L.$$typeof){case r:case e:qe=!0}}if(qe)return qe=L,be=be(qe),L=ke===""?"."+S(qe,0):ke,we(be)?(Ae="",L!=null&&(Ae=L.replace(R,"$&/")+"/"),te(be,G,Ae,"",function(Bt){return Bt})):be!=null&&(P(be)&&(be=A(be,Ae+(!be.key||qe&&qe.key===be.key?"":(""+be.key).replace(R,"$&/")+"/")+L)),G.push(be)),1;if(qe=0,ke=ke===""?".":ke+":",we(L))for(var Fe=0;Fe<L.length;Fe++){De=L[Fe];var Ge=ke+S(De,Fe);qe+=te(De,G,Ae,Ge,be)}else if(Ge=k(L),typeof Ge=="function")for(L=Ge.call(L),Fe=0;!(De=L.next()).done;)De=De.value,Ge=ke+S(De,Fe++),qe+=te(De,G,Ae,Ge,be);else if(De==="object")throw G=String(L),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.");return qe}function Ce(L,G,Ae){if(L==null)return L;var ke=[],be=0;return te(L,ke,"","",function(De){return G.call(Ae,De,be++)}),ke}function Ne(L){if(L._status===-1){var G=L._result;G=G(),G.then(function(Ae){(L._status===0||L._status===-1)&&(L._status=1,L._result=Ae)},function(Ae){(L._status===0||L._status===-1)&&(L._status=2,L._result=Ae)}),L._status===-1&&(L._status=0,L._result=G)}if(L._status===1)return L._result.default;throw L._result}var ze={current:null},ne={transition:null},pe={ReactCurrentDispatcher:ze,ReactCurrentBatchConfig:ne,ReactCurrentOwner:ye};function oe(){throw Error("act(...) is not supported in production builds of React.")}return Re.Children={map:Ce,forEach:function(L,G,Ae){Ce(L,function(){G.apply(this,arguments)},Ae)},count:function(L){var G=0;return Ce(L,function(){G++}),G},toArray:function(L){return Ce(L,function(G){return G})||[]},only:function(L){if(!P(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Re.Component=q,Re.Fragment=t,Re.Profiler=o,Re.PureComponent=ee,Re.StrictMode=i,Re.Suspense=y,Re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pe,Re.act=oe,Re.cloneElement=function(L,G,Ae){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var ke=B({},L.props),be=L.key,De=L.ref,qe=L._owner;if(G!=null){if(G.ref!==void 0&&(De=G.ref,qe=ye.current),G.key!==void 0&&(be=""+G.key),L.type&&L.type.defaultProps)var Fe=L.type.defaultProps;for(Ge in G)Se.call(G,Ge)&&!N.hasOwnProperty(Ge)&&(ke[Ge]=G[Ge]===void 0&&Fe!==void 0?Fe[Ge]:G[Ge])}var Ge=arguments.length-2;if(Ge===1)ke.children=Ae;else if(1<Ge){Fe=Array(Ge);for(var Bt=0;Bt<Ge;Bt++)Fe[Bt]=arguments[Bt+2];ke.children=Fe}return{$$typeof:r,type:L.type,key:be,ref:De,props:ke,_owner:qe}},Re.createContext=function(L){return L={$$typeof:h,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:l,_context:L},L.Consumer=L},Re.createElement=T,Re.createFactory=function(L){var G=T.bind(null,L);return G.type=L,G},Re.createRef=function(){return{current:null}},Re.forwardRef=function(L){return{$$typeof:m,render:L}},Re.isValidElement=P,Re.lazy=function(L){return{$$typeof:E,_payload:{_status:-1,_result:L},_init:Ne}},Re.memo=function(L,G){return{$$typeof:v,type:L,compare:G===void 0?null:G}},Re.startTransition=function(L){var G=ne.transition;ne.transition={};try{L()}finally{ne.transition=G}},Re.unstable_act=oe,Re.useCallback=function(L,G){return ze.current.useCallback(L,G)},Re.useContext=function(L){return ze.current.useContext(L)},Re.useDebugValue=function(){},Re.useDeferredValue=function(L){return ze.current.useDeferredValue(L)},Re.useEffect=function(L,G){return ze.current.useEffect(L,G)},Re.useId=function(){return ze.current.useId()},Re.useImperativeHandle=function(L,G,Ae){return ze.current.useImperativeHandle(L,G,Ae)},Re.useInsertionEffect=function(L,G){return ze.current.useInsertionEffect(L,G)},Re.useLayoutEffect=function(L,G){return ze.current.useLayoutEffect(L,G)},Re.useMemo=function(L,G){return ze.current.useMemo(L,G)},Re.useReducer=function(L,G,Ae){return ze.current.useReducer(L,G,Ae)},Re.useRef=function(L){return ze.current.useRef(L)},Re.useState=function(L){return ze.current.useState(L)},Re.useSyncExternalStore=function(L,G,Ae){return ze.current.useSyncExternalStore(L,G,Ae)},Re.useTransition=function(){return ze.current.useTransition()},Re.version="18.3.1",Re}var fg;function nf(){return fg||(fg=1,ud.exports=Qw()),ud.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pg;function Yw(){if(pg)return ba;pg=1;var r=nf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(m,y,v){var E,I={},k=null,F=null;v!==void 0&&(k=""+v),y.key!==void 0&&(k=""+y.key),y.ref!==void 0&&(F=y.ref);for(E in y)i.call(y,E)&&!l.hasOwnProperty(E)&&(I[E]=y[E]);if(m&&m.defaultProps)for(E in y=m.defaultProps,y)I[E]===void 0&&(I[E]=y[E]);return{$$typeof:e,type:m,key:k,ref:F,props:I,_owner:o.current}}return ba.Fragment=t,ba.jsx=h,ba.jsxs=h,ba}var mg;function Jw(){return mg||(mg=1,ld.exports=Yw()),ld.exports}var g=Jw(),de=nf(),Nu={},cd={exports:{}},Yt={},hd={exports:{}},dd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gg;function Xw(){return gg||(gg=1,(function(r){function e(ne,pe){var oe=ne.length;ne.push(pe);e:for(;0<oe;){var L=oe-1>>>1,G=ne[L];if(0<o(G,pe))ne[L]=pe,ne[oe]=G,oe=L;else break e}}function t(ne){return ne.length===0?null:ne[0]}function i(ne){if(ne.length===0)return null;var pe=ne[0],oe=ne.pop();if(oe!==pe){ne[0]=oe;e:for(var L=0,G=ne.length,Ae=G>>>1;L<Ae;){var ke=2*(L+1)-1,be=ne[ke],De=ke+1,qe=ne[De];if(0>o(be,oe))De<G&&0>o(qe,be)?(ne[L]=qe,ne[De]=oe,L=De):(ne[L]=be,ne[ke]=oe,L=ke);else if(De<G&&0>o(qe,oe))ne[L]=qe,ne[De]=oe,L=De;else break e}}return pe}function o(ne,pe){var oe=ne.sortIndex-pe.sortIndex;return oe!==0?oe:ne.id-pe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var h=Date,m=h.now();r.unstable_now=function(){return h.now()-m}}var y=[],v=[],E=1,I=null,k=3,F=!1,B=!1,$=!1,q=typeof setTimeout=="function"?setTimeout:null,ce=typeof clearTimeout=="function"?clearTimeout:null,ee=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Z(ne){for(var pe=t(v);pe!==null;){if(pe.callback===null)i(v);else if(pe.startTime<=ne)i(v),pe.sortIndex=pe.expirationTime,e(y,pe);else break;pe=t(v)}}function we(ne){if($=!1,Z(ne),!B)if(t(y)!==null)B=!0,Ne(Se);else{var pe=t(v);pe!==null&&ze(we,pe.startTime-ne)}}function Se(ne,pe){B=!1,$&&($=!1,ce(T),T=-1),F=!0;var oe=k;try{for(Z(pe),I=t(y);I!==null&&(!(I.expirationTime>pe)||ne&&!b());){var L=I.callback;if(typeof L=="function"){I.callback=null,k=I.priorityLevel;var G=L(I.expirationTime<=pe);pe=r.unstable_now(),typeof G=="function"?I.callback=G:I===t(y)&&i(y),Z(pe)}else i(y);I=t(y)}if(I!==null)var Ae=!0;else{var ke=t(v);ke!==null&&ze(we,ke.startTime-pe),Ae=!1}return Ae}finally{I=null,k=oe,F=!1}}var ye=!1,N=null,T=-1,A=5,P=-1;function b(){return!(r.unstable_now()-P<A)}function R(){if(N!==null){var ne=r.unstable_now();P=ne;var pe=!0;try{pe=N(!0,ne)}finally{pe?S():(ye=!1,N=null)}}else ye=!1}var S;if(typeof ee=="function")S=function(){ee(R)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,Ce=te.port2;te.port1.onmessage=R,S=function(){Ce.postMessage(null)}}else S=function(){q(R,0)};function Ne(ne){N=ne,ye||(ye=!0,S())}function ze(ne,pe){T=q(function(){ne(r.unstable_now())},pe)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(ne){ne.callback=null},r.unstable_continueExecution=function(){B||F||(B=!0,Ne(Se))},r.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<ne?Math.floor(1e3/ne):5},r.unstable_getCurrentPriorityLevel=function(){return k},r.unstable_getFirstCallbackNode=function(){return t(y)},r.unstable_next=function(ne){switch(k){case 1:case 2:case 3:var pe=3;break;default:pe=k}var oe=k;k=pe;try{return ne()}finally{k=oe}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(ne,pe){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var oe=k;k=ne;try{return pe()}finally{k=oe}},r.unstable_scheduleCallback=function(ne,pe,oe){var L=r.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?L+oe:L):oe=L,ne){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=oe+G,ne={id:E++,callback:pe,priorityLevel:ne,startTime:oe,expirationTime:G,sortIndex:-1},oe>L?(ne.sortIndex=oe,e(v,ne),t(y)===null&&ne===t(v)&&($?(ce(T),T=-1):$=!0,ze(we,oe-L))):(ne.sortIndex=G,e(y,ne),B||F||(B=!0,Ne(Se))),ne},r.unstable_shouldYield=b,r.unstable_wrapCallback=function(ne){var pe=k;return function(){var oe=k;k=pe;try{return ne.apply(this,arguments)}finally{k=oe}}}})(dd)),dd}var yg;function Zw(){return yg||(yg=1,hd.exports=Xw()),hd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _g;function eE(){if(_g)return Yt;_g=1;var r=nf(),e=Zw();function t(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(n,s){h(n,s),h(n+"Capture",s)}function h(n,s){for(o[n]=s,n=0;n<s.length;n++)i.add(s[n])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),y=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E={},I={};function k(n){return y.call(I,n)?!0:y.call(E,n)?!1:v.test(n)?I[n]=!0:(E[n]=!0,!1)}function F(n,s,a,c){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function B(n,s,a,c){if(s===null||typeof s>"u"||F(n,s,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function $(n,s,a,c,d,f,w){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=n,this.type=s,this.sanitizeURL=f,this.removeEmptyString=w}var q={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){q[n]=new $(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];q[s]=new $(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){q[n]=new $(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){q[n]=new $(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){q[n]=new $(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){q[n]=new $(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){q[n]=new $(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){q[n]=new $(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){q[n]=new $(n,5,!1,n.toLowerCase(),null,!1,!1)});var ce=/[\-:]([a-z])/g;function ee(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(ce,ee);q[s]=new $(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(ce,ee);q[s]=new $(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(ce,ee);q[s]=new $(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){q[n]=new $(n,1,!1,n.toLowerCase(),null,!1,!1)}),q.xlinkHref=new $("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){q[n]=new $(n,1,!1,n.toLowerCase(),null,!0,!0)});function Z(n,s,a,c){var d=q.hasOwnProperty(s)?q[s]:null;(d!==null?d.type!==0:c||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(B(s,a,d,c)&&(a=null),c||d===null?k(s)&&(a===null?n.removeAttribute(s):n.setAttribute(s,""+a)):d.mustUseProperty?n[d.propertyName]=a===null?d.type===3?!1:"":a:(s=d.attributeName,c=d.attributeNamespace,a===null?n.removeAttribute(s):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,c?n.setAttributeNS(c,s,a):n.setAttribute(s,a))))}var we=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Se=Symbol.for("react.element"),ye=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),b=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),te=Symbol.for("react.suspense_list"),Ce=Symbol.for("react.memo"),Ne=Symbol.for("react.lazy"),ze=Symbol.for("react.offscreen"),ne=Symbol.iterator;function pe(n){return n===null||typeof n!="object"?null:(n=ne&&n[ne]||n["@@iterator"],typeof n=="function"?n:null)}var oe=Object.assign,L;function G(n){if(L===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);L=s&&s[1]||""}return`
`+L+n}var Ae=!1;function ke(n,s){if(!n||Ae)return"";Ae=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(U){var c=U}Reflect.construct(n,[],s)}else{try{s.call()}catch(U){c=U}n.call(s.prototype)}else{try{throw Error()}catch(U){c=U}n()}}catch(U){if(U&&c&&typeof U.stack=="string"){for(var d=U.stack.split(`
`),f=c.stack.split(`
`),w=d.length-1,C=f.length-1;1<=w&&0<=C&&d[w]!==f[C];)C--;for(;1<=w&&0<=C;w--,C--)if(d[w]!==f[C]){if(w!==1||C!==1)do if(w--,C--,0>C||d[w]!==f[C]){var D=`
`+d[w].replace(" at new "," at ");return n.displayName&&D.includes("<anonymous>")&&(D=D.replace("<anonymous>",n.displayName)),D}while(1<=w&&0<=C);break}}}finally{Ae=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?G(n):""}function be(n){switch(n.tag){case 5:return G(n.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return n=ke(n.type,!1),n;case 11:return n=ke(n.type.render,!1),n;case 1:return n=ke(n.type,!0),n;default:return""}}function De(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case N:return"Fragment";case ye:return"Portal";case A:return"Profiler";case T:return"StrictMode";case S:return"Suspense";case te:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case b:return(n.displayName||"Context")+".Consumer";case P:return(n._context.displayName||"Context")+".Provider";case R:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Ce:return s=n.displayName||null,s!==null?s:De(n.type)||"Memo";case Ne:s=n._payload,n=n._init;try{return De(n(s))}catch{}}return null}function qe(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return De(s);case 8:return s===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Fe(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ge(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Bt(n){var s=Ge(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),c=""+n[s];if(!n.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,f=a.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return d.call(this)},set:function(w){c=""+w,f.call(this,w)}}),Object.defineProperty(n,s,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function Ei(n){n._valueTracker||(n._valueTracker=Bt(n))}function jo(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),c="";return n&&(c=Ge(n)?n.checked?"true":"false":n.value),n=c,n!==a?(s.setValue(n),!0):!1}function Or(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function xi(n,s){var a=s.checked;return oe({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function pl(n,s){var a=s.defaultValue==null?"":s.defaultValue,c=s.checked!=null?s.checked:s.defaultChecked;a=Fe(s.value!=null?s.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Ti(n,s){s=s.checked,s!=null&&Z(n,"checked",s,!1)}function Ds(n,s){Ti(n,s);var a=Fe(s.value),c=s.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?dt(n,s.type,a):s.hasOwnProperty("defaultValue")&&dt(n,s.type,Fe(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function Fo(n,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var c=s.type;if(!(c!=="submit"&&c!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,a||s===n.value||(n.value=s),n.defaultValue=s}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function dt(n,s,a){(s!=="number"||Or(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var at=Array.isArray;function Tn(n,s,a,c){if(n=n.options,s){s={};for(var d=0;d<a.length;d++)s["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=s.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&c&&(n[a].defaultSelected=!0)}else{for(a=""+Fe(a),s=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,c&&(n[d].defaultSelected=!0);return}s!==null||n[d].disabled||(s=n[d])}s!==null&&(s.selected=!0)}}function Uo(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return oe({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function zo(n,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(at(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}n._wrapperState={initialValue:Fe(a)}}function ml(n,s){var a=Fe(s.value),c=Fe(s.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),s.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function Mr(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function Bo(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ii(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?Bo(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var jr,gl=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,c,d){MSApp.execUnsafeLocalFunction(function(){return n(s,a,c,d)})}:n})(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(jr=jr||document.createElement("div"),jr.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=jr.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function Vs(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var Fr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},yl=["Webkit","ms","Moz","O"];Object.keys(Fr).forEach(function(n){yl.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),Fr[s]=Fr[n]})});function Ur(n,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||Fr.hasOwnProperty(n)&&Fr[n]?(""+s).trim():s+"px"}function Si(n,s){n=n.style;for(var a in s)if(s.hasOwnProperty(a)){var c=a.indexOf("--")===0,d=Ur(a,s[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,d):n[a]=d}}var $o=oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function In(n,s){if(s){if($o[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function Ai(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zr=null;function ki(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var lr=null,ur=null,it=null;function qo(n){if(n=ya(n)){if(typeof lr!="function")throw Error(t(280));var s=n.stateNode;s&&(s=ql(s),lr(n.stateNode,n.type,s))}}function Br(n){ur?it?it.push(n):it=[n]:ur=n}function $r(){if(ur){var n=ur,s=it;if(it=ur=null,qo(n),s)for(n=0;n<s.length;n++)qo(s[n])}}function _l(n,s){return n(s)}function vl(){}var Mn=!1;function wl(n,s,a){if(Mn)return n(s,a);Mn=!0;try{return _l(n,s,a)}finally{Mn=!1,(ur!==null||it!==null)&&(vl(),$r())}}function Ls(n,s){var a=n.stateNode;if(a===null)return null;var c=ql(a);if(c===null)return null;a=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var qr=!1;if(m)try{var Hr={};Object.defineProperty(Hr,"passive",{get:function(){qr=!0}}),window.addEventListener("test",Hr,Hr),window.removeEventListener("test",Hr,Hr)}catch{qr=!1}function El(n,s,a,c,d,f,w,C,D){var U=Array.prototype.slice.call(arguments,3);try{s.apply(a,U)}catch(Q){this.onError(Q)}}var cr=!1,jn=null,Ci=!1,hn=null,xl={onError:function(n){cr=!0,jn=n}};function Tl(n,s,a,c,d,f,w,C,D){cr=!1,jn=null,El.apply(xl,arguments)}function Ho(n,s,a,c,d,f,w,C,D){if(Tl.apply(this,arguments),cr){if(cr){var U=jn;cr=!1,jn=null}else throw Error(t(198));Ci||(Ci=!0,hn=U)}}function Sn(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function Wo(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function Il(n){if(Sn(n)!==n)throw Error(t(188))}function Sl(n){var s=n.alternate;if(!s){if(s=Sn(n),s===null)throw Error(t(188));return s!==n?null:n}for(var a=n,c=s;;){var d=a.return;if(d===null)break;var f=d.alternate;if(f===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===a)return Il(d),n;if(f===c)return Il(d),s;f=f.sibling}throw Error(t(188))}if(a.return!==c.return)a=d,c=f;else{for(var w=!1,C=d.child;C;){if(C===a){w=!0,a=d,c=f;break}if(C===c){w=!0,c=d,a=f;break}C=C.sibling}if(!w){for(C=f.child;C;){if(C===a){w=!0,a=f,c=d;break}if(C===c){w=!0,c=f,a=d;break}C=C.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:s}function Al(n){return n=Sl(n),n!==null?Os(n):null}function Os(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=Os(n);if(s!==null)return s;n=n.sibling}return null}var Go=e.unstable_scheduleCallback,Ni=e.unstable_cancelCallback,Ms=e.unstable_shouldYield,hr=e.unstable_requestPaint,Je=e.unstable_now,Fc=e.unstable_getCurrentPriorityLevel,Ri=e.unstable_ImmediatePriority,Ko=e.unstable_UserBlockingPriority,js=e.unstable_NormalPriority,Qo=e.unstable_LowPriority,Pi=e.unstable_IdlePriority,Fs=null,Zt=null;function kl(n){if(Zt&&typeof Zt.onCommitFiberRoot=="function")try{Zt.onCommitFiberRoot(Fs,n,void 0,(n.current.flags&128)===128)}catch{}}var en=Math.clz32?Math.clz32:Us,Fn=Math.log,dn=Math.LN2;function Us(n){return n>>>=0,n===0?32:31-(Fn(n)/dn|0)|0}var Un=64,Wr=4194304;function $e(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function dr(n,s){var a=n.pendingLanes;if(a===0)return 0;var c=0,d=n.suspendedLanes,f=n.pingedLanes,w=a&268435455;if(w!==0){var C=w&~d;C!==0?c=$e(C):(f&=w,f!==0&&(c=$e(f)))}else w=a&~d,w!==0?c=$e(w):f!==0&&(c=$e(f));if(c===0)return 0;if(s!==0&&s!==c&&(s&d)===0&&(d=c&-c,f=s&-s,d>=f||d===16&&(f&4194240)!==0))return s;if((c&4)!==0&&(c|=a&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=c;0<s;)a=31-en(s),d=1<<a,c|=n[a],s&=~d;return c}function zs(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bs(n,s){for(var a=n.suspendedLanes,c=n.pingedLanes,d=n.expirationTimes,f=n.pendingLanes;0<f;){var w=31-en(f),C=1<<w,D=d[w];D===-1?((C&a)===0||(C&c)!==0)&&(d[w]=zs(C,s)):D<=s&&(n.expiredLanes|=C),f&=~C}}function Yo(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Jo(){var n=Un;return Un<<=1,(Un&4194240)===0&&(Un=64),n}function Xo(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function $s(n,s,a){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-en(s),n[s]=a}function Uc(n,s){var a=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var d=31-en(a),f=1<<d;s[d]=0,c[d]=-1,n[d]=-1,a&=~f}}function Zo(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var c=31-en(a),d=1<<c;d&s|n[c]&s&&(n[c]|=s),a&=~d}}var Me=0;function zn(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var ea,bi,ta,na,ra,Bn=!1,Di=[],$n=null,qn=null,At=null,qs=new Map,fr=new Map,tn=[],Cl="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Gr(n,s){switch(n){case"focusin":case"focusout":$n=null;break;case"dragenter":case"dragleave":qn=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":qs.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":fr.delete(s.pointerId)}}function An(n,s,a,c,d,f){return n===null||n.nativeEvent!==f?(n={blockedOn:s,domEventName:a,eventSystemFlags:c,nativeEvent:f,targetContainers:[d]},s!==null&&(s=ya(s),s!==null&&bi(s)),n):(n.eventSystemFlags|=c,s=n.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),n)}function Nl(n,s,a,c,d){switch(s){case"focusin":return $n=An($n,n,s,a,c,d),!0;case"dragenter":return qn=An(qn,n,s,a,c,d),!0;case"mouseover":return At=An(At,n,s,a,c,d),!0;case"pointerover":var f=d.pointerId;return qs.set(f,An(qs.get(f)||null,n,s,a,c,d)),!0;case"gotpointercapture":return f=d.pointerId,fr.set(f,An(fr.get(f)||null,n,s,a,c,d)),!0}return!1}function Vi(n){var s=Ks(n.target);if(s!==null){var a=Sn(s);if(a!==null){if(s=a.tag,s===13){if(s=Wo(a),s!==null){n.blockedOn=s,ra(n.priority,function(){ta(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ke(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=Li(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);zr=c,a.target.dispatchEvent(c),zr=null}else return s=ya(a),s!==null&&bi(s),n.blockedOn=a,!1;s.shift()}return!0}function Rl(n,s,a){Ke(n)&&a.delete(s)}function zc(){Bn=!1,$n!==null&&Ke($n)&&($n=null),qn!==null&&Ke(qn)&&(qn=null),At!==null&&Ke(At)&&(At=null),qs.forEach(Rl),fr.forEach(Rl)}function Kr(n,s){n.blockedOn===s&&(n.blockedOn=null,Bn||(Bn=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,zc)))}function Qr(n){function s(d){return Kr(d,n)}if(0<Di.length){Kr(Di[0],n);for(var a=1;a<Di.length;a++){var c=Di[a];c.blockedOn===n&&(c.blockedOn=null)}}for($n!==null&&Kr($n,n),qn!==null&&Kr(qn,n),At!==null&&Kr(At,n),qs.forEach(s),fr.forEach(s),a=0;a<tn.length;a++)c=tn[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<tn.length&&(a=tn[0],a.blockedOn===null);)Vi(a),a.blockedOn===null&&tn.shift()}var pr=we.ReactCurrentBatchConfig,mr=!0;function Hn(n,s,a,c){var d=Me,f=pr.transition;pr.transition=null;try{Me=1,sa(n,s,a,c)}finally{Me=d,pr.transition=f}}function Pl(n,s,a,c){var d=Me,f=pr.transition;pr.transition=null;try{Me=4,sa(n,s,a,c)}finally{Me=d,pr.transition=f}}function sa(n,s,a,c){if(mr){var d=Li(n,s,a,c);if(d===null)Xc(n,s,c,Wn,a),Gr(n,c);else if(Nl(d,n,s,a,c))c.stopPropagation();else if(Gr(n,c),s&4&&-1<Cl.indexOf(n)){for(;d!==null;){var f=ya(d);if(f!==null&&ea(f),f=Li(n,s,a,c),f===null&&Xc(n,s,c,Wn,a),f===d)break;d=f}d!==null&&c.stopPropagation()}else Xc(n,s,c,null,a)}}var Wn=null;function Li(n,s,a,c){if(Wn=null,n=ki(c),n=Ks(n),n!==null)if(s=Sn(n),s===null)n=null;else if(a=s.tag,a===13){if(n=Wo(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return Wn=n,null}function Oi(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Fc()){case Ri:return 1;case Ko:return 4;case js:case Qo:return 16;case Pi:return 536870912;default:return 16}default:return 16}}var nn=null,Mi=null,gr=null;function bl(){if(gr)return gr;var n,s=Mi,a=s.length,c,d="value"in nn?nn.value:nn.textContent,f=d.length;for(n=0;n<a&&s[n]===d[n];n++);var w=a-n;for(c=1;c<=w&&s[a-c]===d[f-c];c++);return gr=d.slice(n,1<c?1-c:void 0)}function Hs(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Gn(){return!0}function ia(){return!1}function Dt(n){function s(a,c,d,f,w){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=f,this.target=w,this.currentTarget=null;for(var C in n)n.hasOwnProperty(C)&&(a=n[C],this[C]=a?a(f):f[C]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Gn:ia,this.isPropagationStopped=ia,this}return oe(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Gn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Gn)},persist:function(){},isPersistent:Gn}),s}var Kn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ws=Dt(Kn),Yr=oe({},Kn,{view:0,detail:0}),ji=Dt(Yr),Fi,Ui,rn,Gs=oe({},Yr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Te,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==rn&&(rn&&n.type==="mousemove"?(Fi=n.screenX-rn.screenX,Ui=n.screenY-rn.screenY):Ui=Fi=0,rn=n),Fi)},movementY:function(n){return"movementY"in n?n.movementY:Ui}}),oa=Dt(Gs),Dl=oe({},Gs,{dataTransfer:0}),Vl=Dt(Dl),zi=oe({},Yr,{relatedTarget:0}),kt=Dt(zi),Ll=oe({},Kn,{animationName:0,elapsedTime:0,pseudoElement:0}),Ol=Dt(Ll),Jr=oe({},Kn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),u=Dt(Jr),p=oe({},Kn,{data:0}),_=Dt(p),x={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},M={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},z={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function X(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=z[n])?!!s[n]:!1}function Te(){return X}var lt=oe({},Yr,{key:function(n){if(n.key){var s=x[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Hs(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?M[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Te,charCode:function(n){return n.type==="keypress"?Hs(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Hs(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),We=Dt(lt),ft=oe({},Gs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sn=Dt(ft),yr=oe({},Yr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Te}),Qn=Dt(yr),Yn=oe({},Kn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Bi=Dt(Yn),aa=oe({},Gs,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),$v=Dt(aa),qv=[9,13,27,32],Bc=m&&"CompositionEvent"in window,la=null;m&&"documentMode"in document&&(la=document.documentMode);var Hv=m&&"TextEvent"in window&&!la,sp=m&&(!Bc||la&&8<la&&11>=la),ip=" ",op=!1;function ap(n,s){switch(n){case"keyup":return qv.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lp(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var $i=!1;function Wv(n,s){switch(n){case"compositionend":return lp(s);case"keypress":return s.which!==32?null:(op=!0,ip);case"textInput":return n=s.data,n===ip&&op?null:n;default:return null}}function Gv(n,s){if($i)return n==="compositionend"||!Bc&&ap(n,s)?(n=bl(),gr=Mi=nn=null,$i=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return sp&&s.locale!=="ko"?null:s.data;default:return null}}var Kv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function up(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!Kv[n.type]:s==="textarea"}function cp(n,s,a,c){Br(c),s=zl(s,"onChange"),0<s.length&&(a=new Ws("onChange","change",null,a,c),n.push({event:a,listeners:s}))}var ua=null,ca=null;function Qv(n){Cp(n,0)}function Ml(n){var s=Ki(n);if(jo(s))return n}function Yv(n,s){if(n==="change")return s}var hp=!1;if(m){var $c;if(m){var qc="oninput"in document;if(!qc){var dp=document.createElement("div");dp.setAttribute("oninput","return;"),qc=typeof dp.oninput=="function"}$c=qc}else $c=!1;hp=$c&&(!document.documentMode||9<document.documentMode)}function fp(){ua&&(ua.detachEvent("onpropertychange",pp),ca=ua=null)}function pp(n){if(n.propertyName==="value"&&Ml(ca)){var s=[];cp(s,ca,n,ki(n)),wl(Qv,s)}}function Jv(n,s,a){n==="focusin"?(fp(),ua=s,ca=a,ua.attachEvent("onpropertychange",pp)):n==="focusout"&&fp()}function Xv(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Ml(ca)}function Zv(n,s){if(n==="click")return Ml(s)}function ew(n,s){if(n==="input"||n==="change")return Ml(s)}function tw(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var kn=typeof Object.is=="function"?Object.is:tw;function ha(n,s){if(kn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),c=Object.keys(s);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!y.call(s,d)||!kn(n[d],s[d]))return!1}return!0}function mp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function gp(n,s){var a=mp(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=s&&c>=s)return{node:a,offset:s-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=mp(a)}}function yp(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?yp(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function _p(){for(var n=window,s=Or();s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=Or(n.document)}return s}function Hc(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function nw(n){var s=_p(),a=n.focusedElem,c=n.selectionRange;if(s!==a&&a&&a.ownerDocument&&yp(a.ownerDocument.documentElement,a)){if(c!==null&&Hc(a)){if(s=c.start,n=c.end,n===void 0&&(n=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(n,a.value.length);else if(n=(s=a.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var d=a.textContent.length,f=Math.min(c.start,d);c=c.end===void 0?f:Math.min(c.end,d),!n.extend&&f>c&&(d=c,c=f,f=d),d=gp(a,f);var w=gp(a,c);d&&w&&(n.rangeCount!==1||n.anchorNode!==d.node||n.anchorOffset!==d.offset||n.focusNode!==w.node||n.focusOffset!==w.offset)&&(s=s.createRange(),s.setStart(d.node,d.offset),n.removeAllRanges(),f>c?(n.addRange(s),n.extend(w.node,w.offset)):(s.setEnd(w.node,w.offset),n.addRange(s)))}}for(s=[],n=a;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)n=s[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var rw=m&&"documentMode"in document&&11>=document.documentMode,qi=null,Wc=null,da=null,Gc=!1;function vp(n,s,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Gc||qi==null||qi!==Or(c)||(c=qi,"selectionStart"in c&&Hc(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),da&&ha(da,c)||(da=c,c=zl(Wc,"onSelect"),0<c.length&&(s=new Ws("onSelect","select",null,s,a),n.push({event:s,listeners:c}),s.target=qi)))}function jl(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var Hi={animationend:jl("Animation","AnimationEnd"),animationiteration:jl("Animation","AnimationIteration"),animationstart:jl("Animation","AnimationStart"),transitionend:jl("Transition","TransitionEnd")},Kc={},wp={};m&&(wp=document.createElement("div").style,"AnimationEvent"in window||(delete Hi.animationend.animation,delete Hi.animationiteration.animation,delete Hi.animationstart.animation),"TransitionEvent"in window||delete Hi.transitionend.transition);function Fl(n){if(Kc[n])return Kc[n];if(!Hi[n])return n;var s=Hi[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in wp)return Kc[n]=s[a];return n}var Ep=Fl("animationend"),xp=Fl("animationiteration"),Tp=Fl("animationstart"),Ip=Fl("transitionend"),Sp=new Map,Ap="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xr(n,s){Sp.set(n,s),l(s,[n])}for(var Qc=0;Qc<Ap.length;Qc++){var Yc=Ap[Qc],sw=Yc.toLowerCase(),iw=Yc[0].toUpperCase()+Yc.slice(1);Xr(sw,"on"+iw)}Xr(Ep,"onAnimationEnd"),Xr(xp,"onAnimationIteration"),Xr(Tp,"onAnimationStart"),Xr("dblclick","onDoubleClick"),Xr("focusin","onFocus"),Xr("focusout","onBlur"),Xr(Ip,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ow=new Set("cancel close invalid load scroll toggle".split(" ").concat(fa));function kp(n,s,a){var c=n.type||"unknown-event";n.currentTarget=a,Ho(c,s,void 0,n),n.currentTarget=null}function Cp(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],d=c.event;c=c.listeners;e:{var f=void 0;if(s)for(var w=c.length-1;0<=w;w--){var C=c[w],D=C.instance,U=C.currentTarget;if(C=C.listener,D!==f&&d.isPropagationStopped())break e;kp(d,C,U),f=D}else for(w=0;w<c.length;w++){if(C=c[w],D=C.instance,U=C.currentTarget,C=C.listener,D!==f&&d.isPropagationStopped())break e;kp(d,C,U),f=D}}}if(Ci)throw n=hn,Ci=!1,hn=null,n}function Xe(n,s){var a=s[sh];a===void 0&&(a=s[sh]=new Set);var c=n+"__bubble";a.has(c)||(Np(s,n,2,!1),a.add(c))}function Jc(n,s,a){var c=0;s&&(c|=4),Np(a,n,c,s)}var Ul="_reactListening"+Math.random().toString(36).slice(2);function pa(n){if(!n[Ul]){n[Ul]=!0,i.forEach(function(a){a!=="selectionchange"&&(ow.has(a)||Jc(a,!1,n),Jc(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Ul]||(s[Ul]=!0,Jc("selectionchange",!1,s))}}function Np(n,s,a,c){switch(Oi(s)){case 1:var d=Hn;break;case 4:d=Pl;break;default:d=sa}a=d.bind(null,s,a,n),d=void 0,!qr||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),c?d!==void 0?n.addEventListener(s,a,{capture:!0,passive:d}):n.addEventListener(s,a,!0):d!==void 0?n.addEventListener(s,a,{passive:d}):n.addEventListener(s,a,!1)}function Xc(n,s,a,c,d){var f=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var C=c.stateNode.containerInfo;if(C===d||C.nodeType===8&&C.parentNode===d)break;if(w===4)for(w=c.return;w!==null;){var D=w.tag;if((D===3||D===4)&&(D=w.stateNode.containerInfo,D===d||D.nodeType===8&&D.parentNode===d))return;w=w.return}for(;C!==null;){if(w=Ks(C),w===null)return;if(D=w.tag,D===5||D===6){c=f=w;continue e}C=C.parentNode}}c=c.return}wl(function(){var U=f,Q=ki(a),Y=[];e:{var K=Sp.get(n);if(K!==void 0){var se=Ws,le=n;switch(n){case"keypress":if(Hs(a)===0)break e;case"keydown":case"keyup":se=We;break;case"focusin":le="focus",se=kt;break;case"focusout":le="blur",se=kt;break;case"beforeblur":case"afterblur":se=kt;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=oa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=Vl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=Qn;break;case Ep:case xp:case Tp:se=Ol;break;case Ip:se=Bi;break;case"scroll":se=ji;break;case"wheel":se=$v;break;case"copy":case"cut":case"paste":se=u;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=sn}var ue=(s&4)!==0,ut=!ue&&n==="scroll",O=ue?K!==null?K+"Capture":null:K;ue=[];for(var V=U,j;V!==null;){j=V;var J=j.stateNode;if(j.tag===5&&J!==null&&(j=J,O!==null&&(J=Ls(V,O),J!=null&&ue.push(ma(V,J,j)))),ut)break;V=V.return}0<ue.length&&(K=new se(K,le,null,a,Q),Y.push({event:K,listeners:ue}))}}if((s&7)===0){e:{if(K=n==="mouseover"||n==="pointerover",se=n==="mouseout"||n==="pointerout",K&&a!==zr&&(le=a.relatedTarget||a.fromElement)&&(Ks(le)||le[_r]))break e;if((se||K)&&(K=Q.window===Q?Q:(K=Q.ownerDocument)?K.defaultView||K.parentWindow:window,se?(le=a.relatedTarget||a.toElement,se=U,le=le?Ks(le):null,le!==null&&(ut=Sn(le),le!==ut||le.tag!==5&&le.tag!==6)&&(le=null)):(se=null,le=U),se!==le)){if(ue=oa,J="onMouseLeave",O="onMouseEnter",V="mouse",(n==="pointerout"||n==="pointerover")&&(ue=sn,J="onPointerLeave",O="onPointerEnter",V="pointer"),ut=se==null?K:Ki(se),j=le==null?K:Ki(le),K=new ue(J,V+"leave",se,a,Q),K.target=ut,K.relatedTarget=j,J=null,Ks(Q)===U&&(ue=new ue(O,V+"enter",le,a,Q),ue.target=j,ue.relatedTarget=ut,J=ue),ut=J,se&&le)t:{for(ue=se,O=le,V=0,j=ue;j;j=Wi(j))V++;for(j=0,J=O;J;J=Wi(J))j++;for(;0<V-j;)ue=Wi(ue),V--;for(;0<j-V;)O=Wi(O),j--;for(;V--;){if(ue===O||O!==null&&ue===O.alternate)break t;ue=Wi(ue),O=Wi(O)}ue=null}else ue=null;se!==null&&Rp(Y,K,se,ue,!1),le!==null&&ut!==null&&Rp(Y,ut,le,ue,!0)}}e:{if(K=U?Ki(U):window,se=K.nodeName&&K.nodeName.toLowerCase(),se==="select"||se==="input"&&K.type==="file")var he=Yv;else if(up(K))if(hp)he=ew;else{he=Xv;var me=Jv}else(se=K.nodeName)&&se.toLowerCase()==="input"&&(K.type==="checkbox"||K.type==="radio")&&(he=Zv);if(he&&(he=he(n,U))){cp(Y,he,a,Q);break e}me&&me(n,K,U),n==="focusout"&&(me=K._wrapperState)&&me.controlled&&K.type==="number"&&dt(K,"number",K.value)}switch(me=U?Ki(U):window,n){case"focusin":(up(me)||me.contentEditable==="true")&&(qi=me,Wc=U,da=null);break;case"focusout":da=Wc=qi=null;break;case"mousedown":Gc=!0;break;case"contextmenu":case"mouseup":case"dragend":Gc=!1,vp(Y,a,Q);break;case"selectionchange":if(rw)break;case"keydown":case"keyup":vp(Y,a,Q)}var ge;if(Bc)e:{switch(n){case"compositionstart":var Ee="onCompositionStart";break e;case"compositionend":Ee="onCompositionEnd";break e;case"compositionupdate":Ee="onCompositionUpdate";break e}Ee=void 0}else $i?ap(n,a)&&(Ee="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Ee="onCompositionStart");Ee&&(sp&&a.locale!=="ko"&&($i||Ee!=="onCompositionStart"?Ee==="onCompositionEnd"&&$i&&(ge=bl()):(nn=Q,Mi="value"in nn?nn.value:nn.textContent,$i=!0)),me=zl(U,Ee),0<me.length&&(Ee=new _(Ee,n,null,a,Q),Y.push({event:Ee,listeners:me}),ge?Ee.data=ge:(ge=lp(a),ge!==null&&(Ee.data=ge)))),(ge=Hv?Wv(n,a):Gv(n,a))&&(U=zl(U,"onBeforeInput"),0<U.length&&(Q=new _("onBeforeInput","beforeinput",null,a,Q),Y.push({event:Q,listeners:U}),Q.data=ge))}Cp(Y,s)})}function ma(n,s,a){return{instance:n,listener:s,currentTarget:a}}function zl(n,s){for(var a=s+"Capture",c=[];n!==null;){var d=n,f=d.stateNode;d.tag===5&&f!==null&&(d=f,f=Ls(n,a),f!=null&&c.unshift(ma(n,f,d)),f=Ls(n,s),f!=null&&c.push(ma(n,f,d))),n=n.return}return c}function Wi(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Rp(n,s,a,c,d){for(var f=s._reactName,w=[];a!==null&&a!==c;){var C=a,D=C.alternate,U=C.stateNode;if(D!==null&&D===c)break;C.tag===5&&U!==null&&(C=U,d?(D=Ls(a,f),D!=null&&w.unshift(ma(a,D,C))):d||(D=Ls(a,f),D!=null&&w.push(ma(a,D,C)))),a=a.return}w.length!==0&&n.push({event:s,listeners:w})}var aw=/\r\n?/g,lw=/\u0000|\uFFFD/g;function Pp(n){return(typeof n=="string"?n:""+n).replace(aw,`
`).replace(lw,"")}function Bl(n,s,a){if(s=Pp(s),Pp(n)!==s&&a)throw Error(t(425))}function $l(){}var Zc=null,eh=null;function th(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var nh=typeof setTimeout=="function"?setTimeout:void 0,uw=typeof clearTimeout=="function"?clearTimeout:void 0,bp=typeof Promise=="function"?Promise:void 0,cw=typeof queueMicrotask=="function"?queueMicrotask:typeof bp<"u"?function(n){return bp.resolve(null).then(n).catch(hw)}:nh;function hw(n){setTimeout(function(){throw n})}function rh(n,s){var a=s,c=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(c===0){n.removeChild(d),Qr(s);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=d}while(a);Qr(s)}function Zr(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function Dp(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return n;s--}else a==="/$"&&s++}n=n.previousSibling}return null}var Gi=Math.random().toString(36).slice(2),Jn="__reactFiber$"+Gi,ga="__reactProps$"+Gi,_r="__reactContainer$"+Gi,sh="__reactEvents$"+Gi,dw="__reactListeners$"+Gi,fw="__reactHandles$"+Gi;function Ks(n){var s=n[Jn];if(s)return s;for(var a=n.parentNode;a;){if(s=a[_r]||a[Jn]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=Dp(n);n!==null;){if(a=n[Jn])return a;n=Dp(n)}return s}n=a,a=n.parentNode}return null}function ya(n){return n=n[Jn]||n[_r],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Ki(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function ql(n){return n[ga]||null}var ih=[],Qi=-1;function es(n){return{current:n}}function Ze(n){0>Qi||(n.current=ih[Qi],ih[Qi]=null,Qi--)}function Qe(n,s){Qi++,ih[Qi]=n.current,n.current=s}var ts={},Vt=es(ts),Ht=es(!1),Qs=ts;function Yi(n,s){var a=n.type.contextTypes;if(!a)return ts;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===s)return c.__reactInternalMemoizedMaskedChildContext;var d={},f;for(f in a)d[f]=s[f];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=d),d}function Wt(n){return n=n.childContextTypes,n!=null}function Hl(){Ze(Ht),Ze(Vt)}function Vp(n,s,a){if(Vt.current!==ts)throw Error(t(168));Qe(Vt,s),Qe(Ht,a)}function Lp(n,s,a){var c=n.stateNode;if(s=s.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var d in c)if(!(d in s))throw Error(t(108,qe(n)||"Unknown",d));return oe({},a,c)}function Wl(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||ts,Qs=Vt.current,Qe(Vt,n),Qe(Ht,Ht.current),!0}function Op(n,s,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=Lp(n,s,Qs),c.__reactInternalMemoizedMergedChildContext=n,Ze(Ht),Ze(Vt),Qe(Vt,n)):Ze(Ht),Qe(Ht,a)}var vr=null,Gl=!1,oh=!1;function Mp(n){vr===null?vr=[n]:vr.push(n)}function pw(n){Gl=!0,Mp(n)}function ns(){if(!oh&&vr!==null){oh=!0;var n=0,s=Me;try{var a=vr;for(Me=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}vr=null,Gl=!1}catch(d){throw vr!==null&&(vr=vr.slice(n+1)),Go(Ri,ns),d}finally{Me=s,oh=!1}}return null}var Ji=[],Xi=0,Kl=null,Ql=0,fn=[],pn=0,Ys=null,wr=1,Er="";function Js(n,s){Ji[Xi++]=Ql,Ji[Xi++]=Kl,Kl=n,Ql=s}function jp(n,s,a){fn[pn++]=wr,fn[pn++]=Er,fn[pn++]=Ys,Ys=n;var c=wr;n=Er;var d=32-en(c)-1;c&=~(1<<d),a+=1;var f=32-en(s)+d;if(30<f){var w=d-d%5;f=(c&(1<<w)-1).toString(32),c>>=w,d-=w,wr=1<<32-en(s)+d|a<<d|c,Er=f+n}else wr=1<<f|a<<d|c,Er=n}function ah(n){n.return!==null&&(Js(n,1),jp(n,1,0))}function lh(n){for(;n===Kl;)Kl=Ji[--Xi],Ji[Xi]=null,Ql=Ji[--Xi],Ji[Xi]=null;for(;n===Ys;)Ys=fn[--pn],fn[pn]=null,Er=fn[--pn],fn[pn]=null,wr=fn[--pn],fn[pn]=null}var on=null,an=null,tt=!1,Cn=null;function Fp(n,s){var a=_n(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=n,s=n.deletions,s===null?(n.deletions=[a],n.flags|=16):s.push(a)}function Up(n,s){switch(n.tag){case 5:var a=n.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,on=n,an=Zr(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,on=n,an=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=Ys!==null?{id:wr,overflow:Er}:null,n.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=_n(18,null,null,0),a.stateNode=s,a.return=n,n.child=a,on=n,an=null,!0):!1;default:return!1}}function uh(n){return(n.mode&1)!==0&&(n.flags&128)===0}function ch(n){if(tt){var s=an;if(s){var a=s;if(!Up(n,s)){if(uh(n))throw Error(t(418));s=Zr(a.nextSibling);var c=on;s&&Up(n,s)?Fp(c,a):(n.flags=n.flags&-4097|2,tt=!1,on=n)}}else{if(uh(n))throw Error(t(418));n.flags=n.flags&-4097|2,tt=!1,on=n}}}function zp(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;on=n}function Yl(n){if(n!==on)return!1;if(!tt)return zp(n),tt=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!th(n.type,n.memoizedProps)),s&&(s=an)){if(uh(n))throw Bp(),Error(t(418));for(;s;)Fp(n,s),s=Zr(s.nextSibling)}if(zp(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(s===0){an=Zr(n.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}n=n.nextSibling}an=null}}else an=on?Zr(n.stateNode.nextSibling):null;return!0}function Bp(){for(var n=an;n;)n=Zr(n.nextSibling)}function Zi(){an=on=null,tt=!1}function hh(n){Cn===null?Cn=[n]:Cn.push(n)}var mw=we.ReactCurrentBatchConfig;function _a(n,s,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var d=c,f=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===f?s.ref:(s=function(w){var C=d.refs;w===null?delete C[f]:C[f]=w},s._stringRef=f,s)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function Jl(n,s){throw n=Object.prototype.toString.call(s),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function $p(n){var s=n._init;return s(n._payload)}function qp(n){function s(O,V){if(n){var j=O.deletions;j===null?(O.deletions=[V],O.flags|=16):j.push(V)}}function a(O,V){if(!n)return null;for(;V!==null;)s(O,V),V=V.sibling;return null}function c(O,V){for(O=new Map;V!==null;)V.key!==null?O.set(V.key,V):O.set(V.index,V),V=V.sibling;return O}function d(O,V){return O=cs(O,V),O.index=0,O.sibling=null,O}function f(O,V,j){return O.index=j,n?(j=O.alternate,j!==null?(j=j.index,j<V?(O.flags|=2,V):j):(O.flags|=2,V)):(O.flags|=1048576,V)}function w(O){return n&&O.alternate===null&&(O.flags|=2),O}function C(O,V,j,J){return V===null||V.tag!==6?(V=nd(j,O.mode,J),V.return=O,V):(V=d(V,j),V.return=O,V)}function D(O,V,j,J){var he=j.type;return he===N?Q(O,V,j.props.children,J,j.key):V!==null&&(V.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===Ne&&$p(he)===V.type)?(J=d(V,j.props),J.ref=_a(O,V,j),J.return=O,J):(J=Eu(j.type,j.key,j.props,null,O.mode,J),J.ref=_a(O,V,j),J.return=O,J)}function U(O,V,j,J){return V===null||V.tag!==4||V.stateNode.containerInfo!==j.containerInfo||V.stateNode.implementation!==j.implementation?(V=rd(j,O.mode,J),V.return=O,V):(V=d(V,j.children||[]),V.return=O,V)}function Q(O,V,j,J,he){return V===null||V.tag!==7?(V=ii(j,O.mode,J,he),V.return=O,V):(V=d(V,j),V.return=O,V)}function Y(O,V,j){if(typeof V=="string"&&V!==""||typeof V=="number")return V=nd(""+V,O.mode,j),V.return=O,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case Se:return j=Eu(V.type,V.key,V.props,null,O.mode,j),j.ref=_a(O,null,V),j.return=O,j;case ye:return V=rd(V,O.mode,j),V.return=O,V;case Ne:var J=V._init;return Y(O,J(V._payload),j)}if(at(V)||pe(V))return V=ii(V,O.mode,j,null),V.return=O,V;Jl(O,V)}return null}function K(O,V,j,J){var he=V!==null?V.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return he!==null?null:C(O,V,""+j,J);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Se:return j.key===he?D(O,V,j,J):null;case ye:return j.key===he?U(O,V,j,J):null;case Ne:return he=j._init,K(O,V,he(j._payload),J)}if(at(j)||pe(j))return he!==null?null:Q(O,V,j,J,null);Jl(O,j)}return null}function se(O,V,j,J,he){if(typeof J=="string"&&J!==""||typeof J=="number")return O=O.get(j)||null,C(V,O,""+J,he);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case Se:return O=O.get(J.key===null?j:J.key)||null,D(V,O,J,he);case ye:return O=O.get(J.key===null?j:J.key)||null,U(V,O,J,he);case Ne:var me=J._init;return se(O,V,j,me(J._payload),he)}if(at(J)||pe(J))return O=O.get(j)||null,Q(V,O,J,he,null);Jl(V,J)}return null}function le(O,V,j,J){for(var he=null,me=null,ge=V,Ee=V=0,It=null;ge!==null&&Ee<j.length;Ee++){ge.index>Ee?(It=ge,ge=null):It=ge.sibling;var Be=K(O,ge,j[Ee],J);if(Be===null){ge===null&&(ge=It);break}n&&ge&&Be.alternate===null&&s(O,ge),V=f(Be,V,Ee),me===null?he=Be:me.sibling=Be,me=Be,ge=It}if(Ee===j.length)return a(O,ge),tt&&Js(O,Ee),he;if(ge===null){for(;Ee<j.length;Ee++)ge=Y(O,j[Ee],J),ge!==null&&(V=f(ge,V,Ee),me===null?he=ge:me.sibling=ge,me=ge);return tt&&Js(O,Ee),he}for(ge=c(O,ge);Ee<j.length;Ee++)It=se(ge,O,Ee,j[Ee],J),It!==null&&(n&&It.alternate!==null&&ge.delete(It.key===null?Ee:It.key),V=f(It,V,Ee),me===null?he=It:me.sibling=It,me=It);return n&&ge.forEach(function(hs){return s(O,hs)}),tt&&Js(O,Ee),he}function ue(O,V,j,J){var he=pe(j);if(typeof he!="function")throw Error(t(150));if(j=he.call(j),j==null)throw Error(t(151));for(var me=he=null,ge=V,Ee=V=0,It=null,Be=j.next();ge!==null&&!Be.done;Ee++,Be=j.next()){ge.index>Ee?(It=ge,ge=null):It=ge.sibling;var hs=K(O,ge,Be.value,J);if(hs===null){ge===null&&(ge=It);break}n&&ge&&hs.alternate===null&&s(O,ge),V=f(hs,V,Ee),me===null?he=hs:me.sibling=hs,me=hs,ge=It}if(Be.done)return a(O,ge),tt&&Js(O,Ee),he;if(ge===null){for(;!Be.done;Ee++,Be=j.next())Be=Y(O,Be.value,J),Be!==null&&(V=f(Be,V,Ee),me===null?he=Be:me.sibling=Be,me=Be);return tt&&Js(O,Ee),he}for(ge=c(O,ge);!Be.done;Ee++,Be=j.next())Be=se(ge,O,Ee,Be.value,J),Be!==null&&(n&&Be.alternate!==null&&ge.delete(Be.key===null?Ee:Be.key),V=f(Be,V,Ee),me===null?he=Be:me.sibling=Be,me=Be);return n&&ge.forEach(function(Kw){return s(O,Kw)}),tt&&Js(O,Ee),he}function ut(O,V,j,J){if(typeof j=="object"&&j!==null&&j.type===N&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case Se:e:{for(var he=j.key,me=V;me!==null;){if(me.key===he){if(he=j.type,he===N){if(me.tag===7){a(O,me.sibling),V=d(me,j.props.children),V.return=O,O=V;break e}}else if(me.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===Ne&&$p(he)===me.type){a(O,me.sibling),V=d(me,j.props),V.ref=_a(O,me,j),V.return=O,O=V;break e}a(O,me);break}else s(O,me);me=me.sibling}j.type===N?(V=ii(j.props.children,O.mode,J,j.key),V.return=O,O=V):(J=Eu(j.type,j.key,j.props,null,O.mode,J),J.ref=_a(O,V,j),J.return=O,O=J)}return w(O);case ye:e:{for(me=j.key;V!==null;){if(V.key===me)if(V.tag===4&&V.stateNode.containerInfo===j.containerInfo&&V.stateNode.implementation===j.implementation){a(O,V.sibling),V=d(V,j.children||[]),V.return=O,O=V;break e}else{a(O,V);break}else s(O,V);V=V.sibling}V=rd(j,O.mode,J),V.return=O,O=V}return w(O);case Ne:return me=j._init,ut(O,V,me(j._payload),J)}if(at(j))return le(O,V,j,J);if(pe(j))return ue(O,V,j,J);Jl(O,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,V!==null&&V.tag===6?(a(O,V.sibling),V=d(V,j),V.return=O,O=V):(a(O,V),V=nd(j,O.mode,J),V.return=O,O=V),w(O)):a(O,V)}return ut}var eo=qp(!0),Hp=qp(!1),Xl=es(null),Zl=null,to=null,dh=null;function fh(){dh=to=Zl=null}function ph(n){var s=Xl.current;Ze(Xl),n._currentValue=s}function mh(n,s,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),n===a)break;n=n.return}}function no(n,s){Zl=n,dh=to=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&s)!==0&&(Gt=!0),n.firstContext=null)}function mn(n){var s=n._currentValue;if(dh!==n)if(n={context:n,memoizedValue:s,next:null},to===null){if(Zl===null)throw Error(t(308));to=n,Zl.dependencies={lanes:0,firstContext:n}}else to=to.next=n;return s}var Xs=null;function gh(n){Xs===null?Xs=[n]:Xs.push(n)}function Wp(n,s,a,c){var d=s.interleaved;return d===null?(a.next=a,gh(s)):(a.next=d.next,d.next=a),s.interleaved=a,xr(n,c)}function xr(n,s){n.lanes|=s;var a=n.alternate;for(a!==null&&(a.lanes|=s),a=n,n=n.return;n!==null;)n.childLanes|=s,a=n.alternate,a!==null&&(a.childLanes|=s),a=n,n=n.return;return a.tag===3?a.stateNode:null}var rs=!1;function yh(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Gp(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Tr(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function ss(n,s,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(Ue&2)!==0){var d=c.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),c.pending=s,xr(n,a)}return d=c.interleaved,d===null?(s.next=s,gh(c)):(s.next=d.next,d.next=s),c.interleaved=s,xr(n,a)}function eu(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,Zo(n,a)}}function Kp(n,s){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};f===null?d=f=w:f=f.next=w,a=a.next}while(a!==null);f===null?d=f=s:f=f.next=s}else d=f=s;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}function tu(n,s,a,c){var d=n.updateQueue;rs=!1;var f=d.firstBaseUpdate,w=d.lastBaseUpdate,C=d.shared.pending;if(C!==null){d.shared.pending=null;var D=C,U=D.next;D.next=null,w===null?f=U:w.next=U,w=D;var Q=n.alternate;Q!==null&&(Q=Q.updateQueue,C=Q.lastBaseUpdate,C!==w&&(C===null?Q.firstBaseUpdate=U:C.next=U,Q.lastBaseUpdate=D))}if(f!==null){var Y=d.baseState;w=0,Q=U=D=null,C=f;do{var K=C.lane,se=C.eventTime;if((c&K)===K){Q!==null&&(Q=Q.next={eventTime:se,lane:0,tag:C.tag,payload:C.payload,callback:C.callback,next:null});e:{var le=n,ue=C;switch(K=s,se=a,ue.tag){case 1:if(le=ue.payload,typeof le=="function"){Y=le.call(se,Y,K);break e}Y=le;break e;case 3:le.flags=le.flags&-65537|128;case 0:if(le=ue.payload,K=typeof le=="function"?le.call(se,Y,K):le,K==null)break e;Y=oe({},Y,K);break e;case 2:rs=!0}}C.callback!==null&&C.lane!==0&&(n.flags|=64,K=d.effects,K===null?d.effects=[C]:K.push(C))}else se={eventTime:se,lane:K,tag:C.tag,payload:C.payload,callback:C.callback,next:null},Q===null?(U=Q=se,D=Y):Q=Q.next=se,w|=K;if(C=C.next,C===null){if(C=d.shared.pending,C===null)break;K=C,C=K.next,K.next=null,d.lastBaseUpdate=K,d.shared.pending=null}}while(!0);if(Q===null&&(D=Y),d.baseState=D,d.firstBaseUpdate=U,d.lastBaseUpdate=Q,s=d.shared.interleaved,s!==null){d=s;do w|=d.lane,d=d.next;while(d!==s)}else f===null&&(d.shared.lanes=0);ti|=w,n.lanes=w,n.memoizedState=Y}}function Qp(n,s,a){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var c=n[s],d=c.callback;if(d!==null){if(c.callback=null,c=a,typeof d!="function")throw Error(t(191,d));d.call(c)}}}var va={},Xn=es(va),wa=es(va),Ea=es(va);function Zs(n){if(n===va)throw Error(t(174));return n}function _h(n,s){switch(Qe(Ea,s),Qe(wa,n),Qe(Xn,va),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Ii(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=Ii(s,n)}Ze(Xn),Qe(Xn,s)}function ro(){Ze(Xn),Ze(wa),Ze(Ea)}function Yp(n){Zs(Ea.current);var s=Zs(Xn.current),a=Ii(s,n.type);s!==a&&(Qe(wa,n),Qe(Xn,a))}function vh(n){wa.current===n&&(Ze(Xn),Ze(wa))}var nt=es(0);function nu(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var wh=[];function Eh(){for(var n=0;n<wh.length;n++)wh[n]._workInProgressVersionPrimary=null;wh.length=0}var ru=we.ReactCurrentDispatcher,xh=we.ReactCurrentBatchConfig,ei=0,rt=null,vt=null,xt=null,su=!1,xa=!1,Ta=0,gw=0;function Lt(){throw Error(t(321))}function Th(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!kn(n[a],s[a]))return!1;return!0}function Ih(n,s,a,c,d,f){if(ei=f,rt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,ru.current=n===null||n.memoizedState===null?ww:Ew,n=a(c,d),xa){f=0;do{if(xa=!1,Ta=0,25<=f)throw Error(t(301));f+=1,xt=vt=null,s.updateQueue=null,ru.current=xw,n=a(c,d)}while(xa)}if(ru.current=au,s=vt!==null&&vt.next!==null,ei=0,xt=vt=rt=null,su=!1,s)throw Error(t(300));return n}function Sh(){var n=Ta!==0;return Ta=0,n}function Zn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xt===null?rt.memoizedState=xt=n:xt=xt.next=n,xt}function gn(){if(vt===null){var n=rt.alternate;n=n!==null?n.memoizedState:null}else n=vt.next;var s=xt===null?rt.memoizedState:xt.next;if(s!==null)xt=s,vt=n;else{if(n===null)throw Error(t(310));vt=n,n={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},xt===null?rt.memoizedState=xt=n:xt=xt.next=n}return xt}function Ia(n,s){return typeof s=="function"?s(n):s}function Ah(n){var s=gn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=vt,d=c.baseQueue,f=a.pending;if(f!==null){if(d!==null){var w=d.next;d.next=f.next,f.next=w}c.baseQueue=d=f,a.pending=null}if(d!==null){f=d.next,c=c.baseState;var C=w=null,D=null,U=f;do{var Q=U.lane;if((ei&Q)===Q)D!==null&&(D=D.next={lane:0,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),c=U.hasEagerState?U.eagerState:n(c,U.action);else{var Y={lane:Q,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null};D===null?(C=D=Y,w=c):D=D.next=Y,rt.lanes|=Q,ti|=Q}U=U.next}while(U!==null&&U!==f);D===null?w=c:D.next=C,kn(c,s.memoizedState)||(Gt=!0),s.memoizedState=c,s.baseState=w,s.baseQueue=D,a.lastRenderedState=c}if(n=a.interleaved,n!==null){d=n;do f=d.lane,rt.lanes|=f,ti|=f,d=d.next;while(d!==n)}else d===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function kh(n){var s=gn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,d=a.pending,f=s.memoizedState;if(d!==null){a.pending=null;var w=d=d.next;do f=n(f,w.action),w=w.next;while(w!==d);kn(f,s.memoizedState)||(Gt=!0),s.memoizedState=f,s.baseQueue===null&&(s.baseState=f),a.lastRenderedState=f}return[f,c]}function Jp(){}function Xp(n,s){var a=rt,c=gn(),d=s(),f=!kn(c.memoizedState,d);if(f&&(c.memoizedState=d,Gt=!0),c=c.queue,Ch(tm.bind(null,a,c,n),[n]),c.getSnapshot!==s||f||xt!==null&&xt.memoizedState.tag&1){if(a.flags|=2048,Sa(9,em.bind(null,a,c,d,s),void 0,null),Tt===null)throw Error(t(349));(ei&30)!==0||Zp(a,s,d)}return d}function Zp(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=rt.updateQueue,s===null?(s={lastEffect:null,stores:null},rt.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function em(n,s,a,c){s.value=a,s.getSnapshot=c,nm(s)&&rm(n)}function tm(n,s,a){return a(function(){nm(s)&&rm(n)})}function nm(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!kn(n,a)}catch{return!0}}function rm(n){var s=xr(n,1);s!==null&&bn(s,n,1,-1)}function sm(n){var s=Zn();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ia,lastRenderedState:n},s.queue=n,n=n.dispatch=vw.bind(null,rt,n),[s.memoizedState,n]}function Sa(n,s,a,c){return n={tag:n,create:s,destroy:a,deps:c,next:null},s=rt.updateQueue,s===null?(s={lastEffect:null,stores:null},rt.updateQueue=s,s.lastEffect=n.next=n):(a=s.lastEffect,a===null?s.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,s.lastEffect=n)),n}function im(){return gn().memoizedState}function iu(n,s,a,c){var d=Zn();rt.flags|=n,d.memoizedState=Sa(1|s,a,void 0,c===void 0?null:c)}function ou(n,s,a,c){var d=gn();c=c===void 0?null:c;var f=void 0;if(vt!==null){var w=vt.memoizedState;if(f=w.destroy,c!==null&&Th(c,w.deps)){d.memoizedState=Sa(s,a,f,c);return}}rt.flags|=n,d.memoizedState=Sa(1|s,a,f,c)}function om(n,s){return iu(8390656,8,n,s)}function Ch(n,s){return ou(2048,8,n,s)}function am(n,s){return ou(4,2,n,s)}function lm(n,s){return ou(4,4,n,s)}function um(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function cm(n,s,a){return a=a!=null?a.concat([n]):null,ou(4,4,um.bind(null,s,n),a)}function Nh(){}function hm(n,s){var a=gn();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&Th(s,c[1])?c[0]:(a.memoizedState=[n,s],n)}function dm(n,s){var a=gn();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&Th(s,c[1])?c[0]:(n=n(),a.memoizedState=[n,s],n)}function fm(n,s,a){return(ei&21)===0?(n.baseState&&(n.baseState=!1,Gt=!0),n.memoizedState=a):(kn(a,s)||(a=Jo(),rt.lanes|=a,ti|=a,n.baseState=!0),s)}function yw(n,s){var a=Me;Me=a!==0&&4>a?a:4,n(!0);var c=xh.transition;xh.transition={};try{n(!1),s()}finally{Me=a,xh.transition=c}}function pm(){return gn().memoizedState}function _w(n,s,a){var c=ls(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},mm(n))gm(s,a);else if(a=Wp(n,s,a,c),a!==null){var d=qt();bn(a,n,c,d),ym(a,s,c)}}function vw(n,s,a){var c=ls(n),d={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(mm(n))gm(s,d);else{var f=n.alternate;if(n.lanes===0&&(f===null||f.lanes===0)&&(f=s.lastRenderedReducer,f!==null))try{var w=s.lastRenderedState,C=f(w,a);if(d.hasEagerState=!0,d.eagerState=C,kn(C,w)){var D=s.interleaved;D===null?(d.next=d,gh(s)):(d.next=D.next,D.next=d),s.interleaved=d;return}}catch{}finally{}a=Wp(n,s,d,c),a!==null&&(d=qt(),bn(a,n,c,d),ym(a,s,c))}}function mm(n){var s=n.alternate;return n===rt||s!==null&&s===rt}function gm(n,s){xa=su=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function ym(n,s,a){if((a&4194240)!==0){var c=s.lanes;c&=n.pendingLanes,a|=c,s.lanes=a,Zo(n,a)}}var au={readContext:mn,useCallback:Lt,useContext:Lt,useEffect:Lt,useImperativeHandle:Lt,useInsertionEffect:Lt,useLayoutEffect:Lt,useMemo:Lt,useReducer:Lt,useRef:Lt,useState:Lt,useDebugValue:Lt,useDeferredValue:Lt,useTransition:Lt,useMutableSource:Lt,useSyncExternalStore:Lt,useId:Lt,unstable_isNewReconciler:!1},ww={readContext:mn,useCallback:function(n,s){return Zn().memoizedState=[n,s===void 0?null:s],n},useContext:mn,useEffect:om,useImperativeHandle:function(n,s,a){return a=a!=null?a.concat([n]):null,iu(4194308,4,um.bind(null,s,n),a)},useLayoutEffect:function(n,s){return iu(4194308,4,n,s)},useInsertionEffect:function(n,s){return iu(4,2,n,s)},useMemo:function(n,s){var a=Zn();return s=s===void 0?null:s,n=n(),a.memoizedState=[n,s],n},useReducer:function(n,s,a){var c=Zn();return s=a!==void 0?a(s):s,c.memoizedState=c.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},c.queue=n,n=n.dispatch=_w.bind(null,rt,n),[c.memoizedState,n]},useRef:function(n){var s=Zn();return n={current:n},s.memoizedState=n},useState:sm,useDebugValue:Nh,useDeferredValue:function(n){return Zn().memoizedState=n},useTransition:function(){var n=sm(!1),s=n[0];return n=yw.bind(null,n[1]),Zn().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,a){var c=rt,d=Zn();if(tt){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),Tt===null)throw Error(t(349));(ei&30)!==0||Zp(c,s,a)}d.memoizedState=a;var f={value:a,getSnapshot:s};return d.queue=f,om(tm.bind(null,c,f,n),[n]),c.flags|=2048,Sa(9,em.bind(null,c,f,a,s),void 0,null),a},useId:function(){var n=Zn(),s=Tt.identifierPrefix;if(tt){var a=Er,c=wr;a=(c&~(1<<32-en(c)-1)).toString(32)+a,s=":"+s+"R"+a,a=Ta++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=gw++,s=":"+s+"r"+a.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},Ew={readContext:mn,useCallback:hm,useContext:mn,useEffect:Ch,useImperativeHandle:cm,useInsertionEffect:am,useLayoutEffect:lm,useMemo:dm,useReducer:Ah,useRef:im,useState:function(){return Ah(Ia)},useDebugValue:Nh,useDeferredValue:function(n){var s=gn();return fm(s,vt.memoizedState,n)},useTransition:function(){var n=Ah(Ia)[0],s=gn().memoizedState;return[n,s]},useMutableSource:Jp,useSyncExternalStore:Xp,useId:pm,unstable_isNewReconciler:!1},xw={readContext:mn,useCallback:hm,useContext:mn,useEffect:Ch,useImperativeHandle:cm,useInsertionEffect:am,useLayoutEffect:lm,useMemo:dm,useReducer:kh,useRef:im,useState:function(){return kh(Ia)},useDebugValue:Nh,useDeferredValue:function(n){var s=gn();return vt===null?s.memoizedState=n:fm(s,vt.memoizedState,n)},useTransition:function(){var n=kh(Ia)[0],s=gn().memoizedState;return[n,s]},useMutableSource:Jp,useSyncExternalStore:Xp,useId:pm,unstable_isNewReconciler:!1};function Nn(n,s){if(n&&n.defaultProps){s=oe({},s),n=n.defaultProps;for(var a in n)s[a]===void 0&&(s[a]=n[a]);return s}return s}function Rh(n,s,a,c){s=n.memoizedState,a=a(c,s),a=a==null?s:oe({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var lu={isMounted:function(n){return(n=n._reactInternals)?Sn(n)===n:!1},enqueueSetState:function(n,s,a){n=n._reactInternals;var c=qt(),d=ls(n),f=Tr(c,d);f.payload=s,a!=null&&(f.callback=a),s=ss(n,f,d),s!==null&&(bn(s,n,d,c),eu(s,n,d))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var c=qt(),d=ls(n),f=Tr(c,d);f.tag=1,f.payload=s,a!=null&&(f.callback=a),s=ss(n,f,d),s!==null&&(bn(s,n,d,c),eu(s,n,d))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=qt(),c=ls(n),d=Tr(a,c);d.tag=2,s!=null&&(d.callback=s),s=ss(n,d,c),s!==null&&(bn(s,n,c,a),eu(s,n,c))}};function _m(n,s,a,c,d,f,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,f,w):s.prototype&&s.prototype.isPureReactComponent?!ha(a,c)||!ha(d,f):!0}function vm(n,s,a){var c=!1,d=ts,f=s.contextType;return typeof f=="object"&&f!==null?f=mn(f):(d=Wt(s)?Qs:Vt.current,c=s.contextTypes,f=(c=c!=null)?Yi(n,d):ts),s=new s(a,f),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=lu,n.stateNode=s,s._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=d,n.__reactInternalMemoizedMaskedChildContext=f),s}function wm(n,s,a,c){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,c),s.state!==n&&lu.enqueueReplaceState(s,s.state,null)}function Ph(n,s,a,c){var d=n.stateNode;d.props=a,d.state=n.memoizedState,d.refs={},yh(n);var f=s.contextType;typeof f=="object"&&f!==null?d.context=mn(f):(f=Wt(s)?Qs:Vt.current,d.context=Yi(n,f)),d.state=n.memoizedState,f=s.getDerivedStateFromProps,typeof f=="function"&&(Rh(n,s,f,a),d.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(s=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),s!==d.state&&lu.enqueueReplaceState(d,d.state,null),tu(n,a,d,c),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308)}function so(n,s){try{var a="",c=s;do a+=be(c),c=c.return;while(c);var d=a}catch(f){d=`
Error generating stack: `+f.message+`
`+f.stack}return{value:n,source:s,stack:d,digest:null}}function bh(n,s,a){return{value:n,source:null,stack:a??null,digest:s??null}}function Dh(n,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var Tw=typeof WeakMap=="function"?WeakMap:Map;function Em(n,s,a){a=Tr(-1,a),a.tag=3,a.payload={element:null};var c=s.value;return a.callback=function(){mu||(mu=!0,Kh=c),Dh(n,s)},a}function xm(n,s,a){a=Tr(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var d=s.value;a.payload=function(){return c(d)},a.callback=function(){Dh(n,s)}}var f=n.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(a.callback=function(){Dh(n,s),typeof c!="function"&&(os===null?os=new Set([this]):os.add(this));var w=s.stack;this.componentDidCatch(s.value,{componentStack:w!==null?w:""})}),a}function Tm(n,s,a){var c=n.pingCache;if(c===null){c=n.pingCache=new Tw;var d=new Set;c.set(s,d)}else d=c.get(s),d===void 0&&(d=new Set,c.set(s,d));d.has(a)||(d.add(a),n=Mw.bind(null,n,s,a),s.then(n,n))}function Im(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function Sm(n,s,a,c,d){return(n.mode&1)===0?(n===s?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=Tr(-1,1),s.tag=2,ss(a,s,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=d,n)}var Iw=we.ReactCurrentOwner,Gt=!1;function $t(n,s,a,c){s.child=n===null?Hp(s,null,a,c):eo(s,n.child,a,c)}function Am(n,s,a,c,d){a=a.render;var f=s.ref;return no(s,d),c=Ih(n,s,a,c,f,d),a=Sh(),n!==null&&!Gt?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~d,Ir(n,s,d)):(tt&&a&&ah(s),s.flags|=1,$t(n,s,c,d),s.child)}function km(n,s,a,c,d){if(n===null){var f=a.type;return typeof f=="function"&&!td(f)&&f.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=f,Cm(n,s,f,c,d)):(n=Eu(a.type,null,c,s,s.mode,d),n.ref=s.ref,n.return=s,s.child=n)}if(f=n.child,(n.lanes&d)===0){var w=f.memoizedProps;if(a=a.compare,a=a!==null?a:ha,a(w,c)&&n.ref===s.ref)return Ir(n,s,d)}return s.flags|=1,n=cs(f,c),n.ref=s.ref,n.return=s,s.child=n}function Cm(n,s,a,c,d){if(n!==null){var f=n.memoizedProps;if(ha(f,c)&&n.ref===s.ref)if(Gt=!1,s.pendingProps=c=f,(n.lanes&d)!==0)(n.flags&131072)!==0&&(Gt=!0);else return s.lanes=n.lanes,Ir(n,s,d)}return Vh(n,s,a,c,d)}function Nm(n,s,a){var c=s.pendingProps,d=c.children,f=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qe(oo,ln),ln|=a;else{if((a&1073741824)===0)return n=f!==null?f.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,Qe(oo,ln),ln|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=f!==null?f.baseLanes:a,Qe(oo,ln),ln|=c}else f!==null?(c=f.baseLanes|a,s.memoizedState=null):c=a,Qe(oo,ln),ln|=c;return $t(n,s,d,a),s.child}function Rm(n,s){var a=s.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function Vh(n,s,a,c,d){var f=Wt(a)?Qs:Vt.current;return f=Yi(s,f),no(s,d),a=Ih(n,s,a,c,f,d),c=Sh(),n!==null&&!Gt?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~d,Ir(n,s,d)):(tt&&c&&ah(s),s.flags|=1,$t(n,s,a,d),s.child)}function Pm(n,s,a,c,d){if(Wt(a)){var f=!0;Wl(s)}else f=!1;if(no(s,d),s.stateNode===null)cu(n,s),vm(s,a,c),Ph(s,a,c,d),c=!0;else if(n===null){var w=s.stateNode,C=s.memoizedProps;w.props=C;var D=w.context,U=a.contextType;typeof U=="object"&&U!==null?U=mn(U):(U=Wt(a)?Qs:Vt.current,U=Yi(s,U));var Q=a.getDerivedStateFromProps,Y=typeof Q=="function"||typeof w.getSnapshotBeforeUpdate=="function";Y||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(C!==c||D!==U)&&wm(s,w,c,U),rs=!1;var K=s.memoizedState;w.state=K,tu(s,c,w,d),D=s.memoizedState,C!==c||K!==D||Ht.current||rs?(typeof Q=="function"&&(Rh(s,a,Q,c),D=s.memoizedState),(C=rs||_m(s,a,C,c,K,D,U))?(Y||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(s.flags|=4194308)):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=D),w.props=c,w.state=D,w.context=U,c=C):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{w=s.stateNode,Gp(n,s),C=s.memoizedProps,U=s.type===s.elementType?C:Nn(s.type,C),w.props=U,Y=s.pendingProps,K=w.context,D=a.contextType,typeof D=="object"&&D!==null?D=mn(D):(D=Wt(a)?Qs:Vt.current,D=Yi(s,D));var se=a.getDerivedStateFromProps;(Q=typeof se=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(C!==Y||K!==D)&&wm(s,w,c,D),rs=!1,K=s.memoizedState,w.state=K,tu(s,c,w,d);var le=s.memoizedState;C!==Y||K!==le||Ht.current||rs?(typeof se=="function"&&(Rh(s,a,se,c),le=s.memoizedState),(U=rs||_m(s,a,U,c,K,le,D)||!1)?(Q||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(c,le,D),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(c,le,D)),typeof w.componentDidUpdate=="function"&&(s.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof w.componentDidUpdate!="function"||C===n.memoizedProps&&K===n.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&K===n.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=le),w.props=c,w.state=le,w.context=D,c=U):(typeof w.componentDidUpdate!="function"||C===n.memoizedProps&&K===n.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&K===n.memoizedState||(s.flags|=1024),c=!1)}return Lh(n,s,a,c,f,d)}function Lh(n,s,a,c,d,f){Rm(n,s);var w=(s.flags&128)!==0;if(!c&&!w)return d&&Op(s,a,!1),Ir(n,s,f);c=s.stateNode,Iw.current=s;var C=w&&typeof a.getDerivedStateFromError!="function"?null:c.render();return s.flags|=1,n!==null&&w?(s.child=eo(s,n.child,null,f),s.child=eo(s,null,C,f)):$t(n,s,C,f),s.memoizedState=c.state,d&&Op(s,a,!0),s.child}function bm(n){var s=n.stateNode;s.pendingContext?Vp(n,s.pendingContext,s.pendingContext!==s.context):s.context&&Vp(n,s.context,!1),_h(n,s.containerInfo)}function Dm(n,s,a,c,d){return Zi(),hh(d),s.flags|=256,$t(n,s,a,c),s.child}var Oh={dehydrated:null,treeContext:null,retryLane:0};function Mh(n){return{baseLanes:n,cachePool:null,transitions:null}}function Vm(n,s,a){var c=s.pendingProps,d=nt.current,f=!1,w=(s.flags&128)!==0,C;if((C=w)||(C=n!==null&&n.memoizedState===null?!1:(d&2)!==0),C?(f=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(d|=1),Qe(nt,d&1),n===null)return ch(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((s.mode&1)===0?s.lanes=1:n.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(w=c.children,n=c.fallback,f?(c=s.mode,f=s.child,w={mode:"hidden",children:w},(c&1)===0&&f!==null?(f.childLanes=0,f.pendingProps=w):f=xu(w,c,0,null),n=ii(n,c,a,null),f.return=s,n.return=s,f.sibling=n,s.child=f,s.child.memoizedState=Mh(a),s.memoizedState=Oh,n):jh(s,w));if(d=n.memoizedState,d!==null&&(C=d.dehydrated,C!==null))return Sw(n,s,w,c,C,d,a);if(f){f=c.fallback,w=s.mode,d=n.child,C=d.sibling;var D={mode:"hidden",children:c.children};return(w&1)===0&&s.child!==d?(c=s.child,c.childLanes=0,c.pendingProps=D,s.deletions=null):(c=cs(d,D),c.subtreeFlags=d.subtreeFlags&14680064),C!==null?f=cs(C,f):(f=ii(f,w,a,null),f.flags|=2),f.return=s,c.return=s,c.sibling=f,s.child=c,c=f,f=s.child,w=n.child.memoizedState,w=w===null?Mh(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},f.memoizedState=w,f.childLanes=n.childLanes&~a,s.memoizedState=Oh,c}return f=n.child,n=f.sibling,c=cs(f,{mode:"visible",children:c.children}),(s.mode&1)===0&&(c.lanes=a),c.return=s,c.sibling=null,n!==null&&(a=s.deletions,a===null?(s.deletions=[n],s.flags|=16):a.push(n)),s.child=c,s.memoizedState=null,c}function jh(n,s){return s=xu({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function uu(n,s,a,c){return c!==null&&hh(c),eo(s,n.child,null,a),n=jh(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function Sw(n,s,a,c,d,f,w){if(a)return s.flags&256?(s.flags&=-257,c=bh(Error(t(422))),uu(n,s,w,c)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(f=c.fallback,d=s.mode,c=xu({mode:"visible",children:c.children},d,0,null),f=ii(f,d,w,null),f.flags|=2,c.return=s,f.return=s,c.sibling=f,s.child=c,(s.mode&1)!==0&&eo(s,n.child,null,w),s.child.memoizedState=Mh(w),s.memoizedState=Oh,f);if((s.mode&1)===0)return uu(n,s,w,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var C=c.dgst;return c=C,f=Error(t(419)),c=bh(f,c,void 0),uu(n,s,w,c)}if(C=(w&n.childLanes)!==0,Gt||C){if(c=Tt,c!==null){switch(w&-w){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(c.suspendedLanes|w))!==0?0:d,d!==0&&d!==f.retryLane&&(f.retryLane=d,xr(n,d),bn(c,n,d,-1))}return ed(),c=bh(Error(t(421))),uu(n,s,w,c)}return d.data==="$?"?(s.flags|=128,s.child=n.child,s=jw.bind(null,n),d._reactRetry=s,null):(n=f.treeContext,an=Zr(d.nextSibling),on=s,tt=!0,Cn=null,n!==null&&(fn[pn++]=wr,fn[pn++]=Er,fn[pn++]=Ys,wr=n.id,Er=n.overflow,Ys=s),s=jh(s,c.children),s.flags|=4096,s)}function Lm(n,s,a){n.lanes|=s;var c=n.alternate;c!==null&&(c.lanes|=s),mh(n.return,s,a)}function Fh(n,s,a,c,d){var f=n.memoizedState;f===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(f.isBackwards=s,f.rendering=null,f.renderingStartTime=0,f.last=c,f.tail=a,f.tailMode=d)}function Om(n,s,a){var c=s.pendingProps,d=c.revealOrder,f=c.tail;if($t(n,s,c.children,a),c=nt.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Lm(n,a,s);else if(n.tag===19)Lm(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(Qe(nt,c),(s.mode&1)===0)s.memoizedState=null;else switch(d){case"forwards":for(a=s.child,d=null;a!==null;)n=a.alternate,n!==null&&nu(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=s.child,s.child=null):(d=a.sibling,a.sibling=null),Fh(s,!1,d,a,f);break;case"backwards":for(a=null,d=s.child,s.child=null;d!==null;){if(n=d.alternate,n!==null&&nu(n)===null){s.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}Fh(s,!0,a,null,f);break;case"together":Fh(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function cu(n,s){(s.mode&1)===0&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function Ir(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),ti|=s.lanes,(a&s.childLanes)===0)return null;if(n!==null&&s.child!==n.child)throw Error(t(153));if(s.child!==null){for(n=s.child,a=cs(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=cs(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function Aw(n,s,a){switch(s.tag){case 3:bm(s),Zi();break;case 5:Yp(s);break;case 1:Wt(s.type)&&Wl(s);break;case 4:_h(s,s.stateNode.containerInfo);break;case 10:var c=s.type._context,d=s.memoizedProps.value;Qe(Xl,c._currentValue),c._currentValue=d;break;case 13:if(c=s.memoizedState,c!==null)return c.dehydrated!==null?(Qe(nt,nt.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?Vm(n,s,a):(Qe(nt,nt.current&1),n=Ir(n,s,a),n!==null?n.sibling:null);Qe(nt,nt.current&1);break;case 19:if(c=(a&s.childLanes)!==0,(n.flags&128)!==0){if(c)return Om(n,s,a);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Qe(nt,nt.current),c)break;return null;case 22:case 23:return s.lanes=0,Nm(n,s,a)}return Ir(n,s,a)}var Mm,Uh,jm,Fm;Mm=function(n,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Uh=function(){},jm=function(n,s,a,c){var d=n.memoizedProps;if(d!==c){n=s.stateNode,Zs(Xn.current);var f=null;switch(a){case"input":d=xi(n,d),c=xi(n,c),f=[];break;case"select":d=oe({},d,{value:void 0}),c=oe({},c,{value:void 0}),f=[];break;case"textarea":d=Uo(n,d),c=Uo(n,c),f=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=$l)}In(a,c);var w;a=null;for(U in d)if(!c.hasOwnProperty(U)&&d.hasOwnProperty(U)&&d[U]!=null)if(U==="style"){var C=d[U];for(w in C)C.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else U!=="dangerouslySetInnerHTML"&&U!=="children"&&U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&U!=="autoFocus"&&(o.hasOwnProperty(U)?f||(f=[]):(f=f||[]).push(U,null));for(U in c){var D=c[U];if(C=d!=null?d[U]:void 0,c.hasOwnProperty(U)&&D!==C&&(D!=null||C!=null))if(U==="style")if(C){for(w in C)!C.hasOwnProperty(w)||D&&D.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in D)D.hasOwnProperty(w)&&C[w]!==D[w]&&(a||(a={}),a[w]=D[w])}else a||(f||(f=[]),f.push(U,a)),a=D;else U==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,C=C?C.__html:void 0,D!=null&&C!==D&&(f=f||[]).push(U,D)):U==="children"?typeof D!="string"&&typeof D!="number"||(f=f||[]).push(U,""+D):U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&(o.hasOwnProperty(U)?(D!=null&&U==="onScroll"&&Xe("scroll",n),f||C===D||(f=[])):(f=f||[]).push(U,D))}a&&(f=f||[]).push("style",a);var U=f;(s.updateQueue=U)&&(s.flags|=4)}},Fm=function(n,s,a,c){a!==c&&(s.flags|=4)};function Aa(n,s){if(!tt)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Ot(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(s)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=c,n.childLanes=a,s}function kw(n,s,a){var c=s.pendingProps;switch(lh(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(s),null;case 1:return Wt(s.type)&&Hl(),Ot(s),null;case 3:return c=s.stateNode,ro(),Ze(Ht),Ze(Vt),Eh(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(Yl(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Cn!==null&&(Jh(Cn),Cn=null))),Uh(n,s),Ot(s),null;case 5:vh(s);var d=Zs(Ea.current);if(a=s.type,n!==null&&s.stateNode!=null)jm(n,s,a,c,d),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!c){if(s.stateNode===null)throw Error(t(166));return Ot(s),null}if(n=Zs(Xn.current),Yl(s)){c=s.stateNode,a=s.type;var f=s.memoizedProps;switch(c[Jn]=s,c[ga]=f,n=(s.mode&1)!==0,a){case"dialog":Xe("cancel",c),Xe("close",c);break;case"iframe":case"object":case"embed":Xe("load",c);break;case"video":case"audio":for(d=0;d<fa.length;d++)Xe(fa[d],c);break;case"source":Xe("error",c);break;case"img":case"image":case"link":Xe("error",c),Xe("load",c);break;case"details":Xe("toggle",c);break;case"input":pl(c,f),Xe("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!f.multiple},Xe("invalid",c);break;case"textarea":zo(c,f),Xe("invalid",c)}In(a,f),d=null;for(var w in f)if(f.hasOwnProperty(w)){var C=f[w];w==="children"?typeof C=="string"?c.textContent!==C&&(f.suppressHydrationWarning!==!0&&Bl(c.textContent,C,n),d=["children",C]):typeof C=="number"&&c.textContent!==""+C&&(f.suppressHydrationWarning!==!0&&Bl(c.textContent,C,n),d=["children",""+C]):o.hasOwnProperty(w)&&C!=null&&w==="onScroll"&&Xe("scroll",c)}switch(a){case"input":Ei(c),Fo(c,f,!0);break;case"textarea":Ei(c),Mr(c);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(c.onclick=$l)}c=d,s.updateQueue=c,c!==null&&(s.flags|=4)}else{w=d.nodeType===9?d:d.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Bo(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=w.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=w.createElement(a,{is:c.is}):(n=w.createElement(a),a==="select"&&(w=n,c.multiple?w.multiple=!0:c.size&&(w.size=c.size))):n=w.createElementNS(n,a),n[Jn]=s,n[ga]=c,Mm(n,s,!1,!1),s.stateNode=n;e:{switch(w=Ai(a,c),a){case"dialog":Xe("cancel",n),Xe("close",n),d=c;break;case"iframe":case"object":case"embed":Xe("load",n),d=c;break;case"video":case"audio":for(d=0;d<fa.length;d++)Xe(fa[d],n);d=c;break;case"source":Xe("error",n),d=c;break;case"img":case"image":case"link":Xe("error",n),Xe("load",n),d=c;break;case"details":Xe("toggle",n),d=c;break;case"input":pl(n,c),d=xi(n,c),Xe("invalid",n);break;case"option":d=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},d=oe({},c,{value:void 0}),Xe("invalid",n);break;case"textarea":zo(n,c),d=Uo(n,c),Xe("invalid",n);break;default:d=c}In(a,d),C=d;for(f in C)if(C.hasOwnProperty(f)){var D=C[f];f==="style"?Si(n,D):f==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,D!=null&&gl(n,D)):f==="children"?typeof D=="string"?(a!=="textarea"||D!=="")&&Vs(n,D):typeof D=="number"&&Vs(n,""+D):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(o.hasOwnProperty(f)?D!=null&&f==="onScroll"&&Xe("scroll",n):D!=null&&Z(n,f,D,w))}switch(a){case"input":Ei(n),Fo(n,c,!1);break;case"textarea":Ei(n),Mr(n);break;case"option":c.value!=null&&n.setAttribute("value",""+Fe(c.value));break;case"select":n.multiple=!!c.multiple,f=c.value,f!=null?Tn(n,!!c.multiple,f,!1):c.defaultValue!=null&&Tn(n,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(n.onclick=$l)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Ot(s),null;case 6:if(n&&s.stateNode!=null)Fm(n,s,n.memoizedProps,c);else{if(typeof c!="string"&&s.stateNode===null)throw Error(t(166));if(a=Zs(Ea.current),Zs(Xn.current),Yl(s)){if(c=s.stateNode,a=s.memoizedProps,c[Jn]=s,(f=c.nodeValue!==a)&&(n=on,n!==null))switch(n.tag){case 3:Bl(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Bl(c.nodeValue,a,(n.mode&1)!==0)}f&&(s.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[Jn]=s,s.stateNode=c}return Ot(s),null;case 13:if(Ze(nt),c=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(tt&&an!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Bp(),Zi(),s.flags|=98560,f=!1;else if(f=Yl(s),c!==null&&c.dehydrated!==null){if(n===null){if(!f)throw Error(t(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(t(317));f[Jn]=s}else Zi(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ot(s),f=!1}else Cn!==null&&(Jh(Cn),Cn=null),f=!0;if(!f)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(s.child.flags|=8192,(s.mode&1)!==0&&(n===null||(nt.current&1)!==0?wt===0&&(wt=3):ed())),s.updateQueue!==null&&(s.flags|=4),Ot(s),null);case 4:return ro(),Uh(n,s),n===null&&pa(s.stateNode.containerInfo),Ot(s),null;case 10:return ph(s.type._context),Ot(s),null;case 17:return Wt(s.type)&&Hl(),Ot(s),null;case 19:if(Ze(nt),f=s.memoizedState,f===null)return Ot(s),null;if(c=(s.flags&128)!==0,w=f.rendering,w===null)if(c)Aa(f,!1);else{if(wt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(w=nu(n),w!==null){for(s.flags|=128,Aa(f,!1),c=w.updateQueue,c!==null&&(s.updateQueue=c,s.flags|=4),s.subtreeFlags=0,c=a,a=s.child;a!==null;)f=a,n=c,f.flags&=14680066,w=f.alternate,w===null?(f.childLanes=0,f.lanes=n,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=w.childLanes,f.lanes=w.lanes,f.child=w.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=w.memoizedProps,f.memoizedState=w.memoizedState,f.updateQueue=w.updateQueue,f.type=w.type,n=w.dependencies,f.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Qe(nt,nt.current&1|2),s.child}n=n.sibling}f.tail!==null&&Je()>ao&&(s.flags|=128,c=!0,Aa(f,!1),s.lanes=4194304)}else{if(!c)if(n=nu(w),n!==null){if(s.flags|=128,c=!0,a=n.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),Aa(f,!0),f.tail===null&&f.tailMode==="hidden"&&!w.alternate&&!tt)return Ot(s),null}else 2*Je()-f.renderingStartTime>ao&&a!==1073741824&&(s.flags|=128,c=!0,Aa(f,!1),s.lanes=4194304);f.isBackwards?(w.sibling=s.child,s.child=w):(a=f.last,a!==null?a.sibling=w:s.child=w,f.last=w)}return f.tail!==null?(s=f.tail,f.rendering=s,f.tail=s.sibling,f.renderingStartTime=Je(),s.sibling=null,a=nt.current,Qe(nt,c?a&1|2:a&1),s):(Ot(s),null);case 22:case 23:return Zh(),c=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(s.flags|=8192),c&&(s.mode&1)!==0?(ln&1073741824)!==0&&(Ot(s),s.subtreeFlags&6&&(s.flags|=8192)):Ot(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function Cw(n,s){switch(lh(s),s.tag){case 1:return Wt(s.type)&&Hl(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return ro(),Ze(Ht),Ze(Vt),Eh(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 5:return vh(s),null;case 13:if(Ze(nt),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(t(340));Zi()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return Ze(nt),null;case 4:return ro(),null;case 10:return ph(s.type._context),null;case 22:case 23:return Zh(),null;case 24:return null;default:return null}}var hu=!1,Mt=!1,Nw=typeof WeakSet=="function"?WeakSet:Set,ae=null;function io(n,s){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){ot(n,s,c)}else a.current=null}function zh(n,s,a){try{a()}catch(c){ot(n,s,c)}}var Um=!1;function Rw(n,s){if(Zc=mr,n=_p(),Hc(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,f=c.focusNode;c=c.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var w=0,C=-1,D=-1,U=0,Q=0,Y=n,K=null;t:for(;;){for(var se;Y!==a||d!==0&&Y.nodeType!==3||(C=w+d),Y!==f||c!==0&&Y.nodeType!==3||(D=w+c),Y.nodeType===3&&(w+=Y.nodeValue.length),(se=Y.firstChild)!==null;)K=Y,Y=se;for(;;){if(Y===n)break t;if(K===a&&++U===d&&(C=w),K===f&&++Q===c&&(D=w),(se=Y.nextSibling)!==null)break;Y=K,K=Y.parentNode}Y=se}a=C===-1||D===-1?null:{start:C,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for(eh={focusedElem:n,selectionRange:a},mr=!1,ae=s;ae!==null;)if(s=ae,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,ae=n;else for(;ae!==null;){s=ae;try{var le=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(le!==null){var ue=le.memoizedProps,ut=le.memoizedState,O=s.stateNode,V=O.getSnapshotBeforeUpdate(s.elementType===s.type?ue:Nn(s.type,ue),ut);O.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var j=s.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(J){ot(s,s.return,J)}if(n=s.sibling,n!==null){n.return=s.return,ae=n;break}ae=s.return}return le=Um,Um=!1,le}function ka(n,s,a){var c=s.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&n)===n){var f=d.destroy;d.destroy=void 0,f!==void 0&&zh(s,a,f)}d=d.next}while(d!==c)}}function du(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==s)}}function Bh(n){var s=n.ref;if(s!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof s=="function"?s(n):s.current=n}}function zm(n){var s=n.alternate;s!==null&&(n.alternate=null,zm(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[Jn],delete s[ga],delete s[sh],delete s[dw],delete s[fw])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Bm(n){return n.tag===5||n.tag===3||n.tag===4}function $m(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Bm(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function $h(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(n,s):a.insertBefore(n,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(n,a)):(s=a,s.appendChild(n)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=$l));else if(c!==4&&(n=n.child,n!==null))for($h(n,s,a),n=n.sibling;n!==null;)$h(n,s,a),n=n.sibling}function qh(n,s,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(qh(n,s,a),n=n.sibling;n!==null;)qh(n,s,a),n=n.sibling}var Ct=null,Rn=!1;function is(n,s,a){for(a=a.child;a!==null;)qm(n,s,a),a=a.sibling}function qm(n,s,a){if(Zt&&typeof Zt.onCommitFiberUnmount=="function")try{Zt.onCommitFiberUnmount(Fs,a)}catch{}switch(a.tag){case 5:Mt||io(a,s);case 6:var c=Ct,d=Rn;Ct=null,is(n,s,a),Ct=c,Rn=d,Ct!==null&&(Rn?(n=Ct,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Ct.removeChild(a.stateNode));break;case 18:Ct!==null&&(Rn?(n=Ct,a=a.stateNode,n.nodeType===8?rh(n.parentNode,a):n.nodeType===1&&rh(n,a),Qr(n)):rh(Ct,a.stateNode));break;case 4:c=Ct,d=Rn,Ct=a.stateNode.containerInfo,Rn=!0,is(n,s,a),Ct=c,Rn=d;break;case 0:case 11:case 14:case 15:if(!Mt&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var f=d,w=f.destroy;f=f.tag,w!==void 0&&((f&2)!==0||(f&4)!==0)&&zh(a,s,w),d=d.next}while(d!==c)}is(n,s,a);break;case 1:if(!Mt&&(io(a,s),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(C){ot(a,s,C)}is(n,s,a);break;case 21:is(n,s,a);break;case 22:a.mode&1?(Mt=(c=Mt)||a.memoizedState!==null,is(n,s,a),Mt=c):is(n,s,a);break;default:is(n,s,a)}}function Hm(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new Nw),s.forEach(function(c){var d=Fw.bind(null,n,c);a.has(c)||(a.add(c),c.then(d,d))})}}function Pn(n,s){var a=s.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];try{var f=n,w=s,C=w;e:for(;C!==null;){switch(C.tag){case 5:Ct=C.stateNode,Rn=!1;break e;case 3:Ct=C.stateNode.containerInfo,Rn=!0;break e;case 4:Ct=C.stateNode.containerInfo,Rn=!0;break e}C=C.return}if(Ct===null)throw Error(t(160));qm(f,w,d),Ct=null,Rn=!1;var D=d.alternate;D!==null&&(D.return=null),d.return=null}catch(U){ot(d,s,U)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Wm(s,n),s=s.sibling}function Wm(n,s){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Pn(s,n),er(n),c&4){try{ka(3,n,n.return),du(3,n)}catch(ue){ot(n,n.return,ue)}try{ka(5,n,n.return)}catch(ue){ot(n,n.return,ue)}}break;case 1:Pn(s,n),er(n),c&512&&a!==null&&io(a,a.return);break;case 5:if(Pn(s,n),er(n),c&512&&a!==null&&io(a,a.return),n.flags&32){var d=n.stateNode;try{Vs(d,"")}catch(ue){ot(n,n.return,ue)}}if(c&4&&(d=n.stateNode,d!=null)){var f=n.memoizedProps,w=a!==null?a.memoizedProps:f,C=n.type,D=n.updateQueue;if(n.updateQueue=null,D!==null)try{C==="input"&&f.type==="radio"&&f.name!=null&&Ti(d,f),Ai(C,w);var U=Ai(C,f);for(w=0;w<D.length;w+=2){var Q=D[w],Y=D[w+1];Q==="style"?Si(d,Y):Q==="dangerouslySetInnerHTML"?gl(d,Y):Q==="children"?Vs(d,Y):Z(d,Q,Y,U)}switch(C){case"input":Ds(d,f);break;case"textarea":ml(d,f);break;case"select":var K=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!f.multiple;var se=f.value;se!=null?Tn(d,!!f.multiple,se,!1):K!==!!f.multiple&&(f.defaultValue!=null?Tn(d,!!f.multiple,f.defaultValue,!0):Tn(d,!!f.multiple,f.multiple?[]:"",!1))}d[ga]=f}catch(ue){ot(n,n.return,ue)}}break;case 6:if(Pn(s,n),er(n),c&4){if(n.stateNode===null)throw Error(t(162));d=n.stateNode,f=n.memoizedProps;try{d.nodeValue=f}catch(ue){ot(n,n.return,ue)}}break;case 3:if(Pn(s,n),er(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Qr(s.containerInfo)}catch(ue){ot(n,n.return,ue)}break;case 4:Pn(s,n),er(n);break;case 13:Pn(s,n),er(n),d=n.child,d.flags&8192&&(f=d.memoizedState!==null,d.stateNode.isHidden=f,!f||d.alternate!==null&&d.alternate.memoizedState!==null||(Gh=Je())),c&4&&Hm(n);break;case 22:if(Q=a!==null&&a.memoizedState!==null,n.mode&1?(Mt=(U=Mt)||Q,Pn(s,n),Mt=U):Pn(s,n),er(n),c&8192){if(U=n.memoizedState!==null,(n.stateNode.isHidden=U)&&!Q&&(n.mode&1)!==0)for(ae=n,Q=n.child;Q!==null;){for(Y=ae=Q;ae!==null;){switch(K=ae,se=K.child,K.tag){case 0:case 11:case 14:case 15:ka(4,K,K.return);break;case 1:io(K,K.return);var le=K.stateNode;if(typeof le.componentWillUnmount=="function"){c=K,a=K.return;try{s=c,le.props=s.memoizedProps,le.state=s.memoizedState,le.componentWillUnmount()}catch(ue){ot(c,a,ue)}}break;case 5:io(K,K.return);break;case 22:if(K.memoizedState!==null){Qm(Y);continue}}se!==null?(se.return=K,ae=se):Qm(Y)}Q=Q.sibling}e:for(Q=null,Y=n;;){if(Y.tag===5){if(Q===null){Q=Y;try{d=Y.stateNode,U?(f=d.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(C=Y.stateNode,D=Y.memoizedProps.style,w=D!=null&&D.hasOwnProperty("display")?D.display:null,C.style.display=Ur("display",w))}catch(ue){ot(n,n.return,ue)}}}else if(Y.tag===6){if(Q===null)try{Y.stateNode.nodeValue=U?"":Y.memoizedProps}catch(ue){ot(n,n.return,ue)}}else if((Y.tag!==22&&Y.tag!==23||Y.memoizedState===null||Y===n)&&Y.child!==null){Y.child.return=Y,Y=Y.child;continue}if(Y===n)break e;for(;Y.sibling===null;){if(Y.return===null||Y.return===n)break e;Q===Y&&(Q=null),Y=Y.return}Q===Y&&(Q=null),Y.sibling.return=Y.return,Y=Y.sibling}}break;case 19:Pn(s,n),er(n),c&4&&Hm(n);break;case 21:break;default:Pn(s,n),er(n)}}function er(n){var s=n.flags;if(s&2){try{e:{for(var a=n.return;a!==null;){if(Bm(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(Vs(d,""),c.flags&=-33);var f=$m(n);qh(n,f,d);break;case 3:case 4:var w=c.stateNode.containerInfo,C=$m(n);$h(n,C,w);break;default:throw Error(t(161))}}catch(D){ot(n,n.return,D)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function Pw(n,s,a){ae=n,Gm(n)}function Gm(n,s,a){for(var c=(n.mode&1)!==0;ae!==null;){var d=ae,f=d.child;if(d.tag===22&&c){var w=d.memoizedState!==null||hu;if(!w){var C=d.alternate,D=C!==null&&C.memoizedState!==null||Mt;C=hu;var U=Mt;if(hu=w,(Mt=D)&&!U)for(ae=d;ae!==null;)w=ae,D=w.child,w.tag===22&&w.memoizedState!==null?Ym(d):D!==null?(D.return=w,ae=D):Ym(d);for(;f!==null;)ae=f,Gm(f),f=f.sibling;ae=d,hu=C,Mt=U}Km(n)}else(d.subtreeFlags&8772)!==0&&f!==null?(f.return=d,ae=f):Km(n)}}function Km(n){for(;ae!==null;){var s=ae;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Mt||du(5,s);break;case 1:var c=s.stateNode;if(s.flags&4&&!Mt)if(a===null)c.componentDidMount();else{var d=s.elementType===s.type?a.memoizedProps:Nn(s.type,a.memoizedProps);c.componentDidUpdate(d,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var f=s.updateQueue;f!==null&&Qp(s,f,c);break;case 3:var w=s.updateQueue;if(w!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}Qp(s,w,a)}break;case 5:var C=s.stateNode;if(a===null&&s.flags&4){a=C;var D=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":D.autoFocus&&a.focus();break;case"img":D.src&&(a.src=D.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var U=s.alternate;if(U!==null){var Q=U.memoizedState;if(Q!==null){var Y=Q.dehydrated;Y!==null&&Qr(Y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Mt||s.flags&512&&Bh(s)}catch(K){ot(s,s.return,K)}}if(s===n){ae=null;break}if(a=s.sibling,a!==null){a.return=s.return,ae=a;break}ae=s.return}}function Qm(n){for(;ae!==null;){var s=ae;if(s===n){ae=null;break}var a=s.sibling;if(a!==null){a.return=s.return,ae=a;break}ae=s.return}}function Ym(n){for(;ae!==null;){var s=ae;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{du(4,s)}catch(D){ot(s,a,D)}break;case 1:var c=s.stateNode;if(typeof c.componentDidMount=="function"){var d=s.return;try{c.componentDidMount()}catch(D){ot(s,d,D)}}var f=s.return;try{Bh(s)}catch(D){ot(s,f,D)}break;case 5:var w=s.return;try{Bh(s)}catch(D){ot(s,w,D)}}}catch(D){ot(s,s.return,D)}if(s===n){ae=null;break}var C=s.sibling;if(C!==null){C.return=s.return,ae=C;break}ae=s.return}}var bw=Math.ceil,fu=we.ReactCurrentDispatcher,Hh=we.ReactCurrentOwner,yn=we.ReactCurrentBatchConfig,Ue=0,Tt=null,pt=null,Nt=0,ln=0,oo=es(0),wt=0,Ca=null,ti=0,pu=0,Wh=0,Na=null,Kt=null,Gh=0,ao=1/0,Sr=null,mu=!1,Kh=null,os=null,gu=!1,as=null,yu=0,Ra=0,Qh=null,_u=-1,vu=0;function qt(){return(Ue&6)!==0?Je():_u!==-1?_u:_u=Je()}function ls(n){return(n.mode&1)===0?1:(Ue&2)!==0&&Nt!==0?Nt&-Nt:mw.transition!==null?(vu===0&&(vu=Jo()),vu):(n=Me,n!==0||(n=window.event,n=n===void 0?16:Oi(n.type)),n)}function bn(n,s,a,c){if(50<Ra)throw Ra=0,Qh=null,Error(t(185));$s(n,a,c),((Ue&2)===0||n!==Tt)&&(n===Tt&&((Ue&2)===0&&(pu|=a),wt===4&&us(n,Nt)),Qt(n,c),a===1&&Ue===0&&(s.mode&1)===0&&(ao=Je()+500,Gl&&ns()))}function Qt(n,s){var a=n.callbackNode;Bs(n,s);var c=dr(n,n===Tt?Nt:0);if(c===0)a!==null&&Ni(a),n.callbackNode=null,n.callbackPriority=0;else if(s=c&-c,n.callbackPriority!==s){if(a!=null&&Ni(a),s===1)n.tag===0?pw(Xm.bind(null,n)):Mp(Xm.bind(null,n)),cw(function(){(Ue&6)===0&&ns()}),a=null;else{switch(zn(c)){case 1:a=Ri;break;case 4:a=Ko;break;case 16:a=js;break;case 536870912:a=Pi;break;default:a=js}a=og(a,Jm.bind(null,n))}n.callbackPriority=s,n.callbackNode=a}}function Jm(n,s){if(_u=-1,vu=0,(Ue&6)!==0)throw Error(t(327));var a=n.callbackNode;if(lo()&&n.callbackNode!==a)return null;var c=dr(n,n===Tt?Nt:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||s)s=wu(n,c);else{s=c;var d=Ue;Ue|=2;var f=eg();(Tt!==n||Nt!==s)&&(Sr=null,ao=Je()+500,ri(n,s));do try{Lw();break}catch(C){Zm(n,C)}while(!0);fh(),fu.current=f,Ue=d,pt!==null?s=0:(Tt=null,Nt=0,s=wt)}if(s!==0){if(s===2&&(d=Yo(n),d!==0&&(c=d,s=Yh(n,d))),s===1)throw a=Ca,ri(n,0),us(n,c),Qt(n,Je()),a;if(s===6)us(n,c);else{if(d=n.current.alternate,(c&30)===0&&!Dw(d)&&(s=wu(n,c),s===2&&(f=Yo(n),f!==0&&(c=f,s=Yh(n,f))),s===1))throw a=Ca,ri(n,0),us(n,c),Qt(n,Je()),a;switch(n.finishedWork=d,n.finishedLanes=c,s){case 0:case 1:throw Error(t(345));case 2:si(n,Kt,Sr);break;case 3:if(us(n,c),(c&130023424)===c&&(s=Gh+500-Je(),10<s)){if(dr(n,0)!==0)break;if(d=n.suspendedLanes,(d&c)!==c){qt(),n.pingedLanes|=n.suspendedLanes&d;break}n.timeoutHandle=nh(si.bind(null,n,Kt,Sr),s);break}si(n,Kt,Sr);break;case 4:if(us(n,c),(c&4194240)===c)break;for(s=n.eventTimes,d=-1;0<c;){var w=31-en(c);f=1<<w,w=s[w],w>d&&(d=w),c&=~f}if(c=d,c=Je()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*bw(c/1960))-c,10<c){n.timeoutHandle=nh(si.bind(null,n,Kt,Sr),c);break}si(n,Kt,Sr);break;case 5:si(n,Kt,Sr);break;default:throw Error(t(329))}}}return Qt(n,Je()),n.callbackNode===a?Jm.bind(null,n):null}function Yh(n,s){var a=Na;return n.current.memoizedState.isDehydrated&&(ri(n,s).flags|=256),n=wu(n,s),n!==2&&(s=Kt,Kt=a,s!==null&&Jh(s)),n}function Jh(n){Kt===null?Kt=n:Kt.push.apply(Kt,n)}function Dw(n){for(var s=n;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var d=a[c],f=d.getSnapshot;d=d.value;try{if(!kn(f(),d))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function us(n,s){for(s&=~Wh,s&=~pu,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var a=31-en(s),c=1<<a;n[a]=-1,s&=~c}}function Xm(n){if((Ue&6)!==0)throw Error(t(327));lo();var s=dr(n,0);if((s&1)===0)return Qt(n,Je()),null;var a=wu(n,s);if(n.tag!==0&&a===2){var c=Yo(n);c!==0&&(s=c,a=Yh(n,c))}if(a===1)throw a=Ca,ri(n,0),us(n,s),Qt(n,Je()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,si(n,Kt,Sr),Qt(n,Je()),null}function Xh(n,s){var a=Ue;Ue|=1;try{return n(s)}finally{Ue=a,Ue===0&&(ao=Je()+500,Gl&&ns())}}function ni(n){as!==null&&as.tag===0&&(Ue&6)===0&&lo();var s=Ue;Ue|=1;var a=yn.transition,c=Me;try{if(yn.transition=null,Me=1,n)return n()}finally{Me=c,yn.transition=a,Ue=s,(Ue&6)===0&&ns()}}function Zh(){ln=oo.current,Ze(oo)}function ri(n,s){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,uw(a)),pt!==null)for(a=pt.return;a!==null;){var c=a;switch(lh(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&Hl();break;case 3:ro(),Ze(Ht),Ze(Vt),Eh();break;case 5:vh(c);break;case 4:ro();break;case 13:Ze(nt);break;case 19:Ze(nt);break;case 10:ph(c.type._context);break;case 22:case 23:Zh()}a=a.return}if(Tt=n,pt=n=cs(n.current,null),Nt=ln=s,wt=0,Ca=null,Wh=pu=ti=0,Kt=Na=null,Xs!==null){for(s=0;s<Xs.length;s++)if(a=Xs[s],c=a.interleaved,c!==null){a.interleaved=null;var d=c.next,f=a.pending;if(f!==null){var w=f.next;f.next=d,c.next=w}a.pending=c}Xs=null}return n}function Zm(n,s){do{var a=pt;try{if(fh(),ru.current=au,su){for(var c=rt.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}su=!1}if(ei=0,xt=vt=rt=null,xa=!1,Ta=0,Hh.current=null,a===null||a.return===null){wt=1,Ca=s,pt=null;break}e:{var f=n,w=a.return,C=a,D=s;if(s=Nt,C.flags|=32768,D!==null&&typeof D=="object"&&typeof D.then=="function"){var U=D,Q=C,Y=Q.tag;if((Q.mode&1)===0&&(Y===0||Y===11||Y===15)){var K=Q.alternate;K?(Q.updateQueue=K.updateQueue,Q.memoizedState=K.memoizedState,Q.lanes=K.lanes):(Q.updateQueue=null,Q.memoizedState=null)}var se=Im(w);if(se!==null){se.flags&=-257,Sm(se,w,C,f,s),se.mode&1&&Tm(f,U,s),s=se,D=U;var le=s.updateQueue;if(le===null){var ue=new Set;ue.add(D),s.updateQueue=ue}else le.add(D);break e}else{if((s&1)===0){Tm(f,U,s),ed();break e}D=Error(t(426))}}else if(tt&&C.mode&1){var ut=Im(w);if(ut!==null){(ut.flags&65536)===0&&(ut.flags|=256),Sm(ut,w,C,f,s),hh(so(D,C));break e}}f=D=so(D,C),wt!==4&&(wt=2),Na===null?Na=[f]:Na.push(f),f=w;do{switch(f.tag){case 3:f.flags|=65536,s&=-s,f.lanes|=s;var O=Em(f,D,s);Kp(f,O);break e;case 1:C=D;var V=f.type,j=f.stateNode;if((f.flags&128)===0&&(typeof V.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(os===null||!os.has(j)))){f.flags|=65536,s&=-s,f.lanes|=s;var J=xm(f,C,s);Kp(f,J);break e}}f=f.return}while(f!==null)}ng(a)}catch(he){s=he,pt===a&&a!==null&&(pt=a=a.return);continue}break}while(!0)}function eg(){var n=fu.current;return fu.current=au,n===null?au:n}function ed(){(wt===0||wt===3||wt===2)&&(wt=4),Tt===null||(ti&268435455)===0&&(pu&268435455)===0||us(Tt,Nt)}function wu(n,s){var a=Ue;Ue|=2;var c=eg();(Tt!==n||Nt!==s)&&(Sr=null,ri(n,s));do try{Vw();break}catch(d){Zm(n,d)}while(!0);if(fh(),Ue=a,fu.current=c,pt!==null)throw Error(t(261));return Tt=null,Nt=0,wt}function Vw(){for(;pt!==null;)tg(pt)}function Lw(){for(;pt!==null&&!Ms();)tg(pt)}function tg(n){var s=ig(n.alternate,n,ln);n.memoizedProps=n.pendingProps,s===null?ng(n):pt=s,Hh.current=null}function ng(n){var s=n;do{var a=s.alternate;if(n=s.return,(s.flags&32768)===0){if(a=kw(a,s,ln),a!==null){pt=a;return}}else{if(a=Cw(a,s),a!==null){a.flags&=32767,pt=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{wt=6,pt=null;return}}if(s=s.sibling,s!==null){pt=s;return}pt=s=n}while(s!==null);wt===0&&(wt=5)}function si(n,s,a){var c=Me,d=yn.transition;try{yn.transition=null,Me=1,Ow(n,s,a,c)}finally{yn.transition=d,Me=c}return null}function Ow(n,s,a,c){do lo();while(as!==null);if((Ue&6)!==0)throw Error(t(327));a=n.finishedWork;var d=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var f=a.lanes|a.childLanes;if(Uc(n,f),n===Tt&&(pt=Tt=null,Nt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||gu||(gu=!0,og(js,function(){return lo(),null})),f=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||f){f=yn.transition,yn.transition=null;var w=Me;Me=1;var C=Ue;Ue|=4,Hh.current=null,Rw(n,a),Wm(a,n),nw(eh),mr=!!Zc,eh=Zc=null,n.current=a,Pw(a),hr(),Ue=C,Me=w,yn.transition=f}else n.current=a;if(gu&&(gu=!1,as=n,yu=d),f=n.pendingLanes,f===0&&(os=null),kl(a.stateNode),Qt(n,Je()),s!==null)for(c=n.onRecoverableError,a=0;a<s.length;a++)d=s[a],c(d.value,{componentStack:d.stack,digest:d.digest});if(mu)throw mu=!1,n=Kh,Kh=null,n;return(yu&1)!==0&&n.tag!==0&&lo(),f=n.pendingLanes,(f&1)!==0?n===Qh?Ra++:(Ra=0,Qh=n):Ra=0,ns(),null}function lo(){if(as!==null){var n=zn(yu),s=yn.transition,a=Me;try{if(yn.transition=null,Me=16>n?16:n,as===null)var c=!1;else{if(n=as,as=null,yu=0,(Ue&6)!==0)throw Error(t(331));var d=Ue;for(Ue|=4,ae=n.current;ae!==null;){var f=ae,w=f.child;if((ae.flags&16)!==0){var C=f.deletions;if(C!==null){for(var D=0;D<C.length;D++){var U=C[D];for(ae=U;ae!==null;){var Q=ae;switch(Q.tag){case 0:case 11:case 15:ka(8,Q,f)}var Y=Q.child;if(Y!==null)Y.return=Q,ae=Y;else for(;ae!==null;){Q=ae;var K=Q.sibling,se=Q.return;if(zm(Q),Q===U){ae=null;break}if(K!==null){K.return=se,ae=K;break}ae=se}}}var le=f.alternate;if(le!==null){var ue=le.child;if(ue!==null){le.child=null;do{var ut=ue.sibling;ue.sibling=null,ue=ut}while(ue!==null)}}ae=f}}if((f.subtreeFlags&2064)!==0&&w!==null)w.return=f,ae=w;else e:for(;ae!==null;){if(f=ae,(f.flags&2048)!==0)switch(f.tag){case 0:case 11:case 15:ka(9,f,f.return)}var O=f.sibling;if(O!==null){O.return=f.return,ae=O;break e}ae=f.return}}var V=n.current;for(ae=V;ae!==null;){w=ae;var j=w.child;if((w.subtreeFlags&2064)!==0&&j!==null)j.return=w,ae=j;else e:for(w=V;ae!==null;){if(C=ae,(C.flags&2048)!==0)try{switch(C.tag){case 0:case 11:case 15:du(9,C)}}catch(he){ot(C,C.return,he)}if(C===w){ae=null;break e}var J=C.sibling;if(J!==null){J.return=C.return,ae=J;break e}ae=C.return}}if(Ue=d,ns(),Zt&&typeof Zt.onPostCommitFiberRoot=="function")try{Zt.onPostCommitFiberRoot(Fs,n)}catch{}c=!0}return c}finally{Me=a,yn.transition=s}}return!1}function rg(n,s,a){s=so(a,s),s=Em(n,s,1),n=ss(n,s,1),s=qt(),n!==null&&($s(n,1,s),Qt(n,s))}function ot(n,s,a){if(n.tag===3)rg(n,n,a);else for(;s!==null;){if(s.tag===3){rg(s,n,a);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(os===null||!os.has(c))){n=so(a,n),n=xm(s,n,1),s=ss(s,n,1),n=qt(),s!==null&&($s(s,1,n),Qt(s,n));break}}s=s.return}}function Mw(n,s,a){var c=n.pingCache;c!==null&&c.delete(s),s=qt(),n.pingedLanes|=n.suspendedLanes&a,Tt===n&&(Nt&a)===a&&(wt===4||wt===3&&(Nt&130023424)===Nt&&500>Je()-Gh?ri(n,0):Wh|=a),Qt(n,s)}function sg(n,s){s===0&&((n.mode&1)===0?s=1:(s=Wr,Wr<<=1,(Wr&130023424)===0&&(Wr=4194304)));var a=qt();n=xr(n,s),n!==null&&($s(n,s,a),Qt(n,a))}function jw(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),sg(n,a)}function Fw(n,s){var a=0;switch(n.tag){case 13:var c=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(s),sg(n,a)}var ig;ig=function(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps||Ht.current)Gt=!0;else{if((n.lanes&a)===0&&(s.flags&128)===0)return Gt=!1,Aw(n,s,a);Gt=(n.flags&131072)!==0}else Gt=!1,tt&&(s.flags&1048576)!==0&&jp(s,Ql,s.index);switch(s.lanes=0,s.tag){case 2:var c=s.type;cu(n,s),n=s.pendingProps;var d=Yi(s,Vt.current);no(s,a),d=Ih(null,s,c,n,d,a);var f=Sh();return s.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Wt(c)?(f=!0,Wl(s)):f=!1,s.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,yh(s),d.updater=lu,s.stateNode=d,d._reactInternals=s,Ph(s,c,n,a),s=Lh(null,s,c,!0,f,a)):(s.tag=0,tt&&f&&ah(s),$t(null,s,d,a),s=s.child),s;case 16:c=s.elementType;e:{switch(cu(n,s),n=s.pendingProps,d=c._init,c=d(c._payload),s.type=c,d=s.tag=zw(c),n=Nn(c,n),d){case 0:s=Vh(null,s,c,n,a);break e;case 1:s=Pm(null,s,c,n,a);break e;case 11:s=Am(null,s,c,n,a);break e;case 14:s=km(null,s,c,Nn(c.type,n),a);break e}throw Error(t(306,c,""))}return s;case 0:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Nn(c,d),Vh(n,s,c,d,a);case 1:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Nn(c,d),Pm(n,s,c,d,a);case 3:e:{if(bm(s),n===null)throw Error(t(387));c=s.pendingProps,f=s.memoizedState,d=f.element,Gp(n,s),tu(s,c,null,a);var w=s.memoizedState;if(c=w.element,f.isDehydrated)if(f={element:c,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},s.updateQueue.baseState=f,s.memoizedState=f,s.flags&256){d=so(Error(t(423)),s),s=Dm(n,s,c,a,d);break e}else if(c!==d){d=so(Error(t(424)),s),s=Dm(n,s,c,a,d);break e}else for(an=Zr(s.stateNode.containerInfo.firstChild),on=s,tt=!0,Cn=null,a=Hp(s,null,c,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Zi(),c===d){s=Ir(n,s,a);break e}$t(n,s,c,a)}s=s.child}return s;case 5:return Yp(s),n===null&&ch(s),c=s.type,d=s.pendingProps,f=n!==null?n.memoizedProps:null,w=d.children,th(c,d)?w=null:f!==null&&th(c,f)&&(s.flags|=32),Rm(n,s),$t(n,s,w,a),s.child;case 6:return n===null&&ch(s),null;case 13:return Vm(n,s,a);case 4:return _h(s,s.stateNode.containerInfo),c=s.pendingProps,n===null?s.child=eo(s,null,c,a):$t(n,s,c,a),s.child;case 11:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Nn(c,d),Am(n,s,c,d,a);case 7:return $t(n,s,s.pendingProps,a),s.child;case 8:return $t(n,s,s.pendingProps.children,a),s.child;case 12:return $t(n,s,s.pendingProps.children,a),s.child;case 10:e:{if(c=s.type._context,d=s.pendingProps,f=s.memoizedProps,w=d.value,Qe(Xl,c._currentValue),c._currentValue=w,f!==null)if(kn(f.value,w)){if(f.children===d.children&&!Ht.current){s=Ir(n,s,a);break e}}else for(f=s.child,f!==null&&(f.return=s);f!==null;){var C=f.dependencies;if(C!==null){w=f.child;for(var D=C.firstContext;D!==null;){if(D.context===c){if(f.tag===1){D=Tr(-1,a&-a),D.tag=2;var U=f.updateQueue;if(U!==null){U=U.shared;var Q=U.pending;Q===null?D.next=D:(D.next=Q.next,Q.next=D),U.pending=D}}f.lanes|=a,D=f.alternate,D!==null&&(D.lanes|=a),mh(f.return,a,s),C.lanes|=a;break}D=D.next}}else if(f.tag===10)w=f.type===s.type?null:f.child;else if(f.tag===18){if(w=f.return,w===null)throw Error(t(341));w.lanes|=a,C=w.alternate,C!==null&&(C.lanes|=a),mh(w,a,s),w=f.sibling}else w=f.child;if(w!==null)w.return=f;else for(w=f;w!==null;){if(w===s){w=null;break}if(f=w.sibling,f!==null){f.return=w.return,w=f;break}w=w.return}f=w}$t(n,s,d.children,a),s=s.child}return s;case 9:return d=s.type,c=s.pendingProps.children,no(s,a),d=mn(d),c=c(d),s.flags|=1,$t(n,s,c,a),s.child;case 14:return c=s.type,d=Nn(c,s.pendingProps),d=Nn(c.type,d),km(n,s,c,d,a);case 15:return Cm(n,s,s.type,s.pendingProps,a);case 17:return c=s.type,d=s.pendingProps,d=s.elementType===c?d:Nn(c,d),cu(n,s),s.tag=1,Wt(c)?(n=!0,Wl(s)):n=!1,no(s,a),vm(s,c,d),Ph(s,c,d,a),Lh(null,s,c,!0,n,a);case 19:return Om(n,s,a);case 22:return Nm(n,s,a)}throw Error(t(156,s.tag))};function og(n,s){return Go(n,s)}function Uw(n,s,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _n(n,s,a,c){return new Uw(n,s,a,c)}function td(n){return n=n.prototype,!(!n||!n.isReactComponent)}function zw(n){if(typeof n=="function")return td(n)?1:0;if(n!=null){if(n=n.$$typeof,n===R)return 11;if(n===Ce)return 14}return 2}function cs(n,s){var a=n.alternate;return a===null?(a=_n(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function Eu(n,s,a,c,d,f){var w=2;if(c=n,typeof n=="function")td(n)&&(w=1);else if(typeof n=="string")w=5;else e:switch(n){case N:return ii(a.children,d,f,s);case T:w=8,d|=8;break;case A:return n=_n(12,a,s,d|2),n.elementType=A,n.lanes=f,n;case S:return n=_n(13,a,s,d),n.elementType=S,n.lanes=f,n;case te:return n=_n(19,a,s,d),n.elementType=te,n.lanes=f,n;case ze:return xu(a,d,f,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case P:w=10;break e;case b:w=9;break e;case R:w=11;break e;case Ce:w=14;break e;case Ne:w=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return s=_n(w,a,s,d),s.elementType=n,s.type=c,s.lanes=f,s}function ii(n,s,a,c){return n=_n(7,n,c,s),n.lanes=a,n}function xu(n,s,a,c){return n=_n(22,n,c,s),n.elementType=ze,n.lanes=a,n.stateNode={isHidden:!1},n}function nd(n,s,a){return n=_n(6,n,null,s),n.lanes=a,n}function rd(n,s,a){return s=_n(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function Bw(n,s,a,c,d){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xo(0),this.expirationTimes=Xo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xo(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function sd(n,s,a,c,d,f,w,C,D){return n=new Bw(n,s,a,C,D),s===1?(s=1,f===!0&&(s|=8)):s=0,f=_n(3,null,null,s),n.current=f,f.stateNode=n,f.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},yh(f),n}function $w(n,s,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ye,key:c==null?null:""+c,children:n,containerInfo:s,implementation:a}}function ag(n){if(!n)return ts;n=n._reactInternals;e:{if(Sn(n)!==n||n.tag!==1)throw Error(t(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Wt(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(Wt(a))return Lp(n,a,s)}return s}function lg(n,s,a,c,d,f,w,C,D){return n=sd(a,c,!0,n,d,f,w,C,D),n.context=ag(null),a=n.current,c=qt(),d=ls(a),f=Tr(c,d),f.callback=s??null,ss(a,f,d),n.current.lanes=d,$s(n,d,c),Qt(n,c),n}function Tu(n,s,a,c){var d=s.current,f=qt(),w=ls(d);return a=ag(a),s.context===null?s.context=a:s.pendingContext=a,s=Tr(f,w),s.payload={element:n},c=c===void 0?null:c,c!==null&&(s.callback=c),n=ss(d,s,w),n!==null&&(bn(n,d,w,f),eu(n,d,w)),w}function Iu(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function ug(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function id(n,s){ug(n,s),(n=n.alternate)&&ug(n,s)}function qw(){return null}var cg=typeof reportError=="function"?reportError:function(n){console.error(n)};function od(n){this._internalRoot=n}Su.prototype.render=od.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(t(409));Tu(n,s,null,null)},Su.prototype.unmount=od.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;ni(function(){Tu(null,n,null,null)}),s[_r]=null}};function Su(n){this._internalRoot=n}Su.prototype.unstable_scheduleHydration=function(n){if(n){var s=na();n={blockedOn:null,target:n,priority:s};for(var a=0;a<tn.length&&s!==0&&s<tn[a].priority;a++);tn.splice(a,0,n),a===0&&Vi(n)}};function ad(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Au(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function hg(){}function Hw(n,s,a,c,d){if(d){if(typeof c=="function"){var f=c;c=function(){var U=Iu(w);f.call(U)}}var w=lg(s,c,n,0,null,!1,!1,"",hg);return n._reactRootContainer=w,n[_r]=w.current,pa(n.nodeType===8?n.parentNode:n),ni(),w}for(;d=n.lastChild;)n.removeChild(d);if(typeof c=="function"){var C=c;c=function(){var U=Iu(D);C.call(U)}}var D=sd(n,0,!1,null,null,!1,!1,"",hg);return n._reactRootContainer=D,n[_r]=D.current,pa(n.nodeType===8?n.parentNode:n),ni(function(){Tu(s,D,a,c)}),D}function ku(n,s,a,c,d){var f=a._reactRootContainer;if(f){var w=f;if(typeof d=="function"){var C=d;d=function(){var D=Iu(w);C.call(D)}}Tu(s,w,n,d)}else w=Hw(a,s,n,d,c);return Iu(w)}ea=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var a=$e(s.pendingLanes);a!==0&&(Zo(s,a|1),Qt(s,Je()),(Ue&6)===0&&(ao=Je()+500,ns()))}break;case 13:ni(function(){var c=xr(n,1);if(c!==null){var d=qt();bn(c,n,1,d)}}),id(n,1)}},bi=function(n){if(n.tag===13){var s=xr(n,134217728);if(s!==null){var a=qt();bn(s,n,134217728,a)}id(n,134217728)}},ta=function(n){if(n.tag===13){var s=ls(n),a=xr(n,s);if(a!==null){var c=qt();bn(a,n,s,c)}id(n,s)}},na=function(){return Me},ra=function(n,s){var a=Me;try{return Me=n,s()}finally{Me=a}},lr=function(n,s,a){switch(s){case"input":if(Ds(n,a),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var c=a[s];if(c!==n&&c.form===n.form){var d=ql(c);if(!d)throw Error(t(90));jo(c),Ds(c,d)}}}break;case"textarea":ml(n,a);break;case"select":s=a.value,s!=null&&Tn(n,!!a.multiple,s,!1)}},_l=Xh,vl=ni;var Ww={usingClientEntryPoint:!1,Events:[ya,Ki,ql,Br,$r,Xh]},Pa={findFiberByHostInstance:Ks,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Gw={bundleType:Pa.bundleType,version:Pa.version,rendererPackageName:Pa.rendererPackageName,rendererConfig:Pa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:we.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Al(n),n===null?null:n.stateNode},findFiberByHostInstance:Pa.findFiberByHostInstance||qw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cu.isDisabled&&Cu.supportsFiber)try{Fs=Cu.inject(Gw),Zt=Cu}catch{}}return Yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ww,Yt.createPortal=function(n,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ad(s))throw Error(t(200));return $w(n,s,null,a)},Yt.createRoot=function(n,s){if(!ad(n))throw Error(t(299));var a=!1,c="",d=cg;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onRecoverableError!==void 0&&(d=s.onRecoverableError)),s=sd(n,1,!1,null,null,a,!1,c,d),n[_r]=s.current,pa(n.nodeType===8?n.parentNode:n),new od(s)},Yt.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Al(s),n=n===null?null:n.stateNode,n},Yt.flushSync=function(n){return ni(n)},Yt.hydrate=function(n,s,a){if(!Au(s))throw Error(t(200));return ku(null,n,s,!0,a)},Yt.hydrateRoot=function(n,s,a){if(!ad(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,d=!1,f="",w=cg;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),s=lg(s,null,n,1,a??null,d,!1,f,w),n[_r]=s.current,pa(n),c)for(n=0;n<c.length;n++)a=c[n],d=a._getVersion,d=d(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,d]:s.mutableSourceEagerHydrationData.push(a,d);return new Su(s)},Yt.render=function(n,s,a){if(!Au(s))throw Error(t(200));return ku(null,n,s,!1,a)},Yt.unmountComponentAtNode=function(n){if(!Au(n))throw Error(t(40));return n._reactRootContainer?(ni(function(){ku(null,null,n,!1,function(){n._reactRootContainer=null,n[_r]=null})}),!0):!1},Yt.unstable_batchedUpdates=Xh,Yt.unstable_renderSubtreeIntoContainer=function(n,s,a,c){if(!Au(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return ku(n,s,a,!1,c)},Yt.version="18.3.1-next-f1338f8080-20240426",Yt}var vg;function tE(){if(vg)return cd.exports;vg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),cd.exports=eE(),cd.exports}var wg;function nE(){if(wg)return Nu;wg=1;var r=tE();return Nu.createRoot=r.createRoot,Nu.hydrateRoot=r.hydrateRoot,Nu}var rE=nE();const sE=()=>{};var Eg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},iE=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const o=r[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],h=r[t++],m=r[t++],y=((o&7)<<18|(l&63)<<12|(h&63)<<6|m&63)-65536;e[i++]=String.fromCharCode(55296+(y>>10)),e[i++]=String.fromCharCode(56320+(y&1023))}else{const l=r[t++],h=r[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},o0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){const l=r[o],h=o+1<r.length,m=h?r[o+1]:0,y=o+2<r.length,v=y?r[o+2]:0,E=l>>2,I=(l&3)<<4|m>>4;let k=(m&15)<<2|v>>6,F=v&63;y||(F=64,h||(k=64)),i.push(t[E],t[I],t[k],t[F])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(i0(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):iE(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],m=o<r.length?t[r.charAt(o)]:0;++o;const v=o<r.length?t[r.charAt(o)]:64;++o;const I=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||m==null||v==null||I==null)throw new oE;const k=l<<2|m>>4;if(i.push(k),v!==64){const F=m<<4&240|v>>2;if(i.push(F),I!==64){const B=v<<6&192|I;i.push(B)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class oE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const aE=function(r){const e=i0(r);return o0.encodeByteArray(e,!0)},Ku=function(r){return aE(r).replace(/\./g,"")},a0=function(r){try{return o0.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE=()=>lE().__FIREBASE_DEFAULTS__,cE=()=>{if(typeof process>"u"||typeof Eg>"u")return;const r=Eg.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},hE=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&a0(r[1]);return e&&JSON.parse(e)},pc=()=>{try{return sE()||uE()||cE()||hE()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},l0=r=>{var e,t;return(t=(e=pc())==null?void 0:e.emulatorHosts)==null?void 0:t[r]},dE=r=>{const e=l0(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},u0=()=>{var r;return(r=pc())==null?void 0:r.config},c0=r=>{var e;return(e=pc())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function No(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function h0(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pE(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Ku(JSON.stringify(t)),Ku(JSON.stringify(h)),""].join(".")}const Ua={};function mE(){const r={prod:[],emulator:[]};for(const e of Object.keys(Ua))Ua[e]?r.emulator.push(e):r.prod.push(e);return r}function gE(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let xg=!1;function d0(r,e){if(typeof window>"u"||typeof document>"u"||!No(window.location.host)||Ua[r]===e||Ua[r]||xg)return;Ua[r]=e;function t(k){return`__firebase__banner__${k}`}const i="__firebase__banner",l=mE().prod.length>0;function h(){const k=document.getElementById(i);k&&k.remove()}function m(k){k.style.display="flex",k.style.background="#7faaf0",k.style.position="fixed",k.style.bottom="5px",k.style.left="5px",k.style.padding=".5em",k.style.borderRadius="5px",k.style.alignItems="center"}function y(k,F){k.setAttribute("width","24"),k.setAttribute("id",F),k.setAttribute("height","24"),k.setAttribute("viewBox","0 0 24 24"),k.setAttribute("fill","none"),k.style.marginLeft="-6px"}function v(){const k=document.createElement("span");return k.style.cursor="pointer",k.style.marginLeft="16px",k.style.fontSize="24px",k.innerHTML=" &times;",k.onclick=()=>{xg=!0,h()},k}function E(k,F){k.setAttribute("id",F),k.innerText="Learn more",k.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",k.setAttribute("target","__blank"),k.style.paddingLeft="5px",k.style.textDecoration="underline"}function I(){const k=gE(i),F=t("text"),B=document.getElementById(F)||document.createElement("span"),$=t("learnmore"),q=document.getElementById($)||document.createElement("a"),ce=t("preprendIcon"),ee=document.getElementById(ce)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(k.created){const Z=k.element;m(Z),E(q,$);const we=v();y(ee,ce),Z.append(ee,B,q,we),document.body.appendChild(Z)}l?(B.innerText="Preview backend disconnected.",ee.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ee.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,B.innerText="Preview backend running in this workspace."),B.setAttribute("id",F)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",I):I()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function yE(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(zt())}function _E(){var e;const r=(e=pc())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function vE(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function wE(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function EE(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function xE(){const r=zt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function TE(){return!_E()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function IE(){try{return typeof indexedDB=="object"}catch{return!1}}function SE(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AE="FirebaseError";class Lr extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=AE,Object.setPrototypeOf(this,Lr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,nl.prototype.create)}}class nl{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?kE(l,i):"Error",m=`${this.serviceName}: ${h} (${o}).`;return new Lr(o,m,i)}}function kE(r,e){return r.replace(CE,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const CE=/\{\$([^}]+)}/g;function NE(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function ui(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=r[o],h=e[o];if(Tg(l)&&Tg(h)){if(!ui(l,h))return!1}else if(l!==h)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function Tg(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rl(r){const e=[];for(const[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Va(r){const e={};return r.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,l]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function La(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function RE(r,e){const t=new PE(r,e);return t.subscribe.bind(t)}class PE{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");bE(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=fd),o.error===void 0&&(o.error=fd),o.complete===void 0&&(o.complete=fd);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function bE(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function fd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ht(r){return r&&r._delegate?r._delegate:r}class ci{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new fE;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(LE(e))try{this.getOrInitializeService({instanceIdentifier:oi})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=oi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=oi){return this.instances.has(e)}getOptions(e=oi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,h]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(l);i===m&&h.resolve(o)}return o}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const l=this.instances.get(i);return l&&e(l,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:VE(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=oi){return this.component?this.component.multipleInstances?e:oi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function VE(r){return r===oi?void 0:r}function LE(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new DE(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ve;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ve||(Ve={}));const ME={debug:Ve.DEBUG,verbose:Ve.VERBOSE,info:Ve.INFO,warn:Ve.WARN,error:Ve.ERROR,silent:Ve.SILENT},jE=Ve.INFO,FE={[Ve.DEBUG]:"log",[Ve.VERBOSE]:"log",[Ve.INFO]:"info",[Ve.WARN]:"warn",[Ve.ERROR]:"error"},UE=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),o=FE[e];if(o)console[o](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class rf{constructor(e){this.name=e,this._logLevel=jE,this._logHandler=UE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ME[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ve.DEBUG,...e),this._logHandler(this,Ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ve.VERBOSE,...e),this._logHandler(this,Ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ve.INFO,...e),this._logHandler(this,Ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ve.WARN,...e),this._logHandler(this,Ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ve.ERROR,...e),this._logHandler(this,Ve.ERROR,...e)}}const zE=(r,e)=>e.some(t=>r instanceof t);let Ig,Sg;function BE(){return Ig||(Ig=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $E(){return Sg||(Sg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const f0=new WeakMap,kd=new WeakMap,p0=new WeakMap,pd=new WeakMap,sf=new WeakMap;function qE(r){const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",h)},l=()=>{t(_s(r.result)),o()},h=()=>{i(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&f0.set(t,r)}).catch(()=>{}),sf.set(e,r),e}function HE(r){if(kd.has(r))return;const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",h),r.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",h),r.addEventListener("abort",h)});kd.set(r,e)}let Cd={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return kd.get(r);if(e==="objectStoreNames")return r.objectStoreNames||p0.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return _s(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function WE(r){Cd=r(Cd)}function GE(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(md(this),e,...t);return p0.set(i,e.sort?e.sort():[e]),_s(i)}:$E().includes(r)?function(...e){return r.apply(md(this),e),_s(f0.get(this))}:function(...e){return _s(r.apply(md(this),e))}}function KE(r){return typeof r=="function"?GE(r):(r instanceof IDBTransaction&&HE(r),zE(r,BE())?new Proxy(r,Cd):r)}function _s(r){if(r instanceof IDBRequest)return qE(r);if(pd.has(r))return pd.get(r);const e=KE(r);return e!==r&&(pd.set(r,e),sf.set(e,r)),e}const md=r=>sf.get(r);function QE(r,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const h=indexedDB.open(r,e),m=_s(h);return i&&h.addEventListener("upgradeneeded",y=>{i(_s(h.result),y.oldVersion,y.newVersion,_s(h.transaction),y)}),t&&h.addEventListener("blocked",y=>t(y.oldVersion,y.newVersion,y)),m.then(y=>{l&&y.addEventListener("close",()=>l()),o&&y.addEventListener("versionchange",v=>o(v.oldVersion,v.newVersion,v))}).catch(()=>{}),m}const YE=["get","getKey","getAll","getAllKeys","count"],JE=["put","add","delete","clear"],gd=new Map;function Ag(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(gd.get(e))return gd.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=JE.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||YE.includes(t)))return;const l=async function(h,...m){const y=this.transaction(h,o?"readwrite":"readonly");let v=y.store;return i&&(v=v.index(m.shift())),(await Promise.all([v[t](...m),o&&y.done]))[0]};return gd.set(e,l),l}WE(r=>({...r,get:(e,t,i)=>Ag(e,t)||r.get(e,t,i),has:(e,t)=>!!Ag(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(ZE(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function ZE(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Nd="@firebase/app",kg="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rr=new rf("@firebase/app"),e1="@firebase/app-compat",t1="@firebase/analytics-compat",n1="@firebase/analytics",r1="@firebase/app-check-compat",s1="@firebase/app-check",i1="@firebase/auth",o1="@firebase/auth-compat",a1="@firebase/database",l1="@firebase/data-connect",u1="@firebase/database-compat",c1="@firebase/functions",h1="@firebase/functions-compat",d1="@firebase/installations",f1="@firebase/installations-compat",p1="@firebase/messaging",m1="@firebase/messaging-compat",g1="@firebase/performance",y1="@firebase/performance-compat",_1="@firebase/remote-config",v1="@firebase/remote-config-compat",w1="@firebase/storage",E1="@firebase/storage-compat",x1="@firebase/firestore",T1="@firebase/ai",I1="@firebase/firestore-compat",S1="firebase",A1="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rd="[DEFAULT]",k1={[Nd]:"fire-core",[e1]:"fire-core-compat",[n1]:"fire-analytics",[t1]:"fire-analytics-compat",[s1]:"fire-app-check",[r1]:"fire-app-check-compat",[i1]:"fire-auth",[o1]:"fire-auth-compat",[a1]:"fire-rtdb",[l1]:"fire-data-connect",[u1]:"fire-rtdb-compat",[c1]:"fire-fn",[h1]:"fire-fn-compat",[d1]:"fire-iid",[f1]:"fire-iid-compat",[p1]:"fire-fcm",[m1]:"fire-fcm-compat",[g1]:"fire-perf",[y1]:"fire-perf-compat",[_1]:"fire-rc",[v1]:"fire-rc-compat",[w1]:"fire-gcs",[E1]:"fire-gcs-compat",[x1]:"fire-fst",[I1]:"fire-fst-compat",[T1]:"fire-vertex","fire-js":"fire-js",[S1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qu=new Map,C1=new Map,Pd=new Map;function Cg(r,e){try{r.container.addComponent(e)}catch(t){Rr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function xo(r){const e=r.name;if(Pd.has(e))return Rr.debug(`There were multiple attempts to register component ${e}.`),!1;Pd.set(e,r);for(const t of Qu.values())Cg(t,r);for(const t of C1.values())Cg(t,r);return!0}function of(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function vn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},vs=new nl("app","Firebase",N1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ci("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ro=A1;function m0(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i={name:Rd,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw vs.create("bad-app-name",{appName:String(o)});if(t||(t=u0()),!t)throw vs.create("no-options");const l=Qu.get(o);if(l){if(ui(t,l.options)&&ui(i,l.config))return l;throw vs.create("duplicate-app",{appName:o})}const h=new OE(o);for(const y of Pd.values())h.addComponent(y);const m=new R1(t,i,h);return Qu.set(o,m),m}function g0(r=Rd){const e=Qu.get(r);if(!e&&r===Rd&&u0())return m0();if(!e)throw vs.create("no-app",{appName:r});return e}function ws(r,e,t){let i=k1[r]??r;t&&(i+=`-${t}`);const o=i.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const h=[`Unable to register library "${i}" with version "${e}":`];o&&h.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&l&&h.push("and"),l&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Rr.warn(h.join(" "));return}xo(new ci(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P1="firebase-heartbeat-database",b1=1,Wa="firebase-heartbeat-store";let yd=null;function y0(){return yd||(yd=QE(P1,b1,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Wa)}catch(t){console.warn(t)}}}}).catch(r=>{throw vs.create("idb-open",{originalErrorMessage:r.message})})),yd}async function D1(r){try{const t=(await y0()).transaction(Wa),i=await t.objectStore(Wa).get(_0(r));return await t.done,i}catch(e){if(e instanceof Lr)Rr.warn(e.message);else{const t=vs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Rr.warn(t.message)}}}async function Ng(r,e){try{const i=(await y0()).transaction(Wa,"readwrite");await i.objectStore(Wa).put(e,_0(r)),await i.done}catch(t){if(t instanceof Lr)Rr.warn(t.message);else{const i=vs.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Rr.warn(i.message)}}}function _0(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1=1024,L1=30;class O1{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new j1(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Rg();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>L1){const h=F1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Rr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Rg(),{heartbeatsToSend:i,unsentEntries:o}=M1(this._heartbeatsCache.heartbeats),l=Ku(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Rr.warn(t),""}}}function Rg(){return new Date().toISOString().substring(0,10)}function M1(r,e=V1){const t=[];let i=r.slice();for(const o of r){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),Pg(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Pg(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class j1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return IE()?SE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await D1(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Ng(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Ng(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Pg(r){return Ku(JSON.stringify({version:2,heartbeats:r})).length}function F1(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let i=1;i<r.length;i++)r[i].date<t&&(t=r[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U1(r){xo(new ci("platform-logger",e=>new XE(e),"PRIVATE")),xo(new ci("heartbeat",e=>new O1(e),"PRIVATE")),ws(Nd,kg,r),ws(Nd,kg,"esm2020"),ws("fire-js","")}U1("");function v0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const z1=v0,w0=new nl("auth","Firebase",v0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yu=new rf("@firebase/auth");function B1(r,...e){Yu.logLevel<=Ve.WARN&&Yu.warn(`Auth (${Ro}): ${r}`,...e)}function Mu(r,...e){Yu.logLevel<=Ve.ERROR&&Yu.error(`Auth (${Ro}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ln(r,...e){throw af(r,...e)}function nr(r,...e){return af(r,...e)}function E0(r,e,t){const i={...z1(),[e]:t};return new nl("auth","Firebase",i).create(e,{appName:r.name})}function Cr(r){return E0(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function af(r,...e){if(typeof r!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return w0.create(r,...e)}function _e(r,e,...t){if(!r)throw af(e,...t)}function Ar(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Mu(e),new Error(e)}function Pr(r,e){r||Ar(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bd(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function $1(){return bg()==="http:"||bg()==="https:"}function bg(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&($1()||wE()||"connection"in navigator)?navigator.onLine:!0}function H1(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(e,t){this.shortDelay=e,this.longDelay=t,Pr(t>e,"Short delay should be less than long delay!"),this.isMobile=yE()||EE()}get(){return q1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lf(r,e){Pr(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ar("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ar("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ar("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],K1=new sl(3e4,6e4);function Ns(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Rs(r,e,t,i,o={}){return T0(r,o,async()=>{let l={},h={};i&&(e==="GET"?h=i:l={body:JSON.stringify(i)});const m=rl({key:r.config.apiKey,...h}).slice(1),y=await r._getAdditionalHeaders();y["Content-Type"]="application/json",r.languageCode&&(y["X-Firebase-Locale"]=r.languageCode);const v={method:e,headers:y,...l};return vE()||(v.referrerPolicy="no-referrer"),r.emulatorConfig&&No(r.emulatorConfig.host)&&(v.credentials="include"),x0.fetch()(await I0(r,r.config.apiHost,t,m),v)})}async function T0(r,e,t){r._canInitEmulator=!1;const i={...W1,...e};try{const o=new Y1(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw Ru(r,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const m=l.ok?h.errorMessage:h.error.message,[y,v]=m.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ru(r,"credential-already-in-use",h);if(y==="EMAIL_EXISTS")throw Ru(r,"email-already-in-use",h);if(y==="USER_DISABLED")throw Ru(r,"user-disabled",h);const E=i[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw E0(r,E,v);Ln(r,E)}}catch(o){if(o instanceof Lr)throw o;Ln(r,"network-request-failed",{message:String(o)})}}async function il(r,e,t,i,o={}){const l=await Rs(r,e,t,i,o);return"mfaPendingCredential"in l&&Ln(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function I0(r,e,t,i){const o=`${e}${t}?${i}`,l=r,h=l.config.emulator?lf(r.config,o):`${r.config.apiScheme}://${o}`;return G1.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(h).toString():h}function Q1(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Y1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(nr(this.auth,"network-request-failed")),K1.get())})}}function Ru(r,e,t){const i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=nr(r,e,i);return o.customData._tokenResponse=t,o}function Dg(r){return r!==void 0&&r.enterprise!==void 0}class J1{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Q1(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function X1(r,e){return Rs(r,"GET","/v2/recaptchaConfig",Ns(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z1(r,e){return Rs(r,"POST","/v1/accounts:delete",e)}async function Ju(r,e){return Rs(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function za(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ex(r,e=!1){const t=ht(r),i=await t.getIdToken(e),o=uf(i);_e(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l==null?void 0:l.sign_in_provider;return{claims:o,token:i,authTime:za(_d(o.auth_time)),issuedAtTime:za(_d(o.iat)),expirationTime:za(_d(o.exp)),signInProvider:h||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function _d(r){return Number(r)*1e3}function uf(r){const[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return Mu("JWT malformed, contained fewer than 3 sections"),null;try{const o=a0(t);return o?JSON.parse(o):(Mu("Failed to decode base64 JWT payload"),null)}catch(o){return Mu("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Vg(r){const e=uf(r);return _e(e,"internal-error"),_e(typeof e.exp<"u","internal-error"),_e(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ga(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Lr&&tx(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function tx({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=za(this.lastLoginAt),this.creationTime=za(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xu(r){var I;const e=r.auth,t=await r.getIdToken(),i=await Ga(r,Ju(e,{idToken:t}));_e(i==null?void 0:i.users.length,e,"internal-error");const o=i.users[0];r._notifyReloadListener(o);const l=(I=o.providerUserInfo)!=null&&I.length?S0(o.providerUserInfo):[],h=sx(r.providerData,l),m=r.isAnonymous,y=!(r.email&&o.passwordHash)&&!(h!=null&&h.length),v=m?y:!1,E={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new Dd(o.createdAt,o.lastLoginAt),isAnonymous:v};Object.assign(r,E)}async function rx(r){const e=ht(r);await Xu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function sx(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function S0(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ix(r,e){const t=await T0(r,{},async()=>{const i=rl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,h=await I0(r,o,"/v1/token",`key=${l}`),m=await r._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const y={method:"POST",headers:m,body:i};return r.emulatorConfig&&No(r.emulatorConfig.host)&&(y.credentials="include"),x0.fetch()(h,y)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function ox(r,e){return Rs(r,"POST","/v2/accounts:revokeToken",Ns(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_e(e.idToken,"internal-error"),_e(typeof e.idToken<"u","internal-error"),_e(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Vg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){_e(e.length!==0,"internal-error");const t=Vg(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(_e(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await ix(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,h=new mo;return i&&(_e(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),o&&(_e(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(_e(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new mo,this.toJSON())}_performRefresh(){return Ar("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ds(r,e){_e(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Dn{constructor({uid:e,auth:t,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new nx(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Dd(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Ga(this,this.stsTokenManager.getToken(this.auth,e));return _e(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return ex(this,e)}reload(){return rx(this)}_assign(e){this!==e&&(_e(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Dn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){_e(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Xu(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(vn(this.auth.app))return Promise.reject(Cr(this.auth));const e=await this.getIdToken();return await Ga(this,Z1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,h=t.photoURL??void 0,m=t.tenantId??void 0,y=t._redirectEventId??void 0,v=t.createdAt??void 0,E=t.lastLoginAt??void 0,{uid:I,emailVerified:k,isAnonymous:F,providerData:B,stsTokenManager:$}=t;_e(I&&$,e,"internal-error");const q=mo.fromJSON(this.name,$);_e(typeof I=="string",e,"internal-error"),ds(i,e.name),ds(o,e.name),_e(typeof k=="boolean",e,"internal-error"),_e(typeof F=="boolean",e,"internal-error"),ds(l,e.name),ds(h,e.name),ds(m,e.name),ds(y,e.name),ds(v,e.name),ds(E,e.name);const ce=new Dn({uid:I,auth:e,email:o,emailVerified:k,displayName:i,isAnonymous:F,photoURL:h,phoneNumber:l,tenantId:m,stsTokenManager:q,createdAt:v,lastLoginAt:E});return B&&Array.isArray(B)&&(ce.providerData=B.map(ee=>({...ee}))),y&&(ce._redirectEventId=y),ce}static async _fromIdTokenResponse(e,t,i=!1){const o=new mo;o.updateFromServerResponse(t);const l=new Dn({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Xu(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];_e(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?S0(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),m=new mo;m.updateFromIdToken(i);const y=new Dn({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:h}),v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Dd(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(y,v),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lg=new Map;function kr(r){Pr(r instanceof Function,"Expected a class definition");let e=Lg.get(r);return e?(Pr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Lg.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}A0.type="NONE";const Og=A0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ju(r,e,t){return`firebase:${r}:${e}:${t}`}class go{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=ju(this.userKey,o.apiKey,l),this.fullPersistenceKey=ju("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Ju(this.auth,{idToken:e}).catch(()=>{});return t?Dn._fromGetAccountInfoResponse(this.auth,t,e):null}return Dn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new go(kr(Og),e,i);const o=(await Promise.all(t.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let l=o[0]||kr(Og);const h=ju(i,e.config.apiKey,e.name);let m=null;for(const v of t)try{const E=await v._get(h);if(E){let I;if(typeof E=="string"){const k=await Ju(e,{idToken:E}).catch(()=>{});if(!k)break;I=await Dn._fromGetAccountInfoResponse(e,k,E)}else I=Dn._fromJSON(e,E);v!==l&&(m=I),l=v;break}}catch{}const y=o.filter(v=>v._shouldAllowMigration);return!l._shouldAllowMigration||!y.length?new go(l,e,i):(l=y[0],m&&await l._set(h,m.toJSON()),await Promise.all(t.map(async v=>{if(v!==l)try{await v._remove(h)}catch{}})),new go(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mg(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(R0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(k0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(b0(e))return"Blackberry";if(D0(e))return"Webos";if(C0(e))return"Safari";if((e.includes("chrome/")||N0(e))&&!e.includes("edge/"))return"Chrome";if(P0(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function k0(r=zt()){return/firefox\//i.test(r)}function C0(r=zt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function N0(r=zt()){return/crios\//i.test(r)}function R0(r=zt()){return/iemobile/i.test(r)}function P0(r=zt()){return/android/i.test(r)}function b0(r=zt()){return/blackberry/i.test(r)}function D0(r=zt()){return/webos/i.test(r)}function cf(r=zt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function ax(r=zt()){var e;return cf(r)&&!!((e=window.navigator)!=null&&e.standalone)}function lx(){return xE()&&document.documentMode===10}function V0(r=zt()){return cf(r)||P0(r)||D0(r)||b0(r)||/windows phone/i.test(r)||R0(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L0(r,e=[]){let t;switch(r){case"Browser":t=Mg(zt());break;case"Worker":t=`${Mg(zt())}-${r}`;break;default:t=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ro}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((h,m)=>{try{const y=e(l);h(y)}catch(y){m(y)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cx(r,e={}){return Rs(r,"GET","/v2/passwordPolicy",Ns(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hx=6;class dx{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??hx,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new jg(this),this.idTokenSubscription=new jg(this),this.beforeStateQueue=new ux(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=w0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=kr(t)),this._initializationPromise=this.queue(async()=>{var i,o,l;if(!this._deleted&&(this.persistenceManager=await go.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Ju(this,{idToken:e}),i=await Dn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(vn(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(m,m))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(l=this.redirectUser)==null?void 0:l._redirectEventId,m=i==null?void 0:i._redirectEventId,y=await this.tryRedirectSignIn(e);(!h||h===m)&&(y!=null&&y.user)&&(i=y.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(h){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return _e(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Xu(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=H1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(vn(this.app))return Promise.reject(Cr(this));const t=e?ht(e):null;return t&&_e(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&_e(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return vn(this.app)?Promise.reject(Cr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return vn(this.app)?Promise.reject(Cr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(kr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await cx(this),t=new dx(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new nl("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await ox(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&kr(e)||this._popupRedirectResolver;_e(t,this,"argument-error"),this.redirectPersistenceManager=await go.create(this,[kr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(_e(m,this,"internal-error"),m.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const y=e.addObserver(t,i,o);return()=>{h=!0,y()}}else{const y=e.addObserver(t);return()=>{h=!0,y()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _e(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=L0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(vn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&B1(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function gi(r){return ht(r)}class jg{constructor(e){this.auth=e,this.observer=null,this.addObserver=RE(t=>this.observer=t)}get next(){return _e(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function px(r){mc=r}function O0(r){return mc.loadJS(r)}function mx(){return mc.recaptchaEnterpriseScript}function gx(){return mc.gapiScript}function yx(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class _x{constructor(){this.enterprise=new vx}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class vx{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const wx="recaptcha-enterprise",M0="NO_RECAPTCHA";class Ex{constructor(e){this.type=wx,this.auth=gi(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(h,m)=>{X1(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(y=>{if(y.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const v=new J1(y);return l.tenantId==null?l._agentRecaptchaConfig=v:l._tenantRecaptchaConfigs[l.tenantId]=v,h(v.siteKey)}}).catch(y=>{m(y)})})}function o(l,h,m){const y=window.grecaptcha;Dg(y)?y.enterprise.ready(()=>{y.enterprise.execute(l,{action:e}).then(v=>{h(v)}).catch(()=>{h(M0)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new _x().execute("siteKey",{action:"verify"}):new Promise((l,h)=>{i(this.auth).then(m=>{if(!t&&Dg(window.grecaptcha))o(m,l,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let y=mx();y.length!==0&&(y+=m),O0(y).then(()=>{o(m,l,h)}).catch(v=>{h(v)})}}).catch(m=>{h(m)})})}}async function Fg(r,e,t,i=!1,o=!1){const l=new Ex(r);let h;if(o)h=M0;else try{h=await l.verify(t)}catch{h=await l.verify(t,!0)}const m={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const y=m.phoneEnrollmentInfo.phoneNumber,v=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:y,recaptchaToken:v,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const y=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:y,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return i?Object.assign(m,{captchaResp:h}):Object.assign(m,{captchaResponse:h}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function Vd(r,e,t,i,o){var l;if((l=r._getRecaptchaConfig())!=null&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const h=await Fg(r,e,t,t==="getOobCode");return i(r,h)}else return i(r,e).catch(async h=>{if(h.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await Fg(r,e,t,t==="getOobCode");return i(r,m)}else return Promise.reject(h)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xx(r,e){const t=of(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(ui(l,e??{}))return o;Ln(o,"already-initialized")}return t.initialize({options:e})}function Tx(r,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(kr);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function Ix(r,e,t){const i=gi(r);_e(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=j0(e),{host:h,port:m}=Sx(e),y=m===null?"":`:${m}`,v={url:`${l}//${h}${y}/`},E=Object.freeze({host:h,port:m,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){_e(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),_e(ui(v,i.config.emulator)&&ui(E,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=v,i.emulatorConfig=E,i.settings.appVerificationDisabledForTesting=!0,No(h)?(h0(`${l}//${h}${y}`),d0("Auth",!0)):Ax()}function j0(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function Sx(r){const e=j0(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:Ug(i.substr(l.length+1))}}else{const[l,h]=i.split(":");return{host:l,port:Ug(h)}}}function Ug(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function Ax(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ar("not implemented")}_getIdTokenResponse(e){return Ar("not implemented")}_linkToIdToken(e,t){return Ar("not implemented")}_getReauthenticationResolver(e){return Ar("not implemented")}}async function kx(r,e){return Rs(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cx(r,e){return il(r,"POST","/v1/accounts:signInWithPassword",Ns(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nx(r,e){return il(r,"POST","/v1/accounts:signInWithEmailLink",Ns(r,e))}async function Rx(r,e){return il(r,"POST","/v1/accounts:signInWithEmailLink",Ns(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka extends hf{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Ka(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Ka(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Vd(e,t,"signInWithPassword",Cx);case"emailLink":return Nx(e,{email:this._email,oobCode:this._password});default:Ln(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Vd(e,i,"signUpPassword",kx);case"emailLink":return Rx(e,{idToken:t,email:this._email,oobCode:this._password});default:Ln(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yo(r,e){return il(r,"POST","/v1/accounts:signInWithIdp",Ns(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px="http://localhost";class hi extends hf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new hi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ln("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...l}=t;if(!i||!o)return null;const h=new hi(i,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return yo(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,yo(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,yo(e,t)}buildRequest(){const e={requestUri:Px,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=rl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bx(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Dx(r){const e=Va(La(r)).link,t=e?Va(La(e)).deep_link_id:null,i=Va(La(r)).deep_link_id;return(i?Va(La(i)).link:null)||i||t||e||r}class df{constructor(e){const t=Va(La(e)),i=t.apiKey??null,o=t.oobCode??null,l=bx(t.mode??null);_e(i&&o&&l,"argument-error"),this.apiKey=i,this.operation=l,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=Dx(e);try{return new df(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(){this.providerId=yi.PROVIDER_ID}static credential(e,t){return Ka._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=df.parseLink(t);return _e(i,"argument-error"),Ka._fromEmailAndCode(e,i.code,i.tenantId)}}yi.PROVIDER_ID="password";yi.EMAIL_PASSWORD_SIGN_IN_METHOD="password";yi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol extends F0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs extends ol{constructor(){super("facebook.com")}static credential(e){return hi._fromParams({providerId:fs.PROVIDER_ID,signInMethod:fs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fs.credentialFromTaggedObject(e)}static credentialFromError(e){return fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fs.credential(e.oauthAccessToken)}catch{return null}}}fs.FACEBOOK_SIGN_IN_METHOD="facebook.com";fs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps extends ol{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return hi._fromParams({providerId:ps.PROVIDER_ID,signInMethod:ps.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ps.credentialFromTaggedObject(e)}static credentialFromError(e){return ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return ps.credential(t,i)}catch{return null}}}ps.GOOGLE_SIGN_IN_METHOD="google.com";ps.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms extends ol{constructor(){super("github.com")}static credential(e){return hi._fromParams({providerId:ms.PROVIDER_ID,signInMethod:ms.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ms.credentialFromTaggedObject(e)}static credentialFromError(e){return ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ms.credential(e.oauthAccessToken)}catch{return null}}}ms.GITHUB_SIGN_IN_METHOD="github.com";ms.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs extends ol{constructor(){super("twitter.com")}static credential(e,t){return hi._fromParams({providerId:gs.PROVIDER_ID,signInMethod:gs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return gs.credentialFromTaggedObject(e)}static credentialFromError(e){return gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return gs.credential(t,i)}catch{return null}}}gs.TWITTER_SIGN_IN_METHOD="twitter.com";gs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vx(r,e){return il(r,"POST","/v1/accounts:signUp",Ns(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await Dn._fromIdTokenResponse(e,i,o),h=zg(i);return new di({user:l,providerId:h,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=zg(i);return new di({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function zg(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu extends Lr{constructor(e,t,i,o){super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Zu.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new Zu(e,t,i,o)}}function U0(r,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Zu._fromErrorAndOperation(r,l,e,i):l})}async function Lx(r,e,t=!1){const i=await Ga(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return di._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z0(r,e,t=!1){const{auth:i}=r;if(vn(i.app))return Promise.reject(Cr(i));const o="reauthenticate";try{const l=await Ga(r,U0(i,o,e,r),t);_e(l.idToken,i,"internal-error");const h=uf(l.idToken);_e(h,i,"internal-error");const{sub:m}=h;return _e(r.uid===m,i,"user-mismatch"),di._forOperation(r,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Ln(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B0(r,e,t=!1){if(vn(r.app))return Promise.reject(Cr(r));const i="signIn",o=await U0(r,i,e),l=await di._fromIdTokenResponse(r,i,o);return t||await r._updateCurrentUser(l.user),l}async function Ox(r,e){return B0(gi(r),e)}async function Mx(r,e){return z0(ht(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $0(r){const e=gi(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function jx(r,e,t){if(vn(r.app))return Promise.reject(Cr(r));const i=gi(r),h=await Vd(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Vx).catch(y=>{throw y.code==="auth/password-does-not-meet-requirements"&&$0(r),y}),m=await di._fromIdTokenResponse(i,"signIn",h);return await i._updateCurrentUser(m.user),m}function Fx(r,e,t){return vn(r.app)?Promise.reject(Cr(r)):Ox(ht(r),yi.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&$0(r),i})}function Ux(r,e,t,i){return ht(r).onIdTokenChanged(e,t,i)}function zx(r,e,t){return ht(r).beforeAuthStateChanged(e,t)}function Bx(r,e,t,i){return ht(r).onAuthStateChanged(e,t,i)}function $x(r){return ht(r).signOut()}async function qx(r){return ht(r).delete()}const ec="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ec,"1"),this.storage.removeItem(ec),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx=1e3,Wx=10;class H0 extends q0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=V0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,m,y)=>{this.notifyListeners(h,y)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(i);!t&&this.localCache[i]===h||this.notifyListeners(i,h)},l=this.storage.getItem(i);lx()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,Wx):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},Hx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}H0.type="LOCAL";const Gx=H0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0 extends q0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}W0.type="SESSION";const G0=W0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kx(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new gc(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const m=Array.from(h).map(async v=>v(t.origin,l)),y=await Kx(m);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:y})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}gc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ff(r="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((m,y)=>{const v=ff("",20);o.port1.start();const E=setTimeout(()=>{y(new Error("unsupported_event"))},i);h={messageChannel:o,onMessage(I){const k=I;if(k.data.eventId===v)switch(k.data.status){case"ack":clearTimeout(E),l=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),m(k.data.response);break;default:clearTimeout(E),clearTimeout(l),y(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:v,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rr(){return window}function Yx(r){rr().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K0(){return typeof rr().WorkerGlobalScope<"u"&&typeof rr().importScripts=="function"}async function Jx(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Xx(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function Zx(){return K0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q0="firebaseLocalStorageDb",eT=1,tc="firebaseLocalStorage",Y0="fbase_key";class al{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function yc(r,e){return r.transaction([tc],e?"readwrite":"readonly").objectStore(tc)}function tT(){const r=indexedDB.deleteDatabase(Q0);return new al(r).toPromise()}function Ld(){const r=indexedDB.open(Q0,eT);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(tc,{keyPath:Y0})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(tc)?e(i):(i.close(),await tT(),e(await Ld()))})})}async function Bg(r,e,t){const i=yc(r,!0).put({[Y0]:e,value:t});return new al(i).toPromise()}async function nT(r,e){const t=yc(r,!1).get(e),i=await new al(t).toPromise();return i===void 0?null:i.value}function $g(r,e){const t=yc(r,!0).delete(e);return new al(t).toPromise()}const rT=800,sT=3;class J0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ld(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>sT)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return K0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=gc._getInstance(Zx()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await Jx(),!this.activeServiceWorker)return;this.sender=new Qx(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Xx()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ld();return await Bg(e,ec,"1"),await $g(e,ec),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Bg(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>nT(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>$g(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=yc(o,!1).getAll();return new al(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),rT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}J0.type="LOCAL";const iT=J0;new sl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oT(r,e){return e?kr(e):(_e(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf extends hf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return yo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return yo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return yo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function aT(r){return B0(r.auth,new pf(r),r.bypassAuthState)}function lT(r){const{auth:e,user:t}=r;return _e(t,e,"internal-error"),z0(t,new pf(r),r.bypassAuthState)}async function uT(r){const{auth:e,user:t}=r;return _e(t,e,"internal-error"),Lx(t,new pf(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:h,type:m}=e;if(h){this.reject(h);return}const y={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(y))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return aT;case"linkViaPopup":case"linkViaRedirect":return uT;case"reauthViaPopup":case"reauthViaRedirect":return lT;default:Ln(this.auth,"internal-error")}}resolve(e){Pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cT=new sl(2e3,1e4);class po extends X0{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,po.currentPopupAction&&po.currentPopupAction.cancel(),po.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return _e(e,this.auth,"internal-error"),e}async onExecution(){Pr(this.filter.length===1,"Popup operations only handle one event");const e=ff();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(nr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(nr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,po.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(nr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,cT.get())};e()}}po.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hT="pendingRedirect",Fu=new Map;class dT extends X0{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Fu.get(this.auth._key());if(!e){try{const i=await fT(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Fu.set(this.auth._key(),e)}return this.bypassAuthState||Fu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function fT(r,e){const t=gT(e),i=mT(r);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function pT(r,e){Fu.set(r._key(),e)}function mT(r){return kr(r._redirectPersistence)}function gT(r){return ju(hT,r.config.apiKey,r.name)}async function yT(r,e,t=!1){if(vn(r.app))return Promise.reject(Cr(r));const i=gi(r),o=oT(i,e),h=await new dT(i,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T=600*1e3;class vT{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!wT(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!Z0(e)){const o=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(nr(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=_T&&this.cachedEventUids.clear(),this.cachedEventUids.has(qg(e))}saveEventToCache(e){this.cachedEventUids.add(qg(e)),this.lastProcessedEventTime=Date.now()}}function qg(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function Z0({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function wT(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Z0(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ET(r,e={}){return Rs(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xT=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,TT=/^https?/;async function IT(r){if(r.config.emulator)return;const{authorizedDomains:e}=await ET(r);for(const t of e)try{if(ST(t))return}catch{}Ln(r,"unauthorized-domain")}function ST(r){const e=bd(),{protocol:t,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&i===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===i}if(!TT.test(t))return!1;if(xT.test(r))return i===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT=new sl(3e4,6e4);function Hg(){const r=rr().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function kT(r){return new Promise((e,t)=>{var o,l,h;function i(){Hg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Hg(),t(nr(r,"network-request-failed"))},timeout:AT.get()})}if((l=(o=rr().gapi)==null?void 0:o.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((h=rr().gapi)!=null&&h.load)i();else{const m=yx("iframefcb");return rr()[m]=()=>{gapi.load?i():t(nr(r,"network-request-failed"))},O0(`${gx()}?onload=${m}`).catch(y=>t(y))}}).catch(e=>{throw Uu=null,e})}let Uu=null;function CT(r){return Uu=Uu||kT(r),Uu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT=new sl(5e3,15e3),RT="__/auth/iframe",PT="emulator/auth/iframe",bT={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},DT=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function VT(r){const e=r.config;_e(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?lf(e,PT):`https://${r.config.authDomain}/${RT}`,i={apiKey:e.apiKey,appName:r.name,v:Ro},o=DT.get(r.config.apiHost);o&&(i.eid=o);const l=r._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${rl(i).slice(1)}`}async function LT(r){const e=await CT(r),t=rr().gapi;return _e(t,r,"internal-error"),e.open({where:document.body,url:VT(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:bT,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const h=nr(r,"network-request-failed"),m=rr().setTimeout(()=>{l(h)},NT.get());function y(){rr().clearTimeout(m),o(i)}i.ping(y).then(y,()=>{l(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OT={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},MT=500,jT=600,FT="_blank",UT="http://localhost";class Wg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function zT(r,e,t,i=MT,o=jT){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let m="";const y={...OT,width:i.toString(),height:o.toString(),top:l,left:h},v=zt().toLowerCase();t&&(m=N0(v)?FT:t),k0(v)&&(e=e||UT,y.scrollbars="yes");const E=Object.entries(y).reduce((k,[F,B])=>`${k}${F}=${B},`,"");if(ax(v)&&m!=="_self")return BT(e||"",m),new Wg(null);const I=window.open(e||"",m,E);_e(I,r,"popup-blocked");try{I.focus()}catch{}return new Wg(I)}function BT(r,e){const t=document.createElement("a");t.href=r,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $T="__/auth/handler",qT="emulator/auth/handler",HT=encodeURIComponent("fac");async function Gg(r,e,t,i,o,l){_e(r.config.authDomain,r,"auth-domain-config-required"),_e(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:i,v:Ro,eventId:o};if(e instanceof F0){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",NE(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,I]of Object.entries({}))h[E]=I}if(e instanceof ol){const E=e.getScopes().filter(I=>I!=="");E.length>0&&(h.scopes=E.join(","))}r.tenantId&&(h.tid=r.tenantId);const m=h;for(const E of Object.keys(m))m[E]===void 0&&delete m[E];const y=await r._getAppCheckToken(),v=y?`#${HT}=${encodeURIComponent(y)}`:"";return`${WT(r)}?${rl(m).slice(1)}${v}`}function WT({config:r}){return r.emulator?lf(r,qT):`https://${r.authDomain}/${$T}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vd="webStorageSupport";class GT{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=G0,this._completeRedirectFn=yT,this._overrideRedirectResult=pT}async _openPopup(e,t,i,o){var h;Pr((h=this.eventManagers[e._key()])==null?void 0:h.manager,"_initialize() not called before _openPopup()");const l=await Gg(e,t,i,bd(),o);return zT(e,l,ff())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await Gg(e,t,i,bd(),o);return Yx(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Pr(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await LT(e),i=new vT(e);return t.register("authEvent",o=>(_e(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(vd,{type:vd},o=>{var h;const l=(h=o==null?void 0:o[0])==null?void 0:h[vd];l!==void 0&&t(!!l),Ln(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=IT(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return V0()||C0()||cf()}}const KT=GT;var Kg="@firebase/auth",Qg="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){_e(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YT(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function JT(r){xo(new ci("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:m}=i.options;_e(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const y={apiKey:h,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:L0(r)},v=new fx(i,o,l,y);return Tx(v,t),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),xo(new ci("auth-internal",e=>{const t=gi(e.getProvider("auth").getImmediate());return(i=>new QT(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ws(Kg,Qg,YT(r)),ws(Kg,Qg,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT=300,ZT=c0("authIdTokenMaxAge")||XT;let Yg=null;const eI=r=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>ZT)return;const o=t==null?void 0:t.token;Yg!==o&&(Yg=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function tI(r=g0()){const e=of(r,"auth");if(e.isInitialized())return e.getImmediate();const t=xx(r,{popupRedirectResolver:KT,persistence:[iT,Gx,G0]}),i=c0("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const h=eI(l.toString());zx(t,h,()=>h(t.currentUser)),Ux(t,m=>h(m))}}const o=l0("auth");return o&&Ix(t,`http://${o}`),t}function nI(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}px({loadJS(r){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{const l=nr("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",nI().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});JT("Browser");/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rI=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),e_=(...r)=>r.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var sI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iI=de.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:o="",children:l,iconNode:h,...m},y)=>de.createElement("svg",{ref:y,...sI,width:e,height:e,stroke:r,strokeWidth:i?Number(t)*24/Number(e):t,className:e_("lucide",o),...m},[...h.map(([v,E])=>de.createElement(v,E)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=(r,e)=>{const t=de.forwardRef(({className:i,...o},l)=>de.createElement(iI,{ref:l,iconNode:e,className:e_(`lucide-${rI(r)}`,i),...o}));return t.displayName=`${r}`,t};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oI=Pe("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Od=Pe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aI=Pe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lI=Pe("Bed",[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pu=Pe("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mf=Pe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _c=Pe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uI=Pe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cI=Pe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hI=Pe("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dI=Pe("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fI=Pe("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pI=Pe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mI=Pe("Coffee",[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gI=Pe("Compass",[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gf=Pe("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yI=Pe("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _I=Pe("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const En=Pe("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vI=Pe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wI=Pe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EI=Pe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vc=Pe("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jg=Pe("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wc=Pe("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Md=Pe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xI=Pe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TI=Pe("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const II=Pe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _o=Pe("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SI=Pe("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AI=Pe("TramFront",[["rect",{width:"16",height:"16",x:"4",y:"3",rx:"2",key:"1wxw4b"}],["path",{d:"M4 11h16",key:"mpoxn0"}],["path",{d:"M12 3v8",key:"1h2ygw"}],["path",{d:"m8 19-2 3",key:"13i0xs"}],["path",{d:"m18 22-2-3",key:"1p0ohu"}],["path",{d:"M8 15h.01",key:"a7atzg"}],["path",{d:"M16 15h.01",key:"rnfrdf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ec=Pe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kI=Pe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yf=Pe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CI=Pe("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t_=Pe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var NI="firebase",RI="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ws(NI,RI,"app");var Xg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Es,n_;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,T){function A(){}A.prototype=T.prototype,N.F=T.prototype,N.prototype=new A,N.prototype.constructor=N,N.D=function(P,b,R){for(var S=Array(arguments.length-2),te=2;te<arguments.length;te++)S[te-2]=arguments[te];return T.prototype[b].apply(P,S)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(N,T,A){A||(A=0);const P=Array(16);if(typeof T=="string")for(var b=0;b<16;++b)P[b]=T.charCodeAt(A++)|T.charCodeAt(A++)<<8|T.charCodeAt(A++)<<16|T.charCodeAt(A++)<<24;else for(b=0;b<16;++b)P[b]=T[A++]|T[A++]<<8|T[A++]<<16|T[A++]<<24;T=N.g[0],A=N.g[1],b=N.g[2];let R=N.g[3],S;S=T+(R^A&(b^R))+P[0]+3614090360&4294967295,T=A+(S<<7&4294967295|S>>>25),S=R+(b^T&(A^b))+P[1]+3905402710&4294967295,R=T+(S<<12&4294967295|S>>>20),S=b+(A^R&(T^A))+P[2]+606105819&4294967295,b=R+(S<<17&4294967295|S>>>15),S=A+(T^b&(R^T))+P[3]+3250441966&4294967295,A=b+(S<<22&4294967295|S>>>10),S=T+(R^A&(b^R))+P[4]+4118548399&4294967295,T=A+(S<<7&4294967295|S>>>25),S=R+(b^T&(A^b))+P[5]+1200080426&4294967295,R=T+(S<<12&4294967295|S>>>20),S=b+(A^R&(T^A))+P[6]+2821735955&4294967295,b=R+(S<<17&4294967295|S>>>15),S=A+(T^b&(R^T))+P[7]+4249261313&4294967295,A=b+(S<<22&4294967295|S>>>10),S=T+(R^A&(b^R))+P[8]+1770035416&4294967295,T=A+(S<<7&4294967295|S>>>25),S=R+(b^T&(A^b))+P[9]+2336552879&4294967295,R=T+(S<<12&4294967295|S>>>20),S=b+(A^R&(T^A))+P[10]+4294925233&4294967295,b=R+(S<<17&4294967295|S>>>15),S=A+(T^b&(R^T))+P[11]+2304563134&4294967295,A=b+(S<<22&4294967295|S>>>10),S=T+(R^A&(b^R))+P[12]+1804603682&4294967295,T=A+(S<<7&4294967295|S>>>25),S=R+(b^T&(A^b))+P[13]+4254626195&4294967295,R=T+(S<<12&4294967295|S>>>20),S=b+(A^R&(T^A))+P[14]+2792965006&4294967295,b=R+(S<<17&4294967295|S>>>15),S=A+(T^b&(R^T))+P[15]+1236535329&4294967295,A=b+(S<<22&4294967295|S>>>10),S=T+(b^R&(A^b))+P[1]+4129170786&4294967295,T=A+(S<<5&4294967295|S>>>27),S=R+(A^b&(T^A))+P[6]+3225465664&4294967295,R=T+(S<<9&4294967295|S>>>23),S=b+(T^A&(R^T))+P[11]+643717713&4294967295,b=R+(S<<14&4294967295|S>>>18),S=A+(R^T&(b^R))+P[0]+3921069994&4294967295,A=b+(S<<20&4294967295|S>>>12),S=T+(b^R&(A^b))+P[5]+3593408605&4294967295,T=A+(S<<5&4294967295|S>>>27),S=R+(A^b&(T^A))+P[10]+38016083&4294967295,R=T+(S<<9&4294967295|S>>>23),S=b+(T^A&(R^T))+P[15]+3634488961&4294967295,b=R+(S<<14&4294967295|S>>>18),S=A+(R^T&(b^R))+P[4]+3889429448&4294967295,A=b+(S<<20&4294967295|S>>>12),S=T+(b^R&(A^b))+P[9]+568446438&4294967295,T=A+(S<<5&4294967295|S>>>27),S=R+(A^b&(T^A))+P[14]+3275163606&4294967295,R=T+(S<<9&4294967295|S>>>23),S=b+(T^A&(R^T))+P[3]+4107603335&4294967295,b=R+(S<<14&4294967295|S>>>18),S=A+(R^T&(b^R))+P[8]+1163531501&4294967295,A=b+(S<<20&4294967295|S>>>12),S=T+(b^R&(A^b))+P[13]+2850285829&4294967295,T=A+(S<<5&4294967295|S>>>27),S=R+(A^b&(T^A))+P[2]+4243563512&4294967295,R=T+(S<<9&4294967295|S>>>23),S=b+(T^A&(R^T))+P[7]+1735328473&4294967295,b=R+(S<<14&4294967295|S>>>18),S=A+(R^T&(b^R))+P[12]+2368359562&4294967295,A=b+(S<<20&4294967295|S>>>12),S=T+(A^b^R)+P[5]+4294588738&4294967295,T=A+(S<<4&4294967295|S>>>28),S=R+(T^A^b)+P[8]+2272392833&4294967295,R=T+(S<<11&4294967295|S>>>21),S=b+(R^T^A)+P[11]+1839030562&4294967295,b=R+(S<<16&4294967295|S>>>16),S=A+(b^R^T)+P[14]+4259657740&4294967295,A=b+(S<<23&4294967295|S>>>9),S=T+(A^b^R)+P[1]+2763975236&4294967295,T=A+(S<<4&4294967295|S>>>28),S=R+(T^A^b)+P[4]+1272893353&4294967295,R=T+(S<<11&4294967295|S>>>21),S=b+(R^T^A)+P[7]+4139469664&4294967295,b=R+(S<<16&4294967295|S>>>16),S=A+(b^R^T)+P[10]+3200236656&4294967295,A=b+(S<<23&4294967295|S>>>9),S=T+(A^b^R)+P[13]+681279174&4294967295,T=A+(S<<4&4294967295|S>>>28),S=R+(T^A^b)+P[0]+3936430074&4294967295,R=T+(S<<11&4294967295|S>>>21),S=b+(R^T^A)+P[3]+3572445317&4294967295,b=R+(S<<16&4294967295|S>>>16),S=A+(b^R^T)+P[6]+76029189&4294967295,A=b+(S<<23&4294967295|S>>>9),S=T+(A^b^R)+P[9]+3654602809&4294967295,T=A+(S<<4&4294967295|S>>>28),S=R+(T^A^b)+P[12]+3873151461&4294967295,R=T+(S<<11&4294967295|S>>>21),S=b+(R^T^A)+P[15]+530742520&4294967295,b=R+(S<<16&4294967295|S>>>16),S=A+(b^R^T)+P[2]+3299628645&4294967295,A=b+(S<<23&4294967295|S>>>9),S=T+(b^(A|~R))+P[0]+4096336452&4294967295,T=A+(S<<6&4294967295|S>>>26),S=R+(A^(T|~b))+P[7]+1126891415&4294967295,R=T+(S<<10&4294967295|S>>>22),S=b+(T^(R|~A))+P[14]+2878612391&4294967295,b=R+(S<<15&4294967295|S>>>17),S=A+(R^(b|~T))+P[5]+4237533241&4294967295,A=b+(S<<21&4294967295|S>>>11),S=T+(b^(A|~R))+P[12]+1700485571&4294967295,T=A+(S<<6&4294967295|S>>>26),S=R+(A^(T|~b))+P[3]+2399980690&4294967295,R=T+(S<<10&4294967295|S>>>22),S=b+(T^(R|~A))+P[10]+4293915773&4294967295,b=R+(S<<15&4294967295|S>>>17),S=A+(R^(b|~T))+P[1]+2240044497&4294967295,A=b+(S<<21&4294967295|S>>>11),S=T+(b^(A|~R))+P[8]+1873313359&4294967295,T=A+(S<<6&4294967295|S>>>26),S=R+(A^(T|~b))+P[15]+4264355552&4294967295,R=T+(S<<10&4294967295|S>>>22),S=b+(T^(R|~A))+P[6]+2734768916&4294967295,b=R+(S<<15&4294967295|S>>>17),S=A+(R^(b|~T))+P[13]+1309151649&4294967295,A=b+(S<<21&4294967295|S>>>11),S=T+(b^(A|~R))+P[4]+4149444226&4294967295,T=A+(S<<6&4294967295|S>>>26),S=R+(A^(T|~b))+P[11]+3174756917&4294967295,R=T+(S<<10&4294967295|S>>>22),S=b+(T^(R|~A))+P[2]+718787259&4294967295,b=R+(S<<15&4294967295|S>>>17),S=A+(R^(b|~T))+P[9]+3951481745&4294967295,N.g[0]=N.g[0]+T&4294967295,N.g[1]=N.g[1]+(b+(S<<21&4294967295|S>>>11))&4294967295,N.g[2]=N.g[2]+b&4294967295,N.g[3]=N.g[3]+R&4294967295}i.prototype.v=function(N,T){T===void 0&&(T=N.length);const A=T-this.blockSize,P=this.C;let b=this.h,R=0;for(;R<T;){if(b==0)for(;R<=A;)o(this,N,R),R+=this.blockSize;if(typeof N=="string"){for(;R<T;)if(P[b++]=N.charCodeAt(R++),b==this.blockSize){o(this,P),b=0;break}}else for(;R<T;)if(P[b++]=N[R++],b==this.blockSize){o(this,P),b=0;break}}this.h=b,this.o+=T},i.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var T=1;T<N.length-8;++T)N[T]=0;T=this.o*8;for(var A=N.length-8;A<N.length;++A)N[A]=T&255,T/=256;for(this.v(N),N=Array(16),T=0,A=0;A<4;++A)for(let P=0;P<32;P+=8)N[T++]=this.g[A]>>>P&255;return N};function l(N,T){var A=m;return Object.prototype.hasOwnProperty.call(A,N)?A[N]:A[N]=T(N)}function h(N,T){this.h=T;const A=[];let P=!0;for(let b=N.length-1;b>=0;b--){const R=N[b]|0;P&&R==T||(A[b]=R,P=!1)}this.g=A}var m={};function y(N){return-128<=N&&N<128?l(N,function(T){return new h([T|0],T<0?-1:0)}):new h([N|0],N<0?-1:0)}function v(N){if(isNaN(N)||!isFinite(N))return I;if(N<0)return q(v(-N));const T=[];let A=1;for(let P=0;N>=A;P++)T[P]=N/A|0,A*=4294967296;return new h(T,0)}function E(N,T){if(N.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(N.charAt(0)=="-")return q(E(N.substring(1),T));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=v(Math.pow(T,8));let P=I;for(let R=0;R<N.length;R+=8){var b=Math.min(8,N.length-R);const S=parseInt(N.substring(R,R+b),T);b<8?(b=v(Math.pow(T,b)),P=P.j(b).add(v(S))):(P=P.j(A),P=P.add(v(S)))}return P}var I=y(0),k=y(1),F=y(16777216);r=h.prototype,r.m=function(){if($(this))return-q(this).m();let N=0,T=1;for(let A=0;A<this.g.length;A++){const P=this.i(A);N+=(P>=0?P:4294967296+P)*T,T*=4294967296}return N},r.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(B(this))return"0";if($(this))return"-"+q(this).toString(N);const T=v(Math.pow(N,6));var A=this;let P="";for(;;){const b=we(A,T).g;A=ce(A,b.j(T));let R=((A.g.length>0?A.g[0]:A.h)>>>0).toString(N);if(A=b,B(A))return R+P;for(;R.length<6;)R="0"+R;P=R+P}},r.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function B(N){if(N.h!=0)return!1;for(let T=0;T<N.g.length;T++)if(N.g[T]!=0)return!1;return!0}function $(N){return N.h==-1}r.l=function(N){return N=ce(this,N),$(N)?-1:B(N)?0:1};function q(N){const T=N.g.length,A=[];for(let P=0;P<T;P++)A[P]=~N.g[P];return new h(A,~N.h).add(k)}r.abs=function(){return $(this)?q(this):this},r.add=function(N){const T=Math.max(this.g.length,N.g.length),A=[];let P=0;for(let b=0;b<=T;b++){let R=P+(this.i(b)&65535)+(N.i(b)&65535),S=(R>>>16)+(this.i(b)>>>16)+(N.i(b)>>>16);P=S>>>16,R&=65535,S&=65535,A[b]=S<<16|R}return new h(A,A[A.length-1]&-2147483648?-1:0)};function ce(N,T){return N.add(q(T))}r.j=function(N){if(B(this)||B(N))return I;if($(this))return $(N)?q(this).j(q(N)):q(q(this).j(N));if($(N))return q(this.j(q(N)));if(this.l(F)<0&&N.l(F)<0)return v(this.m()*N.m());const T=this.g.length+N.g.length,A=[];for(var P=0;P<2*T;P++)A[P]=0;for(P=0;P<this.g.length;P++)for(let b=0;b<N.g.length;b++){const R=this.i(P)>>>16,S=this.i(P)&65535,te=N.i(b)>>>16,Ce=N.i(b)&65535;A[2*P+2*b]+=S*Ce,ee(A,2*P+2*b),A[2*P+2*b+1]+=R*Ce,ee(A,2*P+2*b+1),A[2*P+2*b+1]+=S*te,ee(A,2*P+2*b+1),A[2*P+2*b+2]+=R*te,ee(A,2*P+2*b+2)}for(N=0;N<T;N++)A[N]=A[2*N+1]<<16|A[2*N];for(N=T;N<2*T;N++)A[N]=0;return new h(A,0)};function ee(N,T){for(;(N[T]&65535)!=N[T];)N[T+1]+=N[T]>>>16,N[T]&=65535,T++}function Z(N,T){this.g=N,this.h=T}function we(N,T){if(B(T))throw Error("division by zero");if(B(N))return new Z(I,I);if($(N))return T=we(q(N),T),new Z(q(T.g),q(T.h));if($(T))return T=we(N,q(T)),new Z(q(T.g),T.h);if(N.g.length>30){if($(N)||$(T))throw Error("slowDivide_ only works with positive integers.");for(var A=k,P=T;P.l(N)<=0;)A=Se(A),P=Se(P);var b=ye(A,1),R=ye(P,1);for(P=ye(P,2),A=ye(A,2);!B(P);){var S=R.add(P);S.l(N)<=0&&(b=b.add(A),R=S),P=ye(P,1),A=ye(A,1)}return T=ce(N,b.j(T)),new Z(b,T)}for(b=I;N.l(T)>=0;){for(A=Math.max(1,Math.floor(N.m()/T.m())),P=Math.ceil(Math.log(A)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),R=v(A),S=R.j(T);$(S)||S.l(N)>0;)A-=P,R=v(A),S=R.j(T);B(R)&&(R=k),b=b.add(R),N=ce(N,S)}return new Z(b,N)}r.B=function(N){return we(this,N).h},r.and=function(N){const T=Math.max(this.g.length,N.g.length),A=[];for(let P=0;P<T;P++)A[P]=this.i(P)&N.i(P);return new h(A,this.h&N.h)},r.or=function(N){const T=Math.max(this.g.length,N.g.length),A=[];for(let P=0;P<T;P++)A[P]=this.i(P)|N.i(P);return new h(A,this.h|N.h)},r.xor=function(N){const T=Math.max(this.g.length,N.g.length),A=[];for(let P=0;P<T;P++)A[P]=this.i(P)^N.i(P);return new h(A,this.h^N.h)};function Se(N){const T=N.g.length+1,A=[];for(let P=0;P<T;P++)A[P]=N.i(P)<<1|N.i(P-1)>>>31;return new h(A,N.h)}function ye(N,T){const A=T>>5;T%=32;const P=N.g.length-A,b=[];for(let R=0;R<P;R++)b[R]=T>0?N.i(R+A)>>>T|N.i(R+A+1)<<32-T:N.i(R+A);return new h(b,N.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,n_=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=v,h.fromString=E,Es=h}).apply(typeof Xg<"u"?Xg:typeof self<"u"?self:typeof window<"u"?window:{});var bu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var r_,Oa,s_,zu,jd,i_,o_,a_;(function(){var r,e=Object.defineProperty;function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof bu=="object"&&bu];for(var p=0;p<u.length;++p){var _=u[p];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=t(this);function o(u,p){if(p)e:{var _=i;u=u.split(".");for(var x=0;x<u.length-1;x++){var M=u[x];if(!(M in _))break e;_=_[M]}u=u[u.length-1],x=_[u],p=p(x),p!=x&&p!=null&&e(_,u,{configurable:!0,writable:!0,value:p})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(p){var _=[],x;for(x in p)Object.prototype.hasOwnProperty.call(p,x)&&_.push([x,p[x]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},h=this||self;function m(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function y(u,p,_){return u.call.apply(u.bind,arguments)}function v(u,p,_){return v=y,v.apply(null,arguments)}function E(u,p){var _=Array.prototype.slice.call(arguments,1);return function(){var x=_.slice();return x.push.apply(x,arguments),u.apply(this,x)}}function I(u,p){function _(){}_.prototype=p.prototype,u.Z=p.prototype,u.prototype=new _,u.prototype.constructor=u,u.Ob=function(x,M,z){for(var X=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)X[Te-2]=arguments[Te];return p.prototype[M].apply(x,X)}}var k=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function F(u){const p=u.length;if(p>0){const _=Array(p);for(let x=0;x<p;x++)_[x]=u[x];return _}return[]}function B(u,p){for(let x=1;x<arguments.length;x++){const M=arguments[x];var _=typeof M;if(_=_!="object"?_:M?Array.isArray(M)?"array":_:"null",_=="array"||_=="object"&&typeof M.length=="number"){_=u.length||0;const z=M.length||0;u.length=_+z;for(let X=0;X<z;X++)u[_+X]=M[X]}else u.push(M)}}class ${constructor(p,_){this.i=p,this.j=_,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function q(u){h.setTimeout(()=>{throw u},0)}function ce(){var u=N;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class ee{constructor(){this.h=this.g=null}add(p,_){const x=Z.get();x.set(p,_),this.h?this.h.next=x:this.g=x,this.h=x}}var Z=new $(()=>new we,u=>u.reset());class we{constructor(){this.next=this.g=this.h=null}set(p,_){this.h=p,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Se,ye=!1,N=new ee,T=()=>{const u=Promise.resolve(void 0);Se=()=>{u.then(A)}};function A(){for(var u;u=ce();){try{u.h.call(u.g)}catch(_){q(_)}var p=Z;p.j(u),p.h<100&&(p.h++,u.next=p.g,p.g=u)}ye=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function b(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}b.prototype.h=function(){this.defaultPrevented=!0};var R=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};h.addEventListener("test",_,p),h.removeEventListener("test",_,p)}catch{}return u})();function S(u){return/^[\s\xa0]*$/.test(u)}function te(u,p){b.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,p)}I(te,b),te.prototype.init=function(u,p){const _=this.type=u.type,x=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget,p||(_=="mouseover"?p=u.fromElement:_=="mouseout"&&(p=u.toElement)),this.relatedTarget=p,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&te.Z.h.call(this)},te.prototype.h=function(){te.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ce="closure_listenable_"+(Math.random()*1e6|0),Ne=0;function ze(u,p,_,x,M){this.listener=u,this.proxy=null,this.src=p,this.type=_,this.capture=!!x,this.ha=M,this.key=++Ne,this.da=this.fa=!1}function ne(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function pe(u,p,_){for(const x in u)p.call(_,u[x],x,u)}function oe(u,p){for(const _ in u)p.call(void 0,u[_],_,u)}function L(u){const p={};for(const _ in u)p[_]=u[_];return p}const G="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ae(u,p){let _,x;for(let M=1;M<arguments.length;M++){x=arguments[M];for(_ in x)u[_]=x[_];for(let z=0;z<G.length;z++)_=G[z],Object.prototype.hasOwnProperty.call(x,_)&&(u[_]=x[_])}}function ke(u){this.src=u,this.g={},this.h=0}ke.prototype.add=function(u,p,_,x,M){const z=u.toString();u=this.g[z],u||(u=this.g[z]=[],this.h++);const X=De(u,p,x,M);return X>-1?(p=u[X],_||(p.fa=!1)):(p=new ze(p,this.src,z,!!x,M),p.fa=_,u.push(p)),p};function be(u,p){const _=p.type;if(_ in u.g){var x=u.g[_],M=Array.prototype.indexOf.call(x,p,void 0),z;(z=M>=0)&&Array.prototype.splice.call(x,M,1),z&&(ne(p),u.g[_].length==0&&(delete u.g[_],u.h--))}}function De(u,p,_,x){for(let M=0;M<u.length;++M){const z=u[M];if(!z.da&&z.listener==p&&z.capture==!!_&&z.ha==x)return M}return-1}var qe="closure_lm_"+(Math.random()*1e6|0),Fe={};function Ge(u,p,_,x,M){if(Array.isArray(p)){for(let z=0;z<p.length;z++)Ge(u,p[z],_,x,M);return null}return _=Fo(_),u&&u[Ce]?u.J(p,_,m(x)?!!x.capture:!1,M):Bt(u,p,_,!1,x,M)}function Bt(u,p,_,x,M,z){if(!p)throw Error("Invalid event type");const X=m(M)?!!M.capture:!!M;let Te=Ti(u);if(Te||(u[qe]=Te=new ke(u)),_=Te.add(p,_,x,X,z),_.proxy)return _;if(x=Ei(),_.proxy=x,x.src=u,x.listener=_,u.addEventListener)R||(M=X),M===void 0&&(M=!1),u.addEventListener(p.toString(),x,M);else if(u.attachEvent)u.attachEvent(xi(p.toString()),x);else if(u.addListener&&u.removeListener)u.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Ei(){function u(_){return p.call(u.src,u.listener,_)}const p=pl;return u}function jo(u,p,_,x,M){if(Array.isArray(p))for(var z=0;z<p.length;z++)jo(u,p[z],_,x,M);else x=m(x)?!!x.capture:!!x,_=Fo(_),u&&u[Ce]?(u=u.i,z=String(p).toString(),z in u.g&&(p=u.g[z],_=De(p,_,x,M),_>-1&&(ne(p[_]),Array.prototype.splice.call(p,_,1),p.length==0&&(delete u.g[z],u.h--)))):u&&(u=Ti(u))&&(p=u.g[p.toString()],u=-1,p&&(u=De(p,_,x,M)),(_=u>-1?p[u]:null)&&Or(_))}function Or(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[Ce])be(p.i,u);else{var _=u.type,x=u.proxy;p.removeEventListener?p.removeEventListener(_,x,u.capture):p.detachEvent?p.detachEvent(xi(_),x):p.addListener&&p.removeListener&&p.removeListener(x),(_=Ti(p))?(be(_,u),_.h==0&&(_.src=null,p[qe]=null)):ne(u)}}}function xi(u){return u in Fe?Fe[u]:Fe[u]="on"+u}function pl(u,p){if(u.da)u=!0;else{p=new te(p,this);const _=u.listener,x=u.ha||u.src;u.fa&&Or(u),u=_.call(x,p)}return u}function Ti(u){return u=u[qe],u instanceof ke?u:null}var Ds="__closure_events_fn_"+(Math.random()*1e9>>>0);function Fo(u){return typeof u=="function"?u:(u[Ds]||(u[Ds]=function(p){return u.handleEvent(p)}),u[Ds])}function dt(){P.call(this),this.i=new ke(this),this.M=this,this.G=null}I(dt,P),dt.prototype[Ce]=!0,dt.prototype.removeEventListener=function(u,p,_,x){jo(this,u,p,_,x)};function at(u,p){var _,x=u.G;if(x)for(_=[];x;x=x.G)_.push(x);if(u=u.M,x=p.type||p,typeof p=="string")p=new b(p,u);else if(p instanceof b)p.target=p.target||u;else{var M=p;p=new b(x,u),Ae(p,M)}M=!0;let z,X;if(_)for(X=_.length-1;X>=0;X--)z=p.g=_[X],M=Tn(z,x,!0,p)&&M;if(z=p.g=u,M=Tn(z,x,!0,p)&&M,M=Tn(z,x,!1,p)&&M,_)for(X=0;X<_.length;X++)z=p.g=_[X],M=Tn(z,x,!1,p)&&M}dt.prototype.N=function(){if(dt.Z.N.call(this),this.i){var u=this.i;for(const p in u.g){const _=u.g[p];for(let x=0;x<_.length;x++)ne(_[x]);delete u.g[p],u.h--}}this.G=null},dt.prototype.J=function(u,p,_,x){return this.i.add(String(u),p,!1,_,x)},dt.prototype.K=function(u,p,_,x){return this.i.add(String(u),p,!0,_,x)};function Tn(u,p,_,x){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();let M=!0;for(let z=0;z<p.length;++z){const X=p[z];if(X&&!X.da&&X.capture==_){const Te=X.listener,lt=X.ha||X.src;X.fa&&be(u.i,X),M=Te.call(lt,x)!==!1&&M}}return M&&!x.defaultPrevented}function Uo(u,p){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=v(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:h.setTimeout(u,p||0)}function zo(u){u.g=Uo(()=>{u.g=null,u.i&&(u.i=!1,zo(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class ml extends P{constructor(p,_){super(),this.m=p,this.l=_,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:zo(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mr(u){P.call(this),this.h=u,this.g={}}I(Mr,P);var Bo=[];function Ii(u){pe(u.g,function(p,_){this.g.hasOwnProperty(_)&&Or(p)},u),u.g={}}Mr.prototype.N=function(){Mr.Z.N.call(this),Ii(this)},Mr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var jr=h.JSON.stringify,gl=h.JSON.parse,Vs=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function Fr(){}function yl(){}var Ur={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Si(){b.call(this,"d")}I(Si,b);function $o(){b.call(this,"c")}I($o,b);var In={},Ai=null;function zr(){return Ai=Ai||new dt}In.Ia="serverreachability";function ki(u){b.call(this,In.Ia,u)}I(ki,b);function lr(u){const p=zr();at(p,new ki(p))}In.STAT_EVENT="statevent";function ur(u,p){b.call(this,In.STAT_EVENT,u),this.stat=p}I(ur,b);function it(u){const p=zr();at(p,new ur(p,u))}In.Ja="timingevent";function qo(u,p){b.call(this,In.Ja,u),this.size=p}I(qo,b);function Br(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},p)}function $r(){this.g=!0}$r.prototype.ua=function(){this.g=!1};function _l(u,p,_,x,M,z){u.info(function(){if(u.g)if(z){var X="",Te=z.split("&");for(let We=0;We<Te.length;We++){var lt=Te[We].split("=");if(lt.length>1){const ft=lt[0];lt=lt[1];const sn=ft.split("_");X=sn.length>=2&&sn[1]=="type"?X+(ft+"="+lt+"&"):X+(ft+"=redacted&")}}}else X=null;else X=z;return"XMLHTTP REQ ("+x+") [attempt "+M+"]: "+p+`
`+_+`
`+X})}function vl(u,p,_,x,M,z,X){u.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+M+"]: "+p+`
`+_+`
`+z+" "+X})}function Mn(u,p,_,x){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+Ls(u,_)+(x?" "+x:"")})}function wl(u,p){u.info(function(){return"TIMEOUT: "+p})}$r.prototype.info=function(){};function Ls(u,p){if(!u.g)return p;if(!p)return null;try{const z=JSON.parse(p);if(z){for(u=0;u<z.length;u++)if(Array.isArray(z[u])){var _=z[u];if(!(_.length<2)){var x=_[1];if(Array.isArray(x)&&!(x.length<1)){var M=x[0];if(M!="noop"&&M!="stop"&&M!="close")for(let X=1;X<x.length;X++)x[X]=""}}}}return jr(z)}catch{return p}}var qr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Hr={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},El;function cr(){}I(cr,Fr),cr.prototype.g=function(){return new XMLHttpRequest},El=new cr;function jn(u){return encodeURIComponent(String(u))}function Ci(u){var p=1;u=u.split(":");const _=[];for(;p>0&&u.length;)_.push(u.shift()),p--;return u.length&&_.push(u.join(":")),_}function hn(u,p,_,x){this.j=u,this.i=p,this.l=_,this.S=x||1,this.V=new Mr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new xl}function xl(){this.i=null,this.g="",this.h=!1}var Tl={},Ho={};function Sn(u,p,_){u.M=1,u.A=dr(dn(p)),u.u=_,u.R=!0,Wo(u,null)}function Wo(u,p){u.F=Date.now(),Os(u),u.B=dn(u.A);var _=u.B,x=u.S;Array.isArray(x)||(x=[String(x)]),na(_.i,"t",x),u.C=0,_=u.j.L,u.h=new xl,u.g=Dl(u.j,_?p:null,!u.u),u.P>0&&(u.O=new ml(v(u.Y,u,u.g),u.P)),p=u.V,_=u.g,x=u.ba;var M="readystatechange";Array.isArray(M)||(M&&(Bo[0]=M.toString()),M=Bo);for(let z=0;z<M.length;z++){const X=Ge(_,M[z],x||p.handleEvent,!1,p.h||p);if(!X)break;p.g[X.key]=X}p=u.J?L(u.J):{},u.u?(u.v||(u.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,p)):(u.v="GET",u.g.ea(u.B,u.v,null,p)),lr(),_l(u.i,u.v,u.B,u.l,u.S,u.u)}hn.prototype.ba=function(u){u=u.target;const p=this.O;p&&Hn(u)==3?p.j():this.Y(u)},hn.prototype.Y=function(u){try{if(u==this.g)e:{const Te=Hn(this.g),lt=this.g.ya(),We=this.g.ca();if(!(Te<3)&&(Te!=3||this.g&&(this.h.h||this.g.la()||Pl(this.g)))){this.K||Te!=4||lt==7||(lt==8||We<=0?lr(3):lr(2)),Ni(this);var p=this.g.ca();this.X=p;var _=Il(this);if(this.o=p==200,vl(this.i,this.v,this.B,this.l,this.S,Te,p),this.o){if(this.U&&!this.L){t:{if(this.g){var x,M=this.g;if((x=M.g?M.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(x)){var z=x;break t}}z=null}if(u=z)Mn(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Je(this,u);else{this.o=!1,this.m=3,it(12),hr(this),Ms(this);break e}}if(this.R){u=!0;let ft;for(;!this.K&&this.C<_.length;)if(ft=Al(this,_),ft==Ho){Te==4&&(this.m=4,it(14),u=!1),Mn(this.i,this.l,null,"[Incomplete Response]");break}else if(ft==Tl){this.m=4,it(15),Mn(this.i,this.l,_,"[Invalid Chunk]"),u=!1;break}else Mn(this.i,this.l,ft,null),Je(this,ft);if(Sl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Te!=4||_.length!=0||this.h.h||(this.m=1,it(16),u=!1),this.o=this.o&&u,!u)Mn(this.i,this.l,_,"[Invalid Chunked Response]"),hr(this),Ms(this);else if(_.length>0&&!this.W){this.W=!0;var X=this.j;X.g==this&&X.aa&&!X.P&&(X.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),Ws(X),X.P=!0,it(11))}}else Mn(this.i,this.l,_,null),Je(this,_);Te==4&&hr(this),this.o&&!this.K&&(Te==4?Fi(this.j,this):(this.o=!1,Os(this)))}else sa(this.g),p==400&&_.indexOf("Unknown SID")>0?(this.m=3,it(12)):(this.m=0,it(13)),hr(this),Ms(this)}}}catch{}finally{}};function Il(u){if(!Sl(u))return u.g.la();const p=Pl(u.g);if(p==="")return"";let _="";const x=p.length,M=Hn(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return hr(u),Ms(u),"";u.h.i=new h.TextDecoder}for(let z=0;z<x;z++)u.h.h=!0,_+=u.h.i.decode(p[z],{stream:!(M&&z==x-1)});return p.length=0,u.h.g+=_,u.C=0,u.h.g}function Sl(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Al(u,p){var _=u.C,x=p.indexOf(`
`,_);return x==-1?Ho:(_=Number(p.substring(_,x)),isNaN(_)?Tl:(x+=1,x+_>p.length?Ho:(p=p.slice(x,x+_),u.C=x+_,p)))}hn.prototype.cancel=function(){this.K=!0,hr(this)};function Os(u){u.T=Date.now()+u.H,Go(u,u.H)}function Go(u,p){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Br(v(u.aa,u),p)}function Ni(u){u.D&&(h.clearTimeout(u.D),u.D=null)}hn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(wl(this.i,this.B),this.M!=2&&(lr(),it(17)),hr(this),this.m=2,Ms(this)):Go(this,this.T-u)};function Ms(u){u.j.I==0||u.K||Fi(u.j,u)}function hr(u){Ni(u);var p=u.O;p&&typeof p.dispose=="function"&&p.dispose(),u.O=null,Ii(u.V),u.g&&(p=u.g,u.g=null,p.abort(),p.dispose())}function Je(u,p){try{var _=u.j;if(_.I!=0&&(_.g==u||Qo(_.h,u))){if(!u.L&&Qo(_.h,u)&&_.I==3){try{var x=_.Ba.g.parse(p)}catch{x=null}if(Array.isArray(x)&&x.length==3){var M=x;if(M[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<u.F)ji(_),nn(_);else break e;Kn(_),it(18)}}else _.xa=M[1],0<_.xa-_.K&&M[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=Br(v(_.Va,_),6e3));js(_.h)<=1&&_.ta&&(_.ta=void 0)}else rn(_,11)}else if((u.L||_.g==u)&&ji(_),!S(p))for(M=_.Ba.g.parse(p),p=0;p<M.length;p++){let We=M[p];const ft=We[0];if(!(ft<=_.K))if(_.K=ft,We=We[1],_.I==2)if(We[0]=="c"){_.M=We[1],_.ba=We[2];const sn=We[3];sn!=null&&(_.ka=sn,_.j.info("VER="+_.ka));const yr=We[4];yr!=null&&(_.za=yr,_.j.info("SVER="+_.za));const Qn=We[5];Qn!=null&&typeof Qn=="number"&&Qn>0&&(x=1.5*Qn,_.O=x,_.j.info("backChannelRequestTimeoutMs_="+x)),x=_;const Yn=u.g;if(Yn){const Bi=Yn.g?Yn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Bi){var z=x.h;z.g||Bi.indexOf("spdy")==-1&&Bi.indexOf("quic")==-1&&Bi.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(Pi(z,z.h),z.h=null))}if(x.G){const aa=Yn.g?Yn.g.getResponseHeader("X-HTTP-Session-Id"):null;aa&&(x.wa=aa,$e(x.J,x.G,aa))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-u.F,_.j.info("Handshake RTT: "+_.T+"ms")),x=_;var X=u;if(x.na=oa(x,x.L?x.ba:null,x.W),X.L){Fs(x.h,X);var Te=X,lt=x.O;lt&&(Te.H=lt),Te.D&&(Ni(Te),Os(Te)),x.g=X}else Dt(x);_.i.length>0&&gr(_)}else We[0]!="stop"&&We[0]!="close"||rn(_,7);else _.I==3&&(We[0]=="stop"||We[0]=="close"?We[0]=="stop"?rn(_,7):Oi(_):We[0]!="noop"&&_.l&&_.l.qa(We),_.A=0)}}lr(4)}catch{}}var Fc=class{constructor(u,p){this.g=u,this.map=p}};function Ri(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ko(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function js(u){return u.h?1:u.g?u.g.size:0}function Qo(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function Pi(u,p){u.g?u.g.add(p):u.h=p}function Fs(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}Ri.prototype.cancel=function(){if(this.i=Zt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Zt(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const _ of u.g.values())p=p.concat(_.G);return p}return F(u.i)}var kl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function en(u,p){if(u){u=u.split("&");for(let _=0;_<u.length;_++){const x=u[_].indexOf("=");let M,z=null;x>=0?(M=u[_].substring(0,x),z=u[_].substring(x+1)):M=u[_],p(M,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function Fn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;u instanceof Fn?(this.l=u.l,Us(this,u.j),this.o=u.o,this.g=u.g,Un(this,u.u),this.h=u.h,Wr(this,ra(u.i)),this.m=u.m):u&&(p=String(u).match(kl))?(this.l=!1,Us(this,p[1]||"",!0),this.o=zs(p[2]||""),this.g=zs(p[3]||"",!0),Un(this,p[4]),this.h=zs(p[5]||"",!0),Wr(this,p[6]||"",!0),this.m=zs(p[7]||"")):(this.l=!1,this.i=new Me(null,this.l))}Fn.prototype.toString=function(){const u=[];var p=this.j;p&&u.push(Bs(p,Jo,!0),":");var _=this.g;return(_||p=="file")&&(u.push("//"),(p=this.o)&&u.push(Bs(p,Jo,!0),"@"),u.push(jn(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&u.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(Bs(_,_.charAt(0)=="/"?$s:Xo,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",Bs(_,Zo)),u.join("")},Fn.prototype.resolve=function(u){const p=dn(this);let _=!!u.j;_?Us(p,u.j):_=!!u.o,_?p.o=u.o:_=!!u.g,_?p.g=u.g:_=u.u!=null;var x=u.h;if(_)Un(p,u.u);else if(_=!!u.h){if(x.charAt(0)!="/")if(this.g&&!this.h)x="/"+x;else{var M=p.h.lastIndexOf("/");M!=-1&&(x=p.h.slice(0,M+1)+x)}if(M=x,M==".."||M==".")x="";else if(M.indexOf("./")!=-1||M.indexOf("/.")!=-1){x=M.lastIndexOf("/",0)==0,M=M.split("/");const z=[];for(let X=0;X<M.length;){const Te=M[X++];Te=="."?x&&X==M.length&&z.push(""):Te==".."?((z.length>1||z.length==1&&z[0]!="")&&z.pop(),x&&X==M.length&&z.push("")):(z.push(Te),x=!0)}x=z.join("/")}else x=M}return _?p.h=x:_=u.i.toString()!=="",_?Wr(p,ra(u.i)):_=!!u.m,_&&(p.m=u.m),p};function dn(u){return new Fn(u)}function Us(u,p,_){u.j=_?zs(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function Un(u,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);u.u=p}else u.u=null}function Wr(u,p,_){p instanceof Me?(u.i=p,Di(u.i,u.l)):(_||(p=Bs(p,Uc)),u.i=new Me(p,u.l))}function $e(u,p,_){u.i.set(p,_)}function dr(u){return $e(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function zs(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Bs(u,p,_){return typeof u=="string"?(u=encodeURI(u).replace(p,Yo),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Yo(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Jo=/[#\/\?@]/g,Xo=/[#\?:]/g,$s=/[#\?]/g,Uc=/[#\?@]/g,Zo=/#/g;function Me(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function zn(u){u.g||(u.g=new Map,u.h=0,u.i&&en(u.i,function(p,_){u.add(decodeURIComponent(p.replace(/\+/g," ")),_)}))}r=Me.prototype,r.add=function(u,p){zn(this),this.i=null,u=Bn(this,u);let _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(p),this.h+=1,this};function ea(u,p){zn(u),p=Bn(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function bi(u,p){return zn(u),p=Bn(u,p),u.g.has(p)}r.forEach=function(u,p){zn(this),this.g.forEach(function(_,x){_.forEach(function(M){u.call(p,M,x,this)},this)},this)};function ta(u,p){zn(u);let _=[];if(typeof p=="string")bi(u,p)&&(_=_.concat(u.g.get(Bn(u,p))));else for(u=Array.from(u.g.values()),p=0;p<u.length;p++)_=_.concat(u[p]);return _}r.set=function(u,p){return zn(this),this.i=null,u=Bn(this,u),bi(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},r.get=function(u,p){return u?(u=ta(this,u),u.length>0?String(u[0]):p):p};function na(u,p,_){ea(u,p),_.length>0&&(u.i=null,u.g.set(Bn(u,p),F(_)),u.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(let x=0;x<p.length;x++){var _=p[x];const M=jn(_);_=ta(this,_);for(let z=0;z<_.length;z++){let X=M;_[z]!==""&&(X+="="+jn(_[z])),u.push(X)}}return this.i=u.join("&")};function ra(u){const p=new Me;return p.i=u.i,u.g&&(p.g=new Map(u.g),p.h=u.h),p}function Bn(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function Di(u,p){p&&!u.j&&(zn(u),u.i=null,u.g.forEach(function(_,x){const M=x.toLowerCase();x!=M&&(ea(this,x),na(this,M,_))},u)),u.j=p}function $n(u,p){const _=new $r;if(h.Image){const x=new Image;x.onload=E(At,_,"TestLoadImage: loaded",!0,p,x),x.onerror=E(At,_,"TestLoadImage: error",!1,p,x),x.onabort=E(At,_,"TestLoadImage: abort",!1,p,x),x.ontimeout=E(At,_,"TestLoadImage: timeout",!1,p,x),h.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=u}else p(!1)}function qn(u,p){const _=new $r,x=new AbortController,M=setTimeout(()=>{x.abort(),At(_,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:x.signal}).then(z=>{clearTimeout(M),z.ok?At(_,"TestPingServer: ok",!0,p):At(_,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(M),At(_,"TestPingServer: error",!1,p)})}function At(u,p,_,x,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),x(_)}catch{}}function qs(){this.g=new Vs}function fr(u){this.i=u.Sb||null,this.h=u.ab||!1}I(fr,Fr),fr.prototype.g=function(){return new tn(this.i,this.h)};function tn(u,p){dt.call(this),this.H=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}I(tn,dt),r=tn.prototype,r.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=p,this.readyState=1,An(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(p.body=u),(this.H||h).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Gr(this)),this.readyState=0},r.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,An(this)),this.g&&(this.readyState=3,An(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Cl(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Cl(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}r.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?Gr(this):An(this),this.readyState==3&&Cl(this)}},r.Oa=function(u){this.g&&(this.response=this.responseText=u,Gr(this))},r.Na=function(u){this.g&&(this.response=u,Gr(this))},r.ga=function(){this.g&&Gr(this)};function Gr(u){u.readyState=4,u.l=null,u.j=null,u.B=null,An(u)}r.setRequestHeader=function(u,p){this.A.append(u,p)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var _=p.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=p.next();return u.join(`\r
`)};function An(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(tn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Nl(u){let p="";return pe(u,function(_,x){p+=x,p+=":",p+=_,p+=`\r
`}),p}function Vi(u,p,_){e:{for(x in _){var x=!1;break e}x=!0}x||(_=Nl(_),typeof u=="string"?_!=null&&jn(_):$e(u,p,_))}function Ke(u){dt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}I(Ke,dt);var Rl=/^https?$/i,zc=["POST","PUT"];r=Ke.prototype,r.Fa=function(u){this.H=u},r.ea=function(u,p,_,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():El.g(),this.g.onreadystatechange=k(v(this.Ca,this));try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(z){Kr(this,z);return}if(u=_||"",_=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var M in x)_.set(M,x[M]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const z of x.keys())_.set(z,x.get(z));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(_.keys()).find(z=>z.toLowerCase()=="content-type"),M=h.FormData&&u instanceof h.FormData,!(Array.prototype.indexOf.call(zc,p,void 0)>=0)||x||M||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[z,X]of _)this.g.setRequestHeader(z,X);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(z){Kr(this,z)}};function Kr(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.o=5,Qr(u),mr(u)}function Qr(u){u.A||(u.A=!0,at(u,"complete"),at(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,at(this,"complete"),at(this,"abort"),mr(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),mr(this,!0)),Ke.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?pr(this):this.Xa())},r.Xa=function(){pr(this)};function pr(u){if(u.h&&typeof l<"u"){if(u.v&&Hn(u)==4)setTimeout(u.Ca.bind(u),0);else if(at(u,"readystatechange"),Hn(u)==4){u.h=!1;try{const z=u.ca();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var _;if(!(_=p)){var x;if(x=z===0){let X=String(u.D).match(kl)[1]||null;!X&&h.self&&h.self.location&&(X=h.self.location.protocol.slice(0,-1)),x=!Rl.test(X?X.toLowerCase():"")}_=x}if(_)at(u,"complete"),at(u,"success");else{u.o=6;try{var M=Hn(u)>2?u.g.statusText:""}catch{M=""}u.l=M+" ["+u.ca()+"]",Qr(u)}}finally{mr(u)}}}}function mr(u,p){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const _=u.g;u.g=null,p||at(u,"ready");try{_.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Hn(u){return u.g?u.g.readyState:0}r.ca=function(){try{return Hn(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),gl(p)}};function Pl(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function sa(u){const p={};u=(u.g&&Hn(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<u.length;x++){if(S(u[x]))continue;var _=Ci(u[x]);const M=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const z=p[M]||[];p[M]=z,z.push(_)}oe(p,function(x){return x.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Wn(u,p,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||p}function Li(u){this.za=0,this.i=[],this.j=new $r,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Wn("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Wn("baseRetryDelayMs",5e3,u),this.Za=Wn("retryDelaySeedMs",1e4,u),this.Ta=Wn("forwardChannelMaxRetries",2,u),this.va=Wn("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Ri(u&&u.concurrentRequestLimit),this.Ba=new qs,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Li.prototype,r.ka=8,r.I=1,r.connect=function(u,p,_,x){it(0),this.W=u,this.H=p||{},_&&x!==void 0&&(this.H.OSID=_,this.H.OAID=x),this.F=this.X,this.J=oa(this,null,this.W),gr(this)};function Oi(u){if(Mi(u),u.I==3){var p=u.V++,_=dn(u.J);if($e(_,"SID",u.M),$e(_,"RID",p),$e(_,"TYPE","terminate"),Gn(u,_),p=new hn(u,u.j,p),p.M=2,p.A=dr(dn(_)),_=!1,h.navigator&&h.navigator.sendBeacon)try{_=h.navigator.sendBeacon(p.A.toString(),"")}catch{}!_&&h.Image&&(new Image().src=p.A,_=!0),_||(p.g=Dl(p.j,null),p.g.ea(p.A)),p.F=Date.now(),Os(p)}Gs(u)}function nn(u){u.g&&(Ws(u),u.g.cancel(),u.g=null)}function Mi(u){nn(u),u.v&&(h.clearTimeout(u.v),u.v=null),ji(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&h.clearTimeout(u.m),u.m=null)}function gr(u){if(!Ko(u.h)&&!u.m){u.m=!0;var p=u.Ea;Se||T(),ye||(Se(),ye=!0),N.add(p,u),u.D=0}}function bl(u,p){return js(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=p.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Br(v(u.Ea,u,p),Ui(u,u.D)),u.D++,!0)}r.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const M=new hn(this,this.j,u);let z=this.o;if(this.U&&(z?(z=L(z),Ae(z,this.U)):z=this.U),this.u!==null||this.R||(M.J=z,z=null),this.S)e:{for(var p=0,_=0;_<this.i.length;_++){t:{var x=this.i[_];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(p+=x,p>4096){p=_;break e}if(p===4096||_===this.i.length-1){p=_+1;break e}}p=1e3}else p=1e3;p=ia(this,M,p),_=dn(this.J),$e(_,"RID",u),$e(_,"CVER",22),this.G&&$e(_,"X-HTTP-Session-Id",this.G),Gn(this,_),z&&(this.R?p="headers="+jn(Nl(z))+"&"+p:this.u&&Vi(_,this.u,z)),Pi(this.h,M),this.Ra&&$e(_,"TYPE","init"),this.S?($e(_,"$req",p),$e(_,"SID","null"),M.U=!0,Sn(M,_,null)):Sn(M,_,p),this.I=2}}else this.I==3&&(u?Hs(this,u):this.i.length==0||Ko(this.h)||Hs(this))};function Hs(u,p){var _;p?_=p.l:_=u.V++;const x=dn(u.J);$e(x,"SID",u.M),$e(x,"RID",_),$e(x,"AID",u.K),Gn(u,x),u.u&&u.o&&Vi(x,u.u,u.o),_=new hn(u,u.j,_,u.D+1),u.u===null&&(_.J=u.o),p&&(u.i=p.G.concat(u.i)),p=ia(u,_,1e3),_.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Pi(u.h,_),Sn(_,x,p)}function Gn(u,p){u.H&&pe(u.H,function(_,x){$e(p,x,_)}),u.l&&pe({},function(_,x){$e(p,x,_)})}function ia(u,p,_){_=Math.min(u.i.length,_);const x=u.l?v(u.l.Ka,u.l,u):null;e:{var M=u.i;let Te=-1;for(;;){const lt=["count="+_];Te==-1?_>0?(Te=M[0].g,lt.push("ofs="+Te)):Te=0:lt.push("ofs="+Te);let We=!0;for(let ft=0;ft<_;ft++){var z=M[ft].g;const sn=M[ft].map;if(z-=Te,z<0)Te=Math.max(0,M[ft].g-100),We=!1;else try{z="req"+z+"_"||"";try{var X=sn instanceof Map?sn:Object.entries(sn);for(const[yr,Qn]of X){let Yn=Qn;m(Qn)&&(Yn=jr(Qn)),lt.push(z+yr+"="+encodeURIComponent(Yn))}}catch(yr){throw lt.push(z+"type="+encodeURIComponent("_badmap")),yr}}catch{x&&x(sn)}}if(We){X=lt.join("&");break e}}X=void 0}return u=u.i.splice(0,_),p.G=u,X}function Dt(u){if(!u.g&&!u.v){u.Y=1;var p=u.Da;Se||T(),ye||(Se(),ye=!0),N.add(p,u),u.A=0}}function Kn(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Br(v(u.Da,u),Ui(u,u.A)),u.A++,!0)}r.Da=function(){if(this.v=null,Yr(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Br(v(this.Wa,this),u)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,it(10),nn(this),Yr(this))};function Ws(u){u.B!=null&&(h.clearTimeout(u.B),u.B=null)}function Yr(u){u.g=new hn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var p=dn(u.na);$e(p,"RID","rpc"),$e(p,"SID",u.M),$e(p,"AID",u.K),$e(p,"CI",u.F?"0":"1"),!u.F&&u.ia&&$e(p,"TO",u.ia),$e(p,"TYPE","xmlhttp"),Gn(u,p),u.u&&u.o&&Vi(p,u.u,u.o),u.O&&(u.g.H=u.O);var _=u.g;u=u.ba,_.M=1,_.A=dr(dn(p)),_.u=null,_.R=!0,Wo(_,u)}r.Va=function(){this.C!=null&&(this.C=null,nn(this),Kn(this),it(19))};function ji(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function Fi(u,p){var _=null;if(u.g==p){ji(u),Ws(u),u.g=null;var x=2}else if(Qo(u.h,p))_=p.G,Fs(u.h,p),x=1;else return;if(u.I!=0){if(p.o)if(x==1){_=p.u?p.u.length:0,p=Date.now()-p.F;var M=u.D;x=zr(),at(x,new qo(x,_)),gr(u)}else Dt(u);else if(M=p.m,M==3||M==0&&p.X>0||!(x==1&&bl(u,p)||x==2&&Kn(u)))switch(_&&_.length>0&&(p=u.h,p.i=p.i.concat(_)),M){case 1:rn(u,5);break;case 4:rn(u,10);break;case 3:rn(u,6);break;default:rn(u,2)}}}function Ui(u,p){let _=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(_*=2),_*p}function rn(u,p){if(u.j.info("Error code "+p),p==2){var _=v(u.bb,u),x=u.Ua;const M=!x;x=new Fn(x||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Us(x,"https"),dr(x),M?$n(x.toString(),_):qn(x.toString(),_)}else it(2);u.I=0,u.l&&u.l.pa(p),Gs(u),Mi(u)}r.bb=function(u){u?(this.j.info("Successfully pinged google.com"),it(2)):(this.j.info("Failed to ping google.com"),it(1))};function Gs(u){if(u.I=0,u.ja=[],u.l){const p=Zt(u.h);(p.length!=0||u.i.length!=0)&&(B(u.ja,p),B(u.ja,u.i),u.h.i.length=0,F(u.i),u.i.length=0),u.l.oa()}}function oa(u,p,_){var x=_ instanceof Fn?dn(_):new Fn(_);if(x.g!="")p&&(x.g=p+"."+x.g),Un(x,x.u);else{var M=h.location;x=M.protocol,p=p?p+"."+M.hostname:M.hostname,M=+M.port;const z=new Fn(null);x&&Us(z,x),p&&(z.g=p),M&&Un(z,M),_&&(z.h=_),x=z}return _=u.G,p=u.wa,_&&p&&$e(x,_,p),$e(x,"VER",u.ka),Gn(u,x),x}function Dl(u,p,_){if(p&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Aa&&!u.ma?new Ke(new fr({ab:_})):new Ke(u.ma),p.Fa(u.L),p}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Vl(){}r=Vl.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function zi(){}zi.prototype.g=function(u,p){return new kt(u,p)};function kt(u,p){dt.call(this),this.g=new Li(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(u?u["X-WebChannel-Client-Profile"]=p.sa:u={"X-WebChannel-Client-Profile":p.sa}),this.g.U=u,(u=p&&p.Qb)&&!S(u)&&(this.g.u=u),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!S(p)&&(this.g.G=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new Jr(this)}I(kt,dt),kt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},kt.prototype.close=function(){Oi(this.g)},kt.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.v&&(_={},_.__data__=jr(u),u=_);p.i.push(new Fc(p.Ya++,u)),p.I==3&&gr(p)},kt.prototype.N=function(){this.g.l=null,delete this.j,Oi(this.g),delete this.g,kt.Z.N.call(this)};function Ll(u){Si.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const _ in p){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}I(Ll,Si);function Ol(){$o.call(this),this.status=1}I(Ol,$o);function Jr(u){this.g=u}I(Jr,Vl),Jr.prototype.ra=function(){at(this.g,"a")},Jr.prototype.qa=function(u){at(this.g,new Ll(u))},Jr.prototype.pa=function(u){at(this.g,new Ol)},Jr.prototype.oa=function(){at(this.g,"b")},zi.prototype.createWebChannel=zi.prototype.g,kt.prototype.send=kt.prototype.o,kt.prototype.open=kt.prototype.m,kt.prototype.close=kt.prototype.close,a_=function(){return new zi},o_=function(){return zr()},i_=In,jd={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},qr.NO_ERROR=0,qr.TIMEOUT=8,qr.HTTP_ERROR=6,zu=qr,Hr.COMPLETE="complete",s_=Hr,yl.EventType=Ur,Ur.OPEN="a",Ur.CLOSE="b",Ur.ERROR="c",Ur.MESSAGE="d",dt.prototype.listen=dt.prototype.J,Oa=yl,Ke.prototype.listenOnce=Ke.prototype.K,Ke.prototype.getLastError=Ke.prototype.Ha,Ke.prototype.getLastErrorCode=Ke.prototype.ya,Ke.prototype.getStatus=Ke.prototype.ca,Ke.prototype.getResponseJson=Ke.prototype.La,Ke.prototype.getResponseText=Ke.prototype.la,Ke.prototype.send=Ke.prototype.ea,Ke.prototype.setWithCredentials=Ke.prototype.Fa,r_=Ke}).apply(typeof bu<"u"?bu:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ft.UNAUTHENTICATED=new Ft(null),Ft.GOOGLE_CREDENTIALS=new Ft("google-credentials-uid"),Ft.FIRST_PARTY=new Ft("first-party-uid"),Ft.MOCK_USER=new Ft("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Po="12.9.0";function PI(r){Po=r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fi=new rf("@firebase/firestore");function uo(){return fi.logLevel}function ie(r,...e){if(fi.logLevel<=Ve.DEBUG){const t=e.map(_f);fi.debug(`Firestore (${Po}): ${r}`,...t)}}function br(r,...e){if(fi.logLevel<=Ve.ERROR){const t=e.map(_f);fi.error(`Firestore (${Po}): ${r}`,...t)}}function pi(r,...e){if(fi.logLevel<=Ve.WARN){const t=e.map(_f);fi.warn(`Firestore (${Po}): ${r}`,...t)}}function _f(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ve(r,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,l_(r,i,t)}function l_(r,e,t){let i=`FIRESTORE (${Po}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw br(i),new Error(i)}function He(r,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,r||l_(e,o,i)}function Ie(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class re extends Lr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class bI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Ft.UNAUTHENTICATED)))}shutdown(){}}class DI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class VI{constructor(e){this.t=e,this.currentUser=Ft.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){He(this.o===void 0,42304);let i=this.i;const o=y=>this.i!==i?(i=this.i,t(y)):Promise.resolve();let l=new Nr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Nr,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const y=l;e.enqueueRetryable((async()=>{await y.promise,await o(this.currentUser)}))},m=y=>{ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((y=>m(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?m(y):(ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Nr)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(He(typeof i.accessToken=="string",31837,{l:i}),new u_(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return He(e===null||typeof e=="string",2055,{h:e}),new Ft(e)}}class LI{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Ft.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class OI{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new LI(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Ft.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Zg{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class MI{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,vn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){He(this.o===void 0,3512);const i=l=>{l.error!=null&&ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.m;return this.m=l.token,ie("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const o=l=>{ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Zg(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(He(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Zg(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jI(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<r;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=jI(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%62))}return i}}function Le(r,e){return r<e?-1:r>e?1:0}function Fd(r,e){const t=Math.min(r.length,e.length);for(let i=0;i<t;i++){const o=r.charAt(i),l=e.charAt(i);if(o!==l)return wd(o)===wd(l)?Le(o,l):wd(o)?1:-1}return Le(r.length,e.length)}const FI=55296,UI=57343;function wd(r){const e=r.charCodeAt(0);return e>=FI&&e<=UI}function To(r,e,t){return r.length===e.length&&r.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ey="__name__";class tr{constructor(e,t,i){t===void 0?t=0:t>e.length&&ve(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&ve(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return tr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof tr?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=tr.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Le(e.length,t.length)}static compareSegments(e,t){const i=tr.isNumericId(e),o=tr.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?tr.extractNumericId(e).compare(tr.extractNumericId(t)):Fd(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Es.fromString(e.substring(4,e.length-2))}}class Ye extends tr{construct(e,t,i){return new Ye(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new re(H.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new Ye(t)}static emptyPath(){return new Ye([])}}const zI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pt extends tr{construct(e,t,i){return new Pt(e,t,i)}static isValidIdentifier(e){return zI.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ey}static keyField(){return new Pt([ey])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new re(H.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let h=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new re(H.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[o+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new re(H.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=y,o+=2}else m==="`"?(h=!h,o++):m!=="."||h?(i+=m,o++):(l(),o++)}if(l(),h)throw new re(H.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pt(t)}static emptyPath(){return new Pt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.path=e}static fromPath(e){return new fe(Ye.fromString(e))}static fromName(e){return new fe(Ye.fromString(e).popFirst(5))}static empty(){return new fe(Ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ye.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new fe(new Ye(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c_(r,e,t){if(!t)throw new re(H.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function BI(r,e,t,i){if(e===!0&&i===!0)throw new re(H.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function ty(r){if(!fe.isDocumentKey(r))throw new re(H.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function ny(r){if(fe.isDocumentKey(r))throw new re(H.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function h_(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function xc(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":ve(12329,{type:typeof r})}function Dr(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new re(H.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=xc(r);throw new re(H.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(r,e){const t={typeString:r};return e&&(t.value=e),t}function ll(r,e){if(!h_(r))throw new re(H.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){t=`JSON missing required field: '${i}'`;break}const h=r[i];if(o&&typeof h!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(l!==void 0&&h!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new re(H.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ry=-62135596800,sy=1e6;class et{static now(){return et.fromMillis(Date.now())}static fromDate(e){return et.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*sy);return new et(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new re(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new re(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<ry)throw new re(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new re(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/sy}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:et._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ll(e,et._jsonSchema))return new et(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ry;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}et._jsonSchemaVersion="firestore/timestamp/1.0",et._jsonSchema={type:yt("string",et._jsonSchemaVersion),seconds:yt("number"),nanoseconds:yt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{static fromTimestamp(e){return new xe(e)}static min(){return new xe(new et(0,0))}static max(){return new xe(new et(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qa=-1;function $I(r,e){const t=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,o=xe.fromTimestamp(i===1e9?new et(t+1,0):new et(t,i));return new Ts(o,fe.empty(),e)}function qI(r){return new Ts(r.readTime,r.key,Qa)}class Ts{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Ts(xe.min(),fe.empty(),Qa)}static max(){return new Ts(xe.max(),fe.empty(),Qa)}}function HI(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=fe.comparator(r.documentKey,e.documentKey),t!==0?t:Le(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class GI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bo(r){if(r.code!==H.FAILED_PRECONDITION||r.message!==WI)throw r;ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ve(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new W(((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof W?t:W.resolve(t)}catch(t){return W.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):W.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):W.reject(t)}static resolve(e){return new W(((t,i)=>{t(e)}))}static reject(e){return new W(((t,i)=>{i(e)}))}static waitFor(e){return new W(((t,i)=>{let o=0,l=0,h=!1;e.forEach((m=>{++o,m.next((()=>{++l,h&&l===o&&t()}),(y=>i(y)))})),h=!0,l===o&&t()}))}static or(e){let t=W.resolve(!1);for(const i of e)t=t.next((o=>o?W.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,l)=>{i.push(t.call(this,o,l))})),this.waitFor(i)}static mapArray(e,t){return new W(((i,o)=>{const l=e.length,h=new Array(l);let m=0;for(let y=0;y<l;y++){const v=y;t(e[v]).next((E=>{h[v]=E,++m,m===l&&i(h)}),(E=>o(E)))}}))}static doWhile(e,t){return new W(((i,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):i()};l()}))}}function KI(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Do(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Tc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wf=-1;function Ic(r){return r==null}function nc(r){return r===0&&1/r==-1/0}function QI(r){return typeof r=="number"&&Number.isInteger(r)&&!nc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d_="";function YI(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=iy(e)),e=JI(r.get(t),e);return iy(e)}function JI(r,e){let t=e;const i=r.length;for(let o=0;o<i;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case d_:t+="";break;default:t+=l}}return t}function iy(r){return r+d_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oy(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Ps(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function f_(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e,t){this.comparator=e,this.root=t||Rt.EMPTY}insert(e,t){return new st(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Rt.BLACK,null,null))}remove(e){return new st(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Du(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Du(this.root,e,this.comparator,!1)}getReverseIterator(){return new Du(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Du(this.root,e,this.comparator,!0)}}class Du{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Rt{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??Rt.RED,this.left=o??Rt.EMPTY,this.right=l??Rt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new Rt(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Rt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Rt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Rt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Rt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ve(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ve(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ve(27949);return e+(this.isRed()?0:1)}}Rt.EMPTY=null,Rt.RED=!0,Rt.BLACK=!1;Rt.EMPTY=new class{constructor(){this.size=0}get key(){throw ve(57766)}get value(){throw ve(16141)}get color(){throw ve(16727)}get left(){throw ve(29726)}get right(){throw ve(36894)}copy(e,t,i,o,l){return this}insert(e,t,i){return new Rt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.comparator=e,this.data=new st(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ay(this.data.getIterator())}getIteratorFrom(e){return new ay(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Et)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Et(this.comparator);return t.data=e,t}}class ay{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.fields=e,e.sort(Pt.comparator)}static empty(){return new un([])}unionWith(e){let t=new Et(Pt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new un(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return To(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new p_("Invalid base64 string: "+l):l}})(e);return new bt(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l})(e);return new bt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bt.EMPTY_BYTE_STRING=new bt("");const XI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Is(r){if(He(!!r,39018),typeof r=="string"){let e=0;const t=XI.exec(r);if(He(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ct(r.seconds),nanos:ct(r.nanos)}}function ct(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Ss(r){return typeof r=="string"?bt.fromBase64String(r):bt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m_="server_timestamp",g_="__type__",y_="__previous_value__",__="__local_write_time__";function Ef(r){var t,i;return((i=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[g_])==null?void 0:i.stringValue)===m_}function Sc(r){const e=r.mapValue.fields[y_];return Ef(e)?Sc(e):e}function Ya(r){const e=Is(r.mapValue.fields[__].timestampValue);return new et(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(e,t,i,o,l,h,m,y,v,E,I){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.longPollingOptions=y,this.useFetchStreams=v,this.isUsingEmulator=E,this.apiKey=I}}const rc="(default)";class Ja{constructor(e,t){this.projectId=e,this.database=t||rc}static empty(){return new Ja("","")}get isDefaultDatabase(){return this.database===rc}isEqual(e){return e instanceof Ja&&e.projectId===this.projectId&&e.database===this.database}}function eS(r,e){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new re(H.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ja(r.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v_="__type__",tS="__max__",Vu={mapValue:{}},w_="__vector__",sc="value";function As(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Ef(r)?4:rS(r)?9007199254740991:nS(r)?10:11:ve(28295,{value:r})}function ar(r,e){if(r===e)return!0;const t=As(r);if(t!==As(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Ya(r).isEqual(Ya(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=Is(o.timestampValue),m=Is(l.timestampValue);return h.seconds===m.seconds&&h.nanos===m.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,l){return Ss(o.bytesValue).isEqual(Ss(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,l){return ct(o.geoPointValue.latitude)===ct(l.geoPointValue.latitude)&&ct(o.geoPointValue.longitude)===ct(l.geoPointValue.longitude)})(r,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return ct(o.integerValue)===ct(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=ct(o.doubleValue),m=ct(l.doubleValue);return h===m?nc(h)===nc(m):isNaN(h)&&isNaN(m)}return!1})(r,e);case 9:return To(r.arrayValue.values||[],e.arrayValue.values||[],ar);case 10:case 11:return(function(o,l){const h=o.mapValue.fields||{},m=l.mapValue.fields||{};if(oy(h)!==oy(m))return!1;for(const y in h)if(h.hasOwnProperty(y)&&(m[y]===void 0||!ar(h[y],m[y])))return!1;return!0})(r,e);default:return ve(52216,{left:r})}}function Xa(r,e){return(r.values||[]).find((t=>ar(t,e)))!==void 0}function Io(r,e){if(r===e)return 0;const t=As(r),i=As(e);if(t!==i)return Le(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Le(r.booleanValue,e.booleanValue);case 2:return(function(l,h){const m=ct(l.integerValue||l.doubleValue),y=ct(h.integerValue||h.doubleValue);return m<y?-1:m>y?1:m===y?0:isNaN(m)?isNaN(y)?0:-1:1})(r,e);case 3:return ly(r.timestampValue,e.timestampValue);case 4:return ly(Ya(r),Ya(e));case 5:return Fd(r.stringValue,e.stringValue);case 6:return(function(l,h){const m=Ss(l),y=Ss(h);return m.compareTo(y)})(r.bytesValue,e.bytesValue);case 7:return(function(l,h){const m=l.split("/"),y=h.split("/");for(let v=0;v<m.length&&v<y.length;v++){const E=Le(m[v],y[v]);if(E!==0)return E}return Le(m.length,y.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,h){const m=Le(ct(l.latitude),ct(h.latitude));return m!==0?m:Le(ct(l.longitude),ct(h.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return uy(r.arrayValue,e.arrayValue);case 10:return(function(l,h){var k,F,B,$;const m=l.fields||{},y=h.fields||{},v=(k=m[sc])==null?void 0:k.arrayValue,E=(F=y[sc])==null?void 0:F.arrayValue,I=Le(((B=v==null?void 0:v.values)==null?void 0:B.length)||0,(($=E==null?void 0:E.values)==null?void 0:$.length)||0);return I!==0?I:uy(v,E)})(r.mapValue,e.mapValue);case 11:return(function(l,h){if(l===Vu.mapValue&&h===Vu.mapValue)return 0;if(l===Vu.mapValue)return 1;if(h===Vu.mapValue)return-1;const m=l.fields||{},y=Object.keys(m),v=h.fields||{},E=Object.keys(v);y.sort(),E.sort();for(let I=0;I<y.length&&I<E.length;++I){const k=Fd(y[I],E[I]);if(k!==0)return k;const F=Io(m[y[I]],v[E[I]]);if(F!==0)return F}return Le(y.length,E.length)})(r.mapValue,e.mapValue);default:throw ve(23264,{he:t})}}function ly(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Le(r,e);const t=Is(r),i=Is(e),o=Le(t.seconds,i.seconds);return o!==0?o:Le(t.nanos,i.nanos)}function uy(r,e){const t=r.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=Io(t[o],i[o]);if(l)return l}return Le(t.length,i.length)}function So(r){return Ud(r)}function Ud(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const i=Is(t);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return Ss(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return fe.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=Ud(l);return i+"]"})(r.arrayValue):"mapValue"in r?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of i)l?l=!1:o+=",",o+=`${h}:${Ud(t.fields[h])}`;return o+"}"})(r.mapValue):ve(61005,{value:r})}function Bu(r){switch(As(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Sc(r);return e?16+Bu(e):16;case 5:return 2*r.stringValue.length;case 6:return Ss(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,l)=>o+Bu(l)),0)})(r.arrayValue);case 10:case 11:return(function(i){let o=0;return Ps(i.fields,((l,h)=>{o+=l.length+Bu(h)})),o})(r.mapValue);default:throw ve(13486,{value:r})}}function cy(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function zd(r){return!!r&&"integerValue"in r}function xf(r){return!!r&&"arrayValue"in r}function hy(r){return!!r&&"nullValue"in r}function dy(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function $u(r){return!!r&&"mapValue"in r}function nS(r){var t,i;return((i=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[v_])==null?void 0:i.stringValue)===w_}function Ba(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Ps(r.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Ba(i))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ba(r.arrayValue.values[t]);return e}return{...r}}function rS(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===tS}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.value=e}static empty(){return new Xt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!$u(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ba(t)}setAll(e){let t=Pt.emptyPath(),i={},o=[];e.forEach(((h,m)=>{if(!t.isImmediateParentOf(m)){const y=this.getFieldsMap(t);this.applyChanges(y,i,o),i={},o=[],t=m.popLast()}h?i[m.lastSegment()]=Ba(h):o.push(m.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());$u(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ar(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];$u(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Ps(t,((o,l)=>e[o]=l));for(const o of i)delete e[o]}clone(){return new Xt(Ba(this.value))}}function E_(r){const e=[];return Ps(r.fields,((t,i)=>{const o=new Pt([t]);if($u(i)){const l=E_(i.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)})),new un(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e,t,i,o,l,h,m){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=h,this.documentState=m}static newInvalidDocument(e){return new Ut(e,0,xe.min(),xe.min(),xe.min(),Xt.empty(),0)}static newFoundDocument(e,t,i,o){return new Ut(e,1,t,xe.min(),i,o,0)}static newNoDocument(e,t){return new Ut(e,2,t,xe.min(),xe.min(),Xt.empty(),0)}static newUnknownDocument(e,t){return new Ut(e,3,t,xe.min(),xe.min(),Xt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Xt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Xt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(e,t){this.position=e,this.inclusive=t}}function fy(r,e,t){let i=0;for(let o=0;o<r.position.length;o++){const l=e[o],h=r.position[o];if(l.field.isKeyField()?i=fe.comparator(fe.fromName(h.referenceValue),t.key):i=Io(h,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function py(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!ar(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e,t="asc"){this.field=e,this.dir=t}}function sS(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{}class gt extends x_{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new oS(e,t,i):t==="array-contains"?new uS(e,i):t==="in"?new cS(e,i):t==="not-in"?new hS(e,i):t==="array-contains-any"?new dS(e,i):new gt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new aS(e,i):new lS(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Io(t,this.value)):t!==null&&As(this.value)===As(t)&&this.matchesComparison(Io(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ve(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class On extends x_{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new On(e,t)}matches(e){return T_(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function T_(r){return r.op==="and"}function I_(r){return iS(r)&&T_(r)}function iS(r){for(const e of r.filters)if(e instanceof On)return!1;return!0}function Bd(r){if(r instanceof gt)return r.field.canonicalString()+r.op.toString()+So(r.value);if(I_(r))return r.filters.map((e=>Bd(e))).join(",");{const e=r.filters.map((t=>Bd(t))).join(",");return`${r.op}(${e})`}}function S_(r,e){return r instanceof gt?(function(i,o){return o instanceof gt&&i.op===o.op&&i.field.isEqual(o.field)&&ar(i.value,o.value)})(r,e):r instanceof On?(function(i,o){return o instanceof On&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((l,h,m)=>l&&S_(h,o.filters[m])),!0):!1})(r,e):void ve(19439)}function A_(r){return r instanceof gt?(function(t){return`${t.field.canonicalString()} ${t.op} ${So(t.value)}`})(r):r instanceof On?(function(t){return t.op.toString()+" {"+t.getFilters().map(A_).join(" ,")+"}"})(r):"Filter"}class oS extends gt{constructor(e,t,i){super(e,t,i),this.key=fe.fromName(i.referenceValue)}matches(e){const t=fe.comparator(e.key,this.key);return this.matchesComparison(t)}}class aS extends gt{constructor(e,t){super(e,"in",t),this.keys=k_("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class lS extends gt{constructor(e,t){super(e,"not-in",t),this.keys=k_("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function k_(r,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>fe.fromName(i.referenceValue)))}class uS extends gt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return xf(t)&&Xa(t.arrayValue,this.value)}}class cS extends gt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Xa(this.value.arrayValue,t)}}class hS extends gt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Xa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Xa(this.value.arrayValue,t)}}class dS extends gt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!xf(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Xa(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(e,t=null,i=[],o=[],l=null,h=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=h,this.endAt=m,this.Te=null}}function my(r,e=null,t=[],i=[],o=null,l=null,h=null){return new fS(r,e,t,i,o,l,h)}function Tf(r){const e=Ie(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Bd(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),Ic(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>So(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>So(i))).join(",")),e.Te=t}return e.Te}function If(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!sS(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!S_(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!py(r.startAt,e.startAt)&&py(r.endAt,e.endAt)}function $d(r){return fe.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e,t=null,i=[],o=[],l=null,h="F",m=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=h,this.startAt=m,this.endAt=y,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function pS(r,e,t,i,o,l,h,m){return new Vo(r,e,t,i,o,l,h,m)}function Sf(r){return new Vo(r)}function gy(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function mS(r){return fe.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function C_(r){return r.collectionGroup!==null}function $a(r){const e=Ie(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let m=new Et(Pt.comparator);return h.filters.forEach((y=>{y.getFlattenedFilters().forEach((v=>{v.isInequality()&&(m=m.add(v.field))}))})),m})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Za(l,i))})),t.has(Pt.keyField().canonicalString())||e.Ie.push(new Za(Pt.keyField(),i))}return e.Ie}function sr(r){const e=Ie(r);return e.Ee||(e.Ee=gS(e,$a(r))),e.Ee}function gS(r,e){if(r.limitType==="F")return my(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new Za(o.field,l)}));const t=r.endAt?new ic(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new ic(r.startAt.position,r.startAt.inclusive):null;return my(r.path,r.collectionGroup,e,r.filters,r.limit,t,i)}}function qd(r,e){const t=r.filters.concat([e]);return new Vo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function yS(r,e){const t=r.explicitOrderBy.concat([e]);return new Vo(r.path,r.collectionGroup,t,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}function Hd(r,e,t){return new Vo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Ac(r,e){return If(sr(r),sr(e))&&r.limitType===e.limitType}function N_(r){return`${Tf(sr(r))}|lt:${r.limitType}`}function co(r){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>A_(o))).join(", ")}]`),Ic(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>So(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>So(o))).join(",")),`Target(${i})`})(sr(r))}; limitType=${r.limitType})`}function kc(r,e){return e.isFoundDocument()&&(function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):fe.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(r,e)&&(function(i,o){for(const l of $a(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0})(r,e)&&(function(i,o){return!(i.startAt&&!(function(h,m,y){const v=fy(h,m,y);return h.inclusive?v<=0:v<0})(i.startAt,$a(i),o)||i.endAt&&!(function(h,m,y){const v=fy(h,m,y);return h.inclusive?v>=0:v>0})(i.endAt,$a(i),o))})(r,e)}function _S(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function R_(r){return(e,t)=>{let i=!1;for(const o of $a(r)){const l=vS(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function vS(r,e,t){const i=r.field.isKeyField()?fe.comparator(e.key,t.key):(function(l,h,m){const y=h.data.field(l),v=m.data.field(l);return y!==null&&v!==null?Io(y,v):ve(42886)})(r.field,e,t);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return ve(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ps(this.inner,((t,i)=>{for(const[o,l]of i)e(o,l)}))}isEmpty(){return f_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wS=new st(fe.comparator);function Vr(){return wS}const P_=new st(fe.comparator);function Ma(...r){let e=P_;for(const t of r)e=e.insert(t.key,t);return e}function b_(r){let e=P_;return r.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function ai(){return qa()}function D_(){return qa()}function qa(){return new _i((r=>r.toString()),((r,e)=>r.isEqual(e)))}const ES=new st(fe.comparator),xS=new Et(fe.comparator);function Oe(...r){let e=xS;for(const t of r)e=e.add(t);return e}const TS=new Et(Le);function IS(){return TS}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Af(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nc(e)?"-0":e}}function V_(r){return{integerValue:""+r}}function SS(r,e){return QI(e)?V_(e):Af(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(){this._=void 0}}function AS(r,e,t){return r instanceof oc?(function(o,l){const h={fields:{[g_]:{stringValue:m_},[__]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Ef(l)&&(l=Sc(l)),l&&(h.fields[y_]=l),{mapValue:h}})(t,e):r instanceof el?O_(r,e):r instanceof tl?M_(r,e):(function(o,l){const h=L_(o,l),m=yy(h)+yy(o.Ae);return zd(h)&&zd(o.Ae)?V_(m):Af(o.serializer,m)})(r,e)}function kS(r,e,t){return r instanceof el?O_(r,e):r instanceof tl?M_(r,e):t}function L_(r,e){return r instanceof ac?(function(i){return zd(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class oc extends Cc{}class el extends Cc{constructor(e){super(),this.elements=e}}function O_(r,e){const t=j_(e);for(const i of r.elements)t.some((o=>ar(o,i)))||t.push(i);return{arrayValue:{values:t}}}class tl extends Cc{constructor(e){super(),this.elements=e}}function M_(r,e){let t=j_(e);for(const i of r.elements)t=t.filter((o=>!ar(o,i)));return{arrayValue:{values:t}}}class ac extends Cc{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function yy(r){return ct(r.integerValue||r.doubleValue)}function j_(r){return xf(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function CS(r,e){return r.field.isEqual(e.field)&&(function(i,o){return i instanceof el&&o instanceof el||i instanceof tl&&o instanceof tl?To(i.elements,o.elements,ar):i instanceof ac&&o instanceof ac?ar(i.Ae,o.Ae):i instanceof oc&&o instanceof oc})(r.transform,e.transform)}class NS{constructor(e,t){this.version=e,this.transformResults=t}}class cn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new cn}static exists(e){return new cn(void 0,e)}static updateTime(e){return new cn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qu(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Nc{}function F_(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Rc(r.key,cn.none()):new ul(r.key,r.data,cn.none());{const t=r.data,i=Xt.empty();let o=new Et(Pt.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?i.delete(l):i.set(l,h),o=o.add(l)}return new bs(r.key,i,new un(o.toArray()),cn.none())}}function RS(r,e,t){r instanceof ul?(function(o,l,h){const m=o.value.clone(),y=vy(o.fieldTransforms,l,h.transformResults);m.setAll(y),l.convertToFoundDocument(h.version,m).setHasCommittedMutations()})(r,e,t):r instanceof bs?(function(o,l,h){if(!qu(o.precondition,l))return void l.convertToUnknownDocument(h.version);const m=vy(o.fieldTransforms,l,h.transformResults),y=l.data;y.setAll(U_(o)),y.setAll(m),l.convertToFoundDocument(h.version,y).setHasCommittedMutations()})(r,e,t):(function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function Ha(r,e,t,i){return r instanceof ul?(function(l,h,m,y){if(!qu(l.precondition,h))return m;const v=l.value.clone(),E=wy(l.fieldTransforms,y,h);return v.setAll(E),h.convertToFoundDocument(h.version,v).setHasLocalMutations(),null})(r,e,t,i):r instanceof bs?(function(l,h,m,y){if(!qu(l.precondition,h))return m;const v=wy(l.fieldTransforms,y,h),E=h.data;return E.setAll(U_(l)),E.setAll(v),h.convertToFoundDocument(h.version,E).setHasLocalMutations(),m===null?null:m.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((I=>I.field)))})(r,e,t,i):(function(l,h,m){return qu(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):m})(r,e,t)}function PS(r,e){let t=null;for(const i of r.fieldTransforms){const o=e.data.field(i.field),l=L_(i.transform,o||null);l!=null&&(t===null&&(t=Xt.empty()),t.set(i.field,l))}return t||null}function _y(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&To(i,o,((l,h)=>CS(l,h)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class ul extends Nc{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class bs extends Nc{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function U_(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=r.data.field(t);e.set(t,i)}})),e}function vy(r,e,t){const i=new Map;He(r.length===t.length,32656,{Ve:t.length,de:r.length});for(let o=0;o<t.length;o++){const l=r[o],h=l.transform,m=e.data.field(l.field);i.set(l.field,kS(h,m,t[o]))}return i}function wy(r,e,t){const i=new Map;for(const o of r){const l=o.transform,h=t.data.field(o.field);i.set(o.field,AS(l,h,e))}return i}class Rc extends Nc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class bS extends Nc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&RS(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Ha(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Ha(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=D_();return this.mutations.forEach((o=>{const l=e.get(o.key),h=l.overlayedDocument;let m=this.applyToLocalView(h,l.mutatedFields);m=t.has(o.key)?null:m;const y=F_(h,m);y!==null&&i.set(o.key,y),h.isValidDocument()||h.convertToNoDocument(xe.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Oe())}isEqual(e){return this.batchId===e.batchId&&To(this.mutations,e.mutations,((t,i)=>_y(t,i)))&&To(this.baseMutations,e.baseMutations,((t,i)=>_y(t,i)))}}class kf{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){He(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return ES})();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,i[h].version);return new kf(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mt,je;function OS(r){switch(r){case H.OK:return ve(64938);case H.CANCELLED:case H.UNKNOWN:case H.DEADLINE_EXCEEDED:case H.RESOURCE_EXHAUSTED:case H.INTERNAL:case H.UNAVAILABLE:case H.UNAUTHENTICATED:return!1;case H.INVALID_ARGUMENT:case H.NOT_FOUND:case H.ALREADY_EXISTS:case H.PERMISSION_DENIED:case H.FAILED_PRECONDITION:case H.ABORTED:case H.OUT_OF_RANGE:case H.UNIMPLEMENTED:case H.DATA_LOSS:return!0;default:return ve(15467,{code:r})}}function z_(r){if(r===void 0)return br("GRPC error has no .code"),H.UNKNOWN;switch(r){case mt.OK:return H.OK;case mt.CANCELLED:return H.CANCELLED;case mt.UNKNOWN:return H.UNKNOWN;case mt.DEADLINE_EXCEEDED:return H.DEADLINE_EXCEEDED;case mt.RESOURCE_EXHAUSTED:return H.RESOURCE_EXHAUSTED;case mt.INTERNAL:return H.INTERNAL;case mt.UNAVAILABLE:return H.UNAVAILABLE;case mt.UNAUTHENTICATED:return H.UNAUTHENTICATED;case mt.INVALID_ARGUMENT:return H.INVALID_ARGUMENT;case mt.NOT_FOUND:return H.NOT_FOUND;case mt.ALREADY_EXISTS:return H.ALREADY_EXISTS;case mt.PERMISSION_DENIED:return H.PERMISSION_DENIED;case mt.FAILED_PRECONDITION:return H.FAILED_PRECONDITION;case mt.ABORTED:return H.ABORTED;case mt.OUT_OF_RANGE:return H.OUT_OF_RANGE;case mt.UNIMPLEMENTED:return H.UNIMPLEMENTED;case mt.DATA_LOSS:return H.DATA_LOSS;default:return ve(39323,{code:r})}}(je=mt||(mt={}))[je.OK=0]="OK",je[je.CANCELLED=1]="CANCELLED",je[je.UNKNOWN=2]="UNKNOWN",je[je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",je[je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",je[je.NOT_FOUND=5]="NOT_FOUND",je[je.ALREADY_EXISTS=6]="ALREADY_EXISTS",je[je.PERMISSION_DENIED=7]="PERMISSION_DENIED",je[je.UNAUTHENTICATED=16]="UNAUTHENTICATED",je[je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",je[je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",je[je.ABORTED=10]="ABORTED",je[je.OUT_OF_RANGE=11]="OUT_OF_RANGE",je[je.UNIMPLEMENTED=12]="UNIMPLEMENTED",je[je.INTERNAL=13]="INTERNAL",je[je.UNAVAILABLE=14]="UNAVAILABLE",je[je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MS(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS=new Es([4294967295,4294967295],0);function Ey(r){const e=MS().encode(r),t=new n_;return t.update(e),new Uint8Array(t.digest())}function xy(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Es([t,i],0),new Es([o,l],0)]}class Cf{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new ja(`Invalid padding: ${t}`);if(i<0)throw new ja(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new ja(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new ja(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Es.fromNumber(this.ge)}ye(e,t,i){let o=e.add(t.multiply(Es.fromNumber(i)));return o.compare(jS)===1&&(o=new Es([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Ey(e),[i,o]=xy(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(i,o,l);if(!this.we(h))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new Cf(l,o,t);return i.forEach((m=>h.insert(m))),h}insert(e){if(this.ge===0)return;const t=Ey(e),[i,o]=xy(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(i,o,l);this.be(h)}}be(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class ja extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,cl.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Pc(xe.min(),o,new st(Le),Vr(),Oe())}}class cl{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new cl(i,t,Oe(),Oe(),Oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{constructor(e,t,i,o){this.Se=e,this.removedTargetIds=t,this.key=i,this.De=o}}class B_{constructor(e,t){this.targetId=e,this.Ce=t}}class $_{constructor(e,t,i=bt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class Ty{constructor(){this.ve=0,this.Fe=Iy(),this.Me=bt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Oe(),t=Oe(),i=Oe();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:ve(38017,{changeType:l})}})),new cl(this.Me,this.xe,e,t,i)}Ke(){this.Oe=!1,this.Fe=Iy()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,He(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class FS{constructor(e){this.Ge=e,this.ze=new Map,this.je=Vr(),this.He=Lu(),this.Je=Lu(),this.Ze=new st(Le)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:ve(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,i=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if($d(l))if(i===0){const h=new fe(l.path);this.et(t,h,Ut.newNoDocument(h,xe.min()))}else He(i===1,20013,{expectedCount:i});else{const h=this._t(t);if(h!==i){const m=this.ut(e),y=m?this.ct(m,e,h):1;if(y!==0){this.it(t);const v=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,v)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let h,m;try{h=Ss(i).toUint8Array()}catch(y){if(y instanceof p_)return pi("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{m=new Cf(h,o,l)}catch(y){return pi(y instanceof ja?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return m.ge===0?null:m}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let o=0;return i.forEach((l=>{const h=this.Ge.ht(),m=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(m)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,h)=>{const m=this.ot(h);if(m){if(l.current&&$d(m.target)){const y=new fe(m.target.path);this.It(y).has(h)||this.Et(h,y)||this.et(h,y,Ut.newNoDocument(y,e))}l.Be&&(t.set(h,l.ke()),l.Ke())}}));let i=Oe();this.Je.forEach(((l,h)=>{let m=!0;h.forEachWhile((y=>{const v=this.ot(y);return!v||v.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(i=i.add(l))})),this.je.forEach(((l,h)=>h.setReadTime(e)));const o=new Pc(e,t,this.Ze,this.je,i);return this.je=Vr(),this.He=Lu(),this.Je=Lu(),this.Ze=new st(Le),o}Ye(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,i),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.qe(t,1):o.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new Ty,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Et(Le),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Et(Le),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ie("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Ty),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Lu(){return new st(fe.comparator)}function Iy(){return new st(fe.comparator)}const US={asc:"ASCENDING",desc:"DESCENDING"},zS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},BS={and:"AND",or:"OR"};class $S{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Wd(r,e){return r.useProto3Json||Ic(e)?e:{value:e}}function lc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function q_(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function qS(r,e){return lc(r,e.toTimestamp())}function ir(r){return He(!!r,49232),xe.fromTimestamp((function(t){const i=Is(t);return new et(i.seconds,i.nanos)})(r))}function Nf(r,e){return Gd(r,e).canonicalString()}function Gd(r,e){const t=(function(o){return new Ye(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function H_(r){const e=Ye.fromString(r);return He(Y_(e),10190,{key:e.toString()}),e}function Kd(r,e){return Nf(r.databaseId,e.path)}function Ed(r,e){const t=H_(e);if(t.get(1)!==r.databaseId.projectId)throw new re(H.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new re(H.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new fe(G_(t))}function W_(r,e){return Nf(r.databaseId,e)}function HS(r){const e=H_(r);return e.length===4?Ye.emptyPath():G_(e)}function Qd(r){return new Ye(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function G_(r){return He(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Sy(r,e,t){return{name:Kd(r,e),fields:t.value.mapValue.fields}}function WS(r,e){let t;if("targetChange"in e){e.targetChange;const i=(function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:ve(39313,{state:v})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(v,E){return v.useProto3Json?(He(E===void 0||typeof E=="string",58123),bt.fromBase64String(E||"")):(He(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),bt.fromUint8Array(E||new Uint8Array))})(r,e.targetChange.resumeToken),h=e.targetChange.cause,m=h&&(function(v){const E=v.code===void 0?H.UNKNOWN:z_(v.code);return new re(E,v.message||"")})(h);t=new $_(i,o,l,m||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Ed(r,i.document.name),l=ir(i.document.updateTime),h=i.document.createTime?ir(i.document.createTime):xe.min(),m=new Xt({mapValue:{fields:i.document.fields}}),y=Ut.newFoundDocument(o,l,h,m),v=i.targetIds||[],E=i.removedTargetIds||[];t=new Hu(v,E,y.key,y)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Ed(r,i.document),l=i.readTime?ir(i.readTime):xe.min(),h=Ut.newNoDocument(o,l),m=i.removedTargetIds||[];t=new Hu([],m,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Ed(r,i.document),l=i.removedTargetIds||[];t=new Hu([],l,o,null)}else{if(!("filter"in e))return ve(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,h=new LS(o,l),m=i.targetId;t=new B_(m,h)}}return t}function GS(r,e){let t;if(e instanceof ul)t={update:Sy(r,e.key,e.value)};else if(e instanceof Rc)t={delete:Kd(r,e.key)};else if(e instanceof bs)t={update:Sy(r,e.key,e.data),updateMask:nA(e.fieldMask)};else{if(!(e instanceof bS))return ve(16599,{dt:e.type});t={verify:Kd(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,h){const m=h.transform;if(m instanceof oc)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof el)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof tl)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof ac)return{fieldPath:h.field.canonicalString(),increment:m.Ae};throw ve(20930,{transform:h.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:qS(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:ve(27497)})(r,e.precondition)),t}function KS(r,e){return r&&r.length>0?(He(e!==void 0,14353),r.map((t=>(function(o,l){let h=o.updateTime?ir(o.updateTime):ir(l);return h.isEqual(xe.min())&&(h=ir(l)),new NS(h,o.transformResults||[])})(t,e)))):[]}function QS(r,e){return{documents:[W_(r,e.path)]}}function YS(r,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=W_(r,o);const l=(function(v){if(v.length!==0)return Q_(On.create(v,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const h=(function(v){if(v.length!==0)return v.map((E=>(function(k){return{field:ho(k.field),direction:ZS(k.dir)}})(E)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const m=Wd(r,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=(function(v){return{before:v.inclusive,values:v.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(v){return{before:!v.inclusive,values:v.position}})(e.endAt)),{ft:t,parent:o}}function JS(r){let e=HS(r.parent);const t=r.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){He(i===1,65062);const E=t.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let l=[];t.where&&(l=(function(I){const k=K_(I);return k instanceof On&&I_(k)?k.getFilters():[k]})(t.where));let h=[];t.orderBy&&(h=(function(I){return I.map((k=>(function(B){return new Za(fo(B.field),(function(q){switch(q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(B.direction))})(k)))})(t.orderBy));let m=null;t.limit&&(m=(function(I){let k;return k=typeof I=="object"?I.value:I,Ic(k)?null:k})(t.limit));let y=null;t.startAt&&(y=(function(I){const k=!!I.before,F=I.values||[];return new ic(F,k)})(t.startAt));let v=null;return t.endAt&&(v=(function(I){const k=!I.before,F=I.values||[];return new ic(F,k)})(t.endAt)),pS(e,o,h,l,m,"F",y,v)}function XS(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ve(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function K_(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=fo(t.unaryFilter.field);return gt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=fo(t.unaryFilter.field);return gt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=fo(t.unaryFilter.field);return gt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=fo(t.unaryFilter.field);return gt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ve(61313);default:return ve(60726)}})(r):r.fieldFilter!==void 0?(function(t){return gt.create(fo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ve(58110);default:return ve(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return On.create(t.compositeFilter.filters.map((i=>K_(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return ve(1026)}})(t.compositeFilter.op))})(r):ve(30097,{filter:r})}function ZS(r){return US[r]}function eA(r){return zS[r]}function tA(r){return BS[r]}function ho(r){return{fieldPath:r.canonicalString()}}function fo(r){return Pt.fromServerFormat(r.fieldPath)}function Q_(r){return r instanceof gt?(function(t){if(t.op==="=="){if(dy(t.value))return{unaryFilter:{field:ho(t.field),op:"IS_NAN"}};if(hy(t.value))return{unaryFilter:{field:ho(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(dy(t.value))return{unaryFilter:{field:ho(t.field),op:"IS_NOT_NAN"}};if(hy(t.value))return{unaryFilter:{field:ho(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ho(t.field),op:eA(t.op),value:t.value}}})(r):r instanceof On?(function(t){const i=t.getFilters().map((o=>Q_(o)));return i.length===1?i[0]:{compositeFilter:{op:tA(t.op),filters:i}}})(r):ve(54877,{filter:r})}function nA(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Y_(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}function J_(r){return!!r&&typeof r._toProto=="function"&&r._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e,t,i,o,l=xe.min(),h=xe.min(),m=bt.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m,this.expectedCount=y}withSequenceNumber(e){return new ys(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ys(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ys(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ys(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e){this.yt=e}}function sA(r){const e=JS({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Hd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(){this.Sn=new oA}addToCollectionParentIndex(e,t){return this.Sn.add(t),W.resolve()}getCollectionParents(e,t){return W.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return W.resolve()}deleteFieldIndex(e,t){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,t){return W.resolve()}getDocumentsMatchingTarget(e,t){return W.resolve(null)}getIndexType(e,t){return W.resolve(0)}getFieldIndexes(e,t){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,t){return W.resolve(Ts.min())}getMinOffsetFromCollectionGroup(e,t){return W.resolve(Ts.min())}updateCollectionGroup(e,t,i){return W.resolve()}updateIndexEntries(e,t){return W.resolve()}}class oA{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Et(Ye.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Et(Ye.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ay={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},X_=41943040;class Jt{static withCacheSize(e){return new Jt(e,Jt.DEFAULT_COLLECTION_PERCENTILE,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jt.DEFAULT_COLLECTION_PERCENTILE=10,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jt.DEFAULT=new Jt(X_,Jt.DEFAULT_COLLECTION_PERCENTILE,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jt.DISABLED=new Jt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Ao(0)}static ar(){return new Ao(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ky="LruGarbageCollector",aA=1048576;function Cy([r,e],[t,i]){const o=Le(r,t);return o===0?Le(e,i):o}class lA{constructor(e){this.Pr=e,this.buffer=new Et(Cy),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Cy(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class uA{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){ie(ky,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Do(t)?ie(ky,"Ignoring IndexedDB error during garbage collection: ",t):await bo(t)}await this.Ar(3e5)}))}}class cA{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return W.resolve(Tc.ce);const i=new lA(t);return this.Vr.forEachTarget(e,(o=>i.Er(o.sequenceNumber))).next((()=>this.Vr.mr(e,(o=>i.Er(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ie("LruGarbageCollector","Garbage collection skipped; disabled"),W.resolve(Ay)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ay):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let i,o,l,h,m,y,v;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((I=>(I>this.params.maximumSequenceNumbersToCollect?(ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),o=this.params.maximumSequenceNumbersToCollect):o=I,h=Date.now(),this.nthSequenceNumber(e,o)))).next((I=>(i=I,m=Date.now(),this.removeTargets(e,i,t)))).next((I=>(l=I,y=Date.now(),this.removeOrphanedDocuments(e,i)))).next((I=>(v=Date.now(),uo()<=Ve.DEBUG&&ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-E}ms
	Determined least recently used ${o} in `+(m-h)+`ms
	Removed ${l} targets in `+(y-m)+`ms
	Removed ${I} documents in `+(v-y)+`ms
Total Duration: ${v-E}ms`),W.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:I}))))}}function hA(r,e){return new cA(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(){this.changes=new _i((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ut.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?W.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&Ha(i.mutation,o,un.empty(),et.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Oe()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Oe()){const o=ai();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((l=>{let h=Ma();return l.forEach(((m,y)=>{h=h.insert(m,y.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const i=ai();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Oe())))}populateOverlays(e,t,i){const o=[];return i.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((h,m)=>{t.set(h,m)}))}))}computeViews(e,t,i,o){let l=Vr();const h=qa(),m=(function(){return qa()})();return t.forEach(((y,v)=>{const E=i.get(v.key);o.has(v.key)&&(E===void 0||E.mutation instanceof bs)?l=l.insert(v.key,v):E!==void 0?(h.set(v.key,E.mutation.getFieldMask()),Ha(E.mutation,v,E.mutation.getFieldMask(),et.now())):h.set(v.key,un.empty())})),this.recalculateAndSaveOverlays(e,l).next((y=>(y.forEach(((v,E)=>h.set(v,E))),t.forEach(((v,E)=>m.set(v,new fA(E,h.get(v)??null)))),m)))}recalculateAndSaveOverlays(e,t){const i=qa();let o=new st(((h,m)=>h-m)),l=Oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const m of h)m.keys().forEach((y=>{const v=t.get(y);if(v===null)return;let E=i.get(y)||un.empty();E=m.applyToLocalView(v,E),i.set(y,E);const I=(o.get(m.batchId)||Oe()).add(y);o=o.insert(m.batchId,I)}))})).next((()=>{const h=[],m=o.getReverseIterator();for(;m.hasNext();){const y=m.getNext(),v=y.key,E=y.value,I=D_();E.forEach((k=>{if(!l.has(k)){const F=F_(t.get(k),i.get(k));F!==null&&I.set(k,F),l=l.add(k)}})),h.push(this.documentOverlayCache.saveOverlays(e,v,I))}return W.waitFor(h)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return mS(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):C_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):W.resolve(ai());let m=Qa,y=l;return h.next((v=>W.forEach(v,((E,I)=>(m<I.largestBatchId&&(m=I.largestBatchId),l.get(E)?W.resolve():this.remoteDocumentCache.getEntry(e,E).next((k=>{y=y.insert(E,k)}))))).next((()=>this.populateOverlays(e,v,l))).next((()=>this.computeViews(e,y,v,Oe()))).next((E=>({batchId:m,changes:b_(E)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new fe(t)).next((i=>{let o=Ma();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let h=Ma();return this.indexManager.getCollectionParents(e,l).next((m=>W.forEach(m,(y=>{const v=(function(I,k){return new Vo(k,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt)})(t,y.child(l));return this.getDocumentsMatchingCollectionQuery(e,v,i,o).next((E=>{E.forEach(((I,k)=>{h=h.insert(I,k)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o)))).next((h=>{l.forEach(((y,v)=>{const E=v.getKey();h.get(E)===null&&(h=h.insert(E,Ut.newInvalidDocument(E)))}));let m=Ma();return h.forEach(((y,v)=>{const E=l.get(y);E!==void 0&&Ha(E.mutation,v,un.empty(),et.now()),kc(t,v)&&(m=m.insert(y,v))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return W.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:ir(o.createTime)}})(t)),W.resolve()}getNamedQuery(e,t){return W.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(o){return{name:o.name,query:sA(o.bundledQuery),readTime:ir(o.readTime)}})(t)),W.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(){this.overlays=new st(fe.comparator),this.Lr=new Map}getOverlay(e,t){return W.resolve(this.overlays.get(t))}getOverlays(e,t){const i=ai();return W.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&i.set(o,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,l)=>{this.bt(e,t,l)})),W.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.Lr.get(i);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(i)),W.resolve()}getOverlaysForCollection(e,t,i){const o=ai(),l=t.length+1,h=new fe(t.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const y=m.getNext().value,v=y.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===l&&y.largestBatchId>i&&o.set(y.getKey(),y)}return W.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new st(((v,E)=>v-E));const h=this.overlays.getIterator();for(;h.hasNext();){const v=h.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>i){let E=l.get(v.largestBatchId);E===null&&(E=ai(),l=l.insert(v.largestBatchId,E)),E.set(v.getKey(),v)}}const m=ai(),y=l.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((v,E)=>m.set(v,E))),!(m.size()>=o)););return W.resolve(m)}bt(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const h=this.Lr.get(o.largestBatchId).delete(i.key);this.Lr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new VS(t,i));let l=this.Lr.get(t);l===void 0&&(l=Oe(),this.Lr.set(t,l)),this.Lr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(){this.sessionToken=bt.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,W.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(){this.kr=new Et(St.Kr),this.qr=new Et(St.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const i=new St(e,t);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new St(e,t))}Qr(e,t){e.forEach((i=>this.removeReference(i,t)))}Gr(e){const t=new fe(new Ye([])),i=new St(t,e),o=new St(t,e+1),l=[];return this.qr.forEachInRange([i,o],(h=>{this.Wr(h),l.push(h.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new fe(new Ye([])),i=new St(t,e),o=new St(t,e+1);let l=Oe();return this.qr.forEachInRange([i,o],(h=>{l=l.add(h.key)})),l}containsKey(e){const t=new St(e,0),i=this.kr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class St{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return fe.comparator(e.key,t.key)||Le(e.Hr,t.Hr)}static Ur(e,t){return Le(e.Hr,t.Hr)||fe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Et(St.Kr)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new DS(l,t,i,o);this.mutationQueue.push(h);for(const m of o)this.Jr=this.Jr.add(new St(m.key,l)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return W.resolve(h)}lookupMutationBatch(e,t){return W.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.Xr(i),l=o<0?0:o;return W.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?wf:this.Yn-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new St(t,0),o=new St(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([i,o],(h=>{const m=this.Zr(h.Hr);l.push(m)})),W.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Et(Le);return t.forEach((o=>{const l=new St(o,0),h=new St(o,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,h],(m=>{i=i.add(m.Hr)}))})),W.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;fe.isDocumentKey(l)||(l=l.child(""));const h=new St(new fe(l),0);let m=new Et(Le);return this.Jr.forEachWhile((y=>{const v=y.key.path;return!!i.isPrefixOf(v)&&(v.length===o&&(m=m.add(y.Hr)),!0)}),h),W.resolve(this.Yr(m))}Yr(e){const t=[];return e.forEach((i=>{const o=this.Zr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){He(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return W.forEach(t.mutations,(o=>{const l=new St(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Jr=i}))}nr(e){}containsKey(e,t){const i=new St(t,0),o=this.Jr.firstAfterOrEqual(i);return W.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e){this.ti=e,this.docs=(function(){return new st(fe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,h=this.ti(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return W.resolve(i?i.document.mutableCopy():Ut.newInvalidDocument(t))}getEntries(e,t){let i=Vr();return t.forEach((o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():Ut.newInvalidDocument(o))})),W.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=Vr();const h=t.path,m=new fe(h.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(m);for(;y.hasNext();){const{key:v,value:{document:E}}=y.getNext();if(!h.isPrefixOf(v.path))break;v.path.length>h.length+1||HI(qI(E),i)<=0||(o.has(E.key)||kc(t,E))&&(l=l.insert(E.key,E.mutableCopy()))}return W.resolve(l)}getAllFromCollectionGroup(e,t,i,o){ve(9500)}ni(e,t){return W.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new wA(this)}getSize(e){return W.resolve(this.size)}}class wA extends dA{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Mr.addEntry(e,o)):this.Mr.removeEntry(i)})),W.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e){this.persistence=e,this.ri=new _i((t=>Tf(t)),If),this.lastRemoteSnapshotVersion=xe.min(),this.highestTargetId=0,this.ii=0,this.si=new Rf,this.targetCount=0,this.oi=Ao._r()}forEachTarget(e,t){return this.ri.forEach(((i,o)=>t(o))),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.ii&&(this.ii=t),W.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Ao(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,W.resolve()}updateTargetData(e,t){return this.lr(t),W.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.ri.forEach(((h,m)=>{m.sequenceNumber<=t&&i.get(m.targetId)===null&&(this.ri.delete(h),l.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),W.waitFor(l).next((()=>o))}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,t){const i=this.ri.get(t)||null;return W.resolve(i)}addMatchingKeys(e,t,i){return this.si.$r(t,i),W.resolve()}removeMatchingKeys(e,t,i){this.si.Qr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((h=>{l.push(o.markPotentiallyOrphaned(e,h))})),W.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),W.resolve()}getMatchingKeysForTargetId(e,t){const i=this.si.jr(t);return W.resolve(i)}containsKey(e,t){return W.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(e,t){this._i={},this.overlays={},this.ai=new Tc(0),this.ui=!1,this.ui=!0,this.ci=new yA,this.referenceDelegate=e(this),this.li=new EA(this),this.indexManager=new iA,this.remoteDocumentCache=(function(o){return new vA(o)})((i=>this.referenceDelegate.hi(i))),this.serializer=new rA(t),this.Pi=new mA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new gA,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this._i[e.toKey()];return i||(i=new _A(t,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,i){ie("MemoryPersistence","Starting transaction:",e);const o=new xA(this.ai.next());return this.referenceDelegate.Ti(),i(o).next((l=>this.referenceDelegate.Ii(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ei(e,t){return W.or(Object.values(this._i).map((i=>()=>i.containsKey(e,t))))}}class xA extends GI{constructor(e){super(),this.currentSequenceNumber=e}}class Pf{constructor(e){this.persistence=e,this.Ri=new Rf,this.Ai=null}static Vi(e){return new Pf(e)}get di(){if(this.Ai)return this.Ai;throw ve(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.di.delete(i.toString()),W.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.di.add(i.toString()),W.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),W.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((o=>this.di.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.di.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.di,(i=>{const o=fe.fromPath(i);return this.mi(e,o).next((l=>{l||t.removeEntry(o,xe.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((i=>{i?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return W.or([()=>W.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class uc{constructor(e,t){this.persistence=e,this.fi=new _i((i=>YI(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=hA(this,t)}static Vi(e,t){return new uc(e,t)}Ti(){}Ii(e){return W.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}pr(e){let t=0;return this.mr(e,(i=>{t++})).next((()=>t))}mr(e,t){return W.forEach(this.fi,((i,o)=>this.wr(e,i,o).next((l=>l?W.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ni(e,(h=>this.wr(e,h,t).next((m=>{m||(i++,l.removeEntry(h,xe.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),W.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),W.resolve()}removeReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),W.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),W.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Bu(e.data.value)),t}wr(e,t,i){return W.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.fi.get(t);return W.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Ts=i,this.Is=o}static Es(e,t){let i=Oe(),o=Oe();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new bf(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return TE()?8:KI(zt())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.gs(e,t).next((h=>{l.result=h})).next((()=>{if(!l.result)return this.ps(e,t,o,i).next((h=>{l.result=h}))})).next((()=>{if(l.result)return;const h=new TA;return this.ys(e,t,h).next((m=>{if(l.result=m,this.As)return this.ws(e,t,h,m.size)}))})).next((()=>l.result))}ws(e,t,i,o){return i.documentReadCount<this.Vs?(uo()<=Ve.DEBUG&&ie("QueryEngine","SDK will not create cache indexes for query:",co(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),W.resolve()):(uo()<=Ve.DEBUG&&ie("QueryEngine","Query:",co(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.ds*o?(uo()<=Ve.DEBUG&&ie("QueryEngine","The SDK decides to create cache indexes for query:",co(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,sr(t))):W.resolve())}gs(e,t){if(gy(t))return W.resolve(null);let i=sr(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Hd(t,null,"F"),i=sr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const h=Oe(...l);return this.fs.getDocuments(e,h).next((m=>this.indexManager.getMinOffset(e,i).next((y=>{const v=this.bs(t,m);return this.Ss(t,v,h,y.readTime)?this.gs(e,Hd(t,null,"F")):this.Ds(e,v,t,y)}))))})))))}ps(e,t,i,o){return gy(t)||o.isEqual(xe.min())?W.resolve(null):this.fs.getDocuments(e,i).next((l=>{const h=this.bs(t,l);return this.Ss(t,h,i,o)?W.resolve(null):(uo()<=Ve.DEBUG&&ie("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),co(t)),this.Ds(e,h,t,$I(o,Qa)).next((m=>m)))}))}bs(e,t){let i=new Et(R_(e));return t.forEach(((o,l)=>{kc(e,l)&&(i=i.add(l))})),i}Ss(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ys(e,t,i){return uo()<=Ve.DEBUG&&ie("QueryEngine","Using full collection scan to execute query:",co(t)),this.fs.getDocumentsMatchingQuery(e,t,Ts.min(),i)}Ds(e,t,i,o){return this.fs.getDocumentsMatchingQuery(e,i,o).next((l=>(t.forEach((h=>{l=l.insert(h.key,h)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Df="LocalStore",SA=3e8;class AA{constructor(e,t,i,o){this.persistence=e,this.Cs=t,this.serializer=o,this.vs=new st(Le),this.Fs=new _i((l=>Tf(l)),If),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pA(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function kA(r,e,t,i){return new AA(r,e,t,i)}async function ev(r,e){const t=Ie(r);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((l=>(o=l,t.Os(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const h=[],m=[];let y=Oe();for(const v of o){h.push(v.batchId);for(const E of v.mutations)y=y.add(E.key)}for(const v of l){m.push(v.batchId);for(const E of v.mutations)y=y.add(E.key)}return t.localDocuments.getDocuments(i,y).next((v=>({Ns:v,removedBatchIds:h,addedBatchIds:m})))}))}))}function CA(r,e){const t=Ie(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(m,y,v,E){const I=v.batch,k=I.keys();let F=W.resolve();return k.forEach((B=>{F=F.next((()=>E.getEntry(y,B))).next(($=>{const q=v.docVersions.get(B);He(q!==null,48541),$.version.compareTo(q)<0&&(I.applyToRemoteDocument($,v),$.isValidDocument()&&($.setReadTime(v.commitVersion),E.addEntry($)))}))})),F.next((()=>m.mutationQueue.removeMutationBatch(y,I)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(m){let y=Oe();for(let v=0;v<m.mutationResults.length;++v)m.mutationResults[v].transformResults.length>0&&(y=y.add(m.batch.mutations[v].key));return y})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function tv(r){const e=Ie(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function NA(r,e){const t=Ie(r),i=e.snapshotVersion;let o=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const h=t.xs.newChangeBuffer({trackRemovals:!0});o=t.vs;const m=[];e.targetChanges.forEach(((E,I)=>{const k=o.get(I);if(!k)return;m.push(t.li.removeMatchingKeys(l,E.removedDocuments,I).next((()=>t.li.addMatchingKeys(l,E.addedDocuments,I))));let F=k.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(I)!==null?F=F.withResumeToken(bt.EMPTY_BYTE_STRING,xe.min()).withLastLimboFreeSnapshotVersion(xe.min()):E.resumeToken.approximateByteSize()>0&&(F=F.withResumeToken(E.resumeToken,i)),o=o.insert(I,F),(function($,q,ce){return $.resumeToken.approximateByteSize()===0||q.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=SA?!0:ce.addedDocuments.size+ce.modifiedDocuments.size+ce.removedDocuments.size>0})(k,F,E)&&m.push(t.li.updateTargetData(l,F))}));let y=Vr(),v=Oe();if(e.documentUpdates.forEach((E=>{e.resolvedLimboDocuments.has(E)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(l,E))})),m.push(RA(l,h,e.documentUpdates).next((E=>{y=E.Bs,v=E.Ls}))),!i.isEqual(xe.min())){const E=t.li.getLastRemoteSnapshotVersion(l).next((I=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,i)));m.push(E)}return W.waitFor(m).next((()=>h.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,y,v))).next((()=>y))})).then((l=>(t.vs=o,l)))}function RA(r,e,t){let i=Oe(),o=Oe();return t.forEach((l=>i=i.add(l))),e.getEntries(r,i).next((l=>{let h=Vr();return t.forEach(((m,y)=>{const v=l.get(m);y.isFoundDocument()!==v.isFoundDocument()&&(o=o.add(m)),y.isNoDocument()&&y.version.isEqual(xe.min())?(e.removeEntry(m,y.readTime),h=h.insert(m,y)):!v.isValidDocument()||y.version.compareTo(v.version)>0||y.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(y),h=h.insert(m,y)):ie(Df,"Ignoring outdated watch update for ",m,". Current version:",v.version," Watch version:",y.version)})),{Bs:h,Ls:o}}))}function PA(r,e){const t=Ie(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=wf),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function bA(r,e){const t=Ie(r);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.li.getTargetData(i,e).next((l=>l?(o=l,W.resolve(o)):t.li.allocateTargetId(i).next((h=>(o=new ys(e,h,"TargetPurposeListen",i.currentSequenceNumber),t.li.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.vs.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.vs=t.vs.insert(i.targetId,i),t.Fs.set(e,i.targetId)),i}))}async function Yd(r,e,t){const i=Ie(r),o=i.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(h=>i.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!Do(h))throw h;ie(Df,`Failed to update sequence numbers for target ${e}: ${h}`)}i.vs=i.vs.remove(e),i.Fs.delete(o.target)}function Ny(r,e,t){const i=Ie(r);let o=xe.min(),l=Oe();return i.persistence.runTransaction("Execute query","readwrite",(h=>(function(y,v,E){const I=Ie(y),k=I.Fs.get(E);return k!==void 0?W.resolve(I.vs.get(k)):I.li.getTargetData(v,E)})(i,h,sr(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(h,m.targetId).next((y=>{l=y}))})).next((()=>i.Cs.getDocumentsMatchingQuery(h,e,t?o:xe.min(),t?l:Oe()))).next((m=>(DA(i,_S(e),m),{documents:m,ks:l})))))}function DA(r,e,t){let i=r.Ms.get(e)||xe.min();t.forEach(((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),r.Ms.set(e,i)}class Ry{constructor(){this.activeTargetIds=IS()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class VA{constructor(){this.vo=new Ry,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,i){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Ry,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Py="ConnectivityMonitor";class by{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){ie(Py,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){ie(Py,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ou=null;function Jd(){return Ou===null?Ou=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ou++,"0x"+Ou.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xd="RestConnection",OA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class MA{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${i}/databases/${o}`,this.$o=this.databaseId.database===rc?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Wo(e,t,i,o,l){const h=Jd(),m=this.Qo(e,t.toUriEncodedString());ie(xd,`Sending RPC '${e}' ${h}:`,m,i);const y={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(y,o,l);const{host:v}=new URL(m),E=No(v);return this.zo(e,m,y,i,E).then((I=>(ie(xd,`Received RPC '${e}' ${h}: `,I),I)),(I=>{throw pi(xd,`RPC '${e}' ${h} failed with error: `,I,"url: ",m,"request:",i),I}))}jo(e,t,i,o,l,h){return this.Wo(e,t,i,o,l)}Go(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Po})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),i&&i.headers.forEach(((o,l)=>e[l]=o))}Qo(e,t){const i=OA[e];let o=`${this.qo}/v1/${t}:${i}`;return this.databaseInfo.apiKey&&(o=`${o}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),o}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jt="WebChannelConnection",Da=(r,e,t)=>{r.listen(e,(i=>{try{t(i)}catch(o){setTimeout((()=>{throw o}),0)}}))};class vo extends MA{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!vo.c_){const e=o_();Da(e,i_.STAT_EVENT,(t=>{t.stat===jd.PROXY?ie(jt,"STAT_EVENT: detected buffering proxy"):t.stat===jd.NOPROXY&&ie(jt,"STAT_EVENT: detected no buffering proxy")})),vo.c_=!0}}zo(e,t,i,o,l){const h=Jd();return new Promise(((m,y)=>{const v=new r_;v.setWithCredentials(!0),v.listenOnce(s_.COMPLETE,(()=>{try{switch(v.getLastErrorCode()){case zu.NO_ERROR:const I=v.getResponseJson();ie(jt,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(I)),m(I);break;case zu.TIMEOUT:ie(jt,`RPC '${e}' ${h} timed out`),y(new re(H.DEADLINE_EXCEEDED,"Request time out"));break;case zu.HTTP_ERROR:const k=v.getStatus();if(ie(jt,`RPC '${e}' ${h} failed with status:`,k,"response text:",v.getResponseText()),k>0){let F=v.getResponseJson();Array.isArray(F)&&(F=F[0]);const B=F==null?void 0:F.error;if(B&&B.status&&B.message){const $=(function(ce){const ee=ce.toLowerCase().replace(/_/g,"-");return Object.values(H).indexOf(ee)>=0?ee:H.UNKNOWN})(B.status);y(new re($,B.message))}else y(new re(H.UNKNOWN,"Server responded with status "+v.getStatus()))}else y(new re(H.UNAVAILABLE,"Connection failed."));break;default:ve(9055,{l_:e,streamId:h,h_:v.getLastErrorCode(),P_:v.getLastError()})}}finally{ie(jt,`RPC '${e}' ${h} completed.`)}}));const E=JSON.stringify(o);ie(jt,`RPC '${e}' ${h} sending request:`,o),v.send(t,"POST",E,i,15)}))}T_(e,t,i){const o=Jd(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=this.createWebChannelTransport(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(m.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Go(m.initMessageHeaders,t,i),m.encodeInitMessageHeaders=!0;const v=l.join("");ie(jt,`Creating RPC '${e}' stream ${o}: ${v}`,m);const E=h.createWebChannel(v,m);this.I_(E);let I=!1,k=!1;const F=new jA({Ho:B=>{k?ie(jt,`Not sending because RPC '${e}' stream ${o} is closed:`,B):(I||(ie(jt,`Opening RPC '${e}' stream ${o} transport.`),E.open(),I=!0),ie(jt,`RPC '${e}' stream ${o} sending:`,B),E.send(B))},Jo:()=>E.close()});return Da(E,Oa.EventType.OPEN,(()=>{k||(ie(jt,`RPC '${e}' stream ${o} transport opened.`),F.i_())})),Da(E,Oa.EventType.CLOSE,(()=>{k||(k=!0,ie(jt,`RPC '${e}' stream ${o} transport closed`),F.o_(),this.E_(E))})),Da(E,Oa.EventType.ERROR,(B=>{k||(k=!0,pi(jt,`RPC '${e}' stream ${o} transport errored. Name:`,B.name,"Message:",B.message),F.o_(new re(H.UNAVAILABLE,"The operation could not be completed")))})),Da(E,Oa.EventType.MESSAGE,(B=>{var $;if(!k){const q=B.data[0];He(!!q,16349);const ce=q,ee=(ce==null?void 0:ce.error)||(($=ce[0])==null?void 0:$.error);if(ee){ie(jt,`RPC '${e}' stream ${o} received error:`,ee);const Z=ee.status;let we=(function(N){const T=mt[N];if(T!==void 0)return z_(T)})(Z),Se=ee.message;Z==="NOT_FOUND"&&Se.includes("database")&&Se.includes("does not exist")&&Se.includes(this.databaseId.database)&&pi(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),we===void 0&&(we=H.INTERNAL,Se="Unknown error status: "+Z+" with message "+ee.message),k=!0,F.o_(new re(we,Se)),E.close()}else ie(jt,`RPC '${e}' stream ${o} received:`,q),F.__(q)}})),vo.u_(),setTimeout((()=>{F.s_()}),0),F}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,i){super.Go(e,t,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return a_()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FA(r){return new vo(r)}function Td(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bc(r){return new $S(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vo.c_=!1;class nv{constructor(e,t,i=1e3,o=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=i,this.A_=o,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-i);o>0&&ie("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dy="PersistentStream";class rv{constructor(e,t,i,o,l,h,m,y){this.Ci=e,this.b_=i,this.S_=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new nv(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===H.RESOURCE_EXHAUSTED?(br(t.toString()),br("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===H.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===t&&this.G_(i,o)}),(i=>{e((()=>{const o=new re(H.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,t){const i=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.H_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ie(Dy,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(ie(Dy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class UA extends rv{constructor(e,t,i,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=WS(this.serializer,e),i=(function(l){if(!("targetChange"in l))return xe.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?xe.min():h.readTime?ir(h.readTime):xe.min()})(e);return this.listener.J_(t,i)}Z_(e){const t={};t.database=Qd(this.serializer),t.addTarget=(function(l,h){let m;const y=h.target;if(m=$d(y)?{documents:QS(l,y)}:{query:YS(l,y).ft},m.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){m.resumeToken=q_(l,h.resumeToken);const v=Wd(l,h.expectedCount);v!==null&&(m.expectedCount=v)}else if(h.snapshotVersion.compareTo(xe.min())>0){m.readTime=lc(l,h.snapshotVersion.toTimestamp());const v=Wd(l,h.expectedCount);v!==null&&(m.expectedCount=v)}return m})(this.serializer,e);const i=XS(this.serializer,e);i&&(t.labels=i),this.K_(t)}X_(e){const t={};t.database=Qd(this.serializer),t.removeTarget=e,this.K_(t)}}class zA extends rv{constructor(e,t,i,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,h),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return He(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,He(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){He(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=KS(e.writeResults,e.commitTime),i=ir(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=Qd(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>GS(this.serializer,i)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{}class $A extends BA{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new re(H.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Wo(e,Gd(t,i),o,l,h))).catch((l=>{throw l.name==="FirebaseError"?(l.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new re(H.UNKNOWN,l.toString())}))}jo(e,t,i,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,m])=>this.connection.jo(e,Gd(t,i),o,h,m,l))).catch((h=>{throw h.name==="FirebaseError"?(h.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new re(H.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function qA(r,e,t,i){return new $A(r,e,t,i)}class HA{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(br(t),this.aa=!1):ie("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mi="RemoteStore";class WA{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((h=>{i.enqueueAndForget((async()=>{vi(this)&&(ie(mi,"Restarting streams for network reachability change."),await(async function(y){const v=Ie(y);v.Ea.add(4),await hl(v),v.Va.set("Unknown"),v.Ea.delete(4),await Dc(v)})(this))}))})),this.Va=new HA(i,o)}}async function Dc(r){if(vi(r))for(const e of r.Ra)await e(!0)}async function hl(r){for(const e of r.Ra)await e(!1)}function sv(r,e){const t=Ie(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Mf(t)?Of(t):Lo(t).O_()&&Lf(t,e))}function Vf(r,e){const t=Ie(r),i=Lo(t);t.Ia.delete(e),i.O_()&&iv(t,e),t.Ia.size===0&&(i.O_()?i.L_():vi(t)&&t.Va.set("Unknown"))}function Lf(r,e){if(r.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xe.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Lo(r).Z_(e)}function iv(r,e){r.da.$e(e),Lo(r).X_(e)}function Of(r){r.da=new FS({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Lo(r).start(),r.Va.ua()}function Mf(r){return vi(r)&&!Lo(r).x_()&&r.Ia.size>0}function vi(r){return Ie(r).Ea.size===0}function ov(r){r.da=void 0}async function GA(r){r.Va.set("Online")}async function KA(r){r.Ia.forEach(((e,t)=>{Lf(r,e)}))}async function QA(r,e){ov(r),Mf(r)?(r.Va.ha(e),Of(r)):r.Va.set("Unknown")}async function YA(r,e,t){if(r.Va.set("Online"),e instanceof $_&&e.state===2&&e.cause)try{await(async function(o,l){const h=l.cause;for(const m of l.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,h),o.Ia.delete(m),o.da.removeTarget(m))})(r,e)}catch(i){ie(mi,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await cc(r,i)}else if(e instanceof Hu?r.da.Xe(e):e instanceof B_?r.da.st(e):r.da.tt(e),!t.isEqual(xe.min()))try{const i=await tv(r.localStore);t.compareTo(i)>=0&&await(function(l,h){const m=l.da.Tt(h);return m.targetChanges.forEach(((y,v)=>{if(y.resumeToken.approximateByteSize()>0){const E=l.Ia.get(v);E&&l.Ia.set(v,E.withResumeToken(y.resumeToken,h))}})),m.targetMismatches.forEach(((y,v)=>{const E=l.Ia.get(y);if(!E)return;l.Ia.set(y,E.withResumeToken(bt.EMPTY_BYTE_STRING,E.snapshotVersion)),iv(l,y);const I=new ys(E.target,y,v,E.sequenceNumber);Lf(l,I)})),l.remoteSyncer.applyRemoteEvent(m)})(r,t)}catch(i){ie(mi,"Failed to raise snapshot:",i),await cc(r,i)}}async function cc(r,e,t){if(!Do(e))throw e;r.Ea.add(1),await hl(r),r.Va.set("Offline"),t||(t=()=>tv(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ie(mi,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await Dc(r)}))}function av(r,e){return e().catch((t=>cc(r,t,e)))}async function Vc(r){const e=Ie(r),t=ks(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:wf;for(;JA(e);)try{const o=await PA(e.localStore,i);if(o===null){e.Ta.length===0&&t.L_();break}i=o.batchId,XA(e,o)}catch(o){await cc(e,o)}lv(e)&&uv(e)}function JA(r){return vi(r)&&r.Ta.length<10}function XA(r,e){r.Ta.push(e);const t=ks(r);t.O_()&&t.Y_&&t.ea(e.mutations)}function lv(r){return vi(r)&&!ks(r).x_()&&r.Ta.length>0}function uv(r){ks(r).start()}async function ZA(r){ks(r).ra()}async function ek(r){const e=ks(r);for(const t of r.Ta)e.ea(t.mutations)}async function tk(r,e,t){const i=r.Ta.shift(),o=kf.from(i,e,t);await av(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await Vc(r)}async function nk(r,e){e&&ks(r).Y_&&await(async function(i,o){if((function(h){return OS(h)&&h!==H.ABORTED})(o.code)){const l=i.Ta.shift();ks(i).B_(),await av(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o))),await Vc(i)}})(r,e),lv(r)&&uv(r)}async function Vy(r,e){const t=Ie(r);t.asyncQueue.verifyOperationInProgress(),ie(mi,"RemoteStore received new credentials");const i=vi(t);t.Ea.add(3),await hl(t),i&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Dc(t)}async function rk(r,e){const t=Ie(r);e?(t.Ea.delete(2),await Dc(t)):e||(t.Ea.add(2),await hl(t),t.Va.set("Unknown"))}function Lo(r){return r.ma||(r.ma=(function(t,i,o){const l=Ie(t);return l.sa(),new UA(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Zo:GA.bind(null,r),Yo:KA.bind(null,r),t_:QA.bind(null,r),J_:YA.bind(null,r)}),r.Ra.push((async e=>{e?(r.ma.B_(),Mf(r)?Of(r):r.Va.set("Unknown")):(await r.ma.stop(),ov(r))}))),r.ma}function ks(r){return r.fa||(r.fa=(function(t,i,o){const l=Ie(t);return l.sa(),new zA(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),Yo:ZA.bind(null,r),t_:nk.bind(null,r),ta:ek.bind(null,r),na:tk.bind(null,r)}),r.Ra.push((async e=>{e?(r.fa.B_(),await Vc(r)):(await r.fa.stop(),r.Ta.length>0&&(ie(mi,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new Nr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const h=Date.now()+i,m=new jf(e,t,h,o,l);return m.start(i),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new re(H.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ff(r,e){if(br("AsyncQueue",`${e}: ${r}`),Do(r))return new re(H.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{static emptySet(e){return new wo(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||fe.comparator(t.key,i.key):(t,i)=>fe.comparator(t.key,i.key),this.keyedMap=Ma(),this.sortedSet=new st(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof wo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new wo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ly{constructor(){this.ga=new st(fe.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ve(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class ko{constructor(e,t,i,o,l,h,m,y,v){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=y,this.hasCachedResults=v}static fromInitialDocuments(e,t,i,o,l){const h=[];return t.forEach((m=>{h.push({type:0,doc:m})})),new ko(e,t,wo.emptySet(t),h,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ac(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class ik{constructor(){this.queries=Oy(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const o=Ie(t),l=o.queries;o.queries=Oy(),l.forEach(((h,m)=>{for(const y of m.ba)y.onError(i)}))})(this,new re(H.ABORTED,"Firestore shutting down"))}}function Oy(){return new _i((r=>N_(r)),Ac)}async function cv(r,e){const t=Ie(r);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.Sa()&&e.Da()&&(i=2):(l=new sk,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const m=Ff(h,`Initialization of query '${co(e.query)}' failed`);return void e.onError(m)}t.queries.set(o,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Uf(t)}async function hv(r,e){const t=Ie(r),i=e.query;let o=3;const l=t.queries.get(i);if(l){const h=l.ba.indexOf(e);h>=0&&(l.ba.splice(h,1),l.ba.length===0?o=e.Da()?0:1:!l.Sa()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function ok(r,e){const t=Ie(r);let i=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const m of h.ba)m.Fa(o)&&(i=!0);h.wa=o}}i&&Uf(t)}function ak(r,e,t){const i=Ie(r),o=i.queries.get(e);if(o)for(const l of o.ba)l.onError(t);i.queries.delete(e)}function Uf(r){r.Ca.forEach((e=>{e.next()}))}var Xd,My;(My=Xd||(Xd={})).Ma="default",My.Cache="cache";class dv{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new ko(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=ko.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Xd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(e){this.key=e}}class pv{constructor(e){this.key=e}}class lk{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Oe(),this.mutatedKeys=Oe(),this.eu=R_(e),this.tu=new wo(this.eu)}get nu(){return this.Za}ru(e,t){const i=t?t.iu:new Ly,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,m=!1;const y=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,v=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((E,I)=>{const k=o.get(E),F=kc(this.query,I)?I:null,B=!!k&&this.mutatedKeys.has(k.key),$=!!F&&(F.hasLocalMutations||this.mutatedKeys.has(F.key)&&F.hasCommittedMutations);let q=!1;k&&F?k.data.isEqual(F.data)?B!==$&&(i.track({type:3,doc:F}),q=!0):this.su(k,F)||(i.track({type:2,doc:F}),q=!0,(y&&this.eu(F,y)>0||v&&this.eu(F,v)<0)&&(m=!0)):!k&&F?(i.track({type:0,doc:F}),q=!0):k&&!F&&(i.track({type:1,doc:k}),q=!0,(y||v)&&(m=!0)),q&&(F?(h=h.add(F),l=$?l.add(E):l.delete(E)):(h=h.delete(E),l=l.delete(E)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const E=this.query.limitType==="F"?h.last():h.first();h=h.delete(E.key),l=l.delete(E.key),i.track({type:1,doc:E})}return{tu:h,iu:i,Ss:m,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((E,I)=>(function(F,B){const $=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ve(20277,{Vt:q})}};return $(F)-$(B)})(E.type,I.type)||this.eu(E.doc,I.doc))),this.ou(i),o=o??!1;const m=t&&!o?this._u():[],y=this.Ya.size===0&&this.current&&!o?1:0,v=y!==this.Xa;return this.Xa=y,h.length!==0||v?{snapshot:new ko(this.query,e.tu,l,h,e.mutatedKeys,y===0,v,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ly,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Oe(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const t=[];return e.forEach((i=>{this.Ya.has(i)||t.push(new pv(i))})),this.Ya.forEach((i=>{e.has(i)||t.push(new fv(i))})),t}cu(e){this.Za=e.ks,this.Ya=Oe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ko.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const zf="SyncEngine";class uk{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class ck{constructor(e){this.key=e,this.hu=!1}}class hk{constructor(e,t,i,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new _i((m=>N_(m)),Ac),this.Iu=new Map,this.Eu=new Set,this.Ru=new st(fe.comparator),this.Au=new Map,this.Vu=new Rf,this.du={},this.mu=new Map,this.fu=Ao.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function dk(r,e,t=!0){const i=wv(r);let o;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await mv(i,e,t,!0),o}async function fk(r,e){const t=wv(r);await mv(t,e,!0,!1)}async function mv(r,e,t,i){const o=await bA(r.localStore,sr(e)),l=o.targetId,h=r.sharedClientState.addLocalQueryTarget(l,t);let m;return i&&(m=await pk(r,e,l,h==="current",o.resumeToken)),r.isPrimaryClient&&t&&sv(r.remoteStore,o),m}async function pk(r,e,t,i,o){r.pu=(I,k,F)=>(async function($,q,ce,ee){let Z=q.view.ru(ce);Z.Ss&&(Z=await Ny($.localStore,q.query,!1).then((({documents:N})=>q.view.ru(N,Z))));const we=ee&&ee.targetChanges.get(q.targetId),Se=ee&&ee.targetMismatches.get(q.targetId)!=null,ye=q.view.applyChanges(Z,$.isPrimaryClient,we,Se);return Fy($,q.targetId,ye.au),ye.snapshot})(r,I,k,F);const l=await Ny(r.localStore,e,!0),h=new lk(e,l.ks),m=h.ru(l.documents),y=cl.createSynthesizedTargetChangeForCurrentChange(t,i&&r.onlineState!=="Offline",o),v=h.applyChanges(m,r.isPrimaryClient,y);Fy(r,t,v.au);const E=new uk(e,t,h);return r.Tu.set(e,E),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),v.snapshot}async function mk(r,e,t){const i=Ie(r),o=i.Tu.get(e),l=i.Iu.get(o.targetId);if(l.length>1)return i.Iu.set(o.targetId,l.filter((h=>!Ac(h,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Yd(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&Vf(i.remoteStore,o.targetId),Zd(i,o.targetId)})).catch(bo)):(Zd(i,o.targetId),await Yd(i.localStore,o.targetId,!0))}async function gk(r,e){const t=Ie(r),i=t.Tu.get(e),o=t.Iu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Vf(t.remoteStore,i.targetId))}async function yk(r,e,t){const i=Ik(r);try{const o=await(function(h,m){const y=Ie(h),v=et.now(),E=m.reduce(((F,B)=>F.add(B.key)),Oe());let I,k;return y.persistence.runTransaction("Locally write mutations","readwrite",(F=>{let B=Vr(),$=Oe();return y.xs.getEntries(F,E).next((q=>{B=q,B.forEach(((ce,ee)=>{ee.isValidDocument()||($=$.add(ce))}))})).next((()=>y.localDocuments.getOverlayedDocuments(F,B))).next((q=>{I=q;const ce=[];for(const ee of m){const Z=PS(ee,I.get(ee.key).overlayedDocument);Z!=null&&ce.push(new bs(ee.key,Z,E_(Z.value.mapValue),cn.exists(!0)))}return y.mutationQueue.addMutationBatch(F,v,ce,m)})).next((q=>{k=q;const ce=q.applyToLocalDocumentSet(I,$);return y.documentOverlayCache.saveOverlays(F,q.batchId,ce)}))})).then((()=>({batchId:k.batchId,changes:b_(I)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(h,m,y){let v=h.du[h.currentUser.toKey()];v||(v=new st(Le)),v=v.insert(m,y),h.du[h.currentUser.toKey()]=v})(i,o.batchId,t),await dl(i,o.changes),await Vc(i.remoteStore)}catch(o){const l=Ff(o,"Failed to persist write");t.reject(l)}}async function gv(r,e){const t=Ie(r);try{const i=await NA(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const h=t.Au.get(l);h&&(He(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?He(h.hu,14607):o.removedDocuments.size>0&&(He(h.hu,42227),h.hu=!1))})),await dl(t,i,e)}catch(i){await bo(i)}}function jy(r,e,t){const i=Ie(r);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Tu.forEach(((l,h)=>{const m=h.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(h,m){const y=Ie(h);y.onlineState=m;let v=!1;y.queries.forEach(((E,I)=>{for(const k of I.ba)k.va(m)&&(v=!0)})),v&&Uf(y)})(i.eventManager,e),o.length&&i.Pu.J_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function _k(r,e,t){const i=Ie(r);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Au.get(e),l=o&&o.key;if(l){let h=new st(fe.comparator);h=h.insert(l,Ut.newNoDocument(l,xe.min()));const m=Oe().add(l),y=new Pc(xe.min(),new Map,new st(Le),h,m);await gv(i,y),i.Ru=i.Ru.remove(l),i.Au.delete(e),Bf(i)}else await Yd(i.localStore,e,!1).then((()=>Zd(i,e,t))).catch(bo)}async function vk(r,e){const t=Ie(r),i=e.batch.batchId;try{const o=await CA(t.localStore,e);_v(t,i,null),yv(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await dl(t,o)}catch(o){await bo(o)}}async function wk(r,e,t){const i=Ie(r);try{const o=await(function(h,m){const y=Ie(h);return y.persistence.runTransaction("Reject batch","readwrite-primary",(v=>{let E;return y.mutationQueue.lookupMutationBatch(v,m).next((I=>(He(I!==null,37113),E=I.keys(),y.mutationQueue.removeMutationBatch(v,I)))).next((()=>y.mutationQueue.performConsistencyCheck(v))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(v,E,m))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,E))).next((()=>y.localDocuments.getDocuments(v,E)))}))})(i.localStore,e);_v(i,e,t),yv(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await dl(i,o)}catch(o){await bo(o)}}function yv(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function _v(r,e,t){const i=Ie(r);let o=i.du[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.du[i.currentUser.toKey()]=o}}function Zd(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Iu.get(e))r.Tu.delete(i),t&&r.Pu.yu(i,t);r.Iu.delete(e),r.isPrimaryClient&&r.Vu.Gr(e).forEach((i=>{r.Vu.containsKey(i)||vv(r,i)}))}function vv(r,e){r.Eu.delete(e.path.canonicalString());const t=r.Ru.get(e);t!==null&&(Vf(r.remoteStore,t),r.Ru=r.Ru.remove(e),r.Au.delete(t),Bf(r))}function Fy(r,e,t){for(const i of t)i instanceof fv?(r.Vu.addReference(i.key,e),Ek(r,i)):i instanceof pv?(ie(zf,"Document no longer in limbo: "+i.key),r.Vu.removeReference(i.key,e),r.Vu.containsKey(i.key)||vv(r,i.key)):ve(19791,{wu:i})}function Ek(r,e){const t=e.key,i=t.path.canonicalString();r.Ru.get(t)||r.Eu.has(i)||(ie(zf,"New document in limbo: "+t),r.Eu.add(i),Bf(r))}function Bf(r){for(;r.Eu.size>0&&r.Ru.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new fe(Ye.fromString(e)),i=r.fu.next();r.Au.set(i,new ck(t)),r.Ru=r.Ru.insert(t,i),sv(r.remoteStore,new ys(sr(Sf(t.path)),i,"TargetPurposeLimboResolution",Tc.ce))}}async function dl(r,e,t){const i=Ie(r),o=[],l=[],h=[];i.Tu.isEmpty()||(i.Tu.forEach(((m,y)=>{h.push(i.pu(y,e,t).then((v=>{var E;if((v||t)&&i.isPrimaryClient){const I=v?!v.fromCache:(E=t==null?void 0:t.targetChanges.get(y.targetId))==null?void 0:E.current;i.sharedClientState.updateQueryState(y.targetId,I?"current":"not-current")}if(v){o.push(v);const I=bf.Es(y.targetId,v);l.push(I)}})))})),await Promise.all(h),i.Pu.J_(o),await(async function(y,v){const E=Ie(y);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(I=>W.forEach(v,(k=>W.forEach(k.Ts,(F=>E.persistence.referenceDelegate.addReference(I,k.targetId,F))).next((()=>W.forEach(k.Is,(F=>E.persistence.referenceDelegate.removeReference(I,k.targetId,F)))))))))}catch(I){if(!Do(I))throw I;ie(Df,"Failed to update sequence numbers: "+I)}for(const I of v){const k=I.targetId;if(!I.fromCache){const F=E.vs.get(k),B=F.snapshotVersion,$=F.withLastLimboFreeSnapshotVersion(B);E.vs=E.vs.insert(k,$)}}})(i.localStore,l))}async function xk(r,e){const t=Ie(r);if(!t.currentUser.isEqual(e)){ie(zf,"User change. New user:",e.toKey());const i=await ev(t.localStore,e);t.currentUser=e,(function(l,h){l.mu.forEach((m=>{m.forEach((y=>{y.reject(new re(H.CANCELLED,h))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await dl(t,i.Ns)}}function Tk(r,e){const t=Ie(r),i=t.Au.get(e);if(i&&i.hu)return Oe().add(i.key);{let o=Oe();const l=t.Iu.get(e);if(!l)return o;for(const h of l){const m=t.Tu.get(h);o=o.unionWith(m.view.nu)}return o}}function wv(r){const e=Ie(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=gv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Tk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_k.bind(null,e),e.Pu.J_=ok.bind(null,e.eventManager),e.Pu.yu=ak.bind(null,e.eventManager),e}function Ik(r){const e=Ie(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=vk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=wk.bind(null,e),e}class hc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=bc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return kA(this.persistence,new IA,e.initialUser,this.serializer)}Cu(e){return new Z_(Pf.Vi,this.serializer)}Du(e){return new VA}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}hc.provider={build:()=>new hc};class Sk extends hc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){He(this.persistence.referenceDelegate instanceof uc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new uA(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Jt.withCacheSize(this.cacheSizeBytes):Jt.DEFAULT;return new Z_((i=>uc.Vi(i,t)),this.serializer)}}class ef{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>jy(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=xk.bind(null,this.syncEngine),await rk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new ik})()}createDatastore(e){const t=bc(e.databaseInfo.databaseId),i=FA(e.databaseInfo);return qA(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,l,h,m){return new WA(i,o,l,h,m)})(this.localStore,this.datastore,e.asyncQueue,(t=>jy(this.syncEngine,t,0)),(function(){return by.v()?new by:new LA})())}createSyncEngine(e,t){return(function(o,l,h,m,y,v,E){const I=new hk(o,l,h,m,y,v);return E&&(I.gu=!0),I})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=Ie(o);ie(mi,"RemoteStore shutting down."),l.Ea.add(5),await hl(l),l.Aa.shutdown(),l.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}ef.provider={build:()=>new ef};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):br("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cs="FirestoreClient";class Ak{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this._databaseInfo=o,this.user=Ft.UNAUTHENTICATED,this.clientId=vf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async h=>{ie(Cs,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(i,(h=>(ie(Cs,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Nr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Ff(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Id(r,e){r.asyncQueue.verifyOperationInProgress(),ie(Cs,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let i=t.initialUser;r.setCredentialChangeListener((async o=>{i.isEqual(o)||(await ev(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function Uy(r,e){r.asyncQueue.verifyOperationInProgress();const t=await kk(r);ie(Cs,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((i=>Vy(e.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,o)=>Vy(e.remoteStore,o))),r._onlineComponents=e}async function kk(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ie(Cs,"Using user provided OfflineComponentProvider");try{await Id(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===H.FAILED_PRECONDITION||o.code===H.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;pi("Error using user provided cache. Falling back to memory cache: "+t),await Id(r,new hc)}}else ie(Cs,"Using default OfflineComponentProvider"),await Id(r,new Sk(void 0));return r._offlineComponents}async function xv(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ie(Cs,"Using user provided OnlineComponentProvider"),await Uy(r,r._uninitializedComponentsProvider._online)):(ie(Cs,"Using default OnlineComponentProvider"),await Uy(r,new ef))),r._onlineComponents}function Ck(r){return xv(r).then((e=>e.syncEngine))}async function Tv(r){const e=await xv(r),t=e.eventManager;return t.onListen=dk.bind(null,e.syncEngine),t.onUnlisten=mk.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=fk.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=gk.bind(null,e.syncEngine),t}function Nk(r,e,t={}){const i=new Nr;return r.asyncQueue.enqueueAndForget((async()=>(function(l,h,m,y,v){const E=new Ev({next:k=>{E.Nu(),h.enqueueAndForget((()=>hv(l,I)));const F=k.docs.has(m);!F&&k.fromCache?v.reject(new re(H.UNAVAILABLE,"Failed to get document because the client is offline.")):F&&k.fromCache&&y&&y.source==="server"?v.reject(new re(H.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(k)},error:k=>v.reject(k)}),I=new dv(Sf(m.path),E,{includeMetadataChanges:!0,Ka:!0});return cv(l,I)})(await Tv(r),r.asyncQueue,e,t,i))),i.promise}function Rk(r,e,t={}){const i=new Nr;return r.asyncQueue.enqueueAndForget((async()=>(function(l,h,m,y,v){const E=new Ev({next:k=>{E.Nu(),h.enqueueAndForget((()=>hv(l,I))),k.fromCache&&y.source==="server"?v.reject(new re(H.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(k)},error:k=>v.reject(k)}),I=new dv(m,E,{includeMetadataChanges:!0,Ka:!0});return cv(l,I)})(await Tv(r),r.asyncQueue,e,t,i))),i.promise}function Pk(r,e){const t=new Nr;return r.asyncQueue.enqueueAndForget((async()=>yk(await Ck(r),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iv(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bk="ComponentProvider",zy=new Map;function Dk(r,e,t,i,o){return new ZI(r,e,t,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,Iv(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sv="firestore.googleapis.com",By=!0;class $y{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new re(H.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Sv,this.ssl=By}else this.host=e.host,this.ssl=e.ssl??By;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=X_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<aA)throw new re(H.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}BI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Iv(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new re(H.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new re(H.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new re(H.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Lc{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $y({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new re(H.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new re(H.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $y(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new bI;switch(i.type){case"firstParty":return new OI(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new re(H.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=zy.get(t);i&&(ie(bk,"Removing Datastore"),zy.delete(t),i.terminate())})(this),Promise.resolve()}}function Vk(r,e,t,i={}){var v;r=Dr(r,Lc);const o=No(e),l=r._getSettings(),h={...l,emulatorOptions:r._getEmulatorOptions()},m=`${e}:${t}`;o&&(h0(`https://${m}`),d0("Firestore",!0)),l.host!==Sv&&l.host!==m&&pi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...l,host:m,ssl:o,emulatorOptions:i};if(!ui(y,h)&&(r._setSettings(y),i.mockUserToken)){let E,I;if(typeof i.mockUserToken=="string")E=i.mockUserToken,I=Ft.MOCK_USER;else{E=pE(i.mockUserToken,(v=r._app)==null?void 0:v.options.projectId);const k=i.mockUserToken.sub||i.mockUserToken.user_id;if(!k)throw new re(H.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");I=new Ft(k)}r._authCredentials=new DI(new u_(E,I))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new wi(this.firestore,e,this._query)}}class _t{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _t(this.firestore,e,this._key)}toJSON(){return{type:_t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(ll(t,_t._jsonSchema))return new _t(e,i||null,new fe(Ye.fromString(t.referencePath)))}}_t._jsonSchemaVersion="firestore/documentReference/1.0",_t._jsonSchema={type:yt("string",_t._jsonSchemaVersion),referencePath:yt("string")};class xs extends wi{constructor(e,t,i){super(e,t,Sf(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _t(this.firestore,null,new fe(e))}withConverter(e){return new xs(this.firestore,e,this._path)}}function Av(r,e,...t){if(r=ht(r),c_("collection","path",e),r instanceof Lc){const i=Ye.fromString(e,...t);return ny(i),new xs(r,null,i)}{if(!(r instanceof _t||r instanceof xs))throw new re(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Ye.fromString(e,...t));return ny(i),new xs(r.firestore,null,i)}}function $f(r,e,...t){if(r=ht(r),arguments.length===1&&(e=vf.newId()),c_("doc","path",e),r instanceof Lc){const i=Ye.fromString(e,...t);return ty(i),new _t(r,null,new fe(i))}{if(!(r instanceof _t||r instanceof xs))throw new re(H.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Ye.fromString(e,...t));return ty(i),new _t(r.firestore,r instanceof xs?r.converter:null,new fe(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qy="AsyncQueue";class Hy{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new nv(this,"async_queue_retry"),this._c=()=>{const i=Td();i&&ie(qy,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Td();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Td();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Nr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Do(e))throw e;ie(qy,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,br("INTERNAL UNHANDLED ERROR: ",Wy(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=jf.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&ve(47125,{Pc:Wy(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Wy(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class Oo extends Lc{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new Hy,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Hy(e),this._firestoreClient=void 0,await e}}}function Lk(r,e){const t=typeof r=="object"?r:g0(),i=typeof r=="string"?r:rc,o=of(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=dE("firestore");l&&Vk(o,...l)}return o}function Oc(r){if(r._terminated)throw new re(H.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||Ok(r),r._firestoreClient}function Ok(r){var i,o,l,h;const e=r._freezeSettings(),t=Dk(r._databaseId,((i=r._app)==null?void 0:i.options.appId)||"",r._persistenceKey,(o=r._app)==null?void 0:o.options.apiKey,e);r._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((h=e.localCache)!=null&&h._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new Ak(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(y){const v=y==null?void 0:y._online.build();return{_offline:y==null?void 0:y._offline.build(v),_online:v}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new wn(bt.fromBase64String(e))}catch(t){throw new re(H.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new wn(bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:wn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ll(e,wn._jsonSchema))return wn.fromBase64String(e.bytes)}}wn._jsonSchemaVersion="firestore/bytes/1.0",wn._jsonSchema={type:yt("string",wn._jsonSchemaVersion),bytes:yt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new re(H.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new re(H.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new re(H.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:or._jsonSchemaVersion}}static fromJSON(e){if(ll(e,or._jsonSchema))return new or(e.latitude,e.longitude)}}or._jsonSchemaVersion="firestore/geoPoint/1.0",or._jsonSchema={type:yt("string",or._jsonSchemaVersion),latitude:yt("number"),longitude:yt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Vn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ll(e,Vn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Vn(e.vectorValues);throw new re(H.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Vn._jsonSchemaVersion="firestore/vectorValue/1.0",Vn._jsonSchema={type:yt("string",Vn._jsonSchemaVersion),vectorValues:yt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mk=/^__.*__$/;class jk{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new bs(e,this.data,this.fieldMask,t,this.fieldTransforms):new ul(e,this.data,t,this.fieldTransforms)}}class kv{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new bs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Cv(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ve(40011,{dataSource:r})}}class Wf{constructor(e,t,i,o,l,h){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Wf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){var o;const t=(o=this.path)==null?void 0:o.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return dc(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(Cv(this.dataSource)&&Mk.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class Fk{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||bc(e)}createContext(e,t,i,o=!1){return new Wf({dataSource:e,methodName:t,targetDoc:i,path:Pt.emptyPath(),arrayElement:!1,hasConverter:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Gf(r){const e=r._freezeSettings(),t=bc(r._databaseId);return new Fk(r._databaseId,!!e.ignoreUndefinedProperties,t)}function Nv(r,e,t,i,o,l={}){const h=r.createContext(l.merge||l.mergeFields?2:0,e,t,o);Kf("Data must be an object, but it was:",h,i);const m=Rv(i,h);let y,v;if(l.merge)y=new un(h.fieldMask),v=h.fieldTransforms;else if(l.mergeFields){const E=[];for(const I of l.mergeFields){const k=Co(e,I,t);if(!h.contains(k))throw new re(H.INVALID_ARGUMENT,`Field '${k}' is specified in your field mask but missing from your input data.`);Dv(E,k)||E.push(k)}y=new un(E),v=h.fieldTransforms.filter((I=>y.covers(I.field)))}else y=null,v=h.fieldTransforms;return new jk(new Xt(m),y,v)}class Mc extends Hf{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Mc}}function Uk(r,e,t,i){const o=r.createContext(1,e,t);Kf("Data must be an object, but it was:",o,i);const l=[],h=Xt.empty();Ps(i,((y,v)=>{const E=bv(e,y,t);v=ht(v);const I=o.childContextForFieldPath(E);if(v instanceof Mc)l.push(E);else{const k=fl(v,I);k!=null&&(l.push(E),h.set(E,k))}}));const m=new un(l);return new kv(h,m,o.fieldTransforms)}function zk(r,e,t,i,o,l){const h=r.createContext(1,e,t),m=[Co(e,i,t)],y=[o];if(l.length%2!=0)throw new re(H.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let k=0;k<l.length;k+=2)m.push(Co(e,l[k])),y.push(l[k+1]);const v=[],E=Xt.empty();for(let k=m.length-1;k>=0;--k)if(!Dv(v,m[k])){const F=m[k];let B=y[k];B=ht(B);const $=h.childContextForFieldPath(F);if(B instanceof Mc)v.push(F);else{const q=fl(B,$);q!=null&&(v.push(F),E.set(F,q))}}const I=new un(v);return new kv(E,I,h.fieldTransforms)}function Bk(r,e,t,i=!1){return fl(t,r.createContext(i?4:3,e))}function fl(r,e){if(Pv(r=ht(r)))return Kf("Unsupported field value:",e,r),Rv(r,e);if(r instanceof Hf)return(function(i,o){if(!Cv(o.dataSource))throw o.createError(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.createError(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,o){const l=[];let h=0;for(const m of i){let y=fl(m,o.childContextForArray(h));y==null&&(y={nullValue:"NULL_VALUE"}),l.push(y),h++}return{arrayValue:{values:l}}})(r,e)}return(function(i,o){if((i=ht(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return SS(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=et.fromDate(i);return{timestampValue:lc(o.serializer,l)}}if(i instanceof et){const l=new et(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:lc(o.serializer,l)}}if(i instanceof or)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof wn)return{bytesValue:q_(o.serializer,i._byteString)};if(i instanceof _t){const l=o.databaseId,h=i.firestore._databaseId;if(!h.isEqual(l))throw o.createError(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Nf(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Vn)return(function(h,m){const y=h instanceof Vn?h.toArray():h;return{mapValue:{fields:{[v_]:{stringValue:w_},[sc]:{arrayValue:{values:y.map((E=>{if(typeof E!="number")throw m.createError("VectorValues must only contain numeric values.");return Af(m.serializer,E)}))}}}}}})(i,o);if(J_(i))return i._toProto(o.serializer);throw o.createError(`Unsupported field value: ${xc(i)}`)})(r,e)}function Rv(r,e){const t={};return f_(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ps(r,((i,o)=>{const l=fl(o,e.childContextForField(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function Pv(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof et||r instanceof or||r instanceof wn||r instanceof _t||r instanceof Hf||r instanceof Vn||J_(r))}function Kf(r,e,t){if(!Pv(t)||!h_(t)){const i=xc(t);throw i==="an object"?e.createError(r+" a custom object"):e.createError(r+" "+i)}}function Co(r,e,t){if((e=ht(e))instanceof qf)return e._internalPath;if(typeof e=="string")return bv(r,e);throw dc("Field path arguments must be of type string or ",r,!1,void 0,t)}const $k=new RegExp("[~\\*/\\[\\]]");function bv(r,e,t){if(e.search($k)>=0)throw dc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new qf(...e.split("."))._internalPath}catch{throw dc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function dc(r,e,t,i,o){const l=i&&!i.isEmpty(),h=o!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let y="";return(l||h)&&(y+=" (found",l&&(y+=` in field ${i}`),h&&(y+=` in document ${o}`),y+=")"),new re(H.INVALID_ARGUMENT,m+r+y)}function Dv(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{convertValue(e,t="none"){switch(As(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ss(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ve(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Ps(e,((o,l)=>{i[o]=this.convertValue(l,t)})),i}convertVectorValue(e){var i,o,l;const t=(l=(o=(i=e.fields)==null?void 0:i[sc].arrayValue)==null?void 0:o.values)==null?void 0:l.map((h=>ct(h.doubleValue)));return new Vn(t)}convertGeoPoint(e){return new or(ct(e.latitude),ct(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Sc(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Ya(e));default:return null}}convertTimestamp(e){const t=Is(e);return new et(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Ye.fromString(e);He(Y_(i),9688,{name:e});const o=new Ja(i.get(1),i.get(3)),l=new fe(i.popFirst(5));return o.isEqual(t)||br(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv extends qk{constructor(e){super(),this.firestore=e}convertBytes(e){return new wn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new _t(this.firestore,null,t)}}const Gy="@firebase/firestore",Ky="4.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new _t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Hk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(Co("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Hk extends Lv{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wk(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new re(H.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Qf{}class Ov extends Qf{}function Gk(r,e,...t){let i=[];e instanceof Qf&&i.push(e),i=i.concat(t),(function(l){const h=l.filter((y=>y instanceof Jf)).length,m=l.filter((y=>y instanceof Yf)).length;if(h>1||h>0&&m>0)throw new re(H.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)r=o._apply(r);return r}class Yf extends Ov{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Yf(e,t,i)}_apply(e){const t=this._parse(e);return Mv(e._query,t),new wi(e.firestore,e.converter,qd(e._query,t))}_parse(e){const t=Gf(e.firestore);return(function(l,h,m,y,v,E,I){let k;if(v.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new re(H.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){Yy(I,E);const B=[];for(const $ of I)B.push(Qy(y,l,$));k={arrayValue:{values:B}}}else k=Qy(y,l,I)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||Yy(I,E),k=Bk(m,h,I,E==="in"||E==="not-in");return gt.create(v,E,k)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class Jf extends Qf{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Jf(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:On.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,l){let h=o;const m=l.getFlattenedFilters();for(const y of m)Mv(h,y),h=qd(h,y)})(e._query,t),new wi(e.firestore,e.converter,qd(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Xf extends Ov{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Xf(e,t)}_apply(e){const t=(function(o,l,h){if(o.startAt!==null)throw new re(H.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new re(H.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Za(l,h)})(e._query,this._field,this._direction);return new wi(e.firestore,e.converter,yS(e._query,t))}}function Kk(r,e="asc"){const t=e,i=Co("orderBy",r);return Xf._create(i,t)}function Qy(r,e,t){if(typeof(t=ht(t))=="string"){if(t==="")throw new re(H.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!C_(e)&&t.indexOf("/")!==-1)throw new re(H.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Ye.fromString(t));if(!fe.isDocumentKey(i))throw new re(H.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return cy(r,new fe(i))}if(t instanceof _t)return cy(r,t._key);throw new re(H.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xc(t)}.`)}function Yy(r,e){if(!Array.isArray(r)||r.length===0)throw new re(H.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Mv(r,e){const t=(function(o,l){for(const h of o)for(const m of h.getFlattenedFilters())if(l.indexOf(m.op)>=0)return m.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new re(H.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new re(H.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function jv(r,e,t){let i;return i=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,i}class Fa{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class li extends Lv{constructor(e,t,i,o,l,h){super(e,t,i,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Wu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Co("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new re(H.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=li._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}li._jsonSchemaVersion="firestore/documentSnapshot/1.0",li._jsonSchema={type:yt("string",li._jsonSchemaVersion),bundleSource:yt("string","DocumentSnapshot"),bundleName:yt("string"),bundle:yt("string")};class Wu extends li{data(e={}){return super.data(e)}}class Eo{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Fa(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Wu(this._firestore,this._userDataWriter,i.key,i,new Fa(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new re(H.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((m=>{const y=new Wu(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Fa(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:y,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>l||m.type!==3)).map((m=>{const y=new Wu(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Fa(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let v=-1,E=-1;return m.type!==0&&(v=h.indexOf(m.doc.key),h=h.delete(m.doc.key)),m.type!==1&&(h=h.add(m.doc),E=h.indexOf(m.doc.key)),{type:Qk(m.type),doc:y,oldIndex:v,newIndex:E}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new re(H.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Eo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=vf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Qk(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ve(61501,{type:r})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Eo._jsonSchemaVersion="firestore/querySnapshot/1.0",Eo._jsonSchema={type:yt("string",Eo._jsonSchemaVersion),bundleSource:yt("string","QuerySnapshot"),bundleName:yt("string"),bundle:yt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Gf(e)}set(e,t,i){this._verifyNotCommitted();const o=Sd(e,this._firestore),l=jv(o.converter,t,i),h=Nv(this._dataReader,"WriteBatch.set",o._key,l,o.converter!==null,i);return this._mutations.push(h.toMutation(o._key,cn.none())),this}update(e,t,i,...o){this._verifyNotCommitted();const l=Sd(e,this._firestore);let h;return h=typeof(t=ht(t))=="string"||t instanceof qf?zk(this._dataReader,"WriteBatch.update",l._key,t,i,o):Uk(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(h.toMutation(l._key,cn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Sd(e,this._firestore);return this._mutations=this._mutations.concat(new Rc(t._key,cn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new re(H.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Sd(r,e){if((r=ht(r)).firestore!==e)throw new re(H.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fv(r){r=Dr(r,_t);const e=Dr(r.firestore,Oo),t=Oc(e);return Nk(t,r._key).then((i=>Jk(e,r,i)))}function tf(r){r=Dr(r,wi);const e=Dr(r.firestore,Oo),t=Oc(e),i=new Vv(e);return Wk(r._query),Rk(t,r._query).then((o=>new Eo(e,i,r,o)))}function Zf(r,e,t){r=Dr(r,_t);const i=Dr(r.firestore,Oo),o=jv(r.converter,e,t),l=Gf(i);return ep(i,[Nv(l,"setDoc",r._key,o,r.converter!==null,t).toMutation(r._key,cn.none())])}function Jy(r){return ep(Dr(r.firestore,Oo),[new Rc(r._key,cn.none())])}function ep(r,e){const t=Oc(r);return Pk(t,e)}function Jk(r,e,t){const i=t.docs.get(e._key),o=new Vv(r);return new li(r,o,e._key,i,new Fa(t.hasPendingWrites,t.fromCache),e.converter)}function Xk(r){return r=Dr(r,Oo),Oc(r),new Yk(r,(e=>ep(r,e)))}(function(e,t=!0){PI(Ro),xo(new ci("firestore",((i,{instanceIdentifier:o,options:l})=>{const h=i.getProvider("app").getImmediate(),m=new Oo(new VI(i.getProvider("auth-internal")),new MI(h,i.getProvider("app-check-internal")),eS(h,o),h);return l={useFetchStreams:t,...l},m._setSettings(l),m}),"PUBLIC").setMultipleInstances(!0)),ws(Gy,Ky,e),ws(Gy,Ky,"esm2020")})();const Zk={apiKey:"AIzaSyBAf83WJpNKrse4AIIGYajoGt_Q0jeQ5zs",authDomain:"wandr-b02f5.firebaseapp.com",projectId:"wandr-b02f5",storageBucket:"wandr-b02f5.firebasestorage.app",messagingSenderId:"426584594137",appId:"1:426584594137:web:5beca6fa60330f90b410c8"},Uv=m0(Zk),fc=tI(Uv),Mo=Lk(Uv);function e2(){const[r,e]=de.useState(null),[t,i]=de.useState(!0);return de.useEffect(()=>Bx(fc,l=>{e(l),i(!1)}),[]),{user:r,loading:t}}function zv(r){return Av(Mo,"users",r,"trips")}function Bv(r,e){return $f(Mo,"users",r,"trips",e)}function tp(r,e){return $f(Mo,"users",r,"chats",e)}function t2(r){return Av(Mo,"users",r,"chats")}function np(r){return $f(Mo,"users",r,"settings","main")}async function n2(r){return(await tf(Gk(zv(r),Kk("createdAt","desc")))).docs.map(t=>t.data())}async function Xy(r,e){await Zf(Bv(r,e.id),e)}async function r2(r,e){await Promise.all([Jy(Bv(r,e)),Jy(tp(r,e))])}async function s2(r,e){const t=await Fv(tp(r,e));return t.exists()?t.data().messages??[]:[]}async function i2(r,e,t){await Zf(tp(r,e),{messages:t})}async function o2(r){const e=await Fv(np(r));return e.exists()?e.data().apiKey??"":""}async function a2(r,e){await Zf(np(r),{apiKey:e})}async function l2(r){const e=Xk(Mo),[t,i]=await Promise.all([tf(zv(r)),tf(t2(r))]);t.docs.forEach(o=>e.delete(o.ref)),i.docs.forEach(o=>e.delete(o.ref)),e.delete(np(r)),await e.commit()}let Gu=null;function Zy(r){Gu=r}function u2(){return Math.random().toString(36).slice(2,9)}function xn(r){const e=u2();return Gu==null||Gu({...r,id:e,timestamp:new Date().toISOString()}),e}const c2="https://api.perplexity.ai/chat/completions",h2="sonar-pro";async function jc(r,e,t,i={}){var y;const{maxTokens:o=8192}=i,l=[{role:"system",content:e},...r],h=await fetch(c2,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({model:h2,max_tokens:o,messages:l})});if(!h.ok){const v=await h.json().catch(()=>({}));throw new Error(((y=v==null?void 0:v.error)==null?void 0:y.message)||`API error ${h.status}`)}return(await h.json()).choices[0].message.content}function rp(r){try{return JSON.parse(r)}catch{const e=r.indexOf("{"),t=r.indexOf("[");let i=-1,o="";if(e!==-1&&(t===-1||e<t)?(i=e,o="}"):t!==-1&&(i=t,o="]"),i!==-1){const l=r.lastIndexOf(o);if(l>i)try{return JSON.parse(r.slice(i,l+1))}catch{}}throw new Error("AI returned an unexpected format. Please try again.")}}async function d2(r){const{destination:e,startDate:t,endDate:i,interests:o,budget:l,travelers:h,apiKey:m}=r;xn({message:`Creating trip to ${e}`,status:"pending"});const y=`Trip to ${e} (${t}  ${i}).
Interests: ${o.join(", ")}. Budget: $${l}. Travelers: ${h}.

Fill in this JSON exactly (no other text):
{
  "name": "<catchy 3-5 word trip name>",
  "emoji": "<single emoji>",
  "description": "<2 sentences about this trip>",
  "coverGradient": "<exactly one of: from-violet-900 to-indigo-900 | from-blue-900 to-cyan-900 | from-emerald-900 to-teal-900 | from-rose-900 to-pink-900 | from-amber-900 to-orange-900 | from-slate-900 to-blue-900>"
}`;try{const v=await jc([{role:"user",content:y}],"You are a travel expert. Output valid JSON only, no other text.",m,{maxTokens:512}),E=rp(v);return xn({message:`Trip "${E.name}" created`,status:"success"}),E}catch(v){const E=v instanceof Error?v.message:"Unknown error";throw xn({message:"Failed to create trip",detail:E,status:"error"}),v}}async function f2(r,e){const t=Math.ceil((new Date(r.endDate).getTime()-new Date(r.startDate).getTime())/864e5)+1;xn({message:`Generating ${t}-day itinerary for ${r.destination}`,status:"pending"});const i=[];for(let l=0;l<t;l++){const h=new Date(r.startDate+"T12:00:00");h.setDate(h.getDate()+l),i.push(h.toISOString().split("T")[0])}const o=`Create a ${t}-day itinerary for ${r.destination}.
Dates: ${i.join(", ")}. Interests: ${r.interests.join(", ")}.
Budget: ${r.currency}${r.budget} for ${r.travelers} person(s).

Return a JSON array of ${t} objects. Each object:
{"id":"day-N","date":"YYYY-MM-DD","title":"Day theme","activities":[
  {"id":"act-N-M","time":"HH:MM","title":"Name","description":"One sentence.","category":"food|sightseeing|activity|transport|accommodation|free","estimatedCost":0}
]}
Exactly 4 activities per day. Keep descriptions to 1 sentence.`;try{const l=await jc([{role:"user",content:o}],"Output valid JSON array only. No preamble, no explanation.",e,{maxTokens:8192}),h=rp(l);return xn({message:`Itinerary ready  ${h.length} days, ${h.reduce((m,y)=>m+y.activities.length,0)} activities`,status:"success"}),h}catch(l){const h=l instanceof Error?l.message:"Unknown error";throw xn({message:"Failed to generate itinerary",detail:h,status:"error"}),l}}async function p2(r,e){const t=Math.ceil((new Date(r.endDate).getTime()-new Date(r.startDate).getTime())/864e5)+1;xn({message:`Generating packing list for ${r.destination}`,status:"pending"});const i=`Packing list for ${t}-day trip to ${r.destination}.
Activities: ${r.interests.join(", ")}. Travelers: ${r.travelers}.

Return a JSON array of exactly 25 items:
[{"id":"item-N","name":"Item","category":"Documents|Clothing|Toiletries|Electronics|Health & Safety|Activities|Miscellaneous","packed":false,"quantity":1,"essential":true}]
Mark passport, medications as essential:true. Others essential:false.`;try{const o=await jc([{role:"user",content:i}],"Output valid JSON array only.",e,{maxTokens:3e3}),l=rp(o);return xn({message:`Packing list ready  ${l.length} items`,status:"success"}),l}catch(o){const l=o instanceof Error?o.message:"Unknown error";throw xn({message:"Failed to generate packing list",detail:l,status:"error"}),o}}async function m2(r,e,t,i){xn({message:"AI assistant responding",status:"pending"});const o=`You are a travel assistant for a trip to ${t.destination} (${t.startDate}  ${t.endDate}).
${t.travelers} traveler(s). Budget: ${t.currency}${t.budget}. Interests: ${t.interests.join(", ")}.
Be concise and specific. 2-4 sentences per answer.`;try{const l=await jc([...e,{role:"user",content:r}],o,i,{maxTokens:1024});return xn({message:"AI assistant replied",status:"success"}),l}catch(l){const h=l instanceof Error?l.message:"Unknown error";throw xn({message:"AI chat error",detail:h,status:"error"}),l}}function g2(r){switch(r){case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":return"Invalid email or password.";case"auth/email-already-in-use":return"An account with this email already exists.";case"auth/weak-password":return"Password must be at least 6 characters.";case"auth/invalid-email":return"Please enter a valid email address.";case"auth/too-many-requests":return"Too many failed attempts. Please try again later.";default:return"Something went wrong. Please try again."}}function y2(){const[r,e]=de.useState("login"),[t,i]=de.useState(""),[o,l]=de.useState(""),[h,m]=de.useState(""),[y,v]=de.useState(!1),E=async k=>{k.preventDefault(),m(""),v(!0);try{r==="create"?await jx(fc,t,o):await Fx(fc,t,o)}catch(F){m(g2(F.code))}finally{v(!1)}},I=()=>{e(k=>k==="login"?"create":"login"),m("")};return g.jsx("div",{className:"min-h-screen bg-gray-950 flex items-center justify-center p-4",children:g.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-8 w-full max-w-md shadow-2xl",children:[g.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[g.jsx("div",{className:"p-2.5 bg-indigo-500/20 rounded-xl border border-indigo-500/30",children:g.jsx(wc,{className:"w-6 h-6 text-indigo-400"})}),g.jsxs("div",{children:[g.jsx("h1",{className:"text-xl font-bold text-gray-100",children:"Wandr"}),g.jsx("p",{className:"text-xs text-indigo-400",children:"AI Trip Planner"})]})]}),g.jsx("h2",{className:"text-lg font-semibold text-gray-100 mb-6",children:r==="login"?"Sign in to your account":"Create your account"}),g.jsxs("form",{onSubmit:E,className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm text-gray-400 mb-1.5",children:"Email"}),g.jsxs("div",{className:"relative",children:[g.jsx(EI,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-600"}),g.jsx("input",{type:"email",value:t,onChange:k=>i(k.target.value),required:!0,placeholder:"you@example.com",className:"w-full bg-gray-800 border border-gray-700 rounded-xl pl-10 pr-4 py-3 text-gray-100 placeholder-gray-600 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm text-gray-400 mb-1.5",children:"Password"}),g.jsxs("div",{className:"relative",children:[g.jsx(vI,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-600"}),g.jsx("input",{type:"password",value:o,onChange:k=>l(k.target.value),required:!0,minLength:6,placeholder:"Minimum 6 characters",className:"w-full bg-gray-800 border border-gray-700 rounded-xl pl-10 pr-4 py-3 text-gray-100 placeholder-gray-600 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition"})]})]}),h&&g.jsx("p",{className:"text-sm text-red-400 bg-red-500/10 border border-red-500/20 rounded-xl px-4 py-2.5",children:h}),g.jsxs("button",{type:"submit",disabled:y||!t||!o,className:"w-full py-3 bg-indigo-600 hover:bg-indigo-500 disabled:opacity-40 disabled:cursor-not-allowed rounded-xl font-medium transition shadow-lg shadow-indigo-900/30 flex items-center justify-center gap-2",children:[y&&g.jsx(En,{className:"w-4 h-4 animate-spin"}),r==="login"?"Sign In":"Create Account"]})]}),g.jsxs("p",{className:"text-center text-sm text-gray-500 mt-6",children:[r==="login"?"Don't have an account?":"Already have an account?"," ",g.jsx("button",{onClick:I,className:"text-indigo-400 hover:text-indigo-300 transition font-medium",children:r==="login"?"Create one":"Sign in"})]})]})})}function _2({onSave:r,existing:e,onLogout:t,onDeleteAccount:i}){const[o,l]=de.useState(e),[h,m]=de.useState(""),[y,v]=de.useState(!1),[E,I]=de.useState(""),[k,F]=de.useState(""),[B,$]=de.useState(!1),q=ee=>{ee.preventDefault();const Z=o.trim();if(!Z){m("Please enter your API key");return}if(!Z.startsWith("pplx-")){m("API key should start with pplx-");return}r(Z)},ce=async()=>{$(!0),F("");try{await i(E)}catch(ee){const Z=ee;Z.code==="auth/wrong-password"||Z.code==="auth/invalid-credential"?F("Incorrect password."):F("Failed to delete account. Please try again."),$(!1)}};return g.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:g.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-8 w-full max-w-md shadow-2xl",children:[g.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[g.jsx("div",{className:"p-2.5 bg-indigo-500/20 rounded-xl border border-indigo-500/30",children:g.jsx(wc,{className:"w-6 h-6 text-indigo-400"})}),g.jsxs("div",{children:[g.jsx("h1",{className:"text-xl font-bold text-gray-100",children:"Wandr"}),g.jsx("p",{className:"text-xs text-indigo-400",children:"AI Trip Planner"})]})]}),g.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[g.jsx("div",{className:"p-2 bg-gray-800 rounded-lg",children:g.jsx(_I,{className:"w-5 h-5 text-gray-400"})}),g.jsxs("div",{children:[g.jsx("h2",{className:"font-semibold text-gray-100",children:"Connect your AI"}),g.jsx("p",{className:"text-sm text-gray-400",children:"Enter your Perplexity API key to get started"})]})]}),g.jsxs("form",{onSubmit:q,className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("input",{type:"password",value:o,onChange:ee=>{l(ee.target.value),m("")},placeholder:"pplx-...",className:"w-full bg-gray-800 border border-gray-700 rounded-xl px-4 py-3 text-gray-100 placeholder-gray-600 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition font-mono text-sm",autoFocus:!0}),h&&g.jsx("p",{className:"mt-1.5 text-sm text-red-400",children:h}),g.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Stored securely in your account. Never sent anywhere except Perplexity."})]}),g.jsxs("a",{href:"https://www.perplexity.ai/settings/api",target:"_blank",rel:"noreferrer",className:"flex items-center gap-1.5 text-sm text-indigo-400 hover:text-indigo-300 transition",children:[g.jsx(yI,{className:"w-3.5 h-3.5"}),"Get your key from Perplexity"]}),g.jsx("button",{type:"submit",disabled:!o.trim(),className:"w-full py-3 bg-indigo-600 hover:bg-indigo-500 disabled:opacity-40 disabled:cursor-not-allowed rounded-xl font-medium transition shadow-lg shadow-indigo-900/30",children:"Start Planning"})]}),g.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-800",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("button",{onClick:t,className:"flex items-center gap-2 text-sm text-gray-400 hover:text-gray-200 transition",children:[g.jsx(wI,{className:"w-4 h-4"}),"Sign out"]}),g.jsx("button",{onClick:()=>v(!0),className:"text-sm text-red-500 hover:text-red-400 transition",children:"Delete account"})]}),y&&g.jsxs("div",{className:"mt-4 p-4 bg-red-500/10 border border-red-500/20 rounded-xl space-y-3",children:[g.jsx("p",{className:"text-sm text-red-300 leading-relaxed",children:"This will permanently delete all your trips, chat history, and your account. Enter your password to confirm."}),g.jsx("input",{type:"password",value:E,onChange:ee=>{I(ee.target.value),F("")},placeholder:"Your password",className:"w-full bg-gray-800 border border-gray-700 rounded-xl px-4 py-2.5 text-gray-100 placeholder-gray-600 text-sm focus:outline-none focus:border-red-500 transition"}),k&&g.jsx("p",{className:"text-xs text-red-400",children:k}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{onClick:()=>{v(!1),I(""),F("")},className:"flex-1 py-2 text-sm text-gray-400 hover:text-gray-200 bg-gray-800 hover:bg-gray-700 rounded-xl transition",children:"Cancel"}),g.jsxs("button",{onClick:ce,disabled:!E||B,className:"flex-1 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-500 disabled:opacity-40 rounded-xl transition flex items-center justify-center gap-1.5",children:[B&&g.jsx(En,{className:"w-3.5 h-3.5 animate-spin"}),"Delete everything"]})]})]})]})]})})}function e0({trip:r,onClick:e}){const t=new Date(r.startDate),i=new Date(r.endDate),o=Math.ceil((i.getTime()-t.getTime())/864e5)+1,h={planning:{bg:"bg-amber-500/20",text:"text-amber-300",label:"Planning"},upcoming:{bg:"bg-blue-500/20",text:"text-blue-300",label:"Upcoming"},completed:{bg:"bg-emerald-500/20",text:"text-emerald-300",label:"Completed"}}[r.status];return g.jsxs("button",{onClick:e,className:"group w-full text-left rounded-2xl overflow-hidden border border-gray-800 hover:border-gray-600 transition-all duration-200 hover:-translate-y-0.5 hover:shadow-xl hover:shadow-black/40 bg-gray-900",children:[g.jsxs("div",{className:`h-32 bg-gradient-to-br ${r.coverGradient} relative overflow-hidden`,children:[g.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/40 to-transparent"}),g.jsx("div",{className:"absolute bottom-3 left-4 text-4xl drop-shadow-lg",children:r.emoji}),g.jsx("div",{className:"absolute top-3 right-3",children:g.jsx("span",{className:`text-xs px-2.5 py-1 rounded-full font-medium backdrop-blur-sm ${h.bg} ${h.text}`,children:h.label})})]}),g.jsxs("div",{className:"p-4",children:[g.jsx("h3",{className:"font-semibold text-gray-100 group-hover:text-white truncate leading-tight",children:r.name}),g.jsxs("div",{className:"flex items-center gap-1.5 mt-1",children:[g.jsx(vc,{className:"w-3.5 h-3.5 text-gray-500 shrink-0"}),g.jsx("span",{className:"text-sm text-gray-400 truncate",children:r.destination})]}),g.jsxs("div",{className:"flex items-center justify-between mt-3 text-xs text-gray-500",children:[g.jsxs("span",{className:"flex items-center gap-1",children:[g.jsx(mf,{className:"w-3.5 h-3.5"}),t.toLocaleDateString("en",{month:"short",day:"numeric"})]}),g.jsxs("span",{className:"flex items-center gap-1",children:[g.jsx(yf,{className:"w-3.5 h-3.5"}),r.travelers]}),g.jsxs("span",{className:"font-medium text-gray-400",children:[o,"d"]})]})]})]})}function v2({trips:r,onNewTrip:e,onSelectTrip:t,onSettingsClick:i}){const o=r.filter(h=>h.status!=="completed"),l=r.filter(h=>h.status==="completed");return g.jsxs("div",{className:"min-h-screen flex flex-col",children:[g.jsx("header",{className:"border-b border-gray-800 bg-gray-950/90 backdrop-blur-sm sticky top-0 z-10",children:g.jsxs("div",{className:"max-w-6xl mx-auto px-4 md:px-6 py-4 flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"p-2 bg-indigo-500/20 rounded-xl border border-indigo-500/20",children:g.jsx(wc,{className:"w-5 h-5 text-indigo-400"})}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"text-xl font-bold tracking-tight",children:"Wandr"}),g.jsx("span",{className:"text-xs text-indigo-400 bg-indigo-500/10 border border-indigo-500/20 px-2 py-0.5 rounded-full font-medium",children:"AI"})]})]}),g.jsx("button",{onClick:i,className:"p-2 text-gray-400 hover:text-gray-200 hover:bg-gray-800 rounded-lg transition",title:"API Settings",children:g.jsx(II,{className:"w-5 h-5"})})]})}),g.jsxs("main",{className:"flex-1 max-w-6xl mx-auto w-full px-4 md:px-6 py-6 md:py-8",children:[g.jsxs("div",{className:"flex items-start justify-between mb-8",children:[g.jsxs("div",{children:[g.jsx("h1",{className:"text-3xl font-bold text-gray-100",children:"Your Trips"}),g.jsx("p",{className:"text-gray-400 mt-1",children:"Plan and explore the world with AI"})]}),g.jsxs("button",{onClick:e,className:"flex items-center gap-2 px-3 md:px-5 py-2.5 bg-indigo-600 hover:bg-indigo-500 rounded-xl font-medium transition shadow-lg shadow-indigo-900/30 shrink-0",children:[g.jsx(Md,{className:"w-4 h-4"}),g.jsx("span",{className:"hidden sm:inline",children:"New Trip"})]})]}),r.length===0&&g.jsxs("div",{className:"flex flex-col items-center justify-center py-24 text-center",children:[g.jsx("div",{className:"w-20 h-20 bg-indigo-500/10 border border-indigo-500/20 rounded-3xl flex items-center justify-center mb-5",children:g.jsx(gI,{className:"w-10 h-10 text-indigo-400"})}),g.jsx("h2",{className:"text-xl font-semibold text-gray-200 mb-2",children:"No trips yet"}),g.jsx("p",{className:"text-gray-500 max-w-sm mb-6 leading-relaxed",children:"Create your first trip and let AI build a personalized itinerary, packing list, and travel guide."}),g.jsxs("button",{onClick:e,className:"flex items-center gap-2 px-6 py-3 bg-indigo-600 hover:bg-indigo-500 rounded-xl font-medium transition",children:[g.jsx(Md,{className:"w-4 h-4"}),"Plan your first trip"]})]}),o.length>0&&g.jsxs("section",{className:"mb-8",children:[g.jsx("h2",{className:"text-xs font-semibold text-gray-500 uppercase tracking-widest mb-4",children:"Upcoming & Planning"}),g.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:o.map(h=>g.jsx(e0,{trip:h,onClick:()=>t(h)},h.id))})]}),l.length>0&&g.jsxs("section",{children:[g.jsx("h2",{className:"text-xs font-semibold text-gray-500 uppercase tracking-widest mb-4",children:"Completed"}),g.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 opacity-70",children:l.map(h=>g.jsx(e0,{trip:h,onClick:()=>t(h)},h.id))})]})]})]})}const t0=[{id:"culture",label:"Culture & History",emoji:""},{id:"food",label:"Food & Dining",emoji:""},{id:"nature",label:"Nature & Outdoors",emoji:""},{id:"adventure",label:"Adventure",emoji:""},{id:"beach",label:"Beach & Relaxation",emoji:""},{id:"shopping",label:"Shopping",emoji:""},{id:"nightlife",label:"Nightlife",emoji:""},{id:"photography",label:"Photography",emoji:""},{id:"family",label:"Family-Friendly",emoji:""},{id:"luxury",label:"Luxury",emoji:""},{id:"backpacking",label:"Budget Travel",emoji:""},{id:"wellness",label:"Wellness & Spa",emoji:""}],w2=[500,1500,3e3,5e3,1e4];function E2({onBack:r,onCreate:e}){const[t,i]=de.useState(1),[o,l]=de.useState(!1),[h,m]=de.useState(""),[y,v]=de.useState(""),[E,I]=de.useState(""),[k,F]=de.useState(""),[B,$]=de.useState(2),[q,ce]=de.useState([]),[ee,Z]=de.useState(3e3),[we,Se]=de.useState("USD"),ye=new Date().toISOString().split("T")[0],N=y.trim()!==""&&E!==""&&k!==""&&new Date(k)>=new Date(E),T=q.length>0&&ee>0,A=R=>ce(S=>S.includes(R)?S.filter(te=>te!==R):[...S,R]),P=async()=>{l(!0),m("");try{await e({destination:y,startDate:E,endDate:k,travelers:B,budget:ee,currency:we,interests:q})}catch(R){const S=R instanceof Error?R.message:"Failed to create trip";m(S),l(!1)}},b=E&&k?Math.ceil((new Date(k).getTime()-new Date(E).getTime())/864e5)+1:null;return g.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-950",children:[g.jsx("header",{className:"border-b border-gray-800 bg-gray-950",children:g.jsxs("div",{className:"max-w-2xl mx-auto px-6 py-4 flex items-center gap-4",children:[g.jsx("button",{onClick:r,className:"p-2 text-gray-400 hover:text-gray-200 hover:bg-gray-800 rounded-lg transition",children:g.jsx(Od,{className:"w-5 h-5"})}),g.jsxs("div",{className:"flex-1",children:[g.jsx("h1",{className:"font-semibold text-gray-100",children:"New Trip"}),g.jsxs("p",{className:"text-xs text-gray-500",children:["Step ",t," of 3"]})]}),g.jsx("div",{className:"flex gap-1.5",children:[1,2,3].map(R=>g.jsx("div",{className:`h-1.5 w-10 rounded-full transition-colors duration-300 ${R<=t?"bg-indigo-500":"bg-gray-800"}`},R))})]})}),g.jsxs("main",{className:"flex-1 max-w-2xl mx-auto w-full px-6 py-10",children:[t===1&&g.jsxs("div",{className:"space-y-7",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"text-2xl font-bold text-gray-100 mb-1",children:"Where are you going?"}),g.jsx("p",{className:"text-gray-400",children:"Tell us your destination and travel dates."})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[g.jsx(vc,{className:"w-4 h-4 inline mr-1.5 text-gray-500"}),"Destination"]}),g.jsx("input",{type:"text",value:y,onChange:R=>v(R.target.value),placeholder:"e.g. Tokyo, Japan",className:"w-full bg-gray-900 border border-gray-700 rounded-xl px-4 py-3 text-gray-100 placeholder-gray-600 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition",autoFocus:!0})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[g.jsx(mf,{className:"w-4 h-4 inline mr-1.5 text-gray-500"}),"Start Date"]}),g.jsx("input",{type:"date",value:E,min:ye,onChange:R=>{I(R.target.value),k&&R.target.value>k&&F(R.target.value)},className:"w-full bg-gray-900 border border-gray-700 rounded-xl px-4 py-3 text-gray-100 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition [color-scheme:dark]"})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["End Date",b&&g.jsxs("span",{className:"ml-2 text-xs text-indigo-400",children:[b,"d"]})]}),g.jsx("input",{type:"date",value:k,min:E||ye,onChange:R=>F(R.target.value),className:"w-full bg-gray-900 border border-gray-700 rounded-xl px-4 py-3 text-gray-100 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition [color-scheme:dark]"})]})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:[g.jsx(yf,{className:"w-4 h-4 inline mr-1.5 text-gray-500"}),"Travelers"]}),g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("button",{type:"button",onClick:()=>$(Math.max(1,B-1)),className:"w-10 h-10 bg-gray-800 hover:bg-gray-700 rounded-xl flex items-center justify-center text-xl font-light text-gray-300 transition",children:""}),g.jsx("span",{className:"text-2xl font-bold w-8 text-center text-gray-100",children:B}),g.jsx("button",{type:"button",onClick:()=>$(B+1),className:"w-10 h-10 bg-gray-800 hover:bg-gray-700 rounded-xl flex items-center justify-center text-xl font-light text-gray-300 transition",children:"+"}),g.jsx("span",{className:"text-gray-400 text-sm",children:B===1?"traveler":"travelers"})]})]})]}),t===2&&g.jsxs("div",{className:"space-y-7",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"text-2xl font-bold text-gray-100 mb-1",children:"What's your style?"}),g.jsx("p",{className:"text-gray-400",children:"Pick interests and set your total budget."})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:["Interests ",g.jsx("span",{className:"text-gray-500",children:"(select all that apply)"})]}),g.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:t0.map(({id:R,label:S,emoji:te})=>{const Ce=q.includes(R);return g.jsxs("button",{type:"button",onClick:()=>A(R),className:`flex items-center gap-2 px-3 py-2.5 rounded-xl text-sm border transition-all text-left ${Ce?"bg-indigo-600/20 border-indigo-500/60 text-indigo-200":"bg-gray-900 border-gray-700 text-gray-300 hover:border-gray-500 hover:text-gray-200"}`,children:[g.jsx("span",{className:"text-base",children:te}),g.jsx("span",{className:"flex-1 leading-tight",children:S}),Ce&&g.jsx(_c,{className:"w-3.5 h-3.5 text-indigo-400 shrink-0"})]},R)})})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[g.jsx(gf,{className:"w-4 h-4 inline mr-1.5 text-gray-500"}),"Total Budget (all travelers)"]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("select",{value:we,onChange:R=>Se(R.target.value),className:"bg-gray-900 border border-gray-700 rounded-xl px-3 py-3 text-gray-100 focus:outline-none focus:border-indigo-500 transition",children:["USD","EUR","GBP","JPY","AUD","CAD"].map(R=>g.jsx("option",{value:R,children:R},R))}),g.jsx("input",{type:"number",value:ee,min:100,step:100,onChange:R=>Z(Number(R.target.value)),className:"flex-1 bg-gray-900 border border-gray-700 rounded-xl px-4 py-3 text-gray-100 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition"})]}),g.jsx("div",{className:"flex gap-2 mt-2.5",children:w2.map(R=>g.jsxs("button",{type:"button",onClick:()=>Z(R),className:`flex-1 py-1.5 text-xs rounded-lg border transition ${ee===R?"bg-indigo-600/20 border-indigo-500/40 text-indigo-300":"bg-gray-900 border-gray-700 text-gray-500 hover:text-gray-300 hover:border-gray-600"}`,children:["$",(R/1e3).toFixed((R<1e3,0))+(R>=1e3?"k":"")]},R))})]})]}),t===3&&g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"text-2xl font-bold text-gray-100 mb-1",children:"Ready to create!"}),g.jsx("p",{className:"text-gray-400",children:"AI will generate your trip name, description, and set up the foundation for your itinerary."})]}),g.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-6 space-y-5",children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"p-2.5 bg-indigo-500/20 rounded-xl",children:g.jsx(wc,{className:"w-5 h-5 text-indigo-400"})}),g.jsxs("div",{children:[g.jsx("p",{className:"font-semibold text-gray-100",children:y}),g.jsxs("p",{className:"text-sm text-gray-400",children:[new Date(E).toLocaleDateString("en",{month:"long",day:"numeric"})," "," ",new Date(k).toLocaleDateString("en",{month:"long",day:"numeric",year:"numeric"}),b&&g.jsxs("span",{className:"ml-1.5 text-gray-500",children:["(",b," days)"]})]})]})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[g.jsxs("div",{className:"bg-gray-800/60 rounded-xl p-3",children:[g.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Travelers"}),g.jsxs("p",{className:"font-medium text-gray-200",children:[B," ",B===1?"person":"people"]})]}),g.jsxs("div",{className:"bg-gray-800/60 rounded-xl p-3",children:[g.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Budget"}),g.jsxs("p",{className:"font-medium text-gray-200",children:[we," ",ee.toLocaleString()]})]})]}),g.jsxs("div",{children:[g.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Interests"}),g.jsx("div",{className:"flex flex-wrap gap-1.5",children:q.map(R=>{const S=t0.find(te=>te.id===R);return S?g.jsxs("span",{className:"text-xs bg-indigo-500/15 text-indigo-300 border border-indigo-500/25 px-2.5 py-1 rounded-full",children:[S.emoji," ",S.label]},R):null})})]})]}),h&&g.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-4 text-sm text-red-300",children:[g.jsx("strong",{children:"Error:"})," ",h]}),g.jsx("button",{onClick:P,disabled:o,className:"w-full py-4 bg-indigo-600 hover:bg-indigo-500 disabled:opacity-60 disabled:cursor-not-allowed rounded-xl font-semibold flex items-center justify-center gap-2.5 transition shadow-lg shadow-indigo-900/30 text-base",children:o?g.jsxs(g.Fragment,{children:[g.jsx(En,{className:"w-5 h-5 animate-spin"}),"AI is crafting your trip"]}):g.jsxs(g.Fragment,{children:[g.jsx(_o,{className:"w-5 h-5"}),"Create Trip with AI"]})})]}),t<3&&g.jsxs("div",{className:"flex justify-between mt-10",children:[t>1?g.jsxs("button",{onClick:()=>i(R=>R-1),className:"flex items-center gap-2 px-4 py-2.5 text-gray-400 hover:text-gray-200 hover:bg-gray-800 rounded-xl transition",children:[g.jsx(Od,{className:"w-4 h-4"}),"Back"]}):g.jsx("div",{}),g.jsxs("button",{onClick:()=>i(R=>R+1),disabled:t===1?!N:!T,className:"flex items-center gap-2 px-6 py-2.5 bg-indigo-600 hover:bg-indigo-500 disabled:opacity-40 disabled:cursor-not-allowed rounded-xl font-medium transition",children:["Next",g.jsx(aI,{className:"w-4 h-4"})]})]})]})]})}const x2=["accommodation","transport","food","activity","sightseeing","free"],n0={accommodation:{Icon:lI,cls:"text-purple-400 bg-purple-500/10 border-purple-500/20"},transport:{Icon:AI,cls:"text-blue-400 bg-blue-500/10 border-blue-500/20"},food:{Icon:CI,cls:"text-orange-400 bg-orange-500/10 border-orange-500/20"},activity:{Icon:SI,cls:"text-indigo-400 bg-indigo-500/10 border-indigo-500/20"},sightseeing:{Icon:vc,cls:"text-emerald-400 bg-emerald-500/10 border-emerald-500/20"},free:{Icon:mI,cls:"text-gray-400 bg-gray-500/10 border-gray-700"}};function T2(){return Math.random().toString(36).slice(2,9)}function r0({value:r,onChange:e,onSave:t,onCancel:i}){var l;const o="w-full bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-sm text-gray-100 placeholder-gray-600 focus:outline-none focus:border-indigo-500 transition";return g.jsxs("div",{className:"bg-gray-900 border border-indigo-500/40 rounded-xl p-4 space-y-3",children:[g.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Time"}),g.jsx("input",{type:"time",value:r.time??"09:00",onChange:h=>e({...r,time:h.target.value}),className:o+" [color-scheme:dark]"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Category"}),g.jsx("select",{value:r.category??"activity",onChange:h=>e({...r,category:h.target.value}),className:o,children:x2.map(h=>g.jsx("option",{value:h,children:h},h))})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Activity name"}),g.jsx("input",{type:"text",value:r.title??"",onChange:h=>e({...r,title:h.target.value}),placeholder:"e.g. Visit the Eiffel Tower",className:o,autoFocus:!0})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Description"}),g.jsx("textarea",{value:r.description??"",onChange:h=>e({...r,description:h.target.value}),placeholder:"Brief description",rows:2,className:o+" resize-none"})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"block text-xs text-gray-500 mb-1",children:[g.jsx(gf,{className:"w-3 h-3 inline"})," Estimated cost per person"]}),g.jsx("input",{type:"number",min:0,step:5,value:r.estimatedCost??0,onChange:h=>e({...r,estimatedCost:Number(h.target.value)}),className:o})]}),g.jsxs("div",{className:"flex justify-end gap-2 pt-1",children:[g.jsxs("button",{onClick:i,className:"flex items-center gap-1.5 px-3 py-1.5 text-sm text-gray-400 hover:text-gray-200 hover:bg-gray-800 rounded-lg transition",children:[g.jsx(t_,{className:"w-3.5 h-3.5"})," Cancel"]}),g.jsxs("button",{onClick:t,disabled:!((l=r.title)!=null&&l.trim()),className:"flex items-center gap-1.5 px-4 py-1.5 text-sm bg-indigo-600 hover:bg-indigo-500 disabled:opacity-40 rounded-lg font-medium transition",children:[g.jsx(_c,{className:"w-3.5 h-3.5"})," Save"]})]})]})}function I2({trip:r,onGenerate:e,onUpdate:t}){const[i,o]=de.useState(!1),[l,h]=de.useState(""),[m,y]=de.useState(0),[v,E]=de.useState(null),[I,k]=de.useState({}),[F,B]=de.useState(!1),[$,q]=de.useState(""),ce=async()=>{o(!0),h(""),E(null);try{await e(r)}catch(te){h(te instanceof Error?te.message:"Failed to generate itinerary")}finally{o(!1)}},ee=(te,Ce)=>{t({...r,itinerary:r.itinerary.map(Ne=>Ne.id===te?Ce(Ne):Ne)})},Z=te=>{if(!v)return;const Ce=!r.itinerary.flatMap(Ne=>Ne.activities).find(Ne=>Ne.id===v);ee(te,Ne=>({...Ne,activities:Ce?[...Ne.activities,{id:v,time:"12:00",title:"",description:"",category:"activity",estimatedCost:0,...I}]:Ne.activities.map(ze=>ze.id===v?{...ze,...I}:ze)})),E(null),k({})},we=(te,Ce)=>{ee(te,Ne=>({...Ne,activities:Ne.activities.filter(ze=>ze.id!==Ce)}))},Se=te=>{const Ce=T2();E(Ce),k({time:"12:00",title:"",description:"",category:"activity",estimatedCost:0})},ye=te=>{$.trim()&&ee(te,Ce=>({...Ce,title:$.trim()})),B(!1)},N=r.itinerary.flatMap(te=>te.activities),A=N.reduce((te,Ce)=>te+(Ce.estimatedCost||0),0)*r.travelers,P=r.budget-A,b=P<0,R=Math.min(100,r.budget>0?A/r.budget*100:0);if(r.itinerary.length===0)return g.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[g.jsx("div",{className:"w-16 h-16 bg-indigo-500/10 border border-indigo-500/20 rounded-2xl flex items-center justify-center mb-5",children:g.jsx("span",{className:"text-3xl",children:""})}),g.jsx("h3",{className:"text-xl font-semibold text-gray-200 mb-2",children:"No itinerary yet"}),g.jsx("p",{className:"text-gray-500 max-w-sm mb-6 leading-relaxed",children:"AI will create a personalized day-by-day schedule based on your destination, interests, and travel dates."}),l&&g.jsx("div",{className:"mb-5 text-sm text-red-300 bg-red-500/10 border border-red-500/20 rounded-xl px-4 py-3 max-w-sm",children:l}),g.jsxs("button",{onClick:ce,disabled:i,className:"flex items-center gap-2 px-6 py-3 bg-indigo-600 hover:bg-indigo-500 disabled:opacity-60 rounded-xl font-medium transition",children:[i?g.jsx(En,{className:"w-5 h-5 animate-spin"}):g.jsx(_o,{className:"w-5 h-5"}),i?"Generating itinerary":"Generate Itinerary"]})]});const S=r.itinerary[m];return g.jsxs("div",{className:"space-y-4",children:[A>0&&g.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl px-5 py-4",children:[g.jsxs("div",{className:"flex items-center justify-between mb-2 text-sm",children:[g.jsx("span",{className:"text-gray-400 font-medium",children:"Provisional budget"}),g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsxs("span",{className:"text-gray-400",children:[g.jsxs("span",{className:"text-gray-200 font-semibold",children:[r.currency," ",A.toLocaleString()]}),g.jsxs("span",{className:"text-gray-600",children:[" / ",r.currency," ",r.budget.toLocaleString()]})]}),g.jsxs("span",{className:`text-xs font-medium px-2 py-0.5 rounded-full ${b?"bg-red-500/15 text-red-300 border border-red-500/25":"bg-emerald-500/15 text-emerald-300 border border-emerald-500/25"}`,children:[b?" ":" ",r.currency," ",Math.abs(P).toLocaleString()," ",b?"over":"left"]})]})]}),g.jsx("div",{className:"h-2 bg-gray-800 rounded-full overflow-hidden",children:g.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${b?"bg-red-500":R>80?"bg-amber-500":"bg-emerald-500"}`,style:{width:`${R}%`}})}),g.jsxs("p",{className:"text-xs text-gray-600 mt-1.5",children:["Based on ",N.filter(te=>te.estimatedCost>0).length," activities with cost estimates  ",r.travelers," traveler(s)"]})]}),g.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:gap-5",children:[g.jsxs("div",{className:"md:w-24 md:shrink-0",children:[g.jsxs("div",{className:"flex md:flex-col gap-1 overflow-x-auto md:overflow-visible scrollbar-hide pb-1 md:pb-0 md:space-y-1",children:[r.itinerary.map((te,Ce)=>{const Ne=new Date(te.date+"T12:00:00"),ze=Ce===m;return g.jsxs("button",{onClick:()=>{y(Ce),E(null)},className:`shrink-0 md:w-full text-center px-3 md:px-2 py-2 md:py-2.5 rounded-xl transition ${ze?"bg-indigo-600 text-white":"text-gray-400 hover:bg-gray-800 hover:text-gray-200"}`,children:[g.jsx("p",{className:"text-xs font-medium opacity-80",children:Ne.toLocaleDateString("en",{weekday:"short"})}),g.jsx("p",{className:"text-base md:text-xl font-bold leading-tight",children:Ne.getDate()}),g.jsx("p",{className:"text-xs opacity-60 hidden md:block",children:Ne.toLocaleDateString("en",{month:"short"})})]},te.id)}),g.jsxs("button",{onClick:ce,disabled:i,className:"md:hidden shrink-0 flex flex-col items-center justify-center gap-0.5 px-3 py-2 text-gray-600 hover:text-gray-400 hover:bg-gray-800 rounded-xl transition",children:[i?g.jsx(En,{className:"w-3.5 h-3.5 animate-spin"}):g.jsx(_o,{className:"w-3.5 h-3.5"}),g.jsx("span",{className:"text-xs",children:"Regen"})]})]}),g.jsxs("button",{onClick:ce,disabled:i,title:"Regenerate itinerary",className:"hidden md:flex w-full mt-1 p-2 text-xs text-gray-600 hover:text-gray-400 hover:bg-gray-800 rounded-xl transition items-center justify-center gap-1",children:[i?g.jsx(En,{className:"w-3.5 h-3.5 animate-spin"}):g.jsx(_o,{className:"w-3.5 h-3.5"}),"Regen"]})]}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsxs("div",{className:"flex items-start justify-between mb-4",children:[g.jsxs("div",{className:"flex-1 min-w-0",children:[F?g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("input",{value:$,onChange:te=>q(te.target.value),onKeyDown:te=>{te.key==="Enter"&&ye(S.id),te.key==="Escape"&&B(!1)},className:"flex-1 bg-gray-800 border border-indigo-500 rounded-lg px-3 py-1.5 text-gray-100 text-base font-semibold focus:outline-none",autoFocus:!0}),g.jsx("button",{onClick:()=>ye(S.id),className:"p-1.5 text-emerald-400 hover:bg-gray-800 rounded-lg transition",children:g.jsx(_c,{className:"w-4 h-4"})}),g.jsx("button",{onClick:()=>B(!1),className:"p-1.5 text-gray-500 hover:bg-gray-800 rounded-lg transition",children:g.jsx(t_,{className:"w-4 h-4"})})]}):g.jsxs("button",{onClick:()=>{B(!0),q(S.title)},className:"group flex items-center gap-2 text-left",children:[g.jsx("h3",{className:"text-lg font-semibold text-gray-100 group-hover:text-white",children:S.title}),g.jsx(Jg,{className:"w-3.5 h-3.5 text-gray-600 group-hover:text-gray-400 opacity-0 group-hover:opacity-100 transition"})]}),g.jsx("p",{className:"text-sm text-gray-400 mt-0.5",children:new Date(S.date+"T12:00:00").toLocaleDateString("en",{weekday:"long",month:"long",day:"numeric"})})]}),(()=>{const te=S.activities.reduce((Ce,Ne)=>Ce+(Ne.estimatedCost||0),0)*r.travelers;return te>0?g.jsxs("span",{className:"text-xs text-gray-400 bg-gray-800 px-3 py-1.5 rounded-lg shrink-0 ml-3 font-medium",children:[r.currency," ",te.toLocaleString()," est."]}):null})()]}),g.jsxs("div",{className:"space-y-2.5",children:[S.activities.map(te=>{const{Icon:Ce,cls:Ne}=n0[te.category]??n0.free;return v===te.id?g.jsx(r0,{value:I,onChange:k,onSave:()=>Z(S.id),onCancel:()=>{E(null),k({})}},te.id):g.jsxs("div",{className:"group flex gap-3 bg-gray-900 border border-gray-800 hover:border-gray-700 rounded-xl p-4 transition",children:[g.jsx("div",{className:`p-2 rounded-lg border shrink-0 ${Ne}`,children:g.jsx(Ce,{className:"w-4 h-4"})}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsxs("div",{className:"flex items-center gap-2 justify-between",children:[g.jsx("h4",{className:"font-medium text-gray-200 truncate",children:te.title}),g.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[g.jsxs("span",{className:"text-xs text-gray-500 flex items-center gap-0.5 mr-1",children:[g.jsx(pI,{className:"w-3 h-3"}),te.time]}),g.jsx("button",{onClick:()=>{E(te.id),k({...te})},className:"opacity-0 group-hover:opacity-100 p-1.5 text-gray-500 hover:text-indigo-400 hover:bg-gray-800 rounded-lg transition",title:"Edit activity",children:g.jsx(Jg,{className:"w-3.5 h-3.5"})}),g.jsx("button",{onClick:()=>we(S.id,te.id),className:"opacity-0 group-hover:opacity-100 p-1.5 text-gray-500 hover:text-red-400 hover:bg-gray-800 rounded-lg transition",title:"Delete activity",children:g.jsx(Ec,{className:"w-3.5 h-3.5"})})]})]}),g.jsx("p",{className:"text-sm text-gray-400 mt-0.5 leading-relaxed",children:te.description}),te.estimatedCost>0&&g.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["~",r.currency,te.estimatedCost," /person  ",r.currency,(te.estimatedCost*r.travelers).toLocaleString()," total"]})]})]},te.id)}),v&&!S.activities.find(te=>te.id===v)&&g.jsx(r0,{value:I,onChange:k,onSave:()=>Z(S.id),onCancel:()=>{E(null),k({})}}),!v&&g.jsxs("button",{onClick:()=>Se(S.id),className:"w-full flex items-center justify-center gap-2 py-3 border border-dashed border-gray-700 hover:border-indigo-500/50 hover:bg-indigo-500/5 rounded-xl text-sm text-gray-500 hover:text-indigo-400 transition",children:[g.jsx(Md,{className:"w-4 h-4"}),"Add activity"]})]}),l&&g.jsx("div",{className:"mt-4 text-sm text-red-300 bg-red-500/10 border border-red-500/20 rounded-xl px-4 py-3",children:l})]})]})]})}const S2={Documents:"",Clothing:"",Toiletries:"",Electronics:"","Health & Safety":"",Activities:"",Miscellaneous:""};function A2({trip:r,onGenerate:e,onUpdate:t}){const[i,o]=de.useState(!1),[l,h]=de.useState(""),m=async()=>{o(!0),h("");try{await e(r)}catch($){h($ instanceof Error?$.message:"Failed to generate packing list")}finally{o(!1)}},y=$=>{t({...r,packingList:r.packingList.map(q=>q.id===$?{...q,packed:!q.packed}:q)})},v=()=>{t({...r,packingList:r.packingList.map($=>({...$,packed:!0}))})},E=()=>{t({...r,packingList:r.packingList.map($=>({...$,packed:!1}))})};if(r.packingList.length===0)return g.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[g.jsx("div",{className:"w-16 h-16 bg-indigo-500/10 border border-indigo-500/20 rounded-2xl flex items-center justify-center mb-5",children:g.jsx("span",{className:"text-3xl",children:""})}),g.jsx("h3",{className:"text-xl font-semibold text-gray-200 mb-2",children:"No packing list yet"}),g.jsx("p",{className:"text-gray-500 max-w-sm mb-6 leading-relaxed",children:"AI will create a smart, categorized packing list tailored to your destination, activities, and trip duration."}),l&&g.jsx("div",{className:"mb-5 text-sm text-red-300 bg-red-500/10 border border-red-500/20 rounded-xl px-4 py-3 max-w-sm",children:l}),g.jsxs("button",{onClick:m,disabled:i,className:"flex items-center gap-2 px-6 py-3 bg-indigo-600 hover:bg-indigo-500 disabled:opacity-60 rounded-xl font-medium transition",children:[i?g.jsx(En,{className:"w-5 h-5 animate-spin"}):g.jsx(_o,{className:"w-5 h-5"}),i?"Generating packing list":"Generate Packing List"]})]});const I=r.packingList.filter($=>$.packed).length,k=r.packingList.length,F=k>0?Math.round(I/k*100):0,B=[...new Set(r.packingList.map($=>$.category))];return g.jsxs("div",{className:"space-y-5",children:[g.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-5",children:[g.jsxs("div",{className:"flex items-center justify-between mb-3",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"font-semibold text-gray-200",children:"Packing Progress"}),g.jsxs("p",{className:"text-sm text-gray-500 mt-0.5",children:[I," of ",k," items packed"]})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("button",{onClick:E,className:"text-xs text-gray-500 hover:text-gray-300 px-3 py-1.5 rounded-lg hover:bg-gray-800 transition",children:"Unpack all"}),g.jsx("button",{onClick:v,className:"text-xs text-indigo-400 hover:text-indigo-300 px-3 py-1.5 rounded-lg hover:bg-gray-800 transition",children:"Pack all"})]})]}),g.jsx("div",{className:"h-2 bg-gray-800 rounded-full overflow-hidden",children:g.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${F===100?"bg-emerald-500":"bg-indigo-500"}`,style:{width:`${F}%`}})}),g.jsxs("div",{className:"flex items-center justify-between mt-2",children:[g.jsxs("span",{className:"text-xs text-gray-500",children:[F,"% packed"]}),F===100&&g.jsx("span",{className:"text-xs text-emerald-400 font-medium",children:"All packed! "}),g.jsxs("button",{onClick:m,disabled:i,className:"text-xs text-gray-500 hover:text-indigo-400 flex items-center gap-1 transition",children:[i?g.jsx(En,{className:"w-3 h-3 animate-spin"}):g.jsx(_o,{className:"w-3 h-3"}),"Regenerate"]})]})]}),l&&g.jsx("div",{className:"text-sm text-red-300 bg-red-500/10 border border-red-500/20 rounded-xl px-4 py-3",children:l}),(()=>{const $=r.packingList.filter(q=>q.essential&&!q.packed);return $.length>0?g.jsxs("div",{className:"flex items-start gap-3 bg-amber-500/10 border border-amber-500/20 rounded-xl p-4",children:[g.jsx(hI,{className:"w-4 h-4 text-amber-400 shrink-0 mt-0.5"}),g.jsxs("div",{children:[g.jsxs("p",{className:"text-sm font-medium text-amber-300",children:[$.length," essential item",$.length!==1?"s":""," not packed"]}),g.jsxs("p",{className:"text-xs text-amber-400/70 mt-0.5",children:[$.slice(0,3).map(q=>q.name).join(", "),$.length>3?` and ${$.length-3} more`:""]})]})]}):null})(),B.map($=>{const q=r.packingList.filter(Z=>Z.category===$),ce=q.filter(Z=>Z.packed).length,ee=S2[$]??"";return g.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl overflow-hidden",children:[g.jsxs("div",{className:"px-5 py-3 border-b border-gray-800 flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"text-base",children:ee}),g.jsx("h4",{className:"font-medium text-gray-300 text-sm",children:$})]}),g.jsxs("span",{className:"text-xs text-gray-500",children:[ce,"/",q.length]})]}),g.jsx("div",{className:"divide-y divide-gray-800/50",children:q.map(Z=>g.jsxs("button",{onClick:()=>y(Z.id),className:"w-full flex items-center gap-3 px-5 py-3 hover:bg-gray-800/50 transition text-left",children:[g.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center shrink-0 transition-colors ${Z.packed?"bg-indigo-600 border-indigo-600":"border-gray-600 hover:border-gray-400"}`,children:Z.packed&&g.jsx(_c,{className:"w-3 h-3 text-white",strokeWidth:3})}),g.jsx("span",{className:`flex-1 text-sm transition-colors ${Z.packed?"text-gray-600 line-through":"text-gray-200"}`,children:Z.name}),g.jsxs("div",{className:"flex items-center gap-1.5 shrink-0",children:[Z.quantity>1&&g.jsxs("span",{className:"text-xs text-gray-500",children:["",Z.quantity]}),Z.essential&&!Z.packed&&g.jsx("span",{className:"text-xs text-amber-400 bg-amber-500/10 border border-amber-500/20 px-1.5 py-0.5 rounded",children:"essential"})]})]},Z.id))})]},$)})]})}const k2=["What are the must-try local foods?","Best way to get around the city?","What should I know about local customs?","Hidden gems most tourists miss?","Best time of day to visit popular sites?","Safety tips for this destination?"];function Ad(){return Math.random().toString(36).slice(2,9)}function C2({trip:r,apiKey:e,getChatHistory:t,saveChatHistory:i}){const[o,l]=de.useState([]),[h,m]=de.useState(""),[y,v]=de.useState(!1),E=de.useRef(null),I=de.useRef(null);de.useEffect(()=>{let B=!1;return t(r.id).then($=>{B||l($)}),()=>{B=!0}},[r.id]),de.useEffect(()=>{var B;(B=E.current)==null||B.scrollIntoView({behavior:"smooth"})},[o]);const k=async B=>{var ce;if(!B.trim()||y)return;const $={id:Ad(),role:"user",content:B.trim(),timestamp:new Date().toISOString()},q=[...o,$];l(q),m(""),v(!0),(ce=I.current)==null||ce.focus();try{const ee=o.map(ye=>({role:ye.role,content:ye.content})),Z=await m2(B.trim(),ee,r,e),we={id:Ad(),role:"assistant",content:Z,timestamp:new Date().toISOString()},Se=[...q,we];l(Se),await i(r.id,Se)}catch(ee){const Z=ee instanceof Error?ee.message:"Something went wrong",we={id:Ad(),role:"assistant",content:`Sorry, I ran into an error: ${Z}`,timestamp:new Date().toISOString()},Se=[...q,we];l(Se),await i(r.id,Se)}finally{v(!1)}},F=async()=>{confirm("Clear chat history?")&&(l([]),await i(r.id,[]))};return g.jsxs("div",{className:"flex flex-col",style:{height:"calc(100dvh - 300px)",minHeight:"280px"},children:[g.jsxs("div",{className:"flex items-center justify-between pb-3 mb-3 border-b border-gray-800",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"w-7 h-7 bg-indigo-500/20 rounded-lg flex items-center justify-center",children:g.jsx(Pu,{className:"w-4 h-4 text-indigo-400"})}),g.jsx("span",{className:"text-sm font-medium text-gray-300",children:"AI Travel Assistant"}),g.jsx("span",{className:"text-xs text-emerald-400 bg-emerald-500/10 px-2 py-0.5 rounded-full",children:"Online"})]}),o.length>0&&g.jsx("button",{onClick:F,className:"p-1.5 text-gray-600 hover:text-gray-400 hover:bg-gray-800 rounded-lg transition",title:"Clear chat",children:g.jsx(Ec,{className:"w-4 h-4"})})]}),g.jsxs("div",{className:"flex-1 overflow-y-auto space-y-4",children:[o.length===0&&g.jsxs("div",{className:"flex flex-col items-center text-center pt-6 pb-4",children:[g.jsx("div",{className:"w-14 h-14 bg-indigo-500/10 border border-indigo-500/20 rounded-2xl flex items-center justify-center mb-3",children:g.jsx(Pu,{className:"w-7 h-7 text-indigo-400"})}),g.jsxs("p",{className:"font-medium text-gray-300 mb-1",children:["Ask me anything about ",r.destination]}),g.jsx("p",{className:"text-sm text-gray-500 mb-5 max-w-sm",children:"I know your trip details, interests, and budget. Let me help you plan the perfect experience."}),g.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:k2.map(B=>g.jsx("button",{onClick:()=>k(B),className:"text-sm text-indigo-300 bg-indigo-500/10 hover:bg-indigo-500/20 border border-indigo-500/20 hover:border-indigo-500/40 px-3 py-1.5 rounded-full transition",children:B},B))})]}),o.map(B=>g.jsxs("div",{className:`flex gap-2.5 ${B.role==="user"?"flex-row-reverse":"flex-row"}`,children:[g.jsx("div",{className:`w-7 h-7 rounded-lg flex items-center justify-center shrink-0 mt-0.5 ${B.role==="assistant"?"bg-indigo-500/20":"bg-gray-700"}`,children:B.role==="assistant"?g.jsx(Pu,{className:"w-3.5 h-3.5 text-indigo-400"}):g.jsx(kI,{className:"w-3.5 h-3.5 text-gray-300"})}),g.jsx("div",{className:`max-w-[78%] rounded-2xl px-4 py-3 text-sm leading-relaxed whitespace-pre-wrap ${B.role==="user"?"bg-indigo-600 text-white rounded-tr-sm":"bg-gray-900 border border-gray-800 text-gray-200 rounded-tl-sm"}`,children:B.content})]},B.id)),y&&g.jsxs("div",{className:"flex gap-2.5",children:[g.jsx("div",{className:"w-7 h-7 rounded-lg bg-indigo-500/20 flex items-center justify-center shrink-0",children:g.jsx(Pu,{className:"w-3.5 h-3.5 text-indigo-400"})}),g.jsx("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl rounded-tl-sm px-4 py-3",children:g.jsxs("div",{className:"flex gap-1 items-center h-4",children:[g.jsx("span",{className:"w-1.5 h-1.5 bg-gray-500 rounded-full animate-bounce [animation-delay:0ms]"}),g.jsx("span",{className:"w-1.5 h-1.5 bg-gray-500 rounded-full animate-bounce [animation-delay:150ms]"}),g.jsx("span",{className:"w-1.5 h-1.5 bg-gray-500 rounded-full animate-bounce [animation-delay:300ms]"})]})})]}),g.jsx("div",{ref:E})]}),g.jsx("div",{className:"pt-4 border-t border-gray-800",children:g.jsxs("form",{onSubmit:B=>{B.preventDefault(),k(h)},className:"flex gap-2",children:[g.jsx("input",{ref:I,value:h,onChange:B=>m(B.target.value),placeholder:`Ask about ${r.destination}...`,disabled:y,className:"flex-1 bg-gray-900 border border-gray-700 rounded-xl px-4 py-3 text-gray-100 placeholder-gray-600 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition disabled:opacity-50 text-sm"}),g.jsx("button",{type:"submit",disabled:!h.trim()||y,className:"p-3 bg-indigo-600 hover:bg-indigo-500 disabled:opacity-40 disabled:cursor-not-allowed rounded-xl transition shrink-0",children:y?g.jsx(En,{className:"w-5 h-5 animate-spin"}):g.jsx(TI,{className:"w-5 h-5"})})]})})]})}const s0=[{id:"overview",label:"Overview",emoji:""},{id:"itinerary",label:"Itinerary",emoji:""},{id:"packing",label:"Packing",emoji:""},{id:"chat",label:"AI Chat",emoji:""}],N2={planning:"upcoming",upcoming:"completed",completed:"planning"},R2={planning:"bg-amber-500/20 border-amber-500/30 text-amber-300 hover:bg-amber-500/30",upcoming:"bg-blue-500/20 border-blue-500/30 text-blue-300 hover:bg-blue-500/30",completed:"bg-emerald-500/20 border-emerald-500/30 text-emerald-300 hover:bg-emerald-500/30"};function P2({trip:r,activeTab:e,onTabChange:t,onBack:i,onDelete:o,onGenerateItinerary:l,onGeneratePackingList:h,onUpdateTrip:m,getChatHistory:y,saveChatHistory:v,apiKey:E}){const I=new Date(r.startDate+"T12:00:00"),k=new Date(r.endDate+"T12:00:00"),F=Math.ceil((k.getTime()-I.getTime())/864e5)+1,B=()=>{confirm(`Delete "${r.name}"? This cannot be undone.`)&&o(r.id)},$=()=>m({...r,status:N2[r.status]}),q=r.itinerary.reduce((N,T)=>N+T.activities.length,0),ce=r.packingList.filter(N=>N.packed).length,ee=r.itinerary.flatMap(N=>N.activities).reduce((N,T)=>N+(T.estimatedCost||0),0),Z=ee*r.travelers,we=r.budget-Z,Se=Math.min(100,r.budget>0?Z/r.budget*100:0),ye=we<0;return g.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-950 pb-16 md:pb-0",children:[g.jsxs("div",{className:`bg-gradient-to-br ${r.coverGradient} relative`,children:[g.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/20 via-transparent to-black/50"}),g.jsxs("div",{className:"relative max-w-5xl mx-auto px-4 md:px-6 pt-4 flex items-center justify-between",children:[g.jsx("button",{onClick:i,className:"p-2 text-white/70 hover:text-white hover:bg-white/10 rounded-lg transition",children:g.jsx(Od,{className:"w-5 h-5"})}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("button",{onClick:$,className:`text-xs px-2.5 py-1.5 rounded-full font-medium border transition ${R2[r.status]}`,children:[g.jsx(xI,{className:"w-3 h-3 inline mr-1"}),r.status]}),g.jsx("button",{onClick:B,className:"p-2 text-white/40 hover:text-red-300 hover:bg-red-500/20 rounded-lg transition",children:g.jsx(Ec,{className:"w-4 h-4"})})]})]}),g.jsx("div",{className:"relative max-w-5xl mx-auto px-4 md:px-6 pt-3 pb-4 md:pb-5",children:g.jsxs("div",{className:"flex items-start gap-3",children:[g.jsx("span",{className:"text-4xl md:text-5xl drop-shadow-lg shrink-0 mt-0.5",children:r.emoji}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("h1",{className:"text-xl md:text-2xl font-bold text-white leading-tight",children:r.name}),g.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5 text-white/70",children:[g.jsx(vc,{className:"w-3.5 h-3.5 shrink-0"}),g.jsx("span",{className:"text-sm truncate",children:r.destination})]}),g.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-white/60 overflow-x-auto scrollbar-hide",children:[g.jsxs("span",{className:"flex items-center gap-1 shrink-0",children:[g.jsx(mf,{className:"w-3.5 h-3.5"}),I.toLocaleDateString("en",{month:"short",day:"numeric"})," "," ",k.toLocaleDateString("en",{month:"short",day:"numeric",year:"numeric"}),g.jsxs("span",{className:"text-white/30 ml-1",children:["(",F,"d)"]})]}),g.jsxs("span",{className:"flex items-center gap-1 shrink-0",children:[g.jsx(yf,{className:"w-3.5 h-3.5"}),r.travelers]}),g.jsxs("span",{className:"flex items-center gap-1 shrink-0",children:[g.jsx(gf,{className:"w-3.5 h-3.5"}),r.currency," ",r.budget.toLocaleString()]})]})]})]})}),g.jsx("div",{className:"hidden md:block relative max-w-5xl mx-auto px-6 pb-0",children:g.jsx("div",{className:"flex gap-1 w-fit",children:s0.map(N=>g.jsxs("button",{onClick:()=>t(N.id),className:`px-4 py-2.5 rounded-t-xl text-sm font-medium transition ${e===N.id?"bg-gray-950 text-white":"text-white/60 hover:text-white/90 hover:bg-white/10"}`,children:[g.jsx("span",{className:"mr-1.5",children:N.emoji}),N.label]},N.id))})})]}),g.jsxs("div",{className:"flex-1 max-w-5xl mx-auto w-full px-4 md:px-6 py-5 md:py-6",children:[e==="overview"&&g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-5 md:p-6",children:[g.jsx("h3",{className:"font-semibold text-gray-200 mb-2",children:"About this trip"}),g.jsx("p",{className:"text-gray-400 leading-relaxed text-sm md:text-base",children:r.description})]}),g.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[{label:"Days",value:F,suffix:""},{label:"Activities",value:q||"",suffix:""},{label:"Items packed",value:ce||"",suffix:r.packingList.length>0?`/${r.packingList.length}`:""},{label:"Interests",value:r.interests.length,suffix:""}].map(({label:N,value:T,suffix:A})=>g.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-4 md:p-5 text-center",children:[g.jsxs("p",{className:"text-xl md:text-2xl font-bold text-indigo-400",children:[T,A&&g.jsx("span",{className:"text-sm text-gray-500",children:A})]}),g.jsx("p",{className:"text-xs text-gray-500 mt-1",children:N})]},N))}),g.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-5 md:p-6",children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsx("h3",{className:"font-semibold text-gray-200",children:"Provisional Budget"}),g.jsx("span",{className:`text-xs font-medium px-2.5 py-1 rounded-full border ${Z===0?"bg-gray-800 text-gray-500 border-gray-700":ye?"bg-red-500/15 text-red-300 border-red-500/25":"bg-emerald-500/15 text-emerald-300 border-emerald-500/25"}`,children:Z===0?"No estimates yet":ye?` ${r.currency}${Math.abs(we).toLocaleString()} over`:` ${r.currency}${we.toLocaleString()} left`})]}),g.jsx("div",{className:"grid grid-cols-3 gap-2 md:gap-3 mb-4 text-center",children:[{label:"Allocated",val:`${r.currency} ${r.budget.toLocaleString()}`,color:"text-gray-200"},{label:"Est. spend",val:`${r.currency} ${Z.toLocaleString()}`,color:Z===0?"text-gray-500":ye?"text-red-400":"text-gray-200"},{label:"Remaining",val:Z===0?"":`${r.currency} ${we.toLocaleString()}`,color:Z===0?"text-gray-500":ye?"text-red-400":"text-emerald-400"}].map(({label:N,val:T,color:A})=>g.jsxs("div",{className:"bg-gray-800/60 rounded-xl p-3",children:[g.jsx("p",{className:"text-xs text-gray-500 mb-1",children:N}),g.jsx("p",{className:`font-semibold text-sm ${A}`,children:T})]},N))}),g.jsx("div",{className:"h-2 bg-gray-800 rounded-full overflow-hidden",children:g.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${ye?"bg-red-500":Se>80?"bg-amber-500":"bg-emerald-500"}`,style:{width:`${Se}%`}})}),g.jsx("p",{className:"text-xs text-gray-600 mt-2",children:Z===0?"Add cost estimates to activities to track spending.":`${r.currency}${ee.toLocaleString()} /person  ${r.travelers} traveler(s)`})]}),g.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-5 md:p-6",children:[g.jsx("h3",{className:"font-semibold text-gray-200 mb-3",children:"Interests"}),g.jsx("div",{className:"flex flex-wrap gap-2",children:r.interests.map(N=>g.jsx("span",{className:"text-sm bg-indigo-500/15 text-indigo-300 border border-indigo-500/25 px-3 py-1 rounded-full",children:N},N))})]}),g.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[{tab:"itinerary",emoji:"",title:"Itinerary",desc:r.itinerary.length?`${F} days planned`:"Generate with AI"},{tab:"packing",emoji:"",title:"Packing",desc:r.packingList.length?`${ce}/${r.packingList.length} packed`:"Generate with AI"},{tab:"chat",emoji:"",title:"AI Chat",desc:"Ask anything about your trip"}].map(({tab:N,emoji:T,title:A,desc:P})=>g.jsxs("button",{onClick:()=>t(N),className:"flex items-center gap-3 bg-gray-900 border border-gray-800 hover:border-gray-600 rounded-2xl p-4 text-left transition group",children:[g.jsx("span",{className:"text-2xl",children:T}),g.jsxs("div",{children:[g.jsx("p",{className:"font-medium text-gray-200 group-hover:text-white transition text-sm",children:A}),g.jsx("p",{className:"text-xs text-gray-500",children:P})]})]},N))})]}),e==="itinerary"&&g.jsx(I2,{trip:r,onGenerate:l,onUpdate:m}),e==="packing"&&g.jsx(A2,{trip:r,onGenerate:h,onUpdate:m}),e==="chat"&&g.jsx(C2,{trip:r,apiKey:E,getChatHistory:y,saveChatHistory:v})]}),g.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 z-30 bg-gray-900/95 backdrop-blur-md border-t border-gray-800",children:g.jsx("div",{className:"flex items-center justify-around px-2 pt-1 pb-2",children:s0.map(N=>g.jsxs("button",{onClick:()=>t(N.id),className:`flex flex-col items-center gap-0.5 flex-1 py-1.5 rounded-xl transition ${e===N.id?"text-indigo-400":"text-gray-500"}`,children:[g.jsx("span",{className:"text-xl leading-none",children:N.emoji}),g.jsx("span",{className:"text-[10px] font-medium",children:N.label}),e===N.id&&g.jsx("span",{className:"w-1 h-1 bg-indigo-400 rounded-full"})]},N.id))})})]})}function b2(){const[r,e]=de.useState([]),[t,i]=de.useState(!0),[o,l]=de.useState(!1),h=de.useRef(null);de.useEffect(()=>(Zy(I=>{e(k=>[...k.slice(-49),I]),l(!0),setTimeout(()=>l(!1),2e3)}),()=>Zy(null)),[]),de.useEffect(()=>{var I;t&&((I=h.current)==null||I.scrollIntoView({behavior:"smooth"}))},[r,t]);const m=r.filter(I=>I.status==="pending").length,y=r.length>0,v=I=>I==="pending"?g.jsx(En,{className:"w-3.5 h-3.5 text-indigo-400 animate-spin shrink-0"}):I==="success"?g.jsx(dI,{className:"w-3.5 h-3.5 text-emerald-400 shrink-0"}):g.jsx(fI,{className:"w-3.5 h-3.5 text-red-400 shrink-0"}),E=I=>I==="pending"?"border-l-indigo-500":I==="success"?"border-l-emerald-500":"border-l-red-500";return g.jsxs("div",{className:`fixed z-40 rounded-2xl border border-gray-700 shadow-2xl shadow-black/60 overflow-hidden transition-all duration-200
        bottom-[72px] left-3 right-3
        md:bottom-4 md:left-auto md:right-4 md:w-80 ${o?"ring-1 ring-indigo-500/40":""}`,children:[g.jsxs("button",{onClick:()=>i(I=>!I),className:"w-full flex items-center justify-between px-4 py-3 bg-gray-900 hover:bg-gray-800 transition",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(oI,{className:"w-4 h-4 text-indigo-400"}),g.jsx("span",{className:"text-sm font-medium text-gray-200",children:"Activity"}),m>0&&g.jsxs("span",{className:"flex items-center gap-1 text-xs text-indigo-300 bg-indigo-500/20 px-2 py-0.5 rounded-full",children:[g.jsx(En,{className:"w-2.5 h-2.5 animate-spin"}),m," running"]}),!t&&y&&m===0&&g.jsxs("span",{className:"text-xs text-gray-500",children:[r.length," events"]})]}),g.jsxs("div",{className:"flex items-center gap-1",children:[t&&y&&g.jsx("span",{onClick:I=>{I.stopPropagation(),e([])},className:"p-1 text-gray-600 hover:text-gray-400 rounded transition cursor-pointer",title:"Clear log",children:g.jsx(Ec,{className:"w-3.5 h-3.5"})}),t?g.jsx(uI,{className:"w-4 h-4 text-gray-400"}):g.jsx(cI,{className:"w-4 h-4 text-gray-400"})]})]}),t&&g.jsxs("div",{className:"bg-gray-950 max-h-64 overflow-y-auto",children:[r.length===0?g.jsx("div",{className:"px-4 py-6 text-center text-xs text-gray-600",children:"No activity yet. Start by creating a trip or generating content."}):g.jsx("div",{className:"divide-y divide-gray-800/50",children:r.map(I=>g.jsx("div",{className:`px-4 py-2.5 border-l-2 ${E(I.status)}`,children:g.jsxs("div",{className:"flex items-start gap-2",children:[g.jsx("div",{className:"mt-0.5",children:v(I.status)}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("p",{className:"text-xs text-gray-300 leading-snug",children:I.message}),I.detail&&g.jsx("p",{className:"text-xs text-red-400 mt-0.5 leading-snug",children:I.detail}),g.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:new Date(I.timestamp).toLocaleTimeString("en",{hour:"2-digit",minute:"2-digit",second:"2-digit"})})]})]})},I.id))}),g.jsx("div",{ref:h})]})]})}function D2(){return Math.random().toString(36).slice(2,11)}function V2(){const{user:r,loading:e}=e2(),[t,i]=de.useState([]),[o,l]=de.useState("dashboard"),[h,m]=de.useState(null),[y,v]=de.useState("overview"),[E,I]=de.useState(""),[k,F]=de.useState(!1);de.useEffect(()=>{if(!r){i([]),I(""),l("dashboard"),m(null);return}let T=!1;return Promise.all([n2(r.uid),o2(r.uid)]).then(([A,P])=>{T||(i(A),I(P),P||F(!0))}),()=>{T=!0}},[r]);const B=async T=>{I(T),r&&await a2(r.uid,T),F(!1)},$=()=>$x(fc),q=async T=>{if(!(r!=null&&r.email))return;const A=yi.credential(r.email,T);await Mx(r,A),await l2(r.uid),await qx(r)},ce=async T=>{var b;const A=await d2({...T,apiKey:E}),P={id:D2(),name:A.name,emoji:A.emoji,description:A.description,coverGradient:A.coverGradient,destination:T.destination,country:((b=T.destination.split(",").pop())==null?void 0:b.trim())??T.destination,startDate:T.startDate,endDate:T.endDate,travelers:T.travelers,budget:T.budget,currency:T.currency,interests:T.interests,itinerary:[],packingList:[],status:"planning",createdAt:new Date().toISOString()};return i(R=>[...R,P]),m(P),v("overview"),l("detail"),r&&await Xy(r.uid,P),P},ee=async T=>{i(A=>A.map(P=>P.id===T.id?T:P)),m(T),r&&await Xy(r.uid,T)},Z=async T=>{i(A=>A.filter(P=>P.id!==T)),l("dashboard"),m(null),r&&await r2(r.uid,T)},we=async T=>{const A=await f2(T,E),P={...T,itinerary:A};return await ee(P),P},Se=async T=>{const A=await p2(T,E),P={...T,packingList:A};return await ee(P),P},ye=T=>r?s2(r.uid,T):Promise.resolve([]),N=(T,A)=>r?i2(r.uid,T,A):Promise.resolve();return e?g.jsx("div",{className:"min-h-screen bg-gray-950 flex items-center justify-center",children:g.jsx(En,{className:"w-8 h-8 text-indigo-400 animate-spin"})}):r?g.jsxs("div",{className:"min-h-screen bg-gray-950 text-gray-100 font-sans",children:[g.jsx(b2,{}),k&&g.jsx(_2,{onSave:B,existing:E,onLogout:$,onDeleteAccount:q}),o==="dashboard"&&g.jsx(v2,{trips:t,onNewTrip:()=>l("wizard"),onSelectTrip:T=>{m(T),v("overview"),l("detail")},onSettingsClick:()=>F(!0)}),o==="wizard"&&g.jsx(E2,{onBack:()=>l("dashboard"),onCreate:ce}),o==="detail"&&h&&g.jsx(P2,{trip:h,activeTab:y,onTabChange:v,onBack:()=>l("dashboard"),onDelete:Z,onGenerateItinerary:we,onGeneratePackingList:Se,onUpdateTrip:ee,getChatHistory:ye,saveChatHistory:N,apiKey:E})]}):g.jsx(y2,{})}rE.createRoot(document.getElementById("root")).render(g.jsx(de.StrictMode,{children:g.jsx(V2,{})}));
