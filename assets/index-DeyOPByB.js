(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const p of c.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&o(p)}).observe(document,{childList:!0,subtree:!0});function t(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(a){if(a.ep)return;a.ep=!0;const c=t(a);fetch(a.href,c)}})();function Zy(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var gf={exports:{}},mu={},_f={exports:{}},rt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qg;function Cx(){if(Qg)return rt;Qg=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),p=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),T=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),C=Symbol.iterator;function N(B){return B===null||typeof B!="object"?null:(B=C&&B[C]||B["@@iterator"],typeof B=="function"?B:null)}var H={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$=Object.assign,Z={};function te(B,ne,Me){this.props=B,this.context=ne,this.refs=Z,this.updater=Me||H}te.prototype.isReactComponent={},te.prototype.setState=function(B,ne){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,ne,"setState")},te.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function he(){}he.prototype=te.prototype;function _e(B,ne,Me){this.props=B,this.context=ne,this.refs=Z,this.updater=Me||H}var Te=_e.prototype=new he;Te.constructor=_e,$(Te,te.prototype),Te.isPureReactComponent=!0;var Oe=Array.isArray,ke=Object.prototype.hasOwnProperty,fe={current:null},V={key:!0,ref:!0,__self:!0,__source:!0};function D(B,ne,Me){var Ne,Se={},we=null,Xe=null;if(ne!=null)for(Ne in ne.ref!==void 0&&(Xe=ne.ref),ne.key!==void 0&&(we=""+ne.key),ne)ke.call(ne,Ne)&&!V.hasOwnProperty(Ne)&&(Se[Ne]=ne[Ne]);var re=arguments.length-2;if(re===1)Se.children=Me;else if(1<re){for(var qe=Array(re),dt=0;dt<re;dt++)qe[dt]=arguments[dt+2];Se.children=qe}if(B&&B.defaultProps)for(Ne in re=B.defaultProps,re)Se[Ne]===void 0&&(Se[Ne]=re[Ne]);return{$$typeof:r,type:B,key:we,ref:Xe,props:Se,_owner:fe.current}}function M(B,ne){return{$$typeof:r,type:B.type,key:ne,ref:B.ref,props:B.props,_owner:B._owner}}function z(B){return typeof B=="object"&&B!==null&&B.$$typeof===r}function j(B){var ne={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(Me){return ne[Me]})}var R=/\/+/g;function A(B,ne){return typeof B=="object"&&B!==null&&B.key!=null?j(""+B.key):ne.toString(36)}function ye(B,ne,Me,Ne,Se){var we=typeof B;(we==="undefined"||we==="boolean")&&(B=null);var Xe=!1;if(B===null)Xe=!0;else switch(we){case"string":case"number":Xe=!0;break;case"object":switch(B.$$typeof){case r:case e:Xe=!0}}if(Xe)return Xe=B,Se=Se(Xe),B=Ne===""?"."+A(Xe,0):Ne,Oe(Se)?(Me="",B!=null&&(Me=B.replace(R,"$&/")+"/"),ye(Se,ne,Me,"",function(dt){return dt})):Se!=null&&(z(Se)&&(Se=M(Se,Me+(!Se.key||Xe&&Xe.key===Se.key?"":(""+Se.key).replace(R,"$&/")+"/")+B)),ne.push(Se)),1;if(Xe=0,Ne=Ne===""?".":Ne+":",Oe(B))for(var re=0;re<B.length;re++){we=B[re];var qe=Ne+A(we,re);Xe+=ye(we,ne,Me,qe,Se)}else if(qe=N(B),typeof qe=="function")for(B=qe.call(B),re=0;!(we=B.next()).done;)we=we.value,qe=Ne+A(we,re++),Xe+=ye(we,ne,Me,qe,Se);else if(we==="object")throw ne=String(B),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.");return Xe}function Ge(B,ne,Me){if(B==null)return B;var Ne=[],Se=0;return ye(B,Ne,"","",function(we){return ne.call(Me,we,Se++)}),Ne}function pe(B){if(B._status===-1){var ne=B._result;ne=ne(),ne.then(function(Me){(B._status===0||B._status===-1)&&(B._status=1,B._result=Me)},function(Me){(B._status===0||B._status===-1)&&(B._status=2,B._result=Me)}),B._status===-1&&(B._status=0,B._result=ne)}if(B._status===1)return B._result.default;throw B._result}var Ve={current:null},X={transition:null},Ce={ReactCurrentDispatcher:Ve,ReactCurrentBatchConfig:X,ReactCurrentOwner:fe};function se(){throw Error("act(...) is not supported in production builds of React.")}return rt.Children={map:Ge,forEach:function(B,ne,Me){Ge(B,function(){ne.apply(this,arguments)},Me)},count:function(B){var ne=0;return Ge(B,function(){ne++}),ne},toArray:function(B){return Ge(B,function(ne){return ne})||[]},only:function(B){if(!z(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},rt.Component=te,rt.Fragment=t,rt.Profiler=a,rt.PureComponent=_e,rt.StrictMode=o,rt.Suspense=x,rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ce,rt.act=se,rt.cloneElement=function(B,ne,Me){if(B==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+B+".");var Ne=$({},B.props),Se=B.key,we=B.ref,Xe=B._owner;if(ne!=null){if(ne.ref!==void 0&&(we=ne.ref,Xe=fe.current),ne.key!==void 0&&(Se=""+ne.key),B.type&&B.type.defaultProps)var re=B.type.defaultProps;for(qe in ne)ke.call(ne,qe)&&!V.hasOwnProperty(qe)&&(Ne[qe]=ne[qe]===void 0&&re!==void 0?re[qe]:ne[qe])}var qe=arguments.length-2;if(qe===1)Ne.children=Me;else if(1<qe){re=Array(qe);for(var dt=0;dt<qe;dt++)re[dt]=arguments[dt+2];Ne.children=re}return{$$typeof:r,type:B.type,key:Se,ref:we,props:Ne,_owner:Xe}},rt.createContext=function(B){return B={$$typeof:p,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},B.Provider={$$typeof:c,_context:B},B.Consumer=B},rt.createElement=D,rt.createFactory=function(B){var ne=D.bind(null,B);return ne.type=B,ne},rt.createRef=function(){return{current:null}},rt.forwardRef=function(B){return{$$typeof:y,render:B}},rt.isValidElement=z,rt.lazy=function(B){return{$$typeof:k,_payload:{_status:-1,_result:B},_init:pe}},rt.memo=function(B,ne){return{$$typeof:T,type:B,compare:ne===void 0?null:ne}},rt.startTransition=function(B){var ne=X.transition;X.transition={};try{B()}finally{X.transition=ne}},rt.unstable_act=se,rt.useCallback=function(B,ne){return Ve.current.useCallback(B,ne)},rt.useContext=function(B){return Ve.current.useContext(B)},rt.useDebugValue=function(){},rt.useDeferredValue=function(B){return Ve.current.useDeferredValue(B)},rt.useEffect=function(B,ne){return Ve.current.useEffect(B,ne)},rt.useId=function(){return Ve.current.useId()},rt.useImperativeHandle=function(B,ne,Me){return Ve.current.useImperativeHandle(B,ne,Me)},rt.useInsertionEffect=function(B,ne){return Ve.current.useInsertionEffect(B,ne)},rt.useLayoutEffect=function(B,ne){return Ve.current.useLayoutEffect(B,ne)},rt.useMemo=function(B,ne){return Ve.current.useMemo(B,ne)},rt.useReducer=function(B,ne,Me){return Ve.current.useReducer(B,ne,Me)},rt.useRef=function(B){return Ve.current.useRef(B)},rt.useState=function(B){return Ve.current.useState(B)},rt.useSyncExternalStore=function(B,ne,Me){return Ve.current.useSyncExternalStore(B,ne,Me)},rt.useTransition=function(){return Ve.current.useTransition()},rt.version="18.3.1",rt}var Yg;function hp(){return Yg||(Yg=1,_f.exports=Cx()),_f.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jg;function bx(){if(Jg)return mu;Jg=1;var r=hp(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function p(y,x,T){var k,C={},N=null,H=null;T!==void 0&&(N=""+T),x.key!==void 0&&(N=""+x.key),x.ref!==void 0&&(H=x.ref);for(k in x)o.call(x,k)&&!c.hasOwnProperty(k)&&(C[k]=x[k]);if(y&&y.defaultProps)for(k in x=y.defaultProps,x)C[k]===void 0&&(C[k]=x[k]);return{$$typeof:e,type:y,key:N,ref:H,props:C,_owner:a.current}}return mu.Fragment=t,mu.jsx=p,mu.jsxs=p,mu}var Xg;function Ax(){return Xg||(Xg=1,gf.exports=bx()),gf.exports}var _=Ax(),le=hp();const Df=Zy(le);var Qc={},yf={exports:{}},rr={},vf={exports:{}},wf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e_;function Nx(){return e_||(e_=1,(function(r){function e(X,Ce){var se=X.length;X.push(Ce);e:for(;0<se;){var B=se-1>>>1,ne=X[B];if(0<a(ne,Ce))X[B]=Ce,X[se]=ne,se=B;else break e}}function t(X){return X.length===0?null:X[0]}function o(X){if(X.length===0)return null;var Ce=X[0],se=X.pop();if(se!==Ce){X[0]=se;e:for(var B=0,ne=X.length,Me=ne>>>1;B<Me;){var Ne=2*(B+1)-1,Se=X[Ne],we=Ne+1,Xe=X[we];if(0>a(Se,se))we<ne&&0>a(Xe,Se)?(X[B]=Xe,X[we]=se,B=we):(X[B]=Se,X[Ne]=se,B=Ne);else if(we<ne&&0>a(Xe,se))X[B]=Xe,X[we]=se,B=we;else break e}}return Ce}function a(X,Ce){var se=X.sortIndex-Ce.sortIndex;return se!==0?se:X.id-Ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var p=Date,y=p.now();r.unstable_now=function(){return p.now()-y}}var x=[],T=[],k=1,C=null,N=3,H=!1,$=!1,Z=!1,te=typeof setTimeout=="function"?setTimeout:null,he=typeof clearTimeout=="function"?clearTimeout:null,_e=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Te(X){for(var Ce=t(T);Ce!==null;){if(Ce.callback===null)o(T);else if(Ce.startTime<=X)o(T),Ce.sortIndex=Ce.expirationTime,e(x,Ce);else break;Ce=t(T)}}function Oe(X){if(Z=!1,Te(X),!$)if(t(x)!==null)$=!0,pe(ke);else{var Ce=t(T);Ce!==null&&Ve(Oe,Ce.startTime-X)}}function ke(X,Ce){$=!1,Z&&(Z=!1,he(D),D=-1),H=!0;var se=N;try{for(Te(Ce),C=t(x);C!==null&&(!(C.expirationTime>Ce)||X&&!j());){var B=C.callback;if(typeof B=="function"){C.callback=null,N=C.priorityLevel;var ne=B(C.expirationTime<=Ce);Ce=r.unstable_now(),typeof ne=="function"?C.callback=ne:C===t(x)&&o(x),Te(Ce)}else o(x);C=t(x)}if(C!==null)var Me=!0;else{var Ne=t(T);Ne!==null&&Ve(Oe,Ne.startTime-Ce),Me=!1}return Me}finally{C=null,N=se,H=!1}}var fe=!1,V=null,D=-1,M=5,z=-1;function j(){return!(r.unstable_now()-z<M)}function R(){if(V!==null){var X=r.unstable_now();z=X;var Ce=!0;try{Ce=V(!0,X)}finally{Ce?A():(fe=!1,V=null)}}else fe=!1}var A;if(typeof _e=="function")A=function(){_e(R)};else if(typeof MessageChannel<"u"){var ye=new MessageChannel,Ge=ye.port2;ye.port1.onmessage=R,A=function(){Ge.postMessage(null)}}else A=function(){te(R,0)};function pe(X){V=X,fe||(fe=!0,A())}function Ve(X,Ce){D=te(function(){X(r.unstable_now())},Ce)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(X){X.callback=null},r.unstable_continueExecution=function(){$||H||($=!0,pe(ke))},r.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<X?Math.floor(1e3/X):5},r.unstable_getCurrentPriorityLevel=function(){return N},r.unstable_getFirstCallbackNode=function(){return t(x)},r.unstable_next=function(X){switch(N){case 1:case 2:case 3:var Ce=3;break;default:Ce=N}var se=N;N=Ce;try{return X()}finally{N=se}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(X,Ce){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var se=N;N=X;try{return Ce()}finally{N=se}},r.unstable_scheduleCallback=function(X,Ce,se){var B=r.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?B+se:B):se=B,X){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=se+ne,X={id:k++,callback:Ce,priorityLevel:X,startTime:se,expirationTime:ne,sortIndex:-1},se>B?(X.sortIndex=se,e(T,X),t(x)===null&&X===t(T)&&(Z?(he(D),D=-1):Z=!0,Ve(Oe,se-B))):(X.sortIndex=ne,e(x,X),$||H||($=!0,pe(ke))),X},r.unstable_shouldYield=j,r.unstable_wrapCallback=function(X){var Ce=N;return function(){var se=N;N=Ce;try{return X.apply(this,arguments)}finally{N=se}}}})(wf)),wf}var t_;function Rx(){return t_||(t_=1,vf.exports=Nx()),vf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n_;function Lx(){if(n_)return rr;n_=1;var r=hp(),e=Rx();function t(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,u=1;u<arguments.length;u++)s+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function c(n,s){p(n,s),p(n+"Capture",s)}function p(n,s){for(a[n]=s,n=0;n<s.length;n++)o.add(s[n])}var y=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),x=Object.prototype.hasOwnProperty,T=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,k={},C={};function N(n){return x.call(C,n)?!0:x.call(k,n)?!1:T.test(n)?C[n]=!0:(k[n]=!0,!1)}function H(n,s,u,f){if(u!==null&&u.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return f?!1:u!==null?!u.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function $(n,s,u,f){if(s===null||typeof s>"u"||H(n,s,u,f))return!0;if(f)return!1;if(u!==null)switch(u.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function Z(n,s,u,f,g,v,S){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=f,this.attributeNamespace=g,this.mustUseProperty=u,this.propertyName=n,this.type=s,this.sanitizeURL=v,this.removeEmptyString=S}var te={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){te[n]=new Z(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];te[s]=new Z(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){te[n]=new Z(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){te[n]=new Z(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){te[n]=new Z(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){te[n]=new Z(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){te[n]=new Z(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){te[n]=new Z(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){te[n]=new Z(n,5,!1,n.toLowerCase(),null,!1,!1)});var he=/[\-:]([a-z])/g;function _e(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(he,_e);te[s]=new Z(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(he,_e);te[s]=new Z(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(he,_e);te[s]=new Z(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){te[n]=new Z(n,1,!1,n.toLowerCase(),null,!1,!1)}),te.xlinkHref=new Z("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){te[n]=new Z(n,1,!1,n.toLowerCase(),null,!0,!0)});function Te(n,s,u,f){var g=te.hasOwnProperty(s)?te[s]:null;(g!==null?g.type!==0:f||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&($(s,u,g,f)&&(u=null),f||g===null?N(s)&&(u===null?n.removeAttribute(s):n.setAttribute(s,""+u)):g.mustUseProperty?n[g.propertyName]=u===null?g.type===3?!1:"":u:(s=g.attributeName,f=g.attributeNamespace,u===null?n.removeAttribute(s):(g=g.type,u=g===3||g===4&&u===!0?"":""+u,f?n.setAttributeNS(f,s,u):n.setAttribute(s,u))))}var Oe=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ke=Symbol.for("react.element"),fe=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),z=Symbol.for("react.provider"),j=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),ye=Symbol.for("react.suspense_list"),Ge=Symbol.for("react.memo"),pe=Symbol.for("react.lazy"),Ve=Symbol.for("react.offscreen"),X=Symbol.iterator;function Ce(n){return n===null||typeof n!="object"?null:(n=X&&n[X]||n["@@iterator"],typeof n=="function"?n:null)}var se=Object.assign,B;function ne(n){if(B===void 0)try{throw Error()}catch(u){var s=u.stack.trim().match(/\n( *(at )?)/);B=s&&s[1]||""}return`
`+B+n}var Me=!1;function Ne(n,s){if(!n||Me)return"";Me=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(ee){var f=ee}Reflect.construct(n,[],s)}else{try{s.call()}catch(ee){f=ee}n.call(s.prototype)}else{try{throw Error()}catch(ee){f=ee}n()}}catch(ee){if(ee&&f&&typeof ee.stack=="string"){for(var g=ee.stack.split(`
`),v=f.stack.split(`
`),S=g.length-1,O=v.length-1;1<=S&&0<=O&&g[S]!==v[O];)O--;for(;1<=S&&0<=O;S--,O--)if(g[S]!==v[O]){if(S!==1||O!==1)do if(S--,O--,0>O||g[S]!==v[O]){var U=`
`+g[S].replace(" at new "," at ");return n.displayName&&U.includes("<anonymous>")&&(U=U.replace("<anonymous>",n.displayName)),U}while(1<=S&&0<=O);break}}}finally{Me=!1,Error.prepareStackTrace=u}return(n=n?n.displayName||n.name:"")?ne(n):""}function Se(n){switch(n.tag){case 5:return ne(n.type);case 16:return ne("Lazy");case 13:return ne("Suspense");case 19:return ne("SuspenseList");case 0:case 2:case 15:return n=Ne(n.type,!1),n;case 11:return n=Ne(n.type.render,!1),n;case 1:return n=Ne(n.type,!0),n;default:return""}}function we(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case V:return"Fragment";case fe:return"Portal";case M:return"Profiler";case D:return"StrictMode";case A:return"Suspense";case ye:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case j:return(n.displayName||"Context")+".Consumer";case z:return(n._context.displayName||"Context")+".Provider";case R:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Ge:return s=n.displayName||null,s!==null?s:we(n.type)||"Memo";case pe:s=n._payload,n=n._init;try{return we(n(s))}catch{}}return null}function Xe(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return we(s);case 8:return s===D?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function re(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function qe(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function dt(n){var s=qe(n)?"checked":"value",u=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),f=""+n[s];if(!n.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,v=u.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return g.call(this)},set:function(S){f=""+S,v.call(this,S)}}),Object.defineProperty(n,s,{enumerable:u.enumerable}),{getValue:function(){return f},setValue:function(S){f=""+S},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function gn(n){n._valueTracker||(n._valueTracker=dt(n))}function jt(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var u=s.getValue(),f="";return n&&(f=qe(n)?n.checked?"true":"false":n.value),n=f,n!==u?(s.setValue(n),!0):!1}function Nn(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function di(n,s){var u=s.checked;return se({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??n._wrapperState.initialChecked})}function fi(n,s){var u=s.defaultValue==null?"":s.defaultValue,f=s.checked!=null?s.checked:s.defaultChecked;u=re(s.value!=null?s.value:u),n._wrapperState={initialChecked:f,initialValue:u,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Kr(n,s){s=s.checked,s!=null&&Te(n,"checked",s,!1)}function or(n,s){Kr(n,s);var u=re(s.value),f=s.type;if(u!=null)f==="number"?(u===0&&n.value===""||n.value!=u)&&(n.value=""+u):n.value!==""+u&&(n.value=""+u);else if(f==="submit"||f==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?kt(n,s.type,u):s.hasOwnProperty("defaultValue")&&kt(n,s.type,re(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function ar(n,s,u){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var f=s.type;if(!(f!=="submit"&&f!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,u||s===n.value||(n.value=s),n.defaultValue=s}u=n.name,u!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,u!==""&&(n.name=u)}function kt(n,s,u){(s!=="number"||Nn(n.ownerDocument)!==n)&&(u==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+u&&(n.defaultValue=""+u))}var Ct=Array.isArray;function Rn(n,s,u,f){if(n=n.options,s){s={};for(var g=0;g<u.length;g++)s["$"+u[g]]=!0;for(u=0;u<n.length;u++)g=s.hasOwnProperty("$"+n[u].value),n[u].selected!==g&&(n[u].selected=g),g&&f&&(n[u].defaultSelected=!0)}else{for(u=""+re(u),s=null,g=0;g<n.length;g++){if(n[g].value===u){n[g].selected=!0,f&&(n[g].defaultSelected=!0);return}s!==null||n[g].disabled||(s=n[g])}s!==null&&(s.selected=!0)}}function Ds(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return se({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Ms(n,s){var u=s.value;if(u==null){if(u=s.children,s=s.defaultValue,u!=null){if(s!=null)throw Error(t(92));if(Ct(u)){if(1<u.length)throw Error(t(93));u=u[0]}s=u}s==null&&(s=""),u=s}n._wrapperState={initialValue:re(u)}}function Ra(n,s){var u=re(s.value),f=re(s.defaultValue);u!=null&&(u=""+u,u!==n.value&&(n.value=u),s.defaultValue==null&&n.defaultValue!==u&&(n.defaultValue=u)),f!=null&&(n.defaultValue=""+f)}function pi(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function $i(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qi(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?$i(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Zr,La=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,u,f,g){MSApp.execUnsafeLocalFunction(function(){return n(s,u,f,g)})}:n})(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(Zr=Zr||document.createElement("div"),Zr.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Zr.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function mi(n,s){if(s){var u=n.firstChild;if(u&&u===n.lastChild&&u.nodeType===3){u.nodeValue=s;return}}n.textContent=s}var Qr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Da=["Webkit","ms","Moz","O"];Object.keys(Qr).forEach(function(n){Da.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),Qr[s]=Qr[n]})});function Yr(n,s,u){return s==null||typeof s=="boolean"||s===""?"":u||typeof s!="number"||s===0||Qr.hasOwnProperty(n)&&Qr[n]?(""+s).trim():s+"px"}function gi(n,s){n=n.style;for(var u in s)if(s.hasOwnProperty(u)){var f=u.indexOf("--")===0,g=Yr(u,s[u],f);u==="float"&&(u="cssFloat"),f?n.setProperty(u,g):n[u]=g}}var Os=se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function lr(n,s){if(s){if(Os[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function wr(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _i=null;function js(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var xr=null,Er=null,It=null;function Uo(n){if(n=ps(n)){if(typeof xr!="function")throw Error(t(280));var s=n.stateNode;s&&(s=Ya(s),xr(n.stateNode,n.type,s))}}function yi(n){Er?It?It.push(n):It=[n]:Er=n}function vi(){if(Er){var n=Er,s=It;if(It=Er=null,Uo(n),s)for(n=0;n<s.length;n++)Uo(s[n])}}function Ma(n,s){return n(s)}function Oa(){}var Tr=!1;function Vs(n,s,u){if(Tr)return n(s,u);Tr=!0;try{return Ma(n,s,u)}finally{Tr=!1,(Er!==null||It!==null)&&(Oa(),vi())}}function Gi(n,s){var u=n.stateNode;if(u===null)return null;var f=Ya(u);if(f===null)return null;u=f[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(n=n.type,f=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!f;break e;default:n=!1}if(n)return null;if(u&&typeof u!="function")throw Error(t(231,s,typeof u));return u}var wi=!1;if(y)try{var xi={};Object.defineProperty(xi,"passive",{get:function(){wi=!0}}),window.addEventListener("test",xi,xi),window.removeEventListener("test",xi,xi)}catch{wi=!1}function ja(n,s,u,f,g,v,S,O,U){var ee=Array.prototype.slice.call(arguments,3);try{s.apply(u,ee)}catch(ce){this.onError(ce)}}var Bt=!1,be=null,Ki=!1,Ln=null,Bo={onError:function(n){Bt=!0,be=n}};function Ho(n,s,u,f,g,v,S,O,U){Bt=!1,be=null,ja.apply(Bo,arguments)}function Zi(n,s,u,f,g,v,S,O,U){if(Ho.apply(this,arguments),Bt){if(Bt){var ee=be;Bt=!1,be=null}else throw Error(t(198));Ki||(Ki=!0,Ln=ee)}}function qn(n){var s=n,u=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(u=s.return),n=s.return;while(n)}return s.tag===3?u:null}function Ir(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function Wo(n){if(qn(n)!==n)throw Error(t(188))}function Va(n){var s=n.alternate;if(!s){if(s=qn(n),s===null)throw Error(t(188));return s!==n?null:n}for(var u=n,f=s;;){var g=u.return;if(g===null)break;var v=g.alternate;if(v===null){if(f=g.return,f!==null){u=f;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===u)return Wo(g),n;if(v===f)return Wo(g),s;v=v.sibling}throw Error(t(188))}if(u.return!==f.return)u=g,f=v;else{for(var S=!1,O=g.child;O;){if(O===u){S=!0,u=g,f=v;break}if(O===f){S=!0,f=g,u=v;break}O=O.sibling}if(!S){for(O=v.child;O;){if(O===u){S=!0,u=v,f=g;break}if(O===f){S=!0,f=v,u=g;break}O=O.sibling}if(!S)throw Error(t(189))}}if(u.alternate!==f)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?n:s}function Fa(n){return n=Va(n),n!==null?Qi(n):null}function Qi(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=Qi(n);if(s!==null)return s;n=n.sibling}return null}var $o=e.unstable_scheduleCallback,Yi=e.unstable_cancelCallback,Ji=e.unstable_shouldYield,Gn=e.unstable_requestPaint,wt=e.unstable_now,Bl=e.unstable_getCurrentPriorityLevel,Fs=e.unstable_ImmediatePriority,qo=e.unstable_UserBlockingPriority,Xi=e.unstable_NormalPriority,es=e.unstable_LowPriority,Sr=e.unstable_IdlePriority,Ei=null,_n=null;function Ti(n){if(_n&&typeof _n.onCommitFiberRoot=="function")try{_n.onCommitFiberRoot(Ei,n,void 0,(n.current.flags&128)===128)}catch{}}var Ze=Math.clz32?Math.clz32:Kn,lt=Math.log,ln=Math.LN2;function Kn(n){return n>>>=0,n===0?32:31-(lt(n)/ln|0)|0}var un=64,Pr=4194304;function Ee(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function mt(n,s){var u=n.pendingLanes;if(u===0)return 0;var f=0,g=n.suspendedLanes,v=n.pingedLanes,S=u&268435455;if(S!==0){var O=S&~g;O!==0?f=Ee(O):(v&=S,v!==0&&(f=Ee(v)))}else S=u&~g,S!==0?f=Ee(S):v!==0&&(f=Ee(v));if(f===0)return 0;if(s!==0&&s!==f&&(s&g)===0&&(g=f&-f,v=s&-s,g>=v||g===16&&(v&4194240)!==0))return s;if((f&4)!==0&&(f|=u&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=f;0<s;)u=31-Ze(s),g=1<<u,f|=n[u],s&=~g;return f}function Jr(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kr(n,s){for(var u=n.suspendedLanes,f=n.pingedLanes,g=n.expirationTimes,v=n.pendingLanes;0<v;){var S=31-Ze(v),O=1<<S,U=g[S];U===-1?((O&u)===0||(O&f)!==0)&&(g[S]=Jr(O,s)):U<=s&&(n.expiredLanes|=O),v&=~O}}function tn(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Go(){var n=un;return un<<=1,(un&4194240)===0&&(un=64),n}function Ii(n){for(var s=[],u=0;31>u;u++)s.push(n);return s}function Dn(n,s,u){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-Ze(s),n[s]=u}function bt(n,s){var u=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var f=n.eventTimes;for(n=n.expirationTimes;0<u;){var g=31-Ze(u),v=1<<g;s[g]=0,f[g]=-1,n[g]=-1,u&=~v}}function ur(n,s){var u=n.entangledLanes|=s;for(n=n.entanglements;u;){var f=31-Ze(u),g=1<<f;g&s|n[f]&s&&(n[f]|=s),u&=~g}}var tt=0;function yn(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var ts,Cr,ns,rs,Si,Zn=!1,Pi=[],Mn=null,cr=null,Vt=null,is=new Map,ze=new Map,At=[],gt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Xr(n,s){switch(n){case"focusin":case"focusout":Mn=null;break;case"dragenter":case"dragleave":cr=null;break;case"mouseover":case"mouseout":Vt=null;break;case"pointerover":case"pointerout":is.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":ze.delete(s.pointerId)}}function On(n,s,u,f,g,v){return n===null||n.nativeEvent!==v?(n={blockedOn:s,domEventName:u,eventSystemFlags:f,nativeEvent:v,targetContainers:[g]},s!==null&&(s=ps(s),s!==null&&Cr(s)),n):(n.eventSystemFlags|=f,s=n.targetContainers,g!==null&&s.indexOf(g)===-1&&s.push(g),n)}function zs(n,s,u,f,g){switch(s){case"focusin":return Mn=On(Mn,n,s,u,f,g),!0;case"dragenter":return cr=On(cr,n,s,u,f,g),!0;case"mouseover":return Vt=On(Vt,n,s,u,f,g),!0;case"pointerover":var v=g.pointerId;return is.set(v,On(is.get(v)||null,n,s,u,f,g)),!0;case"gotpointercapture":return v=g.pointerId,ze.set(v,On(ze.get(v)||null,n,s,u,f,g)),!0}return!1}function ki(n){var s=fs(n.target);if(s!==null){var u=qn(s);if(u!==null){if(s=u.tag,s===13){if(s=Ir(u),s!==null){n.blockedOn=s,Si(n.priority,function(){ns(u)});return}}else if(s===3&&u.stateNode.current.memoizedState.isDehydrated){n.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}n.blockedOn=null}function at(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var u=as(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(u===null){u=n.nativeEvent;var f=new u.constructor(u.type,u);_i=f,u.target.dispatchEvent(f),_i=null}else return s=ps(u),s!==null&&Cr(s),n.blockedOn=u,!1;s.shift()}return!0}function Us(n,s,u){at(n)&&u.delete(s)}function ss(){Zn=!1,Mn!==null&&at(Mn)&&(Mn=null),cr!==null&&at(cr)&&(cr=null),Vt!==null&&at(Vt)&&(Vt=null),is.forEach(Us),ze.forEach(Us)}function xt(n,s){n.blockedOn===s&&(n.blockedOn=null,Zn||(Zn=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ss)))}function vn(n){function s(g){return xt(g,n)}if(0<Pi.length){xt(Pi[0],n);for(var u=1;u<Pi.length;u++){var f=Pi[u];f.blockedOn===n&&(f.blockedOn=null)}}for(Mn!==null&&xt(Mn,n),cr!==null&&xt(cr,n),Vt!==null&&xt(Vt,n),is.forEach(s),ze.forEach(s),u=0;u<At.length;u++)f=At[u],f.blockedOn===n&&(f.blockedOn=null);for(;0<At.length&&(u=At[0],u.blockedOn===null);)ki(u),u.blockedOn===null&&At.shift()}var br=Oe.ReactCurrentBatchConfig,Ar=!0;function Nr(n,s,u,f){var g=tt,v=br.transition;br.transition=null;try{tt=1,os(n,s,u,f)}finally{tt=g,br.transition=v}}function Ko(n,s,u,f){var g=tt,v=br.transition;br.transition=null;try{tt=4,os(n,s,u,f)}finally{tt=g,br.transition=v}}function os(n,s,u,f){if(Ar){var g=as(n,s,u,f);if(g===null)i(n,s,f,Rr,u),Xr(n,f);else if(zs(g,n,s,u,f))f.stopPropagation();else if(Xr(n,f),s&4&&-1<gt.indexOf(n)){for(;g!==null;){var v=ps(g);if(v!==null&&ts(v),v=as(n,s,u,f),v===null&&i(n,s,f,Rr,u),v===g)break;g=v}g!==null&&f.stopPropagation()}else i(n,s,f,null,u)}}var Rr=null;function as(n,s,u,f){if(Rr=null,n=js(f),n=fs(n),n!==null)if(s=qn(n),s===null)n=null;else if(u=s.tag,u===13){if(n=Ir(s),n!==null)return n;n=null}else if(u===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return Rr=n,null}function nt(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Bl()){case Fs:return 1;case qo:return 4;case Xi:case es:return 16;case Sr:return 536870912;default:return 16}default:return 16}}var jn=null,nn=null,Vn=null;function Zo(){if(Vn)return Vn;var n,s=nn,u=s.length,f,g="value"in jn?jn.value:jn.textContent,v=g.length;for(n=0;n<u&&s[n]===g[n];n++);var S=u-n;for(f=1;f<=S&&s[u-f]===g[v-f];f++);return Vn=g.slice(n,1<f?1-f:void 0)}function ls(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Qn(){return!0}function Qo(){return!1}function Qt(n){function s(u,f,g,v,S){this._reactName=u,this._targetInst=g,this.type=f,this.nativeEvent=v,this.target=S,this.currentTarget=null;for(var O in n)n.hasOwnProperty(O)&&(u=n[O],this[O]=u?u(v):v[O]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Qn:Qo,this.isPropagationStopped=Qo,this}return se(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Qn)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Qn)},persist:function(){},isPersistent:Qn}),s}var Lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},us=Qt(Lr),Dr=se({},Lr,{view:0,detail:0}),Bs=Qt(Dr),cn,Hs,wn,xn=se({},Dr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:He,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==wn&&(wn&&n.type==="mousemove"?(cn=n.screenX-wn.screenX,Hs=n.screenY-wn.screenY):Hs=cn=0,wn=n),cn)},movementY:function(n){return"movementY"in n?n.movementY:Hs}}),Ws=Qt(xn),Yo=se({},xn,{dataTransfer:0}),$s=Qt(Yo),qs=se({},Dr,{relatedTarget:0}),Ht=Qt(qs),Jo=se({},Lr,{animationName:0,elapsedTime:0,pseudoElement:0}),za=Qt(Jo),Ci=se({},Lr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),h=Qt(Ci),w=se({},Lr,{data:0}),I=Qt(w),b={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},q={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Y={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ge(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=Y[n])?!!s[n]:!1}function He(){return ge}var ut=se({},Dr,{key:function(n){if(n.key){var s=b[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=ls(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?q[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:He,charCode:function(n){return n.type==="keypress"?ls(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ls(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),ft=Qt(ut),Rt=se({},xn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fn=Qt(Rt),hr=se({},Dr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:He}),Yn=Qt(hr),Mr=se({},Lr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Gs=Qt(Mr),Ks=se({},xn,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),sd=Qt(Ks),dr=[9,13,27,32],bi=y&&"CompositionEvent"in window,Xo=null;y&&"documentMode"in document&&(Xo=document.documentMode);var ei=y&&"TextEvent"in window&&!Xo,Xu=y&&(!bi||Xo&&8<Xo&&11>=Xo),cs=" ",ec=!1;function Zs(n,s){switch(n){case"keyup":return dr.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hl(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ti=!1;function od(n,s){switch(n){case"compositionend":return Hl(s);case"keypress":return s.which!==32?null:(ec=!0,cs);case"textInput":return n=s.data,n===cs&&ec?null:n;default:return null}}function Ai(n,s){if(ti)return n==="compositionend"||!bi&&Zs(n,s)?(n=Zo(),Vn=nn=jn=null,ti=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Xu&&s.locale!=="ko"?null:s.data;default:return null}}var Ua={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tc(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!Ua[n.type]:s==="textarea"}function Ba(n,s,u,f){yi(f),s=d(s,"onChange"),0<s.length&&(u=new us("onChange","change",null,u,f),n.push({event:u,listeners:s}))}var ea=null,zn=null;function ad(n){Jl(n,0)}function ni(n){var s=ms(n);if(jt(s))return n}function ld(n,s){if(n==="change")return s}var Or=!1;if(y){var Qs;if(y){var Ha="oninput"in document;if(!Ha){var Wa=document.createElement("div");Wa.setAttribute("oninput","return;"),Ha=typeof Wa.oninput=="function"}Qs=Ha}else Qs=!1;Or=Qs&&(!document.documentMode||9<document.documentMode)}function ta(){ea&&(ea.detachEvent("onpropertychange",$a),zn=ea=null)}function $a(n){if(n.propertyName==="value"&&ni(zn)){var s=[];Ba(s,zn,n,js(n)),Vs(ad,s)}}function qa(n,s,u){n==="focusin"?(ta(),ea=s,zn=u,ea.attachEvent("onpropertychange",$a)):n==="focusout"&&ta()}function Ys(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return ni(zn)}function Ga(n,s){if(n==="click")return ni(s)}function Wl(n,s){if(n==="input"||n==="change")return ni(s)}function nc(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var fr=typeof Object.is=="function"?Object.is:nc;function Ni(n,s){if(fr(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var u=Object.keys(n),f=Object.keys(s);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var g=u[f];if(!x.call(s,g)||!fr(n[g],s[g]))return!1}return!0}function rc(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function $l(n,s){var u=rc(n);n=0;for(var f;u;){if(u.nodeType===3){if(f=n+u.textContent.length,n<=s&&f>=s)return{node:u,offset:s-n};n=f}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=rc(u)}}function ic(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?ic(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function ql(){for(var n=window,s=Nn();s instanceof n.HTMLIFrameElement;){try{var u=typeof s.contentWindow.location.href=="string"}catch{u=!1}if(u)n=s.contentWindow;else break;s=Nn(n.document)}return s}function Gl(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function jr(n){var s=ql(),u=n.focusedElem,f=n.selectionRange;if(s!==u&&u&&u.ownerDocument&&ic(u.ownerDocument.documentElement,u)){if(f!==null&&Gl(u)){if(s=f.start,n=f.end,n===void 0&&(n=s),"selectionStart"in u)u.selectionStart=s,u.selectionEnd=Math.min(n,u.value.length);else if(n=(s=u.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var g=u.textContent.length,v=Math.min(f.start,g);f=f.end===void 0?v:Math.min(f.end,g),!n.extend&&v>f&&(g=f,f=v,v=g),g=$l(u,v);var S=$l(u,f);g&&S&&(n.rangeCount!==1||n.anchorNode!==g.node||n.anchorOffset!==g.offset||n.focusNode!==S.node||n.focusOffset!==S.offset)&&(s=s.createRange(),s.setStart(g.node,g.offset),n.removeAllRanges(),v>f?(n.addRange(s),n.extend(S.node,S.offset)):(s.setEnd(S.node,S.offset),n.addRange(s)))}}for(s=[],n=u;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<s.length;u++)n=s[u],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Ka=y&&"documentMode"in document&&11>=document.documentMode,Js=null,Xs=null,na=null,Za=!1;function sc(n,s,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Za||Js==null||Js!==Nn(f)||(f=Js,"selectionStart"in f&&Gl(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),na&&Ni(na,f)||(na=f,f=d(Xs,"onSelect"),0<f.length&&(s=new us("onSelect","select",null,s,u),n.push({event:s,listeners:f}),s.target=Js)))}function Ri(n,s){var u={};return u[n.toLowerCase()]=s.toLowerCase(),u["Webkit"+n]="webkit"+s,u["Moz"+n]="moz"+s,u}var eo={animationend:Ri("Animation","AnimationEnd"),animationiteration:Ri("Animation","AnimationIteration"),animationstart:Ri("Animation","AnimationStart"),transitionend:Ri("Transition","TransitionEnd")},Li={},Kl={};y&&(Kl=document.createElement("div").style,"AnimationEvent"in window||(delete eo.animationend.animation,delete eo.animationiteration.animation,delete eo.animationstart.animation),"TransitionEvent"in window||delete eo.transitionend.transition);function ra(n){if(Li[n])return Li[n];if(!eo[n])return n;var s=eo[n],u;for(u in s)if(s.hasOwnProperty(u)&&u in Kl)return Li[n]=s[u];return n}var oc=ra("animationend"),Vr=ra("animationiteration"),Zl=ra("animationstart"),Ql=ra("transitionend"),to=new Map,ac="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function pr(n,s){to.set(n,s),c(s,[n])}for(var hs=0;hs<ac.length;hs++){var Qa=ac[hs],lc=Qa.toLowerCase(),ud=Qa[0].toUpperCase()+Qa.slice(1);pr(lc,"on"+ud)}pr(oc,"onAnimationEnd"),pr(Vr,"onAnimationIteration"),pr(Zl,"onAnimationStart"),pr("dblclick","onDoubleClick"),pr("focusin","onFocus"),pr("focusout","onBlur"),pr(Ql,"onTransitionEnd"),p("onMouseEnter",["mouseout","mouseover"]),p("onMouseLeave",["mouseout","mouseover"]),p("onPointerEnter",["pointerout","pointerover"]),p("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var no="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uc=new Set("cancel close invalid load scroll toggle".split(" ").concat(no));function Yl(n,s,u){var f=n.type||"unknown-event";n.currentTarget=u,Zi(f,s,void 0,n),n.currentTarget=null}function Jl(n,s){s=(s&4)!==0;for(var u=0;u<n.length;u++){var f=n[u],g=f.event;f=f.listeners;e:{var v=void 0;if(s)for(var S=f.length-1;0<=S;S--){var O=f[S],U=O.instance,ee=O.currentTarget;if(O=O.listener,U!==v&&g.isPropagationStopped())break e;Yl(g,O,ee),v=U}else for(S=0;S<f.length;S++){if(O=f[S],U=O.instance,ee=O.currentTarget,O=O.listener,U!==v&&g.isPropagationStopped())break e;Yl(g,O,ee),v=U}}}if(Ki)throw n=Ln,Ki=!1,Ln=null,n}function vt(n,s){var u=s[oo];u===void 0&&(u=s[oo]=new Set);var f=n+"__bubble";u.has(f)||(cc(s,n,2,!1),u.add(f))}function Xl(n,s,u){var f=0;s&&(f|=4),cc(u,n,f,s)}var ia="_reactListening"+Math.random().toString(36).slice(2);function ro(n){if(!n[ia]){n[ia]=!0,o.forEach(function(u){u!=="selectionchange"&&(uc.has(u)||Xl(u,!1,n),Xl(u,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[ia]||(s[ia]=!0,Xl("selectionchange",!1,s))}}function cc(n,s,u,f){switch(nt(s)){case 1:var g=Nr;break;case 4:g=Ko;break;default:g=os}u=g.bind(null,s,u,n),g=void 0,!wi||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(g=!0),f?g!==void 0?n.addEventListener(s,u,{capture:!0,passive:g}):n.addEventListener(s,u,!0):g!==void 0?n.addEventListener(s,u,{passive:g}):n.addEventListener(s,u,!1)}function i(n,s,u,f,g){var v=f;if((s&1)===0&&(s&2)===0&&f!==null)e:for(;;){if(f===null)return;var S=f.tag;if(S===3||S===4){var O=f.stateNode.containerInfo;if(O===g||O.nodeType===8&&O.parentNode===g)break;if(S===4)for(S=f.return;S!==null;){var U=S.tag;if((U===3||U===4)&&(U=S.stateNode.containerInfo,U===g||U.nodeType===8&&U.parentNode===g))return;S=S.return}for(;O!==null;){if(S=fs(O),S===null)return;if(U=S.tag,U===5||U===6){f=v=S;continue e}O=O.parentNode}}f=f.return}Vs(function(){var ee=v,ce=js(u),de=[];e:{var ue=to.get(n);if(ue!==void 0){var Ie=us,Re=n;switch(n){case"keypress":if(ls(u)===0)break e;case"keydown":case"keyup":Ie=ft;break;case"focusin":Re="focus",Ie=Ht;break;case"focusout":Re="blur",Ie=Ht;break;case"beforeblur":case"afterblur":Ie=Ht;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ie=Ws;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ie=$s;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ie=Yn;break;case oc:case Vr:case Zl:Ie=za;break;case Ql:Ie=Gs;break;case"scroll":Ie=Bs;break;case"wheel":Ie=sd;break;case"copy":case"cut":case"paste":Ie=h;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ie=Fn}var Le=(s&4)!==0,Ft=!Le&&n==="scroll",K=Le?ue!==null?ue+"Capture":null:ue;Le=[];for(var W=ee,Q;W!==null;){Q=W;var me=Q.stateNode;if(Q.tag===5&&me!==null&&(Q=me,K!==null&&(me=Gi(W,K),me!=null&&Le.push(l(W,me,Q)))),Ft)break;W=W.return}0<Le.length&&(ue=new Ie(ue,Re,null,u,ce),de.push({event:ue,listeners:Le}))}}if((s&7)===0){e:{if(ue=n==="mouseover"||n==="pointerover",Ie=n==="mouseout"||n==="pointerout",ue&&u!==_i&&(Re=u.relatedTarget||u.fromElement)&&(fs(Re)||Re[_t]))break e;if((Ie||ue)&&(ue=ce.window===ce?ce:(ue=ce.ownerDocument)?ue.defaultView||ue.parentWindow:window,Ie?(Re=u.relatedTarget||u.toElement,Ie=ee,Re=Re?fs(Re):null,Re!==null&&(Ft=qn(Re),Re!==Ft||Re.tag!==5&&Re.tag!==6)&&(Re=null)):(Ie=null,Re=ee),Ie!==Re)){if(Le=Ws,me="onMouseLeave",K="onMouseEnter",W="mouse",(n==="pointerout"||n==="pointerover")&&(Le=Fn,me="onPointerLeave",K="onPointerEnter",W="pointer"),Ft=Ie==null?ue:ms(Ie),Q=Re==null?ue:ms(Re),ue=new Le(me,W+"leave",Ie,u,ce),ue.target=Ft,ue.relatedTarget=Q,me=null,fs(ce)===ee&&(Le=new Le(K,W+"enter",Re,u,ce),Le.target=Q,Le.relatedTarget=Ft,me=Le),Ft=me,Ie&&Re)t:{for(Le=Ie,K=Re,W=0,Q=Le;Q;Q=m(Q))W++;for(Q=0,me=K;me;me=m(me))Q++;for(;0<W-Q;)Le=m(Le),W--;for(;0<Q-W;)K=m(K),Q--;for(;W--;){if(Le===K||K!==null&&Le===K.alternate)break t;Le=m(Le),K=m(K)}Le=null}else Le=null;Ie!==null&&E(de,ue,Ie,Le,!1),Re!==null&&Ft!==null&&E(de,Ft,Re,Le,!0)}}e:{if(ue=ee?ms(ee):window,Ie=ue.nodeName&&ue.nodeName.toLowerCase(),Ie==="select"||Ie==="input"&&ue.type==="file")var De=ld;else if(tc(ue))if(Or)De=Wl;else{De=Ys;var Ue=qa}else(Ie=ue.nodeName)&&Ie.toLowerCase()==="input"&&(ue.type==="checkbox"||ue.type==="radio")&&(De=Ga);if(De&&(De=De(n,ee))){Ba(de,De,u,ce);break e}Ue&&Ue(n,ue,ee),n==="focusout"&&(Ue=ue._wrapperState)&&Ue.controlled&&ue.type==="number"&&kt(ue,"number",ue.value)}switch(Ue=ee?ms(ee):window,n){case"focusin":(tc(Ue)||Ue.contentEditable==="true")&&(Js=Ue,Xs=ee,na=null);break;case"focusout":na=Xs=Js=null;break;case"mousedown":Za=!0;break;case"contextmenu":case"mouseup":case"dragend":Za=!1,sc(de,u,ce);break;case"selectionchange":if(Ka)break;case"keydown":case"keyup":sc(de,u,ce)}var Be;if(bi)e:{switch(n){case"compositionstart":var Ke="onCompositionStart";break e;case"compositionend":Ke="onCompositionEnd";break e;case"compositionupdate":Ke="onCompositionUpdate";break e}Ke=void 0}else ti?Zs(n,u)&&(Ke="onCompositionEnd"):n==="keydown"&&u.keyCode===229&&(Ke="onCompositionStart");Ke&&(Xu&&u.locale!=="ko"&&(ti||Ke!=="onCompositionStart"?Ke==="onCompositionEnd"&&ti&&(Be=Zo()):(jn=ce,nn="value"in jn?jn.value:jn.textContent,ti=!0)),Ue=d(ee,Ke),0<Ue.length&&(Ke=new I(Ke,n,null,u,ce),de.push({event:Ke,listeners:Ue}),Be?Ke.data=Be:(Be=Hl(u),Be!==null&&(Ke.data=Be)))),(Be=ei?od(n,u):Ai(n,u))&&(ee=d(ee,"onBeforeInput"),0<ee.length&&(ce=new I("onBeforeInput","beforeinput",null,u,ce),de.push({event:ce,listeners:ee}),ce.data=Be))}Jl(de,s)})}function l(n,s,u){return{instance:n,listener:s,currentTarget:u}}function d(n,s){for(var u=s+"Capture",f=[];n!==null;){var g=n,v=g.stateNode;g.tag===5&&v!==null&&(g=v,v=Gi(n,u),v!=null&&f.unshift(l(n,v,g)),v=Gi(n,s),v!=null&&f.push(l(n,v,g))),n=n.return}return f}function m(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function E(n,s,u,f,g){for(var v=s._reactName,S=[];u!==null&&u!==f;){var O=u,U=O.alternate,ee=O.stateNode;if(U!==null&&U===f)break;O.tag===5&&ee!==null&&(O=ee,g?(U=Gi(u,v),U!=null&&S.unshift(l(u,U,O))):g||(U=Gi(u,v),U!=null&&S.push(l(u,U,O)))),u=u.return}S.length!==0&&n.push({event:s,listeners:S})}var P=/\r\n?/g,F=/\u0000|\uFFFD/g;function G(n){return(typeof n=="string"?n:""+n).replace(P,`
`).replace(F,"")}function J(n,s,u){if(s=G(s),G(n)!==s&&u)throw Error(t(425))}function ae(){}var xe=null,Fe=null;function et(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Yt=typeof setTimeout=="function"?setTimeout:void 0,Wt=typeof clearTimeout=="function"?clearTimeout:void 0,Un=typeof Promise=="function"?Promise:void 0,En=typeof queueMicrotask=="function"?queueMicrotask:typeof Un<"u"?function(n){return Un.resolve(null).then(n).catch(io)}:Yt;function io(n){setTimeout(function(){throw n})}function eu(n,s){var u=s,f=0;do{var g=u.nextSibling;if(n.removeChild(u),g&&g.nodeType===8)if(u=g.data,u==="/$"){if(f===0){n.removeChild(g),vn(s);return}f--}else u!=="$"&&u!=="$?"&&u!=="$!"||f++;u=g}while(u);vn(s)}function Di(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function hc(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var u=n.data;if(u==="$"||u==="$!"||u==="$?"){if(s===0)return n;s--}else u==="/$"&&s++}n=n.previousSibling}return null}var ds=Math.random().toString(36).slice(2),Fr="__reactFiber$"+ds,so="__reactProps$"+ds,_t="__reactContainer$"+ds,oo="__reactEvents$"+ds,cd="__reactListeners$"+ds,hd="__reactHandles$"+ds;function fs(n){var s=n[Fr];if(s)return s;for(var u=n.parentNode;u;){if(s=u[_t]||u[Fr]){if(u=s.alternate,s.child!==null||u!==null&&u.child!==null)for(n=hc(n);n!==null;){if(u=n[Fr])return u;n=hc(n)}return s}n=u,u=n.parentNode}return null}function ps(n){return n=n[Fr]||n[_t],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function ms(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function Ya(n){return n[so]||null}var dd=[],Ja=-1;function ao(n){return{current:n}}function St(n){0>Ja||(n.current=dd[Ja],dd[Ja]=null,Ja--)}function Et(n,s){Ja++,dd[Ja]=n.current,n.current=s}var lo={},Tn=ao(lo),Jn=ao(!1),sa=lo;function Xa(n,s){var u=n.type.contextTypes;if(!u)return lo;var f=n.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===s)return f.__reactInternalMemoizedMaskedChildContext;var g={},v;for(v in u)g[v]=s[v];return f&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=g),g}function Xn(n){return n=n.childContextTypes,n!=null}function dc(){St(Jn),St(Tn)}function ym(n,s,u){if(Tn.current!==lo)throw Error(t(168));Et(Tn,s),Et(Jn,u)}function vm(n,s,u){var f=n.stateNode;if(s=s.childContextTypes,typeof f.getChildContext!="function")return u;f=f.getChildContext();for(var g in f)if(!(g in s))throw Error(t(108,Xe(n)||"Unknown",g));return se({},u,f)}function fc(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||lo,sa=Tn.current,Et(Tn,n),Et(Jn,Jn.current),!0}function wm(n,s,u){var f=n.stateNode;if(!f)throw Error(t(169));u?(n=vm(n,s,sa),f.__reactInternalMemoizedMergedChildContext=n,St(Jn),St(Tn),Et(Tn,n)):St(Jn),Et(Jn,u)}var gs=null,pc=!1,fd=!1;function xm(n){gs===null?gs=[n]:gs.push(n)}function Gw(n){pc=!0,xm(n)}function uo(){if(!fd&&gs!==null){fd=!0;var n=0,s=tt;try{var u=gs;for(tt=1;n<u.length;n++){var f=u[n];do f=f(!0);while(f!==null)}gs=null,pc=!1}catch(g){throw gs!==null&&(gs=gs.slice(n+1)),$o(Fs,uo),g}finally{tt=s,fd=!1}}return null}var el=[],tl=0,mc=null,gc=0,zr=[],Ur=0,oa=null,_s=1,ys="";function aa(n,s){el[tl++]=gc,el[tl++]=mc,mc=n,gc=s}function Em(n,s,u){zr[Ur++]=_s,zr[Ur++]=ys,zr[Ur++]=oa,oa=n;var f=_s;n=ys;var g=32-Ze(f)-1;f&=~(1<<g),u+=1;var v=32-Ze(s)+g;if(30<v){var S=g-g%5;v=(f&(1<<S)-1).toString(32),f>>=S,g-=S,_s=1<<32-Ze(s)+g|u<<g|f,ys=v+n}else _s=1<<v|u<<g|f,ys=n}function pd(n){n.return!==null&&(aa(n,1),Em(n,1,0))}function md(n){for(;n===mc;)mc=el[--tl],el[tl]=null,gc=el[--tl],el[tl]=null;for(;n===oa;)oa=zr[--Ur],zr[Ur]=null,ys=zr[--Ur],zr[Ur]=null,_s=zr[--Ur],zr[Ur]=null}var mr=null,gr=null,Nt=!1,ri=null;function Tm(n,s){var u=$r(5,null,null,0);u.elementType="DELETED",u.stateNode=s,u.return=n,s=n.deletions,s===null?(n.deletions=[u],n.flags|=16):s.push(u)}function Im(n,s){switch(n.tag){case 5:var u=n.type;return s=s.nodeType!==1||u.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,mr=n,gr=Di(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,mr=n,gr=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(u=oa!==null?{id:_s,overflow:ys}:null,n.memoizedState={dehydrated:s,treeContext:u,retryLane:1073741824},u=$r(18,null,null,0),u.stateNode=s,u.return=n,n.child=u,mr=n,gr=null,!0):!1;default:return!1}}function gd(n){return(n.mode&1)!==0&&(n.flags&128)===0}function _d(n){if(Nt){var s=gr;if(s){var u=s;if(!Im(n,s)){if(gd(n))throw Error(t(418));s=Di(u.nextSibling);var f=mr;s&&Im(n,s)?Tm(f,u):(n.flags=n.flags&-4097|2,Nt=!1,mr=n)}}else{if(gd(n))throw Error(t(418));n.flags=n.flags&-4097|2,Nt=!1,mr=n}}}function Sm(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;mr=n}function _c(n){if(n!==mr)return!1;if(!Nt)return Sm(n),Nt=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!et(n.type,n.memoizedProps)),s&&(s=gr)){if(gd(n))throw Pm(),Error(t(418));for(;s;)Tm(n,s),s=Di(s.nextSibling)}if(Sm(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var u=n.data;if(u==="/$"){if(s===0){gr=Di(n.nextSibling);break e}s--}else u!=="$"&&u!=="$!"&&u!=="$?"||s++}n=n.nextSibling}gr=null}}else gr=mr?Di(n.stateNode.nextSibling):null;return!0}function Pm(){for(var n=gr;n;)n=Di(n.nextSibling)}function nl(){gr=mr=null,Nt=!1}function yd(n){ri===null?ri=[n]:ri.push(n)}var Kw=Oe.ReactCurrentBatchConfig;function tu(n,s,u){if(n=u.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var f=u.stateNode}if(!f)throw Error(t(147,n));var g=f,v=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===v?s.ref:(s=function(S){var O=g.refs;S===null?delete O[v]:O[v]=S},s._stringRef=v,s)}if(typeof n!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,n))}return n}function yc(n,s){throw n=Object.prototype.toString.call(s),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function km(n){var s=n._init;return s(n._payload)}function Cm(n){function s(K,W){if(n){var Q=K.deletions;Q===null?(K.deletions=[W],K.flags|=16):Q.push(W)}}function u(K,W){if(!n)return null;for(;W!==null;)s(K,W),W=W.sibling;return null}function f(K,W){for(K=new Map;W!==null;)W.key!==null?K.set(W.key,W):K.set(W.index,W),W=W.sibling;return K}function g(K,W){return K=yo(K,W),K.index=0,K.sibling=null,K}function v(K,W,Q){return K.index=Q,n?(Q=K.alternate,Q!==null?(Q=Q.index,Q<W?(K.flags|=2,W):Q):(K.flags|=2,W)):(K.flags|=1048576,W)}function S(K){return n&&K.alternate===null&&(K.flags|=2),K}function O(K,W,Q,me){return W===null||W.tag!==6?(W=cf(Q,K.mode,me),W.return=K,W):(W=g(W,Q),W.return=K,W)}function U(K,W,Q,me){var De=Q.type;return De===V?ce(K,W,Q.props.children,me,Q.key):W!==null&&(W.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===pe&&km(De)===W.type)?(me=g(W,Q.props),me.ref=tu(K,W,Q),me.return=K,me):(me=Bc(Q.type,Q.key,Q.props,null,K.mode,me),me.ref=tu(K,W,Q),me.return=K,me)}function ee(K,W,Q,me){return W===null||W.tag!==4||W.stateNode.containerInfo!==Q.containerInfo||W.stateNode.implementation!==Q.implementation?(W=hf(Q,K.mode,me),W.return=K,W):(W=g(W,Q.children||[]),W.return=K,W)}function ce(K,W,Q,me,De){return W===null||W.tag!==7?(W=ma(Q,K.mode,me,De),W.return=K,W):(W=g(W,Q),W.return=K,W)}function de(K,W,Q){if(typeof W=="string"&&W!==""||typeof W=="number")return W=cf(""+W,K.mode,Q),W.return=K,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case ke:return Q=Bc(W.type,W.key,W.props,null,K.mode,Q),Q.ref=tu(K,null,W),Q.return=K,Q;case fe:return W=hf(W,K.mode,Q),W.return=K,W;case pe:var me=W._init;return de(K,me(W._payload),Q)}if(Ct(W)||Ce(W))return W=ma(W,K.mode,Q,null),W.return=K,W;yc(K,W)}return null}function ue(K,W,Q,me){var De=W!==null?W.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number")return De!==null?null:O(K,W,""+Q,me);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case ke:return Q.key===De?U(K,W,Q,me):null;case fe:return Q.key===De?ee(K,W,Q,me):null;case pe:return De=Q._init,ue(K,W,De(Q._payload),me)}if(Ct(Q)||Ce(Q))return De!==null?null:ce(K,W,Q,me,null);yc(K,Q)}return null}function Ie(K,W,Q,me,De){if(typeof me=="string"&&me!==""||typeof me=="number")return K=K.get(Q)||null,O(W,K,""+me,De);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case ke:return K=K.get(me.key===null?Q:me.key)||null,U(W,K,me,De);case fe:return K=K.get(me.key===null?Q:me.key)||null,ee(W,K,me,De);case pe:var Ue=me._init;return Ie(K,W,Q,Ue(me._payload),De)}if(Ct(me)||Ce(me))return K=K.get(Q)||null,ce(W,K,me,De,null);yc(W,me)}return null}function Re(K,W,Q,me){for(var De=null,Ue=null,Be=W,Ke=W=0,on=null;Be!==null&&Ke<Q.length;Ke++){Be.index>Ke?(on=Be,Be=null):on=Be.sibling;var pt=ue(K,Be,Q[Ke],me);if(pt===null){Be===null&&(Be=on);break}n&&Be&&pt.alternate===null&&s(K,Be),W=v(pt,W,Ke),Ue===null?De=pt:Ue.sibling=pt,Ue=pt,Be=on}if(Ke===Q.length)return u(K,Be),Nt&&aa(K,Ke),De;if(Be===null){for(;Ke<Q.length;Ke++)Be=de(K,Q[Ke],me),Be!==null&&(W=v(Be,W,Ke),Ue===null?De=Be:Ue.sibling=Be,Ue=Be);return Nt&&aa(K,Ke),De}for(Be=f(K,Be);Ke<Q.length;Ke++)on=Ie(Be,K,Ke,Q[Ke],me),on!==null&&(n&&on.alternate!==null&&Be.delete(on.key===null?Ke:on.key),W=v(on,W,Ke),Ue===null?De=on:Ue.sibling=on,Ue=on);return n&&Be.forEach(function(vo){return s(K,vo)}),Nt&&aa(K,Ke),De}function Le(K,W,Q,me){var De=Ce(Q);if(typeof De!="function")throw Error(t(150));if(Q=De.call(Q),Q==null)throw Error(t(151));for(var Ue=De=null,Be=W,Ke=W=0,on=null,pt=Q.next();Be!==null&&!pt.done;Ke++,pt=Q.next()){Be.index>Ke?(on=Be,Be=null):on=Be.sibling;var vo=ue(K,Be,pt.value,me);if(vo===null){Be===null&&(Be=on);break}n&&Be&&vo.alternate===null&&s(K,Be),W=v(vo,W,Ke),Ue===null?De=vo:Ue.sibling=vo,Ue=vo,Be=on}if(pt.done)return u(K,Be),Nt&&aa(K,Ke),De;if(Be===null){for(;!pt.done;Ke++,pt=Q.next())pt=de(K,pt.value,me),pt!==null&&(W=v(pt,W,Ke),Ue===null?De=pt:Ue.sibling=pt,Ue=pt);return Nt&&aa(K,Ke),De}for(Be=f(K,Be);!pt.done;Ke++,pt=Q.next())pt=Ie(Be,K,Ke,pt.value,me),pt!==null&&(n&&pt.alternate!==null&&Be.delete(pt.key===null?Ke:pt.key),W=v(pt,W,Ke),Ue===null?De=pt:Ue.sibling=pt,Ue=pt);return n&&Be.forEach(function(kx){return s(K,kx)}),Nt&&aa(K,Ke),De}function Ft(K,W,Q,me){if(typeof Q=="object"&&Q!==null&&Q.type===V&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case ke:e:{for(var De=Q.key,Ue=W;Ue!==null;){if(Ue.key===De){if(De=Q.type,De===V){if(Ue.tag===7){u(K,Ue.sibling),W=g(Ue,Q.props.children),W.return=K,K=W;break e}}else if(Ue.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===pe&&km(De)===Ue.type){u(K,Ue.sibling),W=g(Ue,Q.props),W.ref=tu(K,Ue,Q),W.return=K,K=W;break e}u(K,Ue);break}else s(K,Ue);Ue=Ue.sibling}Q.type===V?(W=ma(Q.props.children,K.mode,me,Q.key),W.return=K,K=W):(me=Bc(Q.type,Q.key,Q.props,null,K.mode,me),me.ref=tu(K,W,Q),me.return=K,K=me)}return S(K);case fe:e:{for(Ue=Q.key;W!==null;){if(W.key===Ue)if(W.tag===4&&W.stateNode.containerInfo===Q.containerInfo&&W.stateNode.implementation===Q.implementation){u(K,W.sibling),W=g(W,Q.children||[]),W.return=K,K=W;break e}else{u(K,W);break}else s(K,W);W=W.sibling}W=hf(Q,K.mode,me),W.return=K,K=W}return S(K);case pe:return Ue=Q._init,Ft(K,W,Ue(Q._payload),me)}if(Ct(Q))return Re(K,W,Q,me);if(Ce(Q))return Le(K,W,Q,me);yc(K,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"?(Q=""+Q,W!==null&&W.tag===6?(u(K,W.sibling),W=g(W,Q),W.return=K,K=W):(u(K,W),W=cf(Q,K.mode,me),W.return=K,K=W),S(K)):u(K,W)}return Ft}var rl=Cm(!0),bm=Cm(!1),vc=ao(null),wc=null,il=null,vd=null;function wd(){vd=il=wc=null}function xd(n){var s=vc.current;St(vc),n._currentValue=s}function Ed(n,s,u){for(;n!==null;){var f=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,f!==null&&(f.childLanes|=s)):f!==null&&(f.childLanes&s)!==s&&(f.childLanes|=s),n===u)break;n=n.return}}function sl(n,s){wc=n,vd=il=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&s)!==0&&(er=!0),n.firstContext=null)}function Br(n){var s=n._currentValue;if(vd!==n)if(n={context:n,memoizedValue:s,next:null},il===null){if(wc===null)throw Error(t(308));il=n,wc.dependencies={lanes:0,firstContext:n}}else il=il.next=n;return s}var la=null;function Td(n){la===null?la=[n]:la.push(n)}function Am(n,s,u,f){var g=s.interleaved;return g===null?(u.next=u,Td(s)):(u.next=g.next,g.next=u),s.interleaved=u,vs(n,f)}function vs(n,s){n.lanes|=s;var u=n.alternate;for(u!==null&&(u.lanes|=s),u=n,n=n.return;n!==null;)n.childLanes|=s,u=n.alternate,u!==null&&(u.childLanes|=s),u=n,n=n.return;return u.tag===3?u.stateNode:null}var co=!1;function Id(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Nm(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function ws(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function ho(n,s,u){var f=n.updateQueue;if(f===null)return null;if(f=f.shared,(ht&2)!==0){var g=f.pending;return g===null?s.next=s:(s.next=g.next,g.next=s),f.pending=s,vs(n,u)}return g=f.interleaved,g===null?(s.next=s,Td(f)):(s.next=g.next,g.next=s),f.interleaved=s,vs(n,u)}function xc(n,s,u){if(s=s.updateQueue,s!==null&&(s=s.shared,(u&4194240)!==0)){var f=s.lanes;f&=n.pendingLanes,u|=f,s.lanes=u,ur(n,u)}}function Rm(n,s){var u=n.updateQueue,f=n.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var g=null,v=null;if(u=u.firstBaseUpdate,u!==null){do{var S={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};v===null?g=v=S:v=v.next=S,u=u.next}while(u!==null);v===null?g=v=s:v=v.next=s}else g=v=s;u={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:f.shared,effects:f.effects},n.updateQueue=u;return}n=u.lastBaseUpdate,n===null?u.firstBaseUpdate=s:n.next=s,u.lastBaseUpdate=s}function Ec(n,s,u,f){var g=n.updateQueue;co=!1;var v=g.firstBaseUpdate,S=g.lastBaseUpdate,O=g.shared.pending;if(O!==null){g.shared.pending=null;var U=O,ee=U.next;U.next=null,S===null?v=ee:S.next=ee,S=U;var ce=n.alternate;ce!==null&&(ce=ce.updateQueue,O=ce.lastBaseUpdate,O!==S&&(O===null?ce.firstBaseUpdate=ee:O.next=ee,ce.lastBaseUpdate=U))}if(v!==null){var de=g.baseState;S=0,ce=ee=U=null,O=v;do{var ue=O.lane,Ie=O.eventTime;if((f&ue)===ue){ce!==null&&(ce=ce.next={eventTime:Ie,lane:0,tag:O.tag,payload:O.payload,callback:O.callback,next:null});e:{var Re=n,Le=O;switch(ue=s,Ie=u,Le.tag){case 1:if(Re=Le.payload,typeof Re=="function"){de=Re.call(Ie,de,ue);break e}de=Re;break e;case 3:Re.flags=Re.flags&-65537|128;case 0:if(Re=Le.payload,ue=typeof Re=="function"?Re.call(Ie,de,ue):Re,ue==null)break e;de=se({},de,ue);break e;case 2:co=!0}}O.callback!==null&&O.lane!==0&&(n.flags|=64,ue=g.effects,ue===null?g.effects=[O]:ue.push(O))}else Ie={eventTime:Ie,lane:ue,tag:O.tag,payload:O.payload,callback:O.callback,next:null},ce===null?(ee=ce=Ie,U=de):ce=ce.next=Ie,S|=ue;if(O=O.next,O===null){if(O=g.shared.pending,O===null)break;ue=O,O=ue.next,ue.next=null,g.lastBaseUpdate=ue,g.shared.pending=null}}while(!0);if(ce===null&&(U=de),g.baseState=U,g.firstBaseUpdate=ee,g.lastBaseUpdate=ce,s=g.shared.interleaved,s!==null){g=s;do S|=g.lane,g=g.next;while(g!==s)}else v===null&&(g.shared.lanes=0);ha|=S,n.lanes=S,n.memoizedState=de}}function Lm(n,s,u){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var f=n[s],g=f.callback;if(g!==null){if(f.callback=null,f=u,typeof g!="function")throw Error(t(191,g));g.call(f)}}}var nu={},Mi=ao(nu),ru=ao(nu),iu=ao(nu);function ua(n){if(n===nu)throw Error(t(174));return n}function Sd(n,s){switch(Et(iu,s),Et(ru,n),Et(Mi,nu),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:qi(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=qi(s,n)}St(Mi),Et(Mi,s)}function ol(){St(Mi),St(ru),St(iu)}function Dm(n){ua(iu.current);var s=ua(Mi.current),u=qi(s,n.type);s!==u&&(Et(ru,n),Et(Mi,u))}function Pd(n){ru.current===n&&(St(Mi),St(ru))}var Lt=ao(0);function Tc(n){for(var s=n;s!==null;){if(s.tag===13){var u=s.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var kd=[];function Cd(){for(var n=0;n<kd.length;n++)kd[n]._workInProgressVersionPrimary=null;kd.length=0}var Ic=Oe.ReactCurrentDispatcher,bd=Oe.ReactCurrentBatchConfig,ca=0,Dt=null,Jt=null,rn=null,Sc=!1,su=!1,ou=0,Zw=0;function In(){throw Error(t(321))}function Ad(n,s){if(s===null)return!1;for(var u=0;u<s.length&&u<n.length;u++)if(!fr(n[u],s[u]))return!1;return!0}function Nd(n,s,u,f,g,v){if(ca=v,Dt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Ic.current=n===null||n.memoizedState===null?Xw:ex,n=u(f,g),su){v=0;do{if(su=!1,ou=0,25<=v)throw Error(t(301));v+=1,rn=Jt=null,s.updateQueue=null,Ic.current=tx,n=u(f,g)}while(su)}if(Ic.current=Cc,s=Jt!==null&&Jt.next!==null,ca=0,rn=Jt=Dt=null,Sc=!1,s)throw Error(t(300));return n}function Rd(){var n=ou!==0;return ou=0,n}function Oi(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rn===null?Dt.memoizedState=rn=n:rn=rn.next=n,rn}function Hr(){if(Jt===null){var n=Dt.alternate;n=n!==null?n.memoizedState:null}else n=Jt.next;var s=rn===null?Dt.memoizedState:rn.next;if(s!==null)rn=s,Jt=n;else{if(n===null)throw Error(t(310));Jt=n,n={memoizedState:Jt.memoizedState,baseState:Jt.baseState,baseQueue:Jt.baseQueue,queue:Jt.queue,next:null},rn===null?Dt.memoizedState=rn=n:rn=rn.next=n}return rn}function au(n,s){return typeof s=="function"?s(n):s}function Ld(n){var s=Hr(),u=s.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=n;var f=Jt,g=f.baseQueue,v=u.pending;if(v!==null){if(g!==null){var S=g.next;g.next=v.next,v.next=S}f.baseQueue=g=v,u.pending=null}if(g!==null){v=g.next,f=f.baseState;var O=S=null,U=null,ee=v;do{var ce=ee.lane;if((ca&ce)===ce)U!==null&&(U=U.next={lane:0,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),f=ee.hasEagerState?ee.eagerState:n(f,ee.action);else{var de={lane:ce,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null};U===null?(O=U=de,S=f):U=U.next=de,Dt.lanes|=ce,ha|=ce}ee=ee.next}while(ee!==null&&ee!==v);U===null?S=f:U.next=O,fr(f,s.memoizedState)||(er=!0),s.memoizedState=f,s.baseState=S,s.baseQueue=U,u.lastRenderedState=f}if(n=u.interleaved,n!==null){g=n;do v=g.lane,Dt.lanes|=v,ha|=v,g=g.next;while(g!==n)}else g===null&&(u.lanes=0);return[s.memoizedState,u.dispatch]}function Dd(n){var s=Hr(),u=s.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=n;var f=u.dispatch,g=u.pending,v=s.memoizedState;if(g!==null){u.pending=null;var S=g=g.next;do v=n(v,S.action),S=S.next;while(S!==g);fr(v,s.memoizedState)||(er=!0),s.memoizedState=v,s.baseQueue===null&&(s.baseState=v),u.lastRenderedState=v}return[v,f]}function Mm(){}function Om(n,s){var u=Dt,f=Hr(),g=s(),v=!fr(f.memoizedState,g);if(v&&(f.memoizedState=g,er=!0),f=f.queue,Md(Fm.bind(null,u,f,n),[n]),f.getSnapshot!==s||v||rn!==null&&rn.memoizedState.tag&1){if(u.flags|=2048,lu(9,Vm.bind(null,u,f,g,s),void 0,null),sn===null)throw Error(t(349));(ca&30)!==0||jm(u,s,g)}return g}function jm(n,s,u){n.flags|=16384,n={getSnapshot:s,value:u},s=Dt.updateQueue,s===null?(s={lastEffect:null,stores:null},Dt.updateQueue=s,s.stores=[n]):(u=s.stores,u===null?s.stores=[n]:u.push(n))}function Vm(n,s,u,f){s.value=u,s.getSnapshot=f,zm(s)&&Um(n)}function Fm(n,s,u){return u(function(){zm(s)&&Um(n)})}function zm(n){var s=n.getSnapshot;n=n.value;try{var u=s();return!fr(n,u)}catch{return!0}}function Um(n){var s=vs(n,1);s!==null&&ai(s,n,1,-1)}function Bm(n){var s=Oi();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:au,lastRenderedState:n},s.queue=n,n=n.dispatch=Jw.bind(null,Dt,n),[s.memoizedState,n]}function lu(n,s,u,f){return n={tag:n,create:s,destroy:u,deps:f,next:null},s=Dt.updateQueue,s===null?(s={lastEffect:null,stores:null},Dt.updateQueue=s,s.lastEffect=n.next=n):(u=s.lastEffect,u===null?s.lastEffect=n.next=n:(f=u.next,u.next=n,n.next=f,s.lastEffect=n)),n}function Hm(){return Hr().memoizedState}function Pc(n,s,u,f){var g=Oi();Dt.flags|=n,g.memoizedState=lu(1|s,u,void 0,f===void 0?null:f)}function kc(n,s,u,f){var g=Hr();f=f===void 0?null:f;var v=void 0;if(Jt!==null){var S=Jt.memoizedState;if(v=S.destroy,f!==null&&Ad(f,S.deps)){g.memoizedState=lu(s,u,v,f);return}}Dt.flags|=n,g.memoizedState=lu(1|s,u,v,f)}function Wm(n,s){return Pc(8390656,8,n,s)}function Md(n,s){return kc(2048,8,n,s)}function $m(n,s){return kc(4,2,n,s)}function qm(n,s){return kc(4,4,n,s)}function Gm(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Km(n,s,u){return u=u!=null?u.concat([n]):null,kc(4,4,Gm.bind(null,s,n),u)}function Od(){}function Zm(n,s){var u=Hr();s=s===void 0?null:s;var f=u.memoizedState;return f!==null&&s!==null&&Ad(s,f[1])?f[0]:(u.memoizedState=[n,s],n)}function Qm(n,s){var u=Hr();s=s===void 0?null:s;var f=u.memoizedState;return f!==null&&s!==null&&Ad(s,f[1])?f[0]:(n=n(),u.memoizedState=[n,s],n)}function Ym(n,s,u){return(ca&21)===0?(n.baseState&&(n.baseState=!1,er=!0),n.memoizedState=u):(fr(u,s)||(u=Go(),Dt.lanes|=u,ha|=u,n.baseState=!0),s)}function Qw(n,s){var u=tt;tt=u!==0&&4>u?u:4,n(!0);var f=bd.transition;bd.transition={};try{n(!1),s()}finally{tt=u,bd.transition=f}}function Jm(){return Hr().memoizedState}function Yw(n,s,u){var f=go(n);if(u={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null},Xm(n))eg(s,u);else if(u=Am(n,s,u,f),u!==null){var g=Hn();ai(u,n,f,g),tg(u,s,f)}}function Jw(n,s,u){var f=go(n),g={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null};if(Xm(n))eg(s,g);else{var v=n.alternate;if(n.lanes===0&&(v===null||v.lanes===0)&&(v=s.lastRenderedReducer,v!==null))try{var S=s.lastRenderedState,O=v(S,u);if(g.hasEagerState=!0,g.eagerState=O,fr(O,S)){var U=s.interleaved;U===null?(g.next=g,Td(s)):(g.next=U.next,U.next=g),s.interleaved=g;return}}catch{}finally{}u=Am(n,s,g,f),u!==null&&(g=Hn(),ai(u,n,f,g),tg(u,s,f))}}function Xm(n){var s=n.alternate;return n===Dt||s!==null&&s===Dt}function eg(n,s){su=Sc=!0;var u=n.pending;u===null?s.next=s:(s.next=u.next,u.next=s),n.pending=s}function tg(n,s,u){if((u&4194240)!==0){var f=s.lanes;f&=n.pendingLanes,u|=f,s.lanes=u,ur(n,u)}}var Cc={readContext:Br,useCallback:In,useContext:In,useEffect:In,useImperativeHandle:In,useInsertionEffect:In,useLayoutEffect:In,useMemo:In,useReducer:In,useRef:In,useState:In,useDebugValue:In,useDeferredValue:In,useTransition:In,useMutableSource:In,useSyncExternalStore:In,useId:In,unstable_isNewReconciler:!1},Xw={readContext:Br,useCallback:function(n,s){return Oi().memoizedState=[n,s===void 0?null:s],n},useContext:Br,useEffect:Wm,useImperativeHandle:function(n,s,u){return u=u!=null?u.concat([n]):null,Pc(4194308,4,Gm.bind(null,s,n),u)},useLayoutEffect:function(n,s){return Pc(4194308,4,n,s)},useInsertionEffect:function(n,s){return Pc(4,2,n,s)},useMemo:function(n,s){var u=Oi();return s=s===void 0?null:s,n=n(),u.memoizedState=[n,s],n},useReducer:function(n,s,u){var f=Oi();return s=u!==void 0?u(s):s,f.memoizedState=f.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},f.queue=n,n=n.dispatch=Yw.bind(null,Dt,n),[f.memoizedState,n]},useRef:function(n){var s=Oi();return n={current:n},s.memoizedState=n},useState:Bm,useDebugValue:Od,useDeferredValue:function(n){return Oi().memoizedState=n},useTransition:function(){var n=Bm(!1),s=n[0];return n=Qw.bind(null,n[1]),Oi().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,u){var f=Dt,g=Oi();if(Nt){if(u===void 0)throw Error(t(407));u=u()}else{if(u=s(),sn===null)throw Error(t(349));(ca&30)!==0||jm(f,s,u)}g.memoizedState=u;var v={value:u,getSnapshot:s};return g.queue=v,Wm(Fm.bind(null,f,v,n),[n]),f.flags|=2048,lu(9,Vm.bind(null,f,v,u,s),void 0,null),u},useId:function(){var n=Oi(),s=sn.identifierPrefix;if(Nt){var u=ys,f=_s;u=(f&~(1<<32-Ze(f)-1)).toString(32)+u,s=":"+s+"R"+u,u=ou++,0<u&&(s+="H"+u.toString(32)),s+=":"}else u=Zw++,s=":"+s+"r"+u.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},ex={readContext:Br,useCallback:Zm,useContext:Br,useEffect:Md,useImperativeHandle:Km,useInsertionEffect:$m,useLayoutEffect:qm,useMemo:Qm,useReducer:Ld,useRef:Hm,useState:function(){return Ld(au)},useDebugValue:Od,useDeferredValue:function(n){var s=Hr();return Ym(s,Jt.memoizedState,n)},useTransition:function(){var n=Ld(au)[0],s=Hr().memoizedState;return[n,s]},useMutableSource:Mm,useSyncExternalStore:Om,useId:Jm,unstable_isNewReconciler:!1},tx={readContext:Br,useCallback:Zm,useContext:Br,useEffect:Md,useImperativeHandle:Km,useInsertionEffect:$m,useLayoutEffect:qm,useMemo:Qm,useReducer:Dd,useRef:Hm,useState:function(){return Dd(au)},useDebugValue:Od,useDeferredValue:function(n){var s=Hr();return Jt===null?s.memoizedState=n:Ym(s,Jt.memoizedState,n)},useTransition:function(){var n=Dd(au)[0],s=Hr().memoizedState;return[n,s]},useMutableSource:Mm,useSyncExternalStore:Om,useId:Jm,unstable_isNewReconciler:!1};function ii(n,s){if(n&&n.defaultProps){s=se({},s),n=n.defaultProps;for(var u in n)s[u]===void 0&&(s[u]=n[u]);return s}return s}function jd(n,s,u,f){s=n.memoizedState,u=u(f,s),u=u==null?s:se({},s,u),n.memoizedState=u,n.lanes===0&&(n.updateQueue.baseState=u)}var bc={isMounted:function(n){return(n=n._reactInternals)?qn(n)===n:!1},enqueueSetState:function(n,s,u){n=n._reactInternals;var f=Hn(),g=go(n),v=ws(f,g);v.payload=s,u!=null&&(v.callback=u),s=ho(n,v,g),s!==null&&(ai(s,n,g,f),xc(s,n,g))},enqueueReplaceState:function(n,s,u){n=n._reactInternals;var f=Hn(),g=go(n),v=ws(f,g);v.tag=1,v.payload=s,u!=null&&(v.callback=u),s=ho(n,v,g),s!==null&&(ai(s,n,g,f),xc(s,n,g))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var u=Hn(),f=go(n),g=ws(u,f);g.tag=2,s!=null&&(g.callback=s),s=ho(n,g,f),s!==null&&(ai(s,n,f,u),xc(s,n,f))}};function ng(n,s,u,f,g,v,S){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(f,v,S):s.prototype&&s.prototype.isPureReactComponent?!Ni(u,f)||!Ni(g,v):!0}function rg(n,s,u){var f=!1,g=lo,v=s.contextType;return typeof v=="object"&&v!==null?v=Br(v):(g=Xn(s)?sa:Tn.current,f=s.contextTypes,v=(f=f!=null)?Xa(n,g):lo),s=new s(u,v),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=bc,n.stateNode=s,s._reactInternals=n,f&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=g,n.__reactInternalMemoizedMaskedChildContext=v),s}function ig(n,s,u,f){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(u,f),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(u,f),s.state!==n&&bc.enqueueReplaceState(s,s.state,null)}function Vd(n,s,u,f){var g=n.stateNode;g.props=u,g.state=n.memoizedState,g.refs={},Id(n);var v=s.contextType;typeof v=="object"&&v!==null?g.context=Br(v):(v=Xn(s)?sa:Tn.current,g.context=Xa(n,v)),g.state=n.memoizedState,v=s.getDerivedStateFromProps,typeof v=="function"&&(jd(n,s,v,u),g.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(s=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),s!==g.state&&bc.enqueueReplaceState(g,g.state,null),Ec(n,u,g,f),g.state=n.memoizedState),typeof g.componentDidMount=="function"&&(n.flags|=4194308)}function al(n,s){try{var u="",f=s;do u+=Se(f),f=f.return;while(f);var g=u}catch(v){g=`
Error generating stack: `+v.message+`
`+v.stack}return{value:n,source:s,stack:g,digest:null}}function Fd(n,s,u){return{value:n,source:null,stack:u??null,digest:s??null}}function zd(n,s){try{console.error(s.value)}catch(u){setTimeout(function(){throw u})}}var nx=typeof WeakMap=="function"?WeakMap:Map;function sg(n,s,u){u=ws(-1,u),u.tag=3,u.payload={element:null};var f=s.value;return u.callback=function(){Oc||(Oc=!0,tf=f),zd(n,s)},u}function og(n,s,u){u=ws(-1,u),u.tag=3;var f=n.type.getDerivedStateFromError;if(typeof f=="function"){var g=s.value;u.payload=function(){return f(g)},u.callback=function(){zd(n,s)}}var v=n.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(u.callback=function(){zd(n,s),typeof f!="function"&&(po===null?po=new Set([this]):po.add(this));var S=s.stack;this.componentDidCatch(s.value,{componentStack:S!==null?S:""})}),u}function ag(n,s,u){var f=n.pingCache;if(f===null){f=n.pingCache=new nx;var g=new Set;f.set(s,g)}else g=f.get(s),g===void 0&&(g=new Set,f.set(s,g));g.has(u)||(g.add(u),n=gx.bind(null,n,s,u),s.then(n,n))}function lg(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function ug(n,s,u,f,g){return(n.mode&1)===0?(n===s?n.flags|=65536:(n.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(s=ws(-1,1),s.tag=2,ho(u,s,1))),u.lanes|=1),n):(n.flags|=65536,n.lanes=g,n)}var rx=Oe.ReactCurrentOwner,er=!1;function Bn(n,s,u,f){s.child=n===null?bm(s,null,u,f):rl(s,n.child,u,f)}function cg(n,s,u,f,g){u=u.render;var v=s.ref;return sl(s,g),f=Nd(n,s,u,f,v,g),u=Rd(),n!==null&&!er?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~g,xs(n,s,g)):(Nt&&u&&pd(s),s.flags|=1,Bn(n,s,f,g),s.child)}function hg(n,s,u,f,g){if(n===null){var v=u.type;return typeof v=="function"&&!uf(v)&&v.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(s.tag=15,s.type=v,dg(n,s,v,f,g)):(n=Bc(u.type,null,f,s,s.mode,g),n.ref=s.ref,n.return=s,s.child=n)}if(v=n.child,(n.lanes&g)===0){var S=v.memoizedProps;if(u=u.compare,u=u!==null?u:Ni,u(S,f)&&n.ref===s.ref)return xs(n,s,g)}return s.flags|=1,n=yo(v,f),n.ref=s.ref,n.return=s,s.child=n}function dg(n,s,u,f,g){if(n!==null){var v=n.memoizedProps;if(Ni(v,f)&&n.ref===s.ref)if(er=!1,s.pendingProps=f=v,(n.lanes&g)!==0)(n.flags&131072)!==0&&(er=!0);else return s.lanes=n.lanes,xs(n,s,g)}return Ud(n,s,u,f,g)}function fg(n,s,u){var f=s.pendingProps,g=f.children,v=n!==null?n.memoizedState:null;if(f.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Et(ul,_r),_r|=u;else{if((u&1073741824)===0)return n=v!==null?v.baseLanes|u:u,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,Et(ul,_r),_r|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=v!==null?v.baseLanes:u,Et(ul,_r),_r|=f}else v!==null?(f=v.baseLanes|u,s.memoizedState=null):f=u,Et(ul,_r),_r|=f;return Bn(n,s,g,u),s.child}function pg(n,s){var u=s.ref;(n===null&&u!==null||n!==null&&n.ref!==u)&&(s.flags|=512,s.flags|=2097152)}function Ud(n,s,u,f,g){var v=Xn(u)?sa:Tn.current;return v=Xa(s,v),sl(s,g),u=Nd(n,s,u,f,v,g),f=Rd(),n!==null&&!er?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~g,xs(n,s,g)):(Nt&&f&&pd(s),s.flags|=1,Bn(n,s,u,g),s.child)}function mg(n,s,u,f,g){if(Xn(u)){var v=!0;fc(s)}else v=!1;if(sl(s,g),s.stateNode===null)Nc(n,s),rg(s,u,f),Vd(s,u,f,g),f=!0;else if(n===null){var S=s.stateNode,O=s.memoizedProps;S.props=O;var U=S.context,ee=u.contextType;typeof ee=="object"&&ee!==null?ee=Br(ee):(ee=Xn(u)?sa:Tn.current,ee=Xa(s,ee));var ce=u.getDerivedStateFromProps,de=typeof ce=="function"||typeof S.getSnapshotBeforeUpdate=="function";de||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(O!==f||U!==ee)&&ig(s,S,f,ee),co=!1;var ue=s.memoizedState;S.state=ue,Ec(s,f,S,g),U=s.memoizedState,O!==f||ue!==U||Jn.current||co?(typeof ce=="function"&&(jd(s,u,ce,f),U=s.memoizedState),(O=co||ng(s,u,O,f,ue,U,ee))?(de||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(s.flags|=4194308)):(typeof S.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=f,s.memoizedState=U),S.props=f,S.state=U,S.context=ee,f=O):(typeof S.componentDidMount=="function"&&(s.flags|=4194308),f=!1)}else{S=s.stateNode,Nm(n,s),O=s.memoizedProps,ee=s.type===s.elementType?O:ii(s.type,O),S.props=ee,de=s.pendingProps,ue=S.context,U=u.contextType,typeof U=="object"&&U!==null?U=Br(U):(U=Xn(u)?sa:Tn.current,U=Xa(s,U));var Ie=u.getDerivedStateFromProps;(ce=typeof Ie=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(O!==de||ue!==U)&&ig(s,S,f,U),co=!1,ue=s.memoizedState,S.state=ue,Ec(s,f,S,g);var Re=s.memoizedState;O!==de||ue!==Re||Jn.current||co?(typeof Ie=="function"&&(jd(s,u,Ie,f),Re=s.memoizedState),(ee=co||ng(s,u,ee,f,ue,Re,U)||!1)?(ce||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(f,Re,U),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(f,Re,U)),typeof S.componentDidUpdate=="function"&&(s.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof S.componentDidUpdate!="function"||O===n.memoizedProps&&ue===n.memoizedState||(s.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||O===n.memoizedProps&&ue===n.memoizedState||(s.flags|=1024),s.memoizedProps=f,s.memoizedState=Re),S.props=f,S.state=Re,S.context=U,f=ee):(typeof S.componentDidUpdate!="function"||O===n.memoizedProps&&ue===n.memoizedState||(s.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||O===n.memoizedProps&&ue===n.memoizedState||(s.flags|=1024),f=!1)}return Bd(n,s,u,f,v,g)}function Bd(n,s,u,f,g,v){pg(n,s);var S=(s.flags&128)!==0;if(!f&&!S)return g&&wm(s,u,!1),xs(n,s,v);f=s.stateNode,rx.current=s;var O=S&&typeof u.getDerivedStateFromError!="function"?null:f.render();return s.flags|=1,n!==null&&S?(s.child=rl(s,n.child,null,v),s.child=rl(s,null,O,v)):Bn(n,s,O,v),s.memoizedState=f.state,g&&wm(s,u,!0),s.child}function gg(n){var s=n.stateNode;s.pendingContext?ym(n,s.pendingContext,s.pendingContext!==s.context):s.context&&ym(n,s.context,!1),Sd(n,s.containerInfo)}function _g(n,s,u,f,g){return nl(),yd(g),s.flags|=256,Bn(n,s,u,f),s.child}var Hd={dehydrated:null,treeContext:null,retryLane:0};function Wd(n){return{baseLanes:n,cachePool:null,transitions:null}}function yg(n,s,u){var f=s.pendingProps,g=Lt.current,v=!1,S=(s.flags&128)!==0,O;if((O=S)||(O=n!==null&&n.memoizedState===null?!1:(g&2)!==0),O?(v=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(g|=1),Et(Lt,g&1),n===null)return _d(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((s.mode&1)===0?s.lanes=1:n.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(S=f.children,n=f.fallback,v?(f=s.mode,v=s.child,S={mode:"hidden",children:S},(f&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=S):v=Hc(S,f,0,null),n=ma(n,f,u,null),v.return=s,n.return=s,v.sibling=n,s.child=v,s.child.memoizedState=Wd(u),s.memoizedState=Hd,n):$d(s,S));if(g=n.memoizedState,g!==null&&(O=g.dehydrated,O!==null))return ix(n,s,S,f,O,g,u);if(v){v=f.fallback,S=s.mode,g=n.child,O=g.sibling;var U={mode:"hidden",children:f.children};return(S&1)===0&&s.child!==g?(f=s.child,f.childLanes=0,f.pendingProps=U,s.deletions=null):(f=yo(g,U),f.subtreeFlags=g.subtreeFlags&14680064),O!==null?v=yo(O,v):(v=ma(v,S,u,null),v.flags|=2),v.return=s,f.return=s,f.sibling=v,s.child=f,f=v,v=s.child,S=n.child.memoizedState,S=S===null?Wd(u):{baseLanes:S.baseLanes|u,cachePool:null,transitions:S.transitions},v.memoizedState=S,v.childLanes=n.childLanes&~u,s.memoizedState=Hd,f}return v=n.child,n=v.sibling,f=yo(v,{mode:"visible",children:f.children}),(s.mode&1)===0&&(f.lanes=u),f.return=s,f.sibling=null,n!==null&&(u=s.deletions,u===null?(s.deletions=[n],s.flags|=16):u.push(n)),s.child=f,s.memoizedState=null,f}function $d(n,s){return s=Hc({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function Ac(n,s,u,f){return f!==null&&yd(f),rl(s,n.child,null,u),n=$d(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function ix(n,s,u,f,g,v,S){if(u)return s.flags&256?(s.flags&=-257,f=Fd(Error(t(422))),Ac(n,s,S,f)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(v=f.fallback,g=s.mode,f=Hc({mode:"visible",children:f.children},g,0,null),v=ma(v,g,S,null),v.flags|=2,f.return=s,v.return=s,f.sibling=v,s.child=f,(s.mode&1)!==0&&rl(s,n.child,null,S),s.child.memoizedState=Wd(S),s.memoizedState=Hd,v);if((s.mode&1)===0)return Ac(n,s,S,null);if(g.data==="$!"){if(f=g.nextSibling&&g.nextSibling.dataset,f)var O=f.dgst;return f=O,v=Error(t(419)),f=Fd(v,f,void 0),Ac(n,s,S,f)}if(O=(S&n.childLanes)!==0,er||O){if(f=sn,f!==null){switch(S&-S){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(f.suspendedLanes|S))!==0?0:g,g!==0&&g!==v.retryLane&&(v.retryLane=g,vs(n,g),ai(f,n,g,-1))}return lf(),f=Fd(Error(t(421))),Ac(n,s,S,f)}return g.data==="$?"?(s.flags|=128,s.child=n.child,s=_x.bind(null,n),g._reactRetry=s,null):(n=v.treeContext,gr=Di(g.nextSibling),mr=s,Nt=!0,ri=null,n!==null&&(zr[Ur++]=_s,zr[Ur++]=ys,zr[Ur++]=oa,_s=n.id,ys=n.overflow,oa=s),s=$d(s,f.children),s.flags|=4096,s)}function vg(n,s,u){n.lanes|=s;var f=n.alternate;f!==null&&(f.lanes|=s),Ed(n.return,s,u)}function qd(n,s,u,f,g){var v=n.memoizedState;v===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:g}:(v.isBackwards=s,v.rendering=null,v.renderingStartTime=0,v.last=f,v.tail=u,v.tailMode=g)}function wg(n,s,u){var f=s.pendingProps,g=f.revealOrder,v=f.tail;if(Bn(n,s,f.children,u),f=Lt.current,(f&2)!==0)f=f&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&vg(n,u,s);else if(n.tag===19)vg(n,u,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}f&=1}if(Et(Lt,f),(s.mode&1)===0)s.memoizedState=null;else switch(g){case"forwards":for(u=s.child,g=null;u!==null;)n=u.alternate,n!==null&&Tc(n)===null&&(g=u),u=u.sibling;u=g,u===null?(g=s.child,s.child=null):(g=u.sibling,u.sibling=null),qd(s,!1,g,u,v);break;case"backwards":for(u=null,g=s.child,s.child=null;g!==null;){if(n=g.alternate,n!==null&&Tc(n)===null){s.child=g;break}n=g.sibling,g.sibling=u,u=g,g=n}qd(s,!0,u,null,v);break;case"together":qd(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Nc(n,s){(s.mode&1)===0&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function xs(n,s,u){if(n!==null&&(s.dependencies=n.dependencies),ha|=s.lanes,(u&s.childLanes)===0)return null;if(n!==null&&s.child!==n.child)throw Error(t(153));if(s.child!==null){for(n=s.child,u=yo(n,n.pendingProps),s.child=u,u.return=s;n.sibling!==null;)n=n.sibling,u=u.sibling=yo(n,n.pendingProps),u.return=s;u.sibling=null}return s.child}function sx(n,s,u){switch(s.tag){case 3:gg(s),nl();break;case 5:Dm(s);break;case 1:Xn(s.type)&&fc(s);break;case 4:Sd(s,s.stateNode.containerInfo);break;case 10:var f=s.type._context,g=s.memoizedProps.value;Et(vc,f._currentValue),f._currentValue=g;break;case 13:if(f=s.memoizedState,f!==null)return f.dehydrated!==null?(Et(Lt,Lt.current&1),s.flags|=128,null):(u&s.child.childLanes)!==0?yg(n,s,u):(Et(Lt,Lt.current&1),n=xs(n,s,u),n!==null?n.sibling:null);Et(Lt,Lt.current&1);break;case 19:if(f=(u&s.childLanes)!==0,(n.flags&128)!==0){if(f)return wg(n,s,u);s.flags|=128}if(g=s.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Et(Lt,Lt.current),f)break;return null;case 22:case 23:return s.lanes=0,fg(n,s,u)}return xs(n,s,u)}var xg,Gd,Eg,Tg;xg=function(n,s){for(var u=s.child;u!==null;){if(u.tag===5||u.tag===6)n.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===s)break;for(;u.sibling===null;){if(u.return===null||u.return===s)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},Gd=function(){},Eg=function(n,s,u,f){var g=n.memoizedProps;if(g!==f){n=s.stateNode,ua(Mi.current);var v=null;switch(u){case"input":g=di(n,g),f=di(n,f),v=[];break;case"select":g=se({},g,{value:void 0}),f=se({},f,{value:void 0}),v=[];break;case"textarea":g=Ds(n,g),f=Ds(n,f),v=[];break;default:typeof g.onClick!="function"&&typeof f.onClick=="function"&&(n.onclick=ae)}lr(u,f);var S;u=null;for(ee in g)if(!f.hasOwnProperty(ee)&&g.hasOwnProperty(ee)&&g[ee]!=null)if(ee==="style"){var O=g[ee];for(S in O)O.hasOwnProperty(S)&&(u||(u={}),u[S]="")}else ee!=="dangerouslySetInnerHTML"&&ee!=="children"&&ee!=="suppressContentEditableWarning"&&ee!=="suppressHydrationWarning"&&ee!=="autoFocus"&&(a.hasOwnProperty(ee)?v||(v=[]):(v=v||[]).push(ee,null));for(ee in f){var U=f[ee];if(O=g!=null?g[ee]:void 0,f.hasOwnProperty(ee)&&U!==O&&(U!=null||O!=null))if(ee==="style")if(O){for(S in O)!O.hasOwnProperty(S)||U&&U.hasOwnProperty(S)||(u||(u={}),u[S]="");for(S in U)U.hasOwnProperty(S)&&O[S]!==U[S]&&(u||(u={}),u[S]=U[S])}else u||(v||(v=[]),v.push(ee,u)),u=U;else ee==="dangerouslySetInnerHTML"?(U=U?U.__html:void 0,O=O?O.__html:void 0,U!=null&&O!==U&&(v=v||[]).push(ee,U)):ee==="children"?typeof U!="string"&&typeof U!="number"||(v=v||[]).push(ee,""+U):ee!=="suppressContentEditableWarning"&&ee!=="suppressHydrationWarning"&&(a.hasOwnProperty(ee)?(U!=null&&ee==="onScroll"&&vt("scroll",n),v||O===U||(v=[])):(v=v||[]).push(ee,U))}u&&(v=v||[]).push("style",u);var ee=v;(s.updateQueue=ee)&&(s.flags|=4)}},Tg=function(n,s,u,f){u!==f&&(s.flags|=4)};function uu(n,s){if(!Nt)switch(n.tailMode){case"hidden":s=n.tail;for(var u=null;s!==null;)s.alternate!==null&&(u=s),s=s.sibling;u===null?n.tail=null:u.sibling=null;break;case"collapsed":u=n.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:f.sibling=null}}function Sn(n){var s=n.alternate!==null&&n.alternate.child===n.child,u=0,f=0;if(s)for(var g=n.child;g!==null;)u|=g.lanes|g.childLanes,f|=g.subtreeFlags&14680064,f|=g.flags&14680064,g.return=n,g=g.sibling;else for(g=n.child;g!==null;)u|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=n,g=g.sibling;return n.subtreeFlags|=f,n.childLanes=u,s}function ox(n,s,u){var f=s.pendingProps;switch(md(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Sn(s),null;case 1:return Xn(s.type)&&dc(),Sn(s),null;case 3:return f=s.stateNode,ol(),St(Jn),St(Tn),Cd(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(n===null||n.child===null)&&(_c(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,ri!==null&&(sf(ri),ri=null))),Gd(n,s),Sn(s),null;case 5:Pd(s);var g=ua(iu.current);if(u=s.type,n!==null&&s.stateNode!=null)Eg(n,s,u,f,g),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!f){if(s.stateNode===null)throw Error(t(166));return Sn(s),null}if(n=ua(Mi.current),_c(s)){f=s.stateNode,u=s.type;var v=s.memoizedProps;switch(f[Fr]=s,f[so]=v,n=(s.mode&1)!==0,u){case"dialog":vt("cancel",f),vt("close",f);break;case"iframe":case"object":case"embed":vt("load",f);break;case"video":case"audio":for(g=0;g<no.length;g++)vt(no[g],f);break;case"source":vt("error",f);break;case"img":case"image":case"link":vt("error",f),vt("load",f);break;case"details":vt("toggle",f);break;case"input":fi(f,v),vt("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!v.multiple},vt("invalid",f);break;case"textarea":Ms(f,v),vt("invalid",f)}lr(u,v),g=null;for(var S in v)if(v.hasOwnProperty(S)){var O=v[S];S==="children"?typeof O=="string"?f.textContent!==O&&(v.suppressHydrationWarning!==!0&&J(f.textContent,O,n),g=["children",O]):typeof O=="number"&&f.textContent!==""+O&&(v.suppressHydrationWarning!==!0&&J(f.textContent,O,n),g=["children",""+O]):a.hasOwnProperty(S)&&O!=null&&S==="onScroll"&&vt("scroll",f)}switch(u){case"input":gn(f),ar(f,v,!0);break;case"textarea":gn(f),pi(f);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(f.onclick=ae)}f=g,s.updateQueue=f,f!==null&&(s.flags|=4)}else{S=g.nodeType===9?g:g.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=$i(u)),n==="http://www.w3.org/1999/xhtml"?u==="script"?(n=S.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof f.is=="string"?n=S.createElement(u,{is:f.is}):(n=S.createElement(u),u==="select"&&(S=n,f.multiple?S.multiple=!0:f.size&&(S.size=f.size))):n=S.createElementNS(n,u),n[Fr]=s,n[so]=f,xg(n,s,!1,!1),s.stateNode=n;e:{switch(S=wr(u,f),u){case"dialog":vt("cancel",n),vt("close",n),g=f;break;case"iframe":case"object":case"embed":vt("load",n),g=f;break;case"video":case"audio":for(g=0;g<no.length;g++)vt(no[g],n);g=f;break;case"source":vt("error",n),g=f;break;case"img":case"image":case"link":vt("error",n),vt("load",n),g=f;break;case"details":vt("toggle",n),g=f;break;case"input":fi(n,f),g=di(n,f),vt("invalid",n);break;case"option":g=f;break;case"select":n._wrapperState={wasMultiple:!!f.multiple},g=se({},f,{value:void 0}),vt("invalid",n);break;case"textarea":Ms(n,f),g=Ds(n,f),vt("invalid",n);break;default:g=f}lr(u,g),O=g;for(v in O)if(O.hasOwnProperty(v)){var U=O[v];v==="style"?gi(n,U):v==="dangerouslySetInnerHTML"?(U=U?U.__html:void 0,U!=null&&La(n,U)):v==="children"?typeof U=="string"?(u!=="textarea"||U!=="")&&mi(n,U):typeof U=="number"&&mi(n,""+U):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(a.hasOwnProperty(v)?U!=null&&v==="onScroll"&&vt("scroll",n):U!=null&&Te(n,v,U,S))}switch(u){case"input":gn(n),ar(n,f,!1);break;case"textarea":gn(n),pi(n);break;case"option":f.value!=null&&n.setAttribute("value",""+re(f.value));break;case"select":n.multiple=!!f.multiple,v=f.value,v!=null?Rn(n,!!f.multiple,v,!1):f.defaultValue!=null&&Rn(n,!!f.multiple,f.defaultValue,!0);break;default:typeof g.onClick=="function"&&(n.onclick=ae)}switch(u){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Sn(s),null;case 6:if(n&&s.stateNode!=null)Tg(n,s,n.memoizedProps,f);else{if(typeof f!="string"&&s.stateNode===null)throw Error(t(166));if(u=ua(iu.current),ua(Mi.current),_c(s)){if(f=s.stateNode,u=s.memoizedProps,f[Fr]=s,(v=f.nodeValue!==u)&&(n=mr,n!==null))switch(n.tag){case 3:J(f.nodeValue,u,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&J(f.nodeValue,u,(n.mode&1)!==0)}v&&(s.flags|=4)}else f=(u.nodeType===9?u:u.ownerDocument).createTextNode(f),f[Fr]=s,s.stateNode=f}return Sn(s),null;case 13:if(St(Lt),f=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Nt&&gr!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Pm(),nl(),s.flags|=98560,v=!1;else if(v=_c(s),f!==null&&f.dehydrated!==null){if(n===null){if(!v)throw Error(t(318));if(v=s.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(t(317));v[Fr]=s}else nl(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Sn(s),v=!1}else ri!==null&&(sf(ri),ri=null),v=!0;if(!v)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=u,s):(f=f!==null,f!==(n!==null&&n.memoizedState!==null)&&f&&(s.child.flags|=8192,(s.mode&1)!==0&&(n===null||(Lt.current&1)!==0?Xt===0&&(Xt=3):lf())),s.updateQueue!==null&&(s.flags|=4),Sn(s),null);case 4:return ol(),Gd(n,s),n===null&&ro(s.stateNode.containerInfo),Sn(s),null;case 10:return xd(s.type._context),Sn(s),null;case 17:return Xn(s.type)&&dc(),Sn(s),null;case 19:if(St(Lt),v=s.memoizedState,v===null)return Sn(s),null;if(f=(s.flags&128)!==0,S=v.rendering,S===null)if(f)uu(v,!1);else{if(Xt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(S=Tc(n),S!==null){for(s.flags|=128,uu(v,!1),f=S.updateQueue,f!==null&&(s.updateQueue=f,s.flags|=4),s.subtreeFlags=0,f=u,u=s.child;u!==null;)v=u,n=f,v.flags&=14680066,S=v.alternate,S===null?(v.childLanes=0,v.lanes=n,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=S.childLanes,v.lanes=S.lanes,v.child=S.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=S.memoizedProps,v.memoizedState=S.memoizedState,v.updateQueue=S.updateQueue,v.type=S.type,n=S.dependencies,v.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),u=u.sibling;return Et(Lt,Lt.current&1|2),s.child}n=n.sibling}v.tail!==null&&wt()>cl&&(s.flags|=128,f=!0,uu(v,!1),s.lanes=4194304)}else{if(!f)if(n=Tc(S),n!==null){if(s.flags|=128,f=!0,u=n.updateQueue,u!==null&&(s.updateQueue=u,s.flags|=4),uu(v,!0),v.tail===null&&v.tailMode==="hidden"&&!S.alternate&&!Nt)return Sn(s),null}else 2*wt()-v.renderingStartTime>cl&&u!==1073741824&&(s.flags|=128,f=!0,uu(v,!1),s.lanes=4194304);v.isBackwards?(S.sibling=s.child,s.child=S):(u=v.last,u!==null?u.sibling=S:s.child=S,v.last=S)}return v.tail!==null?(s=v.tail,v.rendering=s,v.tail=s.sibling,v.renderingStartTime=wt(),s.sibling=null,u=Lt.current,Et(Lt,f?u&1|2:u&1),s):(Sn(s),null);case 22:case 23:return af(),f=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==f&&(s.flags|=8192),f&&(s.mode&1)!==0?(_r&1073741824)!==0&&(Sn(s),s.subtreeFlags&6&&(s.flags|=8192)):Sn(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function ax(n,s){switch(md(s),s.tag){case 1:return Xn(s.type)&&dc(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return ol(),St(Jn),St(Tn),Cd(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 5:return Pd(s),null;case 13:if(St(Lt),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(t(340));nl()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return St(Lt),null;case 4:return ol(),null;case 10:return xd(s.type._context),null;case 22:case 23:return af(),null;case 24:return null;default:return null}}var Rc=!1,Pn=!1,lx=typeof WeakSet=="function"?WeakSet:Set,Ae=null;function ll(n,s){var u=n.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(f){Ot(n,s,f)}else u.current=null}function Kd(n,s,u){try{u()}catch(f){Ot(n,s,f)}}var Ig=!1;function ux(n,s){if(xe=Ar,n=ql(),Gl(n)){if("selectionStart"in n)var u={start:n.selectionStart,end:n.selectionEnd};else e:{u=(u=n.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var g=f.anchorOffset,v=f.focusNode;f=f.focusOffset;try{u.nodeType,v.nodeType}catch{u=null;break e}var S=0,O=-1,U=-1,ee=0,ce=0,de=n,ue=null;t:for(;;){for(var Ie;de!==u||g!==0&&de.nodeType!==3||(O=S+g),de!==v||f!==0&&de.nodeType!==3||(U=S+f),de.nodeType===3&&(S+=de.nodeValue.length),(Ie=de.firstChild)!==null;)ue=de,de=Ie;for(;;){if(de===n)break t;if(ue===u&&++ee===g&&(O=S),ue===v&&++ce===f&&(U=S),(Ie=de.nextSibling)!==null)break;de=ue,ue=de.parentNode}de=Ie}u=O===-1||U===-1?null:{start:O,end:U}}else u=null}u=u||{start:0,end:0}}else u=null;for(Fe={focusedElem:n,selectionRange:u},Ar=!1,Ae=s;Ae!==null;)if(s=Ae,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,Ae=n;else for(;Ae!==null;){s=Ae;try{var Re=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(Re!==null){var Le=Re.memoizedProps,Ft=Re.memoizedState,K=s.stateNode,W=K.getSnapshotBeforeUpdate(s.elementType===s.type?Le:ii(s.type,Le),Ft);K.__reactInternalSnapshotBeforeUpdate=W}break;case 3:var Q=s.stateNode.containerInfo;Q.nodeType===1?Q.textContent="":Q.nodeType===9&&Q.documentElement&&Q.removeChild(Q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(me){Ot(s,s.return,me)}if(n=s.sibling,n!==null){n.return=s.return,Ae=n;break}Ae=s.return}return Re=Ig,Ig=!1,Re}function cu(n,s,u){var f=s.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var g=f=f.next;do{if((g.tag&n)===n){var v=g.destroy;g.destroy=void 0,v!==void 0&&Kd(s,u,v)}g=g.next}while(g!==f)}}function Lc(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var u=s=s.next;do{if((u.tag&n)===n){var f=u.create;u.destroy=f()}u=u.next}while(u!==s)}}function Zd(n){var s=n.ref;if(s!==null){var u=n.stateNode;switch(n.tag){case 5:n=u;break;default:n=u}typeof s=="function"?s(n):s.current=n}}function Sg(n){var s=n.alternate;s!==null&&(n.alternate=null,Sg(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[Fr],delete s[so],delete s[oo],delete s[cd],delete s[hd])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Pg(n){return n.tag===5||n.tag===3||n.tag===4}function kg(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Pg(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Qd(n,s,u){var f=n.tag;if(f===5||f===6)n=n.stateNode,s?u.nodeType===8?u.parentNode.insertBefore(n,s):u.insertBefore(n,s):(u.nodeType===8?(s=u.parentNode,s.insertBefore(n,u)):(s=u,s.appendChild(n)),u=u._reactRootContainer,u!=null||s.onclick!==null||(s.onclick=ae));else if(f!==4&&(n=n.child,n!==null))for(Qd(n,s,u),n=n.sibling;n!==null;)Qd(n,s,u),n=n.sibling}function Yd(n,s,u){var f=n.tag;if(f===5||f===6)n=n.stateNode,s?u.insertBefore(n,s):u.appendChild(n);else if(f!==4&&(n=n.child,n!==null))for(Yd(n,s,u),n=n.sibling;n!==null;)Yd(n,s,u),n=n.sibling}var hn=null,si=!1;function fo(n,s,u){for(u=u.child;u!==null;)Cg(n,s,u),u=u.sibling}function Cg(n,s,u){if(_n&&typeof _n.onCommitFiberUnmount=="function")try{_n.onCommitFiberUnmount(Ei,u)}catch{}switch(u.tag){case 5:Pn||ll(u,s);case 6:var f=hn,g=si;hn=null,fo(n,s,u),hn=f,si=g,hn!==null&&(si?(n=hn,u=u.stateNode,n.nodeType===8?n.parentNode.removeChild(u):n.removeChild(u)):hn.removeChild(u.stateNode));break;case 18:hn!==null&&(si?(n=hn,u=u.stateNode,n.nodeType===8?eu(n.parentNode,u):n.nodeType===1&&eu(n,u),vn(n)):eu(hn,u.stateNode));break;case 4:f=hn,g=si,hn=u.stateNode.containerInfo,si=!0,fo(n,s,u),hn=f,si=g;break;case 0:case 11:case 14:case 15:if(!Pn&&(f=u.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){g=f=f.next;do{var v=g,S=v.destroy;v=v.tag,S!==void 0&&((v&2)!==0||(v&4)!==0)&&Kd(u,s,S),g=g.next}while(g!==f)}fo(n,s,u);break;case 1:if(!Pn&&(ll(u,s),f=u.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=u.memoizedProps,f.state=u.memoizedState,f.componentWillUnmount()}catch(O){Ot(u,s,O)}fo(n,s,u);break;case 21:fo(n,s,u);break;case 22:u.mode&1?(Pn=(f=Pn)||u.memoizedState!==null,fo(n,s,u),Pn=f):fo(n,s,u);break;default:fo(n,s,u)}}function bg(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var u=n.stateNode;u===null&&(u=n.stateNode=new lx),s.forEach(function(f){var g=yx.bind(null,n,f);u.has(f)||(u.add(f),f.then(g,g))})}}function oi(n,s){var u=s.deletions;if(u!==null)for(var f=0;f<u.length;f++){var g=u[f];try{var v=n,S=s,O=S;e:for(;O!==null;){switch(O.tag){case 5:hn=O.stateNode,si=!1;break e;case 3:hn=O.stateNode.containerInfo,si=!0;break e;case 4:hn=O.stateNode.containerInfo,si=!0;break e}O=O.return}if(hn===null)throw Error(t(160));Cg(v,S,g),hn=null,si=!1;var U=g.alternate;U!==null&&(U.return=null),g.return=null}catch(ee){Ot(g,s,ee)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Ag(s,n),s=s.sibling}function Ag(n,s){var u=n.alternate,f=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(oi(s,n),ji(n),f&4){try{cu(3,n,n.return),Lc(3,n)}catch(Le){Ot(n,n.return,Le)}try{cu(5,n,n.return)}catch(Le){Ot(n,n.return,Le)}}break;case 1:oi(s,n),ji(n),f&512&&u!==null&&ll(u,u.return);break;case 5:if(oi(s,n),ji(n),f&512&&u!==null&&ll(u,u.return),n.flags&32){var g=n.stateNode;try{mi(g,"")}catch(Le){Ot(n,n.return,Le)}}if(f&4&&(g=n.stateNode,g!=null)){var v=n.memoizedProps,S=u!==null?u.memoizedProps:v,O=n.type,U=n.updateQueue;if(n.updateQueue=null,U!==null)try{O==="input"&&v.type==="radio"&&v.name!=null&&Kr(g,v),wr(O,S);var ee=wr(O,v);for(S=0;S<U.length;S+=2){var ce=U[S],de=U[S+1];ce==="style"?gi(g,de):ce==="dangerouslySetInnerHTML"?La(g,de):ce==="children"?mi(g,de):Te(g,ce,de,ee)}switch(O){case"input":or(g,v);break;case"textarea":Ra(g,v);break;case"select":var ue=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!v.multiple;var Ie=v.value;Ie!=null?Rn(g,!!v.multiple,Ie,!1):ue!==!!v.multiple&&(v.defaultValue!=null?Rn(g,!!v.multiple,v.defaultValue,!0):Rn(g,!!v.multiple,v.multiple?[]:"",!1))}g[so]=v}catch(Le){Ot(n,n.return,Le)}}break;case 6:if(oi(s,n),ji(n),f&4){if(n.stateNode===null)throw Error(t(162));g=n.stateNode,v=n.memoizedProps;try{g.nodeValue=v}catch(Le){Ot(n,n.return,Le)}}break;case 3:if(oi(s,n),ji(n),f&4&&u!==null&&u.memoizedState.isDehydrated)try{vn(s.containerInfo)}catch(Le){Ot(n,n.return,Le)}break;case 4:oi(s,n),ji(n);break;case 13:oi(s,n),ji(n),g=n.child,g.flags&8192&&(v=g.memoizedState!==null,g.stateNode.isHidden=v,!v||g.alternate!==null&&g.alternate.memoizedState!==null||(ef=wt())),f&4&&bg(n);break;case 22:if(ce=u!==null&&u.memoizedState!==null,n.mode&1?(Pn=(ee=Pn)||ce,oi(s,n),Pn=ee):oi(s,n),ji(n),f&8192){if(ee=n.memoizedState!==null,(n.stateNode.isHidden=ee)&&!ce&&(n.mode&1)!==0)for(Ae=n,ce=n.child;ce!==null;){for(de=Ae=ce;Ae!==null;){switch(ue=Ae,Ie=ue.child,ue.tag){case 0:case 11:case 14:case 15:cu(4,ue,ue.return);break;case 1:ll(ue,ue.return);var Re=ue.stateNode;if(typeof Re.componentWillUnmount=="function"){f=ue,u=ue.return;try{s=f,Re.props=s.memoizedProps,Re.state=s.memoizedState,Re.componentWillUnmount()}catch(Le){Ot(f,u,Le)}}break;case 5:ll(ue,ue.return);break;case 22:if(ue.memoizedState!==null){Lg(de);continue}}Ie!==null?(Ie.return=ue,Ae=Ie):Lg(de)}ce=ce.sibling}e:for(ce=null,de=n;;){if(de.tag===5){if(ce===null){ce=de;try{g=de.stateNode,ee?(v=g.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(O=de.stateNode,U=de.memoizedProps.style,S=U!=null&&U.hasOwnProperty("display")?U.display:null,O.style.display=Yr("display",S))}catch(Le){Ot(n,n.return,Le)}}}else if(de.tag===6){if(ce===null)try{de.stateNode.nodeValue=ee?"":de.memoizedProps}catch(Le){Ot(n,n.return,Le)}}else if((de.tag!==22&&de.tag!==23||de.memoizedState===null||de===n)&&de.child!==null){de.child.return=de,de=de.child;continue}if(de===n)break e;for(;de.sibling===null;){if(de.return===null||de.return===n)break e;ce===de&&(ce=null),de=de.return}ce===de&&(ce=null),de.sibling.return=de.return,de=de.sibling}}break;case 19:oi(s,n),ji(n),f&4&&bg(n);break;case 21:break;default:oi(s,n),ji(n)}}function ji(n){var s=n.flags;if(s&2){try{e:{for(var u=n.return;u!==null;){if(Pg(u)){var f=u;break e}u=u.return}throw Error(t(160))}switch(f.tag){case 5:var g=f.stateNode;f.flags&32&&(mi(g,""),f.flags&=-33);var v=kg(n);Yd(n,v,g);break;case 3:case 4:var S=f.stateNode.containerInfo,O=kg(n);Qd(n,O,S);break;default:throw Error(t(161))}}catch(U){Ot(n,n.return,U)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function cx(n,s,u){Ae=n,Ng(n)}function Ng(n,s,u){for(var f=(n.mode&1)!==0;Ae!==null;){var g=Ae,v=g.child;if(g.tag===22&&f){var S=g.memoizedState!==null||Rc;if(!S){var O=g.alternate,U=O!==null&&O.memoizedState!==null||Pn;O=Rc;var ee=Pn;if(Rc=S,(Pn=U)&&!ee)for(Ae=g;Ae!==null;)S=Ae,U=S.child,S.tag===22&&S.memoizedState!==null?Dg(g):U!==null?(U.return=S,Ae=U):Dg(g);for(;v!==null;)Ae=v,Ng(v),v=v.sibling;Ae=g,Rc=O,Pn=ee}Rg(n)}else(g.subtreeFlags&8772)!==0&&v!==null?(v.return=g,Ae=v):Rg(n)}}function Rg(n){for(;Ae!==null;){var s=Ae;if((s.flags&8772)!==0){var u=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Pn||Lc(5,s);break;case 1:var f=s.stateNode;if(s.flags&4&&!Pn)if(u===null)f.componentDidMount();else{var g=s.elementType===s.type?u.memoizedProps:ii(s.type,u.memoizedProps);f.componentDidUpdate(g,u.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var v=s.updateQueue;v!==null&&Lm(s,v,f);break;case 3:var S=s.updateQueue;if(S!==null){if(u=null,s.child!==null)switch(s.child.tag){case 5:u=s.child.stateNode;break;case 1:u=s.child.stateNode}Lm(s,S,u)}break;case 5:var O=s.stateNode;if(u===null&&s.flags&4){u=O;var U=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":U.autoFocus&&u.focus();break;case"img":U.src&&(u.src=U.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var ee=s.alternate;if(ee!==null){var ce=ee.memoizedState;if(ce!==null){var de=ce.dehydrated;de!==null&&vn(de)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Pn||s.flags&512&&Zd(s)}catch(ue){Ot(s,s.return,ue)}}if(s===n){Ae=null;break}if(u=s.sibling,u!==null){u.return=s.return,Ae=u;break}Ae=s.return}}function Lg(n){for(;Ae!==null;){var s=Ae;if(s===n){Ae=null;break}var u=s.sibling;if(u!==null){u.return=s.return,Ae=u;break}Ae=s.return}}function Dg(n){for(;Ae!==null;){var s=Ae;try{switch(s.tag){case 0:case 11:case 15:var u=s.return;try{Lc(4,s)}catch(U){Ot(s,u,U)}break;case 1:var f=s.stateNode;if(typeof f.componentDidMount=="function"){var g=s.return;try{f.componentDidMount()}catch(U){Ot(s,g,U)}}var v=s.return;try{Zd(s)}catch(U){Ot(s,v,U)}break;case 5:var S=s.return;try{Zd(s)}catch(U){Ot(s,S,U)}}}catch(U){Ot(s,s.return,U)}if(s===n){Ae=null;break}var O=s.sibling;if(O!==null){O.return=s.return,Ae=O;break}Ae=s.return}}var hx=Math.ceil,Dc=Oe.ReactCurrentDispatcher,Jd=Oe.ReactCurrentOwner,Wr=Oe.ReactCurrentBatchConfig,ht=0,sn=null,$t=null,dn=0,_r=0,ul=ao(0),Xt=0,hu=null,ha=0,Mc=0,Xd=0,du=null,tr=null,ef=0,cl=1/0,Es=null,Oc=!1,tf=null,po=null,jc=!1,mo=null,Vc=0,fu=0,nf=null,Fc=-1,zc=0;function Hn(){return(ht&6)!==0?wt():Fc!==-1?Fc:Fc=wt()}function go(n){return(n.mode&1)===0?1:(ht&2)!==0&&dn!==0?dn&-dn:Kw.transition!==null?(zc===0&&(zc=Go()),zc):(n=tt,n!==0||(n=window.event,n=n===void 0?16:nt(n.type)),n)}function ai(n,s,u,f){if(50<fu)throw fu=0,nf=null,Error(t(185));Dn(n,u,f),((ht&2)===0||n!==sn)&&(n===sn&&((ht&2)===0&&(Mc|=u),Xt===4&&_o(n,dn)),nr(n,f),u===1&&ht===0&&(s.mode&1)===0&&(cl=wt()+500,pc&&uo()))}function nr(n,s){var u=n.callbackNode;kr(n,s);var f=mt(n,n===sn?dn:0);if(f===0)u!==null&&Yi(u),n.callbackNode=null,n.callbackPriority=0;else if(s=f&-f,n.callbackPriority!==s){if(u!=null&&Yi(u),s===1)n.tag===0?Gw(Og.bind(null,n)):xm(Og.bind(null,n)),En(function(){(ht&6)===0&&uo()}),u=null;else{switch(yn(f)){case 1:u=Fs;break;case 4:u=qo;break;case 16:u=Xi;break;case 536870912:u=Sr;break;default:u=Xi}u=Wg(u,Mg.bind(null,n))}n.callbackPriority=s,n.callbackNode=u}}function Mg(n,s){if(Fc=-1,zc=0,(ht&6)!==0)throw Error(t(327));var u=n.callbackNode;if(hl()&&n.callbackNode!==u)return null;var f=mt(n,n===sn?dn:0);if(f===0)return null;if((f&30)!==0||(f&n.expiredLanes)!==0||s)s=Uc(n,f);else{s=f;var g=ht;ht|=2;var v=Vg();(sn!==n||dn!==s)&&(Es=null,cl=wt()+500,fa(n,s));do try{px();break}catch(O){jg(n,O)}while(!0);wd(),Dc.current=v,ht=g,$t!==null?s=0:(sn=null,dn=0,s=Xt)}if(s!==0){if(s===2&&(g=tn(n),g!==0&&(f=g,s=rf(n,g))),s===1)throw u=hu,fa(n,0),_o(n,f),nr(n,wt()),u;if(s===6)_o(n,f);else{if(g=n.current.alternate,(f&30)===0&&!dx(g)&&(s=Uc(n,f),s===2&&(v=tn(n),v!==0&&(f=v,s=rf(n,v))),s===1))throw u=hu,fa(n,0),_o(n,f),nr(n,wt()),u;switch(n.finishedWork=g,n.finishedLanes=f,s){case 0:case 1:throw Error(t(345));case 2:pa(n,tr,Es);break;case 3:if(_o(n,f),(f&130023424)===f&&(s=ef+500-wt(),10<s)){if(mt(n,0)!==0)break;if(g=n.suspendedLanes,(g&f)!==f){Hn(),n.pingedLanes|=n.suspendedLanes&g;break}n.timeoutHandle=Yt(pa.bind(null,n,tr,Es),s);break}pa(n,tr,Es);break;case 4:if(_o(n,f),(f&4194240)===f)break;for(s=n.eventTimes,g=-1;0<f;){var S=31-Ze(f);v=1<<S,S=s[S],S>g&&(g=S),f&=~v}if(f=g,f=wt()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*hx(f/1960))-f,10<f){n.timeoutHandle=Yt(pa.bind(null,n,tr,Es),f);break}pa(n,tr,Es);break;case 5:pa(n,tr,Es);break;default:throw Error(t(329))}}}return nr(n,wt()),n.callbackNode===u?Mg.bind(null,n):null}function rf(n,s){var u=du;return n.current.memoizedState.isDehydrated&&(fa(n,s).flags|=256),n=Uc(n,s),n!==2&&(s=tr,tr=u,s!==null&&sf(s)),n}function sf(n){tr===null?tr=n:tr.push.apply(tr,n)}function dx(n){for(var s=n;;){if(s.flags&16384){var u=s.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var f=0;f<u.length;f++){var g=u[f],v=g.getSnapshot;g=g.value;try{if(!fr(v(),g))return!1}catch{return!1}}}if(u=s.child,s.subtreeFlags&16384&&u!==null)u.return=s,s=u;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function _o(n,s){for(s&=~Xd,s&=~Mc,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var u=31-Ze(s),f=1<<u;n[u]=-1,s&=~f}}function Og(n){if((ht&6)!==0)throw Error(t(327));hl();var s=mt(n,0);if((s&1)===0)return nr(n,wt()),null;var u=Uc(n,s);if(n.tag!==0&&u===2){var f=tn(n);f!==0&&(s=f,u=rf(n,f))}if(u===1)throw u=hu,fa(n,0),_o(n,s),nr(n,wt()),u;if(u===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,pa(n,tr,Es),nr(n,wt()),null}function of(n,s){var u=ht;ht|=1;try{return n(s)}finally{ht=u,ht===0&&(cl=wt()+500,pc&&uo())}}function da(n){mo!==null&&mo.tag===0&&(ht&6)===0&&hl();var s=ht;ht|=1;var u=Wr.transition,f=tt;try{if(Wr.transition=null,tt=1,n)return n()}finally{tt=f,Wr.transition=u,ht=s,(ht&6)===0&&uo()}}function af(){_r=ul.current,St(ul)}function fa(n,s){n.finishedWork=null,n.finishedLanes=0;var u=n.timeoutHandle;if(u!==-1&&(n.timeoutHandle=-1,Wt(u)),$t!==null)for(u=$t.return;u!==null;){var f=u;switch(md(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&dc();break;case 3:ol(),St(Jn),St(Tn),Cd();break;case 5:Pd(f);break;case 4:ol();break;case 13:St(Lt);break;case 19:St(Lt);break;case 10:xd(f.type._context);break;case 22:case 23:af()}u=u.return}if(sn=n,$t=n=yo(n.current,null),dn=_r=s,Xt=0,hu=null,Xd=Mc=ha=0,tr=du=null,la!==null){for(s=0;s<la.length;s++)if(u=la[s],f=u.interleaved,f!==null){u.interleaved=null;var g=f.next,v=u.pending;if(v!==null){var S=v.next;v.next=g,f.next=S}u.pending=f}la=null}return n}function jg(n,s){do{var u=$t;try{if(wd(),Ic.current=Cc,Sc){for(var f=Dt.memoizedState;f!==null;){var g=f.queue;g!==null&&(g.pending=null),f=f.next}Sc=!1}if(ca=0,rn=Jt=Dt=null,su=!1,ou=0,Jd.current=null,u===null||u.return===null){Xt=1,hu=s,$t=null;break}e:{var v=n,S=u.return,O=u,U=s;if(s=dn,O.flags|=32768,U!==null&&typeof U=="object"&&typeof U.then=="function"){var ee=U,ce=O,de=ce.tag;if((ce.mode&1)===0&&(de===0||de===11||de===15)){var ue=ce.alternate;ue?(ce.updateQueue=ue.updateQueue,ce.memoizedState=ue.memoizedState,ce.lanes=ue.lanes):(ce.updateQueue=null,ce.memoizedState=null)}var Ie=lg(S);if(Ie!==null){Ie.flags&=-257,ug(Ie,S,O,v,s),Ie.mode&1&&ag(v,ee,s),s=Ie,U=ee;var Re=s.updateQueue;if(Re===null){var Le=new Set;Le.add(U),s.updateQueue=Le}else Re.add(U);break e}else{if((s&1)===0){ag(v,ee,s),lf();break e}U=Error(t(426))}}else if(Nt&&O.mode&1){var Ft=lg(S);if(Ft!==null){(Ft.flags&65536)===0&&(Ft.flags|=256),ug(Ft,S,O,v,s),yd(al(U,O));break e}}v=U=al(U,O),Xt!==4&&(Xt=2),du===null?du=[v]:du.push(v),v=S;do{switch(v.tag){case 3:v.flags|=65536,s&=-s,v.lanes|=s;var K=sg(v,U,s);Rm(v,K);break e;case 1:O=U;var W=v.type,Q=v.stateNode;if((v.flags&128)===0&&(typeof W.getDerivedStateFromError=="function"||Q!==null&&typeof Q.componentDidCatch=="function"&&(po===null||!po.has(Q)))){v.flags|=65536,s&=-s,v.lanes|=s;var me=og(v,O,s);Rm(v,me);break e}}v=v.return}while(v!==null)}zg(u)}catch(De){s=De,$t===u&&u!==null&&($t=u=u.return);continue}break}while(!0)}function Vg(){var n=Dc.current;return Dc.current=Cc,n===null?Cc:n}function lf(){(Xt===0||Xt===3||Xt===2)&&(Xt=4),sn===null||(ha&268435455)===0&&(Mc&268435455)===0||_o(sn,dn)}function Uc(n,s){var u=ht;ht|=2;var f=Vg();(sn!==n||dn!==s)&&(Es=null,fa(n,s));do try{fx();break}catch(g){jg(n,g)}while(!0);if(wd(),ht=u,Dc.current=f,$t!==null)throw Error(t(261));return sn=null,dn=0,Xt}function fx(){for(;$t!==null;)Fg($t)}function px(){for(;$t!==null&&!Ji();)Fg($t)}function Fg(n){var s=Hg(n.alternate,n,_r);n.memoizedProps=n.pendingProps,s===null?zg(n):$t=s,Jd.current=null}function zg(n){var s=n;do{var u=s.alternate;if(n=s.return,(s.flags&32768)===0){if(u=ox(u,s,_r),u!==null){$t=u;return}}else{if(u=ax(u,s),u!==null){u.flags&=32767,$t=u;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Xt=6,$t=null;return}}if(s=s.sibling,s!==null){$t=s;return}$t=s=n}while(s!==null);Xt===0&&(Xt=5)}function pa(n,s,u){var f=tt,g=Wr.transition;try{Wr.transition=null,tt=1,mx(n,s,u,f)}finally{Wr.transition=g,tt=f}return null}function mx(n,s,u,f){do hl();while(mo!==null);if((ht&6)!==0)throw Error(t(327));u=n.finishedWork;var g=n.finishedLanes;if(u===null)return null;if(n.finishedWork=null,n.finishedLanes=0,u===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var v=u.lanes|u.childLanes;if(bt(n,v),n===sn&&($t=sn=null,dn=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||jc||(jc=!0,Wg(Xi,function(){return hl(),null})),v=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||v){v=Wr.transition,Wr.transition=null;var S=tt;tt=1;var O=ht;ht|=4,Jd.current=null,ux(n,u),Ag(u,n),jr(Fe),Ar=!!xe,Fe=xe=null,n.current=u,cx(u),Gn(),ht=O,tt=S,Wr.transition=v}else n.current=u;if(jc&&(jc=!1,mo=n,Vc=g),v=n.pendingLanes,v===0&&(po=null),Ti(u.stateNode),nr(n,wt()),s!==null)for(f=n.onRecoverableError,u=0;u<s.length;u++)g=s[u],f(g.value,{componentStack:g.stack,digest:g.digest});if(Oc)throw Oc=!1,n=tf,tf=null,n;return(Vc&1)!==0&&n.tag!==0&&hl(),v=n.pendingLanes,(v&1)!==0?n===nf?fu++:(fu=0,nf=n):fu=0,uo(),null}function hl(){if(mo!==null){var n=yn(Vc),s=Wr.transition,u=tt;try{if(Wr.transition=null,tt=16>n?16:n,mo===null)var f=!1;else{if(n=mo,mo=null,Vc=0,(ht&6)!==0)throw Error(t(331));var g=ht;for(ht|=4,Ae=n.current;Ae!==null;){var v=Ae,S=v.child;if((Ae.flags&16)!==0){var O=v.deletions;if(O!==null){for(var U=0;U<O.length;U++){var ee=O[U];for(Ae=ee;Ae!==null;){var ce=Ae;switch(ce.tag){case 0:case 11:case 15:cu(8,ce,v)}var de=ce.child;if(de!==null)de.return=ce,Ae=de;else for(;Ae!==null;){ce=Ae;var ue=ce.sibling,Ie=ce.return;if(Sg(ce),ce===ee){Ae=null;break}if(ue!==null){ue.return=Ie,Ae=ue;break}Ae=Ie}}}var Re=v.alternate;if(Re!==null){var Le=Re.child;if(Le!==null){Re.child=null;do{var Ft=Le.sibling;Le.sibling=null,Le=Ft}while(Le!==null)}}Ae=v}}if((v.subtreeFlags&2064)!==0&&S!==null)S.return=v,Ae=S;else e:for(;Ae!==null;){if(v=Ae,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:cu(9,v,v.return)}var K=v.sibling;if(K!==null){K.return=v.return,Ae=K;break e}Ae=v.return}}var W=n.current;for(Ae=W;Ae!==null;){S=Ae;var Q=S.child;if((S.subtreeFlags&2064)!==0&&Q!==null)Q.return=S,Ae=Q;else e:for(S=W;Ae!==null;){if(O=Ae,(O.flags&2048)!==0)try{switch(O.tag){case 0:case 11:case 15:Lc(9,O)}}catch(De){Ot(O,O.return,De)}if(O===S){Ae=null;break e}var me=O.sibling;if(me!==null){me.return=O.return,Ae=me;break e}Ae=O.return}}if(ht=g,uo(),_n&&typeof _n.onPostCommitFiberRoot=="function")try{_n.onPostCommitFiberRoot(Ei,n)}catch{}f=!0}return f}finally{tt=u,Wr.transition=s}}return!1}function Ug(n,s,u){s=al(u,s),s=sg(n,s,1),n=ho(n,s,1),s=Hn(),n!==null&&(Dn(n,1,s),nr(n,s))}function Ot(n,s,u){if(n.tag===3)Ug(n,n,u);else for(;s!==null;){if(s.tag===3){Ug(s,n,u);break}else if(s.tag===1){var f=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(po===null||!po.has(f))){n=al(u,n),n=og(s,n,1),s=ho(s,n,1),n=Hn(),s!==null&&(Dn(s,1,n),nr(s,n));break}}s=s.return}}function gx(n,s,u){var f=n.pingCache;f!==null&&f.delete(s),s=Hn(),n.pingedLanes|=n.suspendedLanes&u,sn===n&&(dn&u)===u&&(Xt===4||Xt===3&&(dn&130023424)===dn&&500>wt()-ef?fa(n,0):Xd|=u),nr(n,s)}function Bg(n,s){s===0&&((n.mode&1)===0?s=1:(s=Pr,Pr<<=1,(Pr&130023424)===0&&(Pr=4194304)));var u=Hn();n=vs(n,s),n!==null&&(Dn(n,s,u),nr(n,u))}function _x(n){var s=n.memoizedState,u=0;s!==null&&(u=s.retryLane),Bg(n,u)}function yx(n,s){var u=0;switch(n.tag){case 13:var f=n.stateNode,g=n.memoizedState;g!==null&&(u=g.retryLane);break;case 19:f=n.stateNode;break;default:throw Error(t(314))}f!==null&&f.delete(s),Bg(n,u)}var Hg;Hg=function(n,s,u){if(n!==null)if(n.memoizedProps!==s.pendingProps||Jn.current)er=!0;else{if((n.lanes&u)===0&&(s.flags&128)===0)return er=!1,sx(n,s,u);er=(n.flags&131072)!==0}else er=!1,Nt&&(s.flags&1048576)!==0&&Em(s,gc,s.index);switch(s.lanes=0,s.tag){case 2:var f=s.type;Nc(n,s),n=s.pendingProps;var g=Xa(s,Tn.current);sl(s,u),g=Nd(null,s,f,n,g,u);var v=Rd();return s.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Xn(f)?(v=!0,fc(s)):v=!1,s.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,Id(s),g.updater=bc,s.stateNode=g,g._reactInternals=s,Vd(s,f,n,u),s=Bd(null,s,f,!0,v,u)):(s.tag=0,Nt&&v&&pd(s),Bn(null,s,g,u),s=s.child),s;case 16:f=s.elementType;e:{switch(Nc(n,s),n=s.pendingProps,g=f._init,f=g(f._payload),s.type=f,g=s.tag=wx(f),n=ii(f,n),g){case 0:s=Ud(null,s,f,n,u);break e;case 1:s=mg(null,s,f,n,u);break e;case 11:s=cg(null,s,f,n,u);break e;case 14:s=hg(null,s,f,ii(f.type,n),u);break e}throw Error(t(306,f,""))}return s;case 0:return f=s.type,g=s.pendingProps,g=s.elementType===f?g:ii(f,g),Ud(n,s,f,g,u);case 1:return f=s.type,g=s.pendingProps,g=s.elementType===f?g:ii(f,g),mg(n,s,f,g,u);case 3:e:{if(gg(s),n===null)throw Error(t(387));f=s.pendingProps,v=s.memoizedState,g=v.element,Nm(n,s),Ec(s,f,null,u);var S=s.memoizedState;if(f=S.element,v.isDehydrated)if(v={element:f,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},s.updateQueue.baseState=v,s.memoizedState=v,s.flags&256){g=al(Error(t(423)),s),s=_g(n,s,f,u,g);break e}else if(f!==g){g=al(Error(t(424)),s),s=_g(n,s,f,u,g);break e}else for(gr=Di(s.stateNode.containerInfo.firstChild),mr=s,Nt=!0,ri=null,u=bm(s,null,f,u),s.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(nl(),f===g){s=xs(n,s,u);break e}Bn(n,s,f,u)}s=s.child}return s;case 5:return Dm(s),n===null&&_d(s),f=s.type,g=s.pendingProps,v=n!==null?n.memoizedProps:null,S=g.children,et(f,g)?S=null:v!==null&&et(f,v)&&(s.flags|=32),pg(n,s),Bn(n,s,S,u),s.child;case 6:return n===null&&_d(s),null;case 13:return yg(n,s,u);case 4:return Sd(s,s.stateNode.containerInfo),f=s.pendingProps,n===null?s.child=rl(s,null,f,u):Bn(n,s,f,u),s.child;case 11:return f=s.type,g=s.pendingProps,g=s.elementType===f?g:ii(f,g),cg(n,s,f,g,u);case 7:return Bn(n,s,s.pendingProps,u),s.child;case 8:return Bn(n,s,s.pendingProps.children,u),s.child;case 12:return Bn(n,s,s.pendingProps.children,u),s.child;case 10:e:{if(f=s.type._context,g=s.pendingProps,v=s.memoizedProps,S=g.value,Et(vc,f._currentValue),f._currentValue=S,v!==null)if(fr(v.value,S)){if(v.children===g.children&&!Jn.current){s=xs(n,s,u);break e}}else for(v=s.child,v!==null&&(v.return=s);v!==null;){var O=v.dependencies;if(O!==null){S=v.child;for(var U=O.firstContext;U!==null;){if(U.context===f){if(v.tag===1){U=ws(-1,u&-u),U.tag=2;var ee=v.updateQueue;if(ee!==null){ee=ee.shared;var ce=ee.pending;ce===null?U.next=U:(U.next=ce.next,ce.next=U),ee.pending=U}}v.lanes|=u,U=v.alternate,U!==null&&(U.lanes|=u),Ed(v.return,u,s),O.lanes|=u;break}U=U.next}}else if(v.tag===10)S=v.type===s.type?null:v.child;else if(v.tag===18){if(S=v.return,S===null)throw Error(t(341));S.lanes|=u,O=S.alternate,O!==null&&(O.lanes|=u),Ed(S,u,s),S=v.sibling}else S=v.child;if(S!==null)S.return=v;else for(S=v;S!==null;){if(S===s){S=null;break}if(v=S.sibling,v!==null){v.return=S.return,S=v;break}S=S.return}v=S}Bn(n,s,g.children,u),s=s.child}return s;case 9:return g=s.type,f=s.pendingProps.children,sl(s,u),g=Br(g),f=f(g),s.flags|=1,Bn(n,s,f,u),s.child;case 14:return f=s.type,g=ii(f,s.pendingProps),g=ii(f.type,g),hg(n,s,f,g,u);case 15:return dg(n,s,s.type,s.pendingProps,u);case 17:return f=s.type,g=s.pendingProps,g=s.elementType===f?g:ii(f,g),Nc(n,s),s.tag=1,Xn(f)?(n=!0,fc(s)):n=!1,sl(s,u),rg(s,f,g),Vd(s,f,g,u),Bd(null,s,f,!0,n,u);case 19:return wg(n,s,u);case 22:return fg(n,s,u)}throw Error(t(156,s.tag))};function Wg(n,s){return $o(n,s)}function vx(n,s,u,f){this.tag=n,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $r(n,s,u,f){return new vx(n,s,u,f)}function uf(n){return n=n.prototype,!(!n||!n.isReactComponent)}function wx(n){if(typeof n=="function")return uf(n)?1:0;if(n!=null){if(n=n.$$typeof,n===R)return 11;if(n===Ge)return 14}return 2}function yo(n,s){var u=n.alternate;return u===null?(u=$r(n.tag,s,n.key,n.mode),u.elementType=n.elementType,u.type=n.type,u.stateNode=n.stateNode,u.alternate=n,n.alternate=u):(u.pendingProps=s,u.type=n.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=n.flags&14680064,u.childLanes=n.childLanes,u.lanes=n.lanes,u.child=n.child,u.memoizedProps=n.memoizedProps,u.memoizedState=n.memoizedState,u.updateQueue=n.updateQueue,s=n.dependencies,u.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},u.sibling=n.sibling,u.index=n.index,u.ref=n.ref,u}function Bc(n,s,u,f,g,v){var S=2;if(f=n,typeof n=="function")uf(n)&&(S=1);else if(typeof n=="string")S=5;else e:switch(n){case V:return ma(u.children,g,v,s);case D:S=8,g|=8;break;case M:return n=$r(12,u,s,g|2),n.elementType=M,n.lanes=v,n;case A:return n=$r(13,u,s,g),n.elementType=A,n.lanes=v,n;case ye:return n=$r(19,u,s,g),n.elementType=ye,n.lanes=v,n;case Ve:return Hc(u,g,v,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case z:S=10;break e;case j:S=9;break e;case R:S=11;break e;case Ge:S=14;break e;case pe:S=16,f=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return s=$r(S,u,s,g),s.elementType=n,s.type=f,s.lanes=v,s}function ma(n,s,u,f){return n=$r(7,n,f,s),n.lanes=u,n}function Hc(n,s,u,f){return n=$r(22,n,f,s),n.elementType=Ve,n.lanes=u,n.stateNode={isHidden:!1},n}function cf(n,s,u){return n=$r(6,n,null,s),n.lanes=u,n}function hf(n,s,u){return s=$r(4,n.children!==null?n.children:[],n.key,s),s.lanes=u,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function xx(n,s,u,f,g){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ii(0),this.expirationTimes=Ii(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ii(0),this.identifierPrefix=f,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function df(n,s,u,f,g,v,S,O,U){return n=new xx(n,s,u,O,U),s===1?(s=1,v===!0&&(s|=8)):s=0,v=$r(3,null,null,s),n.current=v,v.stateNode=n,v.memoizedState={element:f,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},Id(v),n}function Ex(n,s,u){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:fe,key:f==null?null:""+f,children:n,containerInfo:s,implementation:u}}function $g(n){if(!n)return lo;n=n._reactInternals;e:{if(qn(n)!==n||n.tag!==1)throw Error(t(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Xn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(n.tag===1){var u=n.type;if(Xn(u))return vm(n,u,s)}return s}function qg(n,s,u,f,g,v,S,O,U){return n=df(u,f,!0,n,g,v,S,O,U),n.context=$g(null),u=n.current,f=Hn(),g=go(u),v=ws(f,g),v.callback=s??null,ho(u,v,g),n.current.lanes=g,Dn(n,g,f),nr(n,f),n}function Wc(n,s,u,f){var g=s.current,v=Hn(),S=go(g);return u=$g(u),s.context===null?s.context=u:s.pendingContext=u,s=ws(v,S),s.payload={element:n},f=f===void 0?null:f,f!==null&&(s.callback=f),n=ho(g,s,S),n!==null&&(ai(n,g,S,v),xc(n,g,S)),S}function $c(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Gg(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var u=n.retryLane;n.retryLane=u!==0&&u<s?u:s}}function ff(n,s){Gg(n,s),(n=n.alternate)&&Gg(n,s)}function Tx(){return null}var Kg=typeof reportError=="function"?reportError:function(n){console.error(n)};function pf(n){this._internalRoot=n}qc.prototype.render=pf.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(t(409));Wc(n,s,null,null)},qc.prototype.unmount=pf.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;da(function(){Wc(null,n,null,null)}),s[_t]=null}};function qc(n){this._internalRoot=n}qc.prototype.unstable_scheduleHydration=function(n){if(n){var s=rs();n={blockedOn:null,target:n,priority:s};for(var u=0;u<At.length&&s!==0&&s<At[u].priority;u++);At.splice(u,0,n),u===0&&ki(n)}};function mf(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Gc(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Zg(){}function Ix(n,s,u,f,g){if(g){if(typeof f=="function"){var v=f;f=function(){var ee=$c(S);v.call(ee)}}var S=qg(s,f,n,0,null,!1,!1,"",Zg);return n._reactRootContainer=S,n[_t]=S.current,ro(n.nodeType===8?n.parentNode:n),da(),S}for(;g=n.lastChild;)n.removeChild(g);if(typeof f=="function"){var O=f;f=function(){var ee=$c(U);O.call(ee)}}var U=df(n,0,!1,null,null,!1,!1,"",Zg);return n._reactRootContainer=U,n[_t]=U.current,ro(n.nodeType===8?n.parentNode:n),da(function(){Wc(s,U,u,f)}),U}function Kc(n,s,u,f,g){var v=u._reactRootContainer;if(v){var S=v;if(typeof g=="function"){var O=g;g=function(){var U=$c(S);O.call(U)}}Wc(s,S,n,g)}else S=Ix(u,s,n,g,f);return $c(S)}ts=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var u=Ee(s.pendingLanes);u!==0&&(ur(s,u|1),nr(s,wt()),(ht&6)===0&&(cl=wt()+500,uo()))}break;case 13:da(function(){var f=vs(n,1);if(f!==null){var g=Hn();ai(f,n,1,g)}}),ff(n,1)}},Cr=function(n){if(n.tag===13){var s=vs(n,134217728);if(s!==null){var u=Hn();ai(s,n,134217728,u)}ff(n,134217728)}},ns=function(n){if(n.tag===13){var s=go(n),u=vs(n,s);if(u!==null){var f=Hn();ai(u,n,s,f)}ff(n,s)}},rs=function(){return tt},Si=function(n,s){var u=tt;try{return tt=n,s()}finally{tt=u}},xr=function(n,s,u){switch(s){case"input":if(or(n,u),s=u.name,u.type==="radio"&&s!=null){for(u=n;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<u.length;s++){var f=u[s];if(f!==n&&f.form===n.form){var g=Ya(f);if(!g)throw Error(t(90));jt(f),or(f,g)}}}break;case"textarea":Ra(n,u);break;case"select":s=u.value,s!=null&&Rn(n,!!u.multiple,s,!1)}},Ma=of,Oa=da;var Sx={usingClientEntryPoint:!1,Events:[ps,ms,Ya,yi,vi,of]},pu={findFiberByHostInstance:fs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Px={bundleType:pu.bundleType,version:pu.version,rendererPackageName:pu.rendererPackageName,rendererConfig:pu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Oe.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Fa(n),n===null?null:n.stateNode},findFiberByHostInstance:pu.findFiberByHostInstance||Tx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zc.isDisabled&&Zc.supportsFiber)try{Ei=Zc.inject(Px),_n=Zc}catch{}}return rr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Sx,rr.createPortal=function(n,s){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mf(s))throw Error(t(200));return Ex(n,s,null,u)},rr.createRoot=function(n,s){if(!mf(n))throw Error(t(299));var u=!1,f="",g=Kg;return s!=null&&(s.unstable_strictMode===!0&&(u=!0),s.identifierPrefix!==void 0&&(f=s.identifierPrefix),s.onRecoverableError!==void 0&&(g=s.onRecoverableError)),s=df(n,1,!1,null,null,u,!1,f,g),n[_t]=s.current,ro(n.nodeType===8?n.parentNode:n),new pf(s)},rr.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Fa(s),n=n===null?null:n.stateNode,n},rr.flushSync=function(n){return da(n)},rr.hydrate=function(n,s,u){if(!Gc(s))throw Error(t(200));return Kc(null,n,s,!0,u)},rr.hydrateRoot=function(n,s,u){if(!mf(n))throw Error(t(405));var f=u!=null&&u.hydratedSources||null,g=!1,v="",S=Kg;if(u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(v=u.identifierPrefix),u.onRecoverableError!==void 0&&(S=u.onRecoverableError)),s=qg(s,null,n,1,u??null,g,!1,v,S),n[_t]=s.current,ro(n),f)for(n=0;n<f.length;n++)u=f[n],g=u._getVersion,g=g(u._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[u,g]:s.mutableSourceEagerHydrationData.push(u,g);return new qc(s)},rr.render=function(n,s,u){if(!Gc(s))throw Error(t(200));return Kc(null,n,s,!1,u)},rr.unmountComponentAtNode=function(n){if(!Gc(n))throw Error(t(40));return n._reactRootContainer?(da(function(){Kc(null,null,n,!1,function(){n._reactRootContainer=null,n[_t]=null})}),!0):!1},rr.unstable_batchedUpdates=of,rr.unstable_renderSubtreeIntoContainer=function(n,s,u,f){if(!Gc(u))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Kc(n,s,u,!1,f)},rr.version="18.3.1-next-f1338f8080-20240426",rr}var r_;function Qy(){if(r_)return yf.exports;r_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),yf.exports=Lx(),yf.exports}var i_;function Dx(){if(i_)return Qc;i_=1;var r=Qy();return Qc.createRoot=r.createRoot,Qc.hydrateRoot=r.hydrateRoot,Qc}var Mx=Dx();const Ox=()=>{};var s_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yy=function(r){const e=[];let t=0;for(let o=0;o<r.length;o++){let a=r.charCodeAt(o);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&o+1<r.length&&(r.charCodeAt(o+1)&64512)===56320?(a=65536+((a&1023)<<10)+(r.charCodeAt(++o)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},jx=function(r){const e=[];let t=0,o=0;for(;t<r.length;){const a=r[t++];if(a<128)e[o++]=String.fromCharCode(a);else if(a>191&&a<224){const c=r[t++];e[o++]=String.fromCharCode((a&31)<<6|c&63)}else if(a>239&&a<365){const c=r[t++],p=r[t++],y=r[t++],x=((a&7)<<18|(c&63)<<12|(p&63)<<6|y&63)-65536;e[o++]=String.fromCharCode(55296+(x>>10)),e[o++]=String.fromCharCode(56320+(x&1023))}else{const c=r[t++],p=r[t++];e[o++]=String.fromCharCode((a&15)<<12|(c&63)<<6|p&63)}}return e.join("")},Jy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let a=0;a<r.length;a+=3){const c=r[a],p=a+1<r.length,y=p?r[a+1]:0,x=a+2<r.length,T=x?r[a+2]:0,k=c>>2,C=(c&3)<<4|y>>4;let N=(y&15)<<2|T>>6,H=T&63;x||(H=64,p||(N=64)),o.push(t[k],t[C],t[N],t[H])}return o.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Yy(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):jx(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let a=0;a<r.length;){const c=t[r.charAt(a++)],y=a<r.length?t[r.charAt(a)]:0;++a;const T=a<r.length?t[r.charAt(a)]:64;++a;const C=a<r.length?t[r.charAt(a)]:64;if(++a,c==null||y==null||T==null||C==null)throw new Vx;const N=c<<2|y>>4;if(o.push(N),T!==64){const H=y<<4&240|T>>2;if(o.push(H),C!==64){const $=T<<6&192|C;o.push($)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class Vx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Fx=function(r){const e=Yy(r);return Jy.encodeByteArray(e,!0)},gh=function(r){return Fx(r).replace(/\./g,"")},Xy=function(r){try{return Jy.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux=()=>zx().__FIREBASE_DEFAULTS__,Bx=()=>{if(typeof process>"u"||typeof s_>"u")return;const r=s_.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},Hx=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&Xy(r[1]);return e&&JSON.parse(e)},Oh=()=>{try{return Ox()||Ux()||Bx()||Hx()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},ev=r=>{var e,t;return(t=(e=Oh())==null?void 0:e.emulatorHosts)==null?void 0:t[r]},Wx=r=>{const e=ev(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const o=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),o]:[e.substring(0,t),o]},tv=()=>{var r;return(r=Oh())==null?void 0:r.config},nv=r=>{var e;return(e=Oh())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,o)=>{t?this.reject(t):this.resolve(o),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,o))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ll(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function rv(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qx(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},o=e||"demo-project",a=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const p={iss:`https://securetoken.google.com/${o}`,aud:o,iat:a,exp:a+3600,auth_time:a,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...r};return[gh(JSON.stringify(t)),gh(JSON.stringify(p)),""].join(".")}const Iu={};function Gx(){const r={prod:[],emulator:[]};for(const e of Object.keys(Iu))Iu[e]?r.emulator.push(e):r.prod.push(e);return r}function Kx(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let o_=!1;function iv(r,e){if(typeof window>"u"||typeof document>"u"||!Ll(window.location.host)||Iu[r]===e||Iu[r]||o_)return;Iu[r]=e;function t(N){return`__firebase__banner__${N}`}const o="__firebase__banner",c=Gx().prod.length>0;function p(){const N=document.getElementById(o);N&&N.remove()}function y(N){N.style.display="flex",N.style.background="#7faaf0",N.style.position="fixed",N.style.bottom="5px",N.style.left="5px",N.style.padding=".5em",N.style.borderRadius="5px",N.style.alignItems="center"}function x(N,H){N.setAttribute("width","24"),N.setAttribute("id",H),N.setAttribute("height","24"),N.setAttribute("viewBox","0 0 24 24"),N.setAttribute("fill","none"),N.style.marginLeft="-6px"}function T(){const N=document.createElement("span");return N.style.cursor="pointer",N.style.marginLeft="16px",N.style.fontSize="24px",N.innerHTML=" &times;",N.onclick=()=>{o_=!0,p()},N}function k(N,H){N.setAttribute("id",H),N.innerText="Learn more",N.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",N.setAttribute("target","__blank"),N.style.paddingLeft="5px",N.style.textDecoration="underline"}function C(){const N=Kx(o),H=t("text"),$=document.getElementById(H)||document.createElement("span"),Z=t("learnmore"),te=document.getElementById(Z)||document.createElement("a"),he=t("preprendIcon"),_e=document.getElementById(he)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(N.created){const Te=N.element;y(Te),k(te,Z);const Oe=T();x(_e,he),Te.append(_e,$,te,Oe),document.body.appendChild(Te)}c?($.innerText="Preview backend disconnected.",_e.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(_e.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,$.innerText="Preview backend running in this workspace."),$.setAttribute("id",H)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",C):C()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Zx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(An())}function Qx(){var e;const r=(e=Oh())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Yx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Jx(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function Xx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function eE(){const r=An();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function tE(){return!Qx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function nE(){try{return typeof indexedDB=="object"}catch{return!1}}function rE(){return new Promise((r,e)=>{try{let t=!0;const o="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(o);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(o),r(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var c;e(((c=a.error)==null?void 0:c.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE="FirebaseError";class Ls extends Error{constructor(e,t,o){super(t),this.code=e,this.customData=o,this.name=iE,Object.setPrototypeOf(this,Ls.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zu.prototype.create)}}class zu{constructor(e,t,o){this.service=e,this.serviceName=t,this.errors=o}create(e,...t){const o=t[0]||{},a=`${this.service}/${e}`,c=this.errors[e],p=c?sE(c,o):"Error",y=`${this.serviceName}: ${p} (${a}).`;return new Ls(a,y,o)}}function sE(r,e){return r.replace(oE,(t,o)=>{const a=e[o];return a!=null?String(a):`<${o}?>`})}const oE=/\{\$([^}]+)}/g;function aE(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function va(r,e){if(r===e)return!0;const t=Object.keys(r),o=Object.keys(e);for(const a of t){if(!o.includes(a))return!1;const c=r[a],p=e[a];if(a_(c)&&a_(p)){if(!va(c,p))return!1}else if(c!==p)return!1}for(const a of o)if(!t.includes(a))return!1;return!0}function a_(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uu(r){const e=[];for(const[t,o]of Object.entries(r))Array.isArray(o)?o.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(o));return e.length?"&"+e.join("&"):""}function _u(r){const e={};return r.replace(/^\?/,"").split("&").forEach(o=>{if(o){const[a,c]=o.split("=");e[decodeURIComponent(a)]=decodeURIComponent(c)}}),e}function yu(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function lE(r,e){const t=new uE(r,e);return t.subscribe.bind(t)}class uE{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(o=>{this.error(o)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,o){let a;if(e===void 0&&t===void 0&&o===void 0)throw new Error("Missing Observer.");cE(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:o},a.next===void 0&&(a.next=xf),a.error===void 0&&(a.error=xf),a.complete===void 0&&(a.complete=xf);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(o){typeof console<"u"&&console.error&&console.error(o)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function cE(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function xf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(r){return r&&r._delegate?r._delegate:r}class wa{constructor(e,t,o){this.name=e,this.instanceFactory=t,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ga="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const o=new $x;if(this.instancesDeferred.set(t,o),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&o.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(o)return null;throw a}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(fE(e))try{this.getOrInitializeService({instanceIdentifier:ga})}catch{}for(const[t,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:a});o.resolve(c)}catch{}}}}clearInstance(e=ga){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ga){return this.instances.has(e)}getOptions(e=ga){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,o=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:o,options:t});for(const[c,p]of this.instancesDeferred.entries()){const y=this.normalizeInstanceIdentifier(c);o===y&&p.resolve(a)}return a}onInit(e,t){const o=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(o)??new Set;a.add(e),this.onInitCallbacks.set(o,a);const c=this.instances.get(o);return c&&e(c,o),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const o=this.onInitCallbacks.get(t);if(o)for(const a of o)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let o=this.instances.get(e);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:dE(e),options:t}),this.instances.set(e,o),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(o,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,o)}catch{}return o||null}normalizeInstanceIdentifier(e=ga){return this.component?this.component.multipleInstances?e:ga:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function dE(r){return r===ga?void 0:r}function fE(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new hE(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var it;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(it||(it={}));const mE={debug:it.DEBUG,verbose:it.VERBOSE,info:it.INFO,warn:it.WARN,error:it.ERROR,silent:it.SILENT},gE=it.INFO,_E={[it.DEBUG]:"log",[it.VERBOSE]:"log",[it.INFO]:"info",[it.WARN]:"warn",[it.ERROR]:"error"},yE=(r,e,...t)=>{if(e<r.logLevel)return;const o=new Date().toISOString(),a=_E[e];if(a)console[a](`[${o}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class dp{constructor(e){this.name=e,this._logLevel=gE,this._logHandler=yE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in it))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?mE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,it.DEBUG,...e),this._logHandler(this,it.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,it.VERBOSE,...e),this._logHandler(this,it.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,it.INFO,...e),this._logHandler(this,it.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,it.WARN,...e),this._logHandler(this,it.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,it.ERROR,...e),this._logHandler(this,it.ERROR,...e)}}const vE=(r,e)=>e.some(t=>r instanceof t);let l_,u_;function wE(){return l_||(l_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function xE(){return u_||(u_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const sv=new WeakMap,Mf=new WeakMap,ov=new WeakMap,Ef=new WeakMap,fp=new WeakMap;function EE(r){const e=new Promise((t,o)=>{const a=()=>{r.removeEventListener("success",c),r.removeEventListener("error",p)},c=()=>{t(Po(r.result)),a()},p=()=>{o(r.error),a()};r.addEventListener("success",c),r.addEventListener("error",p)});return e.then(t=>{t instanceof IDBCursor&&sv.set(t,r)}).catch(()=>{}),fp.set(e,r),e}function TE(r){if(Mf.has(r))return;const e=new Promise((t,o)=>{const a=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",p),r.removeEventListener("abort",p)},c=()=>{t(),a()},p=()=>{o(r.error||new DOMException("AbortError","AbortError")),a()};r.addEventListener("complete",c),r.addEventListener("error",p),r.addEventListener("abort",p)});Mf.set(r,e)}let Of={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Mf.get(r);if(e==="objectStoreNames")return r.objectStoreNames||ov.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Po(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function IE(r){Of=r(Of)}function SE(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const o=r.call(Tf(this),e,...t);return ov.set(o,e.sort?e.sort():[e]),Po(o)}:xE().includes(r)?function(...e){return r.apply(Tf(this),e),Po(sv.get(this))}:function(...e){return Po(r.apply(Tf(this),e))}}function PE(r){return typeof r=="function"?SE(r):(r instanceof IDBTransaction&&TE(r),vE(r,wE())?new Proxy(r,Of):r)}function Po(r){if(r instanceof IDBRequest)return EE(r);if(Ef.has(r))return Ef.get(r);const e=PE(r);return e!==r&&(Ef.set(r,e),fp.set(e,r)),e}const Tf=r=>fp.get(r);function kE(r,e,{blocked:t,upgrade:o,blocking:a,terminated:c}={}){const p=indexedDB.open(r,e),y=Po(p);return o&&p.addEventListener("upgradeneeded",x=>{o(Po(p.result),x.oldVersion,x.newVersion,Po(p.transaction),x)}),t&&p.addEventListener("blocked",x=>t(x.oldVersion,x.newVersion,x)),y.then(x=>{c&&x.addEventListener("close",()=>c()),a&&x.addEventListener("versionchange",T=>a(T.oldVersion,T.newVersion,T))}).catch(()=>{}),y}const CE=["get","getKey","getAll","getAllKeys","count"],bE=["put","add","delete","clear"],If=new Map;function c_(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(If.get(e))return If.get(e);const t=e.replace(/FromIndex$/,""),o=e!==t,a=bE.includes(t);if(!(t in(o?IDBIndex:IDBObjectStore).prototype)||!(a||CE.includes(t)))return;const c=async function(p,...y){const x=this.transaction(p,a?"readwrite":"readonly");let T=x.store;return o&&(T=T.index(y.shift())),(await Promise.all([T[t](...y),a&&x.done]))[0]};return If.set(e,c),c}IE(r=>({...r,get:(e,t,o)=>c_(e,t)||r.get(e,t,o),has:(e,t)=>!!c_(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(NE(t)){const o=t.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(t=>t).join(" ")}}function NE(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const jf="@firebase/app",h_="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cs=new dp("@firebase/app"),RE="@firebase/app-compat",LE="@firebase/analytics-compat",DE="@firebase/analytics",ME="@firebase/app-check-compat",OE="@firebase/app-check",jE="@firebase/auth",VE="@firebase/auth-compat",FE="@firebase/database",zE="@firebase/data-connect",UE="@firebase/database-compat",BE="@firebase/functions",HE="@firebase/functions-compat",WE="@firebase/installations",$E="@firebase/installations-compat",qE="@firebase/messaging",GE="@firebase/messaging-compat",KE="@firebase/performance",ZE="@firebase/performance-compat",QE="@firebase/remote-config",YE="@firebase/remote-config-compat",JE="@firebase/storage",XE="@firebase/storage-compat",e1="@firebase/firestore",t1="@firebase/ai",n1="@firebase/firestore-compat",r1="firebase",i1="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vf="[DEFAULT]",s1={[jf]:"fire-core",[RE]:"fire-core-compat",[DE]:"fire-analytics",[LE]:"fire-analytics-compat",[OE]:"fire-app-check",[ME]:"fire-app-check-compat",[jE]:"fire-auth",[VE]:"fire-auth-compat",[FE]:"fire-rtdb",[zE]:"fire-data-connect",[UE]:"fire-rtdb-compat",[BE]:"fire-fn",[HE]:"fire-fn-compat",[WE]:"fire-iid",[$E]:"fire-iid-compat",[qE]:"fire-fcm",[GE]:"fire-fcm-compat",[KE]:"fire-perf",[ZE]:"fire-perf-compat",[QE]:"fire-rc",[YE]:"fire-rc-compat",[JE]:"fire-gcs",[XE]:"fire-gcs-compat",[e1]:"fire-fst",[n1]:"fire-fst-compat",[t1]:"fire-vertex","fire-js":"fire-js",[r1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _h=new Map,o1=new Map,Ff=new Map;function d_(r,e){try{r.container.addComponent(e)}catch(t){Cs.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Sl(r){const e=r.name;if(Ff.has(e))return Cs.debug(`There were multiple attempts to register component ${e}.`),!1;Ff.set(e,r);for(const t of _h.values())d_(t,r);for(const t of o1.values())d_(t,r);return!0}function pp(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function qr(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ko=new zu("app","Firebase",a1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(e,t,o){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new wa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ko.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dl=i1;function av(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const o={name:Vf,automaticDataCollectionEnabled:!0,...e},a=o.name;if(typeof a!="string"||!a)throw ko.create("bad-app-name",{appName:String(a)});if(t||(t=tv()),!t)throw ko.create("no-options");const c=_h.get(a);if(c){if(va(t,c.options)&&va(o,c.config))return c;throw ko.create("duplicate-app",{appName:a})}const p=new pE(a);for(const x of Ff.values())p.addComponent(x);const y=new l1(t,o,p);return _h.set(a,y),y}function lv(r=Vf){const e=_h.get(r);if(!e&&r===Vf&&tv())return av();if(!e)throw ko.create("no-app",{appName:r});return e}function Co(r,e,t){let o=s1[r]??r;t&&(o+=`-${t}`);const a=o.match(/\s|\//),c=e.match(/\s|\//);if(a||c){const p=[`Unable to register library "${o}" with version "${e}":`];a&&p.push(`library name "${o}" contains illegal characters (whitespace or "/")`),a&&c&&p.push("and"),c&&p.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Cs.warn(p.join(" "));return}Sl(new wa(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1="firebase-heartbeat-database",c1=1,Au="firebase-heartbeat-store";let Sf=null;function uv(){return Sf||(Sf=kE(u1,c1,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Au)}catch(t){console.warn(t)}}}}).catch(r=>{throw ko.create("idb-open",{originalErrorMessage:r.message})})),Sf}async function h1(r){try{const t=(await uv()).transaction(Au),o=await t.objectStore(Au).get(cv(r));return await t.done,o}catch(e){if(e instanceof Ls)Cs.warn(e.message);else{const t=ko.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Cs.warn(t.message)}}}async function f_(r,e){try{const o=(await uv()).transaction(Au,"readwrite");await o.objectStore(Au).put(e,cv(r)),await o.done}catch(t){if(t instanceof Ls)Cs.warn(t.message);else{const o=ko.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Cs.warn(o.message)}}}function cv(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1=1024,f1=30;class p1{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new g1(t),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=p_();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(p=>p.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:a}),this._heartbeatsCache.heartbeats.length>f1){const p=_1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(p,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(o){Cs.warn(o)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=p_(),{heartbeatsToSend:o,unsentEntries:a}=m1(this._heartbeatsCache.heartbeats),c=gh(JSON.stringify({version:2,heartbeats:o}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(t){return Cs.warn(t),""}}}function p_(){return new Date().toISOString().substring(0,10)}function m1(r,e=d1){const t=[];let o=r.slice();for(const a of r){const c=t.find(p=>p.agent===a.agent);if(c){if(c.dates.push(a.date),m_(t)>e){c.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),m_(t)>e){t.pop();break}o=o.slice(1)}return{heartbeatsToSend:t,unsentEntries:o}}class g1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return nE()?rE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await h1(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return f_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return f_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function m_(r){return gh(JSON.stringify({version:2,heartbeats:r})).length}function _1(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let o=1;o<r.length;o++)r[o].date<t&&(t=r[o].date,e=o);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1(r){Sl(new wa("platform-logger",e=>new AE(e),"PRIVATE")),Sl(new wa("heartbeat",e=>new p1(e),"PRIVATE")),Co(jf,h_,r),Co(jf,h_,"esm2020"),Co("fire-js","")}y1("");function hv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const v1=hv,dv=new zu("auth","Firebase",hv());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yh=new dp("@firebase/auth");function w1(r,...e){yh.logLevel<=it.WARN&&yh.warn(`Auth (${Dl}): ${r}`,...e)}function ih(r,...e){yh.logLevel<=it.ERROR&&yh.error(`Auth (${Dl}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ci(r,...e){throw mp(r,...e)}function Fi(r,...e){return mp(r,...e)}function fv(r,e,t){const o={...v1(),[e]:t};return new zu("auth","Firebase",o).create(e,{appName:r.name})}function Ss(r){return fv(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function mp(r,...e){if(typeof r!="string"){const t=e[0],o=[...e.slice(1)];return o[0]&&(o[0].appName=r.name),r._errorFactory.create(t,...o)}return dv.create(r,...e)}function We(r,e,...t){if(!r)throw mp(e,...t)}function Ts(r){const e="INTERNAL ASSERTION FAILED: "+r;throw ih(e),new Error(e)}function bs(r,e){r||Ts(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zf(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function x1(){return g_()==="http:"||g_()==="https:"}function g_(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(x1()||Jx()||"connection"in navigator)?navigator.onLine:!0}function T1(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(e,t){this.shortDelay=e,this.longDelay=t,bs(t>e,"Short delay should be less than long delay!"),this.isMobile=Zx()||Xx()}get(){return E1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gp(r,e){bs(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv{static initialize(e,t,o){this.fetchImpl=e,t&&(this.headersImpl=t),o&&(this.responseImpl=o)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ts("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ts("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ts("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],P1=new Bu(3e4,6e4);function jo(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Vo(r,e,t,o,a={}){return mv(r,a,async()=>{let c={},p={};o&&(e==="GET"?p=o:c={body:JSON.stringify(o)});const y=Uu({key:r.config.apiKey,...p}).slice(1),x=await r._getAdditionalHeaders();x["Content-Type"]="application/json",r.languageCode&&(x["X-Firebase-Locale"]=r.languageCode);const T={method:e,headers:x,...c};return Yx()||(T.referrerPolicy="no-referrer"),r.emulatorConfig&&Ll(r.emulatorConfig.host)&&(T.credentials="include"),pv.fetch()(await gv(r,r.config.apiHost,t,y),T)})}async function mv(r,e,t){r._canInitEmulator=!1;const o={...I1,...e};try{const a=new C1(r),c=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const p=await c.json();if("needConfirmation"in p)throw Yc(r,"account-exists-with-different-credential",p);if(c.ok&&!("errorMessage"in p))return p;{const y=c.ok?p.errorMessage:p.error.message,[x,T]=y.split(" : ");if(x==="FEDERATED_USER_ID_ALREADY_LINKED")throw Yc(r,"credential-already-in-use",p);if(x==="EMAIL_EXISTS")throw Yc(r,"email-already-in-use",p);if(x==="USER_DISABLED")throw Yc(r,"user-disabled",p);const k=o[x]||x.toLowerCase().replace(/[_\s]+/g,"-");if(T)throw fv(r,k,T);ci(r,k)}}catch(a){if(a instanceof Ls)throw a;ci(r,"network-request-failed",{message:String(a)})}}async function Hu(r,e,t,o,a={}){const c=await Vo(r,e,t,o,a);return"mfaPendingCredential"in c&&ci(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function gv(r,e,t,o){const a=`${e}${t}?${o}`,c=r,p=c.config.emulator?gp(r.config,a):`${r.config.apiScheme}://${a}`;return S1.includes(t)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(p).toString():p}function k1(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class C1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,o)=>{this.timer=setTimeout(()=>o(Fi(this.auth,"network-request-failed")),P1.get())})}}function Yc(r,e,t){const o={appName:r.name};t.email&&(o.email=t.email),t.phoneNumber&&(o.phoneNumber=t.phoneNumber);const a=Fi(r,e,o);return a.customData._tokenResponse=t,a}function __(r){return r!==void 0&&r.enterprise!==void 0}class b1{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return k1(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function A1(r,e){return Vo(r,"GET","/v2/recaptchaConfig",jo(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N1(r,e){return Vo(r,"POST","/v1/accounts:delete",e)}async function vh(r,e){return Vo(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Su(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function R1(r,e=!1){const t=Ut(r),o=await t.getIdToken(e),a=_p(o);We(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const c=typeof a.firebase=="object"?a.firebase:void 0,p=c==null?void 0:c.sign_in_provider;return{claims:a,token:o,authTime:Su(Pf(a.auth_time)),issuedAtTime:Su(Pf(a.iat)),expirationTime:Su(Pf(a.exp)),signInProvider:p||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function Pf(r){return Number(r)*1e3}function _p(r){const[e,t,o]=r.split(".");if(e===void 0||t===void 0||o===void 0)return ih("JWT malformed, contained fewer than 3 sections"),null;try{const a=Xy(t);return a?JSON.parse(a):(ih("Failed to decode base64 JWT payload"),null)}catch(a){return ih("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function y_(r){const e=_p(r);return We(e,"internal-error"),We(typeof e.exp<"u","internal-error"),We(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nu(r,e,t=!1){if(t)return e;try{return await e}catch(o){throw o instanceof Ls&&L1(o)&&r.auth.currentUser===r&&await r.auth.signOut(),o}}function L1({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const o=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Su(this.lastLoginAt),this.creationTime=Su(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wh(r){var C;const e=r.auth,t=await r.getIdToken(),o=await Nu(r,vh(e,{idToken:t}));We(o==null?void 0:o.users.length,e,"internal-error");const a=o.users[0];r._notifyReloadListener(a);const c=(C=a.providerUserInfo)!=null&&C.length?_v(a.providerUserInfo):[],p=O1(r.providerData,c),y=r.isAnonymous,x=!(r.email&&a.passwordHash)&&!(p!=null&&p.length),T=y?x:!1,k={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:p,metadata:new Uf(a.createdAt,a.lastLoginAt),isAnonymous:T};Object.assign(r,k)}async function M1(r){const e=Ut(r);await wh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function O1(r,e){return[...r.filter(o=>!e.some(a=>a.providerId===o.providerId)),...e]}function _v(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j1(r,e){const t=await mv(r,{},async()=>{const o=Uu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:c}=r.config,p=await gv(r,a,"/v1/token",`key=${c}`),y=await r._getAdditionalHeaders();y["Content-Type"]="application/x-www-form-urlencoded";const x={method:"POST",headers:y,body:o};return r.emulatorConfig&&Ll(r.emulatorConfig.host)&&(x.credentials="include"),pv.fetch()(p,x)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function V1(r,e){return Vo(r,"POST","/v2/accounts:revokeToken",jo(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){We(e.idToken,"internal-error"),We(typeof e.idToken<"u","internal-error"),We(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):y_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){We(e.length!==0,"internal-error");const t=y_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(We(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:o,refreshToken:a,expiresIn:c}=await j1(e,t);this.updateTokensAndExpiration(o,a,Number(c))}updateTokensAndExpiration(e,t,o){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+o*1e3}static fromJSON(e,t){const{refreshToken:o,accessToken:a,expirationTime:c}=t,p=new yl;return o&&(We(typeof o=="string","internal-error",{appName:e}),p.refreshToken=o),a&&(We(typeof a=="string","internal-error",{appName:e}),p.accessToken=a),c&&(We(typeof c=="number","internal-error",{appName:e}),p.expirationTime=c),p}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new yl,this.toJSON())}_performRefresh(){return Ts("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wo(r,e){We(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class li{constructor({uid:e,auth:t,stsTokenManager:o,...a}){this.providerId="firebase",this.proactiveRefresh=new D1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Uf(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Nu(this,this.stsTokenManager.getToken(this.auth,e));return We(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return R1(this,e)}reload(){return M1(this)}_assign(e){this!==e&&(We(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new li({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){We(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let o=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),o=!0),t&&await wh(this),await this.auth._persistUserIfCurrent(this),o&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(qr(this.auth.app))return Promise.reject(Ss(this.auth));const e=await this.getIdToken();return await Nu(this,N1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const o=t.displayName??void 0,a=t.email??void 0,c=t.phoneNumber??void 0,p=t.photoURL??void 0,y=t.tenantId??void 0,x=t._redirectEventId??void 0,T=t.createdAt??void 0,k=t.lastLoginAt??void 0,{uid:C,emailVerified:N,isAnonymous:H,providerData:$,stsTokenManager:Z}=t;We(C&&Z,e,"internal-error");const te=yl.fromJSON(this.name,Z);We(typeof C=="string",e,"internal-error"),wo(o,e.name),wo(a,e.name),We(typeof N=="boolean",e,"internal-error"),We(typeof H=="boolean",e,"internal-error"),wo(c,e.name),wo(p,e.name),wo(y,e.name),wo(x,e.name),wo(T,e.name),wo(k,e.name);const he=new li({uid:C,auth:e,email:a,emailVerified:N,displayName:o,isAnonymous:H,photoURL:p,phoneNumber:c,tenantId:y,stsTokenManager:te,createdAt:T,lastLoginAt:k});return $&&Array.isArray($)&&(he.providerData=$.map(_e=>({..._e}))),x&&(he._redirectEventId=x),he}static async _fromIdTokenResponse(e,t,o=!1){const a=new yl;a.updateFromServerResponse(t);const c=new li({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:o});return await wh(c),c}static async _fromGetAccountInfoResponse(e,t,o){const a=t.users[0];We(a.localId!==void 0,"internal-error");const c=a.providerUserInfo!==void 0?_v(a.providerUserInfo):[],p=!(a.email&&a.passwordHash)&&!(c!=null&&c.length),y=new yl;y.updateFromIdToken(o);const x=new li({uid:a.localId,auth:e,stsTokenManager:y,isAnonymous:p}),T={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new Uf(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(c!=null&&c.length)};return Object.assign(x,T),x}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v_=new Map;function Is(r){bs(r instanceof Function,"Expected a class definition");let e=v_.get(r);return e?(bs(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,v_.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}yv.type="NONE";const w_=yv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sh(r,e,t){return`firebase:${r}:${e}:${t}`}class vl{constructor(e,t,o){this.persistence=e,this.auth=t,this.userKey=o;const{config:a,name:c}=this.auth;this.fullUserKey=sh(this.userKey,a.apiKey,c),this.fullPersistenceKey=sh("persistence",a.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await vh(this.auth,{idToken:e}).catch(()=>{});return t?li._fromGetAccountInfoResponse(this.auth,t,e):null}return li._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,o="authUser"){if(!t.length)return new vl(Is(w_),e,o);const a=(await Promise.all(t.map(async T=>{if(await T._isAvailable())return T}))).filter(T=>T);let c=a[0]||Is(w_);const p=sh(o,e.config.apiKey,e.name);let y=null;for(const T of t)try{const k=await T._get(p);if(k){let C;if(typeof k=="string"){const N=await vh(e,{idToken:k}).catch(()=>{});if(!N)break;C=await li._fromGetAccountInfoResponse(e,N,k)}else C=li._fromJSON(e,k);T!==c&&(y=C),c=T;break}}catch{}const x=a.filter(T=>T._shouldAllowMigration);return!c._shouldAllowMigration||!x.length?new vl(c,e,o):(c=x[0],y&&await c._set(p,y.toJSON()),await Promise.all(t.map(async T=>{if(T!==c)try{await T._remove(p)}catch{}})),new vl(c,e,o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x_(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Ev(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(vv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Iv(e))return"Blackberry";if(Sv(e))return"Webos";if(wv(e))return"Safari";if((e.includes("chrome/")||xv(e))&&!e.includes("edge/"))return"Chrome";if(Tv(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,o=r.match(t);if((o==null?void 0:o.length)===2)return o[1]}return"Other"}function vv(r=An()){return/firefox\//i.test(r)}function wv(r=An()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function xv(r=An()){return/crios\//i.test(r)}function Ev(r=An()){return/iemobile/i.test(r)}function Tv(r=An()){return/android/i.test(r)}function Iv(r=An()){return/blackberry/i.test(r)}function Sv(r=An()){return/webos/i.test(r)}function yp(r=An()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function F1(r=An()){var e;return yp(r)&&!!((e=window.navigator)!=null&&e.standalone)}function z1(){return eE()&&document.documentMode===10}function Pv(r=An()){return yp(r)||Tv(r)||Sv(r)||Iv(r)||/windows phone/i.test(r)||Ev(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kv(r,e=[]){let t;switch(r){case"Browser":t=x_(An());break;case"Worker":t=`${x_(An())}-${r}`;break;default:t=r}const o=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Dl}/${o}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const o=c=>new Promise((p,y)=>{try{const x=e(c);p(x)}catch(x){y(x)}});o.onAbort=t,this.queue.push(o);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const o of this.queue)await o(e),o.onAbort&&t.push(o.onAbort)}catch(o){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:o==null?void 0:o.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B1(r,e={}){return Vo(r,"GET","/v2/passwordPolicy",jo(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H1=6;class W1{constructor(e){var o;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??H1,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((o=e.allowedNonAlphanumericCharacters)==null?void 0:o.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const o=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;o&&(t.meetsMinPasswordLength=e.length>=o),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let o;for(let a=0;a<e.length;a++)o=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,o>="a"&&o<="z",o>="A"&&o<="Z",o>="0"&&o<="9",this.allowedNonAlphanumericCharacters.includes(o))}updatePasswordCharacterOptionsStatuses(e,t,o,a,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=o)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(e,t,o,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=o,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new E_(this),this.idTokenSubscription=new E_(this),this.beforeStateQueue=new U1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=dv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Is(t)),this._initializationPromise=this.queue(async()=>{var o,a,c;if(!this._deleted&&(this.persistenceManager=await vl.create(this,e),(o=this._resolvePersistenceManagerAvailable)==null||o.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((c=this.currentUser)==null?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await vh(this,{idToken:e}),o=await li._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(o)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var c;if(qr(this.app)){const p=this.app.settings.authIdToken;return p?new Promise(y=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(p).then(y,y))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let o=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const p=(c=this.redirectUser)==null?void 0:c._redirectEventId,y=o==null?void 0:o._redirectEventId,x=await this.tryRedirectSignIn(e);(!p||p===y)&&(x!=null&&x.user)&&(o=x.user,a=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(o)}catch(p){o=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(p))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return We(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await wh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=T1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(qr(this.app))return Promise.reject(Ss(this));const t=e?Ut(e):null;return t&&We(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&We(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return qr(this.app)?Promise.reject(Ss(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return qr(this.app)?Promise.reject(Ss(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Is(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await B1(this),t=new W1(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new zu("auth","Firebase",e())}onAuthStateChanged(e,t,o){return this.registerStateListener(this.authStateSubscription,e,t,o)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,o){return this.registerStateListener(this.idTokenSubscription,e,t,o)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const o=this.onAuthStateChanged(()=>{o(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),o={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(o.tenantId=this.tenantId),await V1(this,o)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const o=await this.getOrInitRedirectPersistenceManager(t);return e===null?o.removeCurrentUser():o.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Is(e)||this._popupRedirectResolver;We(t,this,"argument-error"),this.redirectPersistenceManager=await vl.create(this,[Is(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,o;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((o=this.redirectUser)==null?void 0:o._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,o,a){if(this._deleted)return()=>{};const c=typeof t=="function"?t:t.next.bind(t);let p=!1;const y=this._isInitialized?Promise.resolve():this._initializationPromise;if(We(y,this,"internal-error"),y.then(()=>{p||c(this.currentUser)}),typeof t=="function"){const x=e.addObserver(t,o,a);return()=>{p=!0,x()}}else{const x=e.addObserver(t);return()=>{p=!0,x()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return We(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=kv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const o=await this._getAppCheckToken();return o&&(e["X-Firebase-AppCheck"]=o),e}async _getAppCheckToken(){var t;if(qr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&w1(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Pa(r){return Ut(r)}class E_{constructor(e){this.auth=e,this.observer=null,this.addObserver=lE(t=>this.observer=t)}get next(){return We(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function q1(r){jh=r}function Cv(r){return jh.loadJS(r)}function G1(){return jh.recaptchaEnterpriseScript}function K1(){return jh.gapiScript}function Z1(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class Q1{constructor(){this.enterprise=new Y1}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Y1{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const J1="recaptcha-enterprise",bv="NO_RECAPTCHA";class X1{constructor(e){this.type=J1,this.auth=Pa(e)}async verify(e="verify",t=!1){async function o(c){if(!t){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(p,y)=>{A1(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(x=>{if(x.recaptchaKey===void 0)y(new Error("recaptcha Enterprise site key undefined"));else{const T=new b1(x);return c.tenantId==null?c._agentRecaptchaConfig=T:c._tenantRecaptchaConfigs[c.tenantId]=T,p(T.siteKey)}}).catch(x=>{y(x)})})}function a(c,p,y){const x=window.grecaptcha;__(x)?x.enterprise.ready(()=>{x.enterprise.execute(c,{action:e}).then(T=>{p(T)}).catch(()=>{p(bv)})}):y(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Q1().execute("siteKey",{action:"verify"}):new Promise((c,p)=>{o(this.auth).then(y=>{if(!t&&__(window.grecaptcha))a(y,c,p);else{if(typeof window>"u"){p(new Error("RecaptchaVerifier is only supported in browser"));return}let x=G1();x.length!==0&&(x+=y),Cv(x).then(()=>{a(y,c,p)}).catch(T=>{p(T)})}}).catch(y=>{p(y)})})}}async function T_(r,e,t,o=!1,a=!1){const c=new X1(r);let p;if(a)p=bv;else try{p=await c.verify(t)}catch{p=await c.verify(t,!0)}const y={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in y){const x=y.phoneEnrollmentInfo.phoneNumber,T=y.phoneEnrollmentInfo.recaptchaToken;Object.assign(y,{phoneEnrollmentInfo:{phoneNumber:x,recaptchaToken:T,captchaResponse:p,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in y){const x=y.phoneSignInInfo.recaptchaToken;Object.assign(y,{phoneSignInInfo:{recaptchaToken:x,captchaResponse:p,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return y}return o?Object.assign(y,{captchaResp:p}):Object.assign(y,{captchaResponse:p}),Object.assign(y,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(y,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),y}async function Bf(r,e,t,o,a){var c;if((c=r._getRecaptchaConfig())!=null&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const p=await T_(r,e,t,t==="getOobCode");return o(r,p)}else return o(r,e).catch(async p=>{if(p.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const y=await T_(r,e,t,t==="getOobCode");return o(r,y)}else return Promise.reject(p)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eT(r,e){const t=pp(r,"auth");if(t.isInitialized()){const a=t.getImmediate(),c=t.getOptions();if(va(c,e??{}))return a;ci(a,"already-initialized")}return t.initialize({options:e})}function tT(r,e){const t=(e==null?void 0:e.persistence)||[],o=(Array.isArray(t)?t:[t]).map(Is);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(o,e==null?void 0:e.popupRedirectResolver)}function nT(r,e,t){const o=Pa(r);We(/^https?:\/\//.test(e),o,"invalid-emulator-scheme");const a=!1,c=Av(e),{host:p,port:y}=rT(e),x=y===null?"":`:${y}`,T={url:`${c}//${p}${x}/`},k=Object.freeze({host:p,port:y,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!o._canInitEmulator){We(o.config.emulator&&o.emulatorConfig,o,"emulator-config-failed"),We(va(T,o.config.emulator)&&va(k,o.emulatorConfig),o,"emulator-config-failed");return}o.config.emulator=T,o.emulatorConfig=k,o.settings.appVerificationDisabledForTesting=!0,Ll(p)?(rv(`${c}//${p}${x}`),iv("Auth",!0)):iT()}function Av(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function rT(r){const e=Av(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const o=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(o);if(a){const c=a[1];return{host:c,port:I_(o.substr(c.length+1))}}else{const[c,p]=o.split(":");return{host:c,port:I_(p)}}}function I_(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function iT(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ts("not implemented")}_getIdTokenResponse(e){return Ts("not implemented")}_linkToIdToken(e,t){return Ts("not implemented")}_getReauthenticationResolver(e){return Ts("not implemented")}}async function sT(r,e){return Vo(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oT(r,e){return Hu(r,"POST","/v1/accounts:signInWithPassword",jo(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aT(r,e){return Hu(r,"POST","/v1/accounts:signInWithEmailLink",jo(r,e))}async function lT(r,e){return Hu(r,"POST","/v1/accounts:signInWithEmailLink",jo(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru extends vp{constructor(e,t,o,a=null){super("password",o),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new Ru(e,t,"password")}static _fromEmailAndCode(e,t,o=null){return new Ru(e,t,"emailLink",o)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Bf(e,t,"signInWithPassword",oT);case"emailLink":return aT(e,{email:this._email,oobCode:this._password});default:ci(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const o={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Bf(e,o,"signUpPassword",sT);case"emailLink":return lT(e,{idToken:t,email:this._email,oobCode:this._password});default:ci(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wl(r,e){return Hu(r,"POST","/v1/accounts:signInWithIdp",jo(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT="http://localhost";class xa extends vp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new xa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ci("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:o,signInMethod:a,...c}=t;if(!o||!a)return null;const p=new xa(o,a);return p.idToken=c.idToken||void 0,p.accessToken=c.accessToken||void 0,p.secret=c.secret,p.nonce=c.nonce,p.pendingToken=c.pendingToken||null,p}_getIdTokenResponse(e){const t=this.buildRequest();return wl(e,t)}_linkToIdToken(e,t){const o=this.buildRequest();return o.idToken=t,wl(e,o)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,wl(e,t)}buildRequest(){const e={requestUri:uT,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Uu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cT(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function hT(r){const e=_u(yu(r)).link,t=e?_u(yu(e)).deep_link_id:null,o=_u(yu(r)).deep_link_id;return(o?_u(yu(o)).link:null)||o||t||e||r}class wp{constructor(e){const t=_u(yu(e)),o=t.apiKey??null,a=t.oobCode??null,c=cT(t.mode??null);We(o&&a&&c,"argument-error"),this.apiKey=o,this.operation=c,this.code=a,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=hT(e);try{return new wp(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(){this.providerId=ka.PROVIDER_ID}static credential(e,t){return Ru._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const o=wp.parseLink(t);return We(o,"argument-error"),Ru._fromEmailAndCode(e,o.code,o.tenantId)}}ka.PROVIDER_ID="password";ka.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ka.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu extends Nv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo extends Wu{constructor(){super("facebook.com")}static credential(e){return xa._fromParams({providerId:xo.PROVIDER_ID,signInMethod:xo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xo.credentialFromTaggedObject(e)}static credentialFromError(e){return xo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xo.credential(e.oauthAccessToken)}catch{return null}}}xo.FACEBOOK_SIGN_IN_METHOD="facebook.com";xo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo extends Wu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return xa._fromParams({providerId:Eo.PROVIDER_ID,signInMethod:Eo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Eo.credentialFromTaggedObject(e)}static credentialFromError(e){return Eo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:o}=e;if(!t&&!o)return null;try{return Eo.credential(t,o)}catch{return null}}}Eo.GOOGLE_SIGN_IN_METHOD="google.com";Eo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To extends Wu{constructor(){super("github.com")}static credential(e){return xa._fromParams({providerId:To.PROVIDER_ID,signInMethod:To.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return To.credentialFromTaggedObject(e)}static credentialFromError(e){return To.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return To.credential(e.oauthAccessToken)}catch{return null}}}To.GITHUB_SIGN_IN_METHOD="github.com";To.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io extends Wu{constructor(){super("twitter.com")}static credential(e,t){return xa._fromParams({providerId:Io.PROVIDER_ID,signInMethod:Io.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Io.credentialFromTaggedObject(e)}static credentialFromError(e){return Io.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:o}=e;if(!t||!o)return null;try{return Io.credential(t,o)}catch{return null}}}Io.TWITTER_SIGN_IN_METHOD="twitter.com";Io.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dT(r,e){return Hu(r,"POST","/v1/accounts:signUp",jo(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,o,a=!1){const c=await li._fromIdTokenResponse(e,o,a),p=S_(o);return new Ea({user:c,providerId:p,_tokenResponse:o,operationType:t})}static async _forOperation(e,t,o){await e._updateTokensIfNecessary(o,!0);const a=S_(o);return new Ea({user:e,providerId:a,_tokenResponse:o,operationType:t})}}function S_(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh extends Ls{constructor(e,t,o,a){super(t.code,t.message),this.operationType=o,this.user=a,Object.setPrototypeOf(this,xh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:o}}static _fromErrorAndOperation(e,t,o,a){return new xh(e,t,o,a)}}function Rv(r,e,t,o){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?xh._fromErrorAndOperation(r,c,e,o):c})}async function fT(r,e,t=!1){const o=await Nu(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Ea._forOperation(r,"link",o)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lv(r,e,t=!1){const{auth:o}=r;if(qr(o.app))return Promise.reject(Ss(o));const a="reauthenticate";try{const c=await Nu(r,Rv(o,a,e,r),t);We(c.idToken,o,"internal-error");const p=_p(c.idToken);We(p,o,"internal-error");const{sub:y}=p;return We(r.uid===y,o,"user-mismatch"),Ea._forOperation(r,a,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&ci(o,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dv(r,e,t=!1){if(qr(r.app))return Promise.reject(Ss(r));const o="signIn",a=await Rv(r,o,e),c=await Ea._fromIdTokenResponse(r,o,a);return t||await r._updateCurrentUser(c.user),c}async function pT(r,e){return Dv(Pa(r),e)}async function mT(r,e){return Lv(Ut(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mv(r){const e=Pa(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function gT(r,e,t){if(qr(r.app))return Promise.reject(Ss(r));const o=Pa(r),p=await Bf(o,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",dT).catch(x=>{throw x.code==="auth/password-does-not-meet-requirements"&&Mv(r),x}),y=await Ea._fromIdTokenResponse(o,"signIn",p);return await o._updateCurrentUser(y.user),y}function _T(r,e,t){return qr(r.app)?Promise.reject(Ss(r)):pT(Ut(r),ka.credential(e,t)).catch(async o=>{throw o.code==="auth/password-does-not-meet-requirements"&&Mv(r),o})}function yT(r,e,t,o){return Ut(r).onIdTokenChanged(e,t,o)}function vT(r,e,t){return Ut(r).beforeAuthStateChanged(e,t)}function wT(r,e,t,o){return Ut(r).onAuthStateChanged(e,t,o)}function xT(r){return Ut(r).signOut()}async function ET(r){return Ut(r).delete()}const Eh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Eh,"1"),this.storage.removeItem(Eh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT=1e3,IT=10;class jv extends Ov{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Pv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const o=this.storage.getItem(t),a=this.localCache[t];o!==a&&e(t,a,o)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((p,y,x)=>{this.notifyListeners(p,x)});return}const o=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const p=this.storage.getItem(o);!t&&this.localCache[o]===p||this.notifyListeners(o,p)},c=this.storage.getItem(o);z1()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,IT):a()}notifyListeners(e,t){this.localCache[e]=t;const o=this.listeners[e];if(o)for(const a of Array.from(o))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,o)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:o}),!0)})},TT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}jv.type="LOCAL";const ST=jv;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv extends Ov{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Vv.type="SESSION";const Fv=Vv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PT(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const o=new Vh(e);return this.receivers.push(o),o}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:o,eventType:a,data:c}=t.data,p=this.handlersMap[a];if(!(p!=null&&p.size))return;t.ports[0].postMessage({status:"ack",eventId:o,eventType:a});const y=Array.from(p).map(async T=>T(t.origin,c)),x=await PT(y);t.ports[0].postMessage({status:"done",eventId:o,eventType:a,response:x})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Vh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xp(r="",e=10){let t="";for(let o=0;o<e;o++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,o=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let c,p;return new Promise((y,x)=>{const T=xp("",20);a.port1.start();const k=setTimeout(()=>{x(new Error("unsupported_event"))},o);p={messageChannel:a,onMessage(C){const N=C;if(N.data.eventId===T)switch(N.data.status){case"ack":clearTimeout(k),c=setTimeout(()=>{x(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),y(N.data.response);break;default:clearTimeout(k),clearTimeout(c),x(new Error("invalid_response"));break}}},this.handlers.add(p),a.port1.addEventListener("message",p.onMessage),this.target.postMessage({eventType:e,eventId:T,data:t},[a.port2])}).finally(()=>{p&&this.removeMessageHandler(p)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zi(){return window}function CT(r){zi().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zv(){return typeof zi().WorkerGlobalScope<"u"&&typeof zi().importScripts=="function"}async function bT(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function AT(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function NT(){return zv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uv="firebaseLocalStorageDb",RT=1,Th="firebaseLocalStorage",Bv="fbase_key";class $u{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Fh(r,e){return r.transaction([Th],e?"readwrite":"readonly").objectStore(Th)}function LT(){const r=indexedDB.deleteDatabase(Uv);return new $u(r).toPromise()}function Hf(){const r=indexedDB.open(Uv,RT);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const o=r.result;try{o.createObjectStore(Th,{keyPath:Bv})}catch(a){t(a)}}),r.addEventListener("success",async()=>{const o=r.result;o.objectStoreNames.contains(Th)?e(o):(o.close(),await LT(),e(await Hf()))})})}async function P_(r,e,t){const o=Fh(r,!0).put({[Bv]:e,value:t});return new $u(o).toPromise()}async function DT(r,e){const t=Fh(r,!1).get(e),o=await new $u(t).toPromise();return o===void 0?null:o.value}function k_(r,e){const t=Fh(r,!0).delete(e);return new $u(t).toPromise()}const MT=800,OT=3;class Hv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Hf(),this.db)}async _withRetries(e){let t=0;for(;;)try{const o=await this._openDb();return await e(o)}catch(o){if(t++>OT)throw o;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return zv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Vh._getInstance(NT()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,o;if(this.activeServiceWorker=await bT(),!this.activeServiceWorker)return;this.sender=new kT(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(o=e[0])!=null&&o.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||AT()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Hf();return await P_(e,Eh,"1"),await k_(e,Eh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(o=>P_(o,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(o=>DT(o,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>k_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const c=Fh(a,!1).getAll();return new $u(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],o=new Set;if(e.length!==0)for(const{fbase_key:a,value:c}of e)o.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(c)&&(this.notifyListeners(a,c),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!o.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const o=this.listeners[e];if(o)for(const a of Array.from(o))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),MT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Hv.type="LOCAL";const jT=Hv;new Bu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VT(r,e){return e?Is(e):(We(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep extends vp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return wl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return wl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return wl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function FT(r){return Dv(r.auth,new Ep(r),r.bypassAuthState)}function zT(r){const{auth:e,user:t}=r;return We(t,e,"internal-error"),Lv(t,new Ep(r),r.bypassAuthState)}async function UT(r){const{auth:e,user:t}=r;return We(t,e,"internal-error"),fT(t,new Ep(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(e,t,o,a,c=!1){this.auth=e,this.resolver=o,this.user=a,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(o){this.reject(o)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:o,postBody:a,tenantId:c,error:p,type:y}=e;if(p){this.reject(p);return}const x={auth:this.auth,requestUri:t,sessionId:o,tenantId:c||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(y)(x))}catch(T){this.reject(T)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return FT;case"linkViaPopup":case"linkViaRedirect":return UT;case"reauthViaPopup":case"reauthViaRedirect":return zT;default:ci(this.auth,"internal-error")}}resolve(e){bs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){bs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BT=new Bu(2e3,1e4);class _l extends Wv{constructor(e,t,o,a,c){super(e,t,a,c),this.provider=o,this.authWindow=null,this.pollId=null,_l.currentPopupAction&&_l.currentPopupAction.cancel(),_l.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return We(e,this.auth,"internal-error"),e}async onExecution(){bs(this.filter.length===1,"Popup operations only handle one event");const e=xp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Fi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Fi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_l.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,o;if((o=(t=this.authWindow)==null?void 0:t.window)!=null&&o.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Fi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,BT.get())};e()}}_l.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT="pendingRedirect",oh=new Map;class WT extends Wv{constructor(e,t,o=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,o),this.eventId=null}async execute(){let e=oh.get(this.auth._key());if(!e){try{const o=await $T(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(o)}catch(t){e=()=>Promise.reject(t)}oh.set(this.auth._key(),e)}return this.bypassAuthState||oh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function $T(r,e){const t=KT(e),o=GT(r);if(!await o._isAvailable())return!1;const a=await o._get(t)==="true";return await o._remove(t),a}function qT(r,e){oh.set(r._key(),e)}function GT(r){return Is(r._redirectPersistence)}function KT(r){return sh(HT,r.config.apiKey,r.name)}async function ZT(r,e,t=!1){if(qr(r.app))return Promise.reject(Ss(r));const o=Pa(r),a=VT(o,e),p=await new WT(o,a,t).execute();return p&&!t&&(delete p.user._redirectEventId,await o._persistUserIfCurrent(p.user),await o._setRedirectUser(null,e)),p}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QT=600*1e3;class YT{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(o=>{this.isEventForConsumer(e,o)&&(t=!0,this.sendToConsumer(e,o),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!JT(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var o;if(e.error&&!$v(e)){const a=((o=e.error.code)==null?void 0:o.split("auth/")[1])||"internal-error";t.onError(Fi(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const o=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&o}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=QT&&this.cachedEventUids.clear(),this.cachedEventUids.has(C_(e))}saveEventToCache(e){this.cachedEventUids.add(C_(e)),this.lastProcessedEventTime=Date.now()}}function C_(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function $v({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function JT(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $v(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XT(r,e={}){return Vo(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,tI=/^https?/;async function nI(r){if(r.config.emulator)return;const{authorizedDomains:e}=await XT(r);for(const t of e)try{if(rI(t))return}catch{}ci(r,"unauthorized-domain")}function rI(r){const e=zf(),{protocol:t,hostname:o}=new URL(e);if(r.startsWith("chrome-extension://")){const p=new URL(r);return p.hostname===""&&o===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&p.hostname===o}if(!tI.test(t))return!1;if(eI.test(r))return o===r;const a=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(o)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI=new Bu(3e4,6e4);function b_(){const r=zi().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function sI(r){return new Promise((e,t)=>{var a,c,p;function o(){b_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{b_(),t(Fi(r,"network-request-failed"))},timeout:iI.get()})}if((c=(a=zi().gapi)==null?void 0:a.iframes)!=null&&c.Iframe)e(gapi.iframes.getContext());else if((p=zi().gapi)!=null&&p.load)o();else{const y=Z1("iframefcb");return zi()[y]=()=>{gapi.load?o():t(Fi(r,"network-request-failed"))},Cv(`${K1()}?onload=${y}`).catch(x=>t(x))}}).catch(e=>{throw ah=null,e})}let ah=null;function oI(r){return ah=ah||sI(r),ah}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI=new Bu(5e3,15e3),lI="__/auth/iframe",uI="emulator/auth/iframe",cI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},hI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function dI(r){const e=r.config;We(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?gp(e,uI):`https://${r.config.authDomain}/${lI}`,o={apiKey:e.apiKey,appName:r.name,v:Dl},a=hI.get(r.config.apiHost);a&&(o.eid=a);const c=r._getFrameworks();return c.length&&(o.fw=c.join(",")),`${t}?${Uu(o).slice(1)}`}async function fI(r){const e=await oI(r),t=zi().gapi;return We(t,r,"internal-error"),e.open({where:document.body,url:dI(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:cI,dontclear:!0},o=>new Promise(async(a,c)=>{await o.restyle({setHideOnLeave:!1});const p=Fi(r,"network-request-failed"),y=zi().setTimeout(()=>{c(p)},aI.get());function x(){zi().clearTimeout(y),a(o)}o.ping(x).then(x,()=>{c(p)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},mI=500,gI=600,_I="_blank",yI="http://localhost";class A_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function vI(r,e,t,o=mI,a=gI){const c=Math.max((window.screen.availHeight-a)/2,0).toString(),p=Math.max((window.screen.availWidth-o)/2,0).toString();let y="";const x={...pI,width:o.toString(),height:a.toString(),top:c,left:p},T=An().toLowerCase();t&&(y=xv(T)?_I:t),vv(T)&&(e=e||yI,x.scrollbars="yes");const k=Object.entries(x).reduce((N,[H,$])=>`${N}${H}=${$},`,"");if(F1(T)&&y!=="_self")return wI(e||"",y),new A_(null);const C=window.open(e||"",y,k);We(C,r,"popup-blocked");try{C.focus()}catch{}return new A_(C)}function wI(r,e){const t=document.createElement("a");t.href=r,t.target=e;const o=document.createEvent("MouseEvent");o.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xI="__/auth/handler",EI="emulator/auth/handler",TI=encodeURIComponent("fac");async function N_(r,e,t,o,a,c){We(r.config.authDomain,r,"auth-domain-config-required"),We(r.config.apiKey,r,"invalid-api-key");const p={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:o,v:Dl,eventId:a};if(e instanceof Nv){e.setDefaultLanguage(r.languageCode),p.providerId=e.providerId||"",aE(e.getCustomParameters())||(p.customParameters=JSON.stringify(e.getCustomParameters()));for(const[k,C]of Object.entries({}))p[k]=C}if(e instanceof Wu){const k=e.getScopes().filter(C=>C!=="");k.length>0&&(p.scopes=k.join(","))}r.tenantId&&(p.tid=r.tenantId);const y=p;for(const k of Object.keys(y))y[k]===void 0&&delete y[k];const x=await r._getAppCheckToken(),T=x?`#${TI}=${encodeURIComponent(x)}`:"";return`${II(r)}?${Uu(y).slice(1)}${T}`}function II({config:r}){return r.emulator?gp(r,EI):`https://${r.authDomain}/${xI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kf="webStorageSupport";class SI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Fv,this._completeRedirectFn=ZT,this._overrideRedirectResult=qT}async _openPopup(e,t,o,a){var p;bs((p=this.eventManagers[e._key()])==null?void 0:p.manager,"_initialize() not called before _openPopup()");const c=await N_(e,t,o,zf(),a);return vI(e,c,xp())}async _openRedirect(e,t,o,a){await this._originValidation(e);const c=await N_(e,t,o,zf(),a);return CT(c),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:c}=this.eventManagers[t];return a?Promise.resolve(a):(bs(c,"If manager is not set, promise should be"),c)}const o=this.initAndGetManager(e);return this.eventManagers[t]={promise:o},o.catch(()=>{delete this.eventManagers[t]}),o}async initAndGetManager(e){const t=await fI(e),o=new YT(e);return t.register("authEvent",a=>(We(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:o.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:o},this.iframes[e._key()]=t,o}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(kf,{type:kf},a=>{var p;const c=(p=a==null?void 0:a[0])==null?void 0:p[kf];c!==void 0&&t(!!c),ci(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=nI(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Pv()||wv()||yp()}}const PI=SI;var R_="@firebase/auth",L_="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(o=>{e((o==null?void 0:o.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){We(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CI(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function bI(r){Sl(new wa("auth",(e,{options:t})=>{const o=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:p,authDomain:y}=o.options;We(p&&!p.includes(":"),"invalid-api-key",{appName:o.name});const x={apiKey:p,authDomain:y,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:kv(r)},T=new $1(o,a,c,x);return tT(T,t),T},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,o)=>{e.getProvider("auth-internal").initialize()})),Sl(new wa("auth-internal",e=>{const t=Pa(e.getProvider("auth").getImmediate());return(o=>new kI(o))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Co(R_,L_,CI(r)),Co(R_,L_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AI=300,NI=nv("authIdTokenMaxAge")||AI;let D_=null;const RI=r=>async e=>{const t=e&&await e.getIdTokenResult(),o=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(o&&o>NI)return;const a=t==null?void 0:t.token;D_!==a&&(D_=a,await fetch(r,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function LI(r=lv()){const e=pp(r,"auth");if(e.isInitialized())return e.getImmediate();const t=eT(r,{popupRedirectResolver:PI,persistence:[jT,ST,Fv]}),o=nv("authTokenSyncURL");if(o&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(o,location.origin);if(location.origin===c.origin){const p=RI(c.toString());vT(t,p,()=>p(t.currentUser)),yT(t,y=>p(y))}}const a=ev("auth");return a&&nT(t,`http://${a}`),t}function DI(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}q1({loadJS(r){return new Promise((e,t)=>{const o=document.createElement("script");o.setAttribute("src",r),o.onload=e,o.onerror=a=>{const c=Fi("internal-error");c.customData=a,t(c)},o.type="text/javascript",o.charset="UTF-8",DI().appendChild(o)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});bI("Browser");/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MI=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),qv=(...r)=>r.filter((e,t,o)=>!!e&&e.trim()!==""&&o.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var OI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jI=le.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:o,className:a="",children:c,iconNode:p,...y},x)=>le.createElement("svg",{ref:x,...OI,width:e,height:e,stroke:r,strokeWidth:o?Number(t)*24/Number(e):t,className:qv("lucide",a),...y},[...p.map(([T,k])=>le.createElement(T,k)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=(r,e)=>{const t=le.forwardRef(({className:o,...a},c)=>le.createElement(jI,{ref:c,iconNode:e,className:qv(`lucide-${MI(r)}`,o),...a}));return t.displayName=`${r}`,t};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VI=Je("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wf=Je("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FI=Je("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zI=Je("Bed",[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jc=Je("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tp=Je("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zh=Je("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UI=Je("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BI=Je("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HI=Je("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WI=Je("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $I=Je("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qI=Je("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GI=Je("Coffee",[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KI=Je("Compass",[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ip=Je("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M_=Je("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O_=Je("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j_=Je("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gv=Je("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZI=Je("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QI=Je("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wn=Je("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=Je("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YI=Je("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JI=Je("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uh=Je("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XI=Je("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V_=Je("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sp=Je("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $f=Je("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eS=Je("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F_=Je("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tS=Je("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ca=Je("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xl=Je("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nS=Je("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rS=Je("TramFront",[["rect",{width:"16",height:"16",x:"4",y:"3",rx:"2",key:"1wxw4b"}],["path",{d:"M4 11h16",key:"mpoxn0"}],["path",{d:"M12 3v8",key:"1h2ygw"}],["path",{d:"m8 19-2 3",key:"13i0xs"}],["path",{d:"m18 22-2-3",key:"1p0ohu"}],["path",{d:"M8 15h.01",key:"a7atzg"}],["path",{d:"M16 15h.01",key:"rnfrdf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bh=Je("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iS=Je("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sS=Je("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pp=Je("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oS=Je("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pl=Je("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var aS="firebase",lS="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Co(aS,lS,"app");var z_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var bo,Kv;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(V,D){function M(){}M.prototype=D.prototype,V.F=D.prototype,V.prototype=new M,V.prototype.constructor=V,V.D=function(z,j,R){for(var A=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)A[ye-2]=arguments[ye];return D.prototype[j].apply(z,A)}}function t(){this.blockSize=-1}function o(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(o,t),o.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(V,D,M){M||(M=0);const z=Array(16);if(typeof D=="string")for(var j=0;j<16;++j)z[j]=D.charCodeAt(M++)|D.charCodeAt(M++)<<8|D.charCodeAt(M++)<<16|D.charCodeAt(M++)<<24;else for(j=0;j<16;++j)z[j]=D[M++]|D[M++]<<8|D[M++]<<16|D[M++]<<24;D=V.g[0],M=V.g[1],j=V.g[2];let R=V.g[3],A;A=D+(R^M&(j^R))+z[0]+3614090360&4294967295,D=M+(A<<7&4294967295|A>>>25),A=R+(j^D&(M^j))+z[1]+3905402710&4294967295,R=D+(A<<12&4294967295|A>>>20),A=j+(M^R&(D^M))+z[2]+606105819&4294967295,j=R+(A<<17&4294967295|A>>>15),A=M+(D^j&(R^D))+z[3]+3250441966&4294967295,M=j+(A<<22&4294967295|A>>>10),A=D+(R^M&(j^R))+z[4]+4118548399&4294967295,D=M+(A<<7&4294967295|A>>>25),A=R+(j^D&(M^j))+z[5]+1200080426&4294967295,R=D+(A<<12&4294967295|A>>>20),A=j+(M^R&(D^M))+z[6]+2821735955&4294967295,j=R+(A<<17&4294967295|A>>>15),A=M+(D^j&(R^D))+z[7]+4249261313&4294967295,M=j+(A<<22&4294967295|A>>>10),A=D+(R^M&(j^R))+z[8]+1770035416&4294967295,D=M+(A<<7&4294967295|A>>>25),A=R+(j^D&(M^j))+z[9]+2336552879&4294967295,R=D+(A<<12&4294967295|A>>>20),A=j+(M^R&(D^M))+z[10]+4294925233&4294967295,j=R+(A<<17&4294967295|A>>>15),A=M+(D^j&(R^D))+z[11]+2304563134&4294967295,M=j+(A<<22&4294967295|A>>>10),A=D+(R^M&(j^R))+z[12]+1804603682&4294967295,D=M+(A<<7&4294967295|A>>>25),A=R+(j^D&(M^j))+z[13]+4254626195&4294967295,R=D+(A<<12&4294967295|A>>>20),A=j+(M^R&(D^M))+z[14]+2792965006&4294967295,j=R+(A<<17&4294967295|A>>>15),A=M+(D^j&(R^D))+z[15]+1236535329&4294967295,M=j+(A<<22&4294967295|A>>>10),A=D+(j^R&(M^j))+z[1]+4129170786&4294967295,D=M+(A<<5&4294967295|A>>>27),A=R+(M^j&(D^M))+z[6]+3225465664&4294967295,R=D+(A<<9&4294967295|A>>>23),A=j+(D^M&(R^D))+z[11]+643717713&4294967295,j=R+(A<<14&4294967295|A>>>18),A=M+(R^D&(j^R))+z[0]+3921069994&4294967295,M=j+(A<<20&4294967295|A>>>12),A=D+(j^R&(M^j))+z[5]+3593408605&4294967295,D=M+(A<<5&4294967295|A>>>27),A=R+(M^j&(D^M))+z[10]+38016083&4294967295,R=D+(A<<9&4294967295|A>>>23),A=j+(D^M&(R^D))+z[15]+3634488961&4294967295,j=R+(A<<14&4294967295|A>>>18),A=M+(R^D&(j^R))+z[4]+3889429448&4294967295,M=j+(A<<20&4294967295|A>>>12),A=D+(j^R&(M^j))+z[9]+568446438&4294967295,D=M+(A<<5&4294967295|A>>>27),A=R+(M^j&(D^M))+z[14]+3275163606&4294967295,R=D+(A<<9&4294967295|A>>>23),A=j+(D^M&(R^D))+z[3]+4107603335&4294967295,j=R+(A<<14&4294967295|A>>>18),A=M+(R^D&(j^R))+z[8]+1163531501&4294967295,M=j+(A<<20&4294967295|A>>>12),A=D+(j^R&(M^j))+z[13]+2850285829&4294967295,D=M+(A<<5&4294967295|A>>>27),A=R+(M^j&(D^M))+z[2]+4243563512&4294967295,R=D+(A<<9&4294967295|A>>>23),A=j+(D^M&(R^D))+z[7]+1735328473&4294967295,j=R+(A<<14&4294967295|A>>>18),A=M+(R^D&(j^R))+z[12]+2368359562&4294967295,M=j+(A<<20&4294967295|A>>>12),A=D+(M^j^R)+z[5]+4294588738&4294967295,D=M+(A<<4&4294967295|A>>>28),A=R+(D^M^j)+z[8]+2272392833&4294967295,R=D+(A<<11&4294967295|A>>>21),A=j+(R^D^M)+z[11]+1839030562&4294967295,j=R+(A<<16&4294967295|A>>>16),A=M+(j^R^D)+z[14]+4259657740&4294967295,M=j+(A<<23&4294967295|A>>>9),A=D+(M^j^R)+z[1]+2763975236&4294967295,D=M+(A<<4&4294967295|A>>>28),A=R+(D^M^j)+z[4]+1272893353&4294967295,R=D+(A<<11&4294967295|A>>>21),A=j+(R^D^M)+z[7]+4139469664&4294967295,j=R+(A<<16&4294967295|A>>>16),A=M+(j^R^D)+z[10]+3200236656&4294967295,M=j+(A<<23&4294967295|A>>>9),A=D+(M^j^R)+z[13]+681279174&4294967295,D=M+(A<<4&4294967295|A>>>28),A=R+(D^M^j)+z[0]+3936430074&4294967295,R=D+(A<<11&4294967295|A>>>21),A=j+(R^D^M)+z[3]+3572445317&4294967295,j=R+(A<<16&4294967295|A>>>16),A=M+(j^R^D)+z[6]+76029189&4294967295,M=j+(A<<23&4294967295|A>>>9),A=D+(M^j^R)+z[9]+3654602809&4294967295,D=M+(A<<4&4294967295|A>>>28),A=R+(D^M^j)+z[12]+3873151461&4294967295,R=D+(A<<11&4294967295|A>>>21),A=j+(R^D^M)+z[15]+530742520&4294967295,j=R+(A<<16&4294967295|A>>>16),A=M+(j^R^D)+z[2]+3299628645&4294967295,M=j+(A<<23&4294967295|A>>>9),A=D+(j^(M|~R))+z[0]+4096336452&4294967295,D=M+(A<<6&4294967295|A>>>26),A=R+(M^(D|~j))+z[7]+1126891415&4294967295,R=D+(A<<10&4294967295|A>>>22),A=j+(D^(R|~M))+z[14]+2878612391&4294967295,j=R+(A<<15&4294967295|A>>>17),A=M+(R^(j|~D))+z[5]+4237533241&4294967295,M=j+(A<<21&4294967295|A>>>11),A=D+(j^(M|~R))+z[12]+1700485571&4294967295,D=M+(A<<6&4294967295|A>>>26),A=R+(M^(D|~j))+z[3]+2399980690&4294967295,R=D+(A<<10&4294967295|A>>>22),A=j+(D^(R|~M))+z[10]+4293915773&4294967295,j=R+(A<<15&4294967295|A>>>17),A=M+(R^(j|~D))+z[1]+2240044497&4294967295,M=j+(A<<21&4294967295|A>>>11),A=D+(j^(M|~R))+z[8]+1873313359&4294967295,D=M+(A<<6&4294967295|A>>>26),A=R+(M^(D|~j))+z[15]+4264355552&4294967295,R=D+(A<<10&4294967295|A>>>22),A=j+(D^(R|~M))+z[6]+2734768916&4294967295,j=R+(A<<15&4294967295|A>>>17),A=M+(R^(j|~D))+z[13]+1309151649&4294967295,M=j+(A<<21&4294967295|A>>>11),A=D+(j^(M|~R))+z[4]+4149444226&4294967295,D=M+(A<<6&4294967295|A>>>26),A=R+(M^(D|~j))+z[11]+3174756917&4294967295,R=D+(A<<10&4294967295|A>>>22),A=j+(D^(R|~M))+z[2]+718787259&4294967295,j=R+(A<<15&4294967295|A>>>17),A=M+(R^(j|~D))+z[9]+3951481745&4294967295,V.g[0]=V.g[0]+D&4294967295,V.g[1]=V.g[1]+(j+(A<<21&4294967295|A>>>11))&4294967295,V.g[2]=V.g[2]+j&4294967295,V.g[3]=V.g[3]+R&4294967295}o.prototype.v=function(V,D){D===void 0&&(D=V.length);const M=D-this.blockSize,z=this.C;let j=this.h,R=0;for(;R<D;){if(j==0)for(;R<=M;)a(this,V,R),R+=this.blockSize;if(typeof V=="string"){for(;R<D;)if(z[j++]=V.charCodeAt(R++),j==this.blockSize){a(this,z),j=0;break}}else for(;R<D;)if(z[j++]=V[R++],j==this.blockSize){a(this,z),j=0;break}}this.h=j,this.o+=D},o.prototype.A=function(){var V=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);V[0]=128;for(var D=1;D<V.length-8;++D)V[D]=0;D=this.o*8;for(var M=V.length-8;M<V.length;++M)V[M]=D&255,D/=256;for(this.v(V),V=Array(16),D=0,M=0;M<4;++M)for(let z=0;z<32;z+=8)V[D++]=this.g[M]>>>z&255;return V};function c(V,D){var M=y;return Object.prototype.hasOwnProperty.call(M,V)?M[V]:M[V]=D(V)}function p(V,D){this.h=D;const M=[];let z=!0;for(let j=V.length-1;j>=0;j--){const R=V[j]|0;z&&R==D||(M[j]=R,z=!1)}this.g=M}var y={};function x(V){return-128<=V&&V<128?c(V,function(D){return new p([D|0],D<0?-1:0)}):new p([V|0],V<0?-1:0)}function T(V){if(isNaN(V)||!isFinite(V))return C;if(V<0)return te(T(-V));const D=[];let M=1;for(let z=0;V>=M;z++)D[z]=V/M|0,M*=4294967296;return new p(D,0)}function k(V,D){if(V.length==0)throw Error("number format error: empty string");if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(V.charAt(0)=="-")return te(k(V.substring(1),D));if(V.indexOf("-")>=0)throw Error('number format error: interior "-" character');const M=T(Math.pow(D,8));let z=C;for(let R=0;R<V.length;R+=8){var j=Math.min(8,V.length-R);const A=parseInt(V.substring(R,R+j),D);j<8?(j=T(Math.pow(D,j)),z=z.j(j).add(T(A))):(z=z.j(M),z=z.add(T(A)))}return z}var C=x(0),N=x(1),H=x(16777216);r=p.prototype,r.m=function(){if(Z(this))return-te(this).m();let V=0,D=1;for(let M=0;M<this.g.length;M++){const z=this.i(M);V+=(z>=0?z:4294967296+z)*D,D*=4294967296}return V},r.toString=function(V){if(V=V||10,V<2||36<V)throw Error("radix out of range: "+V);if($(this))return"0";if(Z(this))return"-"+te(this).toString(V);const D=T(Math.pow(V,6));var M=this;let z="";for(;;){const j=Oe(M,D).g;M=he(M,j.j(D));let R=((M.g.length>0?M.g[0]:M.h)>>>0).toString(V);if(M=j,$(M))return R+z;for(;R.length<6;)R="0"+R;z=R+z}},r.i=function(V){return V<0?0:V<this.g.length?this.g[V]:this.h};function $(V){if(V.h!=0)return!1;for(let D=0;D<V.g.length;D++)if(V.g[D]!=0)return!1;return!0}function Z(V){return V.h==-1}r.l=function(V){return V=he(this,V),Z(V)?-1:$(V)?0:1};function te(V){const D=V.g.length,M=[];for(let z=0;z<D;z++)M[z]=~V.g[z];return new p(M,~V.h).add(N)}r.abs=function(){return Z(this)?te(this):this},r.add=function(V){const D=Math.max(this.g.length,V.g.length),M=[];let z=0;for(let j=0;j<=D;j++){let R=z+(this.i(j)&65535)+(V.i(j)&65535),A=(R>>>16)+(this.i(j)>>>16)+(V.i(j)>>>16);z=A>>>16,R&=65535,A&=65535,M[j]=A<<16|R}return new p(M,M[M.length-1]&-2147483648?-1:0)};function he(V,D){return V.add(te(D))}r.j=function(V){if($(this)||$(V))return C;if(Z(this))return Z(V)?te(this).j(te(V)):te(te(this).j(V));if(Z(V))return te(this.j(te(V)));if(this.l(H)<0&&V.l(H)<0)return T(this.m()*V.m());const D=this.g.length+V.g.length,M=[];for(var z=0;z<2*D;z++)M[z]=0;for(z=0;z<this.g.length;z++)for(let j=0;j<V.g.length;j++){const R=this.i(z)>>>16,A=this.i(z)&65535,ye=V.i(j)>>>16,Ge=V.i(j)&65535;M[2*z+2*j]+=A*Ge,_e(M,2*z+2*j),M[2*z+2*j+1]+=R*Ge,_e(M,2*z+2*j+1),M[2*z+2*j+1]+=A*ye,_e(M,2*z+2*j+1),M[2*z+2*j+2]+=R*ye,_e(M,2*z+2*j+2)}for(V=0;V<D;V++)M[V]=M[2*V+1]<<16|M[2*V];for(V=D;V<2*D;V++)M[V]=0;return new p(M,0)};function _e(V,D){for(;(V[D]&65535)!=V[D];)V[D+1]+=V[D]>>>16,V[D]&=65535,D++}function Te(V,D){this.g=V,this.h=D}function Oe(V,D){if($(D))throw Error("division by zero");if($(V))return new Te(C,C);if(Z(V))return D=Oe(te(V),D),new Te(te(D.g),te(D.h));if(Z(D))return D=Oe(V,te(D)),new Te(te(D.g),D.h);if(V.g.length>30){if(Z(V)||Z(D))throw Error("slowDivide_ only works with positive integers.");for(var M=N,z=D;z.l(V)<=0;)M=ke(M),z=ke(z);var j=fe(M,1),R=fe(z,1);for(z=fe(z,2),M=fe(M,2);!$(z);){var A=R.add(z);A.l(V)<=0&&(j=j.add(M),R=A),z=fe(z,1),M=fe(M,1)}return D=he(V,j.j(D)),new Te(j,D)}for(j=C;V.l(D)>=0;){for(M=Math.max(1,Math.floor(V.m()/D.m())),z=Math.ceil(Math.log(M)/Math.LN2),z=z<=48?1:Math.pow(2,z-48),R=T(M),A=R.j(D);Z(A)||A.l(V)>0;)M-=z,R=T(M),A=R.j(D);$(R)&&(R=N),j=j.add(R),V=he(V,A)}return new Te(j,V)}r.B=function(V){return Oe(this,V).h},r.and=function(V){const D=Math.max(this.g.length,V.g.length),M=[];for(let z=0;z<D;z++)M[z]=this.i(z)&V.i(z);return new p(M,this.h&V.h)},r.or=function(V){const D=Math.max(this.g.length,V.g.length),M=[];for(let z=0;z<D;z++)M[z]=this.i(z)|V.i(z);return new p(M,this.h|V.h)},r.xor=function(V){const D=Math.max(this.g.length,V.g.length),M=[];for(let z=0;z<D;z++)M[z]=this.i(z)^V.i(z);return new p(M,this.h^V.h)};function ke(V){const D=V.g.length+1,M=[];for(let z=0;z<D;z++)M[z]=V.i(z)<<1|V.i(z-1)>>>31;return new p(M,V.h)}function fe(V,D){const M=D>>5;D%=32;const z=V.g.length-M,j=[];for(let R=0;R<z;R++)j[R]=D>0?V.i(R+M)>>>D|V.i(R+M+1)<<32-D:V.i(R+M);return new p(j,V.h)}o.prototype.digest=o.prototype.A,o.prototype.reset=o.prototype.u,o.prototype.update=o.prototype.v,Kv=o,p.prototype.add=p.prototype.add,p.prototype.multiply=p.prototype.j,p.prototype.modulo=p.prototype.B,p.prototype.compare=p.prototype.l,p.prototype.toNumber=p.prototype.m,p.prototype.toString=p.prototype.toString,p.prototype.getBits=p.prototype.i,p.fromNumber=T,p.fromString=k,bo=p}).apply(typeof z_<"u"?z_:typeof self<"u"?self:typeof window<"u"?window:{});var Xc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Zv,vu,Qv,lh,qf,Yv,Jv,Xv;(function(){var r,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Xc=="object"&&Xc];for(var w=0;w<h.length;++w){var I=h[w];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var o=t(this);function a(h,w){if(w)e:{var I=o;h=h.split(".");for(var b=0;b<h.length-1;b++){var q=h[b];if(!(q in I))break e;I=I[q]}h=h[h.length-1],b=I[h],w=w(b),w!=b&&w!=null&&e(I,h,{configurable:!0,writable:!0,value:w})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(w){var I=[],b;for(b in w)Object.prototype.hasOwnProperty.call(w,b)&&I.push([b,w[b]]);return I}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},p=this||self;function y(h){var w=typeof h;return w=="object"&&h!=null||w=="function"}function x(h,w,I){return h.call.apply(h.bind,arguments)}function T(h,w,I){return T=x,T.apply(null,arguments)}function k(h,w){var I=Array.prototype.slice.call(arguments,1);return function(){var b=I.slice();return b.push.apply(b,arguments),h.apply(this,b)}}function C(h,w){function I(){}I.prototype=w.prototype,h.Z=w.prototype,h.prototype=new I,h.prototype.constructor=h,h.Ob=function(b,q,Y){for(var ge=Array(arguments.length-2),He=2;He<arguments.length;He++)ge[He-2]=arguments[He];return w.prototype[q].apply(b,ge)}}var N=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function H(h){const w=h.length;if(w>0){const I=Array(w);for(let b=0;b<w;b++)I[b]=h[b];return I}return[]}function $(h,w){for(let b=1;b<arguments.length;b++){const q=arguments[b];var I=typeof q;if(I=I!="object"?I:q?Array.isArray(q)?"array":I:"null",I=="array"||I=="object"&&typeof q.length=="number"){I=h.length||0;const Y=q.length||0;h.length=I+Y;for(let ge=0;ge<Y;ge++)h[I+ge]=q[ge]}else h.push(q)}}class Z{constructor(w,I){this.i=w,this.j=I,this.h=0,this.g=null}get(){let w;return this.h>0?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function te(h){p.setTimeout(()=>{throw h},0)}function he(){var h=V;let w=null;return h.g&&(w=h.g,h.g=h.g.next,h.g||(h.h=null),w.next=null),w}class _e{constructor(){this.h=this.g=null}add(w,I){const b=Te.get();b.set(w,I),this.h?this.h.next=b:this.g=b,this.h=b}}var Te=new Z(()=>new Oe,h=>h.reset());class Oe{constructor(){this.next=this.g=this.h=null}set(w,I){this.h=w,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let ke,fe=!1,V=new _e,D=()=>{const h=Promise.resolve(void 0);ke=()=>{h.then(M)}};function M(){for(var h;h=he();){try{h.h.call(h.g)}catch(I){te(I)}var w=Te;w.j(h),w.h<100&&(w.h++,h.next=w.g,w.g=h)}fe=!1}function z(){this.u=this.u,this.C=this.C}z.prototype.u=!1,z.prototype.dispose=function(){this.u||(this.u=!0,this.N())},z.prototype[Symbol.dispose]=function(){this.dispose()},z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(h,w){this.type=h,this.g=this.target=w,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var R=(function(){if(!p.addEventListener||!Object.defineProperty)return!1;var h=!1,w=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const I=()=>{};p.addEventListener("test",I,w),p.removeEventListener("test",I,w)}catch{}return h})();function A(h){return/^[\s\xa0]*$/.test(h)}function ye(h,w){j.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,w)}C(ye,j),ye.prototype.init=function(h,w){const I=this.type=h.type,b=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=w,w=h.relatedTarget,w||(I=="mouseover"?w=h.fromElement:I=="mouseout"&&(w=h.toElement)),this.relatedTarget=w,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&ye.Z.h.call(this)},ye.prototype.h=function(){ye.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Ge="closure_listenable_"+(Math.random()*1e6|0),pe=0;function Ve(h,w,I,b,q){this.listener=h,this.proxy=null,this.src=w,this.type=I,this.capture=!!b,this.ha=q,this.key=++pe,this.da=this.fa=!1}function X(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Ce(h,w,I){for(const b in h)w.call(I,h[b],b,h)}function se(h,w){for(const I in h)w.call(void 0,h[I],I,h)}function B(h){const w={};for(const I in h)w[I]=h[I];return w}const ne="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Me(h,w){let I,b;for(let q=1;q<arguments.length;q++){b=arguments[q];for(I in b)h[I]=b[I];for(let Y=0;Y<ne.length;Y++)I=ne[Y],Object.prototype.hasOwnProperty.call(b,I)&&(h[I]=b[I])}}function Ne(h){this.src=h,this.g={},this.h=0}Ne.prototype.add=function(h,w,I,b,q){const Y=h.toString();h=this.g[Y],h||(h=this.g[Y]=[],this.h++);const ge=we(h,w,b,q);return ge>-1?(w=h[ge],I||(w.fa=!1)):(w=new Ve(w,this.src,Y,!!b,q),w.fa=I,h.push(w)),w};function Se(h,w){const I=w.type;if(I in h.g){var b=h.g[I],q=Array.prototype.indexOf.call(b,w,void 0),Y;(Y=q>=0)&&Array.prototype.splice.call(b,q,1),Y&&(X(w),h.g[I].length==0&&(delete h.g[I],h.h--))}}function we(h,w,I,b){for(let q=0;q<h.length;++q){const Y=h[q];if(!Y.da&&Y.listener==w&&Y.capture==!!I&&Y.ha==b)return q}return-1}var Xe="closure_lm_"+(Math.random()*1e6|0),re={};function qe(h,w,I,b,q){if(Array.isArray(w)){for(let Y=0;Y<w.length;Y++)qe(h,w[Y],I,b,q);return null}return I=ar(I),h&&h[Ge]?h.J(w,I,y(b)?!!b.capture:!1,q):dt(h,w,I,!1,b,q)}function dt(h,w,I,b,q,Y){if(!w)throw Error("Invalid event type");const ge=y(q)?!!q.capture:!!q;let He=Kr(h);if(He||(h[Xe]=He=new Ne(h)),I=He.add(w,I,b,ge,Y),I.proxy)return I;if(b=gn(),I.proxy=b,b.src=h,b.listener=I,h.addEventListener)R||(q=ge),q===void 0&&(q=!1),h.addEventListener(w.toString(),b,q);else if(h.attachEvent)h.attachEvent(di(w.toString()),b);else if(h.addListener&&h.removeListener)h.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return I}function gn(){function h(I){return w.call(h.src,h.listener,I)}const w=fi;return h}function jt(h,w,I,b,q){if(Array.isArray(w))for(var Y=0;Y<w.length;Y++)jt(h,w[Y],I,b,q);else b=y(b)?!!b.capture:!!b,I=ar(I),h&&h[Ge]?(h=h.i,Y=String(w).toString(),Y in h.g&&(w=h.g[Y],I=we(w,I,b,q),I>-1&&(X(w[I]),Array.prototype.splice.call(w,I,1),w.length==0&&(delete h.g[Y],h.h--)))):h&&(h=Kr(h))&&(w=h.g[w.toString()],h=-1,w&&(h=we(w,I,b,q)),(I=h>-1?w[h]:null)&&Nn(I))}function Nn(h){if(typeof h!="number"&&h&&!h.da){var w=h.src;if(w&&w[Ge])Se(w.i,h);else{var I=h.type,b=h.proxy;w.removeEventListener?w.removeEventListener(I,b,h.capture):w.detachEvent?w.detachEvent(di(I),b):w.addListener&&w.removeListener&&w.removeListener(b),(I=Kr(w))?(Se(I,h),I.h==0&&(I.src=null,w[Xe]=null)):X(h)}}}function di(h){return h in re?re[h]:re[h]="on"+h}function fi(h,w){if(h.da)h=!0;else{w=new ye(w,this);const I=h.listener,b=h.ha||h.src;h.fa&&Nn(h),h=I.call(b,w)}return h}function Kr(h){return h=h[Xe],h instanceof Ne?h:null}var or="__closure_events_fn_"+(Math.random()*1e9>>>0);function ar(h){return typeof h=="function"?h:(h[or]||(h[or]=function(w){return h.handleEvent(w)}),h[or])}function kt(){z.call(this),this.i=new Ne(this),this.M=this,this.G=null}C(kt,z),kt.prototype[Ge]=!0,kt.prototype.removeEventListener=function(h,w,I,b){jt(this,h,w,I,b)};function Ct(h,w){var I,b=h.G;if(b)for(I=[];b;b=b.G)I.push(b);if(h=h.M,b=w.type||w,typeof w=="string")w=new j(w,h);else if(w instanceof j)w.target=w.target||h;else{var q=w;w=new j(b,h),Me(w,q)}q=!0;let Y,ge;if(I)for(ge=I.length-1;ge>=0;ge--)Y=w.g=I[ge],q=Rn(Y,b,!0,w)&&q;if(Y=w.g=h,q=Rn(Y,b,!0,w)&&q,q=Rn(Y,b,!1,w)&&q,I)for(ge=0;ge<I.length;ge++)Y=w.g=I[ge],q=Rn(Y,b,!1,w)&&q}kt.prototype.N=function(){if(kt.Z.N.call(this),this.i){var h=this.i;for(const w in h.g){const I=h.g[w];for(let b=0;b<I.length;b++)X(I[b]);delete h.g[w],h.h--}}this.G=null},kt.prototype.J=function(h,w,I,b){return this.i.add(String(h),w,!1,I,b)},kt.prototype.K=function(h,w,I,b){return this.i.add(String(h),w,!0,I,b)};function Rn(h,w,I,b){if(w=h.i.g[String(w)],!w)return!0;w=w.concat();let q=!0;for(let Y=0;Y<w.length;++Y){const ge=w[Y];if(ge&&!ge.da&&ge.capture==I){const He=ge.listener,ut=ge.ha||ge.src;ge.fa&&Se(h.i,ge),q=He.call(ut,b)!==!1&&q}}return q&&!b.defaultPrevented}function Ds(h,w){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=T(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(w)>2147483647?-1:p.setTimeout(h,w||0)}function Ms(h){h.g=Ds(()=>{h.g=null,h.i&&(h.i=!1,Ms(h))},h.l);const w=h.h;h.h=null,h.m.apply(null,w)}class Ra extends z{constructor(w,I){super(),this.m=w,this.l=I,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:Ms(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function pi(h){z.call(this),this.h=h,this.g={}}C(pi,z);var $i=[];function qi(h){Ce(h.g,function(w,I){this.g.hasOwnProperty(I)&&Nn(w)},h),h.g={}}pi.prototype.N=function(){pi.Z.N.call(this),qi(this)},pi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Zr=p.JSON.stringify,La=p.JSON.parse,mi=class{stringify(h){return p.JSON.stringify(h,void 0)}parse(h){return p.JSON.parse(h,void 0)}};function Qr(){}function Da(){}var Yr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function gi(){j.call(this,"d")}C(gi,j);function Os(){j.call(this,"c")}C(Os,j);var lr={},wr=null;function _i(){return wr=wr||new kt}lr.Ia="serverreachability";function js(h){j.call(this,lr.Ia,h)}C(js,j);function xr(h){const w=_i();Ct(w,new js(w))}lr.STAT_EVENT="statevent";function Er(h,w){j.call(this,lr.STAT_EVENT,h),this.stat=w}C(Er,j);function It(h){const w=_i();Ct(w,new Er(w,h))}lr.Ja="timingevent";function Uo(h,w){j.call(this,lr.Ja,h),this.size=w}C(Uo,j);function yi(h,w){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){h()},w)}function vi(){this.g=!0}vi.prototype.ua=function(){this.g=!1};function Ma(h,w,I,b,q,Y){h.info(function(){if(h.g)if(Y){var ge="",He=Y.split("&");for(let ft=0;ft<He.length;ft++){var ut=He[ft].split("=");if(ut.length>1){const Rt=ut[0];ut=ut[1];const Fn=Rt.split("_");ge=Fn.length>=2&&Fn[1]=="type"?ge+(Rt+"="+ut+"&"):ge+(Rt+"=redacted&")}}}else ge=null;else ge=Y;return"XMLHTTP REQ ("+b+") [attempt "+q+"]: "+w+`
`+I+`
`+ge})}function Oa(h,w,I,b,q,Y,ge){h.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+q+"]: "+w+`
`+I+`
`+Y+" "+ge})}function Tr(h,w,I,b){h.info(function(){return"XMLHTTP TEXT ("+w+"): "+Gi(h,I)+(b?" "+b:"")})}function Vs(h,w){h.info(function(){return"TIMEOUT: "+w})}vi.prototype.info=function(){};function Gi(h,w){if(!h.g)return w;if(!w)return null;try{const Y=JSON.parse(w);if(Y){for(h=0;h<Y.length;h++)if(Array.isArray(Y[h])){var I=Y[h];if(!(I.length<2)){var b=I[1];if(Array.isArray(b)&&!(b.length<1)){var q=b[0];if(q!="noop"&&q!="stop"&&q!="close")for(let ge=1;ge<b.length;ge++)b[ge]=""}}}}return Zr(Y)}catch{return w}}var wi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},xi={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ja;function Bt(){}C(Bt,Qr),Bt.prototype.g=function(){return new XMLHttpRequest},ja=new Bt;function be(h){return encodeURIComponent(String(h))}function Ki(h){var w=1;h=h.split(":");const I=[];for(;w>0&&h.length;)I.push(h.shift()),w--;return h.length&&I.push(h.join(":")),I}function Ln(h,w,I,b){this.j=h,this.i=w,this.l=I,this.S=b||1,this.V=new pi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Bo}function Bo(){this.i=null,this.g="",this.h=!1}var Ho={},Zi={};function qn(h,w,I){h.M=1,h.A=mt(ln(w)),h.u=I,h.R=!0,Ir(h,null)}function Ir(h,w){h.F=Date.now(),Qi(h),h.B=ln(h.A);var I=h.B,b=h.S;Array.isArray(b)||(b=[String(b)]),rs(I.i,"t",b),h.C=0,I=h.j.L,h.h=new Bo,h.g=Yo(h.j,I?w:null,!h.u),h.P>0&&(h.O=new Ra(T(h.Y,h,h.g),h.P)),w=h.V,I=h.g,b=h.ba;var q="readystatechange";Array.isArray(q)||(q&&($i[0]=q.toString()),q=$i);for(let Y=0;Y<q.length;Y++){const ge=qe(I,q[Y],b||w.handleEvent,!1,w.h||w);if(!ge)break;w.g[ge.key]=ge}w=h.J?B(h.J):{},h.u?(h.v||(h.v="POST"),w["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,w)):(h.v="GET",h.g.ea(h.B,h.v,null,w)),xr(),Ma(h.i,h.v,h.B,h.l,h.S,h.u)}Ln.prototype.ba=function(h){h=h.target;const w=this.O;w&&Nr(h)==3?w.j():this.Y(h)},Ln.prototype.Y=function(h){try{if(h==this.g)e:{const He=Nr(this.g),ut=this.g.ya(),ft=this.g.ca();if(!(He<3)&&(He!=3||this.g&&(this.h.h||this.g.la()||Ko(this.g)))){this.K||He!=4||ut==7||(ut==8||ft<=0?xr(3):xr(2)),Yi(this);var w=this.g.ca();this.X=w;var I=Wo(this);if(this.o=w==200,Oa(this.i,this.v,this.B,this.l,this.S,He,w),this.o){if(this.U&&!this.L){t:{if(this.g){var b,q=this.g;if((b=q.g?q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(b)){var Y=b;break t}}Y=null}if(h=Y)Tr(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,wt(this,h);else{this.o=!1,this.m=3,It(12),Gn(this),Ji(this);break e}}if(this.R){h=!0;let Rt;for(;!this.K&&this.C<I.length;)if(Rt=Fa(this,I),Rt==Zi){He==4&&(this.m=4,It(14),h=!1),Tr(this.i,this.l,null,"[Incomplete Response]");break}else if(Rt==Ho){this.m=4,It(15),Tr(this.i,this.l,I,"[Invalid Chunk]"),h=!1;break}else Tr(this.i,this.l,Rt,null),wt(this,Rt);if(Va(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),He!=4||I.length!=0||this.h.h||(this.m=1,It(16),h=!1),this.o=this.o&&h,!h)Tr(this.i,this.l,I,"[Invalid Chunked Response]"),Gn(this),Ji(this);else if(I.length>0&&!this.W){this.W=!0;var ge=this.j;ge.g==this&&ge.aa&&!ge.P&&(ge.j.info("Great, no buffering proxy detected. Bytes received: "+I.length),us(ge),ge.P=!0,It(11))}}else Tr(this.i,this.l,I,null),wt(this,I);He==4&&Gn(this),this.o&&!this.K&&(He==4?cn(this.j,this):(this.o=!1,Qi(this)))}else os(this.g),w==400&&I.indexOf("Unknown SID")>0?(this.m=3,It(12)):(this.m=0,It(13)),Gn(this),Ji(this)}}}catch{}finally{}};function Wo(h){if(!Va(h))return h.g.la();const w=Ko(h.g);if(w==="")return"";let I="";const b=w.length,q=Nr(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Gn(h),Ji(h),"";h.h.i=new p.TextDecoder}for(let Y=0;Y<b;Y++)h.h.h=!0,I+=h.h.i.decode(w[Y],{stream:!(q&&Y==b-1)});return w.length=0,h.h.g+=I,h.C=0,h.h.g}function Va(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Fa(h,w){var I=h.C,b=w.indexOf(`
`,I);return b==-1?Zi:(I=Number(w.substring(I,b)),isNaN(I)?Ho:(b+=1,b+I>w.length?Zi:(w=w.slice(b,b+I),h.C=b+I,w)))}Ln.prototype.cancel=function(){this.K=!0,Gn(this)};function Qi(h){h.T=Date.now()+h.H,$o(h,h.H)}function $o(h,w){if(h.D!=null)throw Error("WatchDog timer not null");h.D=yi(T(h.aa,h),w)}function Yi(h){h.D&&(p.clearTimeout(h.D),h.D=null)}Ln.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Vs(this.i,this.B),this.M!=2&&(xr(),It(17)),Gn(this),this.m=2,Ji(this)):$o(this,this.T-h)};function Ji(h){h.j.I==0||h.K||cn(h.j,h)}function Gn(h){Yi(h);var w=h.O;w&&typeof w.dispose=="function"&&w.dispose(),h.O=null,qi(h.V),h.g&&(w=h.g,h.g=null,w.abort(),w.dispose())}function wt(h,w){try{var I=h.j;if(I.I!=0&&(I.g==h||es(I.h,h))){if(!h.L&&es(I.h,h)&&I.I==3){try{var b=I.Ba.g.parse(w)}catch{b=null}if(Array.isArray(b)&&b.length==3){var q=b;if(q[0]==0){e:if(!I.v){if(I.g)if(I.g.F+3e3<h.F)Bs(I),jn(I);else break e;Lr(I),It(18)}}else I.xa=q[1],0<I.xa-I.K&&q[2]<37500&&I.F&&I.A==0&&!I.C&&(I.C=yi(T(I.Va,I),6e3));Xi(I.h)<=1&&I.ta&&(I.ta=void 0)}else wn(I,11)}else if((h.L||I.g==h)&&Bs(I),!A(w))for(q=I.Ba.g.parse(w),w=0;w<q.length;w++){let ft=q[w];const Rt=ft[0];if(!(Rt<=I.K))if(I.K=Rt,ft=ft[1],I.I==2)if(ft[0]=="c"){I.M=ft[1],I.ba=ft[2];const Fn=ft[3];Fn!=null&&(I.ka=Fn,I.j.info("VER="+I.ka));const hr=ft[4];hr!=null&&(I.za=hr,I.j.info("SVER="+I.za));const Yn=ft[5];Yn!=null&&typeof Yn=="number"&&Yn>0&&(b=1.5*Yn,I.O=b,I.j.info("backChannelRequestTimeoutMs_="+b)),b=I;const Mr=h.g;if(Mr){const Gs=Mr.g?Mr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Gs){var Y=b.h;Y.g||Gs.indexOf("spdy")==-1&&Gs.indexOf("quic")==-1&&Gs.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(Sr(Y,Y.h),Y.h=null))}if(b.G){const Ks=Mr.g?Mr.g.getResponseHeader("X-HTTP-Session-Id"):null;Ks&&(b.wa=Ks,Ee(b.J,b.G,Ks))}}I.I=3,I.l&&I.l.ra(),I.aa&&(I.T=Date.now()-h.F,I.j.info("Handshake RTT: "+I.T+"ms")),b=I;var ge=h;if(b.na=Ws(b,b.L?b.ba:null,b.W),ge.L){Ei(b.h,ge);var He=ge,ut=b.O;ut&&(He.H=ut),He.D&&(Yi(He),Qi(He)),b.g=ge}else Qt(b);I.i.length>0&&Vn(I)}else ft[0]!="stop"&&ft[0]!="close"||wn(I,7);else I.I==3&&(ft[0]=="stop"||ft[0]=="close"?ft[0]=="stop"?wn(I,7):nt(I):ft[0]!="noop"&&I.l&&I.l.qa(ft),I.A=0)}}xr(4)}catch{}}var Bl=class{constructor(h,w){this.g=h,this.map=w}};function Fs(h){this.l=h||10,p.PerformanceNavigationTiming?(h=p.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function qo(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Xi(h){return h.h?1:h.g?h.g.size:0}function es(h,w){return h.h?h.h==w:h.g?h.g.has(w):!1}function Sr(h,w){h.g?h.g.add(w):h.h=w}function Ei(h,w){h.h&&h.h==w?h.h=null:h.g&&h.g.has(w)&&h.g.delete(w)}Fs.prototype.cancel=function(){if(this.i=_n(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function _n(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let w=h.i;for(const I of h.g.values())w=w.concat(I.G);return w}return H(h.i)}var Ti=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ze(h,w){if(h){h=h.split("&");for(let I=0;I<h.length;I++){const b=h[I].indexOf("=");let q,Y=null;b>=0?(q=h[I].substring(0,b),Y=h[I].substring(b+1)):q=h[I],w(q,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function lt(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let w;h instanceof lt?(this.l=h.l,Kn(this,h.j),this.o=h.o,this.g=h.g,un(this,h.u),this.h=h.h,Pr(this,Si(h.i)),this.m=h.m):h&&(w=String(h).match(Ti))?(this.l=!1,Kn(this,w[1]||"",!0),this.o=Jr(w[2]||""),this.g=Jr(w[3]||"",!0),un(this,w[4]),this.h=Jr(w[5]||"",!0),Pr(this,w[6]||"",!0),this.m=Jr(w[7]||"")):(this.l=!1,this.i=new tt(null,this.l))}lt.prototype.toString=function(){const h=[];var w=this.j;w&&h.push(kr(w,Go,!0),":");var I=this.g;return(I||w=="file")&&(h.push("//"),(w=this.o)&&h.push(kr(w,Go,!0),"@"),h.push(be(I).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.u,I!=null&&h.push(":",String(I))),(I=this.h)&&(this.g&&I.charAt(0)!="/"&&h.push("/"),h.push(kr(I,I.charAt(0)=="/"?Dn:Ii,!0))),(I=this.i.toString())&&h.push("?",I),(I=this.m)&&h.push("#",kr(I,ur)),h.join("")},lt.prototype.resolve=function(h){const w=ln(this);let I=!!h.j;I?Kn(w,h.j):I=!!h.o,I?w.o=h.o:I=!!h.g,I?w.g=h.g:I=h.u!=null;var b=h.h;if(I)un(w,h.u);else if(I=!!h.h){if(b.charAt(0)!="/")if(this.g&&!this.h)b="/"+b;else{var q=w.h.lastIndexOf("/");q!=-1&&(b=w.h.slice(0,q+1)+b)}if(q=b,q==".."||q==".")b="";else if(q.indexOf("./")!=-1||q.indexOf("/.")!=-1){b=q.lastIndexOf("/",0)==0,q=q.split("/");const Y=[];for(let ge=0;ge<q.length;){const He=q[ge++];He=="."?b&&ge==q.length&&Y.push(""):He==".."?((Y.length>1||Y.length==1&&Y[0]!="")&&Y.pop(),b&&ge==q.length&&Y.push("")):(Y.push(He),b=!0)}b=Y.join("/")}else b=q}return I?w.h=b:I=h.i.toString()!=="",I?Pr(w,Si(h.i)):I=!!h.m,I&&(w.m=h.m),w};function ln(h){return new lt(h)}function Kn(h,w,I){h.j=I?Jr(w,!0):w,h.j&&(h.j=h.j.replace(/:$/,""))}function un(h,w){if(w){if(w=Number(w),isNaN(w)||w<0)throw Error("Bad port number "+w);h.u=w}else h.u=null}function Pr(h,w,I){w instanceof tt?(h.i=w,Pi(h.i,h.l)):(I||(w=kr(w,bt)),h.i=new tt(w,h.l))}function Ee(h,w,I){h.i.set(w,I)}function mt(h){return Ee(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Jr(h,w){return h?w?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function kr(h,w,I){return typeof h=="string"?(h=encodeURI(h).replace(w,tn),I&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function tn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Go=/[#\/\?@]/g,Ii=/[#\?:]/g,Dn=/[#\?]/g,bt=/[#\?@]/g,ur=/#/g;function tt(h,w){this.h=this.g=null,this.i=h||null,this.j=!!w}function yn(h){h.g||(h.g=new Map,h.h=0,h.i&&Ze(h.i,function(w,I){h.add(decodeURIComponent(w.replace(/\+/g," ")),I)}))}r=tt.prototype,r.add=function(h,w){yn(this),this.i=null,h=Zn(this,h);let I=this.g.get(h);return I||this.g.set(h,I=[]),I.push(w),this.h+=1,this};function ts(h,w){yn(h),w=Zn(h,w),h.g.has(w)&&(h.i=null,h.h-=h.g.get(w).length,h.g.delete(w))}function Cr(h,w){return yn(h),w=Zn(h,w),h.g.has(w)}r.forEach=function(h,w){yn(this),this.g.forEach(function(I,b){I.forEach(function(q){h.call(w,q,b,this)},this)},this)};function ns(h,w){yn(h);let I=[];if(typeof w=="string")Cr(h,w)&&(I=I.concat(h.g.get(Zn(h,w))));else for(h=Array.from(h.g.values()),w=0;w<h.length;w++)I=I.concat(h[w]);return I}r.set=function(h,w){return yn(this),this.i=null,h=Zn(this,h),Cr(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[w]),this.h+=1,this},r.get=function(h,w){return h?(h=ns(this,h),h.length>0?String(h[0]):w):w};function rs(h,w,I){ts(h,w),I.length>0&&(h.i=null,h.g.set(Zn(h,w),H(I)),h.h+=I.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],w=Array.from(this.g.keys());for(let b=0;b<w.length;b++){var I=w[b];const q=be(I);I=ns(this,I);for(let Y=0;Y<I.length;Y++){let ge=q;I[Y]!==""&&(ge+="="+be(I[Y])),h.push(ge)}}return this.i=h.join("&")};function Si(h){const w=new tt;return w.i=h.i,h.g&&(w.g=new Map(h.g),w.h=h.h),w}function Zn(h,w){return w=String(w),h.j&&(w=w.toLowerCase()),w}function Pi(h,w){w&&!h.j&&(yn(h),h.i=null,h.g.forEach(function(I,b){const q=b.toLowerCase();b!=q&&(ts(this,b),rs(this,q,I))},h)),h.j=w}function Mn(h,w){const I=new vi;if(p.Image){const b=new Image;b.onload=k(Vt,I,"TestLoadImage: loaded",!0,w,b),b.onerror=k(Vt,I,"TestLoadImage: error",!1,w,b),b.onabort=k(Vt,I,"TestLoadImage: abort",!1,w,b),b.ontimeout=k(Vt,I,"TestLoadImage: timeout",!1,w,b),p.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=h}else w(!1)}function cr(h,w){const I=new vi,b=new AbortController,q=setTimeout(()=>{b.abort(),Vt(I,"TestPingServer: timeout",!1,w)},1e4);fetch(h,{signal:b.signal}).then(Y=>{clearTimeout(q),Y.ok?Vt(I,"TestPingServer: ok",!0,w):Vt(I,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(q),Vt(I,"TestPingServer: error",!1,w)})}function Vt(h,w,I,b,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),b(I)}catch{}}function is(){this.g=new mi}function ze(h){this.i=h.Sb||null,this.h=h.ab||!1}C(ze,Qr),ze.prototype.g=function(){return new At(this.i,this.h)};function At(h,w){kt.call(this),this.H=h,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}C(At,kt),r=At.prototype,r.open=function(h,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=w,this.readyState=1,On(this)},r.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const w={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(w.body=h),(this.H||p).fetch(new Request(this.D,w)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Xr(this)),this.readyState=0},r.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,On(this)),this.g&&(this.readyState=3,On(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof p.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;gt(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function gt(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}r.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var w=h.value?h.value:new Uint8Array(0);(w=this.B.decode(w,{stream:!h.done}))&&(this.response=this.responseText+=w)}h.done?Xr(this):On(this),this.readyState==3&&gt(this)}},r.Oa=function(h){this.g&&(this.response=this.responseText=h,Xr(this))},r.Na=function(h){this.g&&(this.response=h,Xr(this))},r.ga=function(){this.g&&Xr(this)};function Xr(h){h.readyState=4,h.l=null,h.j=null,h.B=null,On(h)}r.setRequestHeader=function(h,w){this.A.append(h,w)},r.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],w=this.h.entries();for(var I=w.next();!I.done;)I=I.value,h.push(I[0]+": "+I[1]),I=w.next();return h.join(`\r
`)};function On(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(At.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function zs(h){let w="";return Ce(h,function(I,b){w+=b,w+=":",w+=I,w+=`\r
`}),w}function ki(h,w,I){e:{for(b in I){var b=!1;break e}b=!0}b||(I=zs(I),typeof h=="string"?I!=null&&be(I):Ee(h,w,I))}function at(h){kt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}C(at,kt);var Us=/^https?$/i,ss=["POST","PUT"];r=at.prototype,r.Fa=function(h){this.H=h},r.ea=function(h,w,I,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);w=w?w.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ja.g(),this.g.onreadystatechange=N(T(this.Ca,this));try{this.B=!0,this.g.open(w,String(h),!0),this.B=!1}catch(Y){xt(this,Y);return}if(h=I||"",I=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var q in b)I.set(q,b[q]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const Y of b.keys())I.set(Y,b.get(Y));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(I.keys()).find(Y=>Y.toLowerCase()=="content-type"),q=p.FormData&&h instanceof p.FormData,!(Array.prototype.indexOf.call(ss,w,void 0)>=0)||b||q||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,ge]of I)this.g.setRequestHeader(Y,ge);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(Y){xt(this,Y)}};function xt(h,w){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=w,h.o=5,vn(h),Ar(h)}function vn(h){h.A||(h.A=!0,Ct(h,"complete"),Ct(h,"error"))}r.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Ct(this,"complete"),Ct(this,"abort"),Ar(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ar(this,!0)),at.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?br(this):this.Xa())},r.Xa=function(){br(this)};function br(h){if(h.h&&typeof c<"u"){if(h.v&&Nr(h)==4)setTimeout(h.Ca.bind(h),0);else if(Ct(h,"readystatechange"),Nr(h)==4){h.h=!1;try{const Y=h.ca();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var I;if(!(I=w)){var b;if(b=Y===0){let ge=String(h.D).match(Ti)[1]||null;!ge&&p.self&&p.self.location&&(ge=p.self.location.protocol.slice(0,-1)),b=!Us.test(ge?ge.toLowerCase():"")}I=b}if(I)Ct(h,"complete"),Ct(h,"success");else{h.o=6;try{var q=Nr(h)>2?h.g.statusText:""}catch{q=""}h.l=q+" ["+h.ca()+"]",vn(h)}}finally{Ar(h)}}}}function Ar(h,w){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const I=h.g;h.g=null,w||Ct(h,"ready");try{I.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Nr(h){return h.g?h.g.readyState:0}r.ca=function(){try{return Nr(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(h){if(this.g){var w=this.g.responseText;return h&&w.indexOf(h)==0&&(w=w.substring(h.length)),La(w)}};function Ko(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function os(h){const w={};h=(h.g&&Nr(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<h.length;b++){if(A(h[b]))continue;var I=Ki(h[b]);const q=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const Y=w[q]||[];w[q]=Y,Y.push(I)}se(w,function(b){return b.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Rr(h,w,I){return I&&I.internalChannelParams&&I.internalChannelParams[h]||w}function as(h){this.za=0,this.i=[],this.j=new vi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Rr("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Rr("baseRetryDelayMs",5e3,h),this.Za=Rr("retryDelaySeedMs",1e4,h),this.Ta=Rr("forwardChannelMaxRetries",2,h),this.va=Rr("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Fs(h&&h.concurrentRequestLimit),this.Ba=new is,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=as.prototype,r.ka=8,r.I=1,r.connect=function(h,w,I,b){It(0),this.W=h,this.H=w||{},I&&b!==void 0&&(this.H.OSID=I,this.H.OAID=b),this.F=this.X,this.J=Ws(this,null,this.W),Vn(this)};function nt(h){if(nn(h),h.I==3){var w=h.V++,I=ln(h.J);if(Ee(I,"SID",h.M),Ee(I,"RID",w),Ee(I,"TYPE","terminate"),Qn(h,I),w=new Ln(h,h.j,w),w.M=2,w.A=mt(ln(I)),I=!1,p.navigator&&p.navigator.sendBeacon)try{I=p.navigator.sendBeacon(w.A.toString(),"")}catch{}!I&&p.Image&&(new Image().src=w.A,I=!0),I||(w.g=Yo(w.j,null),w.g.ea(w.A)),w.F=Date.now(),Qi(w)}xn(h)}function jn(h){h.g&&(us(h),h.g.cancel(),h.g=null)}function nn(h){jn(h),h.v&&(p.clearTimeout(h.v),h.v=null),Bs(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&p.clearTimeout(h.m),h.m=null)}function Vn(h){if(!qo(h.h)&&!h.m){h.m=!0;var w=h.Ea;ke||D(),fe||(ke(),fe=!0),V.add(w,h),h.D=0}}function Zo(h,w){return Xi(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=w.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=yi(T(h.Ea,h,w),Hs(h,h.D)),h.D++,!0)}r.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const q=new Ln(this,this.j,h);let Y=this.o;if(this.U&&(Y?(Y=B(Y),Me(Y,this.U)):Y=this.U),this.u!==null||this.R||(q.J=Y,Y=null),this.S)e:{for(var w=0,I=0;I<this.i.length;I++){t:{var b=this.i[I];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(w+=b,w>4096){w=I;break e}if(w===4096||I===this.i.length-1){w=I+1;break e}}w=1e3}else w=1e3;w=Qo(this,q,w),I=ln(this.J),Ee(I,"RID",h),Ee(I,"CVER",22),this.G&&Ee(I,"X-HTTP-Session-Id",this.G),Qn(this,I),Y&&(this.R?w="headers="+be(zs(Y))+"&"+w:this.u&&ki(I,this.u,Y)),Sr(this.h,q),this.Ra&&Ee(I,"TYPE","init"),this.S?(Ee(I,"$req",w),Ee(I,"SID","null"),q.U=!0,qn(q,I,null)):qn(q,I,w),this.I=2}}else this.I==3&&(h?ls(this,h):this.i.length==0||qo(this.h)||ls(this))};function ls(h,w){var I;w?I=w.l:I=h.V++;const b=ln(h.J);Ee(b,"SID",h.M),Ee(b,"RID",I),Ee(b,"AID",h.K),Qn(h,b),h.u&&h.o&&ki(b,h.u,h.o),I=new Ln(h,h.j,I,h.D+1),h.u===null&&(I.J=h.o),w&&(h.i=w.G.concat(h.i)),w=Qo(h,I,1e3),I.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Sr(h.h,I),qn(I,b,w)}function Qn(h,w){h.H&&Ce(h.H,function(I,b){Ee(w,b,I)}),h.l&&Ce({},function(I,b){Ee(w,b,I)})}function Qo(h,w,I){I=Math.min(h.i.length,I);const b=h.l?T(h.l.Ka,h.l,h):null;e:{var q=h.i;let He=-1;for(;;){const ut=["count="+I];He==-1?I>0?(He=q[0].g,ut.push("ofs="+He)):He=0:ut.push("ofs="+He);let ft=!0;for(let Rt=0;Rt<I;Rt++){var Y=q[Rt].g;const Fn=q[Rt].map;if(Y-=He,Y<0)He=Math.max(0,q[Rt].g-100),ft=!1;else try{Y="req"+Y+"_"||"";try{var ge=Fn instanceof Map?Fn:Object.entries(Fn);for(const[hr,Yn]of ge){let Mr=Yn;y(Yn)&&(Mr=Zr(Yn)),ut.push(Y+hr+"="+encodeURIComponent(Mr))}}catch(hr){throw ut.push(Y+"type="+encodeURIComponent("_badmap")),hr}}catch{b&&b(Fn)}}if(ft){ge=ut.join("&");break e}}ge=void 0}return h=h.i.splice(0,I),w.G=h,ge}function Qt(h){if(!h.g&&!h.v){h.Y=1;var w=h.Da;ke||D(),fe||(ke(),fe=!0),V.add(w,h),h.A=0}}function Lr(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=yi(T(h.Da,h),Hs(h,h.A)),h.A++,!0)}r.Da=function(){if(this.v=null,Dr(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=yi(T(this.Wa,this),h)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,It(10),jn(this),Dr(this))};function us(h){h.B!=null&&(p.clearTimeout(h.B),h.B=null)}function Dr(h){h.g=new Ln(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var w=ln(h.na);Ee(w,"RID","rpc"),Ee(w,"SID",h.M),Ee(w,"AID",h.K),Ee(w,"CI",h.F?"0":"1"),!h.F&&h.ia&&Ee(w,"TO",h.ia),Ee(w,"TYPE","xmlhttp"),Qn(h,w),h.u&&h.o&&ki(w,h.u,h.o),h.O&&(h.g.H=h.O);var I=h.g;h=h.ba,I.M=1,I.A=mt(ln(w)),I.u=null,I.R=!0,Ir(I,h)}r.Va=function(){this.C!=null&&(this.C=null,jn(this),Lr(this),It(19))};function Bs(h){h.C!=null&&(p.clearTimeout(h.C),h.C=null)}function cn(h,w){var I=null;if(h.g==w){Bs(h),us(h),h.g=null;var b=2}else if(es(h.h,w))I=w.G,Ei(h.h,w),b=1;else return;if(h.I!=0){if(w.o)if(b==1){I=w.u?w.u.length:0,w=Date.now()-w.F;var q=h.D;b=_i(),Ct(b,new Uo(b,I)),Vn(h)}else Qt(h);else if(q=w.m,q==3||q==0&&w.X>0||!(b==1&&Zo(h,w)||b==2&&Lr(h)))switch(I&&I.length>0&&(w=h.h,w.i=w.i.concat(I)),q){case 1:wn(h,5);break;case 4:wn(h,10);break;case 3:wn(h,6);break;default:wn(h,2)}}}function Hs(h,w){let I=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(I*=2),I*w}function wn(h,w){if(h.j.info("Error code "+w),w==2){var I=T(h.bb,h),b=h.Ua;const q=!b;b=new lt(b||"//www.google.com/images/cleardot.gif"),p.location&&p.location.protocol=="http"||Kn(b,"https"),mt(b),q?Mn(b.toString(),I):cr(b.toString(),I)}else It(2);h.I=0,h.l&&h.l.pa(w),xn(h),nn(h)}r.bb=function(h){h?(this.j.info("Successfully pinged google.com"),It(2)):(this.j.info("Failed to ping google.com"),It(1))};function xn(h){if(h.I=0,h.ja=[],h.l){const w=_n(h.h);(w.length!=0||h.i.length!=0)&&($(h.ja,w),$(h.ja,h.i),h.h.i.length=0,H(h.i),h.i.length=0),h.l.oa()}}function Ws(h,w,I){var b=I instanceof lt?ln(I):new lt(I);if(b.g!="")w&&(b.g=w+"."+b.g),un(b,b.u);else{var q=p.location;b=q.protocol,w=w?w+"."+q.hostname:q.hostname,q=+q.port;const Y=new lt(null);b&&Kn(Y,b),w&&(Y.g=w),q&&un(Y,q),I&&(Y.h=I),b=Y}return I=h.G,w=h.wa,I&&w&&Ee(b,I,w),Ee(b,"VER",h.ka),Qn(h,b),b}function Yo(h,w,I){if(w&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return w=h.Aa&&!h.ma?new at(new ze({ab:I})):new at(h.ma),w.Fa(h.L),w}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function $s(){}r=$s.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function qs(){}qs.prototype.g=function(h,w){return new Ht(h,w)};function Ht(h,w){kt.call(this),this.g=new as(w),this.l=h,this.h=w&&w.messageUrlParams||null,h=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(h?h["X-WebChannel-Content-Type"]=w.messageContentType:h={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.sa&&(h?h["X-WebChannel-Client-Profile"]=w.sa:h={"X-WebChannel-Client-Profile":w.sa}),this.g.U=h,(h=w&&w.Qb)&&!A(h)&&(this.g.u=h),this.A=w&&w.supportsCrossDomainXhr||!1,this.v=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!A(w)&&(this.g.G=w,h=this.h,h!==null&&w in h&&(h=this.h,w in h&&delete h[w])),this.j=new Ci(this)}C(Ht,kt),Ht.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ht.prototype.close=function(){nt(this.g)},Ht.prototype.o=function(h){var w=this.g;if(typeof h=="string"){var I={};I.__data__=h,h=I}else this.v&&(I={},I.__data__=Zr(h),h=I);w.i.push(new Bl(w.Ya++,h)),w.I==3&&Vn(w)},Ht.prototype.N=function(){this.g.l=null,delete this.j,nt(this.g),delete this.g,Ht.Z.N.call(this)};function Jo(h){gi.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var w=h.__sm__;if(w){e:{for(const I in w){h=I;break e}h=void 0}(this.i=h)&&(h=this.i,w=w!==null&&h in w?w[h]:void 0),this.data=w}else this.data=h}C(Jo,gi);function za(){Os.call(this),this.status=1}C(za,Os);function Ci(h){this.g=h}C(Ci,$s),Ci.prototype.ra=function(){Ct(this.g,"a")},Ci.prototype.qa=function(h){Ct(this.g,new Jo(h))},Ci.prototype.pa=function(h){Ct(this.g,new za)},Ci.prototype.oa=function(){Ct(this.g,"b")},qs.prototype.createWebChannel=qs.prototype.g,Ht.prototype.send=Ht.prototype.o,Ht.prototype.open=Ht.prototype.m,Ht.prototype.close=Ht.prototype.close,Xv=function(){return new qs},Jv=function(){return _i()},Yv=lr,qf={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},wi.NO_ERROR=0,wi.TIMEOUT=8,wi.HTTP_ERROR=6,lh=wi,xi.COMPLETE="complete",Qv=xi,Da.EventType=Yr,Yr.OPEN="a",Yr.CLOSE="b",Yr.ERROR="c",Yr.MESSAGE="d",kt.prototype.listen=kt.prototype.J,vu=Da,at.prototype.listenOnce=at.prototype.K,at.prototype.getLastError=at.prototype.Ha,at.prototype.getLastErrorCode=at.prototype.ya,at.prototype.getStatus=at.prototype.ca,at.prototype.getResponseJson=at.prototype.La,at.prototype.getResponseText=at.prototype.la,at.prototype.send=at.prototype.ea,at.prototype.setWithCredentials=at.prototype.Fa,Zv=at}).apply(typeof Xc<"u"?Xc:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Cn.UNAUTHENTICATED=new Cn(null),Cn.GOOGLE_CREDENTIALS=new Cn("google-credentials-uid"),Cn.FIRST_PARTY=new Cn("first-party-uid"),Cn.MOCK_USER=new Cn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ml="12.9.0";function uS(r){Ml=r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ta=new dp("@firebase/firestore");function fl(){return Ta.logLevel}function Pe(r,...e){if(Ta.logLevel<=it.DEBUG){const t=e.map(kp);Ta.debug(`Firestore (${Ml}): ${r}`,...t)}}function As(r,...e){if(Ta.logLevel<=it.ERROR){const t=e.map(kp);Ta.error(`Firestore (${Ml}): ${r}`,...t)}}function Ia(r,...e){if(Ta.logLevel<=it.WARN){const t=e.map(kp);Ta.warn(`Firestore (${Ml}): ${r}`,...t)}}function kp(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $e(r,e,t){let o="Unexpected state";typeof e=="string"?o=e:t=e,e0(r,o,t)}function e0(r,e,t){let o=`FIRESTORE (${Ml}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{o+=" CONTEXT: "+JSON.stringify(t)}catch{o+=" CONTEXT: "+t}throw As(o),new Error(o)}function yt(r,e,t,o){let a="Unexpected state";typeof t=="string"?a=t:o=t,r||e0(e,a,o)}function Ye(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ve extends Ls{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class cS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Cn.UNAUTHENTICATED)))}shutdown(){}}class hS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class dS{constructor(e){this.t=e,this.currentUser=Cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){yt(this.o===void 0,42304);let o=this.i;const a=x=>this.i!==o?(o=this.i,t(x)):Promise.resolve();let c=new ks;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new ks,e.enqueueRetryable((()=>a(this.currentUser)))};const p=()=>{const x=c;e.enqueueRetryable((async()=>{await x.promise,await a(this.currentUser)}))},y=x=>{Pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=x,this.o&&(this.auth.addAuthTokenListener(this.o),p())};this.t.onInit((x=>y(x))),setTimeout((()=>{if(!this.auth){const x=this.t.getImmediate({optional:!0});x?y(x):(Pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new ks)}}),0),p()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((o=>this.i!==e?(Pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(yt(typeof o.accessToken=="string",31837,{l:o}),new t0(o.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return yt(e===null||typeof e=="string",2055,{h:e}),new Cn(e)}}class fS{constructor(e,t,o){this.P=e,this.T=t,this.I=o,this.type="FirstParty",this.user=Cn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class pS{constructor(e,t,o){this.P=e,this.T=t,this.I=o}getToken(){return Promise.resolve(new fS(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Cn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class U_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class mS{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,qr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){yt(this.o===void 0,3512);const o=c=>{c.error!=null&&Pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const p=c.token!==this.m;return this.m=c.token,Pe("FirebaseAppCheckTokenProvider",`Received ${p?"new":"existing"} token.`),p?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>o(c)))};const a=c=>{Pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>a(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?a(c):Pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new U_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(yt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new U_(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gS(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let o=0;o<r;o++)t[o]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let o="";for(;o.length<20;){const a=gS(40);for(let c=0;c<a.length;++c)o.length<20&&a[c]<t&&(o+=e.charAt(a[c]%62))}return o}}function st(r,e){return r<e?-1:r>e?1:0}function Gf(r,e){const t=Math.min(r.length,e.length);for(let o=0;o<t;o++){const a=r.charAt(o),c=e.charAt(o);if(a!==c)return Cf(a)===Cf(c)?st(a,c):Cf(a)?1:-1}return st(r.length,e.length)}const _S=55296,yS=57343;function Cf(r){const e=r.charCodeAt(0);return e>=_S&&e<=yS}function kl(r,e,t){return r.length===e.length&&r.every(((o,a)=>t(o,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B_="__name__";class Vi{constructor(e,t,o){t===void 0?t=0:t>e.length&&$e(637,{offset:t,range:e.length}),o===void 0?o=e.length-t:o>e.length-t&&$e(1746,{length:o,range:e.length-t}),this.segments=e,this.offset=t,this.len=o}get length(){return this.len}isEqual(e){return Vi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Vi?e.forEach((o=>{t.push(o)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,o=this.limit();t<o;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const o=Math.min(e.length,t.length);for(let a=0;a<o;a++){const c=Vi.compareSegments(e.get(a),t.get(a));if(c!==0)return c}return st(e.length,t.length)}static compareSegments(e,t){const o=Vi.isNumericId(e),a=Vi.isNumericId(t);return o&&!a?-1:!o&&a?1:o&&a?Vi.extractNumericId(e).compare(Vi.extractNumericId(t)):Gf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return bo.fromString(e.substring(4,e.length-2))}}class Tt extends Vi{construct(e,t,o){return new Tt(e,t,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const o of e){if(o.indexOf("//")>=0)throw new ve(ie.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);t.push(...o.split("/").filter((a=>a.length>0)))}return new Tt(t)}static emptyPath(){return new Tt([])}}const vS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pn extends Vi{construct(e,t,o){return new pn(e,t,o)}static isValidIdentifier(e){return vS.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===B_}static keyField(){return new pn([B_])}static fromServerFormat(e){const t=[];let o="",a=0;const c=()=>{if(o.length===0)throw new ve(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(o),o=""};let p=!1;for(;a<e.length;){const y=e[a];if(y==="\\"){if(a+1===e.length)throw new ve(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const x=e[a+1];if(x!=="\\"&&x!=="."&&x!=="`")throw new ve(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=x,a+=2}else y==="`"?(p=!p,a++):y!=="."||p?(o+=y,a++):(c(),a++)}if(c(),p)throw new ve(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pn(t)}static emptyPath(){return new pn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e){this.path=e}static fromPath(e){return new je(Tt.fromString(e))}static fromName(e){return new je(Tt.fromString(e).popFirst(5))}static empty(){return new je(Tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Tt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new je(new Tt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n0(r,e,t){if(!t)throw new ve(ie.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function wS(r,e,t,o){if(e===!0&&o===!0)throw new ve(ie.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function H_(r){if(!je.isDocumentKey(r))throw new ve(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function W_(r){if(je.isDocumentKey(r))throw new ve(ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function r0(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Hh(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(o){return o.constructor?o.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":$e(12329,{type:typeof r})}function Ns(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ve(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Hh(r);throw new ve(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(r,e){const t={typeString:r};return e&&(t.value=e),t}function qu(r,e){if(!r0(r))throw new ve(ie.INVALID_ARGUMENT,"JSON must be an object");let t;for(const o in e)if(e[o]){const a=e[o].typeString,c="value"in e[o]?{value:e[o].value}:void 0;if(!(o in r)){t=`JSON missing required field: '${o}'`;break}const p=r[o];if(a&&typeof p!==a){t=`JSON field '${o}' must be a ${a}.`;break}if(c!==void 0&&p!==c.value){t=`Expected '${o}' field to equal '${c.value}'`;break}}if(t)throw new ve(ie.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_=-62135596800,q_=1e6;class Pt{static now(){return Pt.fromMillis(Date.now())}static fromDate(e){return Pt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),o=Math.floor((e-1e3*t)*q_);return new Pt(t,o)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ve(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ve(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<$_)throw new ve(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ve(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/q_}_compareTo(e){return this.seconds===e.seconds?st(this.nanoseconds,e.nanoseconds):st(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Pt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(qu(e,Pt._jsonSchema))return new Pt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-$_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Pt._jsonSchemaVersion="firestore/timestamp/1.0",Pt._jsonSchema={type:Kt("string",Pt._jsonSchemaVersion),seconds:Kt("number"),nanoseconds:Kt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{static fromTimestamp(e){return new Qe(e)}static min(){return new Qe(new Pt(0,0))}static max(){return new Qe(new Pt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lu=-1;function xS(r,e){const t=r.toTimestamp().seconds,o=r.toTimestamp().nanoseconds+1,a=Qe.fromTimestamp(o===1e9?new Pt(t+1,0):new Pt(t,o));return new No(a,je.empty(),e)}function ES(r){return new No(r.readTime,r.key,Lu)}class No{constructor(e,t,o){this.readTime=e,this.documentKey=t,this.largestBatchId=o}static min(){return new No(Qe.min(),je.empty(),Lu)}static max(){return new No(Qe.max(),je.empty(),Lu)}}function TS(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=je.comparator(r.documentKey,e.documentKey),t!==0?t:st(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class SS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ol(r){if(r.code!==ie.FAILED_PRECONDITION||r.message!==IS)throw r;Pe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&$e(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new oe(((o,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(o,a)},this.catchCallback=c=>{this.wrapFailure(t,c).next(o,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof oe?t:oe.resolve(t)}catch(t){return oe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):oe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):oe.reject(t)}static resolve(e){return new oe(((t,o)=>{t(e)}))}static reject(e){return new oe(((t,o)=>{o(e)}))}static waitFor(e){return new oe(((t,o)=>{let a=0,c=0,p=!1;e.forEach((y=>{++a,y.next((()=>{++c,p&&c===a&&t()}),(x=>o(x)))})),p=!0,c===a&&t()}))}static or(e){let t=oe.resolve(!1);for(const o of e)t=t.next((a=>a?oe.resolve(a):o()));return t}static forEach(e,t){const o=[];return e.forEach(((a,c)=>{o.push(t.call(this,a,c))})),this.waitFor(o)}static mapArray(e,t){return new oe(((o,a)=>{const c=e.length,p=new Array(c);let y=0;for(let x=0;x<c;x++){const T=x;t(e[T]).next((k=>{p[T]=k,++y,y===c&&o(p)}),(k=>a(k)))}}))}static doWhile(e,t){return new oe(((o,a)=>{const c=()=>{e()===!0?t().next((()=>{c()}),a):o()};c()}))}}function PS(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function jl(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=o=>this.ae(o),this.ue=o=>t.writeSequenceNumber(o))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Wh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bp=-1;function $h(r){return r==null}function Ih(r){return r===0&&1/r==-1/0}function kS(r){return typeof r=="number"&&Number.isInteger(r)&&!Ih(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0="";function CS(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=G_(e)),e=bS(r.get(t),e);return G_(e)}function bS(r,e){let t=e;const o=r.length;for(let a=0;a<o;a++){const c=r.charAt(a);switch(c){case"\0":t+="";break;case i0:t+="";break;default:t+=c}}return t}function G_(r){return r+i0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K_(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Fo(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function s0(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e,t){this.comparator=e,this.root=t||fn.EMPTY}insert(e,t){return new Mt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,fn.BLACK,null,null))}remove(e){return new Mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,fn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const o=this.comparator(e,t.key);if(o===0)return t.value;o<0?t=t.left:o>0&&(t=t.right)}return null}indexOf(e){let t=0,o=this.root;for(;!o.isEmpty();){const a=this.comparator(e,o.key);if(a===0)return t+o.left.size;a<0?o=o.left:(t+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,o)=>(e(t,o),!1)))}toString(){const e=[];return this.inorderTraversal(((t,o)=>(e.push(`${t}:${o}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new eh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new eh(this.root,e,this.comparator,!1)}getReverseIterator(){return new eh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new eh(this.root,e,this.comparator,!0)}}class eh{constructor(e,t,o,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?o(e.key,t):1,t&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class fn{constructor(e,t,o,a,c){this.key=e,this.value=t,this.color=o??fn.RED,this.left=a??fn.EMPTY,this.right=c??fn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,o,a,c){return new fn(e??this.key,t??this.value,o??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,o){let a=this;const c=o(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,t,o),null):c===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,o)),a.fixUp()}removeMin(){if(this.left.isEmpty())return fn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let o,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return fn.EMPTY;o=a.right.min(),a=a.copy(o.key,o.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,fn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,fn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw $e(43730,{key:this.key,value:this.value});if(this.right.isRed())throw $e(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw $e(27949);return e+(this.isRed()?0:1)}}fn.EMPTY=null,fn.RED=!0,fn.BLACK=!1;fn.EMPTY=new class{constructor(){this.size=0}get key(){throw $e(57766)}get value(){throw $e(16141)}get color(){throw $e(16727)}get left(){throw $e(29726)}get right(){throw $e(36894)}copy(e,t,o,a,c){return this}insert(e,t,o){return new fn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.comparator=e,this.data=new Mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,o)=>(e(t),!1)))}forEachInRange(e,t){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const a=o.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let o;for(o=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Z_(this.data.getIterator())}getIteratorFrom(e){return new Z_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((o=>{t=t.add(o)})),t}isEqual(e){if(!(e instanceof en)||this.size!==e.size)return!1;const t=this.data.getIterator(),o=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=o.getNext().key;if(this.comparator(a,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new en(this.comparator);return t.data=e,t}}class Z_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e){this.fields=e,e.sort(pn.comparator)}static empty(){return new yr([])}unionWith(e){let t=new en(pn.comparator);for(const o of this.fields)t=t.add(o);for(const o of e)t=t.add(o);return new yr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return kl(this.fields,e.fields,((t,o)=>t.isEqual(o)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new o0("Invalid base64 string: "+c):c}})(e);return new mn(t)}static fromUint8Array(e){const t=(function(a){let c="";for(let p=0;p<a.length;++p)c+=String.fromCharCode(a[p]);return c})(e);return new mn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const o=new Uint8Array(t.length);for(let a=0;a<t.length;a++)o[a]=t.charCodeAt(a);return o})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return st(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}mn.EMPTY_BYTE_STRING=new mn("");const AS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ro(r){if(yt(!!r,39018),typeof r=="string"){let e=0;const t=AS.exec(r);if(yt(!!t,46558,{timestamp:r}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const o=new Date(r);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:zt(r.seconds),nanos:zt(r.nanos)}}function zt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Lo(r){return typeof r=="string"?mn.fromBase64String(r):mn.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a0="server_timestamp",l0="__type__",u0="__previous_value__",c0="__local_write_time__";function Ap(r){var t,o;return((o=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[l0])==null?void 0:o.stringValue)===a0}function qh(r){const e=r.mapValue.fields[u0];return Ap(e)?qh(e):e}function Du(r){const e=Ro(r.mapValue.fields[c0].timestampValue);return new Pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(e,t,o,a,c,p,y,x,T,k,C){this.databaseId=e,this.appId=t,this.persistenceKey=o,this.host=a,this.ssl=c,this.forceLongPolling=p,this.autoDetectLongPolling=y,this.longPollingOptions=x,this.useFetchStreams=T,this.isUsingEmulator=k,this.apiKey=C}}const Sh="(default)";class Mu{constructor(e,t){this.projectId=e,this.database=t||Sh}static empty(){return new Mu("","")}get isDefaultDatabase(){return this.database===Sh}isEqual(e){return e instanceof Mu&&e.projectId===this.projectId&&e.database===this.database}}function RS(r,e){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new ve(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mu(r.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h0="__type__",LS="__max__",th={mapValue:{}},d0="__vector__",Ph="value";function Do(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Ap(r)?4:MS(r)?9007199254740991:DS(r)?10:11:$e(28295,{value:r})}function Wi(r,e){if(r===e)return!0;const t=Do(r);if(t!==Do(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Du(r).isEqual(Du(e));case 3:return(function(a,c){if(typeof a.timestampValue=="string"&&typeof c.timestampValue=="string"&&a.timestampValue.length===c.timestampValue.length)return a.timestampValue===c.timestampValue;const p=Ro(a.timestampValue),y=Ro(c.timestampValue);return p.seconds===y.seconds&&p.nanos===y.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(a,c){return Lo(a.bytesValue).isEqual(Lo(c.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(a,c){return zt(a.geoPointValue.latitude)===zt(c.geoPointValue.latitude)&&zt(a.geoPointValue.longitude)===zt(c.geoPointValue.longitude)})(r,e);case 2:return(function(a,c){if("integerValue"in a&&"integerValue"in c)return zt(a.integerValue)===zt(c.integerValue);if("doubleValue"in a&&"doubleValue"in c){const p=zt(a.doubleValue),y=zt(c.doubleValue);return p===y?Ih(p)===Ih(y):isNaN(p)&&isNaN(y)}return!1})(r,e);case 9:return kl(r.arrayValue.values||[],e.arrayValue.values||[],Wi);case 10:case 11:return(function(a,c){const p=a.mapValue.fields||{},y=c.mapValue.fields||{};if(K_(p)!==K_(y))return!1;for(const x in p)if(p.hasOwnProperty(x)&&(y[x]===void 0||!Wi(p[x],y[x])))return!1;return!0})(r,e);default:return $e(52216,{left:r})}}function Ou(r,e){return(r.values||[]).find((t=>Wi(t,e)))!==void 0}function Cl(r,e){if(r===e)return 0;const t=Do(r),o=Do(e);if(t!==o)return st(t,o);switch(t){case 0:case 9007199254740991:return 0;case 1:return st(r.booleanValue,e.booleanValue);case 2:return(function(c,p){const y=zt(c.integerValue||c.doubleValue),x=zt(p.integerValue||p.doubleValue);return y<x?-1:y>x?1:y===x?0:isNaN(y)?isNaN(x)?0:-1:1})(r,e);case 3:return Q_(r.timestampValue,e.timestampValue);case 4:return Q_(Du(r),Du(e));case 5:return Gf(r.stringValue,e.stringValue);case 6:return(function(c,p){const y=Lo(c),x=Lo(p);return y.compareTo(x)})(r.bytesValue,e.bytesValue);case 7:return(function(c,p){const y=c.split("/"),x=p.split("/");for(let T=0;T<y.length&&T<x.length;T++){const k=st(y[T],x[T]);if(k!==0)return k}return st(y.length,x.length)})(r.referenceValue,e.referenceValue);case 8:return(function(c,p){const y=st(zt(c.latitude),zt(p.latitude));return y!==0?y:st(zt(c.longitude),zt(p.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return Y_(r.arrayValue,e.arrayValue);case 10:return(function(c,p){var N,H,$,Z;const y=c.fields||{},x=p.fields||{},T=(N=y[Ph])==null?void 0:N.arrayValue,k=(H=x[Ph])==null?void 0:H.arrayValue,C=st((($=T==null?void 0:T.values)==null?void 0:$.length)||0,((Z=k==null?void 0:k.values)==null?void 0:Z.length)||0);return C!==0?C:Y_(T,k)})(r.mapValue,e.mapValue);case 11:return(function(c,p){if(c===th.mapValue&&p===th.mapValue)return 0;if(c===th.mapValue)return 1;if(p===th.mapValue)return-1;const y=c.fields||{},x=Object.keys(y),T=p.fields||{},k=Object.keys(T);x.sort(),k.sort();for(let C=0;C<x.length&&C<k.length;++C){const N=Gf(x[C],k[C]);if(N!==0)return N;const H=Cl(y[x[C]],T[k[C]]);if(H!==0)return H}return st(x.length,k.length)})(r.mapValue,e.mapValue);default:throw $e(23264,{he:t})}}function Q_(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return st(r,e);const t=Ro(r),o=Ro(e),a=st(t.seconds,o.seconds);return a!==0?a:st(t.nanos,o.nanos)}function Y_(r,e){const t=r.values||[],o=e.values||[];for(let a=0;a<t.length&&a<o.length;++a){const c=Cl(t[a],o[a]);if(c)return c}return st(t.length,o.length)}function bl(r){return Kf(r)}function Kf(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const o=Ro(t);return`time(${o.seconds},${o.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return Lo(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return je.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let o="[",a=!0;for(const c of t.values||[])a?a=!1:o+=",",o+=Kf(c);return o+"]"})(r.arrayValue):"mapValue"in r?(function(t){const o=Object.keys(t.fields||{}).sort();let a="{",c=!0;for(const p of o)c?c=!1:a+=",",a+=`${p}:${Kf(t.fields[p])}`;return a+"}"})(r.mapValue):$e(61005,{value:r})}function uh(r){switch(Do(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=qh(r);return e?16+uh(e):16;case 5:return 2*r.stringValue.length;case 6:return Lo(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(o){return(o.values||[]).reduce(((a,c)=>a+uh(c)),0)})(r.arrayValue);case 10:case 11:return(function(o){let a=0;return Fo(o.fields,((c,p)=>{a+=c.length+uh(p)})),a})(r.mapValue);default:throw $e(13486,{value:r})}}function J_(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Zf(r){return!!r&&"integerValue"in r}function Np(r){return!!r&&"arrayValue"in r}function X_(r){return!!r&&"nullValue"in r}function ey(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function ch(r){return!!r&&"mapValue"in r}function DS(r){var t,o;return((o=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[h0])==null?void 0:o.stringValue)===d0}function Pu(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Fo(r.mapValue.fields,((t,o)=>e.mapValue.fields[t]=Pu(o))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Pu(r.arrayValue.values[t]);return e}return{...r}}function MS(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===LS}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e){this.value=e}static empty(){return new sr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let o=0;o<e.length-1;++o)if(t=(t.mapValue.fields||{})[e.get(o)],!ch(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pu(t)}setAll(e){let t=pn.emptyPath(),o={},a=[];e.forEach(((p,y)=>{if(!t.isImmediateParentOf(y)){const x=this.getFieldsMap(t);this.applyChanges(x,o,a),o={},a=[],t=y.popLast()}p?o[y.lastSegment()]=Pu(p):a.push(y.lastSegment())}));const c=this.getFieldsMap(t);this.applyChanges(c,o,a)}delete(e){const t=this.field(e.popLast());ch(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Wi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let o=0;o<e.length;++o){let a=t.mapValue.fields[e.get(o)];ch(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(o)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,o){Fo(t,((a,c)=>e[a]=c));for(const a of o)delete e[a]}clone(){return new sr(Pu(this.value))}}function f0(r){const e=[];return Fo(r.fields,((t,o)=>{const a=new pn([t]);if(ch(o)){const c=f0(o.mapValue).fields;if(c.length===0)e.push(a);else for(const p of c)e.push(a.child(p))}else e.push(a)})),new yr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e,t,o,a,c,p,y){this.key=e,this.documentType=t,this.version=o,this.readTime=a,this.createTime=c,this.data=p,this.documentState=y}static newInvalidDocument(e){return new bn(e,0,Qe.min(),Qe.min(),Qe.min(),sr.empty(),0)}static newFoundDocument(e,t,o,a){return new bn(e,1,t,Qe.min(),o,a,0)}static newNoDocument(e,t){return new bn(e,2,t,Qe.min(),Qe.min(),sr.empty(),0)}static newUnknownDocument(e,t){return new bn(e,3,t,Qe.min(),Qe.min(),sr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Qe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=sr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=sr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Qe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof bn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new bn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e,t){this.position=e,this.inclusive=t}}function ty(r,e,t){let o=0;for(let a=0;a<r.position.length;a++){const c=e[a],p=r.position[a];if(c.field.isKeyField()?o=je.comparator(je.fromName(p.referenceValue),t.key):o=Cl(p,t.data.field(c.field)),c.dir==="desc"&&(o*=-1),o!==0)break}return o}function ny(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Wi(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(e,t="asc"){this.field=e,this.dir=t}}function OS(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{}class Gt extends p0{constructor(e,t,o){super(),this.field=e,this.op=t,this.value=o}static create(e,t,o){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,o):new VS(e,t,o):t==="array-contains"?new US(e,o):t==="in"?new BS(e,o):t==="not-in"?new HS(e,o):t==="array-contains-any"?new WS(e,o):new Gt(e,t,o)}static createKeyFieldInFilter(e,t,o){return t==="in"?new FS(e,o):new zS(e,o)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Cl(t,this.value)):t!==null&&Do(this.value)===Do(t)&&this.matchesComparison(Cl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return $e(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hi extends p0{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new hi(e,t)}matches(e){return m0(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function m0(r){return r.op==="and"}function g0(r){return jS(r)&&m0(r)}function jS(r){for(const e of r.filters)if(e instanceof hi)return!1;return!0}function Qf(r){if(r instanceof Gt)return r.field.canonicalString()+r.op.toString()+bl(r.value);if(g0(r))return r.filters.map((e=>Qf(e))).join(",");{const e=r.filters.map((t=>Qf(t))).join(",");return`${r.op}(${e})`}}function _0(r,e){return r instanceof Gt?(function(o,a){return a instanceof Gt&&o.op===a.op&&o.field.isEqual(a.field)&&Wi(o.value,a.value)})(r,e):r instanceof hi?(function(o,a){return a instanceof hi&&o.op===a.op&&o.filters.length===a.filters.length?o.filters.reduce(((c,p,y)=>c&&_0(p,a.filters[y])),!0):!1})(r,e):void $e(19439)}function y0(r){return r instanceof Gt?(function(t){return`${t.field.canonicalString()} ${t.op} ${bl(t.value)}`})(r):r instanceof hi?(function(t){return t.op.toString()+" {"+t.getFilters().map(y0).join(" ,")+"}"})(r):"Filter"}class VS extends Gt{constructor(e,t,o){super(e,t,o),this.key=je.fromName(o.referenceValue)}matches(e){const t=je.comparator(e.key,this.key);return this.matchesComparison(t)}}class FS extends Gt{constructor(e,t){super(e,"in",t),this.keys=v0("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class zS extends Gt{constructor(e,t){super(e,"not-in",t),this.keys=v0("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function v0(r,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((o=>je.fromName(o.referenceValue)))}class US extends Gt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Np(t)&&Ou(t.arrayValue,this.value)}}class BS extends Gt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ou(this.value.arrayValue,t)}}class HS extends Gt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ou(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Ou(this.value.arrayValue,t)}}class WS extends Gt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Np(t)||!t.arrayValue.values)&&t.arrayValue.values.some((o=>Ou(this.value.arrayValue,o)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e,t=null,o=[],a=[],c=null,p=null,y=null){this.path=e,this.collectionGroup=t,this.orderBy=o,this.filters=a,this.limit=c,this.startAt=p,this.endAt=y,this.Te=null}}function ry(r,e=null,t=[],o=[],a=null,c=null,p=null){return new $S(r,e,t,o,a,c,p)}function Rp(r){const e=Ye(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((o=>Qf(o))).join(","),t+="|ob:",t+=e.orderBy.map((o=>(function(c){return c.field.canonicalString()+c.dir})(o))).join(","),$h(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((o=>bl(o))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((o=>bl(o))).join(",")),e.Te=t}return e.Te}function Lp(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!OS(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!_0(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!ny(r.startAt,e.startAt)&&ny(r.endAt,e.endAt)}function Yf(r){return je.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(e,t=null,o=[],a=[],c=null,p="F",y=null,x=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=o,this.filters=a,this.limit=c,this.limitType=p,this.startAt=y,this.endAt=x,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function qS(r,e,t,o,a,c,p,y){return new Vl(r,e,t,o,a,c,p,y)}function Dp(r){return new Vl(r)}function iy(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function GS(r){return je.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function w0(r){return r.collectionGroup!==null}function ku(r){const e=Ye(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),t.add(c.field.canonicalString());const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(p){let y=new en(pn.comparator);return p.filters.forEach((x=>{x.getFlattenedFilters().forEach((T=>{T.isInequality()&&(y=y.add(T.field))}))})),y})(e).forEach((c=>{t.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new ju(c,o))})),t.has(pn.keyField().canonicalString())||e.Ie.push(new ju(pn.keyField(),o))}return e.Ie}function Ui(r){const e=Ye(r);return e.Ee||(e.Ee=KS(e,ku(r))),e.Ee}function KS(r,e){if(r.limitType==="F")return ry(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((a=>{const c=a.dir==="desc"?"asc":"desc";return new ju(a.field,c)}));const t=r.endAt?new kh(r.endAt.position,r.endAt.inclusive):null,o=r.startAt?new kh(r.startAt.position,r.startAt.inclusive):null;return ry(r.path,r.collectionGroup,e,r.filters,r.limit,t,o)}}function Jf(r,e){const t=r.filters.concat([e]);return new Vl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function ZS(r,e){const t=r.explicitOrderBy.concat([e]);return new Vl(r.path,r.collectionGroup,t,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}function Xf(r,e,t){return new Vl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Gh(r,e){return Lp(Ui(r),Ui(e))&&r.limitType===e.limitType}function x0(r){return`${Rp(Ui(r))}|lt:${r.limitType}`}function pl(r){return`Query(target=${(function(t){let o=t.path.canonicalString();return t.collectionGroup!==null&&(o+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(o+=`, filters: [${t.filters.map((a=>y0(a))).join(", ")}]`),$h(t.limit)||(o+=", limit: "+t.limit),t.orderBy.length>0&&(o+=`, orderBy: [${t.orderBy.map((a=>(function(p){return`${p.field.canonicalString()} (${p.dir})`})(a))).join(", ")}]`),t.startAt&&(o+=", startAt: ",o+=t.startAt.inclusive?"b:":"a:",o+=t.startAt.position.map((a=>bl(a))).join(",")),t.endAt&&(o+=", endAt: ",o+=t.endAt.inclusive?"a:":"b:",o+=t.endAt.position.map((a=>bl(a))).join(",")),`Target(${o})`})(Ui(r))}; limitType=${r.limitType})`}function Kh(r,e){return e.isFoundDocument()&&(function(o,a){const c=a.key.path;return o.collectionGroup!==null?a.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(c):je.isDocumentKey(o.path)?o.path.isEqual(c):o.path.isImmediateParentOf(c)})(r,e)&&(function(o,a){for(const c of ku(o))if(!c.field.isKeyField()&&a.data.field(c.field)===null)return!1;return!0})(r,e)&&(function(o,a){for(const c of o.filters)if(!c.matches(a))return!1;return!0})(r,e)&&(function(o,a){return!(o.startAt&&!(function(p,y,x){const T=ty(p,y,x);return p.inclusive?T<=0:T<0})(o.startAt,ku(o),a)||o.endAt&&!(function(p,y,x){const T=ty(p,y,x);return p.inclusive?T>=0:T>0})(o.endAt,ku(o),a))})(r,e)}function QS(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function E0(r){return(e,t)=>{let o=!1;for(const a of ku(r)){const c=YS(a,e,t);if(c!==0)return c;o=o||a.field.isKeyField()}return 0}}function YS(r,e,t){const o=r.field.isKeyField()?je.comparator(e.key,t.key):(function(c,p,y){const x=p.data.field(c),T=y.data.field(c);return x!==null&&T!==null?Cl(x,T):$e(42886)})(r.field,e,t);switch(r.dir){case"asc":return o;case"desc":return-1*o;default:return $e(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),o=this.inner[t];if(o!==void 0){for(const[a,c]of o)if(this.equalsFn(a,e))return c}}has(e){return this.get(e)!==void 0}set(e,t){const o=this.mapKeyFn(e),a=this.inner[o];if(a===void 0)return this.inner[o]=[[e,t]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),o=this.inner[t];if(o===void 0)return!1;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return o.length===1?delete this.inner[t]:o.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Fo(this.inner,((t,o)=>{for(const[a,c]of o)e(a,c)}))}isEmpty(){return s0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS=new Mt(je.comparator);function Rs(){return JS}const T0=new Mt(je.comparator);function wu(...r){let e=T0;for(const t of r)e=e.insert(t.key,t);return e}function I0(r){let e=T0;return r.forEach(((t,o)=>e=e.insert(t,o.overlayedDocument))),e}function _a(){return Cu()}function S0(){return Cu()}function Cu(){return new ba((r=>r.toString()),((r,e)=>r.isEqual(e)))}const XS=new Mt(je.comparator),eP=new en(je.comparator);function ot(...r){let e=eP;for(const t of r)e=e.add(t);return e}const tP=new en(st);function nP(){return tP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mp(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ih(e)?"-0":e}}function P0(r){return{integerValue:""+r}}function rP(r,e){return kS(e)?P0(e):Mp(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(){this._=void 0}}function iP(r,e,t){return r instanceof Ch?(function(a,c){const p={fields:{[l0]:{stringValue:a0},[c0]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return c&&Ap(c)&&(c=qh(c)),c&&(p.fields[u0]=c),{mapValue:p}})(t,e):r instanceof Vu?C0(r,e):r instanceof Fu?b0(r,e):(function(a,c){const p=k0(a,c),y=sy(p)+sy(a.Ae);return Zf(p)&&Zf(a.Ae)?P0(y):Mp(a.serializer,y)})(r,e)}function sP(r,e,t){return r instanceof Vu?C0(r,e):r instanceof Fu?b0(r,e):t}function k0(r,e){return r instanceof bh?(function(o){return Zf(o)||(function(c){return!!c&&"doubleValue"in c})(o)})(e)?e:{integerValue:0}:null}class Ch extends Zh{}class Vu extends Zh{constructor(e){super(),this.elements=e}}function C0(r,e){const t=A0(e);for(const o of r.elements)t.some((a=>Wi(a,o)))||t.push(o);return{arrayValue:{values:t}}}class Fu extends Zh{constructor(e){super(),this.elements=e}}function b0(r,e){let t=A0(e);for(const o of r.elements)t=t.filter((a=>!Wi(a,o)));return{arrayValue:{values:t}}}class bh extends Zh{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function sy(r){return zt(r.integerValue||r.doubleValue)}function A0(r){return Np(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function oP(r,e){return r.field.isEqual(e.field)&&(function(o,a){return o instanceof Vu&&a instanceof Vu||o instanceof Fu&&a instanceof Fu?kl(o.elements,a.elements,Wi):o instanceof bh&&a instanceof bh?Wi(o.Ae,a.Ae):o instanceof Ch&&a instanceof Ch})(r.transform,e.transform)}class aP{constructor(e,t){this.version=e,this.transformResults=t}}class vr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new vr}static exists(e){return new vr(void 0,e)}static updateTime(e){return new vr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function hh(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Qh{}function N0(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Yh(r.key,vr.none()):new Gu(r.key,r.data,vr.none());{const t=r.data,o=sr.empty();let a=new en(pn.comparator);for(let c of e.fields)if(!a.has(c)){let p=t.field(c);p===null&&c.length>1&&(c=c.popLast(),p=t.field(c)),p===null?o.delete(c):o.set(c,p),a=a.add(c)}return new zo(r.key,o,new yr(a.toArray()),vr.none())}}function lP(r,e,t){r instanceof Gu?(function(a,c,p){const y=a.value.clone(),x=ay(a.fieldTransforms,c,p.transformResults);y.setAll(x),c.convertToFoundDocument(p.version,y).setHasCommittedMutations()})(r,e,t):r instanceof zo?(function(a,c,p){if(!hh(a.precondition,c))return void c.convertToUnknownDocument(p.version);const y=ay(a.fieldTransforms,c,p.transformResults),x=c.data;x.setAll(R0(a)),x.setAll(y),c.convertToFoundDocument(p.version,x).setHasCommittedMutations()})(r,e,t):(function(a,c,p){c.convertToNoDocument(p.version).setHasCommittedMutations()})(0,e,t)}function bu(r,e,t,o){return r instanceof Gu?(function(c,p,y,x){if(!hh(c.precondition,p))return y;const T=c.value.clone(),k=ly(c.fieldTransforms,x,p);return T.setAll(k),p.convertToFoundDocument(p.version,T).setHasLocalMutations(),null})(r,e,t,o):r instanceof zo?(function(c,p,y,x){if(!hh(c.precondition,p))return y;const T=ly(c.fieldTransforms,x,p),k=p.data;return k.setAll(R0(c)),k.setAll(T),p.convertToFoundDocument(p.version,k).setHasLocalMutations(),y===null?null:y.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((C=>C.field)))})(r,e,t,o):(function(c,p,y){return hh(c.precondition,p)?(p.convertToNoDocument(p.version).setHasLocalMutations(),null):y})(r,e,t)}function uP(r,e){let t=null;for(const o of r.fieldTransforms){const a=e.data.field(o.field),c=k0(o.transform,a||null);c!=null&&(t===null&&(t=sr.empty()),t.set(o.field,c))}return t||null}function oy(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(o,a){return o===void 0&&a===void 0||!(!o||!a)&&kl(o,a,((c,p)=>oP(c,p)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Gu extends Qh{constructor(e,t,o,a=[]){super(),this.key=e,this.value=t,this.precondition=o,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class zo extends Qh{constructor(e,t,o,a,c=[]){super(),this.key=e,this.data=t,this.fieldMask=o,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function R0(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const o=r.data.field(t);e.set(t,o)}})),e}function ay(r,e,t){const o=new Map;yt(r.length===t.length,32656,{Ve:t.length,de:r.length});for(let a=0;a<t.length;a++){const c=r[a],p=c.transform,y=e.data.field(c.field);o.set(c.field,sP(p,y,t[a]))}return o}function ly(r,e,t){const o=new Map;for(const a of r){const c=a.transform,p=t.data.field(a.field);o.set(a.field,iP(c,p,e))}return o}class Yh extends Qh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class cP extends Qh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(e,t,o,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=o,this.mutations=a}applyToRemoteDocument(e,t){const o=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&lP(c,e,o[a])}}applyToLocalView(e,t){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(t=bu(o,e,t,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(t=bu(o,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const o=S0();return this.mutations.forEach((a=>{const c=e.get(a.key),p=c.overlayedDocument;let y=this.applyToLocalView(p,c.mutatedFields);y=t.has(a.key)?null:y;const x=N0(p,y);x!==null&&o.set(a.key,x),p.isValidDocument()||p.convertToNoDocument(Qe.min())})),o}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ot())}isEqual(e){return this.batchId===e.batchId&&kl(this.mutations,e.mutations,((t,o)=>oy(t,o)))&&kl(this.baseMutations,e.baseMutations,((t,o)=>oy(t,o)))}}class Op{constructor(e,t,o,a){this.batch=e,this.commitVersion=t,this.mutationResults=o,this.docVersions=a}static from(e,t,o){yt(e.mutations.length===o.length,58842,{me:e.mutations.length,fe:o.length});let a=(function(){return XS})();const c=e.mutations;for(let p=0;p<c.length;p++)a=a.insert(c[p].key,o[p].version);return new Op(e,t,o,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qt,ct;function pP(r){switch(r){case ie.OK:return $e(64938);case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0;default:return $e(15467,{code:r})}}function L0(r){if(r===void 0)return As("GRPC error has no .code"),ie.UNKNOWN;switch(r){case qt.OK:return ie.OK;case qt.CANCELLED:return ie.CANCELLED;case qt.UNKNOWN:return ie.UNKNOWN;case qt.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case qt.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case qt.INTERNAL:return ie.INTERNAL;case qt.UNAVAILABLE:return ie.UNAVAILABLE;case qt.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case qt.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case qt.NOT_FOUND:return ie.NOT_FOUND;case qt.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case qt.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case qt.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case qt.ABORTED:return ie.ABORTED;case qt.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case qt.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case qt.DATA_LOSS:return ie.DATA_LOSS;default:return $e(39323,{code:r})}}(ct=qt||(qt={}))[ct.OK=0]="OK",ct[ct.CANCELLED=1]="CANCELLED",ct[ct.UNKNOWN=2]="UNKNOWN",ct[ct.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ct[ct.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ct[ct.NOT_FOUND=5]="NOT_FOUND",ct[ct.ALREADY_EXISTS=6]="ALREADY_EXISTS",ct[ct.PERMISSION_DENIED=7]="PERMISSION_DENIED",ct[ct.UNAUTHENTICATED=16]="UNAUTHENTICATED",ct[ct.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ct[ct.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ct[ct.ABORTED=10]="ABORTED",ct[ct.OUT_OF_RANGE=11]="OUT_OF_RANGE",ct[ct.UNIMPLEMENTED=12]="UNIMPLEMENTED",ct[ct.INTERNAL=13]="INTERNAL",ct[ct.UNAVAILABLE=14]="UNAVAILABLE",ct[ct.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gP=new bo([4294967295,4294967295],0);function uy(r){const e=mP().encode(r),t=new Kv;return t.update(e),new Uint8Array(t.digest())}function cy(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),o=e.getUint32(4,!0),a=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new bo([t,o],0),new bo([a,c],0)]}class jp{constructor(e,t,o){if(this.bitmap=e,this.padding=t,this.hashCount=o,t<0||t>=8)throw new xu(`Invalid padding: ${t}`);if(o<0)throw new xu(`Invalid hash count: ${o}`);if(e.length>0&&this.hashCount===0)throw new xu(`Invalid hash count: ${o}`);if(e.length===0&&t!==0)throw new xu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=bo.fromNumber(this.ge)}ye(e,t,o){let a=e.add(t.multiply(bo.fromNumber(o)));return a.compare(gP)===1&&(a=new bo([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=uy(e),[o,a]=cy(t);for(let c=0;c<this.hashCount;c++){const p=this.ye(o,a,c);if(!this.we(p))return!1}return!0}static create(e,t,o){const a=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),p=new jp(c,a,t);return o.forEach((y=>p.insert(y))),p}insert(e){if(this.ge===0)return;const t=uy(e),[o,a]=cy(t);for(let c=0;c<this.hashCount;c++){const p=this.ye(o,a,c);this.be(p)}}be(e){const t=Math.floor(e/8),o=e%8;this.bitmap[t]|=1<<o}}class xu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(e,t,o,a,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=o,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,o){const a=new Map;return a.set(e,Ku.createSynthesizedTargetChangeForCurrentChange(e,t,o)),new Jh(Qe.min(),a,new Mt(st),Rs(),ot())}}class Ku{constructor(e,t,o,a,c){this.resumeToken=e,this.current=t,this.addedDocuments=o,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,o){return new Ku(o,t,ot(),ot(),ot())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(e,t,o,a){this.Se=e,this.removedTargetIds=t,this.key=o,this.De=a}}class D0{constructor(e,t){this.targetId=e,this.Ce=t}}class M0{constructor(e,t,o=mn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=o,this.cause=a}}class hy{constructor(){this.ve=0,this.Fe=dy(),this.Me=mn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ot(),t=ot(),o=ot();return this.Fe.forEach(((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:o=o.add(a);break;default:$e(38017,{changeType:c})}})),new Ku(this.Me,this.xe,e,t,o)}Ke(){this.Oe=!1,this.Fe=dy()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,yt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class _P{constructor(e){this.Ge=e,this.ze=new Map,this.je=Rs(),this.He=nh(),this.Je=nh(),this.Ze=new Mt(st)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const o=this.nt(t);switch(e.state){case 0:this.rt(t)&&o.Le(e.resumeToken);break;case 1:o.We(),o.Ne||o.Ke(),o.Le(e.resumeToken);break;case 2:o.We(),o.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(o.Qe(),o.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),o.Le(e.resumeToken));break;default:$e(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((o,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,o=e.Ce.count,a=this.ot(t);if(a){const c=a.target;if(Yf(c))if(o===0){const p=new je(c.path);this.et(t,p,bn.newNoDocument(p,Qe.min()))}else yt(o===1,20013,{expectedCount:o});else{const p=this._t(t);if(p!==o){const y=this.ut(e),x=y?this.ct(y,e,p):1;if(x!==0){this.it(t);const T=x===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,T)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:o="",padding:a=0},hashCount:c=0}=t;let p,y;try{p=Lo(o).toUint8Array()}catch(x){if(x instanceof o0)return Ia("Decoding the base64 bloom filter in existence filter failed ("+x.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw x}try{y=new jp(p,a,c)}catch(x){return Ia(x instanceof xu?"BloomFilter error: ":"Applying bloom filter failed: ",x),null}return y.ge===0?null:y}ct(e,t,o){return t.Ce.count===o-this.Pt(e,t.targetId)?0:2}Pt(e,t){const o=this.Ge.getRemoteKeysForTarget(t);let a=0;return o.forEach((c=>{const p=this.Ge.ht(),y=`projects/${p.projectId}/databases/${p.database}/documents/${c.path.canonicalString()}`;e.mightContain(y)||(this.et(t,c,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((c,p)=>{const y=this.ot(p);if(y){if(c.current&&Yf(y.target)){const x=new je(y.target.path);this.It(x).has(p)||this.Et(p,x)||this.et(p,x,bn.newNoDocument(x,e))}c.Be&&(t.set(p,c.ke()),c.Ke())}}));let o=ot();this.Je.forEach(((c,p)=>{let y=!0;p.forEachWhile((x=>{const T=this.ot(x);return!T||T.purpose==="TargetPurposeLimboResolution"||(y=!1,!1)})),y&&(o=o.add(c))})),this.je.forEach(((c,p)=>p.setReadTime(e)));const a=new Jh(e,t,this.Ze,this.je,o);return this.je=Rs(),this.He=nh(),this.Je=nh(),this.Ze=new Mt(st),a}Ye(e,t){if(!this.rt(e))return;const o=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,o),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,o){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.qe(t,1):a.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),o&&(this.je=this.je.insert(t,o))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new hy,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new en(st),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new en(st),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Pe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new hy),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function nh(){return new Mt(je.comparator)}function dy(){return new Mt(je.comparator)}const yP={asc:"ASCENDING",desc:"DESCENDING"},vP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wP={and:"AND",or:"OR"};class xP{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ep(r,e){return r.useProto3Json||$h(e)?e:{value:e}}function Ah(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function O0(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function EP(r,e){return Ah(r,e.toTimestamp())}function Bi(r){return yt(!!r,49232),Qe.fromTimestamp((function(t){const o=Ro(t);return new Pt(o.seconds,o.nanos)})(r))}function Vp(r,e){return tp(r,e).canonicalString()}function tp(r,e){const t=(function(a){return new Tt(["projects",a.projectId,"databases",a.database])})(r).child("documents");return e===void 0?t:t.child(e)}function j0(r){const e=Tt.fromString(r);return yt(B0(e),10190,{key:e.toString()}),e}function np(r,e){return Vp(r.databaseId,e.path)}function bf(r,e){const t=j0(e);if(t.get(1)!==r.databaseId.projectId)throw new ve(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new ve(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new je(F0(t))}function V0(r,e){return Vp(r.databaseId,e)}function TP(r){const e=j0(r);return e.length===4?Tt.emptyPath():F0(e)}function rp(r){return new Tt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function F0(r){return yt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function fy(r,e,t){return{name:np(r,e),fields:t.value.mapValue.fields}}function IP(r,e){let t;if("targetChange"in e){e.targetChange;const o=(function(T){return T==="NO_CHANGE"?0:T==="ADD"?1:T==="REMOVE"?2:T==="CURRENT"?3:T==="RESET"?4:$e(39313,{state:T})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],c=(function(T,k){return T.useProto3Json?(yt(k===void 0||typeof k=="string",58123),mn.fromBase64String(k||"")):(yt(k===void 0||k instanceof Buffer||k instanceof Uint8Array,16193),mn.fromUint8Array(k||new Uint8Array))})(r,e.targetChange.resumeToken),p=e.targetChange.cause,y=p&&(function(T){const k=T.code===void 0?ie.UNKNOWN:L0(T.code);return new ve(k,T.message||"")})(p);t=new M0(o,a,c,y||null)}else if("documentChange"in e){e.documentChange;const o=e.documentChange;o.document,o.document.name,o.document.updateTime;const a=bf(r,o.document.name),c=Bi(o.document.updateTime),p=o.document.createTime?Bi(o.document.createTime):Qe.min(),y=new sr({mapValue:{fields:o.document.fields}}),x=bn.newFoundDocument(a,c,p,y),T=o.targetIds||[],k=o.removedTargetIds||[];t=new dh(T,k,x.key,x)}else if("documentDelete"in e){e.documentDelete;const o=e.documentDelete;o.document;const a=bf(r,o.document),c=o.readTime?Bi(o.readTime):Qe.min(),p=bn.newNoDocument(a,c),y=o.removedTargetIds||[];t=new dh([],y,p.key,p)}else if("documentRemove"in e){e.documentRemove;const o=e.documentRemove;o.document;const a=bf(r,o.document),c=o.removedTargetIds||[];t=new dh([],c,a,null)}else{if(!("filter"in e))return $e(11601,{Vt:e});{e.filter;const o=e.filter;o.targetId;const{count:a=0,unchangedNames:c}=o,p=new fP(a,c),y=o.targetId;t=new D0(y,p)}}return t}function SP(r,e){let t;if(e instanceof Gu)t={update:fy(r,e.key,e.value)};else if(e instanceof Yh)t={delete:np(r,e.key)};else if(e instanceof zo)t={update:fy(r,e.key,e.data),updateMask:DP(e.fieldMask)};else{if(!(e instanceof cP))return $e(16599,{dt:e.type});t={verify:np(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((o=>(function(c,p){const y=p.transform;if(y instanceof Ch)return{fieldPath:p.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(y instanceof Vu)return{fieldPath:p.field.canonicalString(),appendMissingElements:{values:y.elements}};if(y instanceof Fu)return{fieldPath:p.field.canonicalString(),removeAllFromArray:{values:y.elements}};if(y instanceof bh)return{fieldPath:p.field.canonicalString(),increment:y.Ae};throw $e(20930,{transform:p.transform})})(0,o)))),e.precondition.isNone||(t.currentDocument=(function(a,c){return c.updateTime!==void 0?{updateTime:EP(a,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:$e(27497)})(r,e.precondition)),t}function PP(r,e){return r&&r.length>0?(yt(e!==void 0,14353),r.map((t=>(function(a,c){let p=a.updateTime?Bi(a.updateTime):Bi(c);return p.isEqual(Qe.min())&&(p=Bi(c)),new aP(p,a.transformResults||[])})(t,e)))):[]}function kP(r,e){return{documents:[V0(r,e.path)]}}function CP(r,e){const t={structuredQuery:{}},o=e.path;let a;e.collectionGroup!==null?(a=o,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=o.popLast(),t.structuredQuery.from=[{collectionId:o.lastSegment()}]),t.parent=V0(r,a);const c=(function(T){if(T.length!==0)return U0(hi.create(T,"and"))})(e.filters);c&&(t.structuredQuery.where=c);const p=(function(T){if(T.length!==0)return T.map((k=>(function(N){return{field:ml(N.field),direction:NP(N.dir)}})(k)))})(e.orderBy);p&&(t.structuredQuery.orderBy=p);const y=ep(r,e.limit);return y!==null&&(t.structuredQuery.limit=y),e.startAt&&(t.structuredQuery.startAt=(function(T){return{before:T.inclusive,values:T.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(T){return{before:!T.inclusive,values:T.position}})(e.endAt)),{ft:t,parent:a}}function bP(r){let e=TP(r.parent);const t=r.structuredQuery,o=t.from?t.from.length:0;let a=null;if(o>0){yt(o===1,65062);const k=t.from[0];k.allDescendants?a=k.collectionId:e=e.child(k.collectionId)}let c=[];t.where&&(c=(function(C){const N=z0(C);return N instanceof hi&&g0(N)?N.getFilters():[N]})(t.where));let p=[];t.orderBy&&(p=(function(C){return C.map((N=>(function($){return new ju(gl($.field),(function(te){switch(te){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})($.direction))})(N)))})(t.orderBy));let y=null;t.limit&&(y=(function(C){let N;return N=typeof C=="object"?C.value:C,$h(N)?null:N})(t.limit));let x=null;t.startAt&&(x=(function(C){const N=!!C.before,H=C.values||[];return new kh(H,N)})(t.startAt));let T=null;return t.endAt&&(T=(function(C){const N=!C.before,H=C.values||[];return new kh(H,N)})(t.endAt)),qS(e,a,p,c,y,"F",x,T)}function AP(r,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return $e(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function z0(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const o=gl(t.unaryFilter.field);return Gt.create(o,"==",{doubleValue:NaN});case"IS_NULL":const a=gl(t.unaryFilter.field);return Gt.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=gl(t.unaryFilter.field);return Gt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const p=gl(t.unaryFilter.field);return Gt.create(p,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return $e(61313);default:return $e(60726)}})(r):r.fieldFilter!==void 0?(function(t){return Gt.create(gl(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return $e(58110);default:return $e(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return hi.create(t.compositeFilter.filters.map((o=>z0(o))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return $e(1026)}})(t.compositeFilter.op))})(r):$e(30097,{filter:r})}function NP(r){return yP[r]}function RP(r){return vP[r]}function LP(r){return wP[r]}function ml(r){return{fieldPath:r.canonicalString()}}function gl(r){return pn.fromServerFormat(r.fieldPath)}function U0(r){return r instanceof Gt?(function(t){if(t.op==="=="){if(ey(t.value))return{unaryFilter:{field:ml(t.field),op:"IS_NAN"}};if(X_(t.value))return{unaryFilter:{field:ml(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(ey(t.value))return{unaryFilter:{field:ml(t.field),op:"IS_NOT_NAN"}};if(X_(t.value))return{unaryFilter:{field:ml(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ml(t.field),op:RP(t.op),value:t.value}}})(r):r instanceof hi?(function(t){const o=t.getFilters().map((a=>U0(a)));return o.length===1?o[0]:{compositeFilter:{op:LP(t.op),filters:o}}})(r):$e(54877,{filter:r})}function DP(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function B0(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}function H0(r){return!!r&&typeof r._toProto=="function"&&r._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e,t,o,a,c=Qe.min(),p=Qe.min(),y=mn.EMPTY_BYTE_STRING,x=null){this.target=e,this.targetId=t,this.purpose=o,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=p,this.resumeToken=y,this.expectedCount=x}withSequenceNumber(e){return new So(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new So(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new So(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new So(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(e){this.yt=e}}function OP(r){const e=bP({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Xf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP{constructor(){this.Sn=new VP}addToCollectionParentIndex(e,t){return this.Sn.add(t),oe.resolve()}getCollectionParents(e,t){return oe.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return oe.resolve()}deleteFieldIndex(e,t){return oe.resolve()}deleteAllFieldIndexes(e){return oe.resolve()}createTargetIndexes(e,t){return oe.resolve()}getDocumentsMatchingTarget(e,t){return oe.resolve(null)}getIndexType(e,t){return oe.resolve(0)}getFieldIndexes(e,t){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,t){return oe.resolve(No.min())}getMinOffsetFromCollectionGroup(e,t){return oe.resolve(No.min())}updateCollectionGroup(e,t,o){return oe.resolve()}updateIndexEntries(e,t){return oe.resolve()}}class VP{constructor(){this.index={}}add(e){const t=e.lastSegment(),o=e.popLast(),a=this.index[t]||new en(Tt.comparator),c=!a.has(o);return this.index[t]=a.add(o),c}has(e){const t=e.lastSegment(),o=e.popLast(),a=this.index[t];return a&&a.has(o)}getEntries(e){return(this.index[e]||new en(Tt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const py={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},W0=41943040;class ir{static withCacheSize(e){return new ir(e,ir.DEFAULT_COLLECTION_PERCENTILE,ir.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ir.DEFAULT_COLLECTION_PERCENTILE=10,ir.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ir.DEFAULT=new ir(W0,ir.DEFAULT_COLLECTION_PERCENTILE,ir.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ir.DISABLED=new ir(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Al(0)}static ar(){return new Al(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const my="LruGarbageCollector",FP=1048576;function gy([r,e],[t,o]){const a=st(r,t);return a===0?st(e,o):a}class zP{constructor(e){this.Pr=e,this.buffer=new en(gy),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const o=this.buffer.last();gy(t,o)<0&&(this.buffer=this.buffer.delete(o).add(t))}}get maxValue(){return this.buffer.last()[0]}}class UP{constructor(e,t,o){this.garbageCollector=e,this.asyncQueue=t,this.localStore=o,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Pe(my,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){jl(t)?Pe(my,"Ignoring IndexedDB error during garbage collection: ",t):await Ol(t)}await this.Ar(3e5)}))}}class BP{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((o=>Math.floor(t/100*o)))}nthSequenceNumber(e,t){if(t===0)return oe.resolve(Wh.ce);const o=new zP(t);return this.Vr.forEachTarget(e,(a=>o.Er(a.sequenceNumber))).next((()=>this.Vr.mr(e,(a=>o.Er(a))))).next((()=>o.maxValue))}removeTargets(e,t,o){return this.Vr.removeTargets(e,t,o)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Pe("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(py)):this.getCacheSize(e).next((o=>o<this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),py):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let o,a,c,p,y,x,T;const k=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((C=>(C>this.params.maximumSequenceNumbersToCollect?(Pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${C}`),a=this.params.maximumSequenceNumbersToCollect):a=C,p=Date.now(),this.nthSequenceNumber(e,a)))).next((C=>(o=C,y=Date.now(),this.removeTargets(e,o,t)))).next((C=>(c=C,x=Date.now(),this.removeOrphanedDocuments(e,o)))).next((C=>(T=Date.now(),fl()<=it.DEBUG&&Pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${p-k}ms
	Determined least recently used ${a} in `+(y-p)+`ms
	Removed ${c} targets in `+(x-y)+`ms
	Removed ${C} documents in `+(T-x)+`ms
Total Duration: ${T-k}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:C}))))}}function HP(r,e){return new BP(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(){this.changes=new ba((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,bn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const o=this.changes.get(t);return o!==void 0?oe.resolve(o):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(e,t,o,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=o,this.indexManager=a}getDocument(e,t){let o=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(o=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(o!==null&&bu(o.mutation,a,yr.empty(),Pt.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((o=>this.getLocalViewOfDocuments(e,o,ot()).next((()=>o))))}getLocalViewOfDocuments(e,t,o=ot()){const a=_a();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,o).next((c=>{let p=wu();return c.forEach(((y,x)=>{p=p.insert(y,x.overlayedDocument)})),p}))))}getOverlayedDocuments(e,t){const o=_a();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,ot())))}populateOverlays(e,t,o){const a=[];return o.forEach((c=>{t.has(c)||a.push(c)})),this.documentOverlayCache.getOverlays(e,a).next((c=>{c.forEach(((p,y)=>{t.set(p,y)}))}))}computeViews(e,t,o,a){let c=Rs();const p=Cu(),y=(function(){return Cu()})();return t.forEach(((x,T)=>{const k=o.get(T.key);a.has(T.key)&&(k===void 0||k.mutation instanceof zo)?c=c.insert(T.key,T):k!==void 0?(p.set(T.key,k.mutation.getFieldMask()),bu(k.mutation,T,k.mutation.getFieldMask(),Pt.now())):p.set(T.key,yr.empty())})),this.recalculateAndSaveOverlays(e,c).next((x=>(x.forEach(((T,k)=>p.set(T,k))),t.forEach(((T,k)=>y.set(T,new $P(k,p.get(T)??null)))),y)))}recalculateAndSaveOverlays(e,t){const o=Cu();let a=new Mt(((p,y)=>p-y)),c=ot();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((p=>{for(const y of p)y.keys().forEach((x=>{const T=t.get(x);if(T===null)return;let k=o.get(x)||yr.empty();k=y.applyToLocalView(T,k),o.set(x,k);const C=(a.get(y.batchId)||ot()).add(x);a=a.insert(y.batchId,C)}))})).next((()=>{const p=[],y=a.getReverseIterator();for(;y.hasNext();){const x=y.getNext(),T=x.key,k=x.value,C=S0();k.forEach((N=>{if(!c.has(N)){const H=N0(t.get(N),o.get(N));H!==null&&C.set(N,H),c=c.add(N)}})),p.push(this.documentOverlayCache.saveOverlays(e,T,C))}return oe.waitFor(p)})).next((()=>o))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((o=>this.recalculateAndSaveOverlays(e,o)))}getDocumentsMatchingQuery(e,t,o,a){return GS(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):w0(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,o,a):this.getDocumentsMatchingCollectionQuery(e,t,o,a)}getNextDocuments(e,t,o,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,o,a).next((c=>{const p=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,o.largestBatchId,a-c.size):oe.resolve(_a());let y=Lu,x=c;return p.next((T=>oe.forEach(T,((k,C)=>(y<C.largestBatchId&&(y=C.largestBatchId),c.get(k)?oe.resolve():this.remoteDocumentCache.getEntry(e,k).next((N=>{x=x.insert(k,N)}))))).next((()=>this.populateOverlays(e,T,c))).next((()=>this.computeViews(e,x,T,ot()))).next((k=>({batchId:y,changes:I0(k)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new je(t)).next((o=>{let a=wu();return o.isFoundDocument()&&(a=a.insert(o.key,o)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,o,a){const c=t.collectionGroup;let p=wu();return this.indexManager.getCollectionParents(e,c).next((y=>oe.forEach(y,(x=>{const T=(function(C,N){return new Vl(N,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt)})(t,x.child(c));return this.getDocumentsMatchingCollectionQuery(e,T,o,a).next((k=>{k.forEach(((C,N)=>{p=p.insert(C,N)}))}))})).next((()=>p))))}getDocumentsMatchingCollectionQuery(e,t,o,a){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,o.largestBatchId).next((p=>(c=p,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,o,c,a)))).next((p=>{c.forEach(((x,T)=>{const k=T.getKey();p.get(k)===null&&(p=p.insert(k,bn.newInvalidDocument(k)))}));let y=wu();return p.forEach(((x,T)=>{const k=c.get(x);k!==void 0&&bu(k.mutation,T,yr.empty(),Pt.now()),Kh(t,T)&&(y=y.insert(x,T))})),y}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return oe.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:Bi(a.createTime)}})(t)),oe.resolve()}getNamedQuery(e,t){return oe.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(a){return{name:a.name,query:OP(a.bundledQuery),readTime:Bi(a.readTime)}})(t)),oe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(){this.overlays=new Mt(je.comparator),this.Lr=new Map}getOverlay(e,t){return oe.resolve(this.overlays.get(t))}getOverlays(e,t){const o=_a();return oe.forEach(t,(a=>this.getOverlay(e,a).next((c=>{c!==null&&o.set(a,c)})))).next((()=>o))}saveOverlays(e,t,o){return o.forEach(((a,c)=>{this.bt(e,t,c)})),oe.resolve()}removeOverlaysForBatchId(e,t,o){const a=this.Lr.get(o);return a!==void 0&&(a.forEach((c=>this.overlays=this.overlays.remove(c))),this.Lr.delete(o)),oe.resolve()}getOverlaysForCollection(e,t,o){const a=_a(),c=t.length+1,p=new je(t.child("")),y=this.overlays.getIteratorFrom(p);for(;y.hasNext();){const x=y.getNext().value,T=x.getKey();if(!t.isPrefixOf(T.path))break;T.path.length===c&&x.largestBatchId>o&&a.set(x.getKey(),x)}return oe.resolve(a)}getOverlaysForCollectionGroup(e,t,o,a){let c=new Mt(((T,k)=>T-k));const p=this.overlays.getIterator();for(;p.hasNext();){const T=p.getNext().value;if(T.getKey().getCollectionGroup()===t&&T.largestBatchId>o){let k=c.get(T.largestBatchId);k===null&&(k=_a(),c=c.insert(T.largestBatchId,k)),k.set(T.getKey(),T)}}const y=_a(),x=c.getIterator();for(;x.hasNext()&&(x.getNext().value.forEach(((T,k)=>y.set(T,k))),!(y.size()>=a)););return oe.resolve(y)}bt(e,t,o){const a=this.overlays.get(o.key);if(a!==null){const p=this.Lr.get(a.largestBatchId).delete(o.key);this.Lr.set(a.largestBatchId,p)}this.overlays=this.overlays.insert(o.key,new dP(t,o));let c=this.Lr.get(t);c===void 0&&(c=ot(),this.Lr.set(t,c)),this.Lr.set(t,c.add(o.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP{constructor(){this.sessionToken=mn.EMPTY_BYTE_STRING}getSessionToken(e){return oe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,oe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp{constructor(){this.kr=new en(an.Kr),this.qr=new en(an.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const o=new an(e,t);this.kr=this.kr.add(o),this.qr=this.qr.add(o)}$r(e,t){e.forEach((o=>this.addReference(o,t)))}removeReference(e,t){this.Wr(new an(e,t))}Qr(e,t){e.forEach((o=>this.removeReference(o,t)))}Gr(e){const t=new je(new Tt([])),o=new an(t,e),a=new an(t,e+1),c=[];return this.qr.forEachInRange([o,a],(p=>{this.Wr(p),c.push(p.key)})),c}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new je(new Tt([])),o=new an(t,e),a=new an(t,e+1);let c=ot();return this.qr.forEachInRange([o,a],(p=>{c=c.add(p.key)})),c}containsKey(e){const t=new an(e,0),o=this.kr.firstAfterOrEqual(t);return o!==null&&e.isEqual(o.key)}}class an{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return je.comparator(e.key,t.key)||st(e.Hr,t.Hr)}static Ur(e,t){return st(e.Hr,t.Hr)||je.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new en(an.Kr)}checkEmpty(e){return oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,o,a){const c=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const p=new hP(c,t,o,a);this.mutationQueue.push(p);for(const y of a)this.Jr=this.Jr.add(new an(y.key,c)),this.indexManager.addToCollectionParentIndex(e,y.key.path.popLast());return oe.resolve(p)}lookupMutationBatch(e,t){return oe.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const o=t+1,a=this.Xr(o),c=a<0?0:a;return oe.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(this.mutationQueue.length===0?bp:this.Yn-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const o=new an(t,0),a=new an(t,Number.POSITIVE_INFINITY),c=[];return this.Jr.forEachInRange([o,a],(p=>{const y=this.Zr(p.Hr);c.push(y)})),oe.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new en(st);return t.forEach((a=>{const c=new an(a,0),p=new an(a,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([c,p],(y=>{o=o.add(y.Hr)}))})),oe.resolve(this.Yr(o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,a=o.length+1;let c=o;je.isDocumentKey(c)||(c=c.child(""));const p=new an(new je(c),0);let y=new en(st);return this.Jr.forEachWhile((x=>{const T=x.key.path;return!!o.isPrefixOf(T)&&(T.length===a&&(y=y.add(x.Hr)),!0)}),p),oe.resolve(this.Yr(y))}Yr(e){const t=[];return e.forEach((o=>{const a=this.Zr(o);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){yt(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let o=this.Jr;return oe.forEach(t.mutations,(a=>{const c=new an(a.key,t.batchId);return o=o.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Jr=o}))}nr(e){}containsKey(e,t){const o=new an(t,0),a=this.Jr.firstAfterOrEqual(o);return oe.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,oe.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP{constructor(e){this.ti=e,this.docs=(function(){return new Mt(je.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const o=t.key,a=this.docs.get(o),c=a?a.size:0,p=this.ti(t);return this.docs=this.docs.insert(o,{document:t.mutableCopy(),size:p}),this.size+=p-c,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const o=this.docs.get(t);return oe.resolve(o?o.document.mutableCopy():bn.newInvalidDocument(t))}getEntries(e,t){let o=Rs();return t.forEach((a=>{const c=this.docs.get(a);o=o.insert(a,c?c.document.mutableCopy():bn.newInvalidDocument(a))})),oe.resolve(o)}getDocumentsMatchingQuery(e,t,o,a){let c=Rs();const p=t.path,y=new je(p.child("__id-9223372036854775808__")),x=this.docs.getIteratorFrom(y);for(;x.hasNext();){const{key:T,value:{document:k}}=x.getNext();if(!p.isPrefixOf(T.path))break;T.path.length>p.length+1||TS(ES(k),o)<=0||(a.has(k.key)||Kh(t,k))&&(c=c.insert(k.key,k.mutableCopy()))}return oe.resolve(c)}getAllFromCollectionGroup(e,t,o,a){$e(9500)}ni(e,t){return oe.forEach(this.docs,(o=>t(o)))}newChangeBuffer(e){return new JP(this)}getSize(e){return oe.resolve(this.size)}}class JP extends WP{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((o,a)=>{a.isValidDocument()?t.push(this.Mr.addEntry(e,a)):this.Mr.removeEntry(o)})),oe.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{constructor(e){this.persistence=e,this.ri=new ba((t=>Rp(t)),Lp),this.lastRemoteSnapshotVersion=Qe.min(),this.highestTargetId=0,this.ii=0,this.si=new Fp,this.targetCount=0,this.oi=Al._r()}forEachTarget(e,t){return this.ri.forEach(((o,a)=>t(a))),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,o){return o&&(this.lastRemoteSnapshotVersion=o),t>this.ii&&(this.ii=t),oe.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Al(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,oe.resolve()}updateTargetData(e,t){return this.lr(t),oe.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,t,o){let a=0;const c=[];return this.ri.forEach(((p,y)=>{y.sequenceNumber<=t&&o.get(y.targetId)===null&&(this.ri.delete(p),c.push(this.removeMatchingKeysForTargetId(e,y.targetId)),a++)})),oe.waitFor(c).next((()=>a))}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,t){const o=this.ri.get(t)||null;return oe.resolve(o)}addMatchingKeys(e,t,o){return this.si.$r(t,o),oe.resolve()}removeMatchingKeys(e,t,o){this.si.Qr(t,o);const a=this.persistence.referenceDelegate,c=[];return a&&t.forEach((p=>{c.push(a.markPotentiallyOrphaned(e,p))})),oe.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),oe.resolve()}getMatchingKeysForTargetId(e,t){const o=this.si.jr(t);return oe.resolve(o)}containsKey(e,t){return oe.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(e,t){this._i={},this.overlays={},this.ai=new Wh(0),this.ui=!1,this.ui=!0,this.ci=new ZP,this.referenceDelegate=e(this),this.li=new XP(this),this.indexManager=new jP,this.remoteDocumentCache=(function(a){return new YP(a)})((o=>this.referenceDelegate.hi(o))),this.serializer=new MP(t),this.Pi=new GP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new KP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let o=this._i[e.toKey()];return o||(o=new QP(t,this.referenceDelegate),this._i[e.toKey()]=o),o}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,o){Pe("MemoryPersistence","Starting transaction:",e);const a=new ek(this.ai.next());return this.referenceDelegate.Ti(),o(a).next((c=>this.referenceDelegate.Ii(a).next((()=>c)))).toPromise().then((c=>(a.raiseOnCommittedEvent(),c)))}Ei(e,t){return oe.or(Object.values(this._i).map((o=>()=>o.containsKey(e,t))))}}class ek extends SS{constructor(e){super(),this.currentSequenceNumber=e}}class zp{constructor(e){this.persistence=e,this.Ri=new Fp,this.Ai=null}static Vi(e){return new zp(e)}get di(){if(this.Ai)return this.Ai;throw $e(60996)}addReference(e,t,o){return this.Ri.addReference(o,t),this.di.delete(o.toString()),oe.resolve()}removeReference(e,t,o){return this.Ri.removeReference(o,t),this.di.add(o.toString()),oe.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),oe.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((a=>this.di.add(a.toString())));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((c=>this.di.add(c.toString())))})).next((()=>o.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.di,(o=>{const a=je.fromPath(o);return this.mi(e,a).next((c=>{c||t.removeEntry(a,Qe.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((o=>{o?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return oe.or([()=>oe.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Nh{constructor(e,t){this.persistence=e,this.fi=new ba((o=>CS(o.path)),((o,a)=>o.isEqual(a))),this.garbageCollector=HP(this,t)}static Vi(e,t){return new Nh(e,t)}Ti(){}Ii(e){return oe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((o=>t.next((a=>o+a))))}pr(e){let t=0;return this.mr(e,(o=>{t++})).next((()=>t))}mr(e,t){return oe.forEach(this.fi,((o,a)=>this.wr(e,o,a).next((c=>c?oe.resolve():t(a)))))}removeTargets(e,t,o){return this.persistence.getTargetCache().removeTargets(e,t,o)}removeOrphanedDocuments(e,t){let o=0;const a=this.persistence.getRemoteDocumentCache(),c=a.newChangeBuffer();return a.ni(e,(p=>this.wr(e,p,t).next((y=>{y||(o++,c.removeEntry(p,Qe.min()))})))).next((()=>c.apply(e))).next((()=>o))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),oe.resolve()}removeTarget(e,t){const o=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,o)}addReference(e,t,o){return this.fi.set(o,e.currentSequenceNumber),oe.resolve()}removeReference(e,t,o){return this.fi.set(o,e.currentSequenceNumber),oe.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),oe.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=uh(e.data.value)),t}wr(e,t,o){return oe.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.fi.get(t);return oe.resolve(a!==void 0&&a>o)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(e,t,o,a){this.targetId=e,this.fromCache=t,this.Ts=o,this.Is=a}static Es(e,t){let o=ot(),a=ot();for(const c of t.docChanges)switch(c.type){case 0:o=o.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new Up(e,t.fromCache,o,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return tE()?8:PS(An())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,o,a){const c={result:null};return this.gs(e,t).next((p=>{c.result=p})).next((()=>{if(!c.result)return this.ps(e,t,a,o).next((p=>{c.result=p}))})).next((()=>{if(c.result)return;const p=new tk;return this.ys(e,t,p).next((y=>{if(c.result=y,this.As)return this.ws(e,t,p,y.size)}))})).next((()=>c.result))}ws(e,t,o,a){return o.documentReadCount<this.Vs?(fl()<=it.DEBUG&&Pe("QueryEngine","SDK will not create cache indexes for query:",pl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),oe.resolve()):(fl()<=it.DEBUG&&Pe("QueryEngine","Query:",pl(t),"scans",o.documentReadCount,"local documents and returns",a,"documents as results."),o.documentReadCount>this.ds*a?(fl()<=it.DEBUG&&Pe("QueryEngine","The SDK decides to create cache indexes for query:",pl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ui(t))):oe.resolve())}gs(e,t){if(iy(t))return oe.resolve(null);let o=Ui(t);return this.indexManager.getIndexType(e,o).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=Xf(t,null,"F"),o=Ui(t)),this.indexManager.getDocumentsMatchingTarget(e,o).next((c=>{const p=ot(...c);return this.fs.getDocuments(e,p).next((y=>this.indexManager.getMinOffset(e,o).next((x=>{const T=this.bs(t,y);return this.Ss(t,T,p,x.readTime)?this.gs(e,Xf(t,null,"F")):this.Ds(e,T,t,x)}))))})))))}ps(e,t,o,a){return iy(t)||a.isEqual(Qe.min())?oe.resolve(null):this.fs.getDocuments(e,o).next((c=>{const p=this.bs(t,c);return this.Ss(t,p,o,a)?oe.resolve(null):(fl()<=it.DEBUG&&Pe("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),pl(t)),this.Ds(e,p,t,xS(a,Lu)).next((y=>y)))}))}bs(e,t){let o=new en(E0(e));return t.forEach(((a,c)=>{Kh(e,c)&&(o=o.add(c))})),o}Ss(e,t,o,a){if(e.limit===null)return!1;if(o.size!==t.size)return!0;const c=e.limitType==="F"?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}ys(e,t,o){return fl()<=it.DEBUG&&Pe("QueryEngine","Using full collection scan to execute query:",pl(t)),this.fs.getDocumentsMatchingQuery(e,t,No.min(),o)}Ds(e,t,o,a){return this.fs.getDocumentsMatchingQuery(e,o,a).next((c=>(t.forEach((p=>{c=c.insert(p.key,p)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bp="LocalStore",rk=3e8;class ik{constructor(e,t,o,a){this.persistence=e,this.Cs=t,this.serializer=a,this.vs=new Mt(st),this.Fs=new ba((c=>Rp(c)),Lp),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(o)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new qP(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function sk(r,e,t,o){return new ik(r,e,t,o)}async function q0(r,e){const t=Ye(r);return await t.persistence.runTransaction("Handle user change","readonly",(o=>{let a;return t.mutationQueue.getAllMutationBatches(o).next((c=>(a=c,t.Os(e),t.mutationQueue.getAllMutationBatches(o)))).next((c=>{const p=[],y=[];let x=ot();for(const T of a){p.push(T.batchId);for(const k of T.mutations)x=x.add(k.key)}for(const T of c){y.push(T.batchId);for(const k of T.mutations)x=x.add(k.key)}return t.localDocuments.getDocuments(o,x).next((T=>({Ns:T,removedBatchIds:p,addedBatchIds:y})))}))}))}function ok(r,e){const t=Ye(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(o=>{const a=e.batch.keys(),c=t.xs.newChangeBuffer({trackRemovals:!0});return(function(y,x,T,k){const C=T.batch,N=C.keys();let H=oe.resolve();return N.forEach(($=>{H=H.next((()=>k.getEntry(x,$))).next((Z=>{const te=T.docVersions.get($);yt(te!==null,48541),Z.version.compareTo(te)<0&&(C.applyToRemoteDocument(Z,T),Z.isValidDocument()&&(Z.setReadTime(T.commitVersion),k.addEntry(Z)))}))})),H.next((()=>y.mutationQueue.removeMutationBatch(x,C)))})(t,o,e,c).next((()=>c.apply(o))).next((()=>t.mutationQueue.performConsistencyCheck(o))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(o,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,(function(y){let x=ot();for(let T=0;T<y.mutationResults.length;++T)y.mutationResults[T].transformResults.length>0&&(x=x.add(y.batch.mutations[T].key));return x})(e)))).next((()=>t.localDocuments.getDocuments(o,a)))}))}function G0(r){const e=Ye(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function ak(r,e){const t=Ye(r),o=e.snapshotVersion;let a=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const p=t.xs.newChangeBuffer({trackRemovals:!0});a=t.vs;const y=[];e.targetChanges.forEach(((k,C)=>{const N=a.get(C);if(!N)return;y.push(t.li.removeMatchingKeys(c,k.removedDocuments,C).next((()=>t.li.addMatchingKeys(c,k.addedDocuments,C))));let H=N.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(C)!==null?H=H.withResumeToken(mn.EMPTY_BYTE_STRING,Qe.min()).withLastLimboFreeSnapshotVersion(Qe.min()):k.resumeToken.approximateByteSize()>0&&(H=H.withResumeToken(k.resumeToken,o)),a=a.insert(C,H),(function(Z,te,he){return Z.resumeToken.approximateByteSize()===0||te.snapshotVersion.toMicroseconds()-Z.snapshotVersion.toMicroseconds()>=rk?!0:he.addedDocuments.size+he.modifiedDocuments.size+he.removedDocuments.size>0})(N,H,k)&&y.push(t.li.updateTargetData(c,H))}));let x=Rs(),T=ot();if(e.documentUpdates.forEach((k=>{e.resolvedLimboDocuments.has(k)&&y.push(t.persistence.referenceDelegate.updateLimboDocument(c,k))})),y.push(lk(c,p,e.documentUpdates).next((k=>{x=k.Bs,T=k.Ls}))),!o.isEqual(Qe.min())){const k=t.li.getLastRemoteSnapshotVersion(c).next((C=>t.li.setTargetsMetadata(c,c.currentSequenceNumber,o)));y.push(k)}return oe.waitFor(y).next((()=>p.apply(c))).next((()=>t.localDocuments.getLocalViewOfDocuments(c,x,T))).next((()=>x))})).then((c=>(t.vs=a,c)))}function lk(r,e,t){let o=ot(),a=ot();return t.forEach((c=>o=o.add(c))),e.getEntries(r,o).next((c=>{let p=Rs();return t.forEach(((y,x)=>{const T=c.get(y);x.isFoundDocument()!==T.isFoundDocument()&&(a=a.add(y)),x.isNoDocument()&&x.version.isEqual(Qe.min())?(e.removeEntry(y,x.readTime),p=p.insert(y,x)):!T.isValidDocument()||x.version.compareTo(T.version)>0||x.version.compareTo(T.version)===0&&T.hasPendingWrites?(e.addEntry(x),p=p.insert(y,x)):Pe(Bp,"Ignoring outdated watch update for ",y,". Current version:",T.version," Watch version:",x.version)})),{Bs:p,Ls:a}}))}function uk(r,e){const t=Ye(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(o=>(e===void 0&&(e=bp),t.mutationQueue.getNextMutationBatchAfterBatchId(o,e))))}function ck(r,e){const t=Ye(r);return t.persistence.runTransaction("Allocate target","readwrite",(o=>{let a;return t.li.getTargetData(o,e).next((c=>c?(a=c,oe.resolve(a)):t.li.allocateTargetId(o).next((p=>(a=new So(e,p,"TargetPurposeListen",o.currentSequenceNumber),t.li.addTargetData(o,a).next((()=>a)))))))})).then((o=>{const a=t.vs.get(o.targetId);return(a===null||o.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.vs=t.vs.insert(o.targetId,o),t.Fs.set(e,o.targetId)),o}))}async function ip(r,e,t){const o=Ye(r),a=o.vs.get(e),c=t?"readwrite":"readwrite-primary";try{t||await o.persistence.runTransaction("Release target",c,(p=>o.persistence.referenceDelegate.removeTarget(p,a)))}catch(p){if(!jl(p))throw p;Pe(Bp,`Failed to update sequence numbers for target ${e}: ${p}`)}o.vs=o.vs.remove(e),o.Fs.delete(a.target)}function _y(r,e,t){const o=Ye(r);let a=Qe.min(),c=ot();return o.persistence.runTransaction("Execute query","readwrite",(p=>(function(x,T,k){const C=Ye(x),N=C.Fs.get(k);return N!==void 0?oe.resolve(C.vs.get(N)):C.li.getTargetData(T,k)})(o,p,Ui(e)).next((y=>{if(y)return a=y.lastLimboFreeSnapshotVersion,o.li.getMatchingKeysForTargetId(p,y.targetId).next((x=>{c=x}))})).next((()=>o.Cs.getDocumentsMatchingQuery(p,e,t?a:Qe.min(),t?c:ot()))).next((y=>(hk(o,QS(e),y),{documents:y,ks:c})))))}function hk(r,e,t){let o=r.Ms.get(e)||Qe.min();t.forEach(((a,c)=>{c.readTime.compareTo(o)>0&&(o=c.readTime)})),r.Ms.set(e,o)}class yy{constructor(){this.activeTargetIds=nP()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class dk{constructor(){this.vo=new yy,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,o){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,o){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new yy,Promise.resolve()}handleUserChange(e,t,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vy="ConnectivityMonitor";class wy{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Pe(vy,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Pe(vy,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rh=null;function sp(){return rh===null?rh=(function(){return 268435456+Math.round(2147483648*Math.random())})():rh++,"0x"+rh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Af="RestConnection",pk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class mk{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${o}/databases/${a}`,this.$o=this.databaseId.database===Sh?`project_id=${o}`:`project_id=${o}&database_id=${a}`}Wo(e,t,o,a,c){const p=sp(),y=this.Qo(e,t.toUriEncodedString());Pe(Af,`Sending RPC '${e}' ${p}:`,y,o);const x={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(x,a,c);const{host:T}=new URL(y),k=Ll(T);return this.zo(e,y,x,o,k).then((C=>(Pe(Af,`Received RPC '${e}' ${p}: `,C),C)),(C=>{throw Ia(Af,`RPC '${e}' ${p} failed with error: `,C,"url: ",y,"request:",o),C}))}jo(e,t,o,a,c,p){return this.Wo(e,t,o,a,c)}Go(e,t,o){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ml})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,c)=>e[c]=a)),o&&o.headers.forEach(((a,c)=>e[c]=a))}Qo(e,t){const o=pk[e];let a=`${this.qo}/v1/${t}:${o}`;return this.databaseInfo.apiKey&&(a=`${a}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),a}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kn="WebChannelConnection",gu=(r,e,t)=>{r.listen(e,(o=>{try{t(o)}catch(a){setTimeout((()=>{throw a}),0)}}))};class El extends mk{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!El.c_){const e=Jv();gu(e,Yv.STAT_EVENT,(t=>{t.stat===qf.PROXY?Pe(kn,"STAT_EVENT: detected buffering proxy"):t.stat===qf.NOPROXY&&Pe(kn,"STAT_EVENT: detected no buffering proxy")})),El.c_=!0}}zo(e,t,o,a,c){const p=sp();return new Promise(((y,x)=>{const T=new Zv;T.setWithCredentials(!0),T.listenOnce(Qv.COMPLETE,(()=>{try{switch(T.getLastErrorCode()){case lh.NO_ERROR:const C=T.getResponseJson();Pe(kn,`XHR for RPC '${e}' ${p} received:`,JSON.stringify(C)),y(C);break;case lh.TIMEOUT:Pe(kn,`RPC '${e}' ${p} timed out`),x(new ve(ie.DEADLINE_EXCEEDED,"Request time out"));break;case lh.HTTP_ERROR:const N=T.getStatus();if(Pe(kn,`RPC '${e}' ${p} failed with status:`,N,"response text:",T.getResponseText()),N>0){let H=T.getResponseJson();Array.isArray(H)&&(H=H[0]);const $=H==null?void 0:H.error;if($&&$.status&&$.message){const Z=(function(he){const _e=he.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(_e)>=0?_e:ie.UNKNOWN})($.status);x(new ve(Z,$.message))}else x(new ve(ie.UNKNOWN,"Server responded with status "+T.getStatus()))}else x(new ve(ie.UNAVAILABLE,"Connection failed."));break;default:$e(9055,{l_:e,streamId:p,h_:T.getLastErrorCode(),P_:T.getLastError()})}}finally{Pe(kn,`RPC '${e}' ${p} completed.`)}}));const k=JSON.stringify(a);Pe(kn,`RPC '${e}' ${p} sending request:`,a),T.send(t,"POST",k,o,15)}))}T_(e,t,o){const a=sp(),c=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],p=this.createWebChannelTransport(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},x=this.longPollingOptions.timeoutSeconds;x!==void 0&&(y.longPollingTimeout=Math.round(1e3*x)),this.useFetchStreams&&(y.useFetchStreams=!0),this.Go(y.initMessageHeaders,t,o),y.encodeInitMessageHeaders=!0;const T=c.join("");Pe(kn,`Creating RPC '${e}' stream ${a}: ${T}`,y);const k=p.createWebChannel(T,y);this.I_(k);let C=!1,N=!1;const H=new gk({Ho:$=>{N?Pe(kn,`Not sending because RPC '${e}' stream ${a} is closed:`,$):(C||(Pe(kn,`Opening RPC '${e}' stream ${a} transport.`),k.open(),C=!0),Pe(kn,`RPC '${e}' stream ${a} sending:`,$),k.send($))},Jo:()=>k.close()});return gu(k,vu.EventType.OPEN,(()=>{N||(Pe(kn,`RPC '${e}' stream ${a} transport opened.`),H.i_())})),gu(k,vu.EventType.CLOSE,(()=>{N||(N=!0,Pe(kn,`RPC '${e}' stream ${a} transport closed`),H.o_(),this.E_(k))})),gu(k,vu.EventType.ERROR,($=>{N||(N=!0,Ia(kn,`RPC '${e}' stream ${a} transport errored. Name:`,$.name,"Message:",$.message),H.o_(new ve(ie.UNAVAILABLE,"The operation could not be completed")))})),gu(k,vu.EventType.MESSAGE,($=>{var Z;if(!N){const te=$.data[0];yt(!!te,16349);const he=te,_e=(he==null?void 0:he.error)||((Z=he[0])==null?void 0:Z.error);if(_e){Pe(kn,`RPC '${e}' stream ${a} received error:`,_e);const Te=_e.status;let Oe=(function(V){const D=qt[V];if(D!==void 0)return L0(D)})(Te),ke=_e.message;Te==="NOT_FOUND"&&ke.includes("database")&&ke.includes("does not exist")&&ke.includes(this.databaseId.database)&&Ia(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),Oe===void 0&&(Oe=ie.INTERNAL,ke="Unknown error status: "+Te+" with message "+_e.message),N=!0,H.o_(new ve(Oe,ke)),k.close()}else Pe(kn,`RPC '${e}' stream ${a} received:`,te),H.__(te)}})),El.u_(),setTimeout((()=>{H.s_()}),0),H}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,o){super.Go(e,t,o),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Xv()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _k(r){return new El(r)}function Nf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xh(r){return new xP(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */El.c_=!1;class K0{constructor(e,t,o=1e3,a=1.5,c=6e4){this.Ci=e,this.timerId=t,this.R_=o,this.A_=a,this.V_=c,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),o=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-o);a>0&&Pe("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${o} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xy="PersistentStream";class Z0{constructor(e,t,o,a,c,p,y,x){this.Ci=e,this.b_=o,this.S_=a,this.connection=c,this.authCredentialsProvider=p,this.appCheckCredentialsProvider=y,this.listener=x,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new K0(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ie.RESOURCE_EXHAUSTED?(As(t.toString()),As("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([o,a])=>{this.D_===t&&this.G_(o,a)}),(o=>{e((()=>{const a=new ve(ie.UNKNOWN,"Fetching auth token failed: "+o.message);return this.z_(a)}))}))}G_(e,t){const o=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{o((()=>this.listener.Zo()))})),this.stream.Yo((()=>{o((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((a=>{o((()=>this.z_(a)))})),this.stream.onMessage((a=>{o((()=>++this.F_==1?this.H_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Pe(xy,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(Pe(xy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class yk extends Z0{constructor(e,t,o,a,c,p){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,o,a,p),this.serializer=c}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=IP(this.serializer,e),o=(function(c){if(!("targetChange"in c))return Qe.min();const p=c.targetChange;return p.targetIds&&p.targetIds.length?Qe.min():p.readTime?Bi(p.readTime):Qe.min()})(e);return this.listener.J_(t,o)}Z_(e){const t={};t.database=rp(this.serializer),t.addTarget=(function(c,p){let y;const x=p.target;if(y=Yf(x)?{documents:kP(c,x)}:{query:CP(c,x).ft},y.targetId=p.targetId,p.resumeToken.approximateByteSize()>0){y.resumeToken=O0(c,p.resumeToken);const T=ep(c,p.expectedCount);T!==null&&(y.expectedCount=T)}else if(p.snapshotVersion.compareTo(Qe.min())>0){y.readTime=Ah(c,p.snapshotVersion.toTimestamp());const T=ep(c,p.expectedCount);T!==null&&(y.expectedCount=T)}return y})(this.serializer,e);const o=AP(this.serializer,e);o&&(t.labels=o),this.K_(t)}X_(e){const t={};t.database=rp(this.serializer),t.removeTarget=e,this.K_(t)}}class vk extends Z0{constructor(e,t,o,a,c,p){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,o,a,p),this.serializer=c}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return yt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,yt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){yt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=PP(e.writeResults,e.commitTime),o=Bi(e.commitTime);return this.listener.na(o,t)}ra(){const e={};e.database=rp(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((o=>SP(this.serializer,o)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{}class xk extends wk{constructor(e,t,o,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=o,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new ve(ie.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,o,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,p])=>this.connection.Wo(e,tp(t,o),a,c,p))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ve(ie.UNKNOWN,c.toString())}))}jo(e,t,o,a,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([p,y])=>this.connection.jo(e,tp(t,o),a,p,y,c))).catch((p=>{throw p.name==="FirebaseError"?(p.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),p):new ve(ie.UNKNOWN,p.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function Ek(r,e,t,o){return new xk(r,e,t,o)}class Tk{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(As(t),this.aa=!1):Pe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sa="RemoteStore";class Ik{constructor(e,t,o,a,c){this.localStore=e,this.datastore=t,this.asyncQueue=o,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=c,this.Aa.Mo((p=>{o.enqueueAndForget((async()=>{Aa(this)&&(Pe(Sa,"Restarting streams for network reachability change."),await(async function(x){const T=Ye(x);T.Ea.add(4),await Zu(T),T.Va.set("Unknown"),T.Ea.delete(4),await ed(T)})(this))}))})),this.Va=new Tk(o,a)}}async function ed(r){if(Aa(r))for(const e of r.Ra)await e(!0)}async function Zu(r){for(const e of r.Ra)await e(!1)}function Q0(r,e){const t=Ye(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),qp(t)?$p(t):Fl(t).O_()&&Wp(t,e))}function Hp(r,e){const t=Ye(r),o=Fl(t);t.Ia.delete(e),o.O_()&&Y0(t,e),t.Ia.size===0&&(o.O_()?o.L_():Aa(t)&&t.Va.set("Unknown"))}function Wp(r,e){if(r.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Qe.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Fl(r).Z_(e)}function Y0(r,e){r.da.$e(e),Fl(r).X_(e)}function $p(r){r.da=new _P({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Fl(r).start(),r.Va.ua()}function qp(r){return Aa(r)&&!Fl(r).x_()&&r.Ia.size>0}function Aa(r){return Ye(r).Ea.size===0}function J0(r){r.da=void 0}async function Sk(r){r.Va.set("Online")}async function Pk(r){r.Ia.forEach(((e,t)=>{Wp(r,e)}))}async function kk(r,e){J0(r),qp(r)?(r.Va.ha(e),$p(r)):r.Va.set("Unknown")}async function Ck(r,e,t){if(r.Va.set("Online"),e instanceof M0&&e.state===2&&e.cause)try{await(async function(a,c){const p=c.cause;for(const y of c.targetIds)a.Ia.has(y)&&(await a.remoteSyncer.rejectListen(y,p),a.Ia.delete(y),a.da.removeTarget(y))})(r,e)}catch(o){Pe(Sa,"Failed to remove targets %s: %s ",e.targetIds.join(","),o),await Rh(r,o)}else if(e instanceof dh?r.da.Xe(e):e instanceof D0?r.da.st(e):r.da.tt(e),!t.isEqual(Qe.min()))try{const o=await G0(r.localStore);t.compareTo(o)>=0&&await(function(c,p){const y=c.da.Tt(p);return y.targetChanges.forEach(((x,T)=>{if(x.resumeToken.approximateByteSize()>0){const k=c.Ia.get(T);k&&c.Ia.set(T,k.withResumeToken(x.resumeToken,p))}})),y.targetMismatches.forEach(((x,T)=>{const k=c.Ia.get(x);if(!k)return;c.Ia.set(x,k.withResumeToken(mn.EMPTY_BYTE_STRING,k.snapshotVersion)),Y0(c,x);const C=new So(k.target,x,T,k.sequenceNumber);Wp(c,C)})),c.remoteSyncer.applyRemoteEvent(y)})(r,t)}catch(o){Pe(Sa,"Failed to raise snapshot:",o),await Rh(r,o)}}async function Rh(r,e,t){if(!jl(e))throw e;r.Ea.add(1),await Zu(r),r.Va.set("Offline"),t||(t=()=>G0(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{Pe(Sa,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await ed(r)}))}function X0(r,e){return e().catch((t=>Rh(r,t,e)))}async function td(r){const e=Ye(r),t=Mo(e);let o=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:bp;for(;bk(e);)try{const a=await uk(e.localStore,o);if(a===null){e.Ta.length===0&&t.L_();break}o=a.batchId,Ak(e,a)}catch(a){await Rh(e,a)}ew(e)&&tw(e)}function bk(r){return Aa(r)&&r.Ta.length<10}function Ak(r,e){r.Ta.push(e);const t=Mo(r);t.O_()&&t.Y_&&t.ea(e.mutations)}function ew(r){return Aa(r)&&!Mo(r).x_()&&r.Ta.length>0}function tw(r){Mo(r).start()}async function Nk(r){Mo(r).ra()}async function Rk(r){const e=Mo(r);for(const t of r.Ta)e.ea(t.mutations)}async function Lk(r,e,t){const o=r.Ta.shift(),a=Op.from(o,e,t);await X0(r,(()=>r.remoteSyncer.applySuccessfulWrite(a))),await td(r)}async function Dk(r,e){e&&Mo(r).Y_&&await(async function(o,a){if((function(p){return pP(p)&&p!==ie.ABORTED})(a.code)){const c=o.Ta.shift();Mo(o).B_(),await X0(o,(()=>o.remoteSyncer.rejectFailedWrite(c.batchId,a))),await td(o)}})(r,e),ew(r)&&tw(r)}async function Ey(r,e){const t=Ye(r);t.asyncQueue.verifyOperationInProgress(),Pe(Sa,"RemoteStore received new credentials");const o=Aa(t);t.Ea.add(3),await Zu(t),o&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await ed(t)}async function Mk(r,e){const t=Ye(r);e?(t.Ea.delete(2),await ed(t)):e||(t.Ea.add(2),await Zu(t),t.Va.set("Unknown"))}function Fl(r){return r.ma||(r.ma=(function(t,o,a){const c=Ye(t);return c.sa(),new yk(o,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(r.datastore,r.asyncQueue,{Zo:Sk.bind(null,r),Yo:Pk.bind(null,r),t_:kk.bind(null,r),J_:Ck.bind(null,r)}),r.Ra.push((async e=>{e?(r.ma.B_(),qp(r)?$p(r):r.Va.set("Unknown")):(await r.ma.stop(),J0(r))}))),r.ma}function Mo(r){return r.fa||(r.fa=(function(t,o,a){const c=Ye(t);return c.sa(),new vk(o,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),Yo:Nk.bind(null,r),t_:Dk.bind(null,r),ta:Rk.bind(null,r),na:Lk.bind(null,r)}),r.Ra.push((async e=>{e?(r.fa.B_(),await td(r)):(await r.fa.stop(),r.Ta.length>0&&(Pe(Sa,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(e,t,o,a,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=o,this.op=a,this.removalCallback=c,this.deferred=new ks,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((p=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,o,a,c){const p=Date.now()+o,y=new Gp(e,t,p,a,c);return y.start(o),y}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ve(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Kp(r,e){if(As("AsyncQueue",`${e}: ${r}`),jl(r))return new ve(ie.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{static emptySet(e){return new Tl(e.comparator)}constructor(e){this.comparator=e?(t,o)=>e(t,o)||je.comparator(t.key,o.key):(t,o)=>je.comparator(t.key,o.key),this.keyedMap=wu(),this.sortedSet=new Mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,o)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Tl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=o.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const o=new Tl;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=t,o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{constructor(){this.ga=new Mt(je.comparator)}track(e){const t=e.doc.key,o=this.ga.get(t);o?e.type!==0&&o.type===3?this.ga=this.ga.insert(t,e):e.type===3&&o.type!==1?this.ga=this.ga.insert(t,{type:o.type,doc:e.doc}):e.type===2&&o.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&o.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&o.type===0?this.ga=this.ga.remove(t):e.type===1&&o.type===2?this.ga=this.ga.insert(t,{type:1,doc:o.doc}):e.type===0&&o.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):$e(63341,{Vt:e,pa:o}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,o)=>{e.push(o)})),e}}class Nl{constructor(e,t,o,a,c,p,y,x,T){this.query=e,this.docs=t,this.oldDocs=o,this.docChanges=a,this.mutatedKeys=c,this.fromCache=p,this.syncStateChanged=y,this.excludesMetadataChanges=x,this.hasCachedResults=T}static fromInitialDocuments(e,t,o,a,c){const p=[];return t.forEach((y=>{p.push({type:0,doc:y})})),new Nl(e,t,Tl.emptySet(t),p,o,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,o=e.docChanges;if(t.length!==o.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==o[a].type||!t[a].doc.isEqual(o[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class jk{constructor(){this.queries=Iy(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,o){const a=Ye(t),c=a.queries;a.queries=Iy(),c.forEach(((p,y)=>{for(const x of y.ba)x.onError(o)}))})(this,new ve(ie.ABORTED,"Firestore shutting down"))}}function Iy(){return new ba((r=>x0(r)),Gh)}async function nw(r,e){const t=Ye(r);let o=3;const a=e.query;let c=t.queries.get(a);c?!c.Sa()&&e.Da()&&(o=2):(c=new Ok,o=e.Da()?0:1);try{switch(o){case 0:c.wa=await t.onListen(a,!0);break;case 1:c.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(p){const y=Kp(p,`Initialization of query '${pl(e.query)}' failed`);return void e.onError(y)}t.queries.set(a,c),c.ba.push(e),e.va(t.onlineState),c.wa&&e.Fa(c.wa)&&Zp(t)}async function rw(r,e){const t=Ye(r),o=e.query;let a=3;const c=t.queries.get(o);if(c){const p=c.ba.indexOf(e);p>=0&&(c.ba.splice(p,1),c.ba.length===0?a=e.Da()?0:1:!c.Sa()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(o),t.onUnlisten(o,!0);case 1:return t.queries.delete(o),t.onUnlisten(o,!1);case 2:return t.onLastRemoteStoreUnlisten(o);default:return}}function Vk(r,e){const t=Ye(r);let o=!1;for(const a of e){const c=a.query,p=t.queries.get(c);if(p){for(const y of p.ba)y.Fa(a)&&(o=!0);p.wa=a}}o&&Zp(t)}function Fk(r,e,t){const o=Ye(r),a=o.queries.get(e);if(a)for(const c of a.ba)c.onError(t);o.queries.delete(e)}function Zp(r){r.Ca.forEach((e=>{e.next()}))}var op,Sy;(Sy=op||(op={})).Ma="default",Sy.Cache="cache";class iw{constructor(e,t,o){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=o||{}}Fa(e){if(!this.options.includeMetadataChanges){const o=[];for(const a of e.docChanges)a.type!==3&&o.push(a);e=new Nl(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const o=t!=="Offline";return(!this.options.Ka||!o)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Nl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==op.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(e){this.key=e}}class ow{constructor(e){this.key=e}}class zk{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ot(),this.mutatedKeys=ot(),this.eu=E0(e),this.tu=new Tl(this.eu)}get nu(){return this.Za}ru(e,t){const o=t?t.iu:new Ty,a=t?t.tu:this.tu;let c=t?t.mutatedKeys:this.mutatedKeys,p=a,y=!1;const x=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,T=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((k,C)=>{const N=a.get(k),H=Kh(this.query,C)?C:null,$=!!N&&this.mutatedKeys.has(N.key),Z=!!H&&(H.hasLocalMutations||this.mutatedKeys.has(H.key)&&H.hasCommittedMutations);let te=!1;N&&H?N.data.isEqual(H.data)?$!==Z&&(o.track({type:3,doc:H}),te=!0):this.su(N,H)||(o.track({type:2,doc:H}),te=!0,(x&&this.eu(H,x)>0||T&&this.eu(H,T)<0)&&(y=!0)):!N&&H?(o.track({type:0,doc:H}),te=!0):N&&!H&&(o.track({type:1,doc:N}),te=!0,(x||T)&&(y=!0)),te&&(H?(p=p.add(H),c=Z?c.add(k):c.delete(k)):(p=p.delete(k),c=c.delete(k)))})),this.query.limit!==null)for(;p.size>this.query.limit;){const k=this.query.limitType==="F"?p.last():p.first();p=p.delete(k.key),c=c.delete(k.key),o.track({type:1,doc:k})}return{tu:p,iu:o,Ss:y,mutatedKeys:c}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,o,a){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const p=e.iu.ya();p.sort(((k,C)=>(function(H,$){const Z=te=>{switch(te){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $e(20277,{Vt:te})}};return Z(H)-Z($)})(k.type,C.type)||this.eu(k.doc,C.doc))),this.ou(o),a=a??!1;const y=t&&!a?this._u():[],x=this.Ya.size===0&&this.current&&!a?1:0,T=x!==this.Xa;return this.Xa=x,p.length!==0||T?{snapshot:new Nl(this.query,e.tu,c,p,e.mutatedKeys,x===0,T,!1,!!o&&o.resumeToken.approximateByteSize()>0),au:y}:{au:y}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ty,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=ot(),this.tu.forEach((o=>{this.uu(o.key)&&(this.Ya=this.Ya.add(o.key))}));const t=[];return e.forEach((o=>{this.Ya.has(o)||t.push(new ow(o))})),this.Ya.forEach((o=>{e.has(o)||t.push(new sw(o))})),t}cu(e){this.Za=e.ks,this.Ya=ot();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Nl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Qp="SyncEngine";class Uk{constructor(e,t,o){this.query=e,this.targetId=t,this.view=o}}class Bk{constructor(e){this.key=e,this.hu=!1}}class Hk{constructor(e,t,o,a,c,p){this.localStore=e,this.remoteStore=t,this.eventManager=o,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=p,this.Pu={},this.Tu=new ba((y=>x0(y)),Gh),this.Iu=new Map,this.Eu=new Set,this.Ru=new Mt(je.comparator),this.Au=new Map,this.Vu=new Fp,this.du={},this.mu=new Map,this.fu=Al.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Wk(r,e,t=!0){const o=dw(r);let a;const c=o.Tu.get(e);return c?(o.sharedClientState.addLocalQueryTarget(c.targetId),a=c.view.lu()):a=await aw(o,e,t,!0),a}async function $k(r,e){const t=dw(r);await aw(t,e,!0,!1)}async function aw(r,e,t,o){const a=await ck(r.localStore,Ui(e)),c=a.targetId,p=r.sharedClientState.addLocalQueryTarget(c,t);let y;return o&&(y=await qk(r,e,c,p==="current",a.resumeToken)),r.isPrimaryClient&&t&&Q0(r.remoteStore,a),y}async function qk(r,e,t,o,a){r.pu=(C,N,H)=>(async function(Z,te,he,_e){let Te=te.view.ru(he);Te.Ss&&(Te=await _y(Z.localStore,te.query,!1).then((({documents:V})=>te.view.ru(V,Te))));const Oe=_e&&_e.targetChanges.get(te.targetId),ke=_e&&_e.targetMismatches.get(te.targetId)!=null,fe=te.view.applyChanges(Te,Z.isPrimaryClient,Oe,ke);return ky(Z,te.targetId,fe.au),fe.snapshot})(r,C,N,H);const c=await _y(r.localStore,e,!0),p=new zk(e,c.ks),y=p.ru(c.documents),x=Ku.createSynthesizedTargetChangeForCurrentChange(t,o&&r.onlineState!=="Offline",a),T=p.applyChanges(y,r.isPrimaryClient,x);ky(r,t,T.au);const k=new Uk(e,t,p);return r.Tu.set(e,k),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),T.snapshot}async function Gk(r,e,t){const o=Ye(r),a=o.Tu.get(e),c=o.Iu.get(a.targetId);if(c.length>1)return o.Iu.set(a.targetId,c.filter((p=>!Gh(p,e)))),void o.Tu.delete(e);o.isPrimaryClient?(o.sharedClientState.removeLocalQueryTarget(a.targetId),o.sharedClientState.isActiveQueryTarget(a.targetId)||await ip(o.localStore,a.targetId,!1).then((()=>{o.sharedClientState.clearQueryState(a.targetId),t&&Hp(o.remoteStore,a.targetId),ap(o,a.targetId)})).catch(Ol)):(ap(o,a.targetId),await ip(o.localStore,a.targetId,!0))}async function Kk(r,e){const t=Ye(r),o=t.Tu.get(e),a=t.Iu.get(o.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(o.targetId),Hp(t.remoteStore,o.targetId))}async function Zk(r,e,t){const o=nC(r);try{const a=await(function(p,y){const x=Ye(p),T=Pt.now(),k=y.reduce(((H,$)=>H.add($.key)),ot());let C,N;return x.persistence.runTransaction("Locally write mutations","readwrite",(H=>{let $=Rs(),Z=ot();return x.xs.getEntries(H,k).next((te=>{$=te,$.forEach(((he,_e)=>{_e.isValidDocument()||(Z=Z.add(he))}))})).next((()=>x.localDocuments.getOverlayedDocuments(H,$))).next((te=>{C=te;const he=[];for(const _e of y){const Te=uP(_e,C.get(_e.key).overlayedDocument);Te!=null&&he.push(new zo(_e.key,Te,f0(Te.value.mapValue),vr.exists(!0)))}return x.mutationQueue.addMutationBatch(H,T,he,y)})).next((te=>{N=te;const he=te.applyToLocalDocumentSet(C,Z);return x.documentOverlayCache.saveOverlays(H,te.batchId,he)}))})).then((()=>({batchId:N.batchId,changes:I0(C)})))})(o.localStore,e);o.sharedClientState.addPendingMutation(a.batchId),(function(p,y,x){let T=p.du[p.currentUser.toKey()];T||(T=new Mt(st)),T=T.insert(y,x),p.du[p.currentUser.toKey()]=T})(o,a.batchId,t),await Qu(o,a.changes),await td(o.remoteStore)}catch(a){const c=Kp(a,"Failed to persist write");t.reject(c)}}async function lw(r,e){const t=Ye(r);try{const o=await ak(t.localStore,e);e.targetChanges.forEach(((a,c)=>{const p=t.Au.get(c);p&&(yt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?p.hu=!0:a.modifiedDocuments.size>0?yt(p.hu,14607):a.removedDocuments.size>0&&(yt(p.hu,42227),p.hu=!1))})),await Qu(t,o,e)}catch(o){await Ol(o)}}function Py(r,e,t){const o=Ye(r);if(o.isPrimaryClient&&t===0||!o.isPrimaryClient&&t===1){const a=[];o.Tu.forEach(((c,p)=>{const y=p.view.va(e);y.snapshot&&a.push(y.snapshot)})),(function(p,y){const x=Ye(p);x.onlineState=y;let T=!1;x.queries.forEach(((k,C)=>{for(const N of C.ba)N.va(y)&&(T=!0)})),T&&Zp(x)})(o.eventManager,e),a.length&&o.Pu.J_(a),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}async function Qk(r,e,t){const o=Ye(r);o.sharedClientState.updateQueryState(e,"rejected",t);const a=o.Au.get(e),c=a&&a.key;if(c){let p=new Mt(je.comparator);p=p.insert(c,bn.newNoDocument(c,Qe.min()));const y=ot().add(c),x=new Jh(Qe.min(),new Map,new Mt(st),p,y);await lw(o,x),o.Ru=o.Ru.remove(c),o.Au.delete(e),Yp(o)}else await ip(o.localStore,e,!1).then((()=>ap(o,e,t))).catch(Ol)}async function Yk(r,e){const t=Ye(r),o=e.batch.batchId;try{const a=await ok(t.localStore,e);cw(t,o,null),uw(t,o),t.sharedClientState.updateMutationState(o,"acknowledged"),await Qu(t,a)}catch(a){await Ol(a)}}async function Jk(r,e,t){const o=Ye(r);try{const a=await(function(p,y){const x=Ye(p);return x.persistence.runTransaction("Reject batch","readwrite-primary",(T=>{let k;return x.mutationQueue.lookupMutationBatch(T,y).next((C=>(yt(C!==null,37113),k=C.keys(),x.mutationQueue.removeMutationBatch(T,C)))).next((()=>x.mutationQueue.performConsistencyCheck(T))).next((()=>x.documentOverlayCache.removeOverlaysForBatchId(T,k,y))).next((()=>x.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(T,k))).next((()=>x.localDocuments.getDocuments(T,k)))}))})(o.localStore,e);cw(o,e,t),uw(o,e),o.sharedClientState.updateMutationState(e,"rejected",t),await Qu(o,a)}catch(a){await Ol(a)}}function uw(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function cw(r,e,t){const o=Ye(r);let a=o.du[o.currentUser.toKey()];if(a){const c=a.get(e);c&&(t?c.reject(t):c.resolve(),a=a.remove(e)),o.du[o.currentUser.toKey()]=a}}function ap(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const o of r.Iu.get(e))r.Tu.delete(o),t&&r.Pu.yu(o,t);r.Iu.delete(e),r.isPrimaryClient&&r.Vu.Gr(e).forEach((o=>{r.Vu.containsKey(o)||hw(r,o)}))}function hw(r,e){r.Eu.delete(e.path.canonicalString());const t=r.Ru.get(e);t!==null&&(Hp(r.remoteStore,t),r.Ru=r.Ru.remove(e),r.Au.delete(t),Yp(r))}function ky(r,e,t){for(const o of t)o instanceof sw?(r.Vu.addReference(o.key,e),Xk(r,o)):o instanceof ow?(Pe(Qp,"Document no longer in limbo: "+o.key),r.Vu.removeReference(o.key,e),r.Vu.containsKey(o.key)||hw(r,o.key)):$e(19791,{wu:o})}function Xk(r,e){const t=e.key,o=t.path.canonicalString();r.Ru.get(t)||r.Eu.has(o)||(Pe(Qp,"New document in limbo: "+t),r.Eu.add(o),Yp(r))}function Yp(r){for(;r.Eu.size>0&&r.Ru.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new je(Tt.fromString(e)),o=r.fu.next();r.Au.set(o,new Bk(t)),r.Ru=r.Ru.insert(t,o),Q0(r.remoteStore,new So(Ui(Dp(t.path)),o,"TargetPurposeLimboResolution",Wh.ce))}}async function Qu(r,e,t){const o=Ye(r),a=[],c=[],p=[];o.Tu.isEmpty()||(o.Tu.forEach(((y,x)=>{p.push(o.pu(x,e,t).then((T=>{var k;if((T||t)&&o.isPrimaryClient){const C=T?!T.fromCache:(k=t==null?void 0:t.targetChanges.get(x.targetId))==null?void 0:k.current;o.sharedClientState.updateQueryState(x.targetId,C?"current":"not-current")}if(T){a.push(T);const C=Up.Es(x.targetId,T);c.push(C)}})))})),await Promise.all(p),o.Pu.J_(a),await(async function(x,T){const k=Ye(x);try{await k.persistence.runTransaction("notifyLocalViewChanges","readwrite",(C=>oe.forEach(T,(N=>oe.forEach(N.Ts,(H=>k.persistence.referenceDelegate.addReference(C,N.targetId,H))).next((()=>oe.forEach(N.Is,(H=>k.persistence.referenceDelegate.removeReference(C,N.targetId,H)))))))))}catch(C){if(!jl(C))throw C;Pe(Bp,"Failed to update sequence numbers: "+C)}for(const C of T){const N=C.targetId;if(!C.fromCache){const H=k.vs.get(N),$=H.snapshotVersion,Z=H.withLastLimboFreeSnapshotVersion($);k.vs=k.vs.insert(N,Z)}}})(o.localStore,c))}async function eC(r,e){const t=Ye(r);if(!t.currentUser.isEqual(e)){Pe(Qp,"User change. New user:",e.toKey());const o=await q0(t.localStore,e);t.currentUser=e,(function(c,p){c.mu.forEach((y=>{y.forEach((x=>{x.reject(new ve(ie.CANCELLED,p))}))})),c.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),await Qu(t,o.Ns)}}function tC(r,e){const t=Ye(r),o=t.Au.get(e);if(o&&o.hu)return ot().add(o.key);{let a=ot();const c=t.Iu.get(e);if(!c)return a;for(const p of c){const y=t.Tu.get(p);a=a.unionWith(y.view.nu)}return a}}function dw(r){const e=Ye(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=lw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=tC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Qk.bind(null,e),e.Pu.J_=Vk.bind(null,e.eventManager),e.Pu.yu=Fk.bind(null,e.eventManager),e}function nC(r){const e=Ye(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Yk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Jk.bind(null,e),e}class Lh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Xh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return sk(this.persistence,new nk,e.initialUser,this.serializer)}Cu(e){return new $0(zp.Vi,this.serializer)}Du(e){return new dk}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Lh.provider={build:()=>new Lh};class rC extends Lh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){yt(this.persistence.referenceDelegate instanceof Nh,46915);const o=this.persistence.referenceDelegate.garbageCollector;return new UP(o,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?ir.withCacheSize(this.cacheSizeBytes):ir.DEFAULT;return new $0((o=>Nh.Vi(o,t)),this.serializer)}}class lp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=o=>Py(this.syncEngine,o,1),this.remoteStore.remoteSyncer.handleCredentialChange=eC.bind(null,this.syncEngine),await Mk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new jk})()}createDatastore(e){const t=Xh(e.databaseInfo.databaseId),o=_k(e.databaseInfo);return Ek(e.authCredentials,e.appCheckCredentials,o,t)}createRemoteStore(e){return(function(o,a,c,p,y){return new Ik(o,a,c,p,y)})(this.localStore,this.datastore,e.asyncQueue,(t=>Py(this.syncEngine,t,0)),(function(){return wy.v()?new wy:new fk})())}createSyncEngine(e,t){return(function(a,c,p,y,x,T,k){const C=new Hk(a,c,p,y,x,T);return k&&(C.gu=!0),C})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(a){const c=Ye(a);Pe(Sa,"RemoteStore shutting down."),c.Ea.add(5),await Zu(c),c.Aa.shutdown(),c.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}lp.provider={build:()=>new lp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):As("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oo="FirestoreClient";class iC{constructor(e,t,o,a,c){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=o,this._databaseInfo=a,this.user=Cn.UNAUTHENTICATED,this.clientId=Cp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(o,(async p=>{Pe(Oo,"Received user=",p.uid),await this.authCredentialListener(p),this.user=p})),this.appCheckCredentials.start(o,(p=>(Pe(Oo,"Received new app check token=",p),this.appCheckCredentialListener(p,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ks;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const o=Kp(t,"Failed to shutdown persistence");e.reject(o)}})),e.promise}}async function Rf(r,e){r.asyncQueue.verifyOperationInProgress(),Pe(Oo,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let o=t.initialUser;r.setCredentialChangeListener((async a=>{o.isEqual(a)||(await q0(e.localStore,a),o=a)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function Cy(r,e){r.asyncQueue.verifyOperationInProgress();const t=await sC(r);Pe(Oo,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((o=>Ey(e.remoteStore,o))),r.setAppCheckTokenChangeListener(((o,a)=>Ey(e.remoteStore,a))),r._onlineComponents=e}async function sC(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){Pe(Oo,"Using user provided OfflineComponentProvider");try{await Rf(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===ie.FAILED_PRECONDITION||a.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;Ia("Error using user provided cache. Falling back to memory cache: "+t),await Rf(r,new Lh)}}else Pe(Oo,"Using default OfflineComponentProvider"),await Rf(r,new rC(void 0));return r._offlineComponents}async function pw(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(Pe(Oo,"Using user provided OnlineComponentProvider"),await Cy(r,r._uninitializedComponentsProvider._online)):(Pe(Oo,"Using default OnlineComponentProvider"),await Cy(r,new lp))),r._onlineComponents}function oC(r){return pw(r).then((e=>e.syncEngine))}async function mw(r){const e=await pw(r),t=e.eventManager;return t.onListen=Wk.bind(null,e.syncEngine),t.onUnlisten=Gk.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=$k.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Kk.bind(null,e.syncEngine),t}function aC(r,e,t={}){const o=new ks;return r.asyncQueue.enqueueAndForget((async()=>(function(c,p,y,x,T){const k=new fw({next:N=>{k.Nu(),p.enqueueAndForget((()=>rw(c,C)));const H=N.docs.has(y);!H&&N.fromCache?T.reject(new ve(ie.UNAVAILABLE,"Failed to get document because the client is offline.")):H&&N.fromCache&&x&&x.source==="server"?T.reject(new ve(ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):T.resolve(N)},error:N=>T.reject(N)}),C=new iw(Dp(y.path),k,{includeMetadataChanges:!0,Ka:!0});return nw(c,C)})(await mw(r),r.asyncQueue,e,t,o))),o.promise}function lC(r,e,t={}){const o=new ks;return r.asyncQueue.enqueueAndForget((async()=>(function(c,p,y,x,T){const k=new fw({next:N=>{k.Nu(),p.enqueueAndForget((()=>rw(c,C))),N.fromCache&&x.source==="server"?T.reject(new ve(ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):T.resolve(N)},error:N=>T.reject(N)}),C=new iw(y,k,{includeMetadataChanges:!0,Ka:!0});return nw(c,C)})(await mw(r),r.asyncQueue,e,t,o))),o.promise}function uC(r,e){const t=new ks;return r.asyncQueue.enqueueAndForget((async()=>Zk(await oC(r),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gw(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC="ComponentProvider",by=new Map;function hC(r,e,t,o,a){return new NS(r,e,t,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,gw(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator,o)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _w="firestore.googleapis.com",Ay=!0;class Ny{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ve(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=_w,this.ssl=Ay}else this.host=e.host,this.ssl=e.ssl??Ay;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=W0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<FP)throw new ve(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}wS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gw(e.experimentalLongPollingOptions??{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ve(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ve(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ve(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(o,a){return o.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class nd{constructor(e,t,o,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=o,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ny({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ve(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ve(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ny(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(o){if(!o)return new cS;switch(o.type){case"firstParty":return new pS(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new ve(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const o=by.get(t);o&&(Pe(cC,"Removing Datastore"),by.delete(t),o.terminate())})(this),Promise.resolve()}}function dC(r,e,t,o={}){var T;r=Ns(r,nd);const a=Ll(e),c=r._getSettings(),p={...c,emulatorOptions:r._getEmulatorOptions()},y=`${e}:${t}`;a&&(rv(`https://${y}`),iv("Firestore",!0)),c.host!==_w&&c.host!==y&&Ia("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const x={...c,host:y,ssl:a,emulatorOptions:o};if(!va(x,p)&&(r._setSettings(x),o.mockUserToken)){let k,C;if(typeof o.mockUserToken=="string")k=o.mockUserToken,C=Cn.MOCK_USER;else{k=qx(o.mockUserToken,(T=r._app)==null?void 0:T.options.projectId);const N=o.mockUserToken.sub||o.mockUserToken.user_id;if(!N)throw new ve(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");C=new Cn(N)}r._authCredentials=new hS(new t0(k,C))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e,t,o){this.converter=t,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new Na(this.firestore,e,this._query)}}class Zt{constructor(e,t,o){this.converter=t,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ao(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Zt(this.firestore,e,this._key)}toJSON(){return{type:Zt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,o){if(qu(t,Zt._jsonSchema))return new Zt(e,o||null,new je(Tt.fromString(t.referencePath)))}}Zt._jsonSchemaVersion="firestore/documentReference/1.0",Zt._jsonSchema={type:Kt("string",Zt._jsonSchemaVersion),referencePath:Kt("string")};class Ao extends Na{constructor(e,t,o){super(e,t,Dp(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Zt(this.firestore,null,new je(e))}withConverter(e){return new Ao(this.firestore,e,this._path)}}function yw(r,e,...t){if(r=Ut(r),n0("collection","path",e),r instanceof nd){const o=Tt.fromString(e,...t);return W_(o),new Ao(r,null,o)}{if(!(r instanceof Zt||r instanceof Ao))throw new ve(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=r._path.child(Tt.fromString(e,...t));return W_(o),new Ao(r.firestore,null,o)}}function Jp(r,e,...t){if(r=Ut(r),arguments.length===1&&(e=Cp.newId()),n0("doc","path",e),r instanceof nd){const o=Tt.fromString(e,...t);return H_(o),new Zt(r,null,new je(o))}{if(!(r instanceof Zt||r instanceof Ao))throw new ve(ie.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=r._path.child(Tt.fromString(e,...t));return H_(o),new Zt(r.firestore,r instanceof Ao?r.converter:null,new je(o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ry="AsyncQueue";class Ly{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new K0(this,"async_queue_retry"),this._c=()=>{const o=Nf();o&&Pe(Ry,"Visibility state changed to "+o.visibilityState),this.M_.w_()},this.ac=e;const t=Nf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Nf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new ks;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!jl(e))throw e;Pe(Ry,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((o=>{throw this.nc=o,this.rc=!1,As("INTERNAL UNHANDLED ERROR: ",Dy(o)),o})).then((o=>(this.rc=!1,o))))));return this.ac=t,t}enqueueAfterDelay(e,t,o){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=Gp.createAndSchedule(this,e,t,o,(c=>this.hc(c)));return this.tc.push(a),a}uc(){this.nc&&$e(47125,{Pc:Dy(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,o)=>t.targetTimeMs-o.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Dy(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class zl extends nd{constructor(e,t,o,a){super(e,t,o,a),this.type="firestore",this._queue=new Ly,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Ly(e),this._firestoreClient=void 0,await e}}}function fC(r,e){const t=typeof r=="object"?r:lv(),o=typeof r=="string"?r:Sh,a=pp(t,"firestore").getImmediate({identifier:o});if(!a._initialized){const c=Wx("firestore");c&&dC(a,...c)}return a}function rd(r){if(r._terminated)throw new ve(ie.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||pC(r),r._firestoreClient}function pC(r){var o,a,c,p;const e=r._freezeSettings(),t=hC(r._databaseId,((o=r._app)==null?void 0:o.options.appId)||"",r._persistenceKey,(a=r._app)==null?void 0:a.options.apiKey,e);r._componentsProvider||(c=e.localCache)!=null&&c._offlineComponentProvider&&((p=e.localCache)!=null&&p._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new iC(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(x){const T=x==null?void 0:x._online.build();return{_offline:x==null?void 0:x._offline.build(T),_online:T}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Gr(mn.fromBase64String(e))}catch(t){throw new ve(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Gr(mn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Gr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(qu(e,Gr._jsonSchema))return Gr.fromBase64String(e.bytes)}}Gr._jsonSchemaVersion="firestore/bytes/1.0",Gr._jsonSchema={type:Kt("string",Gr._jsonSchemaVersion),bytes:Kt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ve(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ve(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ve(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return st(this._lat,e._lat)||st(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Hi._jsonSchemaVersion}}static fromJSON(e){if(qu(e,Hi._jsonSchema))return new Hi(e.latitude,e.longitude)}}Hi._jsonSchemaVersion="firestore/geoPoint/1.0",Hi._jsonSchema={type:Kt("string",Hi._jsonSchemaVersion),latitude:Kt("number"),longitude:Kt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(o,a){if(o.length!==a.length)return!1;for(let c=0;c<o.length;++c)if(o[c]!==a[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ui._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(qu(e,ui._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ui(e.vectorValues);throw new ve(ie.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ui._jsonSchemaVersion="firestore/vectorValue/1.0",ui._jsonSchema={type:Kt("string",ui._jsonSchemaVersion),vectorValues:Kt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC=/^__.*__$/;class gC{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return this.fieldMask!==null?new zo(e,this.data,this.fieldMask,t,this.fieldTransforms):new Gu(e,this.data,t,this.fieldTransforms)}}class vw{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return new zo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ww(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $e(40011,{dataSource:r})}}class tm{constructor(e,t,o,a,c,p){this.settings=e,this.databaseId=t,this.serializer=o,this.ignoreUndefinedProperties=a,c===void 0&&this.validatePath(),this.fieldTransforms=c||[],this.fieldMask=p||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new tm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var a;const t=(a=this.path)==null?void 0:a.child(e),o=this.contextWith({path:t,arrayElement:!1});return o.validatePathSegment(e),o}childContextForFieldPath(e){var a;const t=(a=this.path)==null?void 0:a.child(e),o=this.contextWith({path:t,arrayElement:!1});return o.validatePath(),o}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Dh(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(ww(this.dataSource)&&mC.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class _C{constructor(e,t,o){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=o||Xh(e)}createContext(e,t,o,a=!1){return new tm({dataSource:e,methodName:t,targetDoc:o,path:pn.emptyPath(),arrayElement:!1,hasConverter:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function nm(r){const e=r._freezeSettings(),t=Xh(r._databaseId);return new _C(r._databaseId,!!e.ignoreUndefinedProperties,t)}function xw(r,e,t,o,a,c={}){const p=r.createContext(c.merge||c.mergeFields?2:0,e,t,a);rm("Data must be an object, but it was:",p,o);const y=Ew(o,p);let x,T;if(c.merge)x=new yr(p.fieldMask),T=p.fieldTransforms;else if(c.mergeFields){const k=[];for(const C of c.mergeFields){const N=Rl(e,C,t);if(!p.contains(N))throw new ve(ie.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);Sw(k,N)||k.push(N)}x=new yr(k),T=p.fieldTransforms.filter((C=>x.covers(C.field)))}else x=null,T=p.fieldTransforms;return new gC(new sr(y),x,T)}class id extends em{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof id}}function yC(r,e,t,o){const a=r.createContext(1,e,t);rm("Data must be an object, but it was:",a,o);const c=[],p=sr.empty();Fo(o,((x,T)=>{const k=Iw(e,x,t);T=Ut(T);const C=a.childContextForFieldPath(k);if(T instanceof id)c.push(k);else{const N=Yu(T,C);N!=null&&(c.push(k),p.set(k,N))}}));const y=new yr(c);return new vw(p,y,a.fieldTransforms)}function vC(r,e,t,o,a,c){const p=r.createContext(1,e,t),y=[Rl(e,o,t)],x=[a];if(c.length%2!=0)throw new ve(ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<c.length;N+=2)y.push(Rl(e,c[N])),x.push(c[N+1]);const T=[],k=sr.empty();for(let N=y.length-1;N>=0;--N)if(!Sw(T,y[N])){const H=y[N];let $=x[N];$=Ut($);const Z=p.childContextForFieldPath(H);if($ instanceof id)T.push(H);else{const te=Yu($,Z);te!=null&&(T.push(H),k.set(H,te))}}const C=new yr(T);return new vw(k,C,p.fieldTransforms)}function wC(r,e,t,o=!1){return Yu(t,r.createContext(o?4:3,e))}function Yu(r,e){if(Tw(r=Ut(r)))return rm("Unsupported field value:",e,r),Ew(r,e);if(r instanceof em)return(function(o,a){if(!ww(a.dataSource))throw a.createError(`${o._methodName}() can only be used with update() and set()`);if(!a.path)throw a.createError(`${o._methodName}() is not currently supported inside arrays`);const c=o._toFieldTransform(a);c&&a.fieldTransforms.push(c)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(o,a){const c=[];let p=0;for(const y of o){let x=Yu(y,a.childContextForArray(p));x==null&&(x={nullValue:"NULL_VALUE"}),c.push(x),p++}return{arrayValue:{values:c}}})(r,e)}return(function(o,a){if((o=Ut(o))===null)return{nullValue:"NULL_VALUE"};if(typeof o=="number")return rP(a.serializer,o);if(typeof o=="boolean")return{booleanValue:o};if(typeof o=="string")return{stringValue:o};if(o instanceof Date){const c=Pt.fromDate(o);return{timestampValue:Ah(a.serializer,c)}}if(o instanceof Pt){const c=new Pt(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:Ah(a.serializer,c)}}if(o instanceof Hi)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof Gr)return{bytesValue:O0(a.serializer,o._byteString)};if(o instanceof Zt){const c=a.databaseId,p=o.firestore._databaseId;if(!p.isEqual(c))throw a.createError(`Document reference is for database ${p.projectId}/${p.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Vp(o.firestore._databaseId||a.databaseId,o._key.path)}}if(o instanceof ui)return(function(p,y){const x=p instanceof ui?p.toArray():p;return{mapValue:{fields:{[h0]:{stringValue:d0},[Ph]:{arrayValue:{values:x.map((k=>{if(typeof k!="number")throw y.createError("VectorValues must only contain numeric values.");return Mp(y.serializer,k)}))}}}}}})(o,a);if(H0(o))return o._toProto(a.serializer);throw a.createError(`Unsupported field value: ${Hh(o)}`)})(r,e)}function Ew(r,e){const t={};return s0(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fo(r,((o,a)=>{const c=Yu(a,e.childContextForField(o));c!=null&&(t[o]=c)})),{mapValue:{fields:t}}}function Tw(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Pt||r instanceof Hi||r instanceof Gr||r instanceof Zt||r instanceof em||r instanceof ui||H0(r))}function rm(r,e,t){if(!Tw(t)||!r0(t)){const o=Hh(t);throw o==="an object"?e.createError(r+" a custom object"):e.createError(r+" "+o)}}function Rl(r,e,t){if((e=Ut(e))instanceof Xp)return e._internalPath;if(typeof e=="string")return Iw(r,e);throw Dh("Field path arguments must be of type string or ",r,!1,void 0,t)}const xC=new RegExp("[~\\*/\\[\\]]");function Iw(r,e,t){if(e.search(xC)>=0)throw Dh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Xp(...e.split("."))._internalPath}catch{throw Dh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Dh(r,e,t,o,a){const c=o&&!o.isEmpty(),p=a!==void 0;let y=`Function ${e}() called with invalid data`;t&&(y+=" (via `toFirestore()`)"),y+=". ";let x="";return(c||p)&&(x+=" (found",c&&(x+=` in field ${o}`),p&&(x+=` in document ${a}`),x+=")"),new ve(ie.INVALID_ARGUMENT,y+r+x)}function Sw(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{convertValue(e,t="none"){switch(Do(e)){case 0:return null;case 1:return e.booleanValue;case 2:return zt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Lo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw $e(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const o={};return Fo(e,((a,c)=>{o[a]=this.convertValue(c,t)})),o}convertVectorValue(e){var o,a,c;const t=(c=(a=(o=e.fields)==null?void 0:o[Ph].arrayValue)==null?void 0:a.values)==null?void 0:c.map((p=>zt(p.doubleValue)));return new ui(t)}convertGeoPoint(e){return new Hi(zt(e.latitude),zt(e.longitude))}convertArray(e,t){return(e.values||[]).map((o=>this.convertValue(o,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const o=qh(e);return o==null?null:this.convertValue(o,t);case"estimate":return this.convertTimestamp(Du(e));default:return null}}convertTimestamp(e){const t=Ro(e);return new Pt(t.seconds,t.nanos)}convertDocumentKey(e,t){const o=Tt.fromString(e);yt(B0(o),9688,{name:e});const a=new Mu(o.get(1),o.get(3)),c=new je(o.popFirst(5));return a.isEqual(t)||As(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw extends EC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Zt(this.firestore,null,t)}}const My="@firebase/firestore",Oy="4.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(e,t,o,a,c){this._firestore=e,this._userDataWriter=t,this._key=o,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Zt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new TC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(Rl("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class TC extends kw{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IC(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ve(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class im{}class Cw extends im{}function SC(r,e,...t){let o=[];e instanceof im&&o.push(e),o=o.concat(t),(function(c){const p=c.filter((x=>x instanceof om)).length,y=c.filter((x=>x instanceof sm)).length;if(p>1||p>0&&y>0)throw new ve(ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(o);for(const a of o)r=a._apply(r);return r}class sm extends Cw{constructor(e,t,o){super(),this._field=e,this._op=t,this._value=o,this.type="where"}static _create(e,t,o){return new sm(e,t,o)}_apply(e){const t=this._parse(e);return bw(e._query,t),new Na(e.firestore,e.converter,Jf(e._query,t))}_parse(e){const t=nm(e.firestore);return(function(c,p,y,x,T,k,C){let N;if(T.isKeyField()){if(k==="array-contains"||k==="array-contains-any")throw new ve(ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${k}' queries on documentId().`);if(k==="in"||k==="not-in"){Vy(C,k);const $=[];for(const Z of C)$.push(jy(x,c,Z));N={arrayValue:{values:$}}}else N=jy(x,c,C)}else k!=="in"&&k!=="not-in"&&k!=="array-contains-any"||Vy(C,k),N=wC(y,p,C,k==="in"||k==="not-in");return Gt.create(T,k,N)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class om extends im{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new om(e,t)}_parse(e){const t=this._queryConstraints.map((o=>o._parse(e))).filter((o=>o.getFilters().length>0));return t.length===1?t[0]:hi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,c){let p=a;const y=c.getFlattenedFilters();for(const x of y)bw(p,x),p=Jf(p,x)})(e._query,t),new Na(e.firestore,e.converter,Jf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class am extends Cw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new am(e,t)}_apply(e){const t=(function(a,c,p){if(a.startAt!==null)throw new ve(ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new ve(ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ju(c,p)})(e._query,this._field,this._direction);return new Na(e.firestore,e.converter,ZS(e._query,t))}}function PC(r,e="asc"){const t=e,o=Rl("orderBy",r);return am._create(o,t)}function jy(r,e,t){if(typeof(t=Ut(t))=="string"){if(t==="")throw new ve(ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!w0(e)&&t.indexOf("/")!==-1)throw new ve(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const o=e.path.child(Tt.fromString(t));if(!je.isDocumentKey(o))throw new ve(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return J_(r,new je(o))}if(t instanceof Zt)return J_(r,t._key);throw new ve(ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Hh(t)}.`)}function Vy(r,e){if(!Array.isArray(r)||r.length===0)throw new ve(ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function bw(r,e){const t=(function(a,c){for(const p of a)for(const y of p.getFlattenedFilters())if(c.indexOf(y.op)>=0)return y.op;return null})(r.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ve(ie.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ve(ie.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Aw(r,e,t){let o;return o=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,o}class Eu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ya extends kw{constructor(e,t,o,a,c,p){super(e,t,o,a,p),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new fh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const o=this._document.data.field(Rl("DocumentSnapshot.get",e));if(o!==null)return this._userDataWriter.convertValue(o,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(ie.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ya._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ya._jsonSchemaVersion="firestore/documentSnapshot/1.0",ya._jsonSchema={type:Kt("string",ya._jsonSchemaVersion),bundleSource:Kt("string","DocumentSnapshot"),bundleName:Kt("string"),bundle:Kt("string")};class fh extends ya{data(e={}){return super.data(e)}}class Il{constructor(e,t,o,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Eu(a.hasPendingWrites,a.fromCache),this.query=o}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((o=>{e.call(t,new fh(this._firestore,this._userDataWriter,o.key,o,new Eu(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ve(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,c){if(a._snapshot.oldDocs.isEmpty()){let p=0;return a._snapshot.docChanges.map((y=>{const x=new fh(a._firestore,a._userDataWriter,y.doc.key,y.doc,new Eu(a._snapshot.mutatedKeys.has(y.doc.key),a._snapshot.fromCache),a.query.converter);return y.doc,{type:"added",doc:x,oldIndex:-1,newIndex:p++}}))}{let p=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((y=>c||y.type!==3)).map((y=>{const x=new fh(a._firestore,a._userDataWriter,y.doc.key,y.doc,new Eu(a._snapshot.mutatedKeys.has(y.doc.key),a._snapshot.fromCache),a.query.converter);let T=-1,k=-1;return y.type!==0&&(T=p.indexOf(y.doc.key),p=p.delete(y.doc.key)),y.type!==1&&(p=p.add(y.doc),k=p.indexOf(y.doc.key)),{type:kC(y.type),doc:x,oldIndex:T,newIndex:k}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(ie.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Il._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Cp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],o=[],a=[];return this.docs.forEach((c=>{c._document!==null&&(t.push(c._document),o.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),a.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function kC(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $e(61501,{type:r})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Il._jsonSchemaVersion="firestore/querySnapshot/1.0",Il._jsonSchema={type:Kt("string",Il._jsonSchemaVersion),bundleSource:Kt("string","QuerySnapshot"),bundleName:Kt("string"),bundle:Kt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=nm(e)}set(e,t,o){this._verifyNotCommitted();const a=Lf(e,this._firestore),c=Aw(a.converter,t,o),p=xw(this._dataReader,"WriteBatch.set",a._key,c,a.converter!==null,o);return this._mutations.push(p.toMutation(a._key,vr.none())),this}update(e,t,o,...a){this._verifyNotCommitted();const c=Lf(e,this._firestore);let p;return p=typeof(t=Ut(t))=="string"||t instanceof Xp?vC(this._dataReader,"WriteBatch.update",c._key,t,o,a):yC(this._dataReader,"WriteBatch.update",c._key,t),this._mutations.push(p.toMutation(c._key,vr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Lf(e,this._firestore);return this._mutations=this._mutations.concat(new Yh(t._key,vr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ve(ie.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Lf(r,e){if((r=Ut(r)).firestore!==e)throw new ve(ie.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nw(r){r=Ns(r,Zt);const e=Ns(r.firestore,zl),t=rd(e);return aC(t,r._key).then((o=>bC(e,r,o)))}function up(r){r=Ns(r,Na);const e=Ns(r.firestore,zl),t=rd(e),o=new Pw(e);return IC(r._query),lC(t,r._query).then((a=>new Il(e,o,r,a)))}function lm(r,e,t){r=Ns(r,Zt);const o=Ns(r.firestore,zl),a=Aw(r.converter,e,t),c=nm(o);return um(o,[xw(c,"setDoc",r._key,a,r.converter!==null,t).toMutation(r._key,vr.none())])}function Fy(r){return um(Ns(r.firestore,zl),[new Yh(r._key,vr.none())])}function um(r,e){const t=rd(r);return uC(t,e)}function bC(r,e,t){const o=t.docs.get(e._key),a=new Pw(r);return new ya(r,a,e._key,o,new Eu(t.hasPendingWrites,t.fromCache),e.converter)}function AC(r){return r=Ns(r,zl),rd(r),new CC(r,(e=>um(r,e)))}(function(e,t=!0){uS(Dl),Sl(new wa("firestore",((o,{instanceIdentifier:a,options:c})=>{const p=o.getProvider("app").getImmediate(),y=new zl(new dS(o.getProvider("auth-internal")),new mS(p,o.getProvider("app-check-internal")),RS(p,a),p);return c={useFetchStreams:t,...c},y._setSettings(c),y}),"PUBLIC").setMultipleInstances(!0)),Co(My,Oy,e),Co(My,Oy,"esm2020")})();const NC={apiKey:"AIzaSyBAf83WJpNKrse4AIIGYajoGt_Q0jeQ5zs",authDomain:"wandr-b02f5.firebaseapp.com",projectId:"wandr-b02f5",storageBucket:"wandr-b02f5.firebasestorage.app",messagingSenderId:"426584594137",appId:"1:426584594137:web:5beca6fa60330f90b410c8"},Rw=av(NC),Mh=LI(Rw),Ul=fC(Rw);function RC(){const[r,e]=le.useState(null),[t,o]=le.useState(!0);return le.useEffect(()=>wT(Mh,c=>{e(c),o(!1)}),[]),{user:r,loading:t}}function Lw(r){return yw(Ul,"users",r,"trips")}function Dw(r,e){return Jp(Ul,"users",r,"trips",e)}function cm(r,e){return Jp(Ul,"users",r,"chats",e)}function LC(r){return yw(Ul,"users",r,"chats")}function hm(r){return Jp(Ul,"users",r,"settings","main")}async function DC(r){return(await up(SC(Lw(r),PC("createdAt","desc")))).docs.map(t=>t.data())}async function zy(r,e){await lm(Dw(r,e.id),e)}async function MC(r,e){await Promise.all([Fy(Dw(r,e)),Fy(cm(r,e))])}async function OC(r,e){const t=await Nw(cm(r,e));return t.exists()?t.data().messages??[]:[]}async function jC(r,e,t){await lm(cm(r,e),{messages:t})}async function VC(r){const e=await Nw(hm(r));if(!e.exists())return{perplexityKey:"",anthropicKey:""};const t=e.data();return{perplexityKey:t.perplexityKey??t.apiKey??"",anthropicKey:t.anthropicKey??""}}async function FC(r,e){await lm(hm(r),{perplexityKey:e.perplexityKey,anthropicKey:e.anthropicKey},{merge:!0})}async function zC(r){const e=AC(Ul),[t,o]=await Promise.all([up(Lw(r)),up(LC(r))]);t.docs.forEach(a=>e.delete(a.ref)),o.docs.forEach(a=>e.delete(a.ref)),e.delete(hm(r)),await e.commit()}let ph=null;function Uy(r){ph=r}function UC(){return Math.random().toString(36).slice(2,9)}function $n(r,e){const t=e??UC();return ph==null||ph({...r,id:t,timestamp:new Date().toISOString()}),t}const BC="https://api.perplexity.ai/chat/completions",HC="sonar-pro",WC="sonar";async function Mw(r,e,t,o={}){var T;const{maxTokens:a=8192,model:c=HC}=o,p=[{role:"system",content:e},...r],y=await fetch(BC,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({model:c,max_tokens:a,messages:p})});if(!y.ok){const k=await y.json().catch(()=>({}));throw new Error(((T=k==null?void 0:k.error)==null?void 0:T.message)||`Perplexity API error ${y.status}`)}return(await y.json()).choices[0].message.content}const $C="https://api.anthropic.com/v1/messages",qC="claude-haiku-4-5-20251001";async function Ow(r,e,t,o={}){var x;const{maxTokens:a=8192}=o,c=await fetch($C,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":t,"anthropic-version":"2023-06-01","anthropic-dangerous-direct-browser-access":"true"},body:JSON.stringify({model:qC,max_tokens:a,system:e,messages:[{role:"user",content:r}]})});if(!c.ok){const T=await c.json().catch(()=>({})),k=((x=T==null?void 0:T.error)==null?void 0:x.message)||`Claude API error ${c.status}`;throw c.status===401||k.toLowerCase().includes("api-key")||k.toLowerCase().includes("authentication")?new Error("Invalid Claude API key  please check your Anthropic key in Settings."):new Error(k)}const y=(await c.json()).content.find(T=>T.type==="text");if(!y)throw new Error("No text content in Claude response");return y.text}function jw(r,e){var x;if(!(e!=null&&e.text)&&!((x=e==null?void 0:e.files)!=null&&x.length))return r;const t=e.files??[],o=t.filter(T=>T.mimeType.startsWith("image/")),a=t.filter(T=>T.mimeType==="application/pdf"),c=t.filter(T=>T.mimeType==="text/plain"||T.mimeType==="text/markdown");if(!o.length&&!a.length){let T="";e.text&&(T+=`User notes: ${e.text}

`);for(const k of c)try{T+=`--- ${k.name} ---
${atob(k.dataBase64)}

`}catch{}return T+r}const p=[];for(const T of o)p.push({type:"image",source:{type:"base64",media_type:T.mimeType,data:T.dataBase64}});for(const T of a)p.push({type:"document",source:{type:"base64",media_type:"application/pdf",data:T.dataBase64}});let y="";e.text&&(y+=`User notes: ${e.text}

`);for(const T of c)try{y+=`--- ${T.name} ---
${atob(T.dataBase64)}

`}catch{}return y+=r,p.push({type:"text",text:y}),p}async function dm(r,e,t,o,a={}){if(!t)throw new Error("An Anthropic (Claude) API key is required to generate content. Please add it in Settings.");const c=jw(r,o);return Ow(c,e,t,a)}function Vw(r){if(Array.isArray(r))return r;if(r&&typeof r=="object"){for(const e of Object.values(r))if(Array.isArray(e)&&e.length>0)return e}throw new Error("AI returned an unexpected format. Please try again.")}function GC(r,e,t,o){let a=0,c=!1;for(let p=e;p<r.length;p++){const y=r[p];if(c){if(y==="\\"){p++;continue}y==='"'&&(c=!1);continue}if(y==='"'){c=!0;continue}if(y===t){a++;continue}if(y===o&&(a--,a===0))return r.slice(e,p+1)}return null}function fm(r){const e=r.replace(/^```(?:json|JSON)?\s*/m,"").replace(/```\s*$/m,"").trim();for(const t of[e,r]){try{return JSON.parse(t)}catch{}const o=t.indexOf("{"),a=t.indexOf("["),c=[];o!==-1&&c.push([o,"{","}"]),a!==-1&&c.push([a,"[","]"]),c.sort((p,y)=>p[0]-y[0]);for(const[p,y,x]of c){const T=GC(t,p,y,x);if(T)try{return JSON.parse(T)}catch{}}}throw new Error("AI returned an unexpected format. Please try again.")}async function KC(r){const{destination:e,startDate:t,endDate:o,interests:a,budget:c,travelers:p,anthropicKey:y,context:x}=r,T=$n({message:`Creating trip to ${e}`,status:"pending"}),k=`Trip to ${e} (${t}  ${o}).
Interests: ${a.join(", ")}. Budget: $${c}. Travelers: ${p}.

Fill in this JSON exactly (no other text):
{
  "name": "<catchy 3-5 word trip name>",
  "emoji": "<single emoji>",
  "description": "<2 sentences about this trip>",
  "coverGradient": "<exactly one of: from-violet-900 to-indigo-900 | from-blue-900 to-cyan-900 | from-emerald-900 to-teal-900 | from-rose-900 to-pink-900 | from-amber-900 to-orange-900 | from-slate-900 to-blue-900>"
}`;try{const C=await dm(k,"You are a travel expert. Respond with ONLY a valid JSON object  no markdown, no code fences, no explanation. Raw JSON only.",y,x,{maxTokens:512}),N=fm(C);return $n({message:`Trip "${N.name}" created`,status:"success"},T),N}catch(C){const N=C instanceof Error?C.message:"Unknown error";throw $n({message:"Failed to create trip",detail:N,status:"error"},T),C}}async function ZC(r,e){const t=Math.ceil((new Date(r.endDate).getTime()-new Date(r.startDate).getTime())/864e5)+1,o=$n({message:`Generating ${t}-day itinerary for ${r.destination}`,status:"pending"}),a=[];for(let y=0;y<t;y++){const x=new Date(r.startDate+"T12:00:00");x.setDate(x.getDate()+y),a.push(x.toISOString().split("T")[0])}const c=r.notes?`
Additional context: ${r.notes}`:"",p=`Create a ${t}-day itinerary for ${r.destination}.
Dates: ${a.join(", ")}. Interests: ${r.interests.join(", ")}.
Budget: ${r.currency}${r.budget} for ${r.travelers} person(s).${c}

Return a JSON array of ${t} objects. Each object:
{"id":"day-N","date":"YYYY-MM-DD","title":"Day theme","activities":[
  {"id":"act-N-M","time":"HH:MM","title":"Name","description":"One sentence.","category":"food|sightseeing|activity|transport|accommodation|free","estimatedCost":0,"lat":0.0000,"lng":0.0000}
]}
Exactly 4 activities per day. Include accurate GPS coordinates (lat/lng) for each specific location. Keep descriptions to 1 sentence.`;try{const y=await dm(p,"Respond with ONLY a valid JSON array  no markdown, no code fences, no explanation. Raw JSON array only.",e,void 0,{maxTokens:8192}),x=Vw(fm(y)).filter(T=>T!=null).map((T,k)=>{const C=new Date(r.startDate+"T12:00:00");return C.setDate(C.getDate()+k),{...T,date:C.toISOString().split("T")[0],activities:Array.isArray(T.activities)?T.activities:[]}});return $n({message:`Itinerary ready  ${x.length} days, ${x.reduce((T,k)=>T+k.activities.length,0)} activities`,status:"success"},o),x}catch(y){const x=y instanceof Error?y.message:"Unknown error";throw $n({message:"Failed to generate itinerary",detail:x,status:"error"},o),y}}async function QC(r,e){const t=Math.ceil((new Date(r.endDate).getTime()-new Date(r.startDate).getTime())/864e5)+1,o=$n({message:`Generating packing list for ${r.destination}`,status:"pending"}),a=r.notes?`
Additional context: ${r.notes}`:"",c=`Packing list for ${t}-day trip to ${r.destination}.
Activities: ${r.interests.join(", ")}. Travelers: ${r.travelers}.${a}

Return a JSON array of exactly 25 items:
[{"id":"item-N","name":"Item","category":"Documents|Clothing|Toiletries|Electronics|Health & Safety|Activities|Miscellaneous","packed":false,"quantity":1,"essential":true}]
Mark passport, medications as essential:true. Others essential:false.`;try{const p=await dm(c,"Respond with ONLY a valid JSON array  no markdown, no code fences, no explanation. Raw JSON array only.",e,void 0,{maxTokens:3e3}),y=Vw(fm(p));return $n({message:`Packing list ready  ${y.length} items`,status:"success"},o),y}catch(p){const y=p instanceof Error?p.message:"Unknown error";throw $n({message:"Failed to generate packing list",detail:y,status:"error"},o),p}}async function YC(r,e,t,o,a,c){const p=$n({message:"AI assistant responding",status:"pending"}),y=t.notes?`
Trip notes: ${t.notes}`:"",x=`You are a travel assistant for a trip to ${t.destination} (${t.startDate}  ${t.endDate}).
${t.travelers} traveler(s). Budget: ${t.currency}${t.budget}. Interests: ${t.interests.join(", ")}.${y}
Be concise and specific. 2-4 sentences per answer.`;try{let T;if((c!=null&&c.length||!o)&&a){const k=jw(r,c!=null&&c.length?{files:c}:void 0),C=e.length?`Previous conversation:
${e.map(H=>`${H.role}: ${H.content}`).join(`
`)}

`:"",N=typeof k=="string"?[{type:"text",text:C+k}]:[{type:"text",text:C},...k];T=await Ow(N,x,a,{maxTokens:1024})}else T=await Mw([...e,{role:"user",content:r}],x,o,{maxTokens:1024});return $n({message:"AI assistant replied",status:"success"},p),T}catch(T){const k=T instanceof Error?T.message:"Unknown error";throw $n({message:"AI chat error",detail:k,status:"error"},p),T}}async function JC(r,e,t){const o=$n({message:"Searching travel info",status:"pending"}),a=`You are a real-time travel search assistant. The user is planning a trip to ${e.destination} from ${e.startDate} to ${e.endDate} with ${e.travelers} traveler(s), budget ${e.currency}${e.budget}. Provide up-to-date, specific answers using web search. Be concise but thorough. Use clear sections when listing multiple items.`;try{const c=await Mw([{role:"user",content:r}],a,t,{maxTokens:2048,model:WC});return $n({message:"Search complete",status:"success"},o),c}catch(c){const p=c instanceof Error?c.message:"Unknown error";throw $n({message:"Search failed",detail:p,status:"error"},o),c}}function XC(r){switch(r){case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":return"Invalid email or password.";case"auth/email-already-in-use":return"An account with this email already exists.";case"auth/weak-password":return"Password must be at least 6 characters.";case"auth/invalid-email":return"Please enter a valid email address.";case"auth/too-many-requests":return"Too many failed attempts. Please try again later.";default:return"Something went wrong. Please try again."}}function eb(){const[r,e]=le.useState("login"),[t,o]=le.useState(""),[a,c]=le.useState(""),[p,y]=le.useState(""),[x,T]=le.useState(!1),k=async N=>{N.preventDefault(),y(""),T(!0);try{r==="create"?await gT(Mh,t,a):await _T(Mh,t,a)}catch(H){y(XC(H.code))}finally{T(!1)}},C=()=>{e(N=>N==="login"?"create":"login"),y("")};return _.jsx("div",{className:"min-h-screen bg-gray-950 flex items-center justify-center p-4",children:_.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-8 w-full max-w-md shadow-2xl",children:[_.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[_.jsx("div",{className:"p-2.5 bg-indigo-500/20 rounded-xl border border-indigo-500/30",children:_.jsx(Sp,{className:"w-6 h-6 text-indigo-400"})}),_.jsxs("div",{children:[_.jsx("h1",{className:"text-xl font-bold text-gray-100",children:"Wandr"}),_.jsx("p",{className:"text-xs text-indigo-400",children:"AI Trip Planner"})]})]}),_.jsx("h2",{className:"text-lg font-semibold text-gray-100 mb-6",children:r==="login"?"Sign in to your account":"Create your account"}),_.jsxs("form",{onSubmit:k,className:"space-y-4",children:[_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm text-gray-400 mb-1.5",children:"Email"}),_.jsxs("div",{className:"relative",children:[_.jsx(JI,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-600"}),_.jsx("input",{type:"email",value:t,onChange:N=>o(N.target.value),required:!0,placeholder:"you@example.com",className:"w-full bg-gray-800 border border-gray-700 rounded-xl pl-10 pr-4 py-3 text-gray-100 placeholder-gray-600 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition"})]})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm text-gray-400 mb-1.5",children:"Password"}),_.jsxs("div",{className:"relative",children:[_.jsx(Ps,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-600"}),_.jsx("input",{type:"password",value:a,onChange:N=>c(N.target.value),required:!0,minLength:6,placeholder:"Minimum 6 characters",className:"w-full bg-gray-800 border border-gray-700 rounded-xl pl-10 pr-4 py-3 text-gray-100 placeholder-gray-600 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition"})]})]}),p&&_.jsx("p",{className:"text-sm text-red-400 bg-red-500/10 border border-red-500/20 rounded-xl px-4 py-2.5",children:p}),_.jsxs("button",{type:"submit",disabled:x||!t||!a,className:"w-full py-3 bg-indigo-600 hover:bg-indigo-500 disabled:opacity-40 disabled:cursor-not-allowed rounded-xl font-medium transition shadow-lg shadow-indigo-900/30 flex items-center justify-center gap-2",children:[x&&_.jsx(Wn,{className:"w-4 h-4 animate-spin"}),r==="login"?"Sign In":"Create Account"]})]}),_.jsxs("p",{className:"text-center text-sm text-gray-500 mt-6",children:[r==="login"?"Don't have an account?":"Already have an account?"," ",_.jsx("button",{onClick:C,className:"text-indigo-400 hover:text-indigo-300 transition font-medium",children:r==="login"?"Create one":"Sign in"})]})]})})}function tb({onSave:r,existing:e,onClose:t,onLogout:o,onDeleteAccount:a}){const[c,p]=le.useState(e.perplexityKey),[y,x]=le.useState(e.anthropicKey),[T,k]=le.useState(!1),[C,N]=le.useState(!1),[H,$]=le.useState(!1),[Z,te]=le.useState(!1),[he,_e]=le.useState(""),[Te,Oe]=le.useState(""),[ke,fe]=le.useState(!1),V=()=>{r({perplexityKey:c.trim(),anthropicKey:y.trim()}),$(!0),setTimeout(()=>$(!1),2e3)},D=async()=>{fe(!0),Oe("");try{await a(he)}catch(M){const z=M;z.code==="auth/wrong-password"||z.code==="auth/invalid-credential"?Oe("Incorrect password."):Oe("Failed to delete account. Please try again."),fe(!1)}};return _.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:_.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-8 w-full max-w-md shadow-2xl",children:[_.jsxs("div",{className:"flex items-center justify-between mb-8",children:[_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("div",{className:"p-2 bg-gray-800 rounded-lg",children:_.jsx(QI,{className:"w-5 h-5 text-gray-400"})}),_.jsxs("div",{children:[_.jsx("h2",{className:"font-semibold text-gray-100",children:"API Settings"}),_.jsx("p",{className:"text-xs text-gray-500",children:"Configure your AI provider keys"})]})]}),_.jsx("button",{onClick:t,className:"p-1.5 text-gray-500 hover:text-gray-300 hover:bg-gray-800 rounded-lg transition",title:"Close",children:_.jsx(Pl,{className:"w-4 h-4"})})]}),_.jsxs("div",{className:"space-y-6",children:[_.jsxs("div",{children:[_.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Perplexity API Key",e.perplexityKey&&_.jsx("span",{className:"ml-2 text-xs text-emerald-400",children:" configured"})]}),_.jsxs("div",{className:"relative",children:[_.jsx("input",{type:T?"text":"password",value:c,onChange:M=>p(M.target.value),placeholder:"pplx-...",className:"w-full bg-gray-800 border border-gray-700 rounded-xl px-4 py-3 pr-10 text-gray-100 placeholder-gray-600 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition font-mono text-sm"}),_.jsx("button",{type:"button",onClick:()=>k(M=>!M),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-300 transition",children:T?_.jsx(O_,{className:"w-4 h-4"}):_.jsx(j_,{className:"w-4 h-4"})})]}),_.jsx("p",{className:"mt-1.5 text-xs text-gray-500",children:"Used for itinerary generation, packing lists, and AI chat."}),_.jsxs("a",{href:"https://www.perplexity.ai/settings/api",target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-1 mt-1 text-xs text-indigo-400 hover:text-indigo-300 transition",children:[_.jsx(M_,{className:"w-3 h-3"}),"Get your Perplexity key"]})]}),_.jsxs("div",{children:[_.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Anthropic API Key",e.anthropicKey&&_.jsx("span",{className:"ml-2 text-xs text-emerald-400",children:" configured"})]}),_.jsxs("div",{className:"relative",children:[_.jsx("input",{type:C?"text":"password",value:y,onChange:M=>x(M.target.value),placeholder:"sk-ant-...",className:"w-full bg-gray-800 border border-gray-700 rounded-xl px-4 py-3 pr-10 text-gray-100 placeholder-gray-600 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition font-mono text-sm"}),_.jsx("button",{type:"button",onClick:()=>N(M=>!M),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-300 transition",children:C?_.jsx(O_,{className:"w-4 h-4"}):_.jsx(j_,{className:"w-4 h-4"})})]}),_.jsx("p",{className:"mt-1.5 text-xs text-gray-500",children:"For Claude-powered features."}),_.jsxs("a",{href:"https://console.anthropic.com/settings/keys",target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-1 mt-1 text-xs text-indigo-400 hover:text-indigo-300 transition",children:[_.jsx(M_,{className:"w-3 h-3"}),"Get your Anthropic key"]})]}),_.jsx("button",{onClick:V,className:`w-full py-3 rounded-xl font-medium transition shadow-lg shadow-indigo-900/30 ${H?"bg-emerald-600 hover:bg-emerald-500":"bg-indigo-600 hover:bg-indigo-500"}`,children:H?" Saved":"Save Keys"})]}),_.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-800",children:[_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsxs("button",{onClick:o,className:"flex items-center gap-2 text-sm text-gray-400 hover:text-gray-200 transition",children:[_.jsx(YI,{className:"w-4 h-4"}),"Sign out"]}),_.jsx("button",{onClick:()=>te(!0),className:"text-sm text-red-500 hover:text-red-400 transition",children:"Delete account"})]}),Z&&_.jsxs("div",{className:"mt-4 p-4 bg-red-500/10 border border-red-500/20 rounded-xl space-y-3",children:[_.jsx("p",{className:"text-sm text-red-300 leading-relaxed",children:"This will permanently delete all your trips, chat history, and your account. Enter your password to confirm."}),_.jsx("input",{type:"password",value:he,onChange:M=>{_e(M.target.value),Oe("")},placeholder:"Your password",className:"w-full bg-gray-800 border border-gray-700 rounded-xl px-4 py-2.5 text-gray-100 placeholder-gray-600 text-sm focus:outline-none focus:border-red-500 transition"}),Te&&_.jsx("p",{className:"text-xs text-red-400",children:Te}),_.jsxs("div",{className:"flex gap-2",children:[_.jsx("button",{onClick:()=>{te(!1),_e(""),Oe("")},className:"flex-1 py-2 text-sm text-gray-400 hover:text-gray-200 bg-gray-800 hover:bg-gray-700 rounded-xl transition",children:"Cancel"}),_.jsxs("button",{onClick:D,disabled:!he||ke,className:"flex-1 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-500 disabled:opacity-40 rounded-xl transition flex items-center justify-center gap-1.5",children:[ke&&_.jsx(Wn,{className:"w-3.5 h-3.5 animate-spin"}),"Delete everything"]})]})]})]})]})})}function By({trip:r,onClick:e}){const t=new Date(r.startDate),o=new Date(r.endDate),a=Math.ceil((o.getTime()-t.getTime())/864e5)+1,p={planning:{bg:"bg-amber-500/20",text:"text-amber-300",label:"Planning"},upcoming:{bg:"bg-blue-500/20",text:"text-blue-300",label:"Upcoming"},completed:{bg:"bg-emerald-500/20",text:"text-emerald-300",label:"Completed"}}[r.status];return _.jsxs("button",{onClick:e,className:"group w-full text-left rounded-2xl overflow-hidden border border-gray-800 hover:border-gray-600 transition-all duration-200 hover:-translate-y-0.5 hover:shadow-xl hover:shadow-black/40 bg-gray-900",children:[_.jsxs("div",{className:`h-32 bg-gradient-to-br ${r.coverGradient} relative overflow-hidden`,children:[_.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/40 to-transparent"}),_.jsx("div",{className:"absolute bottom-3 left-4 text-4xl drop-shadow-lg",children:r.emoji}),_.jsx("div",{className:"absolute top-3 right-3",children:_.jsx("span",{className:`text-xs px-2.5 py-1 rounded-full font-medium backdrop-blur-sm ${p.bg} ${p.text}`,children:p.label})})]}),_.jsxs("div",{className:"p-4",children:[_.jsx("h3",{className:"font-semibold text-gray-100 group-hover:text-white truncate leading-tight",children:r.name}),_.jsxs("div",{className:"flex items-center gap-1.5 mt-1",children:[_.jsx(Uh,{className:"w-3.5 h-3.5 text-gray-500 shrink-0"}),_.jsx("span",{className:"text-sm text-gray-400 truncate",children:r.destination})]}),_.jsxs("div",{className:"flex items-center justify-between mt-3 text-xs text-gray-500",children:[_.jsxs("span",{className:"flex items-center gap-1",children:[_.jsx(Tp,{className:"w-3.5 h-3.5"}),t.toLocaleDateString("en",{month:"short",day:"numeric"})]}),_.jsxs("span",{className:"flex items-center gap-1",children:[_.jsx(Pp,{className:"w-3.5 h-3.5"}),r.travelers]}),_.jsxs("span",{className:"font-medium text-gray-400",children:[a,"d"]})]})]})]})}function nb({trips:r,onNewTrip:e,onSelectTrip:t,onSettingsClick:o,hasAiKey:a}){const c=r.filter(y=>y.status!=="completed"),p=r.filter(y=>y.status==="completed");return _.jsxs("div",{className:"min-h-screen flex flex-col",children:[_.jsx("header",{className:"border-b border-gray-800 bg-gray-950/90 backdrop-blur-sm sticky top-0 z-10",children:_.jsxs("div",{className:"max-w-6xl mx-auto px-4 md:px-6 py-4 flex items-center justify-between",children:[_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("div",{className:"p-2 bg-indigo-500/20 rounded-xl border border-indigo-500/20",children:_.jsx(Sp,{className:"w-5 h-5 text-indigo-400"})}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("span",{className:"text-xl font-bold tracking-tight",children:"Wandr"}),_.jsx("span",{className:"text-xs text-indigo-400 bg-indigo-500/10 border border-indigo-500/20 px-2 py-0.5 rounded-full font-medium",children:"AI"})]})]}),_.jsxs("button",{onClick:o,className:"relative p-2 text-gray-400 hover:text-gray-200 hover:bg-gray-800 rounded-lg transition",title:"API Settings",children:[_.jsx(Ca,{className:"w-5 h-5"}),!a&&_.jsx("span",{className:"absolute top-1.5 right-1.5 w-2 h-2 bg-amber-400 rounded-full"})]})]})}),_.jsxs("main",{className:"flex-1 max-w-6xl mx-auto w-full px-4 md:px-6 py-6 md:py-8",children:[_.jsxs("div",{className:"flex items-start justify-between mb-8",children:[_.jsxs("div",{children:[_.jsx("h1",{className:"text-3xl font-bold text-gray-100",children:"Your Trips"}),_.jsx("p",{className:"text-gray-400 mt-1",children:"Plan and explore the world with AI"})]}),_.jsxs("button",{onClick:e,className:"flex items-center gap-2 px-3 md:px-5 py-2.5 bg-indigo-600 hover:bg-indigo-500 rounded-xl font-medium transition shadow-lg shadow-indigo-900/30 shrink-0",children:[_.jsx($f,{className:"w-4 h-4"}),_.jsx("span",{className:"hidden sm:inline",children:"New Trip"})]})]}),!a&&_.jsxs("div",{className:"mb-6 flex items-center justify-between gap-3 bg-amber-500/10 border border-amber-500/20 rounded-xl px-4 py-3",children:[_.jsx("p",{className:"text-sm text-amber-300",children:"AI features are disabled  add your Perplexity API key to generate itineraries, packing lists, and use AI chat."}),_.jsx("button",{onClick:o,className:"shrink-0 text-xs font-medium text-amber-300 hover:text-amber-200 bg-amber-500/20 hover:bg-amber-500/30 px-3 py-1.5 rounded-lg transition",children:"Set up"})]}),r.length===0&&_.jsxs("div",{className:"flex flex-col items-center justify-center py-24 text-center",children:[_.jsx("div",{className:"w-20 h-20 bg-indigo-500/10 border border-indigo-500/20 rounded-3xl flex items-center justify-center mb-5",children:_.jsx(KI,{className:"w-10 h-10 text-indigo-400"})}),_.jsx("h2",{className:"text-xl font-semibold text-gray-200 mb-2",children:"No trips yet"}),_.jsx("p",{className:"text-gray-500 max-w-sm mb-6 leading-relaxed",children:"Create your first trip and let AI build a personalized itinerary, packing list, and travel guide."}),_.jsxs("button",{onClick:e,className:"flex items-center gap-2 px-6 py-3 bg-indigo-600 hover:bg-indigo-500 rounded-xl font-medium transition",children:[_.jsx($f,{className:"w-4 h-4"}),"Plan your first trip"]})]}),c.length>0&&_.jsxs("section",{className:"mb-8",children:[_.jsx("h2",{className:"text-xs font-semibold text-gray-500 uppercase tracking-widest mb-4",children:"Upcoming & Planning"}),_.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:c.map(y=>_.jsx(By,{trip:y,onClick:()=>t(y)},y.id))})]}),p.length>0&&_.jsxs("section",{children:[_.jsx("h2",{className:"text-xs font-semibold text-gray-500 uppercase tracking-widest mb-4",children:"Completed"}),_.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 opacity-70",children:p.map(y=>_.jsx(By,{trip:y,onClick:()=>t(y)},y.id))})]})]})]})}const Hy=[{id:"culture",label:"Culture & History",emoji:""},{id:"food",label:"Food & Dining",emoji:""},{id:"nature",label:"Nature & Outdoors",emoji:""},{id:"adventure",label:"Adventure",emoji:""},{id:"beach",label:"Beach & Relaxation",emoji:""},{id:"shopping",label:"Shopping",emoji:""},{id:"nightlife",label:"Nightlife",emoji:""},{id:"photography",label:"Photography",emoji:""},{id:"family",label:"Family-Friendly",emoji:""},{id:"luxury",label:"Luxury",emoji:""},{id:"backpacking",label:"Budget Travel",emoji:""},{id:"wellness",label:"Wellness & Spa",emoji:""}],rb=[500,1500,3e3,5e3,1e4],dl=5,ib=4*1024*1024;function sb(){return Math.random().toString(36).slice(2,9)}function Wy(r){return r<1024?`${r} B`:r<1024*1024?`${(r/1024).toFixed(0)} KB`:`${(r/(1024*1024)).toFixed(1)} MB`}function ob({onBack:r,onCreate:e,hasAiKey:t,hasClaudeKey:o,onSettingsClick:a}){const[c,p]=le.useState(1),[y,x]=le.useState(!1),[T,k]=le.useState(""),[C,N]=le.useState(""),[H,$]=le.useState(""),[Z,te]=le.useState(""),[he,_e]=le.useState(2),[Te,Oe]=le.useState([]),[ke,fe]=le.useState(3e3),[V,D]=le.useState("USD"),[M,z]=le.useState(""),[j,R]=le.useState([]),[A,ye]=le.useState(!1),[Ge,pe]=le.useState(""),Ve=le.useRef(null),X=new Date().toISOString().split("T")[0],Ce=C.trim()!==""&&H!==""&&Z!==""&&new Date(Z)>=new Date(H),se=Te.length>0&&ke>0,B=H&&Z?Math.ceil((new Date(Z).getTime()-new Date(H).getTime())/864e5)+1:null,ne=re=>Oe(qe=>qe.includes(re)?qe.filter(dt=>dt!==re):[...qe,re]),Me=["image/jpeg","image/png","image/webp","image/gif","application/pdf","text/plain","text/markdown"],Ne=".jpg,.jpeg,.png,.webp,.gif,.pdf,.txt,.md",Se=le.useCallback(re=>{pe("");const qe=Array.from(re),dt=dl-j.length;if(dt<=0){pe(`Maximum ${dl} files.`);return}let gn=0;qe.slice(0,dt).forEach(jt=>{if(!Me.includes(jt.type)){pe(`"${jt.name}" is not a supported file type.`);return}if(jt.size>ib){pe(`"${jt.name}" exceeds the 4 MB limit.`);return}const Nn=new FileReader;Nn.onload=di=>{var ar;const fi=(ar=di.target)==null?void 0:ar.result,Kr=fi.split(",")[1],or={id:sb(),name:jt.name,mimeType:jt.type,dataBase64:Kr,previewUrl:jt.type.startsWith("image/")?fi:void 0,size:jt.size};R(kt=>[...kt,or])},Nn.readAsDataURL(jt),gn++}),qe.length>dt+gn&&pe(`Only the first ${dt} files were added (limit: ${dl}).`)},[j.length]),we=re=>R(qe=>qe.filter(dt=>dt.id!==re)),Xe=async()=>{x(!0),k("");const re={text:M.trim()||void 0,files:j.length?j:void 0};try{await e({destination:C,startDate:H,endDate:Z,travelers:he,budget:ke,currency:V,interests:Te,context:re.text||re.files?re:void 0})}catch(qe){k(qe instanceof Error?qe.message:"Failed to create trip"),x(!1)}};return _.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-950",children:[_.jsx("header",{className:"border-b border-gray-800 bg-gray-950",children:_.jsxs("div",{className:"max-w-2xl mx-auto px-6 py-4 flex items-center gap-4",children:[_.jsx("button",{onClick:r,className:"p-2 text-gray-400 hover:text-gray-200 hover:bg-gray-800 rounded-lg transition",children:_.jsx(Wf,{className:"w-5 h-5"})}),_.jsxs("div",{className:"flex-1",children:[_.jsx("h1",{className:"font-semibold text-gray-100",children:"New Trip"}),_.jsxs("p",{className:"text-xs text-gray-500",children:["Step ",c," of 4"]})]}),_.jsx("div",{className:"flex gap-1.5",children:[1,2,3,4].map(re=>_.jsx("div",{className:`h-1.5 w-8 rounded-full transition-colors duration-300 ${re<=c?"bg-indigo-500":"bg-gray-800"}`},re))})]})}),_.jsxs("main",{className:"flex-1 max-w-2xl mx-auto w-full px-6 py-10",children:[c===1&&_.jsxs("div",{className:"space-y-7",children:[_.jsxs("div",{children:[_.jsx("h2",{className:"text-2xl font-bold text-gray-100 mb-1",children:"Where are you going?"}),_.jsx("p",{className:"text-gray-400",children:"Tell us your destination and travel dates."})]}),_.jsxs("div",{children:[_.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[_.jsx(Uh,{className:"w-4 h-4 inline mr-1.5 text-gray-500"}),"Destination"]}),_.jsx("input",{type:"text",value:C,onChange:re=>N(re.target.value),placeholder:"e.g. Tokyo, Japan",className:"w-full bg-gray-900 border border-gray-700 rounded-xl px-4 py-3 text-gray-100 placeholder-gray-600 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition",autoFocus:!0})]}),_.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[_.jsxs("div",{children:[_.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[_.jsx(Tp,{className:"w-4 h-4 inline mr-1.5 text-gray-500"}),"Start Date"]}),_.jsx("input",{type:"date",value:H,min:X,onChange:re=>{$(re.target.value),Z&&re.target.value>Z&&te(re.target.value)},className:"w-full bg-gray-900 border border-gray-700 rounded-xl px-4 py-3 text-gray-100 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition [color-scheme:dark]"})]}),_.jsxs("div",{children:[_.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["End Date",B&&_.jsxs("span",{className:"ml-2 text-xs text-indigo-400",children:[B,"d"]})]}),_.jsx("input",{type:"date",value:Z,min:H||X,onChange:re=>te(re.target.value),className:"w-full bg-gray-900 border border-gray-700 rounded-xl px-4 py-3 text-gray-100 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition [color-scheme:dark]"})]})]}),_.jsxs("div",{children:[_.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:[_.jsx(Pp,{className:"w-4 h-4 inline mr-1.5 text-gray-500"}),"Travelers"]}),_.jsxs("div",{className:"flex items-center gap-4",children:[_.jsx("button",{type:"button",onClick:()=>_e(Math.max(1,he-1)),className:"w-10 h-10 bg-gray-800 hover:bg-gray-700 rounded-xl flex items-center justify-center text-xl font-light text-gray-300 transition",children:""}),_.jsx("span",{className:"text-2xl font-bold w-8 text-center text-gray-100",children:he}),_.jsx("button",{type:"button",onClick:()=>_e(he+1),className:"w-10 h-10 bg-gray-800 hover:bg-gray-700 rounded-xl flex items-center justify-center text-xl font-light text-gray-300 transition",children:"+"}),_.jsx("span",{className:"text-gray-400 text-sm",children:he===1?"traveler":"travelers"})]})]})]}),c===2&&_.jsxs("div",{className:"space-y-7",children:[_.jsxs("div",{children:[_.jsx("h2",{className:"text-2xl font-bold text-gray-100 mb-1",children:"What's your style?"}),_.jsx("p",{className:"text-gray-400",children:"Pick interests and set your total budget."})]}),_.jsxs("div",{children:[_.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:["Interests ",_.jsx("span",{className:"text-gray-500",children:"(select all that apply)"})]}),_.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:Hy.map(({id:re,label:qe,emoji:dt})=>{const gn=Te.includes(re);return _.jsxs("button",{type:"button",onClick:()=>ne(re),className:`flex items-center gap-2 px-3 py-2.5 rounded-xl text-sm border transition-all text-left ${gn?"bg-indigo-600/20 border-indigo-500/60 text-indigo-200":"bg-gray-900 border-gray-700 text-gray-300 hover:border-gray-500 hover:text-gray-200"}`,children:[_.jsx("span",{className:"text-base",children:dt}),_.jsx("span",{className:"flex-1 leading-tight",children:qe}),gn&&_.jsx(zh,{className:"w-3.5 h-3.5 text-indigo-400 shrink-0"})]},re)})})]}),_.jsxs("div",{children:[_.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[_.jsx(Ip,{className:"w-4 h-4 inline mr-1.5 text-gray-500"}),"Total Budget (all travelers)"]}),_.jsxs("div",{className:"flex gap-2",children:[_.jsx("select",{value:V,onChange:re=>D(re.target.value),className:"bg-gray-900 border border-gray-700 rounded-xl px-3 py-3 text-gray-100 focus:outline-none focus:border-indigo-500 transition",children:["USD","EUR","GBP","JPY","AUD","CAD"].map(re=>_.jsx("option",{value:re,children:re},re))}),_.jsx("input",{type:"number",value:ke,min:100,step:100,onChange:re=>fe(Number(re.target.value)),className:"flex-1 bg-gray-900 border border-gray-700 rounded-xl px-4 py-3 text-gray-100 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition"})]}),_.jsx("div",{className:"flex gap-2 mt-2.5",children:rb.map(re=>_.jsxs("button",{type:"button",onClick:()=>fe(re),className:`flex-1 py-1.5 text-xs rounded-lg border transition ${ke===re?"bg-indigo-600/20 border-indigo-500/40 text-indigo-300":"bg-gray-900 border-gray-700 text-gray-500 hover:text-gray-300 hover:border-gray-600"}`,children:["$",(re/1e3).toFixed(0)+(re>=1e3?"k":"")]},re))})]})]}),c===3&&_.jsxs("div",{className:"space-y-6",children:[_.jsxs("div",{className:"flex items-start justify-between gap-2",children:[_.jsxs("div",{children:[_.jsx("h2",{className:"text-2xl font-bold text-gray-100 mb-1",children:"Anything to add?"}),_.jsx("p",{className:"text-gray-400 text-sm leading-relaxed",children:"Give the AI extra context for a more personalised trip. Fully optional."})]}),_.jsx("button",{onClick:()=>p(4),className:"shrink-0 text-xs text-gray-500 hover:text-gray-300 underline underline-offset-2 mt-1 transition",children:"Skip"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:" Notes"}),_.jsx("textarea",{value:M,onChange:re=>z(re.target.value),rows:4,placeholder:`e.g. "I'm celebrating my anniversary, I have a hotel booked near the Eiffel Tower, I'm vegetarian, I can't do early mornings"`,className:"w-full bg-gray-900 border border-gray-700 rounded-xl px-4 py-3 text-gray-100 placeholder-gray-600 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition resize-none text-sm leading-relaxed"}),_.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Saved with the trip  used by AI whenever you generate the itinerary or packing list."})]}),_.jsxs("div",{children:[_.jsxs("div",{className:"flex items-center justify-between mb-2",children:[_.jsxs("label",{className:"text-sm font-medium text-gray-300",children:[" Files & Images",_.jsxs("span",{className:"ml-2 text-xs font-normal text-gray-500",children:[j.length,"/",dl]})]}),!o&&_.jsx("span",{className:"text-xs text-amber-400 bg-amber-500/10 border border-amber-500/20 px-2 py-0.5 rounded-full",children:"Images & PDFs need Claude key"})]}),_.jsxs("div",{onDragOver:re=>{re.preventDefault(),ye(!0)},onDragLeave:()=>ye(!1),onDrop:re=>{re.preventDefault(),ye(!1),Se(re.dataTransfer.files)},onClick:()=>{var re;return(re=Ve.current)==null?void 0:re.click()},className:`border-2 border-dashed rounded-xl px-4 py-6 flex flex-col items-center gap-2 cursor-pointer transition ${A?"border-indigo-500 bg-indigo-500/5":j.length>=dl?"border-gray-800 opacity-50 cursor-not-allowed":"border-gray-700 hover:border-gray-500 hover:bg-gray-900/50"}`,children:[_.jsx("input",{ref:Ve,type:"file",multiple:!0,accept:Ne,onChange:re=>re.target.files&&Se(re.target.files),className:"hidden",disabled:j.length>=dl}),_.jsx(iS,{className:"w-6 h-6 text-gray-500"}),_.jsxs("p",{className:"text-sm text-gray-400 text-center",children:["Drop files here or ",_.jsx("span",{className:"text-indigo-400",children:"browse"})]}),_.jsx("p",{className:"text-xs text-gray-600 text-center",children:"JPG  PNG  WEBP  GIF  PDF  TXT  MD  Max 4 MB each"})]}),Ge&&_.jsx("p",{className:"text-xs text-red-400 mt-2",children:Ge}),j.length>0&&_.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:j.map(re=>re.previewUrl?_.jsxs("div",{className:"relative group",children:[_.jsx("img",{src:re.previewUrl,alt:re.name,className:"w-20 h-20 object-cover rounded-xl border border-gray-700"}),_.jsx("button",{onClick:()=>we(re.id),className:"absolute -top-1.5 -right-1.5 w-5 h-5 bg-gray-900 border border-gray-600 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition hover:bg-red-500/20 hover:border-red-500/50",children:_.jsx(Pl,{className:"w-3 h-3 text-gray-300"})}),_.jsx("p",{className:"text-[10px] text-gray-500 mt-1 truncate w-20 text-center",children:Wy(re.size)})]},re.id):_.jsxs("div",{className:"flex items-center gap-2 bg-gray-900 border border-gray-700 rounded-xl px-3 py-2 max-w-[220px]",children:[re.mimeType==="application/pdf"?_.jsx(Gv,{className:"w-4 h-4 text-red-400 shrink-0"}):_.jsx(ZI,{className:"w-4 h-4 text-blue-400 shrink-0"}),_.jsxs("div",{className:"flex-1 min-w-0",children:[_.jsx("p",{className:"text-xs text-gray-300 truncate",children:re.name}),_.jsx("p",{className:"text-[10px] text-gray-600",children:Wy(re.size)})]}),_.jsx("button",{onClick:()=>we(re.id),className:"shrink-0 p-0.5 text-gray-600 hover:text-gray-300 transition",children:_.jsx(Pl,{className:"w-3.5 h-3.5"})})]},re.id))}),j.some(re=>re.mimeType.startsWith("image/")||re.mimeType==="application/pdf")&&!o&&_.jsxs("div",{className:"mt-3 flex items-start gap-2 bg-amber-500/10 border border-amber-500/20 rounded-xl px-3 py-2.5",children:[_.jsx("span",{className:"text-base shrink-0",children:""}),_.jsx("p",{className:"text-xs text-amber-300 leading-relaxed",children:"Images and PDFs will be ignored  add a Claude API key in Settings to enable vision analysis. Text notes and .txt/.md files still work."})]})]})]}),c===4&&_.jsxs("div",{className:"space-y-6",children:[_.jsxs("div",{children:[_.jsx("h2",{className:"text-2xl font-bold text-gray-100 mb-1",children:"Ready to create!"}),_.jsx("p",{className:"text-gray-400",children:"AI will generate your trip name, description, and set up the foundation for your itinerary."})]}),_.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-6 space-y-5",children:[_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("div",{className:"p-2.5 bg-indigo-500/20 rounded-xl",children:_.jsx(Sp,{className:"w-5 h-5 text-indigo-400"})}),_.jsxs("div",{children:[_.jsx("p",{className:"font-semibold text-gray-100",children:C}),_.jsxs("p",{className:"text-sm text-gray-400",children:[new Date(H).toLocaleDateString("en",{month:"long",day:"numeric"})," "," ",new Date(Z).toLocaleDateString("en",{month:"long",day:"numeric",year:"numeric"}),B&&_.jsxs("span",{className:"ml-1.5 text-gray-500",children:["(",B," days)"]})]})]})]}),_.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[_.jsxs("div",{className:"bg-gray-800/60 rounded-xl p-3",children:[_.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Travelers"}),_.jsxs("p",{className:"font-medium text-gray-200",children:[he," ",he===1?"person":"people"]})]}),_.jsxs("div",{className:"bg-gray-800/60 rounded-xl p-3",children:[_.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Budget"}),_.jsxs("p",{className:"font-medium text-gray-200",children:[V," ",ke.toLocaleString()]})]})]}),_.jsxs("div",{children:[_.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Interests"}),_.jsx("div",{className:"flex flex-wrap gap-1.5",children:Te.map(re=>{const qe=Hy.find(dt=>dt.id===re);return qe?_.jsxs("span",{className:"text-xs bg-indigo-500/15 text-indigo-300 border border-indigo-500/25 px-2.5 py-1 rounded-full",children:[qe.emoji," ",qe.label]},re):null})})]}),(M||j.length>0)&&_.jsxs("div",{className:"border-t border-gray-800 pt-4",children:[_.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Context added"}),_.jsxs("div",{className:"space-y-1.5",children:[M&&_.jsxs("p",{className:"text-xs text-gray-400 bg-gray-800/60 rounded-lg px-3 py-2 line-clamp-2",children:[" ",M]}),j.length>0&&_.jsxs("p",{className:"text-xs text-gray-400 bg-gray-800/60 rounded-lg px-3 py-2",children:[" ",j.length," file",j.length!==1?"s":"",": ",j.map(re=>re.name).join(", ")]})]})]})]}),!t&&_.jsxs("div",{className:"flex items-center justify-between gap-3 bg-amber-500/10 border border-amber-500/20 rounded-xl px-4 py-3",children:[_.jsx("p",{className:"text-sm text-amber-300",children:"A Perplexity or Claude API key is required to create trips with AI."}),_.jsxs("button",{onClick:a,className:"shrink-0 flex items-center gap-1.5 text-xs font-medium text-amber-300 hover:text-amber-200 bg-amber-500/20 hover:bg-amber-500/30 px-3 py-1.5 rounded-lg transition",children:[_.jsx(Ca,{className:"w-3.5 h-3.5"}),"Set up"]})]}),T&&_.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-4 text-sm text-red-300",children:[_.jsx("strong",{children:"Error:"})," ",T]}),_.jsx("button",{onClick:Xe,disabled:y||!t,className:"w-full py-4 bg-indigo-600 hover:bg-indigo-500 disabled:opacity-40 disabled:cursor-not-allowed rounded-xl font-semibold flex items-center justify-center gap-2.5 transition shadow-lg shadow-indigo-900/30 text-base",children:y?_.jsxs(_.Fragment,{children:[_.jsx(Wn,{className:"w-5 h-5 animate-spin"}),"AI is crafting your trip"]}):_.jsxs(_.Fragment,{children:[_.jsx(xl,{className:"w-5 h-5"}),"Create Trip with AI"]})})]}),c<4&&_.jsxs("div",{className:"flex justify-between mt-10",children:[c>1?_.jsxs("button",{onClick:()=>p(re=>re-1),className:"flex items-center gap-2 px-4 py-2.5 text-gray-400 hover:text-gray-200 hover:bg-gray-800 rounded-xl transition",children:[_.jsx(Wf,{className:"w-4 h-4"}),"Back"]}):_.jsx("div",{}),_.jsxs("button",{onClick:()=>p(re=>re+1),disabled:c===1?!Ce:c===2?!se:!1,className:"flex items-center gap-2 px-6 py-2.5 bg-indigo-600 hover:bg-indigo-500 disabled:opacity-40 disabled:cursor-not-allowed rounded-xl font-medium transition",children:[c===3?"Review":"Next",_.jsx(FI,{className:"w-4 h-4"})]})]})]})]})}const ab=["accommodation","transport","food","activity","sightseeing","free"],$y={accommodation:{Icon:zI,cls:"text-purple-400 bg-purple-500/10 border-purple-500/20"},transport:{Icon:rS,cls:"text-blue-400 bg-blue-500/10 border-blue-500/20"},food:{Icon:oS,cls:"text-orange-400 bg-orange-500/10 border-orange-500/20"},activity:{Icon:nS,cls:"text-indigo-400 bg-indigo-500/10 border-indigo-500/20"},sightseeing:{Icon:Uh,cls:"text-emerald-400 bg-emerald-500/10 border-emerald-500/20"},free:{Icon:GI,cls:"text-gray-400 bg-gray-500/10 border-gray-700"}};function lb(){return Math.random().toString(36).slice(2,9)}function qy({value:r,onChange:e,onSave:t,onCancel:o}){var c;const a="w-full bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-sm text-gray-100 placeholder-gray-600 focus:outline-none focus:border-indigo-500 transition";return _.jsxs("div",{className:"bg-gray-900 border border-indigo-500/40 rounded-xl p-4 space-y-3",children:[_.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[_.jsxs("div",{children:[_.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Time"}),_.jsx("input",{type:"time",value:r.time??"09:00",onChange:p=>e({...r,time:p.target.value}),className:a+" [color-scheme:dark]"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Category"}),_.jsx("select",{value:r.category??"activity",onChange:p=>e({...r,category:p.target.value}),className:a,children:ab.map(p=>_.jsx("option",{value:p,children:p},p))})]})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Activity name"}),_.jsx("input",{type:"text",value:r.title??"",onChange:p=>e({...r,title:p.target.value}),placeholder:"e.g. Visit the Eiffel Tower",className:a,autoFocus:!0})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Description"}),_.jsx("textarea",{value:r.description??"",onChange:p=>e({...r,description:p.target.value}),placeholder:"Brief description",rows:2,className:a+" resize-none"})]}),_.jsxs("div",{children:[_.jsxs("label",{className:"block text-xs text-gray-500 mb-1",children:[_.jsx(Ip,{className:"w-3 h-3 inline"})," Estimated cost per person"]}),_.jsx("input",{type:"number",min:0,step:5,value:r.estimatedCost??0,onChange:p=>e({...r,estimatedCost:Number(p.target.value)}),className:a})]}),_.jsxs("div",{className:"flex justify-end gap-2 pt-1",children:[_.jsxs("button",{onClick:o,className:"flex items-center gap-1.5 px-3 py-1.5 text-sm text-gray-400 hover:text-gray-200 hover:bg-gray-800 rounded-lg transition",children:[_.jsx(Pl,{className:"w-3.5 h-3.5"})," Cancel"]}),_.jsxs("button",{onClick:t,disabled:!((c=r.title)!=null&&c.trim()),className:"flex items-center gap-1.5 px-4 py-1.5 text-sm bg-indigo-600 hover:bg-indigo-500 disabled:opacity-40 rounded-lg font-medium transition",children:[_.jsx(zh,{className:"w-3.5 h-3.5"})," Save"]})]})]})}function ub({trip:r,onGenerate:e,onUpdate:t,hasAiKey:o,onSettingsClick:a}){const[c,p]=le.useState(!1),[y,x]=le.useState(""),[T,k]=le.useState(0),[C,N]=le.useState(null),[H,$]=le.useState({}),[Z,te]=le.useState(!1),[he,_e]=le.useState(""),Te=async()=>{p(!0),x(""),N(null);try{await e(r)}catch(pe){x(pe instanceof Error?pe.message:"Failed to generate itinerary")}finally{p(!1)}},Oe=(pe,Ve)=>{t({...r,itinerary:r.itinerary.map(X=>X.id===pe?Ve(X):X)})},ke=pe=>{if(!C)return;const Ve=!r.itinerary.flatMap(X=>X.activities).find(X=>X.id===C);Oe(pe,X=>({...X,activities:Ve?[...X.activities,{id:C,time:"12:00",title:"",description:"",category:"activity",estimatedCost:0,...H}]:X.activities.map(Ce=>Ce.id===C?{...Ce,...H}:Ce)})),N(null),$({})},fe=(pe,Ve)=>{Oe(pe,X=>({...X,activities:X.activities.filter(Ce=>Ce.id!==Ve)}))},V=pe=>{const Ve=lb();N(Ve),$({time:"12:00",title:"",description:"",category:"activity",estimatedCost:0})},D=pe=>{he.trim()&&Oe(pe,Ve=>({...Ve,title:he.trim()})),te(!1)},M=r.itinerary.flatMap(pe=>pe.activities??[]),j=M.reduce((pe,Ve)=>pe+(Ve.estimatedCost||0),0)*r.travelers,R=r.budget-j,A=R<0,ye=Math.min(100,r.budget>0?j/r.budget*100:0);if(r.itinerary.length===0)return _.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[_.jsx("div",{className:"w-16 h-16 bg-indigo-500/10 border border-indigo-500/20 rounded-2xl flex items-center justify-center mb-5",children:_.jsx("span",{className:"text-3xl",children:""})}),_.jsx("h3",{className:"text-xl font-semibold text-gray-200 mb-2",children:"No itinerary yet"}),_.jsx("p",{className:"text-gray-500 max-w-sm mb-6 leading-relaxed",children:o?"AI will create a personalized day-by-day schedule based on your destination, interests, and travel dates.":"Add activities manually using the button below, or set up your Perplexity API key to generate one with AI."}),y&&_.jsx("div",{className:"mb-5 text-sm text-red-300 bg-red-500/10 border border-red-500/20 rounded-xl px-4 py-3 max-w-sm",children:y}),o?_.jsxs("button",{onClick:Te,disabled:c,className:"flex items-center gap-2 px-6 py-3 bg-indigo-600 hover:bg-indigo-500 disabled:opacity-60 rounded-xl font-medium transition",children:[c?_.jsx(Wn,{className:"w-5 h-5 animate-spin"}):_.jsx(xl,{className:"w-5 h-5"}),c?"Generating itinerary":"Generate Itinerary"]}):_.jsxs("button",{onClick:a,className:"flex items-center gap-2 px-5 py-2.5 bg-gray-800 hover:bg-gray-700 border border-gray-700 rounded-xl text-sm text-gray-300 transition",children:[_.jsx(Ca,{className:"w-4 h-4"}),"Set up AI in Settings"]})]});const Ge=r.itinerary[T];return _.jsxs("div",{className:"space-y-4",children:[j>0&&_.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl px-5 py-4",children:[_.jsxs("div",{className:"flex items-center justify-between mb-2 text-sm",children:[_.jsx("span",{className:"text-gray-400 font-medium",children:"Provisional budget"}),_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsxs("span",{className:"text-gray-400",children:[_.jsxs("span",{className:"text-gray-200 font-semibold",children:[r.currency," ",j.toLocaleString()]}),_.jsxs("span",{className:"text-gray-600",children:[" / ",r.currency," ",r.budget.toLocaleString()]})]}),_.jsxs("span",{className:`text-xs font-medium px-2 py-0.5 rounded-full ${A?"bg-red-500/15 text-red-300 border border-red-500/25":"bg-emerald-500/15 text-emerald-300 border border-emerald-500/25"}`,children:[A?" ":" ",r.currency," ",Math.abs(R).toLocaleString()," ",A?"over":"left"]})]})]}),_.jsx("div",{className:"h-2 bg-gray-800 rounded-full overflow-hidden",children:_.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${A?"bg-red-500":ye>80?"bg-amber-500":"bg-emerald-500"}`,style:{width:`${ye}%`}})}),_.jsxs("p",{className:"text-xs text-gray-600 mt-1.5",children:["Based on ",M.filter(pe=>pe.estimatedCost>0).length," activities with cost estimates  ",r.travelers," traveler(s)"]})]}),_.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:gap-5",children:[_.jsxs("div",{className:"md:w-24 md:shrink-0",children:[_.jsxs("div",{className:"flex md:flex-col gap-1 overflow-x-auto md:overflow-visible scrollbar-hide pb-1 md:pb-0 md:space-y-1",children:[r.itinerary.map((pe,Ve)=>{const X=new Date(pe.date+"T12:00:00"),Ce=Ve===T;return _.jsxs("button",{onClick:()=>{k(Ve),N(null)},className:`shrink-0 md:w-full text-center px-3 md:px-2 py-2 md:py-2.5 rounded-xl transition ${Ce?"bg-indigo-600 text-white":"text-gray-400 hover:bg-gray-800 hover:text-gray-200"}`,children:[_.jsx("p",{className:"text-xs font-medium opacity-80",children:X.toLocaleDateString("en",{weekday:"short"})}),_.jsx("p",{className:"text-base md:text-xl font-bold leading-tight",children:X.getDate()}),_.jsx("p",{className:"text-xs opacity-60 hidden md:block",children:X.toLocaleDateString("en",{month:"short"})})]},pe.id)}),o?_.jsxs("button",{onClick:Te,disabled:c,className:"md:hidden shrink-0 flex flex-col items-center justify-center gap-0.5 px-3 py-2 text-gray-600 hover:text-gray-400 hover:bg-gray-800 rounded-xl transition",children:[c?_.jsx(Wn,{className:"w-3.5 h-3.5 animate-spin"}):_.jsx(xl,{className:"w-3.5 h-3.5"}),_.jsx("span",{className:"text-xs",children:"Regen"})]}):_.jsxs("button",{onClick:a,className:"md:hidden shrink-0 flex flex-col items-center justify-center gap-0.5 px-3 py-2 text-gray-700 hover:text-gray-500 hover:bg-gray-800 rounded-xl transition",title:"Set up AI key",children:[_.jsx(Ps,{className:"w-3.5 h-3.5"}),_.jsx("span",{className:"text-xs",children:"AI"})]})]}),o?_.jsxs("button",{onClick:Te,disabled:c,title:"Regenerate itinerary",className:"hidden md:flex w-full mt-1 p-2 text-xs text-gray-600 hover:text-gray-400 hover:bg-gray-800 rounded-xl transition items-center justify-center gap-1",children:[c?_.jsx(Wn,{className:"w-3.5 h-3.5 animate-spin"}):_.jsx(xl,{className:"w-3.5 h-3.5"}),"Regen"]}):_.jsxs("button",{onClick:a,title:"Set up Perplexity key to regenerate",className:"hidden md:flex w-full mt-1 p-2 text-xs text-gray-700 hover:text-gray-500 hover:bg-gray-800 rounded-xl transition items-center justify-center gap-1",children:[_.jsx(Ps,{className:"w-3.5 h-3.5"}),"Regen"]})]}),_.jsxs("div",{className:"flex-1 min-w-0",children:[_.jsxs("div",{className:"flex items-start justify-between mb-4",children:[_.jsxs("div",{className:"flex-1 min-w-0",children:[Z?_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("input",{value:he,onChange:pe=>_e(pe.target.value),onKeyDown:pe=>{pe.key==="Enter"&&D(Ge.id),pe.key==="Escape"&&te(!1)},className:"flex-1 bg-gray-800 border border-indigo-500 rounded-lg px-3 py-1.5 text-gray-100 text-base font-semibold focus:outline-none",autoFocus:!0}),_.jsx("button",{onClick:()=>D(Ge.id),className:"p-1.5 text-emerald-400 hover:bg-gray-800 rounded-lg transition",children:_.jsx(zh,{className:"w-4 h-4"})}),_.jsx("button",{onClick:()=>te(!1),className:"p-1.5 text-gray-500 hover:bg-gray-800 rounded-lg transition",children:_.jsx(Pl,{className:"w-4 h-4"})})]}):_.jsxs("button",{onClick:()=>{te(!0),_e(Ge.title)},className:"group flex items-center gap-2 text-left",children:[_.jsx("h3",{className:"text-lg font-semibold text-gray-100 group-hover:text-white",children:Ge.title}),_.jsx(V_,{className:"w-3.5 h-3.5 text-gray-600 group-hover:text-gray-400 opacity-0 group-hover:opacity-100 transition"})]}),_.jsx("p",{className:"text-sm text-gray-400 mt-0.5",children:new Date(Ge.date+"T12:00:00").toLocaleDateString("en",{weekday:"long",month:"long",day:"numeric"})})]}),(()=>{const pe=(Ge.activities??[]).reduce((Ve,X)=>Ve+(X.estimatedCost||0),0)*r.travelers;return pe>0?_.jsxs("span",{className:"text-xs text-gray-400 bg-gray-800 px-3 py-1.5 rounded-lg shrink-0 ml-3 font-medium",children:[r.currency," ",pe.toLocaleString()," est."]}):null})()]}),_.jsxs("div",{className:"space-y-2.5",children:[(Ge.activities??[]).map(pe=>{const{Icon:Ve,cls:X}=$y[pe.category]??$y.free;return C===pe.id?_.jsx(qy,{value:H,onChange:$,onSave:()=>ke(Ge.id),onCancel:()=>{N(null),$({})}},pe.id):_.jsxs("div",{className:"group flex gap-3 bg-gray-900 border border-gray-800 hover:border-gray-700 rounded-xl p-4 transition",children:[_.jsx("div",{className:`p-2 rounded-lg border shrink-0 ${X}`,children:_.jsx(Ve,{className:"w-4 h-4"})}),_.jsxs("div",{className:"flex-1 min-w-0",children:[_.jsxs("div",{className:"flex items-center gap-2 justify-between",children:[_.jsx("h4",{className:"font-medium text-gray-200 truncate",children:pe.title}),_.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[_.jsxs("span",{className:"text-xs text-gray-500 flex items-center gap-0.5 mr-1",children:[_.jsx(qI,{className:"w-3 h-3"}),pe.time]}),_.jsx("button",{onClick:()=>{N(pe.id),$({...pe})},className:"opacity-0 group-hover:opacity-100 p-1.5 text-gray-500 hover:text-indigo-400 hover:bg-gray-800 rounded-lg transition",title:"Edit activity",children:_.jsx(V_,{className:"w-3.5 h-3.5"})}),_.jsx("button",{onClick:()=>fe(Ge.id,pe.id),className:"opacity-0 group-hover:opacity-100 p-1.5 text-gray-500 hover:text-red-400 hover:bg-gray-800 rounded-lg transition",title:"Delete activity",children:_.jsx(Bh,{className:"w-3.5 h-3.5"})})]})]}),_.jsx("p",{className:"text-sm text-gray-400 mt-0.5 leading-relaxed",children:pe.description}),pe.estimatedCost>0&&_.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["~",r.currency,pe.estimatedCost," /person  ",r.currency,(pe.estimatedCost*r.travelers).toLocaleString()," total"]})]})]},pe.id)}),C&&!(Ge.activities??[]).find(pe=>pe.id===C)&&_.jsx(qy,{value:H,onChange:$,onSave:()=>ke(Ge.id),onCancel:()=>{N(null),$({})}}),!C&&_.jsxs("button",{onClick:()=>V(Ge.id),className:"w-full flex items-center justify-center gap-2 py-3 border border-dashed border-gray-700 hover:border-indigo-500/50 hover:bg-indigo-500/5 rounded-xl text-sm text-gray-500 hover:text-indigo-400 transition",children:[_.jsx($f,{className:"w-4 h-4"}),"Add activity"]})]}),y&&_.jsx("div",{className:"mt-4 text-sm text-red-300 bg-red-500/10 border border-red-500/20 rounded-xl px-4 py-3",children:y})]})]})]})}const cb={Documents:"",Clothing:"",Toiletries:"",Electronics:"","Health & Safety":"",Activities:"",Miscellaneous:""};function hb({trip:r,onGenerate:e,onUpdate:t,hasAiKey:o,onSettingsClick:a}){const[c,p]=le.useState(!1),[y,x]=le.useState(""),T=async()=>{p(!0),x("");try{await e(r)}catch(he){x(he instanceof Error?he.message:"Failed to generate packing list")}finally{p(!1)}},k=he=>{t({...r,packingList:r.packingList.map(_e=>_e.id===he?{..._e,packed:!_e.packed}:_e)})},C=()=>{t({...r,packingList:r.packingList.map(he=>({...he,packed:!0}))})},N=()=>{t({...r,packingList:r.packingList.map(he=>({...he,packed:!1}))})};if(r.packingList.length===0)return _.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[_.jsx("div",{className:"w-16 h-16 bg-indigo-500/10 border border-indigo-500/20 rounded-2xl flex items-center justify-center mb-5",children:_.jsx("span",{className:"text-3xl",children:""})}),_.jsx("h3",{className:"text-xl font-semibold text-gray-200 mb-2",children:"No packing list yet"}),_.jsx("p",{className:"text-gray-500 max-w-sm mb-6 leading-relaxed",children:o?"AI will create a smart, categorized packing list tailored to your destination, activities, and trip duration.":"Set up your Perplexity API key to generate a smart packing list with AI."}),y&&_.jsx("div",{className:"mb-5 text-sm text-red-300 bg-red-500/10 border border-red-500/20 rounded-xl px-4 py-3 max-w-sm",children:y}),o?_.jsxs("button",{onClick:T,disabled:c,className:"flex items-center gap-2 px-6 py-3 bg-indigo-600 hover:bg-indigo-500 disabled:opacity-60 rounded-xl font-medium transition",children:[c?_.jsx(Wn,{className:"w-5 h-5 animate-spin"}):_.jsx(xl,{className:"w-5 h-5"}),c?"Generating packing list":"Generate Packing List"]}):_.jsxs("button",{onClick:a,className:"flex items-center gap-2 px-5 py-2.5 bg-gray-800 hover:bg-gray-700 border border-gray-700 rounded-xl text-sm text-gray-300 transition",children:[_.jsx(Ca,{className:"w-4 h-4"}),"Set up AI in Settings"]})]});const H=r.packingList.filter(he=>he.packed).length,$=r.packingList.length,Z=$>0?Math.round(H/$*100):0,te=[...new Set(r.packingList.map(he=>he.category))];return _.jsxs("div",{className:"space-y-5",children:[_.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-5",children:[_.jsxs("div",{className:"flex items-center justify-between mb-3",children:[_.jsxs("div",{children:[_.jsx("h3",{className:"font-semibold text-gray-200",children:"Packing Progress"}),_.jsxs("p",{className:"text-sm text-gray-500 mt-0.5",children:[H," of ",$," items packed"]})]}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("button",{onClick:N,className:"text-xs text-gray-500 hover:text-gray-300 px-3 py-1.5 rounded-lg hover:bg-gray-800 transition",children:"Unpack all"}),_.jsx("button",{onClick:C,className:"text-xs text-indigo-400 hover:text-indigo-300 px-3 py-1.5 rounded-lg hover:bg-gray-800 transition",children:"Pack all"})]})]}),_.jsx("div",{className:"h-2 bg-gray-800 rounded-full overflow-hidden",children:_.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${Z===100?"bg-emerald-500":"bg-indigo-500"}`,style:{width:`${Z}%`}})}),_.jsxs("div",{className:"flex items-center justify-between mt-2",children:[_.jsxs("span",{className:"text-xs text-gray-500",children:[Z,"% packed"]}),Z===100&&_.jsx("span",{className:"text-xs text-emerald-400 font-medium",children:"All packed! "}),o?_.jsxs("button",{onClick:T,disabled:c,className:"text-xs text-gray-500 hover:text-indigo-400 flex items-center gap-1 transition",children:[c?_.jsx(Wn,{className:"w-3 h-3 animate-spin"}):_.jsx(xl,{className:"w-3 h-3"}),"Regenerate"]}):_.jsxs("button",{onClick:a,className:"text-xs text-gray-700 hover:text-gray-500 flex items-center gap-1 transition",title:"Set up Perplexity key to regenerate",children:[_.jsx(Ps,{className:"w-3 h-3"}),"Regenerate"]})]})]}),y&&_.jsx("div",{className:"text-sm text-red-300 bg-red-500/10 border border-red-500/20 rounded-xl px-4 py-3",children:y}),(()=>{const he=r.packingList.filter(_e=>_e.essential&&!_e.packed);return he.length>0?_.jsxs("div",{className:"flex items-start gap-3 bg-amber-500/10 border border-amber-500/20 rounded-xl p-4",children:[_.jsx(HI,{className:"w-4 h-4 text-amber-400 shrink-0 mt-0.5"}),_.jsxs("div",{children:[_.jsxs("p",{className:"text-sm font-medium text-amber-300",children:[he.length," essential item",he.length!==1?"s":""," not packed"]}),_.jsxs("p",{className:"text-xs text-amber-400/70 mt-0.5",children:[he.slice(0,3).map(_e=>_e.name).join(", "),he.length>3?` and ${he.length-3} more`:""]})]})]}):null})(),te.map(he=>{const _e=r.packingList.filter(ke=>ke.category===he),Te=_e.filter(ke=>ke.packed).length,Oe=cb[he]??"";return _.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl overflow-hidden",children:[_.jsxs("div",{className:"px-5 py-3 border-b border-gray-800 flex items-center justify-between",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("span",{className:"text-base",children:Oe}),_.jsx("h4",{className:"font-medium text-gray-300 text-sm",children:he})]}),_.jsxs("span",{className:"text-xs text-gray-500",children:[Te,"/",_e.length]})]}),_.jsx("div",{className:"divide-y divide-gray-800/50",children:_e.map(ke=>_.jsxs("button",{onClick:()=>k(ke.id),className:"w-full flex items-center gap-3 px-5 py-3 hover:bg-gray-800/50 transition text-left",children:[_.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center shrink-0 transition-colors ${ke.packed?"bg-indigo-600 border-indigo-600":"border-gray-600 hover:border-gray-400"}`,children:ke.packed&&_.jsx(zh,{className:"w-3 h-3 text-white",strokeWidth:3})}),_.jsx("span",{className:`flex-1 text-sm transition-colors ${ke.packed?"text-gray-600 line-through":"text-gray-200"}`,children:ke.name}),_.jsxs("div",{className:"flex items-center gap-1.5 shrink-0",children:[ke.quantity>1&&_.jsxs("span",{className:"text-xs text-gray-500",children:["",ke.quantity]}),ke.essential&&!ke.packed&&_.jsx("span",{className:"text-xs text-amber-400 bg-amber-500/10 border border-amber-500/20 px-1.5 py-0.5 rounded",children:"essential"})]})]},ke.id))})]},he)})]})}const db=["What are the must-try local foods?","Best way to get around the city?","What should I know about local customs?","Hidden gems most tourists miss?","Best time of day to visit popular sites?","Safety tips for this destination?"],fb="image/jpeg,image/png,image/webp,image/gif,application/pdf,text/plain,text/markdown",pb=4*1024*1024;function mh(){return Math.random().toString(36).slice(2,9)}async function mb(r){return r.size>pb?null:new Promise(e=>{const t=new FileReader;t.onload=()=>{const o=t.result,a=o.split(",")[1];e({id:mh(),name:r.name,mimeType:r.type||"application/octet-stream",dataBase64:a,previewUrl:r.type.startsWith("image/")?o:void 0,size:r.size})},t.onerror=()=>e(null),t.readAsDataURL(r)})}function gb({trip:r,perplexityKey:e,anthropicKey:t,hasAiKey:o,onSettingsClick:a,getChatHistory:c,saveChatHistory:p}){const[y,x]=le.useState([]),[T,k]=le.useState(""),[C,N]=le.useState(!1),[H,$]=le.useState([]),Z=le.useRef(null),te=le.useRef(null),he=le.useRef(null);le.useEffect(()=>{let fe=!1;return c(r.id).then(V=>{fe||x(V)}),()=>{fe=!0}},[r.id]),le.useEffect(()=>{var fe;(fe=Z.current)==null||fe.scrollIntoView({behavior:"smooth"})},[y]);const _e=async fe=>{if(!fe)return;const V=3-H.length,D=Array.from(fe).slice(0,V),M=await Promise.all(D.map(mb));$(z=>[...z,...M.filter(j=>j!==null)])},Te=fe=>$(V=>V.filter(D=>D.id!==fe)),Oe=async fe=>{var j;if(!fe.trim()&&H.length===0||C)return;const V=H.length?`${fe.trim()}${fe.trim()?`
`:""} ${H.map(R=>R.name).join(", ")}`:fe.trim(),D={id:mh(),role:"user",content:V,timestamp:new Date().toISOString()},M=[...y,D];x(M),k("");const z=[...H];$([]),N(!0),(j=te.current)==null||j.focus();try{const R=y.map(pe=>({role:pe.role,content:pe.content})),A=await YC(fe.trim()||"(see attached file)",R,r,e,t,z.length?z:void 0),ye={id:mh(),role:"assistant",content:A,timestamp:new Date().toISOString()},Ge=[...M,ye];x(Ge),await p(r.id,Ge)}catch(R){const A=R instanceof Error?R.message:"Something went wrong",ye={id:mh(),role:"assistant",content:`Sorry, I ran into an error: ${A}`,timestamp:new Date().toISOString()},Ge=[...M,ye];x(Ge),await p(r.id,Ge)}finally{N(!1)}},ke=async()=>{confirm("Clear chat history?")&&(x([]),await p(r.id,[]))};return o?_.jsxs("div",{className:"flex flex-col",style:{height:"calc(100dvh - 300px)",minHeight:"280px"},children:[_.jsxs("div",{className:"flex items-center justify-between pb-3 mb-3 border-b border-gray-800",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("div",{className:"w-7 h-7 bg-indigo-500/20 rounded-lg flex items-center justify-center",children:_.jsx(Jc,{className:"w-4 h-4 text-indigo-400"})}),_.jsx("span",{className:"text-sm font-medium text-gray-300",children:"AI Travel Assistant"}),_.jsx("span",{className:"text-xs text-emerald-400 bg-emerald-500/10 px-2 py-0.5 rounded-full",children:"Online"}),t&&_.jsx("span",{className:"text-xs text-indigo-300 bg-indigo-500/10 px-2 py-0.5 rounded-full",children:"Vision"})]}),y.length>0&&_.jsx("button",{onClick:ke,className:"p-1.5 text-gray-600 hover:text-gray-400 hover:bg-gray-800 rounded-lg transition",title:"Clear chat",children:_.jsx(Bh,{className:"w-4 h-4"})})]}),_.jsxs("div",{className:"flex-1 overflow-y-auto space-y-4",children:[y.length===0&&_.jsxs("div",{className:"flex flex-col items-center text-center pt-6 pb-4",children:[_.jsx("div",{className:"w-14 h-14 bg-indigo-500/10 border border-indigo-500/20 rounded-2xl flex items-center justify-center mb-3",children:_.jsx(Jc,{className:"w-7 h-7 text-indigo-400"})}),_.jsxs("p",{className:"font-medium text-gray-300 mb-1",children:["Ask me anything about ",r.destination]}),_.jsxs("p",{className:"text-sm text-gray-500 mb-5 max-w-sm",children:["I know your trip details, interests, and budget.",t?" Attach images or files for visual help.":" Let me help you plan the perfect experience."]}),_.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:db.map(fe=>_.jsx("button",{onClick:()=>Oe(fe),className:"text-sm text-indigo-300 bg-indigo-500/10 hover:bg-indigo-500/20 border border-indigo-500/20 hover:border-indigo-500/40 px-3 py-1.5 rounded-full transition",children:fe},fe))})]}),y.map(fe=>_.jsxs("div",{className:`flex gap-2.5 ${fe.role==="user"?"flex-row-reverse":"flex-row"}`,children:[_.jsx("div",{className:`w-7 h-7 rounded-lg flex items-center justify-center shrink-0 mt-0.5 ${fe.role==="assistant"?"bg-indigo-500/20":"bg-gray-700"}`,children:fe.role==="assistant"?_.jsx(Jc,{className:"w-3.5 h-3.5 text-indigo-400"}):_.jsx(sS,{className:"w-3.5 h-3.5 text-gray-300"})}),_.jsx("div",{className:`max-w-[78%] rounded-2xl px-4 py-3 text-sm leading-relaxed whitespace-pre-wrap ${fe.role==="user"?"bg-indigo-600 text-white rounded-tr-sm":"bg-gray-900 border border-gray-800 text-gray-200 rounded-tl-sm"}`,children:fe.content})]},fe.id)),C&&_.jsxs("div",{className:"flex gap-2.5",children:[_.jsx("div",{className:"w-7 h-7 rounded-lg bg-indigo-500/20 flex items-center justify-center shrink-0",children:_.jsx(Jc,{className:"w-3.5 h-3.5 text-indigo-400"})}),_.jsx("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl rounded-tl-sm px-4 py-3",children:_.jsxs("div",{className:"flex gap-1 items-center h-4",children:[_.jsx("span",{className:"w-1.5 h-1.5 bg-gray-500 rounded-full animate-bounce [animation-delay:0ms]"}),_.jsx("span",{className:"w-1.5 h-1.5 bg-gray-500 rounded-full animate-bounce [animation-delay:150ms]"}),_.jsx("span",{className:"w-1.5 h-1.5 bg-gray-500 rounded-full animate-bounce [animation-delay:300ms]"})]})})]}),_.jsx("div",{ref:Z})]}),H.length>0&&_.jsx("div",{className:"flex gap-2 pt-3 flex-wrap",children:H.map(fe=>_.jsxs("div",{className:"relative group",children:[fe.previewUrl?_.jsx("img",{src:fe.previewUrl,alt:fe.name,className:"w-14 h-14 rounded-lg object-cover border border-gray-700"}):_.jsxs("div",{className:"w-14 h-14 rounded-lg border border-gray-700 bg-gray-800 flex flex-col items-center justify-center gap-1 px-1",children:[_.jsx(Gv,{className:"w-5 h-5 text-gray-400 shrink-0"}),_.jsx("span",{className:"text-[9px] text-gray-500 truncate w-full text-center",children:fe.name})]}),_.jsx("button",{onClick:()=>Te(fe.id),className:"absolute -top-1.5 -right-1.5 w-4 h-4 bg-gray-900 border border-gray-600 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition",children:_.jsx(Pl,{className:"w-2.5 h-2.5 text-gray-300"})})]},fe.id))}),_.jsxs("div",{className:"pt-3 border-t border-gray-800 mt-3",children:[_.jsx("input",{ref:he,type:"file",accept:fb,multiple:!0,className:"hidden",onChange:fe=>_e(fe.target.files),onClick:fe=>{fe.target.value=""}}),_.jsxs("form",{onSubmit:fe=>{fe.preventDefault(),Oe(T)},className:"flex gap-2",children:[t&&_.jsx("button",{type:"button",onClick:()=>{var fe;return(fe=he.current)==null?void 0:fe.click()},disabled:C||H.length>=3,title:"Attach image or file (max 3)",className:"p-3 text-gray-500 hover:text-indigo-400 hover:bg-gray-800 disabled:opacity-30 disabled:cursor-not-allowed rounded-xl transition shrink-0",children:_.jsx(XI,{className:"w-5 h-5"})}),_.jsx("input",{ref:te,value:T,onChange:fe=>k(fe.target.value),placeholder:H.length?"Add a message or just send the file":`Ask about ${r.destination}...`,disabled:C,className:"flex-1 bg-gray-900 border border-gray-700 rounded-xl px-4 py-3 text-gray-100 placeholder-gray-600 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition disabled:opacity-50 text-sm"}),_.jsx("button",{type:"submit",disabled:!T.trim()&&H.length===0||C,className:"p-3 bg-indigo-600 hover:bg-indigo-500 disabled:opacity-40 disabled:cursor-not-allowed rounded-xl transition shrink-0",children:C?_.jsx(Wn,{className:"w-5 h-5 animate-spin"}):_.jsx(tS,{className:"w-5 h-5"})})]})]})]}):_.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[_.jsx("div",{className:"w-16 h-16 bg-gray-800 border border-gray-700 rounded-2xl flex items-center justify-center mb-5",children:_.jsx(Ps,{className:"w-7 h-7 text-gray-500"})}),_.jsx("h3",{className:"text-lg font-semibold text-gray-400 mb-2",children:"AI Chat unavailable"}),_.jsxs("p",{className:"text-gray-600 max-w-sm mb-6 leading-relaxed text-sm",children:["Add your Perplexity API key to chat with an AI assistant about your trip to ",r.destination,"."]}),_.jsxs("button",{onClick:a,className:"flex items-center gap-2 px-5 py-2.5 bg-gray-800 hover:bg-gray-700 border border-gray-700 rounded-xl text-sm text-gray-300 transition",children:[_.jsx(Ca,{className:"w-4 h-4"}),"Set up in Settings"]})]})}function Fw(r,e){const t=le.useRef(e);le.useEffect(function(){e!==t.current&&r.attributionControl!=null&&(t.current!=null&&r.attributionControl.removeAttribution(t.current),e!=null&&r.attributionControl.addAttribution(e)),t.current=e},[r,e])}var _b=Qy();const yb=1;function vb(r){return Object.freeze({__version:yb,map:r})}function wb(r,e){return Object.freeze({...r,...e})}const zw=le.createContext(null),Uw=zw.Provider;function pm(){const r=le.useContext(zw);if(r==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return r}function xb(r){function e(t,o){const{instance:a,context:c}=r(t).current;return le.useImperativeHandle(o,()=>a),t.children==null?null:Df.createElement(Uw,{value:c},t.children)}return le.forwardRef(e)}function Eb(r){function e(t,o){const[a,c]=le.useState(!1),{instance:p}=r(t,c).current;le.useImperativeHandle(o,()=>p),le.useEffect(function(){a&&p.update()},[p,a,t.children]);const y=p._contentNode;return y?_b.createPortal(t.children,y):null}return le.forwardRef(e)}function Tb(r){function e(t,o){const{instance:a}=r(t).current;return le.useImperativeHandle(o,()=>a),null}return le.forwardRef(e)}function Bw(r,e){const t=le.useRef();le.useEffect(function(){return e!=null&&r.instance.on(e),t.current=e,function(){t.current!=null&&r.instance.off(t.current),t.current=null}},[r,e])}function mm(r,e){const t=r.pane??e.pane;return t?{...r,pane:t}:r}function Ib(r,e){return function(o,a){const c=pm(),p=r(mm(o,c),c);return Fw(c.map,o.attribution),Bw(p.current,o.eventHandlers),e(p.current,c,o,a),p}}var Tu={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var Sb=Tu.exports,Gy;function Pb(){return Gy||(Gy=1,(function(r,e){(function(t,o){o(e)})(Sb,(function(t){var o="1.9.4";function a(i){var l,d,m,E;for(d=1,m=arguments.length;d<m;d++){E=arguments[d];for(l in E)i[l]=E[l]}return i}var c=Object.create||(function(){function i(){}return function(l){return i.prototype=l,new i}})();function p(i,l){var d=Array.prototype.slice;if(i.bind)return i.bind.apply(i,d.call(arguments,1));var m=d.call(arguments,2);return function(){return i.apply(l,m.length?m.concat(d.call(arguments)):arguments)}}var y=0;function x(i){return"_leaflet_id"in i||(i._leaflet_id=++y),i._leaflet_id}function T(i,l,d){var m,E,P,F;return F=function(){m=!1,E&&(P.apply(d,E),E=!1)},P=function(){m?E=arguments:(i.apply(d,arguments),setTimeout(F,l),m=!0)},P}function k(i,l,d){var m=l[1],E=l[0],P=m-E;return i===m&&d?i:((i-E)%P+P)%P+E}function C(){return!1}function N(i,l){if(l===!1)return i;var d=Math.pow(10,l===void 0?6:l);return Math.round(i*d)/d}function H(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}function $(i){return H(i).split(/\s+/)}function Z(i,l){Object.prototype.hasOwnProperty.call(i,"options")||(i.options=i.options?c(i.options):{});for(var d in l)i.options[d]=l[d];return i.options}function te(i,l,d){var m=[];for(var E in i)m.push(encodeURIComponent(d?E.toUpperCase():E)+"="+encodeURIComponent(i[E]));return(!l||l.indexOf("?")===-1?"?":"&")+m.join("&")}var he=/\{ *([\w_ -]+) *\}/g;function _e(i,l){return i.replace(he,function(d,m){var E=l[m];if(E===void 0)throw new Error("No value provided for variable "+d);return typeof E=="function"&&(E=E(l)),E})}var Te=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"};function Oe(i,l){for(var d=0;d<i.length;d++)if(i[d]===l)return d;return-1}var ke="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function fe(i){return window["webkit"+i]||window["moz"+i]||window["ms"+i]}var V=0;function D(i){var l=+new Date,d=Math.max(0,16-(l-V));return V=l+d,window.setTimeout(i,d)}var M=window.requestAnimationFrame||fe("RequestAnimationFrame")||D,z=window.cancelAnimationFrame||fe("CancelAnimationFrame")||fe("CancelRequestAnimationFrame")||function(i){window.clearTimeout(i)};function j(i,l,d){if(d&&M===D)i.call(l);else return M.call(window,p(i,l))}function R(i){i&&z.call(window,i)}var A={__proto__:null,extend:a,create:c,bind:p,get lastId(){return y},stamp:x,throttle:T,wrapNum:k,falseFn:C,formatNum:N,trim:H,splitWords:$,setOptions:Z,getParamString:te,template:_e,isArray:Te,indexOf:Oe,emptyImageUrl:ke,requestFn:M,cancelFn:z,requestAnimFrame:j,cancelAnimFrame:R};function ye(){}ye.extend=function(i){var l=function(){Z(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},d=l.__super__=this.prototype,m=c(d);m.constructor=l,l.prototype=m;for(var E in this)Object.prototype.hasOwnProperty.call(this,E)&&E!=="prototype"&&E!=="__super__"&&(l[E]=this[E]);return i.statics&&a(l,i.statics),i.includes&&(Ge(i.includes),a.apply(null,[m].concat(i.includes))),a(m,i),delete m.statics,delete m.includes,m.options&&(m.options=d.options?c(d.options):{},a(m.options,i.options)),m._initHooks=[],m.callInitHooks=function(){if(!this._initHooksCalled){d.callInitHooks&&d.callInitHooks.call(this),this._initHooksCalled=!0;for(var P=0,F=m._initHooks.length;P<F;P++)m._initHooks[P].call(this)}},l},ye.include=function(i){var l=this.prototype.options;return a(this.prototype,i),i.options&&(this.prototype.options=l,this.mergeOptions(i.options)),this},ye.mergeOptions=function(i){return a(this.prototype.options,i),this},ye.addInitHook=function(i){var l=Array.prototype.slice.call(arguments,1),d=typeof i=="function"?i:function(){this[i].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(d),this};function Ge(i){if(!(typeof L>"u"||!L||!L.Mixin)){i=Te(i)?i:[i];for(var l=0;l<i.length;l++)i[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var pe={on:function(i,l,d){if(typeof i=="object")for(var m in i)this._on(m,i[m],l);else{i=$(i);for(var E=0,P=i.length;E<P;E++)this._on(i[E],l,d)}return this},off:function(i,l,d){if(!arguments.length)delete this._events;else if(typeof i=="object")for(var m in i)this._off(m,i[m],l);else{i=$(i);for(var E=arguments.length===1,P=0,F=i.length;P<F;P++)E?this._off(i[P]):this._off(i[P],l,d)}return this},_on:function(i,l,d,m){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(i,l,d)===!1){d===this&&(d=void 0);var E={fn:l,ctx:d};m&&(E.once=!0),this._events=this._events||{},this._events[i]=this._events[i]||[],this._events[i].push(E)}},_off:function(i,l,d){var m,E,P;if(this._events&&(m=this._events[i],!!m)){if(arguments.length===1){if(this._firingCount)for(E=0,P=m.length;E<P;E++)m[E].fn=C;delete this._events[i];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var F=this._listens(i,l,d);if(F!==!1){var G=m[F];this._firingCount&&(G.fn=C,this._events[i]=m=m.slice()),m.splice(F,1)}}},fire:function(i,l,d){if(!this.listens(i,d))return this;var m=a({},l,{type:i,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var E=this._events[i];if(E){this._firingCount=this._firingCount+1||1;for(var P=0,F=E.length;P<F;P++){var G=E[P],J=G.fn;G.once&&this.off(i,J,G.ctx),J.call(G.ctx||this,m)}this._firingCount--}}return d&&this._propagateEvent(m),this},listens:function(i,l,d,m){typeof i!="string"&&console.warn('"string" type argument expected');var E=l;typeof l!="function"&&(m=!!l,E=void 0,d=void 0);var P=this._events&&this._events[i];if(P&&P.length&&this._listens(i,E,d)!==!1)return!0;if(m){for(var F in this._eventParents)if(this._eventParents[F].listens(i,l,d,m))return!0}return!1},_listens:function(i,l,d){if(!this._events)return!1;var m=this._events[i]||[];if(!l)return!!m.length;d===this&&(d=void 0);for(var E=0,P=m.length;E<P;E++)if(m[E].fn===l&&m[E].ctx===d)return E;return!1},once:function(i,l,d){if(typeof i=="object")for(var m in i)this._on(m,i[m],l,!0);else{i=$(i);for(var E=0,P=i.length;E<P;E++)this._on(i[E],l,d,!0)}return this},addEventParent:function(i){return this._eventParents=this._eventParents||{},this._eventParents[x(i)]=i,this},removeEventParent:function(i){return this._eventParents&&delete this._eventParents[x(i)],this},_propagateEvent:function(i){for(var l in this._eventParents)this._eventParents[l].fire(i.type,a({layer:i.target,propagatedFrom:i.target},i),!0)}};pe.addEventListener=pe.on,pe.removeEventListener=pe.clearAllEventListeners=pe.off,pe.addOneTimeEventListener=pe.once,pe.fireEvent=pe.fire,pe.hasEventListeners=pe.listens;var Ve=ye.extend(pe);function X(i,l,d){this.x=d?Math.round(i):i,this.y=d?Math.round(l):l}var Ce=Math.trunc||function(i){return i>0?Math.floor(i):Math.ceil(i)};X.prototype={clone:function(){return new X(this.x,this.y)},add:function(i){return this.clone()._add(se(i))},_add:function(i){return this.x+=i.x,this.y+=i.y,this},subtract:function(i){return this.clone()._subtract(se(i))},_subtract:function(i){return this.x-=i.x,this.y-=i.y,this},divideBy:function(i){return this.clone()._divideBy(i)},_divideBy:function(i){return this.x/=i,this.y/=i,this},multiplyBy:function(i){return this.clone()._multiplyBy(i)},_multiplyBy:function(i){return this.x*=i,this.y*=i,this},scaleBy:function(i){return new X(this.x*i.x,this.y*i.y)},unscaleBy:function(i){return new X(this.x/i.x,this.y/i.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Ce(this.x),this.y=Ce(this.y),this},distanceTo:function(i){i=se(i);var l=i.x-this.x,d=i.y-this.y;return Math.sqrt(l*l+d*d)},equals:function(i){return i=se(i),i.x===this.x&&i.y===this.y},contains:function(i){return i=se(i),Math.abs(i.x)<=Math.abs(this.x)&&Math.abs(i.y)<=Math.abs(this.y)},toString:function(){return"Point("+N(this.x)+", "+N(this.y)+")"}};function se(i,l,d){return i instanceof X?i:Te(i)?new X(i[0],i[1]):i==null?i:typeof i=="object"&&"x"in i&&"y"in i?new X(i.x,i.y):new X(i,l,d)}function B(i,l){if(i)for(var d=l?[i,l]:i,m=0,E=d.length;m<E;m++)this.extend(d[m])}B.prototype={extend:function(i){var l,d;if(!i)return this;if(i instanceof X||typeof i[0]=="number"||"x"in i)l=d=se(i);else if(i=ne(i),l=i.min,d=i.max,!l||!d)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=d.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(d.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(d.y,this.max.y)),this},getCenter:function(i){return se((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,i)},getBottomLeft:function(){return se(this.min.x,this.max.y)},getTopRight:function(){return se(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(i){var l,d;return typeof i[0]=="number"||i instanceof X?i=se(i):i=ne(i),i instanceof B?(l=i.min,d=i.max):l=d=i,l.x>=this.min.x&&d.x<=this.max.x&&l.y>=this.min.y&&d.y<=this.max.y},intersects:function(i){i=ne(i);var l=this.min,d=this.max,m=i.min,E=i.max,P=E.x>=l.x&&m.x<=d.x,F=E.y>=l.y&&m.y<=d.y;return P&&F},overlaps:function(i){i=ne(i);var l=this.min,d=this.max,m=i.min,E=i.max,P=E.x>l.x&&m.x<d.x,F=E.y>l.y&&m.y<d.y;return P&&F},isValid:function(){return!!(this.min&&this.max)},pad:function(i){var l=this.min,d=this.max,m=Math.abs(l.x-d.x)*i,E=Math.abs(l.y-d.y)*i;return ne(se(l.x-m,l.y-E),se(d.x+m,d.y+E))},equals:function(i){return i?(i=ne(i),this.min.equals(i.getTopLeft())&&this.max.equals(i.getBottomRight())):!1}};function ne(i,l){return!i||i instanceof B?i:new B(i,l)}function Me(i,l){if(i)for(var d=l?[i,l]:i,m=0,E=d.length;m<E;m++)this.extend(d[m])}Me.prototype={extend:function(i){var l=this._southWest,d=this._northEast,m,E;if(i instanceof Se)m=i,E=i;else if(i instanceof Me){if(m=i._southWest,E=i._northEast,!m||!E)return this}else return i?this.extend(we(i)||Ne(i)):this;return!l&&!d?(this._southWest=new Se(m.lat,m.lng),this._northEast=new Se(E.lat,E.lng)):(l.lat=Math.min(m.lat,l.lat),l.lng=Math.min(m.lng,l.lng),d.lat=Math.max(E.lat,d.lat),d.lng=Math.max(E.lng,d.lng)),this},pad:function(i){var l=this._southWest,d=this._northEast,m=Math.abs(l.lat-d.lat)*i,E=Math.abs(l.lng-d.lng)*i;return new Me(new Se(l.lat-m,l.lng-E),new Se(d.lat+m,d.lng+E))},getCenter:function(){return new Se((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Se(this.getNorth(),this.getWest())},getSouthEast:function(){return new Se(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(i){typeof i[0]=="number"||i instanceof Se||"lat"in i?i=we(i):i=Ne(i);var l=this._southWest,d=this._northEast,m,E;return i instanceof Me?(m=i.getSouthWest(),E=i.getNorthEast()):m=E=i,m.lat>=l.lat&&E.lat<=d.lat&&m.lng>=l.lng&&E.lng<=d.lng},intersects:function(i){i=Ne(i);var l=this._southWest,d=this._northEast,m=i.getSouthWest(),E=i.getNorthEast(),P=E.lat>=l.lat&&m.lat<=d.lat,F=E.lng>=l.lng&&m.lng<=d.lng;return P&&F},overlaps:function(i){i=Ne(i);var l=this._southWest,d=this._northEast,m=i.getSouthWest(),E=i.getNorthEast(),P=E.lat>l.lat&&m.lat<d.lat,F=E.lng>l.lng&&m.lng<d.lng;return P&&F},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(i,l){return i?(i=Ne(i),this._southWest.equals(i.getSouthWest(),l)&&this._northEast.equals(i.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Ne(i,l){return i instanceof Me?i:new Me(i,l)}function Se(i,l,d){if(isNaN(i)||isNaN(l))throw new Error("Invalid LatLng object: ("+i+", "+l+")");this.lat=+i,this.lng=+l,d!==void 0&&(this.alt=+d)}Se.prototype={equals:function(i,l){if(!i)return!1;i=we(i);var d=Math.max(Math.abs(this.lat-i.lat),Math.abs(this.lng-i.lng));return d<=(l===void 0?1e-9:l)},toString:function(i){return"LatLng("+N(this.lat,i)+", "+N(this.lng,i)+")"},distanceTo:function(i){return re.distance(this,we(i))},wrap:function(){return re.wrapLatLng(this)},toBounds:function(i){var l=180*i/40075017,d=l/Math.cos(Math.PI/180*this.lat);return Ne([this.lat-l,this.lng-d],[this.lat+l,this.lng+d])},clone:function(){return new Se(this.lat,this.lng,this.alt)}};function we(i,l,d){return i instanceof Se?i:Te(i)&&typeof i[0]!="object"?i.length===3?new Se(i[0],i[1],i[2]):i.length===2?new Se(i[0],i[1]):null:i==null?i:typeof i=="object"&&"lat"in i?new Se(i.lat,"lng"in i?i.lng:i.lon,i.alt):l===void 0?null:new Se(i,l,d)}var Xe={latLngToPoint:function(i,l){var d=this.projection.project(i),m=this.scale(l);return this.transformation._transform(d,m)},pointToLatLng:function(i,l){var d=this.scale(l),m=this.transformation.untransform(i,d);return this.projection.unproject(m)},project:function(i){return this.projection.project(i)},unproject:function(i){return this.projection.unproject(i)},scale:function(i){return 256*Math.pow(2,i)},zoom:function(i){return Math.log(i/256)/Math.LN2},getProjectedBounds:function(i){if(this.infinite)return null;var l=this.projection.bounds,d=this.scale(i),m=this.transformation.transform(l.min,d),E=this.transformation.transform(l.max,d);return new B(m,E)},infinite:!1,wrapLatLng:function(i){var l=this.wrapLng?k(i.lng,this.wrapLng,!0):i.lng,d=this.wrapLat?k(i.lat,this.wrapLat,!0):i.lat,m=i.alt;return new Se(d,l,m)},wrapLatLngBounds:function(i){var l=i.getCenter(),d=this.wrapLatLng(l),m=l.lat-d.lat,E=l.lng-d.lng;if(m===0&&E===0)return i;var P=i.getSouthWest(),F=i.getNorthEast(),G=new Se(P.lat-m,P.lng-E),J=new Se(F.lat-m,F.lng-E);return new Me(G,J)}},re=a({},Xe,{wrapLng:[-180,180],R:6371e3,distance:function(i,l){var d=Math.PI/180,m=i.lat*d,E=l.lat*d,P=Math.sin((l.lat-i.lat)*d/2),F=Math.sin((l.lng-i.lng)*d/2),G=P*P+Math.cos(m)*Math.cos(E)*F*F,J=2*Math.atan2(Math.sqrt(G),Math.sqrt(1-G));return this.R*J}}),qe=6378137,dt={R:qe,MAX_LATITUDE:85.0511287798,project:function(i){var l=Math.PI/180,d=this.MAX_LATITUDE,m=Math.max(Math.min(d,i.lat),-d),E=Math.sin(m*l);return new X(this.R*i.lng*l,this.R*Math.log((1+E)/(1-E))/2)},unproject:function(i){var l=180/Math.PI;return new Se((2*Math.atan(Math.exp(i.y/this.R))-Math.PI/2)*l,i.x*l/this.R)},bounds:(function(){var i=qe*Math.PI;return new B([-i,-i],[i,i])})()};function gn(i,l,d,m){if(Te(i)){this._a=i[0],this._b=i[1],this._c=i[2],this._d=i[3];return}this._a=i,this._b=l,this._c=d,this._d=m}gn.prototype={transform:function(i,l){return this._transform(i.clone(),l)},_transform:function(i,l){return l=l||1,i.x=l*(this._a*i.x+this._b),i.y=l*(this._c*i.y+this._d),i},untransform:function(i,l){return l=l||1,new X((i.x/l-this._b)/this._a,(i.y/l-this._d)/this._c)}};function jt(i,l,d,m){return new gn(i,l,d,m)}var Nn=a({},re,{code:"EPSG:3857",projection:dt,transformation:(function(){var i=.5/(Math.PI*dt.R);return jt(i,.5,-i,.5)})()}),di=a({},Nn,{code:"EPSG:900913"});function fi(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function Kr(i,l){var d="",m,E,P,F,G,J;for(m=0,P=i.length;m<P;m++){for(G=i[m],E=0,F=G.length;E<F;E++)J=G[E],d+=(E?"L":"M")+J.x+" "+J.y;d+=l?be.svg?"z":"x":""}return d||"M0 0"}var or=document.documentElement.style,ar="ActiveXObject"in window,kt=ar&&!document.addEventListener,Ct="msLaunchUri"in navigator&&!("documentMode"in document),Rn=Bt("webkit"),Ds=Bt("android"),Ms=Bt("android 2")||Bt("android 3"),Ra=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),pi=Ds&&Bt("Google")&&Ra<537&&!("AudioNode"in window),$i=!!window.opera,qi=!Ct&&Bt("chrome"),Zr=Bt("gecko")&&!Rn&&!$i&&!ar,La=!qi&&Bt("safari"),mi=Bt("phantom"),Qr="OTransition"in or,Da=navigator.platform.indexOf("Win")===0,Yr=ar&&"transition"in or,gi="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Ms,Os="MozPerspective"in or,lr=!window.L_DISABLE_3D&&(Yr||gi||Os)&&!Qr&&!mi,wr=typeof orientation<"u"||Bt("mobile"),_i=wr&&Rn,js=wr&&gi,xr=!window.PointerEvent&&window.MSPointerEvent,Er=!!(window.PointerEvent||xr),It="ontouchstart"in window||!!window.TouchEvent,Uo=!window.L_NO_TOUCH&&(It||Er),yi=wr&&$i,vi=wr&&Zr,Ma=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Oa=(function(){var i=!1;try{var l=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("testPassiveEventSupport",C,l),window.removeEventListener("testPassiveEventSupport",C,l)}catch{}return i})(),Tr=(function(){return!!document.createElement("canvas").getContext})(),Vs=!!(document.createElementNS&&fi("svg").createSVGRect),Gi=!!Vs&&(function(){var i=document.createElement("div");return i.innerHTML="<svg/>",(i.firstChild&&i.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),wi=!Vs&&(function(){try{var i=document.createElement("div");i.innerHTML='<v:shape adj="1"/>';var l=i.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}})(),xi=navigator.platform.indexOf("Mac")===0,ja=navigator.platform.indexOf("Linux")===0;function Bt(i){return navigator.userAgent.toLowerCase().indexOf(i)>=0}var be={ie:ar,ielt9:kt,edge:Ct,webkit:Rn,android:Ds,android23:Ms,androidStock:pi,opera:$i,chrome:qi,gecko:Zr,safari:La,phantom:mi,opera12:Qr,win:Da,ie3d:Yr,webkit3d:gi,gecko3d:Os,any3d:lr,mobile:wr,mobileWebkit:_i,mobileWebkit3d:js,msPointer:xr,pointer:Er,touch:Uo,touchNative:It,mobileOpera:yi,mobileGecko:vi,retina:Ma,passiveEvents:Oa,canvas:Tr,svg:Vs,vml:wi,inlineSvg:Gi,mac:xi,linux:ja},Ki=be.msPointer?"MSPointerDown":"pointerdown",Ln=be.msPointer?"MSPointerMove":"pointermove",Bo=be.msPointer?"MSPointerUp":"pointerup",Ho=be.msPointer?"MSPointerCancel":"pointercancel",Zi={touchstart:Ki,touchmove:Ln,touchend:Bo,touchcancel:Ho},qn={touchstart:wt,touchmove:Gn,touchend:Gn,touchcancel:Gn},Ir={},Wo=!1;function Va(i,l,d){return l==="touchstart"&&Ji(),qn[l]?(d=qn[l].bind(this,d),i.addEventListener(Zi[l],d,!1),d):(console.warn("wrong event specified:",l),C)}function Fa(i,l,d){if(!Zi[l]){console.warn("wrong event specified:",l);return}i.removeEventListener(Zi[l],d,!1)}function Qi(i){Ir[i.pointerId]=i}function $o(i){Ir[i.pointerId]&&(Ir[i.pointerId]=i)}function Yi(i){delete Ir[i.pointerId]}function Ji(){Wo||(document.addEventListener(Ki,Qi,!0),document.addEventListener(Ln,$o,!0),document.addEventListener(Bo,Yi,!0),document.addEventListener(Ho,Yi,!0),Wo=!0)}function Gn(i,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var d in Ir)l.touches.push(Ir[d]);l.changedTouches=[l],i(l)}}function wt(i,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&xt(l),Gn(i,l)}function Bl(i){var l={},d,m;for(m in i)d=i[m],l[m]=d&&d.bind?d.bind(i):d;return i=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var Fs=200;function qo(i,l){i.addEventListener("dblclick",l);var d=0,m;function E(P){if(P.detail!==1){m=P.detail;return}if(!(P.pointerType==="mouse"||P.sourceCapabilities&&!P.sourceCapabilities.firesTouchEvents)){var F=br(P);if(!(F.some(function(J){return J instanceof HTMLLabelElement&&J.attributes.for})&&!F.some(function(J){return J instanceof HTMLInputElement||J instanceof HTMLSelectElement}))){var G=Date.now();G-d<=Fs?(m++,m===2&&l(Bl(P))):m=1,d=G}}}return i.addEventListener("click",E),{dblclick:l,simDblclick:E}}function Xi(i,l){i.removeEventListener("dblclick",l.dblclick),i.removeEventListener("click",l.simDblclick)}var es=Ii(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Sr=Ii(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ei=Sr==="webkitTransition"||Sr==="OTransition"?Sr+"End":"transitionend";function _n(i){return typeof i=="string"?document.getElementById(i):i}function Ti(i,l){var d=i.style[l]||i.currentStyle&&i.currentStyle[l];if((!d||d==="auto")&&document.defaultView){var m=document.defaultView.getComputedStyle(i,null);d=m?m[l]:null}return d==="auto"?null:d}function Ze(i,l,d){var m=document.createElement(i);return m.className=l||"",d&&d.appendChild(m),m}function lt(i){var l=i.parentNode;l&&l.removeChild(i)}function ln(i){for(;i.firstChild;)i.removeChild(i.firstChild)}function Kn(i){var l=i.parentNode;l&&l.lastChild!==i&&l.appendChild(i)}function un(i){var l=i.parentNode;l&&l.firstChild!==i&&l.insertBefore(i,l.firstChild)}function Pr(i,l){if(i.classList!==void 0)return i.classList.contains(l);var d=kr(i);return d.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(d)}function Ee(i,l){if(i.classList!==void 0)for(var d=$(l),m=0,E=d.length;m<E;m++)i.classList.add(d[m]);else if(!Pr(i,l)){var P=kr(i);Jr(i,(P?P+" ":"")+l)}}function mt(i,l){i.classList!==void 0?i.classList.remove(l):Jr(i,H((" "+kr(i)+" ").replace(" "+l+" "," ")))}function Jr(i,l){i.className.baseVal===void 0?i.className=l:i.className.baseVal=l}function kr(i){return i.correspondingElement&&(i=i.correspondingElement),i.className.baseVal===void 0?i.className:i.className.baseVal}function tn(i,l){"opacity"in i.style?i.style.opacity=l:"filter"in i.style&&Go(i,l)}function Go(i,l){var d=!1,m="DXImageTransform.Microsoft.Alpha";try{d=i.filters.item(m)}catch{if(l===1)return}l=Math.round(l*100),d?(d.Enabled=l!==100,d.Opacity=l):i.style.filter+=" progid:"+m+"(opacity="+l+")"}function Ii(i){for(var l=document.documentElement.style,d=0;d<i.length;d++)if(i[d]in l)return i[d];return!1}function Dn(i,l,d){var m=l||new X(0,0);i.style[es]=(be.ie3d?"translate("+m.x+"px,"+m.y+"px)":"translate3d("+m.x+"px,"+m.y+"px,0)")+(d?" scale("+d+")":"")}function bt(i,l){i._leaflet_pos=l,be.any3d?Dn(i,l):(i.style.left=l.x+"px",i.style.top=l.y+"px")}function ur(i){return i._leaflet_pos||new X(0,0)}var tt,yn,ts;if("onselectstart"in document)tt=function(){ze(window,"selectstart",xt)},yn=function(){gt(window,"selectstart",xt)};else{var Cr=Ii(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);tt=function(){if(Cr){var i=document.documentElement.style;ts=i[Cr],i[Cr]="none"}},yn=function(){Cr&&(document.documentElement.style[Cr]=ts,ts=void 0)}}function ns(){ze(window,"dragstart",xt)}function rs(){gt(window,"dragstart",xt)}var Si,Zn;function Pi(i){for(;i.tabIndex===-1;)i=i.parentNode;i.style&&(Mn(),Si=i,Zn=i.style.outlineStyle,i.style.outlineStyle="none",ze(window,"keydown",Mn))}function Mn(){Si&&(Si.style.outlineStyle=Zn,Si=void 0,Zn=void 0,gt(window,"keydown",Mn))}function cr(i){do i=i.parentNode;while((!i.offsetWidth||!i.offsetHeight)&&i!==document.body);return i}function Vt(i){var l=i.getBoundingClientRect();return{x:l.width/i.offsetWidth||1,y:l.height/i.offsetHeight||1,boundingClientRect:l}}var is={__proto__:null,TRANSFORM:es,TRANSITION:Sr,TRANSITION_END:Ei,get:_n,getStyle:Ti,create:Ze,remove:lt,empty:ln,toFront:Kn,toBack:un,hasClass:Pr,addClass:Ee,removeClass:mt,setClass:Jr,getClass:kr,setOpacity:tn,testProp:Ii,setTransform:Dn,setPosition:bt,getPosition:ur,get disableTextSelection(){return tt},get enableTextSelection(){return yn},disableImageDrag:ns,enableImageDrag:rs,preventOutline:Pi,restoreOutline:Mn,getSizedParentNode:cr,getScale:Vt};function ze(i,l,d,m){if(l&&typeof l=="object")for(var E in l)zs(i,E,l[E],d);else{l=$(l);for(var P=0,F=l.length;P<F;P++)zs(i,l[P],d,m)}return this}var At="_leaflet_events";function gt(i,l,d,m){if(arguments.length===1)Xr(i),delete i[At];else if(l&&typeof l=="object")for(var E in l)ki(i,E,l[E],d);else if(l=$(l),arguments.length===2)Xr(i,function(G){return Oe(l,G)!==-1});else for(var P=0,F=l.length;P<F;P++)ki(i,l[P],d,m);return this}function Xr(i,l){for(var d in i[At]){var m=d.split(/\d/)[0];(!l||l(m))&&ki(i,m,null,null,d)}}var On={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function zs(i,l,d,m){var E=l+x(d)+(m?"_"+x(m):"");if(i[At]&&i[At][E])return this;var P=function(G){return d.call(m||i,G||window.event)},F=P;!be.touchNative&&be.pointer&&l.indexOf("touch")===0?P=Va(i,l,P):be.touch&&l==="dblclick"?P=qo(i,P):"addEventListener"in i?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?i.addEventListener(On[l]||l,P,be.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(P=function(G){G=G||window.event,os(i,G)&&F(G)},i.addEventListener(On[l],P,!1)):i.addEventListener(l,F,!1):i.attachEvent("on"+l,P),i[At]=i[At]||{},i[At][E]=P}function ki(i,l,d,m,E){E=E||l+x(d)+(m?"_"+x(m):"");var P=i[At]&&i[At][E];if(!P)return this;!be.touchNative&&be.pointer&&l.indexOf("touch")===0?Fa(i,l,P):be.touch&&l==="dblclick"?Xi(i,P):"removeEventListener"in i?i.removeEventListener(On[l]||l,P,!1):i.detachEvent("on"+l,P),i[At][E]=null}function at(i){return i.stopPropagation?i.stopPropagation():i.originalEvent?i.originalEvent._stopped=!0:i.cancelBubble=!0,this}function Us(i){return zs(i,"wheel",at),this}function ss(i){return ze(i,"mousedown touchstart dblclick contextmenu",at),i._leaflet_disable_click=!0,this}function xt(i){return i.preventDefault?i.preventDefault():i.returnValue=!1,this}function vn(i){return xt(i),at(i),this}function br(i){if(i.composedPath)return i.composedPath();for(var l=[],d=i.target;d;)l.push(d),d=d.parentNode;return l}function Ar(i,l){if(!l)return new X(i.clientX,i.clientY);var d=Vt(l),m=d.boundingClientRect;return new X((i.clientX-m.left)/d.x-l.clientLeft,(i.clientY-m.top)/d.y-l.clientTop)}var Nr=be.linux&&be.chrome?window.devicePixelRatio:be.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Ko(i){return be.edge?i.wheelDeltaY/2:i.deltaY&&i.deltaMode===0?-i.deltaY/Nr:i.deltaY&&i.deltaMode===1?-i.deltaY*20:i.deltaY&&i.deltaMode===2?-i.deltaY*60:i.deltaX||i.deltaZ?0:i.wheelDelta?(i.wheelDeltaY||i.wheelDelta)/2:i.detail&&Math.abs(i.detail)<32765?-i.detail*20:i.detail?i.detail/-32765*60:0}function os(i,l){var d=l.relatedTarget;if(!d)return!0;try{for(;d&&d!==i;)d=d.parentNode}catch{return!1}return d!==i}var Rr={__proto__:null,on:ze,off:gt,stopPropagation:at,disableScrollPropagation:Us,disableClickPropagation:ss,preventDefault:xt,stop:vn,getPropagationPath:br,getMousePosition:Ar,getWheelDelta:Ko,isExternalTarget:os,addListener:ze,removeListener:gt},as=Ve.extend({run:function(i,l,d,m){this.stop(),this._el=i,this._inProgress=!0,this._duration=d||.25,this._easeOutPower=1/Math.max(m||.5,.2),this._startPos=ur(i),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=j(this._animate,this),this._step()},_step:function(i){var l=+new Date-this._startTime,d=this._duration*1e3;l<d?this._runFrame(this._easeOut(l/d),i):(this._runFrame(1),this._complete())},_runFrame:function(i,l){var d=this._startPos.add(this._offset.multiplyBy(i));l&&d._round(),bt(this._el,d),this.fire("step")},_complete:function(){R(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(i){return 1-Math.pow(1-i,this._easeOutPower)}}),nt=Ve.extend({options:{crs:Nn,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(i,l){l=Z(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(i),this._initLayout(),this._onResize=p(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(we(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Sr&&be.any3d&&!be.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ze(this._proxy,Ei,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(i,l,d){if(l=l===void 0?this._zoom:this._limitZoom(l),i=this._limitCenter(we(i),l,this.options.maxBounds),d=d||{},this._stop(),this._loaded&&!d.reset&&d!==!0){d.animate!==void 0&&(d.zoom=a({animate:d.animate},d.zoom),d.pan=a({animate:d.animate,duration:d.duration},d.pan));var m=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(i,l,d.zoom):this._tryAnimatedPan(i,d.pan);if(m)return clearTimeout(this._sizeTimer),this}return this._resetView(i,l,d.pan&&d.pan.noMoveStart),this},setZoom:function(i,l){return this._loaded?this.setView(this.getCenter(),i,{zoom:l}):(this._zoom=i,this)},zoomIn:function(i,l){return i=i||(be.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+i,l)},zoomOut:function(i,l){return i=i||(be.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-i,l)},setZoomAround:function(i,l,d){var m=this.getZoomScale(l),E=this.getSize().divideBy(2),P=i instanceof X?i:this.latLngToContainerPoint(i),F=P.subtract(E).multiplyBy(1-1/m),G=this.containerPointToLatLng(E.add(F));return this.setView(G,l,{zoom:d})},_getBoundsCenterZoom:function(i,l){l=l||{},i=i.getBounds?i.getBounds():Ne(i);var d=se(l.paddingTopLeft||l.padding||[0,0]),m=se(l.paddingBottomRight||l.padding||[0,0]),E=this.getBoundsZoom(i,!1,d.add(m));if(E=typeof l.maxZoom=="number"?Math.min(l.maxZoom,E):E,E===1/0)return{center:i.getCenter(),zoom:E};var P=m.subtract(d).divideBy(2),F=this.project(i.getSouthWest(),E),G=this.project(i.getNorthEast(),E),J=this.unproject(F.add(G).divideBy(2).add(P),E);return{center:J,zoom:E}},fitBounds:function(i,l){if(i=Ne(i),!i.isValid())throw new Error("Bounds are not valid.");var d=this._getBoundsCenterZoom(i,l);return this.setView(d.center,d.zoom,l)},fitWorld:function(i){return this.fitBounds([[-90,-180],[90,180]],i)},panTo:function(i,l){return this.setView(i,this._zoom,{pan:l})},panBy:function(i,l){if(i=se(i).round(),l=l||{},!i.x&&!i.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(i))return this._resetView(this.unproject(this.project(this.getCenter()).add(i)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new as,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){Ee(this._mapPane,"leaflet-pan-anim");var d=this._getMapPanePos().subtract(i).round();this._panAnim.run(this._mapPane,d,l.duration||.25,l.easeLinearity)}else this._rawPanBy(i),this.fire("move").fire("moveend");return this},flyTo:function(i,l,d){if(d=d||{},d.animate===!1||!be.any3d)return this.setView(i,l,d);this._stop();var m=this.project(this.getCenter()),E=this.project(i),P=this.getSize(),F=this._zoom;i=we(i),l=l===void 0?F:l;var G=Math.max(P.x,P.y),J=G*this.getZoomScale(F,l),ae=E.distanceTo(m)||1,xe=1.42,Fe=xe*xe;function et(_t){var oo=_t?-1:1,cd=_t?J:G,hd=J*J-G*G+oo*Fe*Fe*ae*ae,fs=2*cd*Fe*ae,ps=hd/fs,ms=Math.sqrt(ps*ps+1)-ps,Ya=ms<1e-9?-18:Math.log(ms);return Ya}function Yt(_t){return(Math.exp(_t)-Math.exp(-_t))/2}function Wt(_t){return(Math.exp(_t)+Math.exp(-_t))/2}function Un(_t){return Yt(_t)/Wt(_t)}var En=et(0);function io(_t){return G*(Wt(En)/Wt(En+xe*_t))}function eu(_t){return G*(Wt(En)*Un(En+xe*_t)-Yt(En))/Fe}function Di(_t){return 1-Math.pow(1-_t,1.5)}var hc=Date.now(),ds=(et(1)-En)/xe,Fr=d.duration?1e3*d.duration:1e3*ds*.8;function so(){var _t=(Date.now()-hc)/Fr,oo=Di(_t)*ds;_t<=1?(this._flyToFrame=j(so,this),this._move(this.unproject(m.add(E.subtract(m).multiplyBy(eu(oo)/ae)),F),this.getScaleZoom(G/io(oo),F),{flyTo:!0})):this._move(i,l)._moveEnd(!0)}return this._moveStart(!0,d.noMoveStart),so.call(this),this},flyToBounds:function(i,l){var d=this._getBoundsCenterZoom(i,l);return this.flyTo(d.center,d.zoom,l)},setMaxBounds:function(i){return i=Ne(i),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),i.isValid()?(this.options.maxBounds=i,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(i){var l=this.options.minZoom;return this.options.minZoom=i,this._loaded&&l!==i&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(i):this},setMaxZoom:function(i){var l=this.options.maxZoom;return this.options.maxZoom=i,this._loaded&&l!==i&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(i):this},panInsideBounds:function(i,l){this._enforcingBounds=!0;var d=this.getCenter(),m=this._limitCenter(d,this._zoom,Ne(i));return d.equals(m)||this.panTo(m,l),this._enforcingBounds=!1,this},panInside:function(i,l){l=l||{};var d=se(l.paddingTopLeft||l.padding||[0,0]),m=se(l.paddingBottomRight||l.padding||[0,0]),E=this.project(this.getCenter()),P=this.project(i),F=this.getPixelBounds(),G=ne([F.min.add(d),F.max.subtract(m)]),J=G.getSize();if(!G.contains(P)){this._enforcingBounds=!0;var ae=P.subtract(G.getCenter()),xe=G.extend(P).getSize().subtract(J);E.x+=ae.x<0?-xe.x:xe.x,E.y+=ae.y<0?-xe.y:xe.y,this.panTo(this.unproject(E),l),this._enforcingBounds=!1}return this},invalidateSize:function(i){if(!this._loaded)return this;i=a({animate:!1,pan:!0},i===!0?{animate:!0}:i);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var d=this.getSize(),m=l.divideBy(2).round(),E=d.divideBy(2).round(),P=m.subtract(E);return!P.x&&!P.y?this:(i.animate&&i.pan?this.panBy(P):(i.pan&&this._rawPanBy(P),this.fire("move"),i.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(p(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:d}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(i){if(i=this._locateOptions=a({timeout:1e4,watch:!1},i),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=p(this._handleGeolocationResponse,this),d=p(this._handleGeolocationError,this);return i.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,d,i):navigator.geolocation.getCurrentPosition(l,d,i),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(i){if(this._container._leaflet_id){var l=i.code,d=i.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+d+"."})}},_handleGeolocationResponse:function(i){if(this._container._leaflet_id){var l=i.coords.latitude,d=i.coords.longitude,m=new Se(l,d),E=m.toBounds(i.coords.accuracy*2),P=this._locateOptions;if(P.setView){var F=this.getBoundsZoom(E);this.setView(m,P.maxZoom?Math.min(F,P.maxZoom):F)}var G={latlng:m,bounds:E,timestamp:i.timestamp};for(var J in i.coords)typeof i.coords[J]=="number"&&(G[J]=i.coords[J]);this.fire("locationfound",G)}},addHandler:function(i,l){if(!l)return this;var d=this[i]=new l(this);return this._handlers.push(d),this.options[i]&&d.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),lt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(R(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var i;for(i in this._layers)this._layers[i].remove();for(i in this._panes)lt(this._panes[i]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(i,l){var d="leaflet-pane"+(i?" leaflet-"+i.replace("Pane","")+"-pane":""),m=Ze("div",d,l||this._mapPane);return i&&(this._panes[i]=m),m},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var i=this.getPixelBounds(),l=this.unproject(i.getBottomLeft()),d=this.unproject(i.getTopRight());return new Me(l,d)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(i,l,d){i=Ne(i),d=se(d||[0,0]);var m=this.getZoom()||0,E=this.getMinZoom(),P=this.getMaxZoom(),F=i.getNorthWest(),G=i.getSouthEast(),J=this.getSize().subtract(d),ae=ne(this.project(G,m),this.project(F,m)).getSize(),xe=be.any3d?this.options.zoomSnap:1,Fe=J.x/ae.x,et=J.y/ae.y,Yt=l?Math.max(Fe,et):Math.min(Fe,et);return m=this.getScaleZoom(Yt,m),xe&&(m=Math.round(m/(xe/100))*(xe/100),m=l?Math.ceil(m/xe)*xe:Math.floor(m/xe)*xe),Math.max(E,Math.min(P,m))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new X(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(i,l){var d=this._getTopLeftPoint(i,l);return new B(d,d.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(i){return this.options.crs.getProjectedBounds(i===void 0?this.getZoom():i)},getPane:function(i){return typeof i=="string"?this._panes[i]:i},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(i,l){var d=this.options.crs;return l=l===void 0?this._zoom:l,d.scale(i)/d.scale(l)},getScaleZoom:function(i,l){var d=this.options.crs;l=l===void 0?this._zoom:l;var m=d.zoom(i*d.scale(l));return isNaN(m)?1/0:m},project:function(i,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(we(i),l)},unproject:function(i,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(se(i),l)},layerPointToLatLng:function(i){var l=se(i).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(i){var l=this.project(we(i))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(i){return this.options.crs.wrapLatLng(we(i))},wrapLatLngBounds:function(i){return this.options.crs.wrapLatLngBounds(Ne(i))},distance:function(i,l){return this.options.crs.distance(we(i),we(l))},containerPointToLayerPoint:function(i){return se(i).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(i){return se(i).add(this._getMapPanePos())},containerPointToLatLng:function(i){var l=this.containerPointToLayerPoint(se(i));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(i){return this.layerPointToContainerPoint(this.latLngToLayerPoint(we(i)))},mouseEventToContainerPoint:function(i){return Ar(i,this._container)},mouseEventToLayerPoint:function(i){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(i))},mouseEventToLatLng:function(i){return this.layerPointToLatLng(this.mouseEventToLayerPoint(i))},_initContainer:function(i){var l=this._container=_n(i);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ze(l,"scroll",this._onScroll,this),this._containerId=x(l)},_initLayout:function(){var i=this._container;this._fadeAnimated=this.options.fadeAnimation&&be.any3d,Ee(i,"leaflet-container"+(be.touch?" leaflet-touch":"")+(be.retina?" leaflet-retina":"")+(be.ielt9?" leaflet-oldie":"")+(be.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=Ti(i,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(i.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var i=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),bt(this._mapPane,new X(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Ee(i.markerPane,"leaflet-zoom-hide"),Ee(i.shadowPane,"leaflet-zoom-hide"))},_resetView:function(i,l,d){bt(this._mapPane,new X(0,0));var m=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var E=this._zoom!==l;this._moveStart(E,d)._move(i,l)._moveEnd(E),this.fire("viewreset"),m&&this.fire("load")},_moveStart:function(i,l){return i&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(i,l,d,m){l===void 0&&(l=this._zoom);var E=this._zoom!==l;return this._zoom=l,this._lastCenter=i,this._pixelOrigin=this._getNewPixelOrigin(i),m?d&&d.pinch&&this.fire("zoom",d):((E||d&&d.pinch)&&this.fire("zoom",d),this.fire("move",d)),this},_moveEnd:function(i){return i&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return R(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(i){bt(this._mapPane,this._getMapPanePos().subtract(i))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(i){this._targets={},this._targets[x(this._container)]=this;var l=i?gt:ze;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),be.any3d&&this.options.transform3DLimit&&(i?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){R(this._resizeRequest),this._resizeRequest=j(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var i=this._getMapPanePos();Math.max(Math.abs(i.x),Math.abs(i.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(i,l){for(var d=[],m,E=l==="mouseout"||l==="mouseover",P=i.target||i.srcElement,F=!1;P;){if(m=this._targets[x(P)],m&&(l==="click"||l==="preclick")&&this._draggableMoved(m)){F=!0;break}if(m&&m.listens(l,!0)&&(E&&!os(P,i)||(d.push(m),E))||P===this._container)break;P=P.parentNode}return!d.length&&!F&&!E&&this.listens(l,!0)&&(d=[this]),d},_isClickDisabled:function(i){for(;i&&i!==this._container;){if(i._leaflet_disable_click)return!0;i=i.parentNode}},_handleDOMEvent:function(i){var l=i.target||i.srcElement;if(!(!this._loaded||l._leaflet_disable_events||i.type==="click"&&this._isClickDisabled(l))){var d=i.type;d==="mousedown"&&Pi(l),this._fireDOMEvent(i,d)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(i,l,d){if(i.type==="click"){var m=a({},i);m.type="preclick",this._fireDOMEvent(m,m.type,d)}var E=this._findEventTargets(i,l);if(d){for(var P=[],F=0;F<d.length;F++)d[F].listens(l,!0)&&P.push(d[F]);E=P.concat(E)}if(E.length){l==="contextmenu"&&xt(i);var G=E[0],J={originalEvent:i};if(i.type!=="keypress"&&i.type!=="keydown"&&i.type!=="keyup"){var ae=G.getLatLng&&(!G._radius||G._radius<=10);J.containerPoint=ae?this.latLngToContainerPoint(G.getLatLng()):this.mouseEventToContainerPoint(i),J.layerPoint=this.containerPointToLayerPoint(J.containerPoint),J.latlng=ae?G.getLatLng():this.layerPointToLatLng(J.layerPoint)}for(F=0;F<E.length;F++)if(E[F].fire(l,J,!0),J.originalEvent._stopped||E[F].options.bubblingMouseEvents===!1&&Oe(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(i){return i=i.dragging&&i.dragging.enabled()?i:this,i.dragging&&i.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var i=0,l=this._handlers.length;i<l;i++)this._handlers[i].disable()},whenReady:function(i,l){return this._loaded?i.call(l||this,{target:this}):this.on("load",i,l),this},_getMapPanePos:function(){return ur(this._mapPane)||new X(0,0)},_moved:function(){var i=this._getMapPanePos();return i&&!i.equals([0,0])},_getTopLeftPoint:function(i,l){var d=i&&l!==void 0?this._getNewPixelOrigin(i,l):this.getPixelOrigin();return d.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(i,l){var d=this.getSize()._divideBy(2);return this.project(i,l)._subtract(d)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(i,l,d){var m=this._getNewPixelOrigin(d,l);return this.project(i,l)._subtract(m)},_latLngBoundsToNewLayerBounds:function(i,l,d){var m=this._getNewPixelOrigin(d,l);return ne([this.project(i.getSouthWest(),l)._subtract(m),this.project(i.getNorthWest(),l)._subtract(m),this.project(i.getSouthEast(),l)._subtract(m),this.project(i.getNorthEast(),l)._subtract(m)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(i){return this.latLngToLayerPoint(i).subtract(this._getCenterLayerPoint())},_limitCenter:function(i,l,d){if(!d)return i;var m=this.project(i,l),E=this.getSize().divideBy(2),P=new B(m.subtract(E),m.add(E)),F=this._getBoundsOffset(P,d,l);return Math.abs(F.x)<=1&&Math.abs(F.y)<=1?i:this.unproject(m.add(F),l)},_limitOffset:function(i,l){if(!l)return i;var d=this.getPixelBounds(),m=new B(d.min.add(i),d.max.add(i));return i.add(this._getBoundsOffset(m,l))},_getBoundsOffset:function(i,l,d){var m=ne(this.project(l.getNorthEast(),d),this.project(l.getSouthWest(),d)),E=m.min.subtract(i.min),P=m.max.subtract(i.max),F=this._rebound(E.x,-P.x),G=this._rebound(E.y,-P.y);return new X(F,G)},_rebound:function(i,l){return i+l>0?Math.round(i-l)/2:Math.max(0,Math.ceil(i))-Math.max(0,Math.floor(l))},_limitZoom:function(i){var l=this.getMinZoom(),d=this.getMaxZoom(),m=be.any3d?this.options.zoomSnap:1;return m&&(i=Math.round(i/m)*m),Math.max(l,Math.min(d,i))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){mt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(i,l){var d=this._getCenterOffset(i)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(d)?!1:(this.panBy(d,l),!0)},_createAnimProxy:function(){var i=this._proxy=Ze("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(i),this.on("zoomanim",function(l){var d=es,m=this._proxy.style[d];Dn(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),m===this._proxy.style[d]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){lt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var i=this.getCenter(),l=this.getZoom();Dn(this._proxy,this.project(i,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(i){this._animatingZoom&&i.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(i,l,d){if(this._animatingZoom)return!0;if(d=d||{},!this._zoomAnimated||d.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var m=this.getZoomScale(l),E=this._getCenterOffset(i)._divideBy(1-1/m);return d.animate!==!0&&!this.getSize().contains(E)?!1:(j(function(){this._moveStart(!0,d.noMoveStart||!1)._animateZoom(i,l,!0)},this),!0)},_animateZoom:function(i,l,d,m){this._mapPane&&(d&&(this._animatingZoom=!0,this._animateToCenter=i,this._animateToZoom=l,Ee(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:i,zoom:l,noUpdate:m}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(p(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&mt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function jn(i,l){return new nt(i,l)}var nn=ye.extend({options:{position:"topright"},initialize:function(i){Z(this,i)},getPosition:function(){return this.options.position},setPosition:function(i){var l=this._map;return l&&l.removeControl(this),this.options.position=i,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(i){this.remove(),this._map=i;var l=this._container=this.onAdd(i),d=this.getPosition(),m=i._controlCorners[d];return Ee(l,"leaflet-control"),d.indexOf("bottom")!==-1?m.insertBefore(l,m.firstChild):m.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(lt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(i){this._map&&i&&i.screenX>0&&i.screenY>0&&this._map.getContainer().focus()}}),Vn=function(i){return new nn(i)};nt.include({addControl:function(i){return i.addTo(this),this},removeControl:function(i){return i.remove(),this},_initControlPos:function(){var i=this._controlCorners={},l="leaflet-",d=this._controlContainer=Ze("div",l+"control-container",this._container);function m(E,P){var F=l+E+" "+l+P;i[E+P]=Ze("div",F,d)}m("top","left"),m("top","right"),m("bottom","left"),m("bottom","right")},_clearControlPos:function(){for(var i in this._controlCorners)lt(this._controlCorners[i]);lt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Zo=nn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(i,l,d,m){return d<m?-1:m<d?1:0}},initialize:function(i,l,d){Z(this,d),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var m in i)this._addLayer(i[m],m);for(m in l)this._addLayer(l[m],m,!0)},onAdd:function(i){this._initLayout(),this._update(),this._map=i,i.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(i){return nn.prototype.addTo.call(this,i),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(i,l){return this._addLayer(i,l),this._map?this._update():this},addOverlay:function(i,l){return this._addLayer(i,l,!0),this._map?this._update():this},removeLayer:function(i){i.off("add remove",this._onLayerChange,this);var l=this._getLayer(x(i));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){Ee(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var i=this._map.getSize().y-(this._container.offsetTop+50);return i<this._section.clientHeight?(Ee(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=i+"px"):mt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return mt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var i="leaflet-control-layers",l=this._container=Ze("div",i),d=this.options.collapsed;l.setAttribute("aria-haspopup",!0),ss(l),Us(l);var m=this._section=Ze("section",i+"-list");d&&(this._map.on("click",this.collapse,this),ze(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var E=this._layersLink=Ze("a",i+"-toggle",l);E.href="#",E.title="Layers",E.setAttribute("role","button"),ze(E,{keydown:function(P){P.keyCode===13&&this._expandSafely()},click:function(P){xt(P),this._expandSafely()}},this),d||this.expand(),this._baseLayersList=Ze("div",i+"-base",m),this._separator=Ze("div",i+"-separator",m),this._overlaysList=Ze("div",i+"-overlays",m),l.appendChild(m)},_getLayer:function(i){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&x(this._layers[l].layer)===i)return this._layers[l]},_addLayer:function(i,l,d){this._map&&i.on("add remove",this._onLayerChange,this),this._layers.push({layer:i,name:l,overlay:d}),this.options.sortLayers&&this._layers.sort(p(function(m,E){return this.options.sortFunction(m.layer,E.layer,m.name,E.name)},this)),this.options.autoZIndex&&i.setZIndex&&(this._lastZIndex++,i.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ln(this._baseLayersList),ln(this._overlaysList),this._layerControlInputs=[];var i,l,d,m,E=0;for(d=0;d<this._layers.length;d++)m=this._layers[d],this._addItem(m),l=l||m.overlay,i=i||!m.overlay,E+=m.overlay?0:1;return this.options.hideSingleBase&&(i=i&&E>1,this._baseLayersList.style.display=i?"":"none"),this._separator.style.display=l&&i?"":"none",this},_onLayerChange:function(i){this._handlingClick||this._update();var l=this._getLayer(x(i.target)),d=l.overlay?i.type==="add"?"overlayadd":"overlayremove":i.type==="add"?"baselayerchange":null;d&&this._map.fire(d,l)},_createRadioElement:function(i,l){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+i+'"'+(l?' checked="checked"':"")+"/>",m=document.createElement("div");return m.innerHTML=d,m.firstChild},_addItem:function(i){var l=document.createElement("label"),d=this._map.hasLayer(i.layer),m;i.overlay?(m=document.createElement("input"),m.type="checkbox",m.className="leaflet-control-layers-selector",m.defaultChecked=d):m=this._createRadioElement("leaflet-base-layers_"+x(this),d),this._layerControlInputs.push(m),m.layerId=x(i.layer),ze(m,"click",this._onInputClick,this);var E=document.createElement("span");E.innerHTML=" "+i.name;var P=document.createElement("span");l.appendChild(P),P.appendChild(m),P.appendChild(E);var F=i.overlay?this._overlaysList:this._baseLayersList;return F.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var i=this._layerControlInputs,l,d,m=[],E=[];this._handlingClick=!0;for(var P=i.length-1;P>=0;P--)l=i[P],d=this._getLayer(l.layerId).layer,l.checked?m.push(d):l.checked||E.push(d);for(P=0;P<E.length;P++)this._map.hasLayer(E[P])&&this._map.removeLayer(E[P]);for(P=0;P<m.length;P++)this._map.hasLayer(m[P])||this._map.addLayer(m[P]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var i=this._layerControlInputs,l,d,m=this._map.getZoom(),E=i.length-1;E>=0;E--)l=i[E],d=this._getLayer(l.layerId).layer,l.disabled=d.options.minZoom!==void 0&&m<d.options.minZoom||d.options.maxZoom!==void 0&&m>d.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var i=this._section;this._preventClick=!0,ze(i,"click",xt),this.expand();var l=this;setTimeout(function(){gt(i,"click",xt),l._preventClick=!1})}}),ls=function(i,l,d){return new Zo(i,l,d)},Qn=nn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(i){var l="leaflet-control-zoom",d=Ze("div",l+" leaflet-bar"),m=this.options;return this._zoomInButton=this._createButton(m.zoomInText,m.zoomInTitle,l+"-in",d,this._zoomIn),this._zoomOutButton=this._createButton(m.zoomOutText,m.zoomOutTitle,l+"-out",d,this._zoomOut),this._updateDisabled(),i.on("zoomend zoomlevelschange",this._updateDisabled,this),d},onRemove:function(i){i.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(i){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(i.shiftKey?3:1))},_zoomOut:function(i){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(i.shiftKey?3:1))},_createButton:function(i,l,d,m,E){var P=Ze("a",d,m);return P.innerHTML=i,P.href="#",P.title=l,P.setAttribute("role","button"),P.setAttribute("aria-label",l),ss(P),ze(P,"click",vn),ze(P,"click",E,this),ze(P,"click",this._refocusOnMap,this),P},_updateDisabled:function(){var i=this._map,l="leaflet-disabled";mt(this._zoomInButton,l),mt(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||i._zoom===i.getMinZoom())&&(Ee(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||i._zoom===i.getMaxZoom())&&(Ee(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});nt.mergeOptions({zoomControl:!0}),nt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Qn,this.addControl(this.zoomControl))});var Qo=function(i){return new Qn(i)},Qt=nn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(i){var l="leaflet-control-scale",d=Ze("div",l),m=this.options;return this._addScales(m,l+"-line",d),i.on(m.updateWhenIdle?"moveend":"move",this._update,this),i.whenReady(this._update,this),d},onRemove:function(i){i.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(i,l,d){i.metric&&(this._mScale=Ze("div",l,d)),i.imperial&&(this._iScale=Ze("div",l,d))},_update:function(){var i=this._map,l=i.getSize().y/2,d=i.distance(i.containerPointToLatLng([0,l]),i.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(d)},_updateScales:function(i){this.options.metric&&i&&this._updateMetric(i),this.options.imperial&&i&&this._updateImperial(i)},_updateMetric:function(i){var l=this._getRoundNum(i),d=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,d,l/i)},_updateImperial:function(i){var l=i*3.2808399,d,m,E;l>5280?(d=l/5280,m=this._getRoundNum(d),this._updateScale(this._iScale,m+" mi",m/d)):(E=this._getRoundNum(l),this._updateScale(this._iScale,E+" ft",E/l))},_updateScale:function(i,l,d){i.style.width=Math.round(this.options.maxWidth*d)+"px",i.innerHTML=l},_getRoundNum:function(i){var l=Math.pow(10,(Math.floor(i)+"").length-1),d=i/l;return d=d>=10?10:d>=5?5:d>=3?3:d>=2?2:1,l*d}}),Lr=function(i){return new Qt(i)},us='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Dr=nn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(be.inlineSvg?us+" ":"")+"Leaflet</a>"},initialize:function(i){Z(this,i),this._attributions={}},onAdd:function(i){i.attributionControl=this,this._container=Ze("div","leaflet-control-attribution"),ss(this._container);for(var l in i._layers)i._layers[l].getAttribution&&this.addAttribution(i._layers[l].getAttribution());return this._update(),i.on("layeradd",this._addAttribution,this),this._container},onRemove:function(i){i.off("layeradd",this._addAttribution,this)},_addAttribution:function(i){i.layer.getAttribution&&(this.addAttribution(i.layer.getAttribution()),i.layer.once("remove",function(){this.removeAttribution(i.layer.getAttribution())},this))},setPrefix:function(i){return this.options.prefix=i,this._update(),this},addAttribution:function(i){return i?(this._attributions[i]||(this._attributions[i]=0),this._attributions[i]++,this._update(),this):this},removeAttribution:function(i){return i?(this._attributions[i]&&(this._attributions[i]--,this._update()),this):this},_update:function(){if(this._map){var i=[];for(var l in this._attributions)this._attributions[l]&&i.push(l);var d=[];this.options.prefix&&d.push(this.options.prefix),i.length&&d.push(i.join(", ")),this._container.innerHTML=d.join(' <span aria-hidden="true">|</span> ')}}});nt.mergeOptions({attributionControl:!0}),nt.addInitHook(function(){this.options.attributionControl&&new Dr().addTo(this)});var Bs=function(i){return new Dr(i)};nn.Layers=Zo,nn.Zoom=Qn,nn.Scale=Qt,nn.Attribution=Dr,Vn.layers=ls,Vn.zoom=Qo,Vn.scale=Lr,Vn.attribution=Bs;var cn=ye.extend({initialize:function(i){this._map=i},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});cn.addTo=function(i,l){return i.addHandler(l,this),this};var Hs={Events:pe},wn=be.touch?"touchstart mousedown":"mousedown",xn=Ve.extend({options:{clickTolerance:3},initialize:function(i,l,d,m){Z(this,m),this._element=i,this._dragStartTarget=l||i,this._preventOutline=d},enable:function(){this._enabled||(ze(this._dragStartTarget,wn,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(xn._dragging===this&&this.finishDrag(!0),gt(this._dragStartTarget,wn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(i){if(this._enabled&&(this._moved=!1,!Pr(this._element,"leaflet-zoom-anim"))){if(i.touches&&i.touches.length!==1){xn._dragging===this&&this.finishDrag();return}if(!(xn._dragging||i.shiftKey||i.which!==1&&i.button!==1&&!i.touches)&&(xn._dragging=this,this._preventOutline&&Pi(this._element),ns(),tt(),!this._moving)){this.fire("down");var l=i.touches?i.touches[0]:i,d=cr(this._element);this._startPoint=new X(l.clientX,l.clientY),this._startPos=ur(this._element),this._parentScale=Vt(d);var m=i.type==="mousedown";ze(document,m?"mousemove":"touchmove",this._onMove,this),ze(document,m?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(i){if(this._enabled){if(i.touches&&i.touches.length>1){this._moved=!0;return}var l=i.touches&&i.touches.length===1?i.touches[0]:i,d=new X(l.clientX,l.clientY)._subtract(this._startPoint);!d.x&&!d.y||Math.abs(d.x)+Math.abs(d.y)<this.options.clickTolerance||(d.x/=this._parentScale.x,d.y/=this._parentScale.y,xt(i),this._moved||(this.fire("dragstart"),this._moved=!0,Ee(document.body,"leaflet-dragging"),this._lastTarget=i.target||i.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Ee(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(d),this._moving=!0,this._lastEvent=i,this._updatePosition())}},_updatePosition:function(){var i={originalEvent:this._lastEvent};this.fire("predrag",i),bt(this._element,this._newPos),this.fire("drag",i)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(i){mt(document.body,"leaflet-dragging"),this._lastTarget&&(mt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),gt(document,"mousemove touchmove",this._onMove,this),gt(document,"mouseup touchend touchcancel",this._onUp,this),rs(),yn();var l=this._moved&&this._moving;this._moving=!1,xn._dragging=!1,l&&this.fire("dragend",{noInertia:i,distance:this._newPos.distanceTo(this._startPos)})}});function Ws(i,l,d){var m,E=[1,4,2,8],P,F,G,J,ae,xe,Fe,et;for(P=0,xe=i.length;P<xe;P++)i[P]._code=Y(i[P],l);for(G=0;G<4;G++){for(Fe=E[G],m=[],P=0,xe=i.length,F=xe-1;P<xe;F=P++)J=i[P],ae=i[F],J._code&Fe?ae._code&Fe||(et=q(ae,J,Fe,l,d),et._code=Y(et,l),m.push(et)):(ae._code&Fe&&(et=q(ae,J,Fe,l,d),et._code=Y(et,l),m.push(et)),m.push(J));i=m}return i}function Yo(i,l){var d,m,E,P,F,G,J,ae,xe;if(!i||i.length===0)throw new Error("latlngs not passed");ut(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var Fe=we([0,0]),et=Ne(i),Yt=et.getNorthWest().distanceTo(et.getSouthWest())*et.getNorthEast().distanceTo(et.getNorthWest());Yt<1700&&(Fe=$s(i));var Wt=i.length,Un=[];for(d=0;d<Wt;d++){var En=we(i[d]);Un.push(l.project(we([En.lat-Fe.lat,En.lng-Fe.lng])))}for(G=J=ae=0,d=0,m=Wt-1;d<Wt;m=d++)E=Un[d],P=Un[m],F=E.y*P.x-P.y*E.x,J+=(E.x+P.x)*F,ae+=(E.y+P.y)*F,G+=F*3;G===0?xe=Un[0]:xe=[J/G,ae/G];var io=l.unproject(se(xe));return we([io.lat+Fe.lat,io.lng+Fe.lng])}function $s(i){for(var l=0,d=0,m=0,E=0;E<i.length;E++){var P=we(i[E]);l+=P.lat,d+=P.lng,m++}return we([l/m,d/m])}var qs={__proto__:null,clipPolygon:Ws,polygonCenter:Yo,centroid:$s};function Ht(i,l){if(!l||!i.length)return i.slice();var d=l*l;return i=w(i,d),i=Ci(i,d),i}function Jo(i,l,d){return Math.sqrt(He(i,l,d,!0))}function za(i,l,d){return He(i,l,d)}function Ci(i,l){var d=i.length,m=typeof Uint8Array<"u"?Uint8Array:Array,E=new m(d);E[0]=E[d-1]=1,h(i,E,l,0,d-1);var P,F=[];for(P=0;P<d;P++)E[P]&&F.push(i[P]);return F}function h(i,l,d,m,E){var P=0,F,G,J;for(G=m+1;G<=E-1;G++)J=He(i[G],i[m],i[E],!0),J>P&&(F=G,P=J);P>d&&(l[F]=1,h(i,l,d,m,F),h(i,l,d,F,E))}function w(i,l){for(var d=[i[0]],m=1,E=0,P=i.length;m<P;m++)ge(i[m],i[E])>l&&(d.push(i[m]),E=m);return E<P-1&&d.push(i[P-1]),d}var I;function b(i,l,d,m,E){var P=m?I:Y(i,d),F=Y(l,d),G,J,ae;for(I=F;;){if(!(P|F))return[i,l];if(P&F)return!1;G=P||F,J=q(i,l,G,d,E),ae=Y(J,d),G===P?(i=J,P=ae):(l=J,F=ae)}}function q(i,l,d,m,E){var P=l.x-i.x,F=l.y-i.y,G=m.min,J=m.max,ae,xe;return d&8?(ae=i.x+P*(J.y-i.y)/F,xe=J.y):d&4?(ae=i.x+P*(G.y-i.y)/F,xe=G.y):d&2?(ae=J.x,xe=i.y+F*(J.x-i.x)/P):d&1&&(ae=G.x,xe=i.y+F*(G.x-i.x)/P),new X(ae,xe,E)}function Y(i,l){var d=0;return i.x<l.min.x?d|=1:i.x>l.max.x&&(d|=2),i.y<l.min.y?d|=4:i.y>l.max.y&&(d|=8),d}function ge(i,l){var d=l.x-i.x,m=l.y-i.y;return d*d+m*m}function He(i,l,d,m){var E=l.x,P=l.y,F=d.x-E,G=d.y-P,J=F*F+G*G,ae;return J>0&&(ae=((i.x-E)*F+(i.y-P)*G)/J,ae>1?(E=d.x,P=d.y):ae>0&&(E+=F*ae,P+=G*ae)),F=i.x-E,G=i.y-P,m?F*F+G*G:new X(E,P)}function ut(i){return!Te(i[0])||typeof i[0][0]!="object"&&typeof i[0][0]<"u"}function ft(i){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),ut(i)}function Rt(i,l){var d,m,E,P,F,G,J,ae;if(!i||i.length===0)throw new Error("latlngs not passed");ut(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var xe=we([0,0]),Fe=Ne(i),et=Fe.getNorthWest().distanceTo(Fe.getSouthWest())*Fe.getNorthEast().distanceTo(Fe.getNorthWest());et<1700&&(xe=$s(i));var Yt=i.length,Wt=[];for(d=0;d<Yt;d++){var Un=we(i[d]);Wt.push(l.project(we([Un.lat-xe.lat,Un.lng-xe.lng])))}for(d=0,m=0;d<Yt-1;d++)m+=Wt[d].distanceTo(Wt[d+1])/2;if(m===0)ae=Wt[0];else for(d=0,P=0;d<Yt-1;d++)if(F=Wt[d],G=Wt[d+1],E=F.distanceTo(G),P+=E,P>m){J=(P-m)/E,ae=[G.x-J*(G.x-F.x),G.y-J*(G.y-F.y)];break}var En=l.unproject(se(ae));return we([En.lat+xe.lat,En.lng+xe.lng])}var Fn={__proto__:null,simplify:Ht,pointToSegmentDistance:Jo,closestPointOnSegment:za,clipSegment:b,_getEdgeIntersection:q,_getBitCode:Y,_sqClosestPointOnSegment:He,isFlat:ut,_flat:ft,polylineCenter:Rt},hr={project:function(i){return new X(i.lng,i.lat)},unproject:function(i){return new Se(i.y,i.x)},bounds:new B([-180,-90],[180,90])},Yn={R:6378137,R_MINOR:6356752314245179e-9,bounds:new B([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(i){var l=Math.PI/180,d=this.R,m=i.lat*l,E=this.R_MINOR/d,P=Math.sqrt(1-E*E),F=P*Math.sin(m),G=Math.tan(Math.PI/4-m/2)/Math.pow((1-F)/(1+F),P/2);return m=-d*Math.log(Math.max(G,1e-10)),new X(i.lng*l*d,m)},unproject:function(i){for(var l=180/Math.PI,d=this.R,m=this.R_MINOR/d,E=Math.sqrt(1-m*m),P=Math.exp(-i.y/d),F=Math.PI/2-2*Math.atan(P),G=0,J=.1,ae;G<15&&Math.abs(J)>1e-7;G++)ae=E*Math.sin(F),ae=Math.pow((1-ae)/(1+ae),E/2),J=Math.PI/2-2*Math.atan(P*ae)-F,F+=J;return new Se(F*l,i.x*l/d)}},Mr={__proto__:null,LonLat:hr,Mercator:Yn,SphericalMercator:dt},Gs=a({},re,{code:"EPSG:3395",projection:Yn,transformation:(function(){var i=.5/(Math.PI*Yn.R);return jt(i,.5,-i,.5)})()}),Ks=a({},re,{code:"EPSG:4326",projection:hr,transformation:jt(1/180,1,-1/180,.5)}),sd=a({},Xe,{projection:hr,transformation:jt(1,0,-1,0),scale:function(i){return Math.pow(2,i)},zoom:function(i){return Math.log(i)/Math.LN2},distance:function(i,l){var d=l.lng-i.lng,m=l.lat-i.lat;return Math.sqrt(d*d+m*m)},infinite:!0});Xe.Earth=re,Xe.EPSG3395=Gs,Xe.EPSG3857=Nn,Xe.EPSG900913=di,Xe.EPSG4326=Ks,Xe.Simple=sd;var dr=Ve.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(i){return i.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(i){return i&&i.removeLayer(this),this},getPane:function(i){return this._map.getPane(i?this.options[i]||i:this.options.pane)},addInteractiveTarget:function(i){return this._map._targets[x(i)]=this,this},removeInteractiveTarget:function(i){return delete this._map._targets[x(i)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(i){var l=i.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var d=this.getEvents();l.on(d,this),this.once("remove",function(){l.off(d,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});nt.include({addLayer:function(i){if(!i._layerAdd)throw new Error("The provided object is not a Layer.");var l=x(i);return this._layers[l]?this:(this._layers[l]=i,i._mapToAdd=this,i.beforeAdd&&i.beforeAdd(this),this.whenReady(i._layerAdd,i),this)},removeLayer:function(i){var l=x(i);return this._layers[l]?(this._loaded&&i.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:i}),i.fire("remove")),i._map=i._mapToAdd=null,this):this},hasLayer:function(i){return x(i)in this._layers},eachLayer:function(i,l){for(var d in this._layers)i.call(l,this._layers[d]);return this},_addLayers:function(i){i=i?Te(i)?i:[i]:[];for(var l=0,d=i.length;l<d;l++)this.addLayer(i[l])},_addZoomLimit:function(i){(!isNaN(i.options.maxZoom)||!isNaN(i.options.minZoom))&&(this._zoomBoundLayers[x(i)]=i,this._updateZoomLevels())},_removeZoomLimit:function(i){var l=x(i);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var i=1/0,l=-1/0,d=this._getZoomSpan();for(var m in this._zoomBoundLayers){var E=this._zoomBoundLayers[m].options;i=E.minZoom===void 0?i:Math.min(i,E.minZoom),l=E.maxZoom===void 0?l:Math.max(l,E.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=i===1/0?void 0:i,d!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var bi=dr.extend({initialize:function(i,l){Z(this,l),this._layers={};var d,m;if(i)for(d=0,m=i.length;d<m;d++)this.addLayer(i[d])},addLayer:function(i){var l=this.getLayerId(i);return this._layers[l]=i,this._map&&this._map.addLayer(i),this},removeLayer:function(i){var l=i in this._layers?i:this.getLayerId(i);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(i){var l=typeof i=="number"?i:this.getLayerId(i);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(i){var l=Array.prototype.slice.call(arguments,1),d,m;for(d in this._layers)m=this._layers[d],m[i]&&m[i].apply(m,l);return this},onAdd:function(i){this.eachLayer(i.addLayer,i)},onRemove:function(i){this.eachLayer(i.removeLayer,i)},eachLayer:function(i,l){for(var d in this._layers)i.call(l,this._layers[d]);return this},getLayer:function(i){return this._layers[i]},getLayers:function(){var i=[];return this.eachLayer(i.push,i),i},setZIndex:function(i){return this.invoke("setZIndex",i)},getLayerId:function(i){return x(i)}}),Xo=function(i,l){return new bi(i,l)},ei=bi.extend({addLayer:function(i){return this.hasLayer(i)?this:(i.addEventParent(this),bi.prototype.addLayer.call(this,i),this.fire("layeradd",{layer:i}))},removeLayer:function(i){return this.hasLayer(i)?(i in this._layers&&(i=this._layers[i]),i.removeEventParent(this),bi.prototype.removeLayer.call(this,i),this.fire("layerremove",{layer:i})):this},setStyle:function(i){return this.invoke("setStyle",i)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var i=new Me;for(var l in this._layers){var d=this._layers[l];i.extend(d.getBounds?d.getBounds():d.getLatLng())}return i}}),Xu=function(i,l){return new ei(i,l)},cs=ye.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(i){Z(this,i)},createIcon:function(i){return this._createIcon("icon",i)},createShadow:function(i){return this._createIcon("shadow",i)},_createIcon:function(i,l){var d=this._getIconUrl(i);if(!d){if(i==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var m=this._createImg(d,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(m,i),(this.options.crossOrigin||this.options.crossOrigin==="")&&(m.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),m},_setIconStyles:function(i,l){var d=this.options,m=d[l+"Size"];typeof m=="number"&&(m=[m,m]);var E=se(m),P=se(l==="shadow"&&d.shadowAnchor||d.iconAnchor||E&&E.divideBy(2,!0));i.className="leaflet-marker-"+l+" "+(d.className||""),P&&(i.style.marginLeft=-P.x+"px",i.style.marginTop=-P.y+"px"),E&&(i.style.width=E.x+"px",i.style.height=E.y+"px")},_createImg:function(i,l){return l=l||document.createElement("img"),l.src=i,l},_getIconUrl:function(i){return be.retina&&this.options[i+"RetinaUrl"]||this.options[i+"Url"]}});function ec(i){return new cs(i)}var Zs=cs.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(i){return typeof Zs.imagePath!="string"&&(Zs.imagePath=this._detectIconPath()),(this.options.imagePath||Zs.imagePath)+cs.prototype._getIconUrl.call(this,i)},_stripUrl:function(i){var l=function(d,m,E){var P=m.exec(d);return P&&P[E]};return i=l(i,/^url\((['"])?(.+)\1\)$/,2),i&&l(i,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var i=Ze("div","leaflet-default-icon-path",document.body),l=Ti(i,"background-image")||Ti(i,"backgroundImage");if(document.body.removeChild(i),l=this._stripUrl(l),l)return l;var d=document.querySelector('link[href$="leaflet.css"]');return d?d.href.substring(0,d.href.length-11-1):""}}),Hl=cn.extend({initialize:function(i){this._marker=i},addHooks:function(){var i=this._marker._icon;this._draggable||(this._draggable=new xn(i,i,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Ee(i,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&mt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(i){var l=this._marker,d=l._map,m=this._marker.options.autoPanSpeed,E=this._marker.options.autoPanPadding,P=ur(l._icon),F=d.getPixelBounds(),G=d.getPixelOrigin(),J=ne(F.min._subtract(G).add(E),F.max._subtract(G).subtract(E));if(!J.contains(P)){var ae=se((Math.max(J.max.x,P.x)-J.max.x)/(F.max.x-J.max.x)-(Math.min(J.min.x,P.x)-J.min.x)/(F.min.x-J.min.x),(Math.max(J.max.y,P.y)-J.max.y)/(F.max.y-J.max.y)-(Math.min(J.min.y,P.y)-J.min.y)/(F.min.y-J.min.y)).multiplyBy(m);d.panBy(ae,{animate:!1}),this._draggable._newPos._add(ae),this._draggable._startPos._add(ae),bt(l._icon,this._draggable._newPos),this._onDrag(i),this._panRequest=j(this._adjustPan.bind(this,i))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(i){this._marker.options.autoPan&&(R(this._panRequest),this._panRequest=j(this._adjustPan.bind(this,i)))},_onDrag:function(i){var l=this._marker,d=l._shadow,m=ur(l._icon),E=l._map.layerPointToLatLng(m);d&&bt(d,m),l._latlng=E,i.latlng=E,i.oldLatLng=this._oldLatLng,l.fire("move",i).fire("drag",i)},_onDragEnd:function(i){R(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",i)}}),ti=dr.extend({options:{icon:new Zs,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(i,l){Z(this,l),this._latlng=we(i)},onAdd:function(i){this._zoomAnimated=this._zoomAnimated&&i.options.markerZoomAnimation,this._zoomAnimated&&i.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(i){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&i.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(i){var l=this._latlng;return this._latlng=we(i),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(i){return this.options.zIndexOffset=i,this.update()},getIcon:function(){return this.options.icon},setIcon:function(i){return this.options.icon=i,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var i=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(i)}return this},_initIcon:function(){var i=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),d=i.icon.createIcon(this._icon),m=!1;d!==this._icon&&(this._icon&&this._removeIcon(),m=!0,i.title&&(d.title=i.title),d.tagName==="IMG"&&(d.alt=i.alt||"")),Ee(d,l),i.keyboard&&(d.tabIndex="0",d.setAttribute("role","button")),this._icon=d,i.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ze(d,"focus",this._panOnFocus,this);var E=i.icon.createShadow(this._shadow),P=!1;E!==this._shadow&&(this._removeShadow(),P=!0),E&&(Ee(E,l),E.alt=""),this._shadow=E,i.opacity<1&&this._updateOpacity(),m&&this.getPane().appendChild(this._icon),this._initInteraction(),E&&P&&this.getPane(i.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&gt(this._icon,"focus",this._panOnFocus,this),lt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&lt(this._shadow),this._shadow=null},_setPos:function(i){this._icon&&bt(this._icon,i),this._shadow&&bt(this._shadow,i),this._zIndex=i.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(i){this._icon&&(this._icon.style.zIndex=this._zIndex+i)},_animateZoom:function(i){var l=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(Ee(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Hl)){var i=this.options.draggable;this.dragging&&(i=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Hl(this),i&&this.dragging.enable()}},setOpacity:function(i){return this.options.opacity=i,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var i=this.options.opacity;this._icon&&tn(this._icon,i),this._shadow&&tn(this._shadow,i)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var i=this._map;if(i){var l=this.options.icon.options,d=l.iconSize?se(l.iconSize):se(0,0),m=l.iconAnchor?se(l.iconAnchor):se(0,0);i.panInside(this._latlng,{paddingTopLeft:m,paddingBottomRight:d.subtract(m)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function od(i,l){return new ti(i,l)}var Ai=dr.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(i){this._renderer=i.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(i){return Z(this,i),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&i&&Object.prototype.hasOwnProperty.call(i,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Ua=Ai.extend({options:{fill:!0,radius:10},initialize:function(i,l){Z(this,l),this._latlng=we(i),this._radius=this.options.radius},setLatLng:function(i){var l=this._latlng;return this._latlng=we(i),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(i){return this.options.radius=this._radius=i,this.redraw()},getRadius:function(){return this._radius},setStyle:function(i){var l=i&&i.radius||this._radius;return Ai.prototype.setStyle.call(this,i),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var i=this._radius,l=this._radiusY||i,d=this._clickTolerance(),m=[i+d,l+d];this._pxBounds=new B(this._point.subtract(m),this._point.add(m))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(i){return i.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function tc(i,l){return new Ua(i,l)}var Ba=Ua.extend({initialize:function(i,l,d){if(typeof l=="number"&&(l=a({},d,{radius:l})),Z(this,l),this._latlng=we(i),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(i){return this._mRadius=i,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var i=[this._radius,this._radiusY||this._radius];return new Me(this._map.layerPointToLatLng(this._point.subtract(i)),this._map.layerPointToLatLng(this._point.add(i)))},setStyle:Ai.prototype.setStyle,_project:function(){var i=this._latlng.lng,l=this._latlng.lat,d=this._map,m=d.options.crs;if(m.distance===re.distance){var E=Math.PI/180,P=this._mRadius/re.R/E,F=d.project([l+P,i]),G=d.project([l-P,i]),J=F.add(G).divideBy(2),ae=d.unproject(J).lat,xe=Math.acos((Math.cos(P*E)-Math.sin(l*E)*Math.sin(ae*E))/(Math.cos(l*E)*Math.cos(ae*E)))/E;(isNaN(xe)||xe===0)&&(xe=P/Math.cos(Math.PI/180*l)),this._point=J.subtract(d.getPixelOrigin()),this._radius=isNaN(xe)?0:J.x-d.project([ae,i-xe]).x,this._radiusY=J.y-F.y}else{var Fe=m.unproject(m.project(this._latlng).subtract([this._mRadius,0]));this._point=d.latLngToLayerPoint(this._latlng),this._radius=this._point.x-d.latLngToLayerPoint(Fe).x}this._updateBounds()}});function ea(i,l,d){return new Ba(i,l,d)}var zn=Ai.extend({options:{smoothFactor:1,noClip:!1},initialize:function(i,l){Z(this,l),this._setLatLngs(i)},getLatLngs:function(){return this._latlngs},setLatLngs:function(i){return this._setLatLngs(i),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(i){for(var l=1/0,d=null,m=He,E,P,F=0,G=this._parts.length;F<G;F++)for(var J=this._parts[F],ae=1,xe=J.length;ae<xe;ae++){E=J[ae-1],P=J[ae];var Fe=m(i,E,P,!0);Fe<l&&(l=Fe,d=m(i,E,P))}return d&&(d.distance=Math.sqrt(l)),d},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Rt(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(i,l){return l=l||this._defaultShape(),i=we(i),l.push(i),this._bounds.extend(i),this.redraw()},_setLatLngs:function(i){this._bounds=new Me,this._latlngs=this._convertLatLngs(i)},_defaultShape:function(){return ut(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(i){for(var l=[],d=ut(i),m=0,E=i.length;m<E;m++)d?(l[m]=we(i[m]),this._bounds.extend(l[m])):l[m]=this._convertLatLngs(i[m]);return l},_project:function(){var i=new B;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,i),this._bounds.isValid()&&i.isValid()&&(this._rawPxBounds=i,this._updateBounds())},_updateBounds:function(){var i=this._clickTolerance(),l=new X(i,i);this._rawPxBounds&&(this._pxBounds=new B([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(i,l,d){var m=i[0]instanceof Se,E=i.length,P,F;if(m){for(F=[],P=0;P<E;P++)F[P]=this._map.latLngToLayerPoint(i[P]),d.extend(F[P]);l.push(F)}else for(P=0;P<E;P++)this._projectLatlngs(i[P],l,d)},_clipPoints:function(){var i=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,d,m,E,P,F,G,J;for(d=0,E=0,P=this._rings.length;d<P;d++)for(J=this._rings[d],m=0,F=J.length;m<F-1;m++)G=b(J[m],J[m+1],i,m,!0),G&&(l[E]=l[E]||[],l[E].push(G[0]),(G[1]!==J[m+1]||m===F-2)&&(l[E].push(G[1]),E++))}},_simplifyPoints:function(){for(var i=this._parts,l=this.options.smoothFactor,d=0,m=i.length;d<m;d++)i[d]=Ht(i[d],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(i,l){var d,m,E,P,F,G,J=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(d=0,P=this._parts.length;d<P;d++)for(G=this._parts[d],m=0,F=G.length,E=F-1;m<F;E=m++)if(!(!l&&m===0)&&Jo(i,G[E],G[m])<=J)return!0;return!1}});function ad(i,l){return new zn(i,l)}zn._flat=ft;var ni=zn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Yo(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(i){var l=zn.prototype._convertLatLngs.call(this,i),d=l.length;return d>=2&&l[0]instanceof Se&&l[0].equals(l[d-1])&&l.pop(),l},_setLatLngs:function(i){zn.prototype._setLatLngs.call(this,i),ut(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return ut(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var i=this._renderer._bounds,l=this.options.weight,d=new X(l,l);if(i=new B(i.min.subtract(d),i.max.add(d)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}for(var m=0,E=this._rings.length,P;m<E;m++)P=Ws(this._rings[m],i,!0),P.length&&this._parts.push(P)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(i){var l=!1,d,m,E,P,F,G,J,ae;if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(P=0,J=this._parts.length;P<J;P++)for(d=this._parts[P],F=0,ae=d.length,G=ae-1;F<ae;G=F++)m=d[F],E=d[G],m.y>i.y!=E.y>i.y&&i.x<(E.x-m.x)*(i.y-m.y)/(E.y-m.y)+m.x&&(l=!l);return l||zn.prototype._containsPoint.call(this,i,!0)}});function ld(i,l){return new ni(i,l)}var Or=ei.extend({initialize:function(i,l){Z(this,l),this._layers={},i&&this.addData(i)},addData:function(i){var l=Te(i)?i:i.features,d,m,E;if(l){for(d=0,m=l.length;d<m;d++)E=l[d],(E.geometries||E.geometry||E.features||E.coordinates)&&this.addData(E);return this}var P=this.options;if(P.filter&&!P.filter(i))return this;var F=Qs(i,P);return F?(F.feature=Ga(i),F.defaultOptions=F.options,this.resetStyle(F),P.onEachFeature&&P.onEachFeature(i,F),this.addLayer(F)):this},resetStyle:function(i){return i===void 0?this.eachLayer(this.resetStyle,this):(i.options=a({},i.defaultOptions),this._setLayerStyle(i,this.options.style),this)},setStyle:function(i){return this.eachLayer(function(l){this._setLayerStyle(l,i)},this)},_setLayerStyle:function(i,l){i.setStyle&&(typeof l=="function"&&(l=l(i.feature)),i.setStyle(l))}});function Qs(i,l){var d=i.type==="Feature"?i.geometry:i,m=d?d.coordinates:null,E=[],P=l&&l.pointToLayer,F=l&&l.coordsToLatLng||Wa,G,J,ae,xe;if(!m&&!d)return null;switch(d.type){case"Point":return G=F(m),Ha(P,i,G,l);case"MultiPoint":for(ae=0,xe=m.length;ae<xe;ae++)G=F(m[ae]),E.push(Ha(P,i,G,l));return new ei(E);case"LineString":case"MultiLineString":return J=ta(m,d.type==="LineString"?0:1,F),new zn(J,l);case"Polygon":case"MultiPolygon":return J=ta(m,d.type==="Polygon"?1:2,F),new ni(J,l);case"GeometryCollection":for(ae=0,xe=d.geometries.length;ae<xe;ae++){var Fe=Qs({geometry:d.geometries[ae],type:"Feature",properties:i.properties},l);Fe&&E.push(Fe)}return new ei(E);case"FeatureCollection":for(ae=0,xe=d.features.length;ae<xe;ae++){var et=Qs(d.features[ae],l);et&&E.push(et)}return new ei(E);default:throw new Error("Invalid GeoJSON object.")}}function Ha(i,l,d,m){return i?i(l,d):new ti(d,m&&m.markersInheritOptions&&m)}function Wa(i){return new Se(i[1],i[0],i[2])}function ta(i,l,d){for(var m=[],E=0,P=i.length,F;E<P;E++)F=l?ta(i[E],l-1,d):(d||Wa)(i[E]),m.push(F);return m}function $a(i,l){return i=we(i),i.alt!==void 0?[N(i.lng,l),N(i.lat,l),N(i.alt,l)]:[N(i.lng,l),N(i.lat,l)]}function qa(i,l,d,m){for(var E=[],P=0,F=i.length;P<F;P++)E.push(l?qa(i[P],ut(i[P])?0:l-1,d,m):$a(i[P],m));return!l&&d&&E.length>0&&E.push(E[0].slice()),E}function Ys(i,l){return i.feature?a({},i.feature,{geometry:l}):Ga(l)}function Ga(i){return i.type==="Feature"||i.type==="FeatureCollection"?i:{type:"Feature",properties:{},geometry:i}}var Wl={toGeoJSON:function(i){return Ys(this,{type:"Point",coordinates:$a(this.getLatLng(),i)})}};ti.include(Wl),Ba.include(Wl),Ua.include(Wl),zn.include({toGeoJSON:function(i){var l=!ut(this._latlngs),d=qa(this._latlngs,l?1:0,!1,i);return Ys(this,{type:(l?"Multi":"")+"LineString",coordinates:d})}}),ni.include({toGeoJSON:function(i){var l=!ut(this._latlngs),d=l&&!ut(this._latlngs[0]),m=qa(this._latlngs,d?2:l?1:0,!0,i);return l||(m=[m]),Ys(this,{type:(d?"Multi":"")+"Polygon",coordinates:m})}}),bi.include({toMultiPoint:function(i){var l=[];return this.eachLayer(function(d){l.push(d.toGeoJSON(i).geometry.coordinates)}),Ys(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(i){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(i);var d=l==="GeometryCollection",m=[];return this.eachLayer(function(E){if(E.toGeoJSON){var P=E.toGeoJSON(i);if(d)m.push(P.geometry);else{var F=Ga(P);F.type==="FeatureCollection"?m.push.apply(m,F.features):m.push(F)}}}),d?Ys(this,{geometries:m,type:"GeometryCollection"}):{type:"FeatureCollection",features:m}}});function nc(i,l){return new Or(i,l)}var fr=nc,Ni=dr.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(i,l,d){this._url=i,this._bounds=Ne(l),Z(this,d)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Ee(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){lt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(i){return this.options.opacity=i,this._image&&this._updateOpacity(),this},setStyle:function(i){return i.opacity&&this.setOpacity(i.opacity),this},bringToFront:function(){return this._map&&Kn(this._image),this},bringToBack:function(){return this._map&&un(this._image),this},setUrl:function(i){return this._url=i,this._image&&(this._image.src=i),this},setBounds:function(i){return this._bounds=Ne(i),this._map&&this._reset(),this},getEvents:function(){var i={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var i=this._url.tagName==="IMG",l=this._image=i?this._url:Ze("img");if(Ee(l,"leaflet-image-layer"),this._zoomAnimated&&Ee(l,"leaflet-zoom-animated"),this.options.className&&Ee(l,this.options.className),l.onselectstart=C,l.onmousemove=C,l.onload=p(this.fire,this,"load"),l.onerror=p(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),i){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(i){var l=this._map.getZoomScale(i.zoom),d=this._map._latLngBoundsToNewLayerBounds(this._bounds,i.zoom,i.center).min;Dn(this._image,d,l)},_reset:function(){var i=this._image,l=new B(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),d=l.getSize();bt(i,l.min),i.style.width=d.x+"px",i.style.height=d.y+"px"},_updateOpacity:function(){tn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var i=this.options.errorOverlayUrl;i&&this._url!==i&&(this._url=i,this._image.src=i)},getCenter:function(){return this._bounds.getCenter()}}),rc=function(i,l,d){return new Ni(i,l,d)},$l=Ni.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var i=this._url.tagName==="VIDEO",l=this._image=i?this._url:Ze("video");if(Ee(l,"leaflet-image-layer"),this._zoomAnimated&&Ee(l,"leaflet-zoom-animated"),this.options.className&&Ee(l,this.options.className),l.onselectstart=C,l.onmousemove=C,l.onloadeddata=p(this.fire,this,"load"),i){for(var d=l.getElementsByTagName("source"),m=[],E=0;E<d.length;E++)m.push(d[E].src);this._url=d.length>0?m:[l.src];return}Te(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var P=0;P<this._url.length;P++){var F=Ze("source");F.src=this._url[P],l.appendChild(F)}}});function ic(i,l,d){return new $l(i,l,d)}var ql=Ni.extend({_initImage:function(){var i=this._image=this._url;Ee(i,"leaflet-image-layer"),this._zoomAnimated&&Ee(i,"leaflet-zoom-animated"),this.options.className&&Ee(i,this.options.className),i.onselectstart=C,i.onmousemove=C}});function Gl(i,l,d){return new ql(i,l,d)}var jr=dr.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(i,l){i&&(i instanceof Se||Te(i))?(this._latlng=we(i),Z(this,l)):(Z(this,i),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(i){return i=arguments.length?i:this._source._map,i.hasLayer(this)||i.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(i){return this._map?this.close():(arguments.length?this._source=i:i=this._source,this._prepareOpen(),this.openOn(i._map)),this},onAdd:function(i){this._zoomAnimated=i._zoomAnimated,this._container||this._initLayout(),i._fadeAnimated&&tn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),i._fadeAnimated&&tn(this._container,1),this.bringToFront(),this.options.interactive&&(Ee(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(i){i._fadeAnimated?(tn(this._container,0),this._removeTimeout=setTimeout(p(lt,void 0,this._container),200)):lt(this._container),this.options.interactive&&(mt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(i){return this._latlng=we(i),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(i){return this._content=i,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var i={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Kn(this._container),this},bringToBack:function(){return this._map&&un(this._container),this},_prepareOpen:function(i){var l=this._source;if(!l._map)return!1;if(l instanceof ei){l=null;var d=this._source._layers;for(var m in d)if(d[m]._map){l=d[m];break}if(!l)return!1;this._source=l}if(!i)if(l.getCenter)i=l.getCenter();else if(l.getLatLng)i=l.getLatLng();else if(l.getBounds)i=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(i),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var i=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")i.innerHTML=l;else{for(;i.hasChildNodes();)i.removeChild(i.firstChild);i.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var i=this._map.latLngToLayerPoint(this._latlng),l=se(this.options.offset),d=this._getAnchor();this._zoomAnimated?bt(this._container,i.add(d)):l=l.add(i).add(d);var m=this._containerBottom=-l.y,E=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=m+"px",this._container.style.left=E+"px"}},_getAnchor:function(){return[0,0]}});nt.include({_initOverlay:function(i,l,d,m){var E=l;return E instanceof i||(E=new i(m).setContent(l)),d&&E.setLatLng(d),E}}),dr.include({_initOverlay:function(i,l,d,m){var E=d;return E instanceof i?(Z(E,m),E._source=this):(E=l&&!m?l:new i(m,this),E.setContent(d)),E}});var Ka=jr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(i){return i=arguments.length?i:this._source._map,!i.hasLayer(this)&&i._popup&&i._popup.options.autoClose&&i.removeLayer(i._popup),i._popup=this,jr.prototype.openOn.call(this,i)},onAdd:function(i){jr.prototype.onAdd.call(this,i),i.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Ai||this._source.on("preclick",at))},onRemove:function(i){jr.prototype.onRemove.call(this,i),i.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Ai||this._source.off("preclick",at))},getEvents:function(){var i=jr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(i.preclick=this.close),this.options.keepInView&&(i.moveend=this._adjustPan),i},_initLayout:function(){var i="leaflet-popup",l=this._container=Ze("div",i+" "+(this.options.className||"")+" leaflet-zoom-animated"),d=this._wrapper=Ze("div",i+"-content-wrapper",l);if(this._contentNode=Ze("div",i+"-content",d),ss(l),Us(this._contentNode),ze(l,"contextmenu",at),this._tipContainer=Ze("div",i+"-tip-container",l),this._tip=Ze("div",i+"-tip",this._tipContainer),this.options.closeButton){var m=this._closeButton=Ze("a",i+"-close-button",l);m.setAttribute("role","button"),m.setAttribute("aria-label","Close popup"),m.href="#close",m.innerHTML='<span aria-hidden="true">&#215;</span>',ze(m,"click",function(E){xt(E),this.close()},this)}},_updateLayout:function(){var i=this._contentNode,l=i.style;l.width="",l.whiteSpace="nowrap";var d=i.offsetWidth;d=Math.min(d,this.options.maxWidth),d=Math.max(d,this.options.minWidth),l.width=d+1+"px",l.whiteSpace="",l.height="";var m=i.offsetHeight,E=this.options.maxHeight,P="leaflet-popup-scrolled";E&&m>E?(l.height=E+"px",Ee(i,P)):mt(i,P),this._containerWidth=this._container.offsetWidth},_animateZoom:function(i){var l=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center),d=this._getAnchor();bt(this._container,l.add(d))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var i=this._map,l=parseInt(Ti(this._container,"marginBottom"),10)||0,d=this._container.offsetHeight+l,m=this._containerWidth,E=new X(this._containerLeft,-d-this._containerBottom);E._add(ur(this._container));var P=i.layerPointToContainerPoint(E),F=se(this.options.autoPanPadding),G=se(this.options.autoPanPaddingTopLeft||F),J=se(this.options.autoPanPaddingBottomRight||F),ae=i.getSize(),xe=0,Fe=0;P.x+m+J.x>ae.x&&(xe=P.x+m-ae.x+J.x),P.x-xe-G.x<0&&(xe=P.x-G.x),P.y+d+J.y>ae.y&&(Fe=P.y+d-ae.y+J.y),P.y-Fe-G.y<0&&(Fe=P.y-G.y),(xe||Fe)&&(this.options.keepInView&&(this._autopanning=!0),i.fire("autopanstart").panBy([xe,Fe]))}},_getAnchor:function(){return se(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Js=function(i,l){return new Ka(i,l)};nt.mergeOptions({closePopupOnClick:!0}),nt.include({openPopup:function(i,l,d){return this._initOverlay(Ka,i,l,d).openOn(this),this},closePopup:function(i){return i=arguments.length?i:this._popup,i&&i.close(),this}}),dr.include({bindPopup:function(i,l){return this._popup=this._initOverlay(Ka,this._popup,i,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(i){return this._popup&&(this instanceof ei||(this._popup._source=this),this._popup._prepareOpen(i||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(i){return this._popup&&this._popup.setContent(i),this},getPopup:function(){return this._popup},_openPopup:function(i){if(!(!this._popup||!this._map)){vn(i);var l=i.layer||i.target;if(this._popup._source===l&&!(l instanceof Ai)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(i.latlng);return}this._popup._source=l,this.openPopup(i.latlng)}},_movePopup:function(i){this._popup.setLatLng(i.latlng)},_onKeyPress:function(i){i.originalEvent.keyCode===13&&this._openPopup(i)}});var Xs=jr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(i){jr.prototype.onAdd.call(this,i),this.setOpacity(this.options.opacity),i.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(i){jr.prototype.onRemove.call(this,i),i.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var i=jr.prototype.getEvents.call(this);return this.options.permanent||(i.preclick=this.close),i},_initLayout:function(){var i="leaflet-tooltip",l=i+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ze("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+x(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(i){var l,d,m=this._map,E=this._container,P=m.latLngToContainerPoint(m.getCenter()),F=m.layerPointToContainerPoint(i),G=this.options.direction,J=E.offsetWidth,ae=E.offsetHeight,xe=se(this.options.offset),Fe=this._getAnchor();G==="top"?(l=J/2,d=ae):G==="bottom"?(l=J/2,d=0):G==="center"?(l=J/2,d=ae/2):G==="right"?(l=0,d=ae/2):G==="left"?(l=J,d=ae/2):F.x<P.x?(G="right",l=0,d=ae/2):(G="left",l=J+(xe.x+Fe.x)*2,d=ae/2),i=i.subtract(se(l,d,!0)).add(xe).add(Fe),mt(E,"leaflet-tooltip-right"),mt(E,"leaflet-tooltip-left"),mt(E,"leaflet-tooltip-top"),mt(E,"leaflet-tooltip-bottom"),Ee(E,"leaflet-tooltip-"+G),bt(E,i)},_updatePosition:function(){var i=this._map.latLngToLayerPoint(this._latlng);this._setPosition(i)},setOpacity:function(i){this.options.opacity=i,this._container&&tn(this._container,i)},_animateZoom:function(i){var l=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center);this._setPosition(l)},_getAnchor:function(){return se(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),na=function(i,l){return new Xs(i,l)};nt.include({openTooltip:function(i,l,d){return this._initOverlay(Xs,i,l,d).openOn(this),this},closeTooltip:function(i){return i.close(),this}}),dr.include({bindTooltip:function(i,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Xs,this._tooltip,i,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(i){if(!(!i&&this._tooltipHandlersAdded)){var l=i?"off":"on",d={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?d.add=this._openTooltip:(d.mouseover=this._openTooltip,d.mouseout=this.closeTooltip,d.click=this._openTooltip,this._map?this._addFocusListeners():d.add=this._addFocusListeners),this._tooltip.options.sticky&&(d.mousemove=this._moveTooltip),this[l](d),this._tooltipHandlersAdded=!i}},openTooltip:function(i){return this._tooltip&&(this instanceof ei||(this._tooltip._source=this),this._tooltip._prepareOpen(i)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(i){return this._tooltip&&this._tooltip.setContent(i),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(i){var l=typeof i.getElement=="function"&&i.getElement();l&&(ze(l,"focus",function(){this._tooltip._source=i,this.openTooltip()},this),ze(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(i){var l=typeof i.getElement=="function"&&i.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(i){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(i)});return}this._tooltip._source=i.layer||i.target,this.openTooltip(this._tooltip.options.sticky?i.latlng:void 0)}},_moveTooltip:function(i){var l=i.latlng,d,m;this._tooltip.options.sticky&&i.originalEvent&&(d=this._map.mouseEventToContainerPoint(i.originalEvent),m=this._map.containerPointToLayerPoint(d),l=this._map.layerPointToLatLng(m)),this._tooltip.setLatLng(l)}});var Za=cs.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(i){var l=i&&i.tagName==="DIV"?i:document.createElement("div"),d=this.options;if(d.html instanceof Element?(ln(l),l.appendChild(d.html)):l.innerHTML=d.html!==!1?d.html:"",d.bgPos){var m=se(d.bgPos);l.style.backgroundPosition=-m.x+"px "+-m.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function sc(i){return new Za(i)}cs.Default=Zs;var Ri=dr.extend({options:{tileSize:256,opacity:1,updateWhenIdle:be.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(i){Z(this,i)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(i){i._addZoomLimit(this)},onRemove:function(i){this._removeAllTiles(),lt(this._container),i._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Kn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(un(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(i){return this.options.opacity=i,this._updateOpacity(),this},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var i=this._clampZoom(this._map.getZoom());i!==this._tileZoom&&(this._tileZoom=i,this._updateLevels()),this._update()}return this},getEvents:function(){var i={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=T(this._onMoveEnd,this.options.updateInterval,this)),i.move=this._onMove),this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},createTile:function(){return document.createElement("div")},getTileSize:function(){var i=this.options.tileSize;return i instanceof X?i:new X(i,i)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(i){for(var l=this.getPane().children,d=-i(-1/0,1/0),m=0,E=l.length,P;m<E;m++)P=l[m].style.zIndex,l[m]!==this._container&&P&&(d=i(d,+P));isFinite(d)&&(this.options.zIndex=d+i(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!be.ielt9){tn(this._container,this.options.opacity);var i=+new Date,l=!1,d=!1;for(var m in this._tiles){var E=this._tiles[m];if(!(!E.current||!E.loaded)){var P=Math.min(1,(i-E.loaded)/200);tn(E.el,P),P<1?l=!0:(E.active?d=!0:this._onOpaqueTile(E),E.active=!0)}}d&&!this._noPrune&&this._pruneTiles(),l&&(R(this._fadeFrame),this._fadeFrame=j(this._updateOpacity,this))}},_onOpaqueTile:C,_initContainer:function(){this._container||(this._container=Ze("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var i=this._tileZoom,l=this.options.maxZoom;if(i!==void 0){for(var d in this._levels)d=Number(d),this._levels[d].el.children.length||d===i?(this._levels[d].el.style.zIndex=l-Math.abs(i-d),this._onUpdateLevel(d)):(lt(this._levels[d].el),this._removeTilesAtZoom(d),this._onRemoveLevel(d),delete this._levels[d]);var m=this._levels[i],E=this._map;return m||(m=this._levels[i]={},m.el=Ze("div","leaflet-tile-container leaflet-zoom-animated",this._container),m.el.style.zIndex=l,m.origin=E.project(E.unproject(E.getPixelOrigin()),i).round(),m.zoom=i,this._setZoomTransform(m,E.getCenter(),E.getZoom()),C(m.el.offsetWidth),this._onCreateLevel(m)),this._level=m,m}},_onUpdateLevel:C,_onRemoveLevel:C,_onCreateLevel:C,_pruneTiles:function(){if(this._map){var i,l,d=this._map.getZoom();if(d>this.options.maxZoom||d<this.options.minZoom){this._removeAllTiles();return}for(i in this._tiles)l=this._tiles[i],l.retain=l.current;for(i in this._tiles)if(l=this._tiles[i],l.current&&!l.active){var m=l.coords;this._retainParent(m.x,m.y,m.z,m.z-5)||this._retainChildren(m.x,m.y,m.z,m.z+2)}for(i in this._tiles)this._tiles[i].retain||this._removeTile(i)}},_removeTilesAtZoom:function(i){for(var l in this._tiles)this._tiles[l].coords.z===i&&this._removeTile(l)},_removeAllTiles:function(){for(var i in this._tiles)this._removeTile(i)},_invalidateAll:function(){for(var i in this._levels)lt(this._levels[i].el),this._onRemoveLevel(Number(i)),delete this._levels[i];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(i,l,d,m){var E=Math.floor(i/2),P=Math.floor(l/2),F=d-1,G=new X(+E,+P);G.z=+F;var J=this._tileCoordsToKey(G),ae=this._tiles[J];return ae&&ae.active?(ae.retain=!0,!0):(ae&&ae.loaded&&(ae.retain=!0),F>m?this._retainParent(E,P,F,m):!1)},_retainChildren:function(i,l,d,m){for(var E=2*i;E<2*i+2;E++)for(var P=2*l;P<2*l+2;P++){var F=new X(E,P);F.z=d+1;var G=this._tileCoordsToKey(F),J=this._tiles[G];if(J&&J.active){J.retain=!0;continue}else J&&J.loaded&&(J.retain=!0);d+1<m&&this._retainChildren(E,P,d+1,m)}},_resetView:function(i){var l=i&&(i.pinch||i.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(i){this._setView(i.center,i.zoom,!0,i.noUpdate)},_clampZoom:function(i){var l=this.options;return l.minNativeZoom!==void 0&&i<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<i?l.maxNativeZoom:i},_setView:function(i,l,d,m){var E=Math.round(l);this.options.maxZoom!==void 0&&E>this.options.maxZoom||this.options.minZoom!==void 0&&E<this.options.minZoom?E=void 0:E=this._clampZoom(E);var P=this.options.updateWhenZooming&&E!==this._tileZoom;(!m||P)&&(this._tileZoom=E,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),E!==void 0&&this._update(i),d||this._pruneTiles(),this._noPrune=!!d),this._setZoomTransforms(i,l)},_setZoomTransforms:function(i,l){for(var d in this._levels)this._setZoomTransform(this._levels[d],i,l)},_setZoomTransform:function(i,l,d){var m=this._map.getZoomScale(d,i.zoom),E=i.origin.multiplyBy(m).subtract(this._map._getNewPixelOrigin(l,d)).round();be.any3d?Dn(i.el,E,m):bt(i.el,E)},_resetGrid:function(){var i=this._map,l=i.options.crs,d=this._tileSize=this.getTileSize(),m=this._tileZoom,E=this._map.getPixelWorldBounds(this._tileZoom);E&&(this._globalTileRange=this._pxBoundsToTileRange(E)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(i.project([0,l.wrapLng[0]],m).x/d.x),Math.ceil(i.project([0,l.wrapLng[1]],m).x/d.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(i.project([l.wrapLat[0],0],m).y/d.x),Math.ceil(i.project([l.wrapLat[1],0],m).y/d.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(i){var l=this._map,d=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),m=l.getZoomScale(d,this._tileZoom),E=l.project(i,this._tileZoom).floor(),P=l.getSize().divideBy(m*2);return new B(E.subtract(P),E.add(P))},_update:function(i){var l=this._map;if(l){var d=this._clampZoom(l.getZoom());if(i===void 0&&(i=l.getCenter()),this._tileZoom!==void 0){var m=this._getTiledPixelBounds(i),E=this._pxBoundsToTileRange(m),P=E.getCenter(),F=[],G=this.options.keepBuffer,J=new B(E.getBottomLeft().subtract([G,-G]),E.getTopRight().add([G,-G]));if(!(isFinite(E.min.x)&&isFinite(E.min.y)&&isFinite(E.max.x)&&isFinite(E.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var ae in this._tiles){var xe=this._tiles[ae].coords;(xe.z!==this._tileZoom||!J.contains(new X(xe.x,xe.y)))&&(this._tiles[ae].current=!1)}if(Math.abs(d-this._tileZoom)>1){this._setView(i,d);return}for(var Fe=E.min.y;Fe<=E.max.y;Fe++)for(var et=E.min.x;et<=E.max.x;et++){var Yt=new X(et,Fe);if(Yt.z=this._tileZoom,!!this._isValidTile(Yt)){var Wt=this._tiles[this._tileCoordsToKey(Yt)];Wt?Wt.current=!0:F.push(Yt)}}if(F.sort(function(En,io){return En.distanceTo(P)-io.distanceTo(P)}),F.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Un=document.createDocumentFragment();for(et=0;et<F.length;et++)this._addTile(F[et],Un);this._level.el.appendChild(Un)}}}},_isValidTile:function(i){var l=this._map.options.crs;if(!l.infinite){var d=this._globalTileRange;if(!l.wrapLng&&(i.x<d.min.x||i.x>d.max.x)||!l.wrapLat&&(i.y<d.min.y||i.y>d.max.y))return!1}if(!this.options.bounds)return!0;var m=this._tileCoordsToBounds(i);return Ne(this.options.bounds).overlaps(m)},_keyToBounds:function(i){return this._tileCoordsToBounds(this._keyToTileCoords(i))},_tileCoordsToNwSe:function(i){var l=this._map,d=this.getTileSize(),m=i.scaleBy(d),E=m.add(d),P=l.unproject(m,i.z),F=l.unproject(E,i.z);return[P,F]},_tileCoordsToBounds:function(i){var l=this._tileCoordsToNwSe(i),d=new Me(l[0],l[1]);return this.options.noWrap||(d=this._map.wrapLatLngBounds(d)),d},_tileCoordsToKey:function(i){return i.x+":"+i.y+":"+i.z},_keyToTileCoords:function(i){var l=i.split(":"),d=new X(+l[0],+l[1]);return d.z=+l[2],d},_removeTile:function(i){var l=this._tiles[i];l&&(lt(l.el),delete this._tiles[i],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(i)}))},_initTile:function(i){Ee(i,"leaflet-tile");var l=this.getTileSize();i.style.width=l.x+"px",i.style.height=l.y+"px",i.onselectstart=C,i.onmousemove=C,be.ielt9&&this.options.opacity<1&&tn(i,this.options.opacity)},_addTile:function(i,l){var d=this._getTilePos(i),m=this._tileCoordsToKey(i),E=this.createTile(this._wrapCoords(i),p(this._tileReady,this,i));this._initTile(E),this.createTile.length<2&&j(p(this._tileReady,this,i,null,E)),bt(E,d),this._tiles[m]={el:E,coords:i,current:!0},l.appendChild(E),this.fire("tileloadstart",{tile:E,coords:i})},_tileReady:function(i,l,d){l&&this.fire("tileerror",{error:l,tile:d,coords:i});var m=this._tileCoordsToKey(i);d=this._tiles[m],d&&(d.loaded=+new Date,this._map._fadeAnimated?(tn(d.el,0),R(this._fadeFrame),this._fadeFrame=j(this._updateOpacity,this)):(d.active=!0,this._pruneTiles()),l||(Ee(d.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:d.el,coords:i})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),be.ielt9||!this._map._fadeAnimated?j(this._pruneTiles,this):setTimeout(p(this._pruneTiles,this),250)))},_getTilePos:function(i){return i.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(i){var l=new X(this._wrapX?k(i.x,this._wrapX):i.x,this._wrapY?k(i.y,this._wrapY):i.y);return l.z=i.z,l},_pxBoundsToTileRange:function(i){var l=this.getTileSize();return new B(i.min.unscaleBy(l).floor(),i.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var i in this._tiles)if(!this._tiles[i].loaded)return!1;return!0}});function eo(i){return new Ri(i)}var Li=Ri.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(i,l){this._url=i,l=Z(this,l),l.detectRetina&&be.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(i,l){return this._url===i&&l===void 0&&(l=!0),this._url=i,l||this.redraw(),this},createTile:function(i,l){var d=document.createElement("img");return ze(d,"load",p(this._tileOnLoad,this,l,d)),ze(d,"error",p(this._tileOnError,this,l,d)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(d.referrerPolicy=this.options.referrerPolicy),d.alt="",d.src=this.getTileUrl(i),d},getTileUrl:function(i){var l={r:be.retina?"@2x":"",s:this._getSubdomain(i),x:i.x,y:i.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var d=this._globalTileRange.max.y-i.y;this.options.tms&&(l.y=d),l["-y"]=d}return _e(this._url,a(l,this.options))},_tileOnLoad:function(i,l){be.ielt9?setTimeout(p(i,this,null,l),0):i(null,l)},_tileOnError:function(i,l,d){var m=this.options.errorTileUrl;m&&l.getAttribute("src")!==m&&(l.src=m),i(d,l)},_onTileRemove:function(i){i.tile.onload=null},_getZoomForUrl:function(){var i=this._tileZoom,l=this.options.maxZoom,d=this.options.zoomReverse,m=this.options.zoomOffset;return d&&(i=l-i),i+m},_getSubdomain:function(i){var l=Math.abs(i.x+i.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var i,l;for(i in this._tiles)if(this._tiles[i].coords.z!==this._tileZoom&&(l=this._tiles[i].el,l.onload=C,l.onerror=C,!l.complete)){l.src=ke;var d=this._tiles[i].coords;lt(l),delete this._tiles[i],this.fire("tileabort",{tile:l,coords:d})}},_removeTile:function(i){var l=this._tiles[i];if(l)return l.el.setAttribute("src",ke),Ri.prototype._removeTile.call(this,i)},_tileReady:function(i,l,d){if(!(!this._map||d&&d.getAttribute("src")===ke))return Ri.prototype._tileReady.call(this,i,l,d)}});function Kl(i,l){return new Li(i,l)}var ra=Li.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(i,l){this._url=i;var d=a({},this.defaultWmsParams);for(var m in l)m in this.options||(d[m]=l[m]);l=Z(this,l);var E=l.detectRetina&&be.retina?2:1,P=this.getTileSize();d.width=P.x*E,d.height=P.y*E,this.wmsParams=d},onAdd:function(i){this._crs=this.options.crs||i.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,Li.prototype.onAdd.call(this,i)},getTileUrl:function(i){var l=this._tileCoordsToNwSe(i),d=this._crs,m=ne(d.project(l[0]),d.project(l[1])),E=m.min,P=m.max,F=(this._wmsVersion>=1.3&&this._crs===Ks?[E.y,E.x,P.y,P.x]:[E.x,E.y,P.x,P.y]).join(","),G=Li.prototype.getTileUrl.call(this,i);return G+te(this.wmsParams,G,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+F},setParams:function(i,l){return a(this.wmsParams,i),l||this.redraw(),this}});function oc(i,l){return new ra(i,l)}Li.WMS=ra,Kl.wms=oc;var Vr=dr.extend({options:{padding:.1},initialize:function(i){Z(this,i),x(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Ee(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var i={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(i.zoomanim=this._onAnimZoom),i},_onAnimZoom:function(i){this._updateTransform(i.center,i.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(i,l){var d=this._map.getZoomScale(l,this._zoom),m=this._map.getSize().multiplyBy(.5+this.options.padding),E=this._map.project(this._center,l),P=m.multiplyBy(-d).add(E).subtract(this._map._getNewPixelOrigin(i,l));be.any3d?Dn(this._container,P,d):bt(this._container,P)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var i in this._layers)this._layers[i]._reset()},_onZoomEnd:function(){for(var i in this._layers)this._layers[i]._project()},_updatePaths:function(){for(var i in this._layers)this._layers[i]._update()},_update:function(){var i=this.options.padding,l=this._map.getSize(),d=this._map.containerPointToLayerPoint(l.multiplyBy(-i)).round();this._bounds=new B(d,d.add(l.multiplyBy(1+i*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Zl=Vr.extend({options:{tolerance:0},getEvents:function(){var i=Vr.prototype.getEvents.call(this);return i.viewprereset=this._onViewPreReset,i},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Vr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var i=this._container=document.createElement("canvas");ze(i,"mousemove",this._onMouseMove,this),ze(i,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ze(i,"mouseout",this._handleMouseOut,this),i._leaflet_disable_events=!0,this._ctx=i.getContext("2d")},_destroyContainer:function(){R(this._redrawRequest),delete this._ctx,lt(this._container),gt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var i;this._redrawBounds=null;for(var l in this._layers)i=this._layers[l],i._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Vr.prototype._update.call(this);var i=this._bounds,l=this._container,d=i.getSize(),m=be.retina?2:1;bt(l,i.min),l.width=m*d.x,l.height=m*d.y,l.style.width=d.x+"px",l.style.height=d.y+"px",be.retina&&this._ctx.scale(2,2),this._ctx.translate(-i.min.x,-i.min.y),this.fire("update")}},_reset:function(){Vr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(i){this._updateDashArray(i),this._layers[x(i)]=i;var l=i._order={layer:i,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(i){this._requestRedraw(i)},_removePath:function(i){var l=i._order,d=l.next,m=l.prev;d?d.prev=m:this._drawLast=m,m?m.next=d:this._drawFirst=d,delete i._order,delete this._layers[x(i)],this._requestRedraw(i)},_updatePath:function(i){this._extendRedrawBounds(i),i._project(),i._update(),this._requestRedraw(i)},_updateStyle:function(i){this._updateDashArray(i),this._requestRedraw(i)},_updateDashArray:function(i){if(typeof i.options.dashArray=="string"){var l=i.options.dashArray.split(/[, ]+/),d=[],m,E;for(E=0;E<l.length;E++){if(m=Number(l[E]),isNaN(m))return;d.push(m)}i.options._dashArray=d}else i.options._dashArray=i.options.dashArray},_requestRedraw:function(i){this._map&&(this._extendRedrawBounds(i),this._redrawRequest=this._redrawRequest||j(this._redraw,this))},_extendRedrawBounds:function(i){if(i._pxBounds){var l=(i.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new B,this._redrawBounds.extend(i._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(i._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var i=this._redrawBounds;if(i){var l=i.getSize();this._ctx.clearRect(i.min.x,i.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var i,l=this._redrawBounds;if(this._ctx.save(),l){var d=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,d.x,d.y),this._ctx.clip()}this._drawing=!0;for(var m=this._drawFirst;m;m=m.next)i=m.layer,(!l||i._pxBounds&&i._pxBounds.intersects(l))&&i._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(i,l){if(this._drawing){var d,m,E,P,F=i._parts,G=F.length,J=this._ctx;if(G){for(J.beginPath(),d=0;d<G;d++){for(m=0,E=F[d].length;m<E;m++)P=F[d][m],J[m?"lineTo":"moveTo"](P.x,P.y);l&&J.closePath()}this._fillStroke(J,i)}}},_updateCircle:function(i){if(!(!this._drawing||i._empty())){var l=i._point,d=this._ctx,m=Math.max(Math.round(i._radius),1),E=(Math.max(Math.round(i._radiusY),1)||m)/m;E!==1&&(d.save(),d.scale(1,E)),d.beginPath(),d.arc(l.x,l.y/E,m,0,Math.PI*2,!1),E!==1&&d.restore(),this._fillStroke(d,i)}},_fillStroke:function(i,l){var d=l.options;d.fill&&(i.globalAlpha=d.fillOpacity,i.fillStyle=d.fillColor||d.color,i.fill(d.fillRule||"evenodd")),d.stroke&&d.weight!==0&&(i.setLineDash&&i.setLineDash(l.options&&l.options._dashArray||[]),i.globalAlpha=d.opacity,i.lineWidth=d.weight,i.strokeStyle=d.color,i.lineCap=d.lineCap,i.lineJoin=d.lineJoin,i.stroke())},_onClick:function(i){for(var l=this._map.mouseEventToLayerPoint(i),d,m,E=this._drawFirst;E;E=E.next)d=E.layer,d.options.interactive&&d._containsPoint(l)&&(!(i.type==="click"||i.type==="preclick")||!this._map._draggableMoved(d))&&(m=d);this._fireEvent(m?[m]:!1,i)},_onMouseMove:function(i){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(i);this._handleMouseHover(i,l)}},_handleMouseOut:function(i){var l=this._hoveredLayer;l&&(mt(this._container,"leaflet-interactive"),this._fireEvent([l],i,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(i,l){if(!this._mouseHoverThrottled){for(var d,m,E=this._drawFirst;E;E=E.next)d=E.layer,d.options.interactive&&d._containsPoint(l)&&(m=d);m!==this._hoveredLayer&&(this._handleMouseOut(i),m&&(Ee(this._container,"leaflet-interactive"),this._fireEvent([m],i,"mouseover"),this._hoveredLayer=m)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,i),this._mouseHoverThrottled=!0,setTimeout(p(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(i,l,d){this._map._fireDOMEvent(l,d||l.type,i)},_bringToFront:function(i){var l=i._order;if(l){var d=l.next,m=l.prev;if(d)d.prev=m;else return;m?m.next=d:d&&(this._drawFirst=d),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(i)}},_bringToBack:function(i){var l=i._order;if(l){var d=l.next,m=l.prev;if(m)m.next=d;else return;d?d.prev=m:m&&(this._drawLast=m),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(i)}}});function Ql(i){return be.canvas?new Zl(i):null}var to=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(i){return document.createElement("<lvml:"+i+' class="lvml">')}}catch{}return function(i){return document.createElement("<"+i+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),ac={_initContainer:function(){this._container=Ze("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Vr.prototype._update.call(this),this.fire("update"))},_initPath:function(i){var l=i._container=to("shape");Ee(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",i._path=to("path"),l.appendChild(i._path),this._updateStyle(i),this._layers[x(i)]=i},_addPath:function(i){var l=i._container;this._container.appendChild(l),i.options.interactive&&i.addInteractiveTarget(l)},_removePath:function(i){var l=i._container;lt(l),i.removeInteractiveTarget(l),delete this._layers[x(i)]},_updateStyle:function(i){var l=i._stroke,d=i._fill,m=i.options,E=i._container;E.stroked=!!m.stroke,E.filled=!!m.fill,m.stroke?(l||(l=i._stroke=to("stroke")),E.appendChild(l),l.weight=m.weight+"px",l.color=m.color,l.opacity=m.opacity,m.dashArray?l.dashStyle=Te(m.dashArray)?m.dashArray.join(" "):m.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=m.lineCap.replace("butt","flat"),l.joinstyle=m.lineJoin):l&&(E.removeChild(l),i._stroke=null),m.fill?(d||(d=i._fill=to("fill")),E.appendChild(d),d.color=m.fillColor||m.color,d.opacity=m.fillOpacity):d&&(E.removeChild(d),i._fill=null)},_updateCircle:function(i){var l=i._point.round(),d=Math.round(i._radius),m=Math.round(i._radiusY||d);this._setPath(i,i._empty()?"M0 0":"AL "+l.x+","+l.y+" "+d+","+m+" 0,"+65535*360)},_setPath:function(i,l){i._path.v=l},_bringToFront:function(i){Kn(i._container)},_bringToBack:function(i){un(i._container)}},pr=be.vml?to:fi,hs=Vr.extend({_initContainer:function(){this._container=pr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=pr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){lt(this._container),gt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Vr.prototype._update.call(this);var i=this._bounds,l=i.getSize(),d=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,d.setAttribute("width",l.x),d.setAttribute("height",l.y)),bt(d,i.min),d.setAttribute("viewBox",[i.min.x,i.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(i){var l=i._path=pr("path");i.options.className&&Ee(l,i.options.className),i.options.interactive&&Ee(l,"leaflet-interactive"),this._updateStyle(i),this._layers[x(i)]=i},_addPath:function(i){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(i._path),i.addInteractiveTarget(i._path)},_removePath:function(i){lt(i._path),i.removeInteractiveTarget(i._path),delete this._layers[x(i)]},_updatePath:function(i){i._project(),i._update()},_updateStyle:function(i){var l=i._path,d=i.options;l&&(d.stroke?(l.setAttribute("stroke",d.color),l.setAttribute("stroke-opacity",d.opacity),l.setAttribute("stroke-width",d.weight),l.setAttribute("stroke-linecap",d.lineCap),l.setAttribute("stroke-linejoin",d.lineJoin),d.dashArray?l.setAttribute("stroke-dasharray",d.dashArray):l.removeAttribute("stroke-dasharray"),d.dashOffset?l.setAttribute("stroke-dashoffset",d.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),d.fill?(l.setAttribute("fill",d.fillColor||d.color),l.setAttribute("fill-opacity",d.fillOpacity),l.setAttribute("fill-rule",d.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(i,l){this._setPath(i,Kr(i._parts,l))},_updateCircle:function(i){var l=i._point,d=Math.max(Math.round(i._radius),1),m=Math.max(Math.round(i._radiusY),1)||d,E="a"+d+","+m+" 0 1,0 ",P=i._empty()?"M0 0":"M"+(l.x-d)+","+l.y+E+d*2+",0 "+E+-d*2+",0 ";this._setPath(i,P)},_setPath:function(i,l){i._path.setAttribute("d",l)},_bringToFront:function(i){Kn(i._path)},_bringToBack:function(i){un(i._path)}});be.vml&&hs.include(ac);function Qa(i){return be.svg||be.vml?new hs(i):null}nt.include({getRenderer:function(i){var l=i.options.renderer||this._getPaneRenderer(i.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(i){if(i==="overlayPane"||i===void 0)return!1;var l=this._paneRenderers[i];return l===void 0&&(l=this._createRenderer({pane:i}),this._paneRenderers[i]=l),l},_createRenderer:function(i){return this.options.preferCanvas&&Ql(i)||Qa(i)}});var lc=ni.extend({initialize:function(i,l){ni.prototype.initialize.call(this,this._boundsToLatLngs(i),l)},setBounds:function(i){return this.setLatLngs(this._boundsToLatLngs(i))},_boundsToLatLngs:function(i){return i=Ne(i),[i.getSouthWest(),i.getNorthWest(),i.getNorthEast(),i.getSouthEast()]}});function ud(i,l){return new lc(i,l)}hs.create=pr,hs.pointsToPath=Kr,Or.geometryToLayer=Qs,Or.coordsToLatLng=Wa,Or.coordsToLatLngs=ta,Or.latLngToCoords=$a,Or.latLngsToCoords=qa,Or.getFeature=Ys,Or.asFeature=Ga,nt.mergeOptions({boxZoom:!0});var no=cn.extend({initialize:function(i){this._map=i,this._container=i._container,this._pane=i._panes.overlayPane,this._resetStateTimeout=0,i.on("unload",this._destroy,this)},addHooks:function(){ze(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){gt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){lt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(i){if(!i.shiftKey||i.which!==1&&i.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),tt(),ns(),this._startPoint=this._map.mouseEventToContainerPoint(i),ze(document,{contextmenu:vn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(i){this._moved||(this._moved=!0,this._box=Ze("div","leaflet-zoom-box",this._container),Ee(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(i);var l=new B(this._point,this._startPoint),d=l.getSize();bt(this._box,l.min),this._box.style.width=d.x+"px",this._box.style.height=d.y+"px"},_finish:function(){this._moved&&(lt(this._box),mt(this._container,"leaflet-crosshair")),yn(),rs(),gt(document,{contextmenu:vn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(i){if(!(i.which!==1&&i.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(p(this._resetState,this),0);var l=new Me(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(i){i.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});nt.addInitHook("addHandler","boxZoom",no),nt.mergeOptions({doubleClickZoom:!0});var uc=cn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(i){var l=this._map,d=l.getZoom(),m=l.options.zoomDelta,E=i.originalEvent.shiftKey?d-m:d+m;l.options.doubleClickZoom==="center"?l.setZoom(E):l.setZoomAround(i.containerPoint,E)}});nt.addInitHook("addHandler","doubleClickZoom",uc),nt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Yl=cn.extend({addHooks:function(){if(!this._draggable){var i=this._map;this._draggable=new xn(i._mapPane,i._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),i.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),i.on("zoomend",this._onZoomEnd,this),i.whenReady(this._onZoomEnd,this))}Ee(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){mt(this._map._container,"leaflet-grab"),mt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var i=this._map;if(i._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=Ne(this._map.options.maxBounds);this._offsetLimit=ne(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;i.fire("movestart").fire("dragstart"),i.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(i){if(this._map.options.inertia){var l=this._lastTime=+new Date,d=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(d),this._times.push(l),this._prunePositions(l)}this._map.fire("move",i).fire("drag",i)},_prunePositions:function(i){for(;this._positions.length>1&&i-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var i=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(i).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(i,l){return i-(i-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var i=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;i.x<l.min.x&&(i.x=this._viscousLimit(i.x,l.min.x)),i.y<l.min.y&&(i.y=this._viscousLimit(i.y,l.min.y)),i.x>l.max.x&&(i.x=this._viscousLimit(i.x,l.max.x)),i.y>l.max.y&&(i.y=this._viscousLimit(i.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(i)}},_onPreDragWrap:function(){var i=this._worldWidth,l=Math.round(i/2),d=this._initialWorldOffset,m=this._draggable._newPos.x,E=(m-l+d)%i+l-d,P=(m+l+d)%i-l-d,F=Math.abs(E+d)<Math.abs(P+d)?E:P;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=F},_onDragEnd:function(i){var l=this._map,d=l.options,m=!d.inertia||i.noInertia||this._times.length<2;if(l.fire("dragend",i),m)l.fire("moveend");else{this._prunePositions(+new Date);var E=this._lastPos.subtract(this._positions[0]),P=(this._lastTime-this._times[0])/1e3,F=d.easeLinearity,G=E.multiplyBy(F/P),J=G.distanceTo([0,0]),ae=Math.min(d.inertiaMaxSpeed,J),xe=G.multiplyBy(ae/J),Fe=ae/(d.inertiaDeceleration*F),et=xe.multiplyBy(-Fe/2).round();!et.x&&!et.y?l.fire("moveend"):(et=l._limitOffset(et,l.options.maxBounds),j(function(){l.panBy(et,{duration:Fe,easeLinearity:F,noMoveStart:!0,animate:!0})}))}}});nt.addInitHook("addHandler","dragging",Yl),nt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Jl=cn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(i){this._map=i,this._setPanDelta(i.options.keyboardPanDelta),this._setZoomDelta(i.options.zoomDelta)},addHooks:function(){var i=this._map._container;i.tabIndex<=0&&(i.tabIndex="0"),ze(i,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),gt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var i=document.body,l=document.documentElement,d=i.scrollTop||l.scrollTop,m=i.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(m,d)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(i){var l=this._panKeys={},d=this.keyCodes,m,E;for(m=0,E=d.left.length;m<E;m++)l[d.left[m]]=[-1*i,0];for(m=0,E=d.right.length;m<E;m++)l[d.right[m]]=[i,0];for(m=0,E=d.down.length;m<E;m++)l[d.down[m]]=[0,i];for(m=0,E=d.up.length;m<E;m++)l[d.up[m]]=[0,-1*i]},_setZoomDelta:function(i){var l=this._zoomKeys={},d=this.keyCodes,m,E;for(m=0,E=d.zoomIn.length;m<E;m++)l[d.zoomIn[m]]=i;for(m=0,E=d.zoomOut.length;m<E;m++)l[d.zoomOut[m]]=-i},_addHooks:function(){ze(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){gt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(i){if(!(i.altKey||i.ctrlKey||i.metaKey)){var l=i.keyCode,d=this._map,m;if(l in this._panKeys){if(!d._panAnim||!d._panAnim._inProgress)if(m=this._panKeys[l],i.shiftKey&&(m=se(m).multiplyBy(3)),d.options.maxBounds&&(m=d._limitOffset(se(m),d.options.maxBounds)),d.options.worldCopyJump){var E=d.wrapLatLng(d.unproject(d.project(d.getCenter()).add(m)));d.panTo(E)}else d.panBy(m)}else if(l in this._zoomKeys)d.setZoom(d.getZoom()+(i.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&d._popup&&d._popup.options.closeOnEscapeKey)d.closePopup();else return;vn(i)}}});nt.addInitHook("addHandler","keyboard",Jl),nt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var vt=cn.extend({addHooks:function(){ze(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){gt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(i){var l=Ko(i),d=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(i),this._startTime||(this._startTime=+new Date);var m=Math.max(d-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(p(this._performZoom,this),m),vn(i)},_performZoom:function(){var i=this._map,l=i.getZoom(),d=this._map.options.zoomSnap||0;i._stop();var m=this._delta/(this._map.options.wheelPxPerZoomLevel*4),E=4*Math.log(2/(1+Math.exp(-Math.abs(m))))/Math.LN2,P=d?Math.ceil(E/d)*d:E,F=i._limitZoom(l+(this._delta>0?P:-P))-l;this._delta=0,this._startTime=null,F&&(i.options.scrollWheelZoom==="center"?i.setZoom(l+F):i.setZoomAround(this._lastMousePos,l+F))}});nt.addInitHook("addHandler","scrollWheelZoom",vt);var Xl=600;nt.mergeOptions({tapHold:be.touchNative&&be.safari&&be.mobile,tapTolerance:15});var ia=cn.extend({addHooks:function(){ze(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){gt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(i){if(clearTimeout(this._holdTimeout),i.touches.length===1){var l=i.touches[0];this._startPos=this._newPos=new X(l.clientX,l.clientY),this._holdTimeout=setTimeout(p(function(){this._cancel(),this._isTapValid()&&(ze(document,"touchend",xt),ze(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),Xl),ze(document,"touchend touchcancel contextmenu",this._cancel,this),ze(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function i(){gt(document,"touchend",xt),gt(document,"touchend touchcancel",i)},_cancel:function(){clearTimeout(this._holdTimeout),gt(document,"touchend touchcancel contextmenu",this._cancel,this),gt(document,"touchmove",this._onMove,this)},_onMove:function(i){var l=i.touches[0];this._newPos=new X(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(i,l){var d=new MouseEvent(i,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});d._simulated=!0,l.target.dispatchEvent(d)}});nt.addInitHook("addHandler","tapHold",ia),nt.mergeOptions({touchZoom:be.touch,bounceAtZoomLimits:!0});var ro=cn.extend({addHooks:function(){Ee(this._map._container,"leaflet-touch-zoom"),ze(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){mt(this._map._container,"leaflet-touch-zoom"),gt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(i){var l=this._map;if(!(!i.touches||i.touches.length!==2||l._animatingZoom||this._zooming)){var d=l.mouseEventToContainerPoint(i.touches[0]),m=l.mouseEventToContainerPoint(i.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(d.add(m)._divideBy(2))),this._startDist=d.distanceTo(m),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),ze(document,"touchmove",this._onTouchMove,this),ze(document,"touchend touchcancel",this._onTouchEnd,this),xt(i)}},_onTouchMove:function(i){if(!(!i.touches||i.touches.length!==2||!this._zooming)){var l=this._map,d=l.mouseEventToContainerPoint(i.touches[0]),m=l.mouseEventToContainerPoint(i.touches[1]),E=d.distanceTo(m)/this._startDist;if(this._zoom=l.getScaleZoom(E,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&E<1||this._zoom>l.getMaxZoom()&&E>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,E===1)return}else{var P=d._add(m)._divideBy(2)._subtract(this._centerPoint);if(E===1&&P.x===0&&P.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(P),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),R(this._animRequest);var F=p(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=j(F,this,!0),xt(i)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,R(this._animRequest),gt(document,"touchmove",this._onTouchMove,this),gt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});nt.addInitHook("addHandler","touchZoom",ro),nt.BoxZoom=no,nt.DoubleClickZoom=uc,nt.Drag=Yl,nt.Keyboard=Jl,nt.ScrollWheelZoom=vt,nt.TapHold=ia,nt.TouchZoom=ro,t.Bounds=B,t.Browser=be,t.CRS=Xe,t.Canvas=Zl,t.Circle=Ba,t.CircleMarker=Ua,t.Class=ye,t.Control=nn,t.DivIcon=Za,t.DivOverlay=jr,t.DomEvent=Rr,t.DomUtil=is,t.Draggable=xn,t.Evented=Ve,t.FeatureGroup=ei,t.GeoJSON=Or,t.GridLayer=Ri,t.Handler=cn,t.Icon=cs,t.ImageOverlay=Ni,t.LatLng=Se,t.LatLngBounds=Me,t.Layer=dr,t.LayerGroup=bi,t.LineUtil=Fn,t.Map=nt,t.Marker=ti,t.Mixin=Hs,t.Path=Ai,t.Point=X,t.PolyUtil=qs,t.Polygon=ni,t.Polyline=zn,t.Popup=Ka,t.PosAnimation=as,t.Projection=Mr,t.Rectangle=lc,t.Renderer=Vr,t.SVG=hs,t.SVGOverlay=ql,t.TileLayer=Li,t.Tooltip=Xs,t.Transformation=gn,t.Util=A,t.VideoOverlay=$l,t.bind=p,t.bounds=ne,t.canvas=Ql,t.circle=ea,t.circleMarker=tc,t.control=Vn,t.divIcon=sc,t.extend=a,t.featureGroup=Xu,t.geoJSON=nc,t.geoJson=fr,t.gridLayer=eo,t.icon=ec,t.imageOverlay=rc,t.latLng=we,t.latLngBounds=Ne,t.layerGroup=Xo,t.map=jn,t.marker=od,t.point=se,t.polygon=ld,t.polyline=ad,t.popup=Js,t.rectangle=ud,t.setOptions=Z,t.stamp=x,t.svg=Qa,t.svgOverlay=Gl,t.tileLayer=Kl,t.tooltip=na,t.transformation=jt,t.version=o,t.videoOverlay=ic;var cc=window.L;t.noConflict=function(){return window.L=cc,this},window.L=t}))})(Tu,Tu.exports)),Tu.exports}var Ju=Pb();const Hw=Zy(Ju);function gm(r,e,t){return Object.freeze({instance:r,context:e,container:t})}function _m(r,e){return e==null?function(o,a){const c=le.useRef();return c.current||(c.current=r(o,a)),c}:function(o,a){const c=le.useRef();c.current||(c.current=r(o,a));const p=le.useRef(o),{instance:y}=c.current;return le.useEffect(function(){p.current!==o&&(e(y,o,p.current),p.current=o)},[y,o,a]),c}}function kb(r,e){le.useEffect(function(){return(e.layerContainer??e.map).addLayer(r.instance),function(){var c;(c=e.layerContainer)==null||c.removeLayer(r.instance),e.map.removeLayer(r.instance)}},[e,r])}function Ww(r){return function(t){const o=pm(),a=r(mm(t,o),o);return Fw(o.map,t.attribution),Bw(a.current,t.eventHandlers),kb(a.current,o),a}}function Cb(r,e){const t=_m(r,e),o=Ww(t);return xb(o)}function bb(r,e){const t=_m(r),o=Ib(t,e);return Eb(o)}function Ab(r,e){const t=_m(r,e),o=Ww(t);return Tb(o)}function Nb(r,e,t){const{opacity:o,zIndex:a}=e;o!=null&&o!==t.opacity&&r.setOpacity(o),a!=null&&a!==t.zIndex&&r.setZIndex(a)}function Rb(){return pm().map}function cp(){return cp=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=t[o])}return r},cp.apply(this,arguments)}function Lb({bounds:r,boundsOptions:e,center:t,children:o,className:a,id:c,placeholder:p,style:y,whenReady:x,zoom:T,...k},C){const[N]=le.useState({className:a,id:c,style:y}),[H,$]=le.useState(null);le.useImperativeHandle(C,()=>(H==null?void 0:H.map)??null,[H]);const Z=le.useCallback(he=>{if(he!==null&&H===null){const _e=new Ju.Map(he,k);t!=null&&T!=null?_e.setView(t,T):r!=null&&_e.fitBounds(r,e),x!=null&&_e.whenReady(x),$(vb(_e))}},[]);le.useEffect(()=>()=>{H==null||H.map.remove()},[H]);const te=H?Df.createElement(Uw,{value:H},o):p??null;return Df.createElement("div",cp({},N,{ref:Z}),te)}const Db=le.forwardRef(Lb),Mb=Cb(function({position:e,...t},o){const a=new Ju.Marker(e,t);return gm(a,wb(o,{overlayContainer:a}))},function(e,t,o){t.position!==o.position&&e.setLatLng(t.position),t.icon!=null&&t.icon!==o.icon&&e.setIcon(t.icon),t.zIndexOffset!=null&&t.zIndexOffset!==o.zIndexOffset&&e.setZIndexOffset(t.zIndexOffset),t.opacity!=null&&t.opacity!==o.opacity&&e.setOpacity(t.opacity),e.dragging!=null&&t.draggable!==o.draggable&&(t.draggable===!0?e.dragging.enable():e.dragging.disable())}),Ob=bb(function(e,t){const o=new Ju.Popup(e,t.overlayContainer);return gm(o,t)},function(e,t,{position:o},a){le.useEffect(function(){const{instance:p}=e;function y(T){T.popup===p&&(p.update(),a(!0))}function x(T){T.popup===p&&a(!1)}return t.map.on({popupopen:y,popupclose:x}),t.overlayContainer==null?(o!=null&&p.setLatLng(o),p.openOn(t.map)):t.overlayContainer.bindPopup(p),function(){var k;t.map.off({popupopen:y,popupclose:x}),(k=t.overlayContainer)==null||k.unbindPopup(),t.map.removeLayer(p)}},[e,t,a,o])}),jb=Ab(function({url:e,...t},o){const a=new Ju.TileLayer(e,mm(t,o));return gm(a,o)},function(e,t,o){Nb(e,t,o);const{url:a}=t;a!=null&&a!==o.url&&e.setUrl(a)}),$w={food:"#f97316",sightseeing:"#3b82f6",activity:"#22c55e",transport:"#6b7280",accommodation:"#a855f7",free:"#14b8a6"},qw={food:"",sightseeing:"",activity:"",transport:"",accommodation:"",free:""};function Vb(r){const e=$w[r]??"#6366f1",t=qw[r]??"";return Hw.divIcon({className:"",html:`<div style="background:${e};width:32px;height:32px;border-radius:50%;border:2.5px solid rgba(255,255,255,0.9);box-shadow:0 2px 8px rgba(0,0,0,.45);display:flex;align-items:center;justify-content:center;font-size:15px">${t}</div>`,iconSize:[32,32],iconAnchor:[16,16],popupAnchor:[0,-20]})}function Fb({positions:r,fallback:e,posKey:t}){const o=Rb();return le.useEffect(()=>{r.length>1?o.fitBounds(Hw.latLngBounds(r),{padding:[50,50],animate:!0,duration:.7}):r.length===1?o.setView(r[0],14,{animate:!0,duration:.7}):e&&o.setView(e,12,{animate:!0,duration:.7})},[t,e==null?void 0:e[0],e==null?void 0:e[1]]),null}function zb({trip:r}){const[e,t]=le.useState(null),[o,a]=le.useState(null),[c,p]=le.useState(!1),y=r.itinerary.some($=>$.activities.some(Z=>Z.lat&&Z.lng));le.useEffect(()=>{y||(p(!0),fetch(`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(r.destination)}&format=json&limit=1`,{headers:{"Accept-Language":"en"}}).then($=>$.json()).then($=>{$[0]&&a([parseFloat($[0].lat),parseFloat($[0].lon)])}).catch(()=>{}).finally(()=>p(!1)))},[r.destination,y]);const x=r.itinerary.flatMap($=>$.activities.map(Z=>({...Z,dayId:$.id,dayDate:$.date,dayTitle:$.title}))),k=(e?x.filter($=>$.dayId===e):x).filter($=>$.lat&&$.lng),C=k.map($=>[$.lat,$.lng]),N=C.map($=>`${$[0]},${$[1]}`).join("|"),H=r.itinerary.length===0;return _.jsxs("div",{className:"space-y-4",children:[r.itinerary.length>0&&_.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-1 scrollbar-hide",children:[_.jsx("button",{onClick:()=>t(null),className:`shrink-0 px-3 py-1.5 rounded-full text-sm font-medium transition ${e===null?"bg-indigo-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:"All days"}),r.itinerary.map(($,Z)=>_.jsxs("button",{onClick:()=>t($.id===e?null:$.id),className:`shrink-0 px-3 py-1.5 rounded-full text-sm font-medium transition ${e===$.id?"bg-indigo-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:["Day ",Z+1]},$.id))]}),_.jsxs("div",{className:"relative rounded-2xl overflow-hidden border border-gray-800",style:{height:"460px"},children:[c&&_.jsxs("div",{className:"absolute inset-0 bg-gray-900/80 z-[500] flex items-center justify-center gap-2",children:[_.jsx(Wn,{className:"w-5 h-5 animate-spin text-indigo-400"}),_.jsxs("span",{className:"text-sm text-gray-400",children:["Locating ",r.destination,""]})]}),_.jsxs(Db,{center:[20,0],zoom:2,style:{height:"100%",width:"100%"},scrollWheelZoom:!0,children:[_.jsx(jb,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),_.jsx(Fb,{positions:C,fallback:o,posKey:N}),k.map($=>_.jsx(Mb,{position:[$.lat,$.lng],icon:Vb($.category),children:_.jsx(Ob,{children:_.jsxs("div",{className:"text-gray-800 text-sm",style:{minWidth:"180px"},children:[_.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[_.jsx("span",{children:qw[$.category]??""}),_.jsx("span",{className:"font-semibold",children:$.title})]}),_.jsxs("p",{className:"text-xs text-gray-500 mb-1",children:[$.dayDate,"  ",$.time]}),_.jsx("p",{className:"text-xs text-gray-600 leading-snug",children:$.description}),($.estimatedCost??0)>0&&_.jsxs("p",{className:"text-xs text-gray-500 mt-1 font-medium",children:["~$",$.estimatedCost]})]})})},`${$.id}-${$.dayId}`))]})]}),H&&_.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-6 text-center",children:[_.jsx("span",{className:"text-3xl block mb-3",children:""}),_.jsx("h3",{className:"font-semibold text-gray-300 mb-1",children:"No itinerary yet"}),_.jsx("p",{className:"text-sm text-gray-500",children:"Generate an itinerary first  each activity will appear as a pin on the map."})]}),!H&&k.length===0&&!c&&_.jsxs("div",{className:"bg-amber-500/10 border border-amber-500/20 rounded-2xl p-4 text-center",children:[_.jsx("p",{className:"text-sm text-amber-300 font-medium",children:"No GPS coordinates in your itinerary"}),_.jsx("p",{className:"text-xs text-amber-400/70 mt-1",children:"Regenerate your itinerary  the AI will include location coordinates for each activity."})]}),k.length>0&&_.jsx("div",{className:"flex flex-wrap gap-x-4 gap-y-2",children:Object.entries($w).map(([$,Z])=>k.some(te=>te.category===$)?_.jsxs("div",{className:"flex items-center gap-1.5",children:[_.jsx("div",{className:"w-3 h-3 rounded-full shrink-0",style:{backgroundColor:Z}}),_.jsx("span",{className:"text-xs text-gray-500 capitalize",children:$})]},$):null)})]})}const Ub=[{label:" Weather",query:"Current weather forecast and what to pack"},{label:" Flights",query:"Current flight prices and booking recommendations"},{label:" Hotels",query:"Best hotels and accommodation options with current prices"},{label:" Events",query:"Events, festivals and activities happening during my trip"},{label:" Restaurants",query:"Best local restaurants and must-try dishes"},{label:" Travel Tips",query:"Essential travel tips, visa requirements and local customs"}];function Bb({trip:r,perplexityKey:e,hasSearchKey:t,onSettingsClick:o}){const[a,c]=le.useState(""),[p,y]=le.useState(""),[x,T]=le.useState(!1),[k,C]=le.useState(""),[N,H]=le.useState(""),$=async Z=>{if(!(!Z.trim()||x)){T(!0),C(""),y(""),H(Z);try{const te=await JC(Z,r,e);y(te)}catch(te){C(te instanceof Error?te.message:"Search failed")}finally{T(!1)}}};return t?_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-5",children:[_.jsx("h3",{className:"font-semibold text-gray-200 mb-1",children:"Live Travel Search"}),_.jsxs("p",{className:"text-sm text-gray-500",children:["Real-time info for ",_.jsx("span",{className:"text-gray-300",children:r.destination}),"  powered by Perplexity Sonar"]})]}),_.jsx("div",{className:"flex flex-wrap gap-2",children:Ub.map(Z=>_.jsx("button",{onClick:()=>{c(Z.query),$(Z.query)},disabled:x,className:`px-3 py-1.5 rounded-full text-sm font-medium transition disabled:opacity-50 ${N===Z.query&&(x||p)?"bg-indigo-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700 hover:text-gray-200"}`,children:Z.label},Z.label))}),_.jsxs("form",{onSubmit:Z=>{Z.preventDefault(),$(a)},className:"flex gap-2",children:[_.jsx("input",{value:a,onChange:Z=>c(Z.target.value),placeholder:`Search anything about ${r.destination}`,disabled:x,className:"flex-1 bg-gray-900 border border-gray-700 rounded-xl px-4 py-3 text-gray-100 placeholder-gray-600 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition disabled:opacity-50 text-sm"}),_.jsx("button",{type:"submit",disabled:!a.trim()||x,className:"px-4 py-3 bg-indigo-600 hover:bg-indigo-500 disabled:opacity-40 disabled:cursor-not-allowed rounded-xl transition shrink-0",children:x?_.jsx(Wn,{className:"w-5 h-5 animate-spin"}):_.jsx(F_,{className:"w-5 h-5"})})]}),k&&_.jsx("div",{className:"text-sm text-red-300 bg-red-500/10 border border-red-500/20 rounded-xl px-4 py-3",children:k}),x&&_.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-8 flex flex-col items-center gap-3",children:[_.jsx(Wn,{className:"w-8 h-8 animate-spin text-indigo-400"}),_.jsx("p",{className:"text-sm text-gray-500",children:"Searching the web for real-time info"})]}),p&&!x&&_.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-5",children:[_.jsxs("div",{className:"flex items-center gap-2 mb-4 pb-3 border-b border-gray-800",children:[_.jsx("div",{className:"w-6 h-6 bg-indigo-500/20 rounded-lg flex items-center justify-center",children:_.jsx(F_,{className:"w-3.5 h-3.5 text-indigo-400"})}),_.jsx("span",{className:"text-sm font-medium text-gray-300",children:"Results"}),_.jsx("span",{className:"text-xs text-emerald-400 bg-emerald-500/10 px-2 py-0.5 rounded-full ml-auto",children:"Live"})]}),_.jsx("div",{className:"text-sm text-gray-300 leading-relaxed whitespace-pre-wrap",children:p})]})]}):_.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[_.jsx("div",{className:"w-16 h-16 bg-gray-800 border border-gray-700 rounded-2xl flex items-center justify-center mb-5",children:_.jsx(Ps,{className:"w-7 h-7 text-gray-500"})}),_.jsx("h3",{className:"text-lg font-semibold text-gray-400 mb-2",children:"Travel Search unavailable"}),_.jsxs("p",{className:"text-gray-600 max-w-sm mb-6 leading-relaxed text-sm",children:["Add your Perplexity API key to search real-time travel info  flights, hotels, weather, events, and more for ",r.destination,"."]}),_.jsxs("button",{onClick:o,className:"flex items-center gap-2 px-5 py-2.5 bg-gray-800 hover:bg-gray-700 border border-gray-700 rounded-xl text-sm text-gray-300 transition",children:[_.jsx(Ca,{className:"w-4 h-4"}),"Set up in Settings"]})]})}const Ky=[{id:"overview",label:"Overview",emoji:""},{id:"itinerary",label:"Itinerary",emoji:""},{id:"packing",label:"Packing",emoji:""},{id:"map",label:"Map",emoji:""},{id:"chat",label:"AI Chat",emoji:"",searchOnly:!0},{id:"search",label:"Search",emoji:"",searchOnly:!0}],Hb={planning:"upcoming",upcoming:"completed",completed:"planning"},Wb={planning:"bg-amber-500/20 border-amber-500/30 text-amber-300 hover:bg-amber-500/30",upcoming:"bg-blue-500/20 border-blue-500/30 text-blue-300 hover:bg-blue-500/30",completed:"bg-emerald-500/20 border-emerald-500/30 text-emerald-300 hover:bg-emerald-500/30"};function $b({trip:r,activeTab:e,onTabChange:t,onBack:o,onDelete:a,onGenerateItinerary:c,onGeneratePackingList:p,onUpdateTrip:y,getChatHistory:x,saveChatHistory:T,perplexityKey:k,anthropicKey:C,hasGenerationKey:N,hasSearchKey:H,onSettingsClick:$}){const Z=new Date(r.startDate+"T12:00:00"),te=new Date(r.endDate+"T12:00:00"),he=Math.ceil((te.getTime()-Z.getTime())/864e5)+1,_e=()=>{confirm(`Delete "${r.name}"? This cannot be undone.`)&&a(r.id)},Te=()=>y({...r,status:Hb[r.status]}),Oe=r.itinerary.reduce((R,A)=>{var ye;return R+(((ye=A.activities)==null?void 0:ye.length)??0)},0),ke=r.packingList.filter(R=>R.packed).length,fe=r.itinerary.flatMap(R=>R.activities??[]).reduce((R,A)=>R+(A.estimatedCost||0),0),V=fe*r.travelers,D=r.budget-V,M=Math.min(100,r.budget>0?V/r.budget*100:0),z=D<0,j=!N&&!H;return _.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-950 pb-16 md:pb-0",children:[_.jsxs("div",{className:`bg-gradient-to-br ${r.coverGradient} relative`,children:[_.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/20 via-transparent to-black/50"}),_.jsxs("div",{className:"relative max-w-5xl mx-auto px-4 md:px-6 pt-4 flex items-center justify-between",children:[_.jsx("button",{onClick:o,className:"p-2 text-white/70 hover:text-white hover:bg-white/10 rounded-lg transition",children:_.jsx(Wf,{className:"w-5 h-5"})}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsxs("button",{onClick:$,className:"relative p-2 text-white/50 hover:text-white hover:bg-white/10 rounded-lg transition",title:"API Settings",children:[_.jsx(Ca,{className:"w-4 h-4"}),j&&_.jsx("span",{className:"absolute top-1.5 right-1.5 w-1.5 h-1.5 bg-amber-400 rounded-full"})]}),_.jsxs("button",{onClick:Te,className:`text-xs px-2.5 py-1.5 rounded-full font-medium border transition ${Wb[r.status]}`,children:[_.jsx(eS,{className:"w-3 h-3 inline mr-1"}),r.status]}),_.jsx("button",{onClick:_e,className:"p-2 text-white/40 hover:text-red-300 hover:bg-red-500/20 rounded-lg transition",children:_.jsx(Bh,{className:"w-4 h-4"})})]})]}),_.jsx("div",{className:"relative max-w-5xl mx-auto px-4 md:px-6 pt-3 pb-4 md:pb-5",children:_.jsxs("div",{className:"flex items-start gap-3",children:[_.jsx("span",{className:"text-4xl md:text-5xl drop-shadow-lg shrink-0 mt-0.5",children:r.emoji}),_.jsxs("div",{className:"flex-1 min-w-0",children:[_.jsx("h1",{className:"text-xl md:text-2xl font-bold text-white leading-tight",children:r.name}),_.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5 text-white/70",children:[_.jsx(Uh,{className:"w-3.5 h-3.5 shrink-0"}),_.jsx("span",{className:"text-sm truncate",children:r.destination})]}),_.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-white/60 overflow-x-auto scrollbar-hide",children:[_.jsxs("span",{className:"flex items-center gap-1 shrink-0",children:[_.jsx(Tp,{className:"w-3.5 h-3.5"}),Z.toLocaleDateString("en",{month:"short",day:"numeric"})," "," ",te.toLocaleDateString("en",{month:"short",day:"numeric",year:"numeric"}),_.jsxs("span",{className:"text-white/30 ml-1",children:["(",he,"d)"]})]}),_.jsxs("span",{className:"flex items-center gap-1 shrink-0",children:[_.jsx(Pp,{className:"w-3.5 h-3.5"}),r.travelers]}),_.jsxs("span",{className:"flex items-center gap-1 shrink-0",children:[_.jsx(Ip,{className:"w-3.5 h-3.5"}),r.currency," ",r.budget.toLocaleString()]})]})]})]})}),_.jsx("div",{className:"hidden md:block relative max-w-5xl mx-auto px-6 pb-0",children:_.jsx("div",{className:"flex gap-1 w-fit overflow-x-auto",children:Ky.map(R=>{const A=!!(R.searchOnly&&!H);return _.jsxs("button",{onClick:()=>!A&&t(R.id),disabled:A,className:`px-4 py-2.5 rounded-t-xl text-sm font-medium transition flex items-center gap-1.5 whitespace-nowrap ${A?"text-white/30 cursor-not-allowed":e===R.id?"bg-gray-950 text-white":"text-white/60 hover:text-white/90 hover:bg-white/10"}`,children:[_.jsx("span",{children:R.emoji}),R.label,A&&_.jsx(Ps,{className:"w-3 h-3"})]},R.id)})})})]}),_.jsxs("div",{className:"flex-1 max-w-5xl mx-auto w-full px-4 md:px-6 py-5 md:py-6",children:[e==="overview"&&_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-5 md:p-6",children:[_.jsx("h3",{className:"font-semibold text-gray-200 mb-2",children:"About this trip"}),_.jsx("p",{className:"text-gray-400 leading-relaxed text-sm md:text-base",children:r.description})]}),_.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[{label:"Days",value:he,suffix:""},{label:"Activities",value:Oe||"",suffix:""},{label:"Items packed",value:ke||"",suffix:r.packingList.length>0?`/${r.packingList.length}`:""},{label:"Interests",value:r.interests.length,suffix:""}].map(({label:R,value:A,suffix:ye})=>_.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-4 md:p-5 text-center",children:[_.jsxs("p",{className:"text-xl md:text-2xl font-bold text-indigo-400",children:[A,ye&&_.jsx("span",{className:"text-sm text-gray-500",children:ye})]}),_.jsx("p",{className:"text-xs text-gray-500 mt-1",children:R})]},R))}),_.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-5 md:p-6",children:[_.jsxs("div",{className:"flex items-center justify-between mb-4",children:[_.jsx("h3",{className:"font-semibold text-gray-200",children:"Provisional Budget"}),_.jsx("span",{className:`text-xs font-medium px-2.5 py-1 rounded-full border ${V===0?"bg-gray-800 text-gray-500 border-gray-700":z?"bg-red-500/15 text-red-300 border-red-500/25":"bg-emerald-500/15 text-emerald-300 border-emerald-500/25"}`,children:V===0?"No estimates yet":z?` ${r.currency}${Math.abs(D).toLocaleString()} over`:` ${r.currency}${D.toLocaleString()} left`})]}),_.jsx("div",{className:"grid grid-cols-3 gap-2 md:gap-3 mb-4 text-center",children:[{label:"Allocated",val:`${r.currency} ${r.budget.toLocaleString()}`,color:"text-gray-200"},{label:"Est. spend",val:`${r.currency} ${V.toLocaleString()}`,color:V===0?"text-gray-500":z?"text-red-400":"text-gray-200"},{label:"Remaining",val:V===0?"":`${r.currency} ${D.toLocaleString()}`,color:V===0?"text-gray-500":z?"text-red-400":"text-emerald-400"}].map(({label:R,val:A,color:ye})=>_.jsxs("div",{className:"bg-gray-800/60 rounded-xl p-3",children:[_.jsx("p",{className:"text-xs text-gray-500 mb-1",children:R}),_.jsx("p",{className:`font-semibold text-sm ${ye}`,children:A})]},R))}),_.jsx("div",{className:"h-2 bg-gray-800 rounded-full overflow-hidden",children:_.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${z?"bg-red-500":M>80?"bg-amber-500":"bg-emerald-500"}`,style:{width:`${M}%`}})}),_.jsx("p",{className:"text-xs text-gray-600 mt-2",children:V===0?"Add cost estimates to activities to track spending.":`${r.currency}${fe.toLocaleString()} /person  ${r.travelers} traveler(s)`})]}),_.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-5 md:p-6",children:[_.jsx("h3",{className:"font-semibold text-gray-200 mb-3",children:"Interests"}),_.jsx("div",{className:"flex flex-wrap gap-2",children:r.interests.map(R=>_.jsx("span",{className:"text-sm bg-indigo-500/15 text-indigo-300 border border-indigo-500/25 px-3 py-1 rounded-full",children:R},R))})]}),_.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[{tab:"itinerary",emoji:"",title:"Itinerary",desc:r.itinerary.length?`${he} days planned`:"View & edit day-by-day",locked:!1},{tab:"packing",emoji:"",title:"Packing",desc:r.packingList.length?`${ke}/${r.packingList.length} packed`:"View packing list",locked:!1},{tab:"chat",emoji:"",title:"AI Chat",desc:H?"Ask anything about your trip":"Requires Perplexity key",locked:!H},{tab:"search",emoji:"",title:"Search",desc:H?"Real-time flights, hotels, weather":"Requires Perplexity key",locked:!H}].map(({tab:R,emoji:A,title:ye,desc:Ge,locked:pe})=>_.jsxs("button",{onClick:()=>!pe&&t(R),disabled:pe,className:`flex items-center gap-3 bg-gray-900 border rounded-2xl p-4 text-left transition group ${pe?"border-gray-800 opacity-50 cursor-not-allowed":"border-gray-800 hover:border-gray-600"}`,children:[_.jsx("span",{className:`text-2xl ${pe?"grayscale":""}`,children:A}),_.jsxs("div",{className:"flex-1 min-w-0",children:[_.jsxs("p",{className:`font-medium text-sm flex items-center gap-1.5 ${pe?"text-gray-500":"text-gray-200 group-hover:text-white transition"}`,children:[ye,pe&&_.jsx(Ps,{className:"w-3 h-3"})]}),_.jsx("p",{className:"text-xs text-gray-500 truncate",children:Ge})]})]},R))})]}),e==="itinerary"&&_.jsx(ub,{trip:r,onGenerate:c,onUpdate:y,hasAiKey:N,onSettingsClick:$}),e==="packing"&&_.jsx(hb,{trip:r,onGenerate:p,onUpdate:y,hasAiKey:N,onSettingsClick:$}),e==="map"&&_.jsx(zb,{trip:r}),e==="chat"&&_.jsx(gb,{trip:r,perplexityKey:k,anthropicKey:C,hasAiKey:H,onSettingsClick:$,getChatHistory:x,saveChatHistory:T}),e==="search"&&_.jsx(Bb,{trip:r,perplexityKey:k,hasSearchKey:H,onSettingsClick:$})]}),_.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 z-30 bg-gray-900/95 backdrop-blur-md border-t border-gray-800",children:_.jsx("div",{className:"flex items-center overflow-x-auto px-2 pt-1 pb-2 gap-1 scrollbar-hide",children:Ky.map(R=>{const A=!!(R.searchOnly&&!H);return _.jsxs("button",{onClick:()=>!A&&t(R.id),disabled:A,className:`flex flex-col items-center gap-0.5 shrink-0 min-w-[52px] py-1.5 px-1 rounded-xl transition ${A?"text-gray-700 cursor-not-allowed":e===R.id?"text-indigo-400":"text-gray-500"}`,children:[_.jsx("span",{className:`text-xl leading-none ${A?"grayscale opacity-40":""}`,children:R.emoji}),_.jsxs("span",{className:"text-[10px] font-medium flex items-center gap-0.5 whitespace-nowrap",children:[R.label,A&&_.jsx(Ps,{className:"w-2.5 h-2.5"})]}),e===R.id&&!A&&_.jsx("span",{className:"w-1 h-1 bg-indigo-400 rounded-full"})]},R.id)})})})]})}function qb(){const[r,e]=le.useState([]),[t,o]=le.useState(!0),[a,c]=le.useState(!1),p=le.useRef(null);le.useEffect(()=>(Uy(C=>{e(N=>{const H=N.findIndex($=>$.id===C.id);if(H!==-1){const $=[...N];return $[H]=C,$}return[...N.slice(-49),C]}),c(!0),setTimeout(()=>c(!1),2e3)}),()=>Uy(null)),[]),le.useEffect(()=>{var C;t&&((C=p.current)==null||C.scrollIntoView({behavior:"smooth"}))},[r,t]);const y=r.filter(C=>C.status==="pending").length,x=r.length>0,T=C=>C==="pending"?_.jsx(Wn,{className:"w-3.5 h-3.5 text-indigo-400 animate-spin shrink-0"}):C==="success"?_.jsx(WI,{className:"w-3.5 h-3.5 text-emerald-400 shrink-0"}):_.jsx($I,{className:"w-3.5 h-3.5 text-red-400 shrink-0"}),k=C=>C==="pending"?"border-l-indigo-500":C==="success"?"border-l-emerald-500":"border-l-red-500";return _.jsxs("div",{className:`fixed z-40 rounded-2xl border border-gray-700 shadow-2xl shadow-black/60 overflow-hidden transition-all duration-200
        bottom-[72px] left-3 right-3
        md:bottom-4 md:left-auto md:right-4 md:w-80 ${a?"ring-1 ring-indigo-500/40":""}`,children:[_.jsxs("button",{onClick:()=>o(C=>!C),className:"w-full flex items-center justify-between px-4 py-3 bg-gray-900 hover:bg-gray-800 transition",children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx(VI,{className:"w-4 h-4 text-indigo-400"}),_.jsx("span",{className:"text-sm font-medium text-gray-200",children:"Activity"}),y>0&&_.jsxs("span",{className:"flex items-center gap-1 text-xs text-indigo-300 bg-indigo-500/20 px-2 py-0.5 rounded-full",children:[_.jsx(Wn,{className:"w-2.5 h-2.5 animate-spin"}),y," running"]}),!t&&x&&y===0&&_.jsxs("span",{className:"text-xs text-gray-500",children:[r.length," events"]})]}),_.jsxs("div",{className:"flex items-center gap-1",children:[t&&x&&_.jsx("span",{onClick:C=>{C.stopPropagation(),e([])},className:"p-1 text-gray-600 hover:text-gray-400 rounded transition cursor-pointer",title:"Clear log",children:_.jsx(Bh,{className:"w-3.5 h-3.5"})}),t?_.jsx(UI,{className:"w-4 h-4 text-gray-400"}):_.jsx(BI,{className:"w-4 h-4 text-gray-400"})]})]}),t&&_.jsxs("div",{className:"bg-gray-950 max-h-64 overflow-y-auto",children:[r.length===0?_.jsx("div",{className:"px-4 py-6 text-center text-xs text-gray-600",children:"No activity yet. Start by creating a trip or generating content."}):_.jsx("div",{className:"divide-y divide-gray-800/50",children:r.map(C=>_.jsx("div",{className:`px-4 py-2.5 border-l-2 ${k(C.status)}`,children:_.jsxs("div",{className:"flex items-start gap-2",children:[_.jsx("div",{className:"mt-0.5",children:T(C.status)}),_.jsxs("div",{className:"flex-1 min-w-0",children:[_.jsx("p",{className:"text-xs text-gray-300 leading-snug",children:C.message}),C.detail&&_.jsx("p",{className:"text-xs text-red-400 mt-0.5 leading-snug",children:C.detail}),_.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:new Date(C.timestamp).toLocaleTimeString("en",{hour:"2-digit",minute:"2-digit",second:"2-digit"})})]})]})},C.id))}),_.jsx("div",{ref:p})]})]})}function Gb(){return Math.random().toString(36).slice(2,11)}function Kb(){const{user:r,loading:e}=RC(),[t,o]=le.useState([]),[a,c]=le.useState("dashboard"),[p,y]=le.useState(null),[x,T]=le.useState("overview"),[k,C]=le.useState(""),[N,H]=le.useState(""),[$,Z]=le.useState(!1);le.useEffect(()=>{if(!r){o([]),C(""),H(""),c("dashboard"),y(null);return}let R=!1;return Promise.all([DC(r.uid).catch(()=>[]),VC(r.uid).catch(()=>({perplexityKey:"",anthropicKey:""}))]).then(([A,ye])=>{R||(o(A),C(ye.perplexityKey),H(ye.anthropicKey))}),()=>{R=!0}},[r]);const te=async R=>{C(R.perplexityKey),H(R.anthropicKey),r&&await FC(r.uid,R)},he=()=>xT(Mh),_e=async R=>{if(!(r!=null&&r.email))return;const A=ka.credential(r.email,R);await mT(r,A),await zC(r.uid),await ET(r)},Te=async R=>{var Ge,pe;const A=await KC({...R,anthropicKey:N,context:R.context}),ye={id:Gb(),name:A.name,emoji:A.emoji,description:A.description,coverGradient:A.coverGradient,destination:R.destination,country:((Ge=R.destination.split(",").pop())==null?void 0:Ge.trim())??R.destination,startDate:R.startDate,endDate:R.endDate,travelers:R.travelers,budget:R.budget,currency:R.currency,interests:R.interests,notes:((pe=R.context)==null?void 0:pe.text)||void 0,itinerary:[],packingList:[],status:"planning",createdAt:new Date().toISOString()};return o(Ve=>[...Ve,ye]),y(ye),T("overview"),c("detail"),r&&await zy(r.uid,ye),ye},Oe=async R=>{o(A=>A.map(ye=>ye.id===R.id?R:ye)),y(R),r&&await zy(r.uid,R)},ke=async R=>{o(A=>A.filter(ye=>ye.id!==R)),c("dashboard"),y(null),r&&await MC(r.uid,R)},fe=async R=>{const A=await ZC(R,N),ye={...R,itinerary:A};return await Oe(ye),ye},V=async R=>{const A=await QC(R,N),ye={...R,packingList:A};return await Oe(ye),ye},D=R=>r?OC(r.uid,R):Promise.resolve([]),M=(R,A)=>r?jC(r.uid,R,A):Promise.resolve();if(e)return _.jsx("div",{className:"min-h-screen bg-gray-950 flex items-center justify-center",children:_.jsx(Wn,{className:"w-8 h-8 text-indigo-400 animate-spin"})});if(!r)return _.jsx(eb,{});const z=!!N,j=!!k;return _.jsxs("div",{className:"min-h-screen bg-gray-950 text-gray-100 font-sans",children:[_.jsx(qb,{}),$&&_.jsx(tb,{onSave:te,existing:{perplexityKey:k,anthropicKey:N},onClose:()=>Z(!1),onLogout:he,onDeleteAccount:_e}),a==="dashboard"&&_.jsx(nb,{trips:t,onNewTrip:()=>c("wizard"),onSelectTrip:R=>{y(R),T("overview"),c("detail")},onSettingsClick:()=>Z(!0),hasAiKey:z}),a==="wizard"&&_.jsx(ob,{onBack:()=>c("dashboard"),onCreate:Te,hasAiKey:z,hasClaudeKey:!!N,onSettingsClick:()=>Z(!0)}),a==="detail"&&p&&_.jsx($b,{trip:p,activeTab:x,onTabChange:T,onBack:()=>c("dashboard"),onDelete:ke,onGenerateItinerary:fe,onGeneratePackingList:V,onUpdateTrip:Oe,getChatHistory:D,saveChatHistory:M,perplexityKey:k,anthropicKey:N,hasGenerationKey:z,hasSearchKey:j,onSettingsClick:()=>Z(!0)})]})}Mx.createRoot(document.getElementById("root")).render(_.jsx(le.StrictMode,{children:_.jsx(Kb,{})}));
