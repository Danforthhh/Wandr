(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const p of c.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&o(p)}).observe(document,{childList:!0,subtree:!0});function t(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(a){if(a.ep)return;a.ep=!0;const c=t(a);fetch(a.href,c)}})();function Ky(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var ff={exports:{}},fu={},pf={exports:{}},nt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qg;function Ex(){if(Qg)return nt;Qg=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),p=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),I=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),k=Symbol.iterator;function b(B){return B===null||typeof B!="object"?null:(B=k&&B[k]||B["@@iterator"],typeof B=="function"?B:null)}var q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},W=Object.assign,Q={};function Y(B,ne,Me){this.props=B,this.context=ne,this.refs=Q,this.updater=Me||q}Y.prototype.isReactComponent={},Y.prototype.setState=function(B,ne){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,ne,"setState")},Y.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function de(){}de.prototype=Y.prototype;function pe(B,ne,Me){this.props=B,this.context=ne,this.refs=Q,this.updater=Me||q}var Ee=pe.prototype=new de;Ee.constructor=pe,W(Ee,Y.prototype),Ee.isPureReactComponent=!0;var Ce=Array.isArray,Se=Object.prototype.hasOwnProperty,Le={current:null},F={key:!0,ref:!0,__self:!0,__source:!0};function R(B,ne,Me){var Ne,Ae={},we=null,et=null;if(ne!=null)for(Ne in ne.ref!==void 0&&(et=ne.ref),ne.key!==void 0&&(we=""+ne.key),ne)Se.call(ne,Ne)&&!F.hasOwnProperty(Ne)&&(Ae[Ne]=ne[Ne]);var Qe=arguments.length-2;if(Qe===1)Ae.children=Me;else if(1<Qe){for(var mt=Array(Qe),Kt=0;Kt<Qe;Kt++)mt[Kt]=arguments[Kt+2];Ae.children=mt}if(B&&B.defaultProps)for(Ne in Qe=B.defaultProps,Qe)Ae[Ne]===void 0&&(Ae[Ne]=Qe[Ne]);return{$$typeof:r,type:B,key:we,ref:et,props:Ae,_owner:Le.current}}function O(B,ne){return{$$typeof:r,type:B.type,key:ne,ref:B.ref,props:B.props,_owner:B._owner}}function U(B){return typeof B=="object"&&B!==null&&B.$$typeof===r}function D(B){var ne={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(Me){return ne[Me]})}var V=/\/+/g;function N(B,ne){return typeof B=="object"&&B!==null&&B.key!=null?D(""+B.key):ne.toString(36)}function ae(B,ne,Me,Ne,Ae){var we=typeof B;(we==="undefined"||we==="boolean")&&(B=null);var et=!1;if(B===null)et=!0;else switch(we){case"string":case"number":et=!0;break;case"object":switch(B.$$typeof){case r:case e:et=!0}}if(et)return et=B,Ae=Ae(et),B=Ne===""?"."+N(et,0):Ne,Ce(Ae)?(Me="",B!=null&&(Me=B.replace(V,"$&/")+"/"),ae(Ae,ne,Me,"",function(Kt){return Kt})):Ae!=null&&(U(Ae)&&(Ae=O(Ae,Me+(!Ae.key||et&&et.key===Ae.key?"":(""+Ae.key).replace(V,"$&/")+"/")+B)),ne.push(Ae)),1;if(et=0,Ne=Ne===""?".":Ne+":",Ce(B))for(var Qe=0;Qe<B.length;Qe++){we=B[Qe];var mt=Ne+N(we,Qe);et+=ae(we,ne,Me,mt,Ae)}else if(mt=b(B),typeof mt=="function")for(B=mt.call(B),Qe=0;!(we=B.next()).done;)we=we.value,mt=Ne+N(we,Qe++),et+=ae(we,ne,Me,mt,Ae);else if(we==="object")throw ne=String(B),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.");return et}function Oe(B,ne,Me){if(B==null)return B;var Ne=[],Ae=0;return ae(B,Ne,"","",function(we){return ne.call(Me,we,Ae++)}),Ne}function ge(B){if(B._status===-1){var ne=B._result;ne=ne(),ne.then(function(Me){(B._status===0||B._status===-1)&&(B._status=1,B._result=Me)},function(Me){(B._status===0||B._status===-1)&&(B._status=2,B._result=Me)}),B._status===-1&&(B._status=0,B._result=ne)}if(B._status===1)return B._result.default;throw B._result}var Fe={current:null},te={transition:null},ke={ReactCurrentDispatcher:Fe,ReactCurrentBatchConfig:te,ReactCurrentOwner:Le};function ie(){throw Error("act(...) is not supported in production builds of React.")}return nt.Children={map:Oe,forEach:function(B,ne,Me){Oe(B,function(){ne.apply(this,arguments)},Me)},count:function(B){var ne=0;return Oe(B,function(){ne++}),ne},toArray:function(B){return Oe(B,function(ne){return ne})||[]},only:function(B){if(!U(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},nt.Component=Y,nt.Fragment=t,nt.Profiler=a,nt.PureComponent=pe,nt.StrictMode=o,nt.Suspense=x,nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ke,nt.act=ie,nt.cloneElement=function(B,ne,Me){if(B==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+B+".");var Ne=W({},B.props),Ae=B.key,we=B.ref,et=B._owner;if(ne!=null){if(ne.ref!==void 0&&(we=ne.ref,et=Le.current),ne.key!==void 0&&(Ae=""+ne.key),B.type&&B.type.defaultProps)var Qe=B.type.defaultProps;for(mt in ne)Se.call(ne,mt)&&!F.hasOwnProperty(mt)&&(Ne[mt]=ne[mt]===void 0&&Qe!==void 0?Qe[mt]:ne[mt])}var mt=arguments.length-2;if(mt===1)Ne.children=Me;else if(1<mt){Qe=Array(mt);for(var Kt=0;Kt<mt;Kt++)Qe[Kt]=arguments[Kt+2];Ne.children=Qe}return{$$typeof:r,type:B.type,key:Ae,ref:we,props:Ne,_owner:et}},nt.createContext=function(B){return B={$$typeof:p,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},B.Provider={$$typeof:c,_context:B},B.Consumer=B},nt.createElement=R,nt.createFactory=function(B){var ne=R.bind(null,B);return ne.type=B,ne},nt.createRef=function(){return{current:null}},nt.forwardRef=function(B){return{$$typeof:_,render:B}},nt.isValidElement=U,nt.lazy=function(B){return{$$typeof:C,_payload:{_status:-1,_result:B},_init:ge}},nt.memo=function(B,ne){return{$$typeof:I,type:B,compare:ne===void 0?null:ne}},nt.startTransition=function(B){var ne=te.transition;te.transition={};try{B()}finally{te.transition=ne}},nt.unstable_act=ie,nt.useCallback=function(B,ne){return Fe.current.useCallback(B,ne)},nt.useContext=function(B){return Fe.current.useContext(B)},nt.useDebugValue=function(){},nt.useDeferredValue=function(B){return Fe.current.useDeferredValue(B)},nt.useEffect=function(B,ne){return Fe.current.useEffect(B,ne)},nt.useId=function(){return Fe.current.useId()},nt.useImperativeHandle=function(B,ne,Me){return Fe.current.useImperativeHandle(B,ne,Me)},nt.useInsertionEffect=function(B,ne){return Fe.current.useInsertionEffect(B,ne)},nt.useLayoutEffect=function(B,ne){return Fe.current.useLayoutEffect(B,ne)},nt.useMemo=function(B,ne){return Fe.current.useMemo(B,ne)},nt.useReducer=function(B,ne,Me){return Fe.current.useReducer(B,ne,Me)},nt.useRef=function(B){return Fe.current.useRef(B)},nt.useState=function(B){return Fe.current.useState(B)},nt.useSyncExternalStore=function(B,ne,Me){return Fe.current.useSyncExternalStore(B,ne,Me)},nt.useTransition=function(){return Fe.current.useTransition()},nt.version="18.3.1",nt}var Yg;function up(){return Yg||(Yg=1,pf.exports=Ex()),pf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jg;function Tx(){if(Jg)return fu;Jg=1;var r=up(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function p(_,x,I){var C,k={},b=null,q=null;I!==void 0&&(b=""+I),x.key!==void 0&&(b=""+x.key),x.ref!==void 0&&(q=x.ref);for(C in x)o.call(x,C)&&!c.hasOwnProperty(C)&&(k[C]=x[C]);if(_&&_.defaultProps)for(C in x=_.defaultProps,x)k[C]===void 0&&(k[C]=x[C]);return{$$typeof:e,type:_,key:b,ref:q,props:k,_owner:a.current}}return fu.Fragment=t,fu.jsx=p,fu.jsxs=p,fu}var Xg;function Ix(){return Xg||(Xg=1,ff.exports=Tx()),ff.exports}var y=Ix(),ce=up();const Rf=Ky(ce);var Kc={},mf={exports:{}},er={},gf={exports:{}},_f={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e_;function Sx(){return e_||(e_=1,(function(r){function e(te,ke){var ie=te.length;te.push(ke);e:for(;0<ie;){var B=ie-1>>>1,ne=te[B];if(0<a(ne,ke))te[B]=ke,te[ie]=ne,ie=B;else break e}}function t(te){return te.length===0?null:te[0]}function o(te){if(te.length===0)return null;var ke=te[0],ie=te.pop();if(ie!==ke){te[0]=ie;e:for(var B=0,ne=te.length,Me=ne>>>1;B<Me;){var Ne=2*(B+1)-1,Ae=te[Ne],we=Ne+1,et=te[we];if(0>a(Ae,ie))we<ne&&0>a(et,Ae)?(te[B]=et,te[we]=ie,B=we):(te[B]=Ae,te[Ne]=ie,B=Ne);else if(we<ne&&0>a(et,ie))te[B]=et,te[we]=ie,B=we;else break e}}return ke}function a(te,ke){var ie=te.sortIndex-ke.sortIndex;return ie!==0?ie:te.id-ke.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var p=Date,_=p.now();r.unstable_now=function(){return p.now()-_}}var x=[],I=[],C=1,k=null,b=3,q=!1,W=!1,Q=!1,Y=typeof setTimeout=="function"?setTimeout:null,de=typeof clearTimeout=="function"?clearTimeout:null,pe=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Ee(te){for(var ke=t(I);ke!==null;){if(ke.callback===null)o(I);else if(ke.startTime<=te)o(I),ke.sortIndex=ke.expirationTime,e(x,ke);else break;ke=t(I)}}function Ce(te){if(Q=!1,Ee(te),!W)if(t(x)!==null)W=!0,ge(Se);else{var ke=t(I);ke!==null&&Fe(Ce,ke.startTime-te)}}function Se(te,ke){W=!1,Q&&(Q=!1,de(R),R=-1),q=!0;var ie=b;try{for(Ee(ke),k=t(x);k!==null&&(!(k.expirationTime>ke)||te&&!D());){var B=k.callback;if(typeof B=="function"){k.callback=null,b=k.priorityLevel;var ne=B(k.expirationTime<=ke);ke=r.unstable_now(),typeof ne=="function"?k.callback=ne:k===t(x)&&o(x),Ee(ke)}else o(x);k=t(x)}if(k!==null)var Me=!0;else{var Ne=t(I);Ne!==null&&Fe(Ce,Ne.startTime-ke),Me=!1}return Me}finally{k=null,b=ie,q=!1}}var Le=!1,F=null,R=-1,O=5,U=-1;function D(){return!(r.unstable_now()-U<O)}function V(){if(F!==null){var te=r.unstable_now();U=te;var ke=!0;try{ke=F(!0,te)}finally{ke?N():(Le=!1,F=null)}}else Le=!1}var N;if(typeof pe=="function")N=function(){pe(V)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,Oe=ae.port2;ae.port1.onmessage=V,N=function(){Oe.postMessage(null)}}else N=function(){Y(V,0)};function ge(te){F=te,Le||(Le=!0,N())}function Fe(te,ke){R=Y(function(){te(r.unstable_now())},ke)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(te){te.callback=null},r.unstable_continueExecution=function(){W||q||(W=!0,ge(Se))},r.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<te?Math.floor(1e3/te):5},r.unstable_getCurrentPriorityLevel=function(){return b},r.unstable_getFirstCallbackNode=function(){return t(x)},r.unstable_next=function(te){switch(b){case 1:case 2:case 3:var ke=3;break;default:ke=b}var ie=b;b=ke;try{return te()}finally{b=ie}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(te,ke){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var ie=b;b=te;try{return ke()}finally{b=ie}},r.unstable_scheduleCallback=function(te,ke,ie){var B=r.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?B+ie:B):ie=B,te){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=ie+ne,te={id:C++,callback:ke,priorityLevel:te,startTime:ie,expirationTime:ne,sortIndex:-1},ie>B?(te.sortIndex=ie,e(I,te),t(x)===null&&te===t(I)&&(Q?(de(R),R=-1):Q=!0,Fe(Ce,ie-B))):(te.sortIndex=ne,e(x,te),W||q||(W=!0,ge(Se))),te},r.unstable_shouldYield=D,r.unstable_wrapCallback=function(te){var ke=b;return function(){var ie=b;b=ke;try{return te.apply(this,arguments)}finally{b=ie}}}})(_f)),_f}var t_;function Px(){return t_||(t_=1,gf.exports=Sx()),gf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n_;function Cx(){if(n_)return er;n_=1;var r=up(),e=Px();function t(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,u=1;u<arguments.length;u++)s+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function c(n,s){p(n,s),p(n+"Capture",s)}function p(n,s){for(a[n]=s,n=0;n<s.length;n++)o.add(s[n])}var _=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),x=Object.prototype.hasOwnProperty,I=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,C={},k={};function b(n){return x.call(k,n)?!0:x.call(C,n)?!1:I.test(n)?k[n]=!0:(C[n]=!0,!1)}function q(n,s,u,f){if(u!==null&&u.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return f?!1:u!==null?!u.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function W(n,s,u,f){if(s===null||typeof s>"u"||q(n,s,u,f))return!0;if(f)return!1;if(u!==null)switch(u.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function Q(n,s,u,f,g,v,S){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=f,this.attributeNamespace=g,this.mustUseProperty=u,this.propertyName=n,this.type=s,this.sanitizeURL=v,this.removeEmptyString=S}var Y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Y[n]=new Q(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];Y[s]=new Q(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){Y[n]=new Q(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Y[n]=new Q(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Y[n]=new Q(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){Y[n]=new Q(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){Y[n]=new Q(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){Y[n]=new Q(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){Y[n]=new Q(n,5,!1,n.toLowerCase(),null,!1,!1)});var de=/[\-:]([a-z])/g;function pe(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(de,pe);Y[s]=new Q(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(de,pe);Y[s]=new Q(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(de,pe);Y[s]=new Q(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){Y[n]=new Q(n,1,!1,n.toLowerCase(),null,!1,!1)}),Y.xlinkHref=new Q("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){Y[n]=new Q(n,1,!1,n.toLowerCase(),null,!0,!0)});function Ee(n,s,u,f){var g=Y.hasOwnProperty(s)?Y[s]:null;(g!==null?g.type!==0:f||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(W(s,u,g,f)&&(u=null),f||g===null?b(s)&&(u===null?n.removeAttribute(s):n.setAttribute(s,""+u)):g.mustUseProperty?n[g.propertyName]=u===null?g.type===3?!1:"":u:(s=g.attributeName,f=g.attributeNamespace,u===null?n.removeAttribute(s):(g=g.type,u=g===3||g===4&&u===!0?"":""+u,f?n.setAttributeNS(f,s,u):n.setAttribute(s,u))))}var Ce=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Se=Symbol.for("react.element"),Le=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),U=Symbol.for("react.provider"),D=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),ae=Symbol.for("react.suspense_list"),Oe=Symbol.for("react.memo"),ge=Symbol.for("react.lazy"),Fe=Symbol.for("react.offscreen"),te=Symbol.iterator;function ke(n){return n===null||typeof n!="object"?null:(n=te&&n[te]||n["@@iterator"],typeof n=="function"?n:null)}var ie=Object.assign,B;function ne(n){if(B===void 0)try{throw Error()}catch(u){var s=u.stack.trim().match(/\n( *(at )?)/);B=s&&s[1]||""}return`
`+B+n}var Me=!1;function Ne(n,s){if(!n||Me)return"";Me=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(ee){var f=ee}Reflect.construct(n,[],s)}else{try{s.call()}catch(ee){f=ee}n.call(s.prototype)}else{try{throw Error()}catch(ee){f=ee}n()}}catch(ee){if(ee&&f&&typeof ee.stack=="string"){for(var g=ee.stack.split(`
`),v=f.stack.split(`
`),S=g.length-1,M=v.length-1;1<=S&&0<=M&&g[S]!==v[M];)M--;for(;1<=S&&0<=M;S--,M--)if(g[S]!==v[M]){if(S!==1||M!==1)do if(S--,M--,0>M||g[S]!==v[M]){var z=`
`+g[S].replace(" at new "," at ");return n.displayName&&z.includes("<anonymous>")&&(z=z.replace("<anonymous>",n.displayName)),z}while(1<=S&&0<=M);break}}}finally{Me=!1,Error.prepareStackTrace=u}return(n=n?n.displayName||n.name:"")?ne(n):""}function Ae(n){switch(n.tag){case 5:return ne(n.type);case 16:return ne("Lazy");case 13:return ne("Suspense");case 19:return ne("SuspenseList");case 0:case 2:case 15:return n=Ne(n.type,!1),n;case 11:return n=Ne(n.type.render,!1),n;case 1:return n=Ne(n.type,!0),n;default:return""}}function we(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case F:return"Fragment";case Le:return"Portal";case O:return"Profiler";case R:return"StrictMode";case N:return"Suspense";case ae:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case D:return(n.displayName||"Context")+".Consumer";case U:return(n._context.displayName||"Context")+".Provider";case V:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Oe:return s=n.displayName||null,s!==null?s:we(n.type)||"Memo";case ge:s=n._payload,n=n._init;try{return we(n(s))}catch{}}return null}function et(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return we(s);case 8:return s===R?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Qe(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function mt(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Kt(n){var s=mt(n)?"checked":"value",u=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),f=""+n[s];if(!n.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,v=u.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return g.call(this)},set:function(S){f=""+S,v.call(this,S)}}),Object.defineProperty(n,s,{enumerable:u.enumerable}),{getValue:function(){return f},setValue:function(S){f=""+S},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function ui(n){n._valueTracker||(n._valueTracker=Kt(n))}function Wr(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var u=s.getValue(),f="";return n&&(f=mt(n)?n.checked?"true":"false":n.value),n=f,n!==u?(s.setValue(n),!0):!1}function mr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Rs(n,s){var u=s.checked;return ie({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??n._wrapperState.initialChecked})}function zo(n,s){var u=s.defaultValue==null?"":s.defaultValue,f=s.checked!=null?s.checked:s.defaultChecked;u=Qe(s.value!=null?s.value:u),n._wrapperState={initialChecked:f,initialValue:u,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Bi(n,s){s=s.checked,s!=null&&Ee(n,"checked",s,!1)}function qr(n,s){Bi(n,s);var u=Qe(s.value),f=s.type;if(u!=null)f==="number"?(u===0&&n.value===""||n.value!=u)&&(n.value=""+u):n.value!==""+u&&(n.value=""+u);else if(f==="submit"||f==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?Dt(n,s.type,u):s.hasOwnProperty("defaultValue")&&Dt(n,s.type,Qe(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function ci(n,s,u){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var f=s.type;if(!(f!=="submit"&&f!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,u||s===n.value||(n.value=s),n.defaultValue=s}u=n.name,u!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,u!==""&&(n.name=u)}function Dt(n,s,u){(s!=="number"||mr(n.ownerDocument)!==n)&&(u==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+u&&(n.defaultValue=""+u))}var Pt=Array.isArray;function An(n,s,u,f){if(n=n.options,s){s={};for(var g=0;g<u.length;g++)s["$"+u[g]]=!0;for(u=0;u<n.length;u++)g=s.hasOwnProperty("$"+n[u].value),n[u].selected!==g&&(n[u].selected=g),g&&f&&(n[u].defaultSelected=!0)}else{for(u=""+Qe(u),s=null,g=0;g<n.length;g++){if(n[g].value===u){n[g].selected=!0,f&&(n[g].defaultSelected=!0);return}s!==null||n[g].disabled||(s=n[g])}s!==null&&(s.selected=!0)}}function Ls(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return ie({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Ds(n,s){var u=s.value;if(u==null){if(u=s.children,s=s.defaultValue,u!=null){if(s!=null)throw Error(t(92));if(Pt(u)){if(1<u.length)throw Error(t(93));u=u[0]}s=u}s==null&&(s=""),u=s}n._wrapperState={initialValue:Qe(u)}}function Ra(n,s){var u=Qe(s.value),f=Qe(s.defaultValue);u!=null&&(u=""+u,u!==n.value&&(n.value=u),s.defaultValue==null&&n.defaultValue!==u&&(n.defaultValue=u)),f!=null&&(n.defaultValue=""+f)}function hi(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function Hi(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Wi(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?Hi(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var $r,La=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,u,f,g){MSApp.execUnsafeLocalFunction(function(){return n(s,u,f,g)})}:n})(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for($r=$r||document.createElement("div"),$r.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=$r.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function di(n,s){if(s){var u=n.firstChild;if(u&&u===n.lastChild&&u.nodeType===3){u.nodeValue=s;return}}n.textContent=s}var Gr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Da=["Webkit","ms","Moz","O"];Object.keys(Gr).forEach(function(n){Da.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),Gr[s]=Gr[n]})});function Kr(n,s,u){return s==null||typeof s=="boolean"||s===""?"":u||typeof s!="number"||s===0||Gr.hasOwnProperty(n)&&Gr[n]?(""+s).trim():s+"px"}function fi(n,s){n=n.style;for(var u in s)if(s.hasOwnProperty(u)){var f=u.indexOf("--")===0,g=Kr(u,s[u],f);u==="float"&&(u="cssFloat"),f?n.setProperty(u,g):n[u]=g}}var Ms=ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function rr(n,s){if(s){if(Ms[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function gr(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pi=null;function Os(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var _r=null,yr=null,Tt=null;function Uo(n){if(n=ds(n)){if(typeof _r!="function")throw Error(t(280));var s=n.stateNode;s&&(s=Ya(s),_r(n.stateNode,n.type,s))}}function mi(n){yr?Tt?Tt.push(n):Tt=[n]:yr=n}function gi(){if(yr){var n=yr,s=Tt;if(Tt=yr=null,Uo(n),s)for(n=0;n<s.length;n++)Uo(s[n])}}function Ma(n,s){return n(s)}function Oa(){}var vr=!1;function Vs(n,s,u){if(vr)return n(s,u);vr=!0;try{return Ma(n,s,u)}finally{vr=!1,(yr!==null||Tt!==null)&&(Oa(),gi())}}function qi(n,s){var u=n.stateNode;if(u===null)return null;var f=Ya(u);if(f===null)return null;u=f[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(n=n.type,f=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!f;break e;default:n=!1}if(n)return null;if(u&&typeof u!="function")throw Error(t(231,s,typeof u));return u}var _i=!1;if(_)try{var yi={};Object.defineProperty(yi,"passive",{get:function(){_i=!0}}),window.addEventListener("test",yi,yi),window.removeEventListener("test",yi,yi)}catch{_i=!1}function Va(n,s,u,f,g,v,S,M,z){var ee=Array.prototype.slice.call(arguments,3);try{s.apply(u,ee)}catch(ue){this.onError(ue)}}var zt=!1,Ie=null,$i=!1,bn=null,Bo={onError:function(n){zt=!0,Ie=n}};function Ho(n,s,u,f,g,v,S,M,z){zt=!1,Ie=null,Va.apply(Bo,arguments)}function Gi(n,s,u,f,g,v,S,M,z){if(Ho.apply(this,arguments),zt){if(zt){var ee=Ie;zt=!1,Ie=null}else throw Error(t(198));$i||($i=!0,bn=ee)}}function Hn(n){var s=n,u=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(u=s.return),n=s.return;while(n)}return s.tag===3?u:null}function wr(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function Wo(n){if(Hn(n)!==n)throw Error(t(188))}function ja(n){var s=n.alternate;if(!s){if(s=Hn(n),s===null)throw Error(t(188));return s!==n?null:n}for(var u=n,f=s;;){var g=u.return;if(g===null)break;var v=g.alternate;if(v===null){if(f=g.return,f!==null){u=f;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===u)return Wo(g),n;if(v===f)return Wo(g),s;v=v.sibling}throw Error(t(188))}if(u.return!==f.return)u=g,f=v;else{for(var S=!1,M=g.child;M;){if(M===u){S=!0,u=g,f=v;break}if(M===f){S=!0,f=g,u=v;break}M=M.sibling}if(!S){for(M=v.child;M;){if(M===u){S=!0,u=v,f=g;break}if(M===f){S=!0,f=v,u=g;break}M=M.sibling}if(!S)throw Error(t(189))}}if(u.alternate!==f)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?n:s}function Fa(n){return n=ja(n),n!==null?Ki(n):null}function Ki(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=Ki(n);if(s!==null)return s;n=n.sibling}return null}var qo=e.unstable_scheduleCallback,Zi=e.unstable_cancelCallback,Qi=e.unstable_shouldYield,Wn=e.unstable_requestPaint,vt=e.unstable_now,zl=e.unstable_getCurrentPriorityLevel,js=e.unstable_ImmediatePriority,$o=e.unstable_UserBlockingPriority,Yi=e.unstable_NormalPriority,Ji=e.unstable_LowPriority,xr=e.unstable_IdlePriority,vi=null,mn=null;function wi(n){if(mn&&typeof mn.onCommitFiberRoot=="function")try{mn.onCommitFiberRoot(vi,n,void 0,(n.current.flags&128)===128)}catch{}}var Ge=Math.clz32?Math.clz32:qn,at=Math.log,an=Math.LN2;function qn(n){return n>>>=0,n===0?32:31-(at(n)/an|0)|0}var ln=64,Er=4194304;function ve(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function ft(n,s){var u=n.pendingLanes;if(u===0)return 0;var f=0,g=n.suspendedLanes,v=n.pingedLanes,S=u&268435455;if(S!==0){var M=S&~g;M!==0?f=ve(M):(v&=S,v!==0&&(f=ve(v)))}else S=u&~g,S!==0?f=ve(S):v!==0&&(f=ve(v));if(f===0)return 0;if(s!==0&&s!==f&&(s&g)===0&&(g=f&-f,v=s&-s,g>=v||g===16&&(v&4194240)!==0))return s;if((f&4)!==0&&(f|=u&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=f;0<s;)u=31-Ge(s),g=1<<u,f|=n[u],s&=~g;return f}function Zr(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tr(n,s){for(var u=n.suspendedLanes,f=n.pingedLanes,g=n.expirationTimes,v=n.pendingLanes;0<v;){var S=31-Ge(v),M=1<<S,z=g[S];z===-1?((M&u)===0||(M&f)!==0)&&(g[S]=Zr(M,s)):z<=s&&(n.expiredLanes|=M),v&=~M}}function en(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Go(){var n=ln;return ln<<=1,(ln&4194240)===0&&(ln=64),n}function xi(n){for(var s=[],u=0;31>u;u++)s.push(n);return s}function Nn(n,s,u){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-Ge(s),n[s]=u}function Ct(n,s){var u=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var f=n.eventTimes;for(n=n.expirationTimes;0<u;){var g=31-Ge(u),v=1<<g;s[g]=0,f[g]=-1,n[g]=-1,u&=~v}}function ir(n,s){var u=n.entangledLanes|=s;for(n=n.entanglements;u;){var f=31-Ge(u),g=1<<f;g&s|n[f]&s&&(n[f]|=s),u&=~g}}var Je=0;function gn(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Xi,Ir,es,ts,Ei,$n=!1,Ti=[],Rn=null,sr=null,Ot=null,ns=new Map,ze=new Map,kt=[],pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Qr(n,s){switch(n){case"focusin":case"focusout":Rn=null;break;case"dragenter":case"dragleave":sr=null;break;case"mouseover":case"mouseout":Ot=null;break;case"pointerover":case"pointerout":ns.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":ze.delete(s.pointerId)}}function Ln(n,s,u,f,g,v){return n===null||n.nativeEvent!==v?(n={blockedOn:s,domEventName:u,eventSystemFlags:f,nativeEvent:v,targetContainers:[g]},s!==null&&(s=ds(s),s!==null&&Ir(s)),n):(n.eventSystemFlags|=f,s=n.targetContainers,g!==null&&s.indexOf(g)===-1&&s.push(g),n)}function Fs(n,s,u,f,g){switch(s){case"focusin":return Rn=Ln(Rn,n,s,u,f,g),!0;case"dragenter":return sr=Ln(sr,n,s,u,f,g),!0;case"mouseover":return Ot=Ln(Ot,n,s,u,f,g),!0;case"pointerover":var v=g.pointerId;return ns.set(v,Ln(ns.get(v)||null,n,s,u,f,g)),!0;case"gotpointercapture":return v=g.pointerId,ze.set(v,Ln(ze.get(v)||null,n,s,u,f,g)),!0}return!1}function Ii(n){var s=hs(n.target);if(s!==null){var u=Hn(s);if(u!==null){if(s=u.tag,s===13){if(s=wr(u),s!==null){n.blockedOn=s,Ei(n.priority,function(){es(u)});return}}else if(s===3&&u.stateNode.current.memoizedState.isDehydrated){n.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}n.blockedOn=null}function ot(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var u=ss(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(u===null){u=n.nativeEvent;var f=new u.constructor(u.type,u);pi=f,u.target.dispatchEvent(f),pi=null}else return s=ds(u),s!==null&&Ir(s),n.blockedOn=u,!1;s.shift()}return!0}function zs(n,s,u){ot(n)&&u.delete(s)}function rs(){$n=!1,Rn!==null&&ot(Rn)&&(Rn=null),sr!==null&&ot(sr)&&(sr=null),Ot!==null&&ot(Ot)&&(Ot=null),ns.forEach(zs),ze.forEach(zs)}function wt(n,s){n.blockedOn===s&&(n.blockedOn=null,$n||($n=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,rs)))}function _n(n){function s(g){return wt(g,n)}if(0<Ti.length){wt(Ti[0],n);for(var u=1;u<Ti.length;u++){var f=Ti[u];f.blockedOn===n&&(f.blockedOn=null)}}for(Rn!==null&&wt(Rn,n),sr!==null&&wt(sr,n),Ot!==null&&wt(Ot,n),ns.forEach(s),ze.forEach(s),u=0;u<kt.length;u++)f=kt[u],f.blockedOn===n&&(f.blockedOn=null);for(;0<kt.length&&(u=kt[0],u.blockedOn===null);)Ii(u),u.blockedOn===null&&kt.shift()}var Sr=Ce.ReactCurrentBatchConfig,Pr=!0;function Cr(n,s,u,f){var g=Je,v=Sr.transition;Sr.transition=null;try{Je=1,is(n,s,u,f)}finally{Je=g,Sr.transition=v}}function Ko(n,s,u,f){var g=Je,v=Sr.transition;Sr.transition=null;try{Je=4,is(n,s,u,f)}finally{Je=g,Sr.transition=v}}function is(n,s,u,f){if(Pr){var g=ss(n,s,u,f);if(g===null)i(n,s,f,kr,u),Qr(n,f);else if(Fs(g,n,s,u,f))f.stopPropagation();else if(Qr(n,f),s&4&&-1<pt.indexOf(n)){for(;g!==null;){var v=ds(g);if(v!==null&&Xi(v),v=ss(n,s,u,f),v===null&&i(n,s,f,kr,u),v===g)break;g=v}g!==null&&f.stopPropagation()}else i(n,s,f,null,u)}}var kr=null;function ss(n,s,u,f){if(kr=null,n=Os(f),n=hs(n),n!==null)if(s=Hn(n),s===null)n=null;else if(u=s.tag,u===13){if(n=wr(s),n!==null)return n;n=null}else if(u===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return kr=n,null}function Xe(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(zl()){case js:return 1;case $o:return 4;case Yi:case Ji:return 16;case xr:return 536870912;default:return 16}default:return 16}}var Dn=null,tn=null,Mn=null;function Zo(){if(Mn)return Mn;var n,s=tn,u=s.length,f,g="value"in Dn?Dn.value:Dn.textContent,v=g.length;for(n=0;n<u&&s[n]===g[n];n++);var S=u-n;for(f=1;f<=S&&s[u-f]===g[v-f];f++);return Mn=g.slice(n,1<f?1-f:void 0)}function os(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Gn(){return!0}function Qo(){return!1}function Zt(n){function s(u,f,g,v,S){this._reactName=u,this._targetInst=g,this.type=f,this.nativeEvent=v,this.target=S,this.currentTarget=null;for(var M in n)n.hasOwnProperty(M)&&(u=n[M],this[M]=u?u(v):v[M]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Gn:Qo,this.isPropagationStopped=Qo,this}return ie(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Gn)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Gn)},persist:function(){},isPersistent:Gn}),s}var Ar={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},as=Zt(Ar),br=ie({},Ar,{view:0,detail:0}),Us=Zt(br),un,Bs,yn,vn=ie({},br,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:He,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==yn&&(yn&&n.type==="mousemove"?(un=n.screenX-yn.screenX,Bs=n.screenY-yn.screenY):Bs=un=0,yn=n),un)},movementY:function(n){return"movementY"in n?n.movementY:Bs}}),Hs=Zt(vn),Yo=ie({},vn,{dataTransfer:0}),Ws=Zt(Yo),qs=ie({},br,{relatedTarget:0}),Ut=Zt(qs),Jo=ie({},Ar,{animationName:0,elapsedTime:0,pseudoElement:0}),za=Zt(Jo),Si=ie({},Ar,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),h=Zt(Si),w=ie({},Ar,{data:0}),T=Zt(w),A={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},J={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function me(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=J[n])?!!s[n]:!1}function He(){return me}var lt=ie({},br,{key:function(n){if(n.key){var s=A[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=os(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?$[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:He,charCode:function(n){return n.type==="keypress"?os(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?os(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),ht=Zt(lt),bt=ie({},vn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),On=Zt(bt),or=ie({},br,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:He}),Kn=Zt(or),Nr=ie({},Ar,{propertyName:0,elapsedTime:0,pseudoElement:0}),$s=Zt(Nr),Gs=ie({},vn,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),nd=Zt(Gs),ar=[9,13,27,32],Pi=_&&"CompositionEvent"in window,Xo=null;_&&"documentMode"in document&&(Xo=document.documentMode);var Yr=_&&"TextEvent"in window&&!Xo,Yu=_&&(!Pi||Xo&&8<Xo&&11>=Xo),ls=" ",Ju=!1;function Ks(n,s){switch(n){case"keyup":return ar.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ul(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Jr=!1;function rd(n,s){switch(n){case"compositionend":return Ul(s);case"keypress":return s.which!==32?null:(Ju=!0,ls);case"textInput":return n=s.data,n===ls&&Ju?null:n;default:return null}}function Ci(n,s){if(Jr)return n==="compositionend"||!Pi&&Ks(n,s)?(n=Zo(),Mn=tn=Dn=null,Jr=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Yu&&s.locale!=="ko"?null:s.data;default:return null}}var Ua={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xu(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!Ua[n.type]:s==="textarea"}function Ba(n,s,u,f){mi(f),s=d(s,"onChange"),0<s.length&&(u=new as("onChange","change",null,u,f),n.push({event:u,listeners:s}))}var ea=null,Vn=null;function id(n){Ql(n,0)}function Xr(n){var s=fs(n);if(Wr(s))return n}function sd(n,s){if(n==="change")return s}var Rr=!1;if(_){var Zs;if(_){var Ha="oninput"in document;if(!Ha){var Wa=document.createElement("div");Wa.setAttribute("oninput","return;"),Ha=typeof Wa.oninput=="function"}Zs=Ha}else Zs=!1;Rr=Zs&&(!document.documentMode||9<document.documentMode)}function ta(){ea&&(ea.detachEvent("onpropertychange",qa),Vn=ea=null)}function qa(n){if(n.propertyName==="value"&&Xr(Vn)){var s=[];Ba(s,Vn,n,Os(n)),Vs(id,s)}}function $a(n,s,u){n==="focusin"?(ta(),ea=s,Vn=u,ea.attachEvent("onpropertychange",qa)):n==="focusout"&&ta()}function Qs(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Xr(Vn)}function Ga(n,s){if(n==="click")return Xr(s)}function Bl(n,s){if(n==="input"||n==="change")return Xr(s)}function ec(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var lr=typeof Object.is=="function"?Object.is:ec;function ki(n,s){if(lr(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var u=Object.keys(n),f=Object.keys(s);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var g=u[f];if(!x.call(s,g)||!lr(n[g],s[g]))return!1}return!0}function tc(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Hl(n,s){var u=tc(n);n=0;for(var f;u;){if(u.nodeType===3){if(f=n+u.textContent.length,n<=s&&f>=s)return{node:u,offset:s-n};n=f}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=tc(u)}}function nc(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?nc(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Wl(){for(var n=window,s=mr();s instanceof n.HTMLIFrameElement;){try{var u=typeof s.contentWindow.location.href=="string"}catch{u=!1}if(u)n=s.contentWindow;else break;s=mr(n.document)}return s}function ql(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function Lr(n){var s=Wl(),u=n.focusedElem,f=n.selectionRange;if(s!==u&&u&&u.ownerDocument&&nc(u.ownerDocument.documentElement,u)){if(f!==null&&ql(u)){if(s=f.start,n=f.end,n===void 0&&(n=s),"selectionStart"in u)u.selectionStart=s,u.selectionEnd=Math.min(n,u.value.length);else if(n=(s=u.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var g=u.textContent.length,v=Math.min(f.start,g);f=f.end===void 0?v:Math.min(f.end,g),!n.extend&&v>f&&(g=f,f=v,v=g),g=Hl(u,v);var S=Hl(u,f);g&&S&&(n.rangeCount!==1||n.anchorNode!==g.node||n.anchorOffset!==g.offset||n.focusNode!==S.node||n.focusOffset!==S.offset)&&(s=s.createRange(),s.setStart(g.node,g.offset),n.removeAllRanges(),v>f?(n.addRange(s),n.extend(S.node,S.offset)):(s.setEnd(S.node,S.offset),n.addRange(s)))}}for(s=[],n=u;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<s.length;u++)n=s[u],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Ka=_&&"documentMode"in document&&11>=document.documentMode,Ys=null,Js=null,na=null,Za=!1;function rc(n,s,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Za||Ys==null||Ys!==mr(f)||(f=Ys,"selectionStart"in f&&ql(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),na&&ki(na,f)||(na=f,f=d(Js,"onSelect"),0<f.length&&(s=new as("onSelect","select",null,s,u),n.push({event:s,listeners:f}),s.target=Ys)))}function Ai(n,s){var u={};return u[n.toLowerCase()]=s.toLowerCase(),u["Webkit"+n]="webkit"+s,u["Moz"+n]="moz"+s,u}var Xs={animationend:Ai("Animation","AnimationEnd"),animationiteration:Ai("Animation","AnimationIteration"),animationstart:Ai("Animation","AnimationStart"),transitionend:Ai("Transition","TransitionEnd")},bi={},$l={};_&&($l=document.createElement("div").style,"AnimationEvent"in window||(delete Xs.animationend.animation,delete Xs.animationiteration.animation,delete Xs.animationstart.animation),"TransitionEvent"in window||delete Xs.transitionend.transition);function ra(n){if(bi[n])return bi[n];if(!Xs[n])return n;var s=Xs[n],u;for(u in s)if(s.hasOwnProperty(u)&&u in $l)return bi[n]=s[u];return n}var ic=ra("animationend"),Dr=ra("animationiteration"),Gl=ra("animationstart"),Kl=ra("transitionend"),eo=new Map,sc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ur(n,s){eo.set(n,s),c(s,[n])}for(var us=0;us<sc.length;us++){var Qa=sc[us],oc=Qa.toLowerCase(),od=Qa[0].toUpperCase()+Qa.slice(1);ur(oc,"on"+od)}ur(ic,"onAnimationEnd"),ur(Dr,"onAnimationIteration"),ur(Gl,"onAnimationStart"),ur("dblclick","onDoubleClick"),ur("focusin","onFocus"),ur("focusout","onBlur"),ur(Kl,"onTransitionEnd"),p("onMouseEnter",["mouseout","mouseover"]),p("onMouseLeave",["mouseout","mouseover"]),p("onPointerEnter",["pointerout","pointerover"]),p("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var to="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ac=new Set("cancel close invalid load scroll toggle".split(" ").concat(to));function Zl(n,s,u){var f=n.type||"unknown-event";n.currentTarget=u,Gi(f,s,void 0,n),n.currentTarget=null}function Ql(n,s){s=(s&4)!==0;for(var u=0;u<n.length;u++){var f=n[u],g=f.event;f=f.listeners;e:{var v=void 0;if(s)for(var S=f.length-1;0<=S;S--){var M=f[S],z=M.instance,ee=M.currentTarget;if(M=M.listener,z!==v&&g.isPropagationStopped())break e;Zl(g,M,ee),v=z}else for(S=0;S<f.length;S++){if(M=f[S],z=M.instance,ee=M.currentTarget,M=M.listener,z!==v&&g.isPropagationStopped())break e;Zl(g,M,ee),v=z}}}if($i)throw n=bn,$i=!1,bn=null,n}function yt(n,s){var u=s[so];u===void 0&&(u=s[so]=new Set);var f=n+"__bubble";u.has(f)||(lc(s,n,2,!1),u.add(f))}function Yl(n,s,u){var f=0;s&&(f|=4),lc(u,n,f,s)}var ia="_reactListening"+Math.random().toString(36).slice(2);function no(n){if(!n[ia]){n[ia]=!0,o.forEach(function(u){u!=="selectionchange"&&(ac.has(u)||Yl(u,!1,n),Yl(u,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[ia]||(s[ia]=!0,Yl("selectionchange",!1,s))}}function lc(n,s,u,f){switch(Xe(s)){case 1:var g=Cr;break;case 4:g=Ko;break;default:g=is}u=g.bind(null,s,u,n),g=void 0,!_i||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(g=!0),f?g!==void 0?n.addEventListener(s,u,{capture:!0,passive:g}):n.addEventListener(s,u,!0):g!==void 0?n.addEventListener(s,u,{passive:g}):n.addEventListener(s,u,!1)}function i(n,s,u,f,g){var v=f;if((s&1)===0&&(s&2)===0&&f!==null)e:for(;;){if(f===null)return;var S=f.tag;if(S===3||S===4){var M=f.stateNode.containerInfo;if(M===g||M.nodeType===8&&M.parentNode===g)break;if(S===4)for(S=f.return;S!==null;){var z=S.tag;if((z===3||z===4)&&(z=S.stateNode.containerInfo,z===g||z.nodeType===8&&z.parentNode===g))return;S=S.return}for(;M!==null;){if(S=hs(M),S===null)return;if(z=S.tag,z===5||z===6){f=v=S;continue e}M=M.parentNode}}f=f.return}Vs(function(){var ee=v,ue=Os(u),he=[];e:{var le=eo.get(n);if(le!==void 0){var xe=as,be=n;switch(n){case"keypress":if(os(u)===0)break e;case"keydown":case"keyup":xe=ht;break;case"focusin":be="focus",xe=Ut;break;case"focusout":be="blur",xe=Ut;break;case"beforeblur":case"afterblur":xe=Ut;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":xe=Hs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":xe=Ws;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":xe=Kn;break;case ic:case Dr:case Gl:xe=za;break;case Kl:xe=$s;break;case"scroll":xe=Us;break;case"wheel":xe=nd;break;case"copy":case"cut":case"paste":xe=h;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":xe=On}var Re=(s&4)!==0,Vt=!Re&&n==="scroll",K=Re?le!==null?le+"Capture":null:le;Re=[];for(var H=ee,Z;H!==null;){Z=H;var fe=Z.stateNode;if(Z.tag===5&&fe!==null&&(Z=fe,K!==null&&(fe=qi(H,K),fe!=null&&Re.push(l(H,fe,Z)))),Vt)break;H=H.return}0<Re.length&&(le=new xe(le,be,null,u,ue),he.push({event:le,listeners:Re}))}}if((s&7)===0){e:{if(le=n==="mouseover"||n==="pointerover",xe=n==="mouseout"||n==="pointerout",le&&u!==pi&&(be=u.relatedTarget||u.fromElement)&&(hs(be)||be[gt]))break e;if((xe||le)&&(le=ue.window===ue?ue:(le=ue.ownerDocument)?le.defaultView||le.parentWindow:window,xe?(be=u.relatedTarget||u.toElement,xe=ee,be=be?hs(be):null,be!==null&&(Vt=Hn(be),be!==Vt||be.tag!==5&&be.tag!==6)&&(be=null)):(xe=null,be=ee),xe!==be)){if(Re=Hs,fe="onMouseLeave",K="onMouseEnter",H="mouse",(n==="pointerout"||n==="pointerover")&&(Re=On,fe="onPointerLeave",K="onPointerEnter",H="pointer"),Vt=xe==null?le:fs(xe),Z=be==null?le:fs(be),le=new Re(fe,H+"leave",xe,u,ue),le.target=Vt,le.relatedTarget=Z,fe=null,hs(ue)===ee&&(Re=new Re(K,H+"enter",be,u,ue),Re.target=Z,Re.relatedTarget=Vt,fe=Re),Vt=fe,xe&&be)t:{for(Re=xe,K=be,H=0,Z=Re;Z;Z=m(Z))H++;for(Z=0,fe=K;fe;fe=m(fe))Z++;for(;0<H-Z;)Re=m(Re),H--;for(;0<Z-H;)K=m(K),Z--;for(;H--;){if(Re===K||K!==null&&Re===K.alternate)break t;Re=m(Re),K=m(K)}Re=null}else Re=null;xe!==null&&E(he,le,xe,Re,!1),be!==null&&Vt!==null&&E(he,Vt,be,Re,!0)}}e:{if(le=ee?fs(ee):window,xe=le.nodeName&&le.nodeName.toLowerCase(),xe==="select"||xe==="input"&&le.type==="file")var De=sd;else if(Xu(le))if(Rr)De=Bl;else{De=Qs;var Ue=$a}else(xe=le.nodeName)&&xe.toLowerCase()==="input"&&(le.type==="checkbox"||le.type==="radio")&&(De=Ga);if(De&&(De=De(n,ee))){Ba(he,De,u,ue);break e}Ue&&Ue(n,le,ee),n==="focusout"&&(Ue=le._wrapperState)&&Ue.controlled&&le.type==="number"&&Dt(le,"number",le.value)}switch(Ue=ee?fs(ee):window,n){case"focusin":(Xu(Ue)||Ue.contentEditable==="true")&&(Ys=Ue,Js=ee,na=null);break;case"focusout":na=Js=Ys=null;break;case"mousedown":Za=!0;break;case"contextmenu":case"mouseup":case"dragend":Za=!1,rc(he,u,ue);break;case"selectionchange":if(Ka)break;case"keydown":case"keyup":rc(he,u,ue)}var Be;if(Pi)e:{switch(n){case"compositionstart":var $e="onCompositionStart";break e;case"compositionend":$e="onCompositionEnd";break e;case"compositionupdate":$e="onCompositionUpdate";break e}$e=void 0}else Jr?Ks(n,u)&&($e="onCompositionEnd"):n==="keydown"&&u.keyCode===229&&($e="onCompositionStart");$e&&(Yu&&u.locale!=="ko"&&(Jr||$e!=="onCompositionStart"?$e==="onCompositionEnd"&&Jr&&(Be=Zo()):(Dn=ue,tn="value"in Dn?Dn.value:Dn.textContent,Jr=!0)),Ue=d(ee,$e),0<Ue.length&&($e=new T($e,n,null,u,ue),he.push({event:$e,listeners:Ue}),Be?$e.data=Be:(Be=Ul(u),Be!==null&&($e.data=Be)))),(Be=Yr?rd(n,u):Ci(n,u))&&(ee=d(ee,"onBeforeInput"),0<ee.length&&(ue=new T("onBeforeInput","beforeinput",null,u,ue),he.push({event:ue,listeners:ee}),ue.data=Be))}Ql(he,s)})}function l(n,s,u){return{instance:n,listener:s,currentTarget:u}}function d(n,s){for(var u=s+"Capture",f=[];n!==null;){var g=n,v=g.stateNode;g.tag===5&&v!==null&&(g=v,v=qi(n,u),v!=null&&f.unshift(l(n,v,g)),v=qi(n,s),v!=null&&f.push(l(n,v,g))),n=n.return}return f}function m(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function E(n,s,u,f,g){for(var v=s._reactName,S=[];u!==null&&u!==f;){var M=u,z=M.alternate,ee=M.stateNode;if(z!==null&&z===f)break;M.tag===5&&ee!==null&&(M=ee,g?(z=qi(u,v),z!=null&&S.unshift(l(u,z,M))):g||(z=qi(u,v),z!=null&&S.push(l(u,z,M)))),u=u.return}S.length!==0&&n.push({event:s,listeners:S})}var P=/\r\n?/g,j=/\u0000|\uFFFD/g;function G(n){return(typeof n=="string"?n:""+n).replace(P,`
`).replace(j,"")}function X(n,s,u){if(s=G(s),G(n)!==s&&u)throw Error(t(425))}function oe(){}var ye=null,je=null;function Ye(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Qt=typeof setTimeout=="function"?setTimeout:void 0,Bt=typeof clearTimeout=="function"?clearTimeout:void 0,jn=typeof Promise=="function"?Promise:void 0,wn=typeof queueMicrotask=="function"?queueMicrotask:typeof jn<"u"?function(n){return jn.resolve(null).then(n).catch(ro)}:Qt;function ro(n){setTimeout(function(){throw n})}function Jl(n,s){var u=s,f=0;do{var g=u.nextSibling;if(n.removeChild(u),g&&g.nodeType===8)if(u=g.data,u==="/$"){if(f===0){n.removeChild(g),_n(s);return}f--}else u!=="$"&&u!=="$?"&&u!=="$!"||f++;u=g}while(u);_n(s)}function Ni(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function uc(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var u=n.data;if(u==="$"||u==="$!"||u==="$?"){if(s===0)return n;s--}else u==="/$"&&s++}n=n.previousSibling}return null}var cs=Math.random().toString(36).slice(2),Mr="__reactFiber$"+cs,io="__reactProps$"+cs,gt="__reactContainer$"+cs,so="__reactEvents$"+cs,ad="__reactListeners$"+cs,ld="__reactHandles$"+cs;function hs(n){var s=n[Mr];if(s)return s;for(var u=n.parentNode;u;){if(s=u[gt]||u[Mr]){if(u=s.alternate,s.child!==null||u!==null&&u.child!==null)for(n=uc(n);n!==null;){if(u=n[Mr])return u;n=uc(n)}return s}n=u,u=n.parentNode}return null}function ds(n){return n=n[Mr]||n[gt],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function fs(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function Ya(n){return n[io]||null}var ud=[],Ja=-1;function oo(n){return{current:n}}function It(n){0>Ja||(n.current=ud[Ja],ud[Ja]=null,Ja--)}function xt(n,s){Ja++,ud[Ja]=n.current,n.current=s}var ao={},xn=oo(ao),Zn=oo(!1),sa=ao;function Xa(n,s){var u=n.type.contextTypes;if(!u)return ao;var f=n.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===s)return f.__reactInternalMemoizedMaskedChildContext;var g={},v;for(v in u)g[v]=s[v];return f&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=g),g}function Qn(n){return n=n.childContextTypes,n!=null}function cc(){It(Zn),It(xn)}function ym(n,s,u){if(xn.current!==ao)throw Error(t(168));xt(xn,s),xt(Zn,u)}function vm(n,s,u){var f=n.stateNode;if(s=s.childContextTypes,typeof f.getChildContext!="function")return u;f=f.getChildContext();for(var g in f)if(!(g in s))throw Error(t(108,et(n)||"Unknown",g));return ie({},u,f)}function hc(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||ao,sa=xn.current,xt(xn,n),xt(Zn,Zn.current),!0}function wm(n,s,u){var f=n.stateNode;if(!f)throw Error(t(169));u?(n=vm(n,s,sa),f.__reactInternalMemoizedMergedChildContext=n,It(Zn),It(xn),xt(xn,n)):It(Zn),xt(Zn,u)}var ps=null,dc=!1,cd=!1;function xm(n){ps===null?ps=[n]:ps.push(n)}function Uw(n){dc=!0,xm(n)}function lo(){if(!cd&&ps!==null){cd=!0;var n=0,s=Je;try{var u=ps;for(Je=1;n<u.length;n++){var f=u[n];do f=f(!0);while(f!==null)}ps=null,dc=!1}catch(g){throw ps!==null&&(ps=ps.slice(n+1)),qo(js,lo),g}finally{Je=s,cd=!1}}return null}var el=[],tl=0,fc=null,pc=0,Or=[],Vr=0,oa=null,ms=1,gs="";function aa(n,s){el[tl++]=pc,el[tl++]=fc,fc=n,pc=s}function Em(n,s,u){Or[Vr++]=ms,Or[Vr++]=gs,Or[Vr++]=oa,oa=n;var f=ms;n=gs;var g=32-Ge(f)-1;f&=~(1<<g),u+=1;var v=32-Ge(s)+g;if(30<v){var S=g-g%5;v=(f&(1<<S)-1).toString(32),f>>=S,g-=S,ms=1<<32-Ge(s)+g|u<<g|f,gs=v+n}else ms=1<<v|u<<g|f,gs=n}function hd(n){n.return!==null&&(aa(n,1),Em(n,1,0))}function dd(n){for(;n===fc;)fc=el[--tl],el[tl]=null,pc=el[--tl],el[tl]=null;for(;n===oa;)oa=Or[--Vr],Or[Vr]=null,gs=Or[--Vr],Or[Vr]=null,ms=Or[--Vr],Or[Vr]=null}var cr=null,hr=null,At=!1,ei=null;function Tm(n,s){var u=Ur(5,null,null,0);u.elementType="DELETED",u.stateNode=s,u.return=n,s=n.deletions,s===null?(n.deletions=[u],n.flags|=16):s.push(u)}function Im(n,s){switch(n.tag){case 5:var u=n.type;return s=s.nodeType!==1||u.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,cr=n,hr=Ni(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,cr=n,hr=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(u=oa!==null?{id:ms,overflow:gs}:null,n.memoizedState={dehydrated:s,treeContext:u,retryLane:1073741824},u=Ur(18,null,null,0),u.stateNode=s,u.return=n,n.child=u,cr=n,hr=null,!0):!1;default:return!1}}function fd(n){return(n.mode&1)!==0&&(n.flags&128)===0}function pd(n){if(At){var s=hr;if(s){var u=s;if(!Im(n,s)){if(fd(n))throw Error(t(418));s=Ni(u.nextSibling);var f=cr;s&&Im(n,s)?Tm(f,u):(n.flags=n.flags&-4097|2,At=!1,cr=n)}}else{if(fd(n))throw Error(t(418));n.flags=n.flags&-4097|2,At=!1,cr=n}}}function Sm(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;cr=n}function mc(n){if(n!==cr)return!1;if(!At)return Sm(n),At=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!Ye(n.type,n.memoizedProps)),s&&(s=hr)){if(fd(n))throw Pm(),Error(t(418));for(;s;)Tm(n,s),s=Ni(s.nextSibling)}if(Sm(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var u=n.data;if(u==="/$"){if(s===0){hr=Ni(n.nextSibling);break e}s--}else u!=="$"&&u!=="$!"&&u!=="$?"||s++}n=n.nextSibling}hr=null}}else hr=cr?Ni(n.stateNode.nextSibling):null;return!0}function Pm(){for(var n=hr;n;)n=Ni(n.nextSibling)}function nl(){hr=cr=null,At=!1}function md(n){ei===null?ei=[n]:ei.push(n)}var Bw=Ce.ReactCurrentBatchConfig;function Xl(n,s,u){if(n=u.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var f=u.stateNode}if(!f)throw Error(t(147,n));var g=f,v=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===v?s.ref:(s=function(S){var M=g.refs;S===null?delete M[v]:M[v]=S},s._stringRef=v,s)}if(typeof n!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,n))}return n}function gc(n,s){throw n=Object.prototype.toString.call(s),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function Cm(n){var s=n._init;return s(n._payload)}function km(n){function s(K,H){if(n){var Z=K.deletions;Z===null?(K.deletions=[H],K.flags|=16):Z.push(H)}}function u(K,H){if(!n)return null;for(;H!==null;)s(K,H),H=H.sibling;return null}function f(K,H){for(K=new Map;H!==null;)H.key!==null?K.set(H.key,H):K.set(H.index,H),H=H.sibling;return K}function g(K,H){return K=_o(K,H),K.index=0,K.sibling=null,K}function v(K,H,Z){return K.index=Z,n?(Z=K.alternate,Z!==null?(Z=Z.index,Z<H?(K.flags|=2,H):Z):(K.flags|=2,H)):(K.flags|=1048576,H)}function S(K){return n&&K.alternate===null&&(K.flags|=2),K}function M(K,H,Z,fe){return H===null||H.tag!==6?(H=af(Z,K.mode,fe),H.return=K,H):(H=g(H,Z),H.return=K,H)}function z(K,H,Z,fe){var De=Z.type;return De===F?ue(K,H,Z.props.children,fe,Z.key):H!==null&&(H.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===ge&&Cm(De)===H.type)?(fe=g(H,Z.props),fe.ref=Xl(K,H,Z),fe.return=K,fe):(fe=zc(Z.type,Z.key,Z.props,null,K.mode,fe),fe.ref=Xl(K,H,Z),fe.return=K,fe)}function ee(K,H,Z,fe){return H===null||H.tag!==4||H.stateNode.containerInfo!==Z.containerInfo||H.stateNode.implementation!==Z.implementation?(H=lf(Z,K.mode,fe),H.return=K,H):(H=g(H,Z.children||[]),H.return=K,H)}function ue(K,H,Z,fe,De){return H===null||H.tag!==7?(H=ma(Z,K.mode,fe,De),H.return=K,H):(H=g(H,Z),H.return=K,H)}function he(K,H,Z){if(typeof H=="string"&&H!==""||typeof H=="number")return H=af(""+H,K.mode,Z),H.return=K,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case Se:return Z=zc(H.type,H.key,H.props,null,K.mode,Z),Z.ref=Xl(K,null,H),Z.return=K,Z;case Le:return H=lf(H,K.mode,Z),H.return=K,H;case ge:var fe=H._init;return he(K,fe(H._payload),Z)}if(Pt(H)||ke(H))return H=ma(H,K.mode,Z,null),H.return=K,H;gc(K,H)}return null}function le(K,H,Z,fe){var De=H!==null?H.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number")return De!==null?null:M(K,H,""+Z,fe);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case Se:return Z.key===De?z(K,H,Z,fe):null;case Le:return Z.key===De?ee(K,H,Z,fe):null;case ge:return De=Z._init,le(K,H,De(Z._payload),fe)}if(Pt(Z)||ke(Z))return De!==null?null:ue(K,H,Z,fe,null);gc(K,Z)}return null}function xe(K,H,Z,fe,De){if(typeof fe=="string"&&fe!==""||typeof fe=="number")return K=K.get(Z)||null,M(H,K,""+fe,De);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case Se:return K=K.get(fe.key===null?Z:fe.key)||null,z(H,K,fe,De);case Le:return K=K.get(fe.key===null?Z:fe.key)||null,ee(H,K,fe,De);case ge:var Ue=fe._init;return xe(K,H,Z,Ue(fe._payload),De)}if(Pt(fe)||ke(fe))return K=K.get(Z)||null,ue(H,K,fe,De,null);gc(H,fe)}return null}function be(K,H,Z,fe){for(var De=null,Ue=null,Be=H,$e=H=0,sn=null;Be!==null&&$e<Z.length;$e++){Be.index>$e?(sn=Be,Be=null):sn=Be.sibling;var dt=le(K,Be,Z[$e],fe);if(dt===null){Be===null&&(Be=sn);break}n&&Be&&dt.alternate===null&&s(K,Be),H=v(dt,H,$e),Ue===null?De=dt:Ue.sibling=dt,Ue=dt,Be=sn}if($e===Z.length)return u(K,Be),At&&aa(K,$e),De;if(Be===null){for(;$e<Z.length;$e++)Be=he(K,Z[$e],fe),Be!==null&&(H=v(Be,H,$e),Ue===null?De=Be:Ue.sibling=Be,Ue=Be);return At&&aa(K,$e),De}for(Be=f(K,Be);$e<Z.length;$e++)sn=xe(Be,K,$e,Z[$e],fe),sn!==null&&(n&&sn.alternate!==null&&Be.delete(sn.key===null?$e:sn.key),H=v(sn,H,$e),Ue===null?De=sn:Ue.sibling=sn,Ue=sn);return n&&Be.forEach(function(yo){return s(K,yo)}),At&&aa(K,$e),De}function Re(K,H,Z,fe){var De=ke(Z);if(typeof De!="function")throw Error(t(150));if(Z=De.call(Z),Z==null)throw Error(t(151));for(var Ue=De=null,Be=H,$e=H=0,sn=null,dt=Z.next();Be!==null&&!dt.done;$e++,dt=Z.next()){Be.index>$e?(sn=Be,Be=null):sn=Be.sibling;var yo=le(K,Be,dt.value,fe);if(yo===null){Be===null&&(Be=sn);break}n&&Be&&yo.alternate===null&&s(K,Be),H=v(yo,H,$e),Ue===null?De=yo:Ue.sibling=yo,Ue=yo,Be=sn}if(dt.done)return u(K,Be),At&&aa(K,$e),De;if(Be===null){for(;!dt.done;$e++,dt=Z.next())dt=he(K,dt.value,fe),dt!==null&&(H=v(dt,H,$e),Ue===null?De=dt:Ue.sibling=dt,Ue=dt);return At&&aa(K,$e),De}for(Be=f(K,Be);!dt.done;$e++,dt=Z.next())dt=xe(Be,K,$e,dt.value,fe),dt!==null&&(n&&dt.alternate!==null&&Be.delete(dt.key===null?$e:dt.key),H=v(dt,H,$e),Ue===null?De=dt:Ue.sibling=dt,Ue=dt);return n&&Be.forEach(function(xx){return s(K,xx)}),At&&aa(K,$e),De}function Vt(K,H,Z,fe){if(typeof Z=="object"&&Z!==null&&Z.type===F&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case Se:e:{for(var De=Z.key,Ue=H;Ue!==null;){if(Ue.key===De){if(De=Z.type,De===F){if(Ue.tag===7){u(K,Ue.sibling),H=g(Ue,Z.props.children),H.return=K,K=H;break e}}else if(Ue.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===ge&&Cm(De)===Ue.type){u(K,Ue.sibling),H=g(Ue,Z.props),H.ref=Xl(K,Ue,Z),H.return=K,K=H;break e}u(K,Ue);break}else s(K,Ue);Ue=Ue.sibling}Z.type===F?(H=ma(Z.props.children,K.mode,fe,Z.key),H.return=K,K=H):(fe=zc(Z.type,Z.key,Z.props,null,K.mode,fe),fe.ref=Xl(K,H,Z),fe.return=K,K=fe)}return S(K);case Le:e:{for(Ue=Z.key;H!==null;){if(H.key===Ue)if(H.tag===4&&H.stateNode.containerInfo===Z.containerInfo&&H.stateNode.implementation===Z.implementation){u(K,H.sibling),H=g(H,Z.children||[]),H.return=K,K=H;break e}else{u(K,H);break}else s(K,H);H=H.sibling}H=lf(Z,K.mode,fe),H.return=K,K=H}return S(K);case ge:return Ue=Z._init,Vt(K,H,Ue(Z._payload),fe)}if(Pt(Z))return be(K,H,Z,fe);if(ke(Z))return Re(K,H,Z,fe);gc(K,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"?(Z=""+Z,H!==null&&H.tag===6?(u(K,H.sibling),H=g(H,Z),H.return=K,K=H):(u(K,H),H=af(Z,K.mode,fe),H.return=K,K=H),S(K)):u(K,H)}return Vt}var rl=km(!0),Am=km(!1),_c=oo(null),yc=null,il=null,gd=null;function _d(){gd=il=yc=null}function yd(n){var s=_c.current;It(_c),n._currentValue=s}function vd(n,s,u){for(;n!==null;){var f=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,f!==null&&(f.childLanes|=s)):f!==null&&(f.childLanes&s)!==s&&(f.childLanes|=s),n===u)break;n=n.return}}function sl(n,s){yc=n,gd=il=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&s)!==0&&(Yn=!0),n.firstContext=null)}function jr(n){var s=n._currentValue;if(gd!==n)if(n={context:n,memoizedValue:s,next:null},il===null){if(yc===null)throw Error(t(308));il=n,yc.dependencies={lanes:0,firstContext:n}}else il=il.next=n;return s}var la=null;function wd(n){la===null?la=[n]:la.push(n)}function bm(n,s,u,f){var g=s.interleaved;return g===null?(u.next=u,wd(s)):(u.next=g.next,g.next=u),s.interleaved=u,_s(n,f)}function _s(n,s){n.lanes|=s;var u=n.alternate;for(u!==null&&(u.lanes|=s),u=n,n=n.return;n!==null;)n.childLanes|=s,u=n.alternate,u!==null&&(u.childLanes|=s),u=n,n=n.return;return u.tag===3?u.stateNode:null}var uo=!1;function xd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Nm(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function ys(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function co(n,s,u){var f=n.updateQueue;if(f===null)return null;if(f=f.shared,(ct&2)!==0){var g=f.pending;return g===null?s.next=s:(s.next=g.next,g.next=s),f.pending=s,_s(n,u)}return g=f.interleaved,g===null?(s.next=s,wd(f)):(s.next=g.next,g.next=s),f.interleaved=s,_s(n,u)}function vc(n,s,u){if(s=s.updateQueue,s!==null&&(s=s.shared,(u&4194240)!==0)){var f=s.lanes;f&=n.pendingLanes,u|=f,s.lanes=u,ir(n,u)}}function Rm(n,s){var u=n.updateQueue,f=n.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var g=null,v=null;if(u=u.firstBaseUpdate,u!==null){do{var S={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};v===null?g=v=S:v=v.next=S,u=u.next}while(u!==null);v===null?g=v=s:v=v.next=s}else g=v=s;u={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:f.shared,effects:f.effects},n.updateQueue=u;return}n=u.lastBaseUpdate,n===null?u.firstBaseUpdate=s:n.next=s,u.lastBaseUpdate=s}function wc(n,s,u,f){var g=n.updateQueue;uo=!1;var v=g.firstBaseUpdate,S=g.lastBaseUpdate,M=g.shared.pending;if(M!==null){g.shared.pending=null;var z=M,ee=z.next;z.next=null,S===null?v=ee:S.next=ee,S=z;var ue=n.alternate;ue!==null&&(ue=ue.updateQueue,M=ue.lastBaseUpdate,M!==S&&(M===null?ue.firstBaseUpdate=ee:M.next=ee,ue.lastBaseUpdate=z))}if(v!==null){var he=g.baseState;S=0,ue=ee=z=null,M=v;do{var le=M.lane,xe=M.eventTime;if((f&le)===le){ue!==null&&(ue=ue.next={eventTime:xe,lane:0,tag:M.tag,payload:M.payload,callback:M.callback,next:null});e:{var be=n,Re=M;switch(le=s,xe=u,Re.tag){case 1:if(be=Re.payload,typeof be=="function"){he=be.call(xe,he,le);break e}he=be;break e;case 3:be.flags=be.flags&-65537|128;case 0:if(be=Re.payload,le=typeof be=="function"?be.call(xe,he,le):be,le==null)break e;he=ie({},he,le);break e;case 2:uo=!0}}M.callback!==null&&M.lane!==0&&(n.flags|=64,le=g.effects,le===null?g.effects=[M]:le.push(M))}else xe={eventTime:xe,lane:le,tag:M.tag,payload:M.payload,callback:M.callback,next:null},ue===null?(ee=ue=xe,z=he):ue=ue.next=xe,S|=le;if(M=M.next,M===null){if(M=g.shared.pending,M===null)break;le=M,M=le.next,le.next=null,g.lastBaseUpdate=le,g.shared.pending=null}}while(!0);if(ue===null&&(z=he),g.baseState=z,g.firstBaseUpdate=ee,g.lastBaseUpdate=ue,s=g.shared.interleaved,s!==null){g=s;do S|=g.lane,g=g.next;while(g!==s)}else v===null&&(g.shared.lanes=0);ha|=S,n.lanes=S,n.memoizedState=he}}function Lm(n,s,u){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var f=n[s],g=f.callback;if(g!==null){if(f.callback=null,f=u,typeof g!="function")throw Error(t(191,g));g.call(f)}}}var eu={},Ri=oo(eu),tu=oo(eu),nu=oo(eu);function ua(n){if(n===eu)throw Error(t(174));return n}function Ed(n,s){switch(xt(nu,s),xt(tu,n),xt(Ri,eu),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Wi(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=Wi(s,n)}It(Ri),xt(Ri,s)}function ol(){It(Ri),It(tu),It(nu)}function Dm(n){ua(nu.current);var s=ua(Ri.current),u=Wi(s,n.type);s!==u&&(xt(tu,n),xt(Ri,u))}function Td(n){tu.current===n&&(It(Ri),It(tu))}var Nt=oo(0);function xc(n){for(var s=n;s!==null;){if(s.tag===13){var u=s.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Id=[];function Sd(){for(var n=0;n<Id.length;n++)Id[n]._workInProgressVersionPrimary=null;Id.length=0}var Ec=Ce.ReactCurrentDispatcher,Pd=Ce.ReactCurrentBatchConfig,ca=0,Rt=null,Yt=null,nn=null,Tc=!1,ru=!1,iu=0,Hw=0;function En(){throw Error(t(321))}function Cd(n,s){if(s===null)return!1;for(var u=0;u<s.length&&u<n.length;u++)if(!lr(n[u],s[u]))return!1;return!0}function kd(n,s,u,f,g,v){if(ca=v,Rt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Ec.current=n===null||n.memoizedState===null?Gw:Kw,n=u(f,g),ru){v=0;do{if(ru=!1,iu=0,25<=v)throw Error(t(301));v+=1,nn=Yt=null,s.updateQueue=null,Ec.current=Zw,n=u(f,g)}while(ru)}if(Ec.current=Pc,s=Yt!==null&&Yt.next!==null,ca=0,nn=Yt=Rt=null,Tc=!1,s)throw Error(t(300));return n}function Ad(){var n=iu!==0;return iu=0,n}function Li(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nn===null?Rt.memoizedState=nn=n:nn=nn.next=n,nn}function Fr(){if(Yt===null){var n=Rt.alternate;n=n!==null?n.memoizedState:null}else n=Yt.next;var s=nn===null?Rt.memoizedState:nn.next;if(s!==null)nn=s,Yt=n;else{if(n===null)throw Error(t(310));Yt=n,n={memoizedState:Yt.memoizedState,baseState:Yt.baseState,baseQueue:Yt.baseQueue,queue:Yt.queue,next:null},nn===null?Rt.memoizedState=nn=n:nn=nn.next=n}return nn}function su(n,s){return typeof s=="function"?s(n):s}function bd(n){var s=Fr(),u=s.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=n;var f=Yt,g=f.baseQueue,v=u.pending;if(v!==null){if(g!==null){var S=g.next;g.next=v.next,v.next=S}f.baseQueue=g=v,u.pending=null}if(g!==null){v=g.next,f=f.baseState;var M=S=null,z=null,ee=v;do{var ue=ee.lane;if((ca&ue)===ue)z!==null&&(z=z.next={lane:0,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),f=ee.hasEagerState?ee.eagerState:n(f,ee.action);else{var he={lane:ue,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null};z===null?(M=z=he,S=f):z=z.next=he,Rt.lanes|=ue,ha|=ue}ee=ee.next}while(ee!==null&&ee!==v);z===null?S=f:z.next=M,lr(f,s.memoizedState)||(Yn=!0),s.memoizedState=f,s.baseState=S,s.baseQueue=z,u.lastRenderedState=f}if(n=u.interleaved,n!==null){g=n;do v=g.lane,Rt.lanes|=v,ha|=v,g=g.next;while(g!==n)}else g===null&&(u.lanes=0);return[s.memoizedState,u.dispatch]}function Nd(n){var s=Fr(),u=s.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=n;var f=u.dispatch,g=u.pending,v=s.memoizedState;if(g!==null){u.pending=null;var S=g=g.next;do v=n(v,S.action),S=S.next;while(S!==g);lr(v,s.memoizedState)||(Yn=!0),s.memoizedState=v,s.baseQueue===null&&(s.baseState=v),u.lastRenderedState=v}return[v,f]}function Mm(){}function Om(n,s){var u=Rt,f=Fr(),g=s(),v=!lr(f.memoizedState,g);if(v&&(f.memoizedState=g,Yn=!0),f=f.queue,Rd(Fm.bind(null,u,f,n),[n]),f.getSnapshot!==s||v||nn!==null&&nn.memoizedState.tag&1){if(u.flags|=2048,ou(9,jm.bind(null,u,f,g,s),void 0,null),rn===null)throw Error(t(349));(ca&30)!==0||Vm(u,s,g)}return g}function Vm(n,s,u){n.flags|=16384,n={getSnapshot:s,value:u},s=Rt.updateQueue,s===null?(s={lastEffect:null,stores:null},Rt.updateQueue=s,s.stores=[n]):(u=s.stores,u===null?s.stores=[n]:u.push(n))}function jm(n,s,u,f){s.value=u,s.getSnapshot=f,zm(s)&&Um(n)}function Fm(n,s,u){return u(function(){zm(s)&&Um(n)})}function zm(n){var s=n.getSnapshot;n=n.value;try{var u=s();return!lr(n,u)}catch{return!0}}function Um(n){var s=_s(n,1);s!==null&&ii(s,n,1,-1)}function Bm(n){var s=Li();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:su,lastRenderedState:n},s.queue=n,n=n.dispatch=$w.bind(null,Rt,n),[s.memoizedState,n]}function ou(n,s,u,f){return n={tag:n,create:s,destroy:u,deps:f,next:null},s=Rt.updateQueue,s===null?(s={lastEffect:null,stores:null},Rt.updateQueue=s,s.lastEffect=n.next=n):(u=s.lastEffect,u===null?s.lastEffect=n.next=n:(f=u.next,u.next=n,n.next=f,s.lastEffect=n)),n}function Hm(){return Fr().memoizedState}function Ic(n,s,u,f){var g=Li();Rt.flags|=n,g.memoizedState=ou(1|s,u,void 0,f===void 0?null:f)}function Sc(n,s,u,f){var g=Fr();f=f===void 0?null:f;var v=void 0;if(Yt!==null){var S=Yt.memoizedState;if(v=S.destroy,f!==null&&Cd(f,S.deps)){g.memoizedState=ou(s,u,v,f);return}}Rt.flags|=n,g.memoizedState=ou(1|s,u,v,f)}function Wm(n,s){return Ic(8390656,8,n,s)}function Rd(n,s){return Sc(2048,8,n,s)}function qm(n,s){return Sc(4,2,n,s)}function $m(n,s){return Sc(4,4,n,s)}function Gm(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Km(n,s,u){return u=u!=null?u.concat([n]):null,Sc(4,4,Gm.bind(null,s,n),u)}function Ld(){}function Zm(n,s){var u=Fr();s=s===void 0?null:s;var f=u.memoizedState;return f!==null&&s!==null&&Cd(s,f[1])?f[0]:(u.memoizedState=[n,s],n)}function Qm(n,s){var u=Fr();s=s===void 0?null:s;var f=u.memoizedState;return f!==null&&s!==null&&Cd(s,f[1])?f[0]:(n=n(),u.memoizedState=[n,s],n)}function Ym(n,s,u){return(ca&21)===0?(n.baseState&&(n.baseState=!1,Yn=!0),n.memoizedState=u):(lr(u,s)||(u=Go(),Rt.lanes|=u,ha|=u,n.baseState=!0),s)}function Ww(n,s){var u=Je;Je=u!==0&&4>u?u:4,n(!0);var f=Pd.transition;Pd.transition={};try{n(!1),s()}finally{Je=u,Pd.transition=f}}function Jm(){return Fr().memoizedState}function qw(n,s,u){var f=mo(n);if(u={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null},Xm(n))eg(s,u);else if(u=bm(n,s,u,f),u!==null){var g=zn();ii(u,n,f,g),tg(u,s,f)}}function $w(n,s,u){var f=mo(n),g={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null};if(Xm(n))eg(s,g);else{var v=n.alternate;if(n.lanes===0&&(v===null||v.lanes===0)&&(v=s.lastRenderedReducer,v!==null))try{var S=s.lastRenderedState,M=v(S,u);if(g.hasEagerState=!0,g.eagerState=M,lr(M,S)){var z=s.interleaved;z===null?(g.next=g,wd(s)):(g.next=z.next,z.next=g),s.interleaved=g;return}}catch{}finally{}u=bm(n,s,g,f),u!==null&&(g=zn(),ii(u,n,f,g),tg(u,s,f))}}function Xm(n){var s=n.alternate;return n===Rt||s!==null&&s===Rt}function eg(n,s){ru=Tc=!0;var u=n.pending;u===null?s.next=s:(s.next=u.next,u.next=s),n.pending=s}function tg(n,s,u){if((u&4194240)!==0){var f=s.lanes;f&=n.pendingLanes,u|=f,s.lanes=u,ir(n,u)}}var Pc={readContext:jr,useCallback:En,useContext:En,useEffect:En,useImperativeHandle:En,useInsertionEffect:En,useLayoutEffect:En,useMemo:En,useReducer:En,useRef:En,useState:En,useDebugValue:En,useDeferredValue:En,useTransition:En,useMutableSource:En,useSyncExternalStore:En,useId:En,unstable_isNewReconciler:!1},Gw={readContext:jr,useCallback:function(n,s){return Li().memoizedState=[n,s===void 0?null:s],n},useContext:jr,useEffect:Wm,useImperativeHandle:function(n,s,u){return u=u!=null?u.concat([n]):null,Ic(4194308,4,Gm.bind(null,s,n),u)},useLayoutEffect:function(n,s){return Ic(4194308,4,n,s)},useInsertionEffect:function(n,s){return Ic(4,2,n,s)},useMemo:function(n,s){var u=Li();return s=s===void 0?null:s,n=n(),u.memoizedState=[n,s],n},useReducer:function(n,s,u){var f=Li();return s=u!==void 0?u(s):s,f.memoizedState=f.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},f.queue=n,n=n.dispatch=qw.bind(null,Rt,n),[f.memoizedState,n]},useRef:function(n){var s=Li();return n={current:n},s.memoizedState=n},useState:Bm,useDebugValue:Ld,useDeferredValue:function(n){return Li().memoizedState=n},useTransition:function(){var n=Bm(!1),s=n[0];return n=Ww.bind(null,n[1]),Li().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,u){var f=Rt,g=Li();if(At){if(u===void 0)throw Error(t(407));u=u()}else{if(u=s(),rn===null)throw Error(t(349));(ca&30)!==0||Vm(f,s,u)}g.memoizedState=u;var v={value:u,getSnapshot:s};return g.queue=v,Wm(Fm.bind(null,f,v,n),[n]),f.flags|=2048,ou(9,jm.bind(null,f,v,u,s),void 0,null),u},useId:function(){var n=Li(),s=rn.identifierPrefix;if(At){var u=gs,f=ms;u=(f&~(1<<32-Ge(f)-1)).toString(32)+u,s=":"+s+"R"+u,u=iu++,0<u&&(s+="H"+u.toString(32)),s+=":"}else u=Hw++,s=":"+s+"r"+u.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},Kw={readContext:jr,useCallback:Zm,useContext:jr,useEffect:Rd,useImperativeHandle:Km,useInsertionEffect:qm,useLayoutEffect:$m,useMemo:Qm,useReducer:bd,useRef:Hm,useState:function(){return bd(su)},useDebugValue:Ld,useDeferredValue:function(n){var s=Fr();return Ym(s,Yt.memoizedState,n)},useTransition:function(){var n=bd(su)[0],s=Fr().memoizedState;return[n,s]},useMutableSource:Mm,useSyncExternalStore:Om,useId:Jm,unstable_isNewReconciler:!1},Zw={readContext:jr,useCallback:Zm,useContext:jr,useEffect:Rd,useImperativeHandle:Km,useInsertionEffect:qm,useLayoutEffect:$m,useMemo:Qm,useReducer:Nd,useRef:Hm,useState:function(){return Nd(su)},useDebugValue:Ld,useDeferredValue:function(n){var s=Fr();return Yt===null?s.memoizedState=n:Ym(s,Yt.memoizedState,n)},useTransition:function(){var n=Nd(su)[0],s=Fr().memoizedState;return[n,s]},useMutableSource:Mm,useSyncExternalStore:Om,useId:Jm,unstable_isNewReconciler:!1};function ti(n,s){if(n&&n.defaultProps){s=ie({},s),n=n.defaultProps;for(var u in n)s[u]===void 0&&(s[u]=n[u]);return s}return s}function Dd(n,s,u,f){s=n.memoizedState,u=u(f,s),u=u==null?s:ie({},s,u),n.memoizedState=u,n.lanes===0&&(n.updateQueue.baseState=u)}var Cc={isMounted:function(n){return(n=n._reactInternals)?Hn(n)===n:!1},enqueueSetState:function(n,s,u){n=n._reactInternals;var f=zn(),g=mo(n),v=ys(f,g);v.payload=s,u!=null&&(v.callback=u),s=co(n,v,g),s!==null&&(ii(s,n,g,f),vc(s,n,g))},enqueueReplaceState:function(n,s,u){n=n._reactInternals;var f=zn(),g=mo(n),v=ys(f,g);v.tag=1,v.payload=s,u!=null&&(v.callback=u),s=co(n,v,g),s!==null&&(ii(s,n,g,f),vc(s,n,g))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var u=zn(),f=mo(n),g=ys(u,f);g.tag=2,s!=null&&(g.callback=s),s=co(n,g,f),s!==null&&(ii(s,n,f,u),vc(s,n,f))}};function ng(n,s,u,f,g,v,S){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(f,v,S):s.prototype&&s.prototype.isPureReactComponent?!ki(u,f)||!ki(g,v):!0}function rg(n,s,u){var f=!1,g=ao,v=s.contextType;return typeof v=="object"&&v!==null?v=jr(v):(g=Qn(s)?sa:xn.current,f=s.contextTypes,v=(f=f!=null)?Xa(n,g):ao),s=new s(u,v),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Cc,n.stateNode=s,s._reactInternals=n,f&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=g,n.__reactInternalMemoizedMaskedChildContext=v),s}function ig(n,s,u,f){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(u,f),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(u,f),s.state!==n&&Cc.enqueueReplaceState(s,s.state,null)}function Md(n,s,u,f){var g=n.stateNode;g.props=u,g.state=n.memoizedState,g.refs={},xd(n);var v=s.contextType;typeof v=="object"&&v!==null?g.context=jr(v):(v=Qn(s)?sa:xn.current,g.context=Xa(n,v)),g.state=n.memoizedState,v=s.getDerivedStateFromProps,typeof v=="function"&&(Dd(n,s,v,u),g.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(s=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),s!==g.state&&Cc.enqueueReplaceState(g,g.state,null),wc(n,u,g,f),g.state=n.memoizedState),typeof g.componentDidMount=="function"&&(n.flags|=4194308)}function al(n,s){try{var u="",f=s;do u+=Ae(f),f=f.return;while(f);var g=u}catch(v){g=`
Error generating stack: `+v.message+`
`+v.stack}return{value:n,source:s,stack:g,digest:null}}function Od(n,s,u){return{value:n,source:null,stack:u??null,digest:s??null}}function Vd(n,s){try{console.error(s.value)}catch(u){setTimeout(function(){throw u})}}var Qw=typeof WeakMap=="function"?WeakMap:Map;function sg(n,s,u){u=ys(-1,u),u.tag=3,u.payload={element:null};var f=s.value;return u.callback=function(){Dc||(Dc=!0,Jd=f),Vd(n,s)},u}function og(n,s,u){u=ys(-1,u),u.tag=3;var f=n.type.getDerivedStateFromError;if(typeof f=="function"){var g=s.value;u.payload=function(){return f(g)},u.callback=function(){Vd(n,s)}}var v=n.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(u.callback=function(){Vd(n,s),typeof f!="function"&&(fo===null?fo=new Set([this]):fo.add(this));var S=s.stack;this.componentDidCatch(s.value,{componentStack:S!==null?S:""})}),u}function ag(n,s,u){var f=n.pingCache;if(f===null){f=n.pingCache=new Qw;var g=new Set;f.set(s,g)}else g=f.get(s),g===void 0&&(g=new Set,f.set(s,g));g.has(u)||(g.add(u),n=cx.bind(null,n,s,u),s.then(n,n))}function lg(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function ug(n,s,u,f,g){return(n.mode&1)===0?(n===s?n.flags|=65536:(n.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(s=ys(-1,1),s.tag=2,co(u,s,1))),u.lanes|=1),n):(n.flags|=65536,n.lanes=g,n)}var Yw=Ce.ReactCurrentOwner,Yn=!1;function Fn(n,s,u,f){s.child=n===null?Am(s,null,u,f):rl(s,n.child,u,f)}function cg(n,s,u,f,g){u=u.render;var v=s.ref;return sl(s,g),f=kd(n,s,u,f,v,g),u=Ad(),n!==null&&!Yn?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~g,vs(n,s,g)):(At&&u&&hd(s),s.flags|=1,Fn(n,s,f,g),s.child)}function hg(n,s,u,f,g){if(n===null){var v=u.type;return typeof v=="function"&&!of(v)&&v.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(s.tag=15,s.type=v,dg(n,s,v,f,g)):(n=zc(u.type,null,f,s,s.mode,g),n.ref=s.ref,n.return=s,s.child=n)}if(v=n.child,(n.lanes&g)===0){var S=v.memoizedProps;if(u=u.compare,u=u!==null?u:ki,u(S,f)&&n.ref===s.ref)return vs(n,s,g)}return s.flags|=1,n=_o(v,f),n.ref=s.ref,n.return=s,s.child=n}function dg(n,s,u,f,g){if(n!==null){var v=n.memoizedProps;if(ki(v,f)&&n.ref===s.ref)if(Yn=!1,s.pendingProps=f=v,(n.lanes&g)!==0)(n.flags&131072)!==0&&(Yn=!0);else return s.lanes=n.lanes,vs(n,s,g)}return jd(n,s,u,f,g)}function fg(n,s,u){var f=s.pendingProps,g=f.children,v=n!==null?n.memoizedState:null;if(f.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},xt(ul,dr),dr|=u;else{if((u&1073741824)===0)return n=v!==null?v.baseLanes|u:u,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,xt(ul,dr),dr|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=v!==null?v.baseLanes:u,xt(ul,dr),dr|=f}else v!==null?(f=v.baseLanes|u,s.memoizedState=null):f=u,xt(ul,dr),dr|=f;return Fn(n,s,g,u),s.child}function pg(n,s){var u=s.ref;(n===null&&u!==null||n!==null&&n.ref!==u)&&(s.flags|=512,s.flags|=2097152)}function jd(n,s,u,f,g){var v=Qn(u)?sa:xn.current;return v=Xa(s,v),sl(s,g),u=kd(n,s,u,f,v,g),f=Ad(),n!==null&&!Yn?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~g,vs(n,s,g)):(At&&f&&hd(s),s.flags|=1,Fn(n,s,u,g),s.child)}function mg(n,s,u,f,g){if(Qn(u)){var v=!0;hc(s)}else v=!1;if(sl(s,g),s.stateNode===null)Ac(n,s),rg(s,u,f),Md(s,u,f,g),f=!0;else if(n===null){var S=s.stateNode,M=s.memoizedProps;S.props=M;var z=S.context,ee=u.contextType;typeof ee=="object"&&ee!==null?ee=jr(ee):(ee=Qn(u)?sa:xn.current,ee=Xa(s,ee));var ue=u.getDerivedStateFromProps,he=typeof ue=="function"||typeof S.getSnapshotBeforeUpdate=="function";he||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(M!==f||z!==ee)&&ig(s,S,f,ee),uo=!1;var le=s.memoizedState;S.state=le,wc(s,f,S,g),z=s.memoizedState,M!==f||le!==z||Zn.current||uo?(typeof ue=="function"&&(Dd(s,u,ue,f),z=s.memoizedState),(M=uo||ng(s,u,M,f,le,z,ee))?(he||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(s.flags|=4194308)):(typeof S.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=f,s.memoizedState=z),S.props=f,S.state=z,S.context=ee,f=M):(typeof S.componentDidMount=="function"&&(s.flags|=4194308),f=!1)}else{S=s.stateNode,Nm(n,s),M=s.memoizedProps,ee=s.type===s.elementType?M:ti(s.type,M),S.props=ee,he=s.pendingProps,le=S.context,z=u.contextType,typeof z=="object"&&z!==null?z=jr(z):(z=Qn(u)?sa:xn.current,z=Xa(s,z));var xe=u.getDerivedStateFromProps;(ue=typeof xe=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(M!==he||le!==z)&&ig(s,S,f,z),uo=!1,le=s.memoizedState,S.state=le,wc(s,f,S,g);var be=s.memoizedState;M!==he||le!==be||Zn.current||uo?(typeof xe=="function"&&(Dd(s,u,xe,f),be=s.memoizedState),(ee=uo||ng(s,u,ee,f,le,be,z)||!1)?(ue||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(f,be,z),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(f,be,z)),typeof S.componentDidUpdate=="function"&&(s.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof S.componentDidUpdate!="function"||M===n.memoizedProps&&le===n.memoizedState||(s.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||M===n.memoizedProps&&le===n.memoizedState||(s.flags|=1024),s.memoizedProps=f,s.memoizedState=be),S.props=f,S.state=be,S.context=z,f=ee):(typeof S.componentDidUpdate!="function"||M===n.memoizedProps&&le===n.memoizedState||(s.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||M===n.memoizedProps&&le===n.memoizedState||(s.flags|=1024),f=!1)}return Fd(n,s,u,f,v,g)}function Fd(n,s,u,f,g,v){pg(n,s);var S=(s.flags&128)!==0;if(!f&&!S)return g&&wm(s,u,!1),vs(n,s,v);f=s.stateNode,Yw.current=s;var M=S&&typeof u.getDerivedStateFromError!="function"?null:f.render();return s.flags|=1,n!==null&&S?(s.child=rl(s,n.child,null,v),s.child=rl(s,null,M,v)):Fn(n,s,M,v),s.memoizedState=f.state,g&&wm(s,u,!0),s.child}function gg(n){var s=n.stateNode;s.pendingContext?ym(n,s.pendingContext,s.pendingContext!==s.context):s.context&&ym(n,s.context,!1),Ed(n,s.containerInfo)}function _g(n,s,u,f,g){return nl(),md(g),s.flags|=256,Fn(n,s,u,f),s.child}var zd={dehydrated:null,treeContext:null,retryLane:0};function Ud(n){return{baseLanes:n,cachePool:null,transitions:null}}function yg(n,s,u){var f=s.pendingProps,g=Nt.current,v=!1,S=(s.flags&128)!==0,M;if((M=S)||(M=n!==null&&n.memoizedState===null?!1:(g&2)!==0),M?(v=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(g|=1),xt(Nt,g&1),n===null)return pd(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((s.mode&1)===0?s.lanes=1:n.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(S=f.children,n=f.fallback,v?(f=s.mode,v=s.child,S={mode:"hidden",children:S},(f&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=S):v=Uc(S,f,0,null),n=ma(n,f,u,null),v.return=s,n.return=s,v.sibling=n,s.child=v,s.child.memoizedState=Ud(u),s.memoizedState=zd,n):Bd(s,S));if(g=n.memoizedState,g!==null&&(M=g.dehydrated,M!==null))return Jw(n,s,S,f,M,g,u);if(v){v=f.fallback,S=s.mode,g=n.child,M=g.sibling;var z={mode:"hidden",children:f.children};return(S&1)===0&&s.child!==g?(f=s.child,f.childLanes=0,f.pendingProps=z,s.deletions=null):(f=_o(g,z),f.subtreeFlags=g.subtreeFlags&14680064),M!==null?v=_o(M,v):(v=ma(v,S,u,null),v.flags|=2),v.return=s,f.return=s,f.sibling=v,s.child=f,f=v,v=s.child,S=n.child.memoizedState,S=S===null?Ud(u):{baseLanes:S.baseLanes|u,cachePool:null,transitions:S.transitions},v.memoizedState=S,v.childLanes=n.childLanes&~u,s.memoizedState=zd,f}return v=n.child,n=v.sibling,f=_o(v,{mode:"visible",children:f.children}),(s.mode&1)===0&&(f.lanes=u),f.return=s,f.sibling=null,n!==null&&(u=s.deletions,u===null?(s.deletions=[n],s.flags|=16):u.push(n)),s.child=f,s.memoizedState=null,f}function Bd(n,s){return s=Uc({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function kc(n,s,u,f){return f!==null&&md(f),rl(s,n.child,null,u),n=Bd(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function Jw(n,s,u,f,g,v,S){if(u)return s.flags&256?(s.flags&=-257,f=Od(Error(t(422))),kc(n,s,S,f)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(v=f.fallback,g=s.mode,f=Uc({mode:"visible",children:f.children},g,0,null),v=ma(v,g,S,null),v.flags|=2,f.return=s,v.return=s,f.sibling=v,s.child=f,(s.mode&1)!==0&&rl(s,n.child,null,S),s.child.memoizedState=Ud(S),s.memoizedState=zd,v);if((s.mode&1)===0)return kc(n,s,S,null);if(g.data==="$!"){if(f=g.nextSibling&&g.nextSibling.dataset,f)var M=f.dgst;return f=M,v=Error(t(419)),f=Od(v,f,void 0),kc(n,s,S,f)}if(M=(S&n.childLanes)!==0,Yn||M){if(f=rn,f!==null){switch(S&-S){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(f.suspendedLanes|S))!==0?0:g,g!==0&&g!==v.retryLane&&(v.retryLane=g,_s(n,g),ii(f,n,g,-1))}return sf(),f=Od(Error(t(421))),kc(n,s,S,f)}return g.data==="$?"?(s.flags|=128,s.child=n.child,s=hx.bind(null,n),g._reactRetry=s,null):(n=v.treeContext,hr=Ni(g.nextSibling),cr=s,At=!0,ei=null,n!==null&&(Or[Vr++]=ms,Or[Vr++]=gs,Or[Vr++]=oa,ms=n.id,gs=n.overflow,oa=s),s=Bd(s,f.children),s.flags|=4096,s)}function vg(n,s,u){n.lanes|=s;var f=n.alternate;f!==null&&(f.lanes|=s),vd(n.return,s,u)}function Hd(n,s,u,f,g){var v=n.memoizedState;v===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:g}:(v.isBackwards=s,v.rendering=null,v.renderingStartTime=0,v.last=f,v.tail=u,v.tailMode=g)}function wg(n,s,u){var f=s.pendingProps,g=f.revealOrder,v=f.tail;if(Fn(n,s,f.children,u),f=Nt.current,(f&2)!==0)f=f&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&vg(n,u,s);else if(n.tag===19)vg(n,u,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}f&=1}if(xt(Nt,f),(s.mode&1)===0)s.memoizedState=null;else switch(g){case"forwards":for(u=s.child,g=null;u!==null;)n=u.alternate,n!==null&&xc(n)===null&&(g=u),u=u.sibling;u=g,u===null?(g=s.child,s.child=null):(g=u.sibling,u.sibling=null),Hd(s,!1,g,u,v);break;case"backwards":for(u=null,g=s.child,s.child=null;g!==null;){if(n=g.alternate,n!==null&&xc(n)===null){s.child=g;break}n=g.sibling,g.sibling=u,u=g,g=n}Hd(s,!0,u,null,v);break;case"together":Hd(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Ac(n,s){(s.mode&1)===0&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function vs(n,s,u){if(n!==null&&(s.dependencies=n.dependencies),ha|=s.lanes,(u&s.childLanes)===0)return null;if(n!==null&&s.child!==n.child)throw Error(t(153));if(s.child!==null){for(n=s.child,u=_o(n,n.pendingProps),s.child=u,u.return=s;n.sibling!==null;)n=n.sibling,u=u.sibling=_o(n,n.pendingProps),u.return=s;u.sibling=null}return s.child}function Xw(n,s,u){switch(s.tag){case 3:gg(s),nl();break;case 5:Dm(s);break;case 1:Qn(s.type)&&hc(s);break;case 4:Ed(s,s.stateNode.containerInfo);break;case 10:var f=s.type._context,g=s.memoizedProps.value;xt(_c,f._currentValue),f._currentValue=g;break;case 13:if(f=s.memoizedState,f!==null)return f.dehydrated!==null?(xt(Nt,Nt.current&1),s.flags|=128,null):(u&s.child.childLanes)!==0?yg(n,s,u):(xt(Nt,Nt.current&1),n=vs(n,s,u),n!==null?n.sibling:null);xt(Nt,Nt.current&1);break;case 19:if(f=(u&s.childLanes)!==0,(n.flags&128)!==0){if(f)return wg(n,s,u);s.flags|=128}if(g=s.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),xt(Nt,Nt.current),f)break;return null;case 22:case 23:return s.lanes=0,fg(n,s,u)}return vs(n,s,u)}var xg,Wd,Eg,Tg;xg=function(n,s){for(var u=s.child;u!==null;){if(u.tag===5||u.tag===6)n.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===s)break;for(;u.sibling===null;){if(u.return===null||u.return===s)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},Wd=function(){},Eg=function(n,s,u,f){var g=n.memoizedProps;if(g!==f){n=s.stateNode,ua(Ri.current);var v=null;switch(u){case"input":g=Rs(n,g),f=Rs(n,f),v=[];break;case"select":g=ie({},g,{value:void 0}),f=ie({},f,{value:void 0}),v=[];break;case"textarea":g=Ls(n,g),f=Ls(n,f),v=[];break;default:typeof g.onClick!="function"&&typeof f.onClick=="function"&&(n.onclick=oe)}rr(u,f);var S;u=null;for(ee in g)if(!f.hasOwnProperty(ee)&&g.hasOwnProperty(ee)&&g[ee]!=null)if(ee==="style"){var M=g[ee];for(S in M)M.hasOwnProperty(S)&&(u||(u={}),u[S]="")}else ee!=="dangerouslySetInnerHTML"&&ee!=="children"&&ee!=="suppressContentEditableWarning"&&ee!=="suppressHydrationWarning"&&ee!=="autoFocus"&&(a.hasOwnProperty(ee)?v||(v=[]):(v=v||[]).push(ee,null));for(ee in f){var z=f[ee];if(M=g!=null?g[ee]:void 0,f.hasOwnProperty(ee)&&z!==M&&(z!=null||M!=null))if(ee==="style")if(M){for(S in M)!M.hasOwnProperty(S)||z&&z.hasOwnProperty(S)||(u||(u={}),u[S]="");for(S in z)z.hasOwnProperty(S)&&M[S]!==z[S]&&(u||(u={}),u[S]=z[S])}else u||(v||(v=[]),v.push(ee,u)),u=z;else ee==="dangerouslySetInnerHTML"?(z=z?z.__html:void 0,M=M?M.__html:void 0,z!=null&&M!==z&&(v=v||[]).push(ee,z)):ee==="children"?typeof z!="string"&&typeof z!="number"||(v=v||[]).push(ee,""+z):ee!=="suppressContentEditableWarning"&&ee!=="suppressHydrationWarning"&&(a.hasOwnProperty(ee)?(z!=null&&ee==="onScroll"&&yt("scroll",n),v||M===z||(v=[])):(v=v||[]).push(ee,z))}u&&(v=v||[]).push("style",u);var ee=v;(s.updateQueue=ee)&&(s.flags|=4)}},Tg=function(n,s,u,f){u!==f&&(s.flags|=4)};function au(n,s){if(!At)switch(n.tailMode){case"hidden":s=n.tail;for(var u=null;s!==null;)s.alternate!==null&&(u=s),s=s.sibling;u===null?n.tail=null:u.sibling=null;break;case"collapsed":u=n.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:f.sibling=null}}function Tn(n){var s=n.alternate!==null&&n.alternate.child===n.child,u=0,f=0;if(s)for(var g=n.child;g!==null;)u|=g.lanes|g.childLanes,f|=g.subtreeFlags&14680064,f|=g.flags&14680064,g.return=n,g=g.sibling;else for(g=n.child;g!==null;)u|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=n,g=g.sibling;return n.subtreeFlags|=f,n.childLanes=u,s}function ex(n,s,u){var f=s.pendingProps;switch(dd(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tn(s),null;case 1:return Qn(s.type)&&cc(),Tn(s),null;case 3:return f=s.stateNode,ol(),It(Zn),It(xn),Sd(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(n===null||n.child===null)&&(mc(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,ei!==null&&(tf(ei),ei=null))),Wd(n,s),Tn(s),null;case 5:Td(s);var g=ua(nu.current);if(u=s.type,n!==null&&s.stateNode!=null)Eg(n,s,u,f,g),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!f){if(s.stateNode===null)throw Error(t(166));return Tn(s),null}if(n=ua(Ri.current),mc(s)){f=s.stateNode,u=s.type;var v=s.memoizedProps;switch(f[Mr]=s,f[io]=v,n=(s.mode&1)!==0,u){case"dialog":yt("cancel",f),yt("close",f);break;case"iframe":case"object":case"embed":yt("load",f);break;case"video":case"audio":for(g=0;g<to.length;g++)yt(to[g],f);break;case"source":yt("error",f);break;case"img":case"image":case"link":yt("error",f),yt("load",f);break;case"details":yt("toggle",f);break;case"input":zo(f,v),yt("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!v.multiple},yt("invalid",f);break;case"textarea":Ds(f,v),yt("invalid",f)}rr(u,v),g=null;for(var S in v)if(v.hasOwnProperty(S)){var M=v[S];S==="children"?typeof M=="string"?f.textContent!==M&&(v.suppressHydrationWarning!==!0&&X(f.textContent,M,n),g=["children",M]):typeof M=="number"&&f.textContent!==""+M&&(v.suppressHydrationWarning!==!0&&X(f.textContent,M,n),g=["children",""+M]):a.hasOwnProperty(S)&&M!=null&&S==="onScroll"&&yt("scroll",f)}switch(u){case"input":ui(f),ci(f,v,!0);break;case"textarea":ui(f),hi(f);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(f.onclick=oe)}f=g,s.updateQueue=f,f!==null&&(s.flags|=4)}else{S=g.nodeType===9?g:g.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Hi(u)),n==="http://www.w3.org/1999/xhtml"?u==="script"?(n=S.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof f.is=="string"?n=S.createElement(u,{is:f.is}):(n=S.createElement(u),u==="select"&&(S=n,f.multiple?S.multiple=!0:f.size&&(S.size=f.size))):n=S.createElementNS(n,u),n[Mr]=s,n[io]=f,xg(n,s,!1,!1),s.stateNode=n;e:{switch(S=gr(u,f),u){case"dialog":yt("cancel",n),yt("close",n),g=f;break;case"iframe":case"object":case"embed":yt("load",n),g=f;break;case"video":case"audio":for(g=0;g<to.length;g++)yt(to[g],n);g=f;break;case"source":yt("error",n),g=f;break;case"img":case"image":case"link":yt("error",n),yt("load",n),g=f;break;case"details":yt("toggle",n),g=f;break;case"input":zo(n,f),g=Rs(n,f),yt("invalid",n);break;case"option":g=f;break;case"select":n._wrapperState={wasMultiple:!!f.multiple},g=ie({},f,{value:void 0}),yt("invalid",n);break;case"textarea":Ds(n,f),g=Ls(n,f),yt("invalid",n);break;default:g=f}rr(u,g),M=g;for(v in M)if(M.hasOwnProperty(v)){var z=M[v];v==="style"?fi(n,z):v==="dangerouslySetInnerHTML"?(z=z?z.__html:void 0,z!=null&&La(n,z)):v==="children"?typeof z=="string"?(u!=="textarea"||z!=="")&&di(n,z):typeof z=="number"&&di(n,""+z):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(a.hasOwnProperty(v)?z!=null&&v==="onScroll"&&yt("scroll",n):z!=null&&Ee(n,v,z,S))}switch(u){case"input":ui(n),ci(n,f,!1);break;case"textarea":ui(n),hi(n);break;case"option":f.value!=null&&n.setAttribute("value",""+Qe(f.value));break;case"select":n.multiple=!!f.multiple,v=f.value,v!=null?An(n,!!f.multiple,v,!1):f.defaultValue!=null&&An(n,!!f.multiple,f.defaultValue,!0);break;default:typeof g.onClick=="function"&&(n.onclick=oe)}switch(u){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Tn(s),null;case 6:if(n&&s.stateNode!=null)Tg(n,s,n.memoizedProps,f);else{if(typeof f!="string"&&s.stateNode===null)throw Error(t(166));if(u=ua(nu.current),ua(Ri.current),mc(s)){if(f=s.stateNode,u=s.memoizedProps,f[Mr]=s,(v=f.nodeValue!==u)&&(n=cr,n!==null))switch(n.tag){case 3:X(f.nodeValue,u,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&X(f.nodeValue,u,(n.mode&1)!==0)}v&&(s.flags|=4)}else f=(u.nodeType===9?u:u.ownerDocument).createTextNode(f),f[Mr]=s,s.stateNode=f}return Tn(s),null;case 13:if(It(Nt),f=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(At&&hr!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Pm(),nl(),s.flags|=98560,v=!1;else if(v=mc(s),f!==null&&f.dehydrated!==null){if(n===null){if(!v)throw Error(t(318));if(v=s.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(t(317));v[Mr]=s}else nl(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Tn(s),v=!1}else ei!==null&&(tf(ei),ei=null),v=!0;if(!v)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=u,s):(f=f!==null,f!==(n!==null&&n.memoizedState!==null)&&f&&(s.child.flags|=8192,(s.mode&1)!==0&&(n===null||(Nt.current&1)!==0?Jt===0&&(Jt=3):sf())),s.updateQueue!==null&&(s.flags|=4),Tn(s),null);case 4:return ol(),Wd(n,s),n===null&&no(s.stateNode.containerInfo),Tn(s),null;case 10:return yd(s.type._context),Tn(s),null;case 17:return Qn(s.type)&&cc(),Tn(s),null;case 19:if(It(Nt),v=s.memoizedState,v===null)return Tn(s),null;if(f=(s.flags&128)!==0,S=v.rendering,S===null)if(f)au(v,!1);else{if(Jt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(S=xc(n),S!==null){for(s.flags|=128,au(v,!1),f=S.updateQueue,f!==null&&(s.updateQueue=f,s.flags|=4),s.subtreeFlags=0,f=u,u=s.child;u!==null;)v=u,n=f,v.flags&=14680066,S=v.alternate,S===null?(v.childLanes=0,v.lanes=n,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=S.childLanes,v.lanes=S.lanes,v.child=S.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=S.memoizedProps,v.memoizedState=S.memoizedState,v.updateQueue=S.updateQueue,v.type=S.type,n=S.dependencies,v.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),u=u.sibling;return xt(Nt,Nt.current&1|2),s.child}n=n.sibling}v.tail!==null&&vt()>cl&&(s.flags|=128,f=!0,au(v,!1),s.lanes=4194304)}else{if(!f)if(n=xc(S),n!==null){if(s.flags|=128,f=!0,u=n.updateQueue,u!==null&&(s.updateQueue=u,s.flags|=4),au(v,!0),v.tail===null&&v.tailMode==="hidden"&&!S.alternate&&!At)return Tn(s),null}else 2*vt()-v.renderingStartTime>cl&&u!==1073741824&&(s.flags|=128,f=!0,au(v,!1),s.lanes=4194304);v.isBackwards?(S.sibling=s.child,s.child=S):(u=v.last,u!==null?u.sibling=S:s.child=S,v.last=S)}return v.tail!==null?(s=v.tail,v.rendering=s,v.tail=s.sibling,v.renderingStartTime=vt(),s.sibling=null,u=Nt.current,xt(Nt,f?u&1|2:u&1),s):(Tn(s),null);case 22:case 23:return rf(),f=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==f&&(s.flags|=8192),f&&(s.mode&1)!==0?(dr&1073741824)!==0&&(Tn(s),s.subtreeFlags&6&&(s.flags|=8192)):Tn(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function tx(n,s){switch(dd(s),s.tag){case 1:return Qn(s.type)&&cc(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return ol(),It(Zn),It(xn),Sd(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 5:return Td(s),null;case 13:if(It(Nt),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(t(340));nl()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return It(Nt),null;case 4:return ol(),null;case 10:return yd(s.type._context),null;case 22:case 23:return rf(),null;case 24:return null;default:return null}}var bc=!1,In=!1,nx=typeof WeakSet=="function"?WeakSet:Set,Pe=null;function ll(n,s){var u=n.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(f){Mt(n,s,f)}else u.current=null}function qd(n,s,u){try{u()}catch(f){Mt(n,s,f)}}var Ig=!1;function rx(n,s){if(ye=Pr,n=Wl(),ql(n)){if("selectionStart"in n)var u={start:n.selectionStart,end:n.selectionEnd};else e:{u=(u=n.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var g=f.anchorOffset,v=f.focusNode;f=f.focusOffset;try{u.nodeType,v.nodeType}catch{u=null;break e}var S=0,M=-1,z=-1,ee=0,ue=0,he=n,le=null;t:for(;;){for(var xe;he!==u||g!==0&&he.nodeType!==3||(M=S+g),he!==v||f!==0&&he.nodeType!==3||(z=S+f),he.nodeType===3&&(S+=he.nodeValue.length),(xe=he.firstChild)!==null;)le=he,he=xe;for(;;){if(he===n)break t;if(le===u&&++ee===g&&(M=S),le===v&&++ue===f&&(z=S),(xe=he.nextSibling)!==null)break;he=le,le=he.parentNode}he=xe}u=M===-1||z===-1?null:{start:M,end:z}}else u=null}u=u||{start:0,end:0}}else u=null;for(je={focusedElem:n,selectionRange:u},Pr=!1,Pe=s;Pe!==null;)if(s=Pe,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,Pe=n;else for(;Pe!==null;){s=Pe;try{var be=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(be!==null){var Re=be.memoizedProps,Vt=be.memoizedState,K=s.stateNode,H=K.getSnapshotBeforeUpdate(s.elementType===s.type?Re:ti(s.type,Re),Vt);K.__reactInternalSnapshotBeforeUpdate=H}break;case 3:var Z=s.stateNode.containerInfo;Z.nodeType===1?Z.textContent="":Z.nodeType===9&&Z.documentElement&&Z.removeChild(Z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(fe){Mt(s,s.return,fe)}if(n=s.sibling,n!==null){n.return=s.return,Pe=n;break}Pe=s.return}return be=Ig,Ig=!1,be}function lu(n,s,u){var f=s.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var g=f=f.next;do{if((g.tag&n)===n){var v=g.destroy;g.destroy=void 0,v!==void 0&&qd(s,u,v)}g=g.next}while(g!==f)}}function Nc(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var u=s=s.next;do{if((u.tag&n)===n){var f=u.create;u.destroy=f()}u=u.next}while(u!==s)}}function $d(n){var s=n.ref;if(s!==null){var u=n.stateNode;switch(n.tag){case 5:n=u;break;default:n=u}typeof s=="function"?s(n):s.current=n}}function Sg(n){var s=n.alternate;s!==null&&(n.alternate=null,Sg(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[Mr],delete s[io],delete s[so],delete s[ad],delete s[ld])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Pg(n){return n.tag===5||n.tag===3||n.tag===4}function Cg(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Pg(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Gd(n,s,u){var f=n.tag;if(f===5||f===6)n=n.stateNode,s?u.nodeType===8?u.parentNode.insertBefore(n,s):u.insertBefore(n,s):(u.nodeType===8?(s=u.parentNode,s.insertBefore(n,u)):(s=u,s.appendChild(n)),u=u._reactRootContainer,u!=null||s.onclick!==null||(s.onclick=oe));else if(f!==4&&(n=n.child,n!==null))for(Gd(n,s,u),n=n.sibling;n!==null;)Gd(n,s,u),n=n.sibling}function Kd(n,s,u){var f=n.tag;if(f===5||f===6)n=n.stateNode,s?u.insertBefore(n,s):u.appendChild(n);else if(f!==4&&(n=n.child,n!==null))for(Kd(n,s,u),n=n.sibling;n!==null;)Kd(n,s,u),n=n.sibling}var cn=null,ni=!1;function ho(n,s,u){for(u=u.child;u!==null;)kg(n,s,u),u=u.sibling}function kg(n,s,u){if(mn&&typeof mn.onCommitFiberUnmount=="function")try{mn.onCommitFiberUnmount(vi,u)}catch{}switch(u.tag){case 5:In||ll(u,s);case 6:var f=cn,g=ni;cn=null,ho(n,s,u),cn=f,ni=g,cn!==null&&(ni?(n=cn,u=u.stateNode,n.nodeType===8?n.parentNode.removeChild(u):n.removeChild(u)):cn.removeChild(u.stateNode));break;case 18:cn!==null&&(ni?(n=cn,u=u.stateNode,n.nodeType===8?Jl(n.parentNode,u):n.nodeType===1&&Jl(n,u),_n(n)):Jl(cn,u.stateNode));break;case 4:f=cn,g=ni,cn=u.stateNode.containerInfo,ni=!0,ho(n,s,u),cn=f,ni=g;break;case 0:case 11:case 14:case 15:if(!In&&(f=u.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){g=f=f.next;do{var v=g,S=v.destroy;v=v.tag,S!==void 0&&((v&2)!==0||(v&4)!==0)&&qd(u,s,S),g=g.next}while(g!==f)}ho(n,s,u);break;case 1:if(!In&&(ll(u,s),f=u.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=u.memoizedProps,f.state=u.memoizedState,f.componentWillUnmount()}catch(M){Mt(u,s,M)}ho(n,s,u);break;case 21:ho(n,s,u);break;case 22:u.mode&1?(In=(f=In)||u.memoizedState!==null,ho(n,s,u),In=f):ho(n,s,u);break;default:ho(n,s,u)}}function Ag(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var u=n.stateNode;u===null&&(u=n.stateNode=new nx),s.forEach(function(f){var g=dx.bind(null,n,f);u.has(f)||(u.add(f),f.then(g,g))})}}function ri(n,s){var u=s.deletions;if(u!==null)for(var f=0;f<u.length;f++){var g=u[f];try{var v=n,S=s,M=S;e:for(;M!==null;){switch(M.tag){case 5:cn=M.stateNode,ni=!1;break e;case 3:cn=M.stateNode.containerInfo,ni=!0;break e;case 4:cn=M.stateNode.containerInfo,ni=!0;break e}M=M.return}if(cn===null)throw Error(t(160));kg(v,S,g),cn=null,ni=!1;var z=g.alternate;z!==null&&(z.return=null),g.return=null}catch(ee){Mt(g,s,ee)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)bg(s,n),s=s.sibling}function bg(n,s){var u=n.alternate,f=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(ri(s,n),Di(n),f&4){try{lu(3,n,n.return),Nc(3,n)}catch(Re){Mt(n,n.return,Re)}try{lu(5,n,n.return)}catch(Re){Mt(n,n.return,Re)}}break;case 1:ri(s,n),Di(n),f&512&&u!==null&&ll(u,u.return);break;case 5:if(ri(s,n),Di(n),f&512&&u!==null&&ll(u,u.return),n.flags&32){var g=n.stateNode;try{di(g,"")}catch(Re){Mt(n,n.return,Re)}}if(f&4&&(g=n.stateNode,g!=null)){var v=n.memoizedProps,S=u!==null?u.memoizedProps:v,M=n.type,z=n.updateQueue;if(n.updateQueue=null,z!==null)try{M==="input"&&v.type==="radio"&&v.name!=null&&Bi(g,v),gr(M,S);var ee=gr(M,v);for(S=0;S<z.length;S+=2){var ue=z[S],he=z[S+1];ue==="style"?fi(g,he):ue==="dangerouslySetInnerHTML"?La(g,he):ue==="children"?di(g,he):Ee(g,ue,he,ee)}switch(M){case"input":qr(g,v);break;case"textarea":Ra(g,v);break;case"select":var le=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!v.multiple;var xe=v.value;xe!=null?An(g,!!v.multiple,xe,!1):le!==!!v.multiple&&(v.defaultValue!=null?An(g,!!v.multiple,v.defaultValue,!0):An(g,!!v.multiple,v.multiple?[]:"",!1))}g[io]=v}catch(Re){Mt(n,n.return,Re)}}break;case 6:if(ri(s,n),Di(n),f&4){if(n.stateNode===null)throw Error(t(162));g=n.stateNode,v=n.memoizedProps;try{g.nodeValue=v}catch(Re){Mt(n,n.return,Re)}}break;case 3:if(ri(s,n),Di(n),f&4&&u!==null&&u.memoizedState.isDehydrated)try{_n(s.containerInfo)}catch(Re){Mt(n,n.return,Re)}break;case 4:ri(s,n),Di(n);break;case 13:ri(s,n),Di(n),g=n.child,g.flags&8192&&(v=g.memoizedState!==null,g.stateNode.isHidden=v,!v||g.alternate!==null&&g.alternate.memoizedState!==null||(Yd=vt())),f&4&&Ag(n);break;case 22:if(ue=u!==null&&u.memoizedState!==null,n.mode&1?(In=(ee=In)||ue,ri(s,n),In=ee):ri(s,n),Di(n),f&8192){if(ee=n.memoizedState!==null,(n.stateNode.isHidden=ee)&&!ue&&(n.mode&1)!==0)for(Pe=n,ue=n.child;ue!==null;){for(he=Pe=ue;Pe!==null;){switch(le=Pe,xe=le.child,le.tag){case 0:case 11:case 14:case 15:lu(4,le,le.return);break;case 1:ll(le,le.return);var be=le.stateNode;if(typeof be.componentWillUnmount=="function"){f=le,u=le.return;try{s=f,be.props=s.memoizedProps,be.state=s.memoizedState,be.componentWillUnmount()}catch(Re){Mt(f,u,Re)}}break;case 5:ll(le,le.return);break;case 22:if(le.memoizedState!==null){Lg(he);continue}}xe!==null?(xe.return=le,Pe=xe):Lg(he)}ue=ue.sibling}e:for(ue=null,he=n;;){if(he.tag===5){if(ue===null){ue=he;try{g=he.stateNode,ee?(v=g.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(M=he.stateNode,z=he.memoizedProps.style,S=z!=null&&z.hasOwnProperty("display")?z.display:null,M.style.display=Kr("display",S))}catch(Re){Mt(n,n.return,Re)}}}else if(he.tag===6){if(ue===null)try{he.stateNode.nodeValue=ee?"":he.memoizedProps}catch(Re){Mt(n,n.return,Re)}}else if((he.tag!==22&&he.tag!==23||he.memoizedState===null||he===n)&&he.child!==null){he.child.return=he,he=he.child;continue}if(he===n)break e;for(;he.sibling===null;){if(he.return===null||he.return===n)break e;ue===he&&(ue=null),he=he.return}ue===he&&(ue=null),he.sibling.return=he.return,he=he.sibling}}break;case 19:ri(s,n),Di(n),f&4&&Ag(n);break;case 21:break;default:ri(s,n),Di(n)}}function Di(n){var s=n.flags;if(s&2){try{e:{for(var u=n.return;u!==null;){if(Pg(u)){var f=u;break e}u=u.return}throw Error(t(160))}switch(f.tag){case 5:var g=f.stateNode;f.flags&32&&(di(g,""),f.flags&=-33);var v=Cg(n);Kd(n,v,g);break;case 3:case 4:var S=f.stateNode.containerInfo,M=Cg(n);Gd(n,M,S);break;default:throw Error(t(161))}}catch(z){Mt(n,n.return,z)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function ix(n,s,u){Pe=n,Ng(n)}function Ng(n,s,u){for(var f=(n.mode&1)!==0;Pe!==null;){var g=Pe,v=g.child;if(g.tag===22&&f){var S=g.memoizedState!==null||bc;if(!S){var M=g.alternate,z=M!==null&&M.memoizedState!==null||In;M=bc;var ee=In;if(bc=S,(In=z)&&!ee)for(Pe=g;Pe!==null;)S=Pe,z=S.child,S.tag===22&&S.memoizedState!==null?Dg(g):z!==null?(z.return=S,Pe=z):Dg(g);for(;v!==null;)Pe=v,Ng(v),v=v.sibling;Pe=g,bc=M,In=ee}Rg(n)}else(g.subtreeFlags&8772)!==0&&v!==null?(v.return=g,Pe=v):Rg(n)}}function Rg(n){for(;Pe!==null;){var s=Pe;if((s.flags&8772)!==0){var u=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:In||Nc(5,s);break;case 1:var f=s.stateNode;if(s.flags&4&&!In)if(u===null)f.componentDidMount();else{var g=s.elementType===s.type?u.memoizedProps:ti(s.type,u.memoizedProps);f.componentDidUpdate(g,u.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var v=s.updateQueue;v!==null&&Lm(s,v,f);break;case 3:var S=s.updateQueue;if(S!==null){if(u=null,s.child!==null)switch(s.child.tag){case 5:u=s.child.stateNode;break;case 1:u=s.child.stateNode}Lm(s,S,u)}break;case 5:var M=s.stateNode;if(u===null&&s.flags&4){u=M;var z=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":z.autoFocus&&u.focus();break;case"img":z.src&&(u.src=z.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var ee=s.alternate;if(ee!==null){var ue=ee.memoizedState;if(ue!==null){var he=ue.dehydrated;he!==null&&_n(he)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}In||s.flags&512&&$d(s)}catch(le){Mt(s,s.return,le)}}if(s===n){Pe=null;break}if(u=s.sibling,u!==null){u.return=s.return,Pe=u;break}Pe=s.return}}function Lg(n){for(;Pe!==null;){var s=Pe;if(s===n){Pe=null;break}var u=s.sibling;if(u!==null){u.return=s.return,Pe=u;break}Pe=s.return}}function Dg(n){for(;Pe!==null;){var s=Pe;try{switch(s.tag){case 0:case 11:case 15:var u=s.return;try{Nc(4,s)}catch(z){Mt(s,u,z)}break;case 1:var f=s.stateNode;if(typeof f.componentDidMount=="function"){var g=s.return;try{f.componentDidMount()}catch(z){Mt(s,g,z)}}var v=s.return;try{$d(s)}catch(z){Mt(s,v,z)}break;case 5:var S=s.return;try{$d(s)}catch(z){Mt(s,S,z)}}}catch(z){Mt(s,s.return,z)}if(s===n){Pe=null;break}var M=s.sibling;if(M!==null){M.return=s.return,Pe=M;break}Pe=s.return}}var sx=Math.ceil,Rc=Ce.ReactCurrentDispatcher,Zd=Ce.ReactCurrentOwner,zr=Ce.ReactCurrentBatchConfig,ct=0,rn=null,Ht=null,hn=0,dr=0,ul=oo(0),Jt=0,uu=null,ha=0,Lc=0,Qd=0,cu=null,Jn=null,Yd=0,cl=1/0,ws=null,Dc=!1,Jd=null,fo=null,Mc=!1,po=null,Oc=0,hu=0,Xd=null,Vc=-1,jc=0;function zn(){return(ct&6)!==0?vt():Vc!==-1?Vc:Vc=vt()}function mo(n){return(n.mode&1)===0?1:(ct&2)!==0&&hn!==0?hn&-hn:Bw.transition!==null?(jc===0&&(jc=Go()),jc):(n=Je,n!==0||(n=window.event,n=n===void 0?16:Xe(n.type)),n)}function ii(n,s,u,f){if(50<hu)throw hu=0,Xd=null,Error(t(185));Nn(n,u,f),((ct&2)===0||n!==rn)&&(n===rn&&((ct&2)===0&&(Lc|=u),Jt===4&&go(n,hn)),Xn(n,f),u===1&&ct===0&&(s.mode&1)===0&&(cl=vt()+500,dc&&lo()))}function Xn(n,s){var u=n.callbackNode;Tr(n,s);var f=ft(n,n===rn?hn:0);if(f===0)u!==null&&Zi(u),n.callbackNode=null,n.callbackPriority=0;else if(s=f&-f,n.callbackPriority!==s){if(u!=null&&Zi(u),s===1)n.tag===0?Uw(Og.bind(null,n)):xm(Og.bind(null,n)),wn(function(){(ct&6)===0&&lo()}),u=null;else{switch(gn(f)){case 1:u=js;break;case 4:u=$o;break;case 16:u=Yi;break;case 536870912:u=xr;break;default:u=Yi}u=Wg(u,Mg.bind(null,n))}n.callbackPriority=s,n.callbackNode=u}}function Mg(n,s){if(Vc=-1,jc=0,(ct&6)!==0)throw Error(t(327));var u=n.callbackNode;if(hl()&&n.callbackNode!==u)return null;var f=ft(n,n===rn?hn:0);if(f===0)return null;if((f&30)!==0||(f&n.expiredLanes)!==0||s)s=Fc(n,f);else{s=f;var g=ct;ct|=2;var v=jg();(rn!==n||hn!==s)&&(ws=null,cl=vt()+500,fa(n,s));do try{lx();break}catch(M){Vg(n,M)}while(!0);_d(),Rc.current=v,ct=g,Ht!==null?s=0:(rn=null,hn=0,s=Jt)}if(s!==0){if(s===2&&(g=en(n),g!==0&&(f=g,s=ef(n,g))),s===1)throw u=uu,fa(n,0),go(n,f),Xn(n,vt()),u;if(s===6)go(n,f);else{if(g=n.current.alternate,(f&30)===0&&!ox(g)&&(s=Fc(n,f),s===2&&(v=en(n),v!==0&&(f=v,s=ef(n,v))),s===1))throw u=uu,fa(n,0),go(n,f),Xn(n,vt()),u;switch(n.finishedWork=g,n.finishedLanes=f,s){case 0:case 1:throw Error(t(345));case 2:pa(n,Jn,ws);break;case 3:if(go(n,f),(f&130023424)===f&&(s=Yd+500-vt(),10<s)){if(ft(n,0)!==0)break;if(g=n.suspendedLanes,(g&f)!==f){zn(),n.pingedLanes|=n.suspendedLanes&g;break}n.timeoutHandle=Qt(pa.bind(null,n,Jn,ws),s);break}pa(n,Jn,ws);break;case 4:if(go(n,f),(f&4194240)===f)break;for(s=n.eventTimes,g=-1;0<f;){var S=31-Ge(f);v=1<<S,S=s[S],S>g&&(g=S),f&=~v}if(f=g,f=vt()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*sx(f/1960))-f,10<f){n.timeoutHandle=Qt(pa.bind(null,n,Jn,ws),f);break}pa(n,Jn,ws);break;case 5:pa(n,Jn,ws);break;default:throw Error(t(329))}}}return Xn(n,vt()),n.callbackNode===u?Mg.bind(null,n):null}function ef(n,s){var u=cu;return n.current.memoizedState.isDehydrated&&(fa(n,s).flags|=256),n=Fc(n,s),n!==2&&(s=Jn,Jn=u,s!==null&&tf(s)),n}function tf(n){Jn===null?Jn=n:Jn.push.apply(Jn,n)}function ox(n){for(var s=n;;){if(s.flags&16384){var u=s.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var f=0;f<u.length;f++){var g=u[f],v=g.getSnapshot;g=g.value;try{if(!lr(v(),g))return!1}catch{return!1}}}if(u=s.child,s.subtreeFlags&16384&&u!==null)u.return=s,s=u;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function go(n,s){for(s&=~Qd,s&=~Lc,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var u=31-Ge(s),f=1<<u;n[u]=-1,s&=~f}}function Og(n){if((ct&6)!==0)throw Error(t(327));hl();var s=ft(n,0);if((s&1)===0)return Xn(n,vt()),null;var u=Fc(n,s);if(n.tag!==0&&u===2){var f=en(n);f!==0&&(s=f,u=ef(n,f))}if(u===1)throw u=uu,fa(n,0),go(n,s),Xn(n,vt()),u;if(u===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,pa(n,Jn,ws),Xn(n,vt()),null}function nf(n,s){var u=ct;ct|=1;try{return n(s)}finally{ct=u,ct===0&&(cl=vt()+500,dc&&lo())}}function da(n){po!==null&&po.tag===0&&(ct&6)===0&&hl();var s=ct;ct|=1;var u=zr.transition,f=Je;try{if(zr.transition=null,Je=1,n)return n()}finally{Je=f,zr.transition=u,ct=s,(ct&6)===0&&lo()}}function rf(){dr=ul.current,It(ul)}function fa(n,s){n.finishedWork=null,n.finishedLanes=0;var u=n.timeoutHandle;if(u!==-1&&(n.timeoutHandle=-1,Bt(u)),Ht!==null)for(u=Ht.return;u!==null;){var f=u;switch(dd(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&cc();break;case 3:ol(),It(Zn),It(xn),Sd();break;case 5:Td(f);break;case 4:ol();break;case 13:It(Nt);break;case 19:It(Nt);break;case 10:yd(f.type._context);break;case 22:case 23:rf()}u=u.return}if(rn=n,Ht=n=_o(n.current,null),hn=dr=s,Jt=0,uu=null,Qd=Lc=ha=0,Jn=cu=null,la!==null){for(s=0;s<la.length;s++)if(u=la[s],f=u.interleaved,f!==null){u.interleaved=null;var g=f.next,v=u.pending;if(v!==null){var S=v.next;v.next=g,f.next=S}u.pending=f}la=null}return n}function Vg(n,s){do{var u=Ht;try{if(_d(),Ec.current=Pc,Tc){for(var f=Rt.memoizedState;f!==null;){var g=f.queue;g!==null&&(g.pending=null),f=f.next}Tc=!1}if(ca=0,nn=Yt=Rt=null,ru=!1,iu=0,Zd.current=null,u===null||u.return===null){Jt=1,uu=s,Ht=null;break}e:{var v=n,S=u.return,M=u,z=s;if(s=hn,M.flags|=32768,z!==null&&typeof z=="object"&&typeof z.then=="function"){var ee=z,ue=M,he=ue.tag;if((ue.mode&1)===0&&(he===0||he===11||he===15)){var le=ue.alternate;le?(ue.updateQueue=le.updateQueue,ue.memoizedState=le.memoizedState,ue.lanes=le.lanes):(ue.updateQueue=null,ue.memoizedState=null)}var xe=lg(S);if(xe!==null){xe.flags&=-257,ug(xe,S,M,v,s),xe.mode&1&&ag(v,ee,s),s=xe,z=ee;var be=s.updateQueue;if(be===null){var Re=new Set;Re.add(z),s.updateQueue=Re}else be.add(z);break e}else{if((s&1)===0){ag(v,ee,s),sf();break e}z=Error(t(426))}}else if(At&&M.mode&1){var Vt=lg(S);if(Vt!==null){(Vt.flags&65536)===0&&(Vt.flags|=256),ug(Vt,S,M,v,s),md(al(z,M));break e}}v=z=al(z,M),Jt!==4&&(Jt=2),cu===null?cu=[v]:cu.push(v),v=S;do{switch(v.tag){case 3:v.flags|=65536,s&=-s,v.lanes|=s;var K=sg(v,z,s);Rm(v,K);break e;case 1:M=z;var H=v.type,Z=v.stateNode;if((v.flags&128)===0&&(typeof H.getDerivedStateFromError=="function"||Z!==null&&typeof Z.componentDidCatch=="function"&&(fo===null||!fo.has(Z)))){v.flags|=65536,s&=-s,v.lanes|=s;var fe=og(v,M,s);Rm(v,fe);break e}}v=v.return}while(v!==null)}zg(u)}catch(De){s=De,Ht===u&&u!==null&&(Ht=u=u.return);continue}break}while(!0)}function jg(){var n=Rc.current;return Rc.current=Pc,n===null?Pc:n}function sf(){(Jt===0||Jt===3||Jt===2)&&(Jt=4),rn===null||(ha&268435455)===0&&(Lc&268435455)===0||go(rn,hn)}function Fc(n,s){var u=ct;ct|=2;var f=jg();(rn!==n||hn!==s)&&(ws=null,fa(n,s));do try{ax();break}catch(g){Vg(n,g)}while(!0);if(_d(),ct=u,Rc.current=f,Ht!==null)throw Error(t(261));return rn=null,hn=0,Jt}function ax(){for(;Ht!==null;)Fg(Ht)}function lx(){for(;Ht!==null&&!Qi();)Fg(Ht)}function Fg(n){var s=Hg(n.alternate,n,dr);n.memoizedProps=n.pendingProps,s===null?zg(n):Ht=s,Zd.current=null}function zg(n){var s=n;do{var u=s.alternate;if(n=s.return,(s.flags&32768)===0){if(u=ex(u,s,dr),u!==null){Ht=u;return}}else{if(u=tx(u,s),u!==null){u.flags&=32767,Ht=u;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Jt=6,Ht=null;return}}if(s=s.sibling,s!==null){Ht=s;return}Ht=s=n}while(s!==null);Jt===0&&(Jt=5)}function pa(n,s,u){var f=Je,g=zr.transition;try{zr.transition=null,Je=1,ux(n,s,u,f)}finally{zr.transition=g,Je=f}return null}function ux(n,s,u,f){do hl();while(po!==null);if((ct&6)!==0)throw Error(t(327));u=n.finishedWork;var g=n.finishedLanes;if(u===null)return null;if(n.finishedWork=null,n.finishedLanes=0,u===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var v=u.lanes|u.childLanes;if(Ct(n,v),n===rn&&(Ht=rn=null,hn=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||Mc||(Mc=!0,Wg(Yi,function(){return hl(),null})),v=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||v){v=zr.transition,zr.transition=null;var S=Je;Je=1;var M=ct;ct|=4,Zd.current=null,rx(n,u),bg(u,n),Lr(je),Pr=!!ye,je=ye=null,n.current=u,ix(u),Wn(),ct=M,Je=S,zr.transition=v}else n.current=u;if(Mc&&(Mc=!1,po=n,Oc=g),v=n.pendingLanes,v===0&&(fo=null),wi(u.stateNode),Xn(n,vt()),s!==null)for(f=n.onRecoverableError,u=0;u<s.length;u++)g=s[u],f(g.value,{componentStack:g.stack,digest:g.digest});if(Dc)throw Dc=!1,n=Jd,Jd=null,n;return(Oc&1)!==0&&n.tag!==0&&hl(),v=n.pendingLanes,(v&1)!==0?n===Xd?hu++:(hu=0,Xd=n):hu=0,lo(),null}function hl(){if(po!==null){var n=gn(Oc),s=zr.transition,u=Je;try{if(zr.transition=null,Je=16>n?16:n,po===null)var f=!1;else{if(n=po,po=null,Oc=0,(ct&6)!==0)throw Error(t(331));var g=ct;for(ct|=4,Pe=n.current;Pe!==null;){var v=Pe,S=v.child;if((Pe.flags&16)!==0){var M=v.deletions;if(M!==null){for(var z=0;z<M.length;z++){var ee=M[z];for(Pe=ee;Pe!==null;){var ue=Pe;switch(ue.tag){case 0:case 11:case 15:lu(8,ue,v)}var he=ue.child;if(he!==null)he.return=ue,Pe=he;else for(;Pe!==null;){ue=Pe;var le=ue.sibling,xe=ue.return;if(Sg(ue),ue===ee){Pe=null;break}if(le!==null){le.return=xe,Pe=le;break}Pe=xe}}}var be=v.alternate;if(be!==null){var Re=be.child;if(Re!==null){be.child=null;do{var Vt=Re.sibling;Re.sibling=null,Re=Vt}while(Re!==null)}}Pe=v}}if((v.subtreeFlags&2064)!==0&&S!==null)S.return=v,Pe=S;else e:for(;Pe!==null;){if(v=Pe,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:lu(9,v,v.return)}var K=v.sibling;if(K!==null){K.return=v.return,Pe=K;break e}Pe=v.return}}var H=n.current;for(Pe=H;Pe!==null;){S=Pe;var Z=S.child;if((S.subtreeFlags&2064)!==0&&Z!==null)Z.return=S,Pe=Z;else e:for(S=H;Pe!==null;){if(M=Pe,(M.flags&2048)!==0)try{switch(M.tag){case 0:case 11:case 15:Nc(9,M)}}catch(De){Mt(M,M.return,De)}if(M===S){Pe=null;break e}var fe=M.sibling;if(fe!==null){fe.return=M.return,Pe=fe;break e}Pe=M.return}}if(ct=g,lo(),mn&&typeof mn.onPostCommitFiberRoot=="function")try{mn.onPostCommitFiberRoot(vi,n)}catch{}f=!0}return f}finally{Je=u,zr.transition=s}}return!1}function Ug(n,s,u){s=al(u,s),s=sg(n,s,1),n=co(n,s,1),s=zn(),n!==null&&(Nn(n,1,s),Xn(n,s))}function Mt(n,s,u){if(n.tag===3)Ug(n,n,u);else for(;s!==null;){if(s.tag===3){Ug(s,n,u);break}else if(s.tag===1){var f=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(fo===null||!fo.has(f))){n=al(u,n),n=og(s,n,1),s=co(s,n,1),n=zn(),s!==null&&(Nn(s,1,n),Xn(s,n));break}}s=s.return}}function cx(n,s,u){var f=n.pingCache;f!==null&&f.delete(s),s=zn(),n.pingedLanes|=n.suspendedLanes&u,rn===n&&(hn&u)===u&&(Jt===4||Jt===3&&(hn&130023424)===hn&&500>vt()-Yd?fa(n,0):Qd|=u),Xn(n,s)}function Bg(n,s){s===0&&((n.mode&1)===0?s=1:(s=Er,Er<<=1,(Er&130023424)===0&&(Er=4194304)));var u=zn();n=_s(n,s),n!==null&&(Nn(n,s,u),Xn(n,u))}function hx(n){var s=n.memoizedState,u=0;s!==null&&(u=s.retryLane),Bg(n,u)}function dx(n,s){var u=0;switch(n.tag){case 13:var f=n.stateNode,g=n.memoizedState;g!==null&&(u=g.retryLane);break;case 19:f=n.stateNode;break;default:throw Error(t(314))}f!==null&&f.delete(s),Bg(n,u)}var Hg;Hg=function(n,s,u){if(n!==null)if(n.memoizedProps!==s.pendingProps||Zn.current)Yn=!0;else{if((n.lanes&u)===0&&(s.flags&128)===0)return Yn=!1,Xw(n,s,u);Yn=(n.flags&131072)!==0}else Yn=!1,At&&(s.flags&1048576)!==0&&Em(s,pc,s.index);switch(s.lanes=0,s.tag){case 2:var f=s.type;Ac(n,s),n=s.pendingProps;var g=Xa(s,xn.current);sl(s,u),g=kd(null,s,f,n,g,u);var v=Ad();return s.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Qn(f)?(v=!0,hc(s)):v=!1,s.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,xd(s),g.updater=Cc,s.stateNode=g,g._reactInternals=s,Md(s,f,n,u),s=Fd(null,s,f,!0,v,u)):(s.tag=0,At&&v&&hd(s),Fn(null,s,g,u),s=s.child),s;case 16:f=s.elementType;e:{switch(Ac(n,s),n=s.pendingProps,g=f._init,f=g(f._payload),s.type=f,g=s.tag=px(f),n=ti(f,n),g){case 0:s=jd(null,s,f,n,u);break e;case 1:s=mg(null,s,f,n,u);break e;case 11:s=cg(null,s,f,n,u);break e;case 14:s=hg(null,s,f,ti(f.type,n),u);break e}throw Error(t(306,f,""))}return s;case 0:return f=s.type,g=s.pendingProps,g=s.elementType===f?g:ti(f,g),jd(n,s,f,g,u);case 1:return f=s.type,g=s.pendingProps,g=s.elementType===f?g:ti(f,g),mg(n,s,f,g,u);case 3:e:{if(gg(s),n===null)throw Error(t(387));f=s.pendingProps,v=s.memoizedState,g=v.element,Nm(n,s),wc(s,f,null,u);var S=s.memoizedState;if(f=S.element,v.isDehydrated)if(v={element:f,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},s.updateQueue.baseState=v,s.memoizedState=v,s.flags&256){g=al(Error(t(423)),s),s=_g(n,s,f,u,g);break e}else if(f!==g){g=al(Error(t(424)),s),s=_g(n,s,f,u,g);break e}else for(hr=Ni(s.stateNode.containerInfo.firstChild),cr=s,At=!0,ei=null,u=Am(s,null,f,u),s.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(nl(),f===g){s=vs(n,s,u);break e}Fn(n,s,f,u)}s=s.child}return s;case 5:return Dm(s),n===null&&pd(s),f=s.type,g=s.pendingProps,v=n!==null?n.memoizedProps:null,S=g.children,Ye(f,g)?S=null:v!==null&&Ye(f,v)&&(s.flags|=32),pg(n,s),Fn(n,s,S,u),s.child;case 6:return n===null&&pd(s),null;case 13:return yg(n,s,u);case 4:return Ed(s,s.stateNode.containerInfo),f=s.pendingProps,n===null?s.child=rl(s,null,f,u):Fn(n,s,f,u),s.child;case 11:return f=s.type,g=s.pendingProps,g=s.elementType===f?g:ti(f,g),cg(n,s,f,g,u);case 7:return Fn(n,s,s.pendingProps,u),s.child;case 8:return Fn(n,s,s.pendingProps.children,u),s.child;case 12:return Fn(n,s,s.pendingProps.children,u),s.child;case 10:e:{if(f=s.type._context,g=s.pendingProps,v=s.memoizedProps,S=g.value,xt(_c,f._currentValue),f._currentValue=S,v!==null)if(lr(v.value,S)){if(v.children===g.children&&!Zn.current){s=vs(n,s,u);break e}}else for(v=s.child,v!==null&&(v.return=s);v!==null;){var M=v.dependencies;if(M!==null){S=v.child;for(var z=M.firstContext;z!==null;){if(z.context===f){if(v.tag===1){z=ys(-1,u&-u),z.tag=2;var ee=v.updateQueue;if(ee!==null){ee=ee.shared;var ue=ee.pending;ue===null?z.next=z:(z.next=ue.next,ue.next=z),ee.pending=z}}v.lanes|=u,z=v.alternate,z!==null&&(z.lanes|=u),vd(v.return,u,s),M.lanes|=u;break}z=z.next}}else if(v.tag===10)S=v.type===s.type?null:v.child;else if(v.tag===18){if(S=v.return,S===null)throw Error(t(341));S.lanes|=u,M=S.alternate,M!==null&&(M.lanes|=u),vd(S,u,s),S=v.sibling}else S=v.child;if(S!==null)S.return=v;else for(S=v;S!==null;){if(S===s){S=null;break}if(v=S.sibling,v!==null){v.return=S.return,S=v;break}S=S.return}v=S}Fn(n,s,g.children,u),s=s.child}return s;case 9:return g=s.type,f=s.pendingProps.children,sl(s,u),g=jr(g),f=f(g),s.flags|=1,Fn(n,s,f,u),s.child;case 14:return f=s.type,g=ti(f,s.pendingProps),g=ti(f.type,g),hg(n,s,f,g,u);case 15:return dg(n,s,s.type,s.pendingProps,u);case 17:return f=s.type,g=s.pendingProps,g=s.elementType===f?g:ti(f,g),Ac(n,s),s.tag=1,Qn(f)?(n=!0,hc(s)):n=!1,sl(s,u),rg(s,f,g),Md(s,f,g,u),Fd(null,s,f,!0,n,u);case 19:return wg(n,s,u);case 22:return fg(n,s,u)}throw Error(t(156,s.tag))};function Wg(n,s){return qo(n,s)}function fx(n,s,u,f){this.tag=n,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ur(n,s,u,f){return new fx(n,s,u,f)}function of(n){return n=n.prototype,!(!n||!n.isReactComponent)}function px(n){if(typeof n=="function")return of(n)?1:0;if(n!=null){if(n=n.$$typeof,n===V)return 11;if(n===Oe)return 14}return 2}function _o(n,s){var u=n.alternate;return u===null?(u=Ur(n.tag,s,n.key,n.mode),u.elementType=n.elementType,u.type=n.type,u.stateNode=n.stateNode,u.alternate=n,n.alternate=u):(u.pendingProps=s,u.type=n.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=n.flags&14680064,u.childLanes=n.childLanes,u.lanes=n.lanes,u.child=n.child,u.memoizedProps=n.memoizedProps,u.memoizedState=n.memoizedState,u.updateQueue=n.updateQueue,s=n.dependencies,u.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},u.sibling=n.sibling,u.index=n.index,u.ref=n.ref,u}function zc(n,s,u,f,g,v){var S=2;if(f=n,typeof n=="function")of(n)&&(S=1);else if(typeof n=="string")S=5;else e:switch(n){case F:return ma(u.children,g,v,s);case R:S=8,g|=8;break;case O:return n=Ur(12,u,s,g|2),n.elementType=O,n.lanes=v,n;case N:return n=Ur(13,u,s,g),n.elementType=N,n.lanes=v,n;case ae:return n=Ur(19,u,s,g),n.elementType=ae,n.lanes=v,n;case Fe:return Uc(u,g,v,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case U:S=10;break e;case D:S=9;break e;case V:S=11;break e;case Oe:S=14;break e;case ge:S=16,f=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return s=Ur(S,u,s,g),s.elementType=n,s.type=f,s.lanes=v,s}function ma(n,s,u,f){return n=Ur(7,n,f,s),n.lanes=u,n}function Uc(n,s,u,f){return n=Ur(22,n,f,s),n.elementType=Fe,n.lanes=u,n.stateNode={isHidden:!1},n}function af(n,s,u){return n=Ur(6,n,null,s),n.lanes=u,n}function lf(n,s,u){return s=Ur(4,n.children!==null?n.children:[],n.key,s),s.lanes=u,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function mx(n,s,u,f,g){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xi(0),this.expirationTimes=xi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xi(0),this.identifierPrefix=f,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function uf(n,s,u,f,g,v,S,M,z){return n=new mx(n,s,u,M,z),s===1?(s=1,v===!0&&(s|=8)):s=0,v=Ur(3,null,null,s),n.current=v,v.stateNode=n,v.memoizedState={element:f,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},xd(v),n}function gx(n,s,u){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Le,key:f==null?null:""+f,children:n,containerInfo:s,implementation:u}}function qg(n){if(!n)return ao;n=n._reactInternals;e:{if(Hn(n)!==n||n.tag!==1)throw Error(t(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Qn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(n.tag===1){var u=n.type;if(Qn(u))return vm(n,u,s)}return s}function $g(n,s,u,f,g,v,S,M,z){return n=uf(u,f,!0,n,g,v,S,M,z),n.context=qg(null),u=n.current,f=zn(),g=mo(u),v=ys(f,g),v.callback=s??null,co(u,v,g),n.current.lanes=g,Nn(n,g,f),Xn(n,f),n}function Bc(n,s,u,f){var g=s.current,v=zn(),S=mo(g);return u=qg(u),s.context===null?s.context=u:s.pendingContext=u,s=ys(v,S),s.payload={element:n},f=f===void 0?null:f,f!==null&&(s.callback=f),n=co(g,s,S),n!==null&&(ii(n,g,S,v),vc(n,g,S)),S}function Hc(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Gg(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var u=n.retryLane;n.retryLane=u!==0&&u<s?u:s}}function cf(n,s){Gg(n,s),(n=n.alternate)&&Gg(n,s)}function _x(){return null}var Kg=typeof reportError=="function"?reportError:function(n){console.error(n)};function hf(n){this._internalRoot=n}Wc.prototype.render=hf.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(t(409));Bc(n,s,null,null)},Wc.prototype.unmount=hf.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;da(function(){Bc(null,n,null,null)}),s[gt]=null}};function Wc(n){this._internalRoot=n}Wc.prototype.unstable_scheduleHydration=function(n){if(n){var s=ts();n={blockedOn:null,target:n,priority:s};for(var u=0;u<kt.length&&s!==0&&s<kt[u].priority;u++);kt.splice(u,0,n),u===0&&Ii(n)}};function df(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function qc(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Zg(){}function yx(n,s,u,f,g){if(g){if(typeof f=="function"){var v=f;f=function(){var ee=Hc(S);v.call(ee)}}var S=$g(s,f,n,0,null,!1,!1,"",Zg);return n._reactRootContainer=S,n[gt]=S.current,no(n.nodeType===8?n.parentNode:n),da(),S}for(;g=n.lastChild;)n.removeChild(g);if(typeof f=="function"){var M=f;f=function(){var ee=Hc(z);M.call(ee)}}var z=uf(n,0,!1,null,null,!1,!1,"",Zg);return n._reactRootContainer=z,n[gt]=z.current,no(n.nodeType===8?n.parentNode:n),da(function(){Bc(s,z,u,f)}),z}function $c(n,s,u,f,g){var v=u._reactRootContainer;if(v){var S=v;if(typeof g=="function"){var M=g;g=function(){var z=Hc(S);M.call(z)}}Bc(s,S,n,g)}else S=yx(u,s,n,g,f);return Hc(S)}Xi=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var u=ve(s.pendingLanes);u!==0&&(ir(s,u|1),Xn(s,vt()),(ct&6)===0&&(cl=vt()+500,lo()))}break;case 13:da(function(){var f=_s(n,1);if(f!==null){var g=zn();ii(f,n,1,g)}}),cf(n,1)}},Ir=function(n){if(n.tag===13){var s=_s(n,134217728);if(s!==null){var u=zn();ii(s,n,134217728,u)}cf(n,134217728)}},es=function(n){if(n.tag===13){var s=mo(n),u=_s(n,s);if(u!==null){var f=zn();ii(u,n,s,f)}cf(n,s)}},ts=function(){return Je},Ei=function(n,s){var u=Je;try{return Je=n,s()}finally{Je=u}},_r=function(n,s,u){switch(s){case"input":if(qr(n,u),s=u.name,u.type==="radio"&&s!=null){for(u=n;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<u.length;s++){var f=u[s];if(f!==n&&f.form===n.form){var g=Ya(f);if(!g)throw Error(t(90));Wr(f),qr(f,g)}}}break;case"textarea":Ra(n,u);break;case"select":s=u.value,s!=null&&An(n,!!u.multiple,s,!1)}},Ma=nf,Oa=da;var vx={usingClientEntryPoint:!1,Events:[ds,fs,Ya,mi,gi,nf]},du={findFiberByHostInstance:hs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},wx={bundleType:du.bundleType,version:du.version,rendererPackageName:du.rendererPackageName,rendererConfig:du.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ce.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Fa(n),n===null?null:n.stateNode},findFiberByHostInstance:du.findFiberByHostInstance||_x,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gc.isDisabled&&Gc.supportsFiber)try{vi=Gc.inject(wx),mn=Gc}catch{}}return er.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vx,er.createPortal=function(n,s){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!df(s))throw Error(t(200));return gx(n,s,null,u)},er.createRoot=function(n,s){if(!df(n))throw Error(t(299));var u=!1,f="",g=Kg;return s!=null&&(s.unstable_strictMode===!0&&(u=!0),s.identifierPrefix!==void 0&&(f=s.identifierPrefix),s.onRecoverableError!==void 0&&(g=s.onRecoverableError)),s=uf(n,1,!1,null,null,u,!1,f,g),n[gt]=s.current,no(n.nodeType===8?n.parentNode:n),new hf(s)},er.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Fa(s),n=n===null?null:n.stateNode,n},er.flushSync=function(n){return da(n)},er.hydrate=function(n,s,u){if(!qc(s))throw Error(t(200));return $c(null,n,s,!0,u)},er.hydrateRoot=function(n,s,u){if(!df(n))throw Error(t(405));var f=u!=null&&u.hydratedSources||null,g=!1,v="",S=Kg;if(u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(v=u.identifierPrefix),u.onRecoverableError!==void 0&&(S=u.onRecoverableError)),s=$g(s,null,n,1,u??null,g,!1,v,S),n[gt]=s.current,no(n),f)for(n=0;n<f.length;n++)u=f[n],g=u._getVersion,g=g(u._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[u,g]:s.mutableSourceEagerHydrationData.push(u,g);return new Wc(s)},er.render=function(n,s,u){if(!qc(s))throw Error(t(200));return $c(null,n,s,!1,u)},er.unmountComponentAtNode=function(n){if(!qc(n))throw Error(t(40));return n._reactRootContainer?(da(function(){$c(null,null,n,!1,function(){n._reactRootContainer=null,n[gt]=null})}),!0):!1},er.unstable_batchedUpdates=nf,er.unstable_renderSubtreeIntoContainer=function(n,s,u,f){if(!qc(u))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return $c(n,s,u,!1,f)},er.version="18.3.1-next-f1338f8080-20240426",er}var r_;function Zy(){if(r_)return mf.exports;r_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),mf.exports=Cx(),mf.exports}var i_;function kx(){if(i_)return Kc;i_=1;var r=Zy();return Kc.createRoot=r.createRoot,Kc.hydrateRoot=r.hydrateRoot,Kc}var Ax=kx();const bx=()=>{};var s_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qy=function(r){const e=[];let t=0;for(let o=0;o<r.length;o++){let a=r.charCodeAt(o);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&o+1<r.length&&(r.charCodeAt(o+1)&64512)===56320?(a=65536+((a&1023)<<10)+(r.charCodeAt(++o)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},Nx=function(r){const e=[];let t=0,o=0;for(;t<r.length;){const a=r[t++];if(a<128)e[o++]=String.fromCharCode(a);else if(a>191&&a<224){const c=r[t++];e[o++]=String.fromCharCode((a&31)<<6|c&63)}else if(a>239&&a<365){const c=r[t++],p=r[t++],_=r[t++],x=((a&7)<<18|(c&63)<<12|(p&63)<<6|_&63)-65536;e[o++]=String.fromCharCode(55296+(x>>10)),e[o++]=String.fromCharCode(56320+(x&1023))}else{const c=r[t++],p=r[t++];e[o++]=String.fromCharCode((a&15)<<12|(c&63)<<6|p&63)}}return e.join("")},Yy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let a=0;a<r.length;a+=3){const c=r[a],p=a+1<r.length,_=p?r[a+1]:0,x=a+2<r.length,I=x?r[a+2]:0,C=c>>2,k=(c&3)<<4|_>>4;let b=(_&15)<<2|I>>6,q=I&63;x||(q=64,p||(b=64)),o.push(t[C],t[k],t[b],t[q])}return o.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Qy(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):Nx(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let a=0;a<r.length;){const c=t[r.charAt(a++)],_=a<r.length?t[r.charAt(a)]:0;++a;const I=a<r.length?t[r.charAt(a)]:64;++a;const k=a<r.length?t[r.charAt(a)]:64;if(++a,c==null||_==null||I==null||k==null)throw new Rx;const b=c<<2|_>>4;if(o.push(b),I!==64){const q=_<<4&240|I>>2;if(o.push(q),k!==64){const W=I<<6&192|k;o.push(W)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class Rx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Lx=function(r){const e=Qy(r);return Yy.encodeByteArray(e,!0)},fh=function(r){return Lx(r).replace(/\./g,"")},Jy=function(r){try{return Yy.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mx=()=>Dx().__FIREBASE_DEFAULTS__,Ox=()=>{if(typeof process>"u"||typeof s_>"u")return;const r=s_.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},Vx=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&Jy(r[1]);return e&&JSON.parse(e)},Lh=()=>{try{return bx()||Mx()||Ox()||Vx()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},Xy=r=>{var e,t;return(t=(e=Lh())==null?void 0:e.emulatorHosts)==null?void 0:t[r]},jx=r=>{const e=Xy(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const o=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),o]:[e.substring(0,t),o]},ev=()=>{var r;return(r=Lh())==null?void 0:r.config},tv=r=>{var e;return(e=Lh())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,o)=>{t?this.reject(t):this.resolve(o),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,o))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nl(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function nv(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zx(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},o=e||"demo-project",a=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const p={iss:`https://securetoken.google.com/${o}`,aud:o,iat:a,exp:a+3600,auth_time:a,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...r};return[fh(JSON.stringify(t)),fh(JSON.stringify(p)),""].join(".")}const Eu={};function Ux(){const r={prod:[],emulator:[]};for(const e of Object.keys(Eu))Eu[e]?r.emulator.push(e):r.prod.push(e);return r}function Bx(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let o_=!1;function rv(r,e){if(typeof window>"u"||typeof document>"u"||!Nl(window.location.host)||Eu[r]===e||Eu[r]||o_)return;Eu[r]=e;function t(b){return`__firebase__banner__${b}`}const o="__firebase__banner",c=Ux().prod.length>0;function p(){const b=document.getElementById(o);b&&b.remove()}function _(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function x(b,q){b.setAttribute("width","24"),b.setAttribute("id",q),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function I(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{o_=!0,p()},b}function C(b,q){b.setAttribute("id",q),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function k(){const b=Bx(o),q=t("text"),W=document.getElementById(q)||document.createElement("span"),Q=t("learnmore"),Y=document.getElementById(Q)||document.createElement("a"),de=t("preprendIcon"),pe=document.getElementById(de)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const Ee=b.element;_(Ee),C(Y,Q);const Ce=I();x(pe,de),Ee.append(pe,W,Y,Ce),document.body.appendChild(Ee)}c?(W.innerText="Preview backend disconnected.",pe.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(pe.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,W.innerText="Preview backend running in this workspace."),W.setAttribute("id",q)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",k):k()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Hx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(kn())}function Wx(){var e;const r=(e=Lh())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function qx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function $x(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function Gx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Kx(){const r=kn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function Zx(){return!Wx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Qx(){try{return typeof indexedDB=="object"}catch{return!1}}function Yx(){return new Promise((r,e)=>{try{let t=!0;const o="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(o);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(o),r(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var c;e(((c=a.error)==null?void 0:c.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jx="FirebaseError";class Ns extends Error{constructor(e,t,o){super(t),this.code=e,this.customData=o,this.name=Jx,Object.setPrototypeOf(this,Ns.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ju.prototype.create)}}class ju{constructor(e,t,o){this.service=e,this.serviceName=t,this.errors=o}create(e,...t){const o=t[0]||{},a=`${this.service}/${e}`,c=this.errors[e],p=c?Xx(c,o):"Error",_=`${this.serviceName}: ${p} (${a}).`;return new Ns(a,_,o)}}function Xx(r,e){return r.replace(eE,(t,o)=>{const a=e[o];return a!=null?String(a):`<${o}?>`})}const eE=/\{\$([^}]+)}/g;function tE(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function va(r,e){if(r===e)return!0;const t=Object.keys(r),o=Object.keys(e);for(const a of t){if(!o.includes(a))return!1;const c=r[a],p=e[a];if(a_(c)&&a_(p)){if(!va(c,p))return!1}else if(c!==p)return!1}for(const a of o)if(!t.includes(a))return!1;return!0}function a_(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fu(r){const e=[];for(const[t,o]of Object.entries(r))Array.isArray(o)?o.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(o));return e.length?"&"+e.join("&"):""}function mu(r){const e={};return r.replace(/^\?/,"").split("&").forEach(o=>{if(o){const[a,c]=o.split("=");e[decodeURIComponent(a)]=decodeURIComponent(c)}}),e}function gu(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function nE(r,e){const t=new rE(r,e);return t.subscribe.bind(t)}class rE{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(o=>{this.error(o)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,o){let a;if(e===void 0&&t===void 0&&o===void 0)throw new Error("Missing Observer.");iE(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:o},a.next===void 0&&(a.next=yf),a.error===void 0&&(a.error=yf),a.complete===void 0&&(a.complete=yf);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(o){typeof console<"u"&&console.error&&console.error(o)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function iE(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function yf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(r){return r&&r._delegate?r._delegate:r}class wa{constructor(e,t,o){this.name=e,this.instanceFactory=t,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ga="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const o=new Fx;if(this.instancesDeferred.set(t,o),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&o.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(o)return null;throw a}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(aE(e))try{this.getOrInitializeService({instanceIdentifier:ga})}catch{}for(const[t,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:a});o.resolve(c)}catch{}}}}clearInstance(e=ga){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ga){return this.instances.has(e)}getOptions(e=ga){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,o=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:o,options:t});for(const[c,p]of this.instancesDeferred.entries()){const _=this.normalizeInstanceIdentifier(c);o===_&&p.resolve(a)}return a}onInit(e,t){const o=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(o)??new Set;a.add(e),this.onInitCallbacks.set(o,a);const c=this.instances.get(o);return c&&e(c,o),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const o=this.onInitCallbacks.get(t);if(o)for(const a of o)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let o=this.instances.get(e);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:oE(e),options:t}),this.instances.set(e,o),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(o,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,o)}catch{}return o||null}normalizeInstanceIdentifier(e=ga){return this.component?this.component.multipleInstances?e:ga:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function oE(r){return r===ga?void 0:r}function aE(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new sE(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(rt||(rt={}));const uE={debug:rt.DEBUG,verbose:rt.VERBOSE,info:rt.INFO,warn:rt.WARN,error:rt.ERROR,silent:rt.SILENT},cE=rt.INFO,hE={[rt.DEBUG]:"log",[rt.VERBOSE]:"log",[rt.INFO]:"info",[rt.WARN]:"warn",[rt.ERROR]:"error"},dE=(r,e,...t)=>{if(e<r.logLevel)return;const o=new Date().toISOString(),a=hE[e];if(a)console[a](`[${o}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class cp{constructor(e){this.name=e,this._logLevel=cE,this._logHandler=dE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in rt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?uE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,rt.DEBUG,...e),this._logHandler(this,rt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,rt.VERBOSE,...e),this._logHandler(this,rt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,rt.INFO,...e),this._logHandler(this,rt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,rt.WARN,...e),this._logHandler(this,rt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,rt.ERROR,...e),this._logHandler(this,rt.ERROR,...e)}}const fE=(r,e)=>e.some(t=>r instanceof t);let l_,u_;function pE(){return l_||(l_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function mE(){return u_||(u_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const iv=new WeakMap,Lf=new WeakMap,sv=new WeakMap,vf=new WeakMap,hp=new WeakMap;function gE(r){const e=new Promise((t,o)=>{const a=()=>{r.removeEventListener("success",c),r.removeEventListener("error",p)},c=()=>{t(So(r.result)),a()},p=()=>{o(r.error),a()};r.addEventListener("success",c),r.addEventListener("error",p)});return e.then(t=>{t instanceof IDBCursor&&iv.set(t,r)}).catch(()=>{}),hp.set(e,r),e}function _E(r){if(Lf.has(r))return;const e=new Promise((t,o)=>{const a=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",p),r.removeEventListener("abort",p)},c=()=>{t(),a()},p=()=>{o(r.error||new DOMException("AbortError","AbortError")),a()};r.addEventListener("complete",c),r.addEventListener("error",p),r.addEventListener("abort",p)});Lf.set(r,e)}let Df={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Lf.get(r);if(e==="objectStoreNames")return r.objectStoreNames||sv.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return So(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function yE(r){Df=r(Df)}function vE(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const o=r.call(wf(this),e,...t);return sv.set(o,e.sort?e.sort():[e]),So(o)}:mE().includes(r)?function(...e){return r.apply(wf(this),e),So(iv.get(this))}:function(...e){return So(r.apply(wf(this),e))}}function wE(r){return typeof r=="function"?vE(r):(r instanceof IDBTransaction&&_E(r),fE(r,pE())?new Proxy(r,Df):r)}function So(r){if(r instanceof IDBRequest)return gE(r);if(vf.has(r))return vf.get(r);const e=wE(r);return e!==r&&(vf.set(r,e),hp.set(e,r)),e}const wf=r=>hp.get(r);function xE(r,e,{blocked:t,upgrade:o,blocking:a,terminated:c}={}){const p=indexedDB.open(r,e),_=So(p);return o&&p.addEventListener("upgradeneeded",x=>{o(So(p.result),x.oldVersion,x.newVersion,So(p.transaction),x)}),t&&p.addEventListener("blocked",x=>t(x.oldVersion,x.newVersion,x)),_.then(x=>{c&&x.addEventListener("close",()=>c()),a&&x.addEventListener("versionchange",I=>a(I.oldVersion,I.newVersion,I))}).catch(()=>{}),_}const EE=["get","getKey","getAll","getAllKeys","count"],TE=["put","add","delete","clear"],xf=new Map;function c_(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(xf.get(e))return xf.get(e);const t=e.replace(/FromIndex$/,""),o=e!==t,a=TE.includes(t);if(!(t in(o?IDBIndex:IDBObjectStore).prototype)||!(a||EE.includes(t)))return;const c=async function(p,..._){const x=this.transaction(p,a?"readwrite":"readonly");let I=x.store;return o&&(I=I.index(_.shift())),(await Promise.all([I[t](..._),a&&x.done]))[0]};return xf.set(e,c),c}yE(r=>({...r,get:(e,t,o)=>c_(e,t)||r.get(e,t,o),has:(e,t)=>!!c_(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(SE(t)){const o=t.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(t=>t).join(" ")}}function SE(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Mf="@firebase/app",h_="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps=new cp("@firebase/app"),PE="@firebase/app-compat",CE="@firebase/analytics-compat",kE="@firebase/analytics",AE="@firebase/app-check-compat",bE="@firebase/app-check",NE="@firebase/auth",RE="@firebase/auth-compat",LE="@firebase/database",DE="@firebase/data-connect",ME="@firebase/database-compat",OE="@firebase/functions",VE="@firebase/functions-compat",jE="@firebase/installations",FE="@firebase/installations-compat",zE="@firebase/messaging",UE="@firebase/messaging-compat",BE="@firebase/performance",HE="@firebase/performance-compat",WE="@firebase/remote-config",qE="@firebase/remote-config-compat",$E="@firebase/storage",GE="@firebase/storage-compat",KE="@firebase/firestore",ZE="@firebase/ai",QE="@firebase/firestore-compat",YE="firebase",JE="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Of="[DEFAULT]",XE={[Mf]:"fire-core",[PE]:"fire-core-compat",[kE]:"fire-analytics",[CE]:"fire-analytics-compat",[bE]:"fire-app-check",[AE]:"fire-app-check-compat",[NE]:"fire-auth",[RE]:"fire-auth-compat",[LE]:"fire-rtdb",[DE]:"fire-data-connect",[ME]:"fire-rtdb-compat",[OE]:"fire-fn",[VE]:"fire-fn-compat",[jE]:"fire-iid",[FE]:"fire-iid-compat",[zE]:"fire-fcm",[UE]:"fire-fcm-compat",[BE]:"fire-perf",[HE]:"fire-perf-compat",[WE]:"fire-rc",[qE]:"fire-rc-compat",[$E]:"fire-gcs",[GE]:"fire-gcs-compat",[KE]:"fire-fst",[QE]:"fire-fst-compat",[ZE]:"fire-vertex","fire-js":"fire-js",[YE]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ph=new Map,eT=new Map,Vf=new Map;function d_(r,e){try{r.container.addComponent(e)}catch(t){Ps.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Il(r){const e=r.name;if(Vf.has(e))return Ps.debug(`There were multiple attempts to register component ${e}.`),!1;Vf.set(e,r);for(const t of ph.values())d_(t,r);for(const t of eT.values())d_(t,r);return!0}function dp(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Br(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Po=new ju("app","Firebase",tT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(e,t,o){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new wa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Po.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rl=JE;function ov(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const o={name:Of,automaticDataCollectionEnabled:!0,...e},a=o.name;if(typeof a!="string"||!a)throw Po.create("bad-app-name",{appName:String(a)});if(t||(t=ev()),!t)throw Po.create("no-options");const c=ph.get(a);if(c){if(va(t,c.options)&&va(o,c.config))return c;throw Po.create("duplicate-app",{appName:a})}const p=new lE(a);for(const x of Vf.values())p.addComponent(x);const _=new nT(t,o,p);return ph.set(a,_),_}function av(r=Of){const e=ph.get(r);if(!e&&r===Of&&ev())return ov();if(!e)throw Po.create("no-app",{appName:r});return e}function Co(r,e,t){let o=XE[r]??r;t&&(o+=`-${t}`);const a=o.match(/\s|\//),c=e.match(/\s|\//);if(a||c){const p=[`Unable to register library "${o}" with version "${e}":`];a&&p.push(`library name "${o}" contains illegal characters (whitespace or "/")`),a&&c&&p.push("and"),c&&p.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ps.warn(p.join(" "));return}Il(new wa(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT="firebase-heartbeat-database",iT=1,ku="firebase-heartbeat-store";let Ef=null;function lv(){return Ef||(Ef=xE(rT,iT,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(ku)}catch(t){console.warn(t)}}}}).catch(r=>{throw Po.create("idb-open",{originalErrorMessage:r.message})})),Ef}async function sT(r){try{const t=(await lv()).transaction(ku),o=await t.objectStore(ku).get(uv(r));return await t.done,o}catch(e){if(e instanceof Ns)Ps.warn(e.message);else{const t=Po.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ps.warn(t.message)}}}async function f_(r,e){try{const o=(await lv()).transaction(ku,"readwrite");await o.objectStore(ku).put(e,uv(r)),await o.done}catch(t){if(t instanceof Ns)Ps.warn(t.message);else{const o=Po.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ps.warn(o.message)}}}function uv(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT=1024,aT=30;class lT{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new cT(t),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=p_();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(p=>p.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:a}),this._heartbeatsCache.heartbeats.length>aT){const p=hT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(p,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(o){Ps.warn(o)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=p_(),{heartbeatsToSend:o,unsentEntries:a}=uT(this._heartbeatsCache.heartbeats),c=fh(JSON.stringify({version:2,heartbeats:o}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(t){return Ps.warn(t),""}}}function p_(){return new Date().toISOString().substring(0,10)}function uT(r,e=oT){const t=[];let o=r.slice();for(const a of r){const c=t.find(p=>p.agent===a.agent);if(c){if(c.dates.push(a.date),m_(t)>e){c.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),m_(t)>e){t.pop();break}o=o.slice(1)}return{heartbeatsToSend:t,unsentEntries:o}}class cT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Qx()?Yx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await sT(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return f_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return f_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function m_(r){return fh(JSON.stringify({version:2,heartbeats:r})).length}function hT(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let o=1;o<r.length;o++)r[o].date<t&&(t=r[o].date,e=o);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dT(r){Il(new wa("platform-logger",e=>new IE(e),"PRIVATE")),Il(new wa("heartbeat",e=>new lT(e),"PRIVATE")),Co(Mf,h_,r),Co(Mf,h_,"esm2020"),Co("fire-js","")}dT("");function cv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const fT=cv,hv=new ju("auth","Firebase",cv());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mh=new cp("@firebase/auth");function pT(r,...e){mh.logLevel<=rt.WARN&&mh.warn(`Auth (${Rl}): ${r}`,...e)}function nh(r,...e){mh.logLevel<=rt.ERROR&&mh.error(`Auth (${Rl}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ai(r,...e){throw fp(r,...e)}function Oi(r,...e){return fp(r,...e)}function dv(r,e,t){const o={...fT(),[e]:t};return new ju("auth","Firebase",o).create(e,{appName:r.name})}function Ts(r){return dv(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function fp(r,...e){if(typeof r!="string"){const t=e[0],o=[...e.slice(1)];return o[0]&&(o[0].appName=r.name),r._errorFactory.create(t,...o)}return hv.create(r,...e)}function We(r,e,...t){if(!r)throw fp(e,...t)}function xs(r){const e="INTERNAL ASSERTION FAILED: "+r;throw nh(e),new Error(e)}function Cs(r,e){r||xs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jf(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function mT(){return g_()==="http:"||g_()==="https:"}function g_(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gT(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(mT()||$x()||"connection"in navigator)?navigator.onLine:!0}function _T(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Cs(t>e,"Short delay should be less than long delay!"),this.isMobile=Hx()||Gx()}get(){return gT()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pp(r,e){Cs(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{static initialize(e,t,o){this.fetchImpl=e,t&&(this.headersImpl=t),o&&(this.responseImpl=o)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;xs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;xs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;xs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yT={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vT=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],wT=new zu(3e4,6e4);function Oo(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Vo(r,e,t,o,a={}){return pv(r,a,async()=>{let c={},p={};o&&(e==="GET"?p=o:c={body:JSON.stringify(o)});const _=Fu({key:r.config.apiKey,...p}).slice(1),x=await r._getAdditionalHeaders();x["Content-Type"]="application/json",r.languageCode&&(x["X-Firebase-Locale"]=r.languageCode);const I={method:e,headers:x,...c};return qx()||(I.referrerPolicy="no-referrer"),r.emulatorConfig&&Nl(r.emulatorConfig.host)&&(I.credentials="include"),fv.fetch()(await mv(r,r.config.apiHost,t,_),I)})}async function pv(r,e,t){r._canInitEmulator=!1;const o={...yT,...e};try{const a=new ET(r),c=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const p=await c.json();if("needConfirmation"in p)throw Zc(r,"account-exists-with-different-credential",p);if(c.ok&&!("errorMessage"in p))return p;{const _=c.ok?p.errorMessage:p.error.message,[x,I]=_.split(" : ");if(x==="FEDERATED_USER_ID_ALREADY_LINKED")throw Zc(r,"credential-already-in-use",p);if(x==="EMAIL_EXISTS")throw Zc(r,"email-already-in-use",p);if(x==="USER_DISABLED")throw Zc(r,"user-disabled",p);const C=o[x]||x.toLowerCase().replace(/[_\s]+/g,"-");if(I)throw dv(r,C,I);ai(r,C)}}catch(a){if(a instanceof Ns)throw a;ai(r,"network-request-failed",{message:String(a)})}}async function Uu(r,e,t,o,a={}){const c=await Vo(r,e,t,o,a);return"mfaPendingCredential"in c&&ai(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function mv(r,e,t,o){const a=`${e}${t}?${o}`,c=r,p=c.config.emulator?pp(r.config,a):`${r.config.apiScheme}://${a}`;return vT.includes(t)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(p).toString():p}function xT(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ET{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,o)=>{this.timer=setTimeout(()=>o(Oi(this.auth,"network-request-failed")),wT.get())})}}function Zc(r,e,t){const o={appName:r.name};t.email&&(o.email=t.email),t.phoneNumber&&(o.phoneNumber=t.phoneNumber);const a=Oi(r,e,o);return a.customData._tokenResponse=t,a}function __(r){return r!==void 0&&r.enterprise!==void 0}class TT{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return xT(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function IT(r,e){return Vo(r,"GET","/v2/recaptchaConfig",Oo(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ST(r,e){return Vo(r,"POST","/v1/accounts:delete",e)}async function gh(r,e){return Vo(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tu(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function PT(r,e=!1){const t=Ft(r),o=await t.getIdToken(e),a=mp(o);We(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const c=typeof a.firebase=="object"?a.firebase:void 0,p=c==null?void 0:c.sign_in_provider;return{claims:a,token:o,authTime:Tu(Tf(a.auth_time)),issuedAtTime:Tu(Tf(a.iat)),expirationTime:Tu(Tf(a.exp)),signInProvider:p||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function Tf(r){return Number(r)*1e3}function mp(r){const[e,t,o]=r.split(".");if(e===void 0||t===void 0||o===void 0)return nh("JWT malformed, contained fewer than 3 sections"),null;try{const a=Jy(t);return a?JSON.parse(a):(nh("Failed to decode base64 JWT payload"),null)}catch(a){return nh("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function y_(r){const e=mp(r);return We(e,"internal-error"),We(typeof e.exp<"u","internal-error"),We(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Au(r,e,t=!1){if(t)return e;try{return await e}catch(o){throw o instanceof Ns&&CT(o)&&r.auth.currentUser===r&&await r.auth.signOut(),o}}function CT({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const o=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Tu(this.lastLoginAt),this.creationTime=Tu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _h(r){var k;const e=r.auth,t=await r.getIdToken(),o=await Au(r,gh(e,{idToken:t}));We(o==null?void 0:o.users.length,e,"internal-error");const a=o.users[0];r._notifyReloadListener(a);const c=(k=a.providerUserInfo)!=null&&k.length?gv(a.providerUserInfo):[],p=bT(r.providerData,c),_=r.isAnonymous,x=!(r.email&&a.passwordHash)&&!(p!=null&&p.length),I=_?x:!1,C={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:p,metadata:new Ff(a.createdAt,a.lastLoginAt),isAnonymous:I};Object.assign(r,C)}async function AT(r){const e=Ft(r);await _h(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function bT(r,e){return[...r.filter(o=>!e.some(a=>a.providerId===o.providerId)),...e]}function gv(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NT(r,e){const t=await pv(r,{},async()=>{const o=Fu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:c}=r.config,p=await mv(r,a,"/v1/token",`key=${c}`),_=await r._getAdditionalHeaders();_["Content-Type"]="application/x-www-form-urlencoded";const x={method:"POST",headers:_,body:o};return r.emulatorConfig&&Nl(r.emulatorConfig.host)&&(x.credentials="include"),fv.fetch()(p,x)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function RT(r,e){return Vo(r,"POST","/v2/accounts:revokeToken",Oo(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){We(e.idToken,"internal-error"),We(typeof e.idToken<"u","internal-error"),We(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):y_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){We(e.length!==0,"internal-error");const t=y_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(We(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:o,refreshToken:a,expiresIn:c}=await NT(e,t);this.updateTokensAndExpiration(o,a,Number(c))}updateTokensAndExpiration(e,t,o){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+o*1e3}static fromJSON(e,t){const{refreshToken:o,accessToken:a,expirationTime:c}=t,p=new _l;return o&&(We(typeof o=="string","internal-error",{appName:e}),p.refreshToken=o),a&&(We(typeof a=="string","internal-error",{appName:e}),p.accessToken=a),c&&(We(typeof c=="number","internal-error",{appName:e}),p.expirationTime=c),p}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new _l,this.toJSON())}_performRefresh(){return xs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vo(r,e){We(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class si{constructor({uid:e,auth:t,stsTokenManager:o,...a}){this.providerId="firebase",this.proactiveRefresh=new kT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Ff(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Au(this,this.stsTokenManager.getToken(this.auth,e));return We(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return PT(this,e)}reload(){return AT(this)}_assign(e){this!==e&&(We(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new si({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){We(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let o=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),o=!0),t&&await _h(this),await this.auth._persistUserIfCurrent(this),o&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Br(this.auth.app))return Promise.reject(Ts(this.auth));const e=await this.getIdToken();return await Au(this,ST(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const o=t.displayName??void 0,a=t.email??void 0,c=t.phoneNumber??void 0,p=t.photoURL??void 0,_=t.tenantId??void 0,x=t._redirectEventId??void 0,I=t.createdAt??void 0,C=t.lastLoginAt??void 0,{uid:k,emailVerified:b,isAnonymous:q,providerData:W,stsTokenManager:Q}=t;We(k&&Q,e,"internal-error");const Y=_l.fromJSON(this.name,Q);We(typeof k=="string",e,"internal-error"),vo(o,e.name),vo(a,e.name),We(typeof b=="boolean",e,"internal-error"),We(typeof q=="boolean",e,"internal-error"),vo(c,e.name),vo(p,e.name),vo(_,e.name),vo(x,e.name),vo(I,e.name),vo(C,e.name);const de=new si({uid:k,auth:e,email:a,emailVerified:b,displayName:o,isAnonymous:q,photoURL:p,phoneNumber:c,tenantId:_,stsTokenManager:Y,createdAt:I,lastLoginAt:C});return W&&Array.isArray(W)&&(de.providerData=W.map(pe=>({...pe}))),x&&(de._redirectEventId=x),de}static async _fromIdTokenResponse(e,t,o=!1){const a=new _l;a.updateFromServerResponse(t);const c=new si({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:o});return await _h(c),c}static async _fromGetAccountInfoResponse(e,t,o){const a=t.users[0];We(a.localId!==void 0,"internal-error");const c=a.providerUserInfo!==void 0?gv(a.providerUserInfo):[],p=!(a.email&&a.passwordHash)&&!(c!=null&&c.length),_=new _l;_.updateFromIdToken(o);const x=new si({uid:a.localId,auth:e,stsTokenManager:_,isAnonymous:p}),I={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new Ff(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(c!=null&&c.length)};return Object.assign(x,I),x}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v_=new Map;function Es(r){Cs(r instanceof Function,"Expected a class definition");let e=v_.get(r);return e?(Cs(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,v_.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}_v.type="NONE";const w_=_v;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rh(r,e,t){return`firebase:${r}:${e}:${t}`}class yl{constructor(e,t,o){this.persistence=e,this.auth=t,this.userKey=o;const{config:a,name:c}=this.auth;this.fullUserKey=rh(this.userKey,a.apiKey,c),this.fullPersistenceKey=rh("persistence",a.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await gh(this.auth,{idToken:e}).catch(()=>{});return t?si._fromGetAccountInfoResponse(this.auth,t,e):null}return si._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,o="authUser"){if(!t.length)return new yl(Es(w_),e,o);const a=(await Promise.all(t.map(async I=>{if(await I._isAvailable())return I}))).filter(I=>I);let c=a[0]||Es(w_);const p=rh(o,e.config.apiKey,e.name);let _=null;for(const I of t)try{const C=await I._get(p);if(C){let k;if(typeof C=="string"){const b=await gh(e,{idToken:C}).catch(()=>{});if(!b)break;k=await si._fromGetAccountInfoResponse(e,b,C)}else k=si._fromJSON(e,C);I!==c&&(_=k),c=I;break}}catch{}const x=a.filter(I=>I._shouldAllowMigration);return!c._shouldAllowMigration||!x.length?new yl(c,e,o):(c=x[0],_&&await c._set(p,_.toJSON()),await Promise.all(t.map(async I=>{if(I!==c)try{await I._remove(p)}catch{}})),new yl(c,e,o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x_(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(xv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(yv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Tv(e))return"Blackberry";if(Iv(e))return"Webos";if(vv(e))return"Safari";if((e.includes("chrome/")||wv(e))&&!e.includes("edge/"))return"Chrome";if(Ev(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,o=r.match(t);if((o==null?void 0:o.length)===2)return o[1]}return"Other"}function yv(r=kn()){return/firefox\//i.test(r)}function vv(r=kn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function wv(r=kn()){return/crios\//i.test(r)}function xv(r=kn()){return/iemobile/i.test(r)}function Ev(r=kn()){return/android/i.test(r)}function Tv(r=kn()){return/blackberry/i.test(r)}function Iv(r=kn()){return/webos/i.test(r)}function gp(r=kn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function LT(r=kn()){var e;return gp(r)&&!!((e=window.navigator)!=null&&e.standalone)}function DT(){return Kx()&&document.documentMode===10}function Sv(r=kn()){return gp(r)||Ev(r)||Iv(r)||Tv(r)||/windows phone/i.test(r)||xv(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pv(r,e=[]){let t;switch(r){case"Browser":t=x_(kn());break;case"Worker":t=`${x_(kn())}-${r}`;break;default:t=r}const o=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Rl}/${o}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const o=c=>new Promise((p,_)=>{try{const x=e(c);p(x)}catch(x){_(x)}});o.onAbort=t,this.queue.push(o);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const o of this.queue)await o(e),o.onAbort&&t.push(o.onAbort)}catch(o){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:o==null?void 0:o.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OT(r,e={}){return Vo(r,"GET","/v2/passwordPolicy",Oo(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT=6;class jT{constructor(e){var o;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??VT,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((o=e.allowedNonAlphanumericCharacters)==null?void 0:o.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const o=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;o&&(t.meetsMinPasswordLength=e.length>=o),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let o;for(let a=0;a<e.length;a++)o=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,o>="a"&&o<="z",o>="A"&&o<="Z",o>="0"&&o<="9",this.allowedNonAlphanumericCharacters.includes(o))}updatePasswordCharacterOptionsStatuses(e,t,o,a,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=o)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e,t,o,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=o,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new E_(this),this.idTokenSubscription=new E_(this),this.beforeStateQueue=new MT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=hv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Es(t)),this._initializationPromise=this.queue(async()=>{var o,a,c;if(!this._deleted&&(this.persistenceManager=await yl.create(this,e),(o=this._resolvePersistenceManagerAvailable)==null||o.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((c=this.currentUser)==null?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await gh(this,{idToken:e}),o=await si._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(o)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var c;if(Br(this.app)){const p=this.app.settings.authIdToken;return p?new Promise(_=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(p).then(_,_))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let o=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const p=(c=this.redirectUser)==null?void 0:c._redirectEventId,_=o==null?void 0:o._redirectEventId,x=await this.tryRedirectSignIn(e);(!p||p===_)&&(x!=null&&x.user)&&(o=x.user,a=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(o)}catch(p){o=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(p))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return We(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await _h(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=_T()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Br(this.app))return Promise.reject(Ts(this));const t=e?Ft(e):null;return t&&We(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&We(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Br(this.app)?Promise.reject(Ts(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Br(this.app)?Promise.reject(Ts(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Es(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await OT(this),t=new jT(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ju("auth","Firebase",e())}onAuthStateChanged(e,t,o){return this.registerStateListener(this.authStateSubscription,e,t,o)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,o){return this.registerStateListener(this.idTokenSubscription,e,t,o)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const o=this.onAuthStateChanged(()=>{o(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),o={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(o.tenantId=this.tenantId),await RT(this,o)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const o=await this.getOrInitRedirectPersistenceManager(t);return e===null?o.removeCurrentUser():o.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Es(e)||this._popupRedirectResolver;We(t,this,"argument-error"),this.redirectPersistenceManager=await yl.create(this,[Es(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,o;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((o=this.redirectUser)==null?void 0:o._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,o,a){if(this._deleted)return()=>{};const c=typeof t=="function"?t:t.next.bind(t);let p=!1;const _=this._isInitialized?Promise.resolve():this._initializationPromise;if(We(_,this,"internal-error"),_.then(()=>{p||c(this.currentUser)}),typeof t=="function"){const x=e.addObserver(t,o,a);return()=>{p=!0,x()}}else{const x=e.addObserver(t);return()=>{p=!0,x()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return We(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Pv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const o=await this._getAppCheckToken();return o&&(e["X-Firebase-AppCheck"]=o),e}async _getAppCheckToken(){var t;if(Br(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&pT(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Pa(r){return Ft(r)}class E_{constructor(e){this.auth=e,this.observer=null,this.addObserver=nE(t=>this.observer=t)}get next(){return We(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function zT(r){Dh=r}function Cv(r){return Dh.loadJS(r)}function UT(){return Dh.recaptchaEnterpriseScript}function BT(){return Dh.gapiScript}function HT(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class WT{constructor(){this.enterprise=new qT}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class qT{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const $T="recaptcha-enterprise",kv="NO_RECAPTCHA";class GT{constructor(e){this.type=$T,this.auth=Pa(e)}async verify(e="verify",t=!1){async function o(c){if(!t){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(p,_)=>{IT(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(x=>{if(x.recaptchaKey===void 0)_(new Error("recaptcha Enterprise site key undefined"));else{const I=new TT(x);return c.tenantId==null?c._agentRecaptchaConfig=I:c._tenantRecaptchaConfigs[c.tenantId]=I,p(I.siteKey)}}).catch(x=>{_(x)})})}function a(c,p,_){const x=window.grecaptcha;__(x)?x.enterprise.ready(()=>{x.enterprise.execute(c,{action:e}).then(I=>{p(I)}).catch(()=>{p(kv)})}):_(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new WT().execute("siteKey",{action:"verify"}):new Promise((c,p)=>{o(this.auth).then(_=>{if(!t&&__(window.grecaptcha))a(_,c,p);else{if(typeof window>"u"){p(new Error("RecaptchaVerifier is only supported in browser"));return}let x=UT();x.length!==0&&(x+=_),Cv(x).then(()=>{a(_,c,p)}).catch(I=>{p(I)})}}).catch(_=>{p(_)})})}}async function T_(r,e,t,o=!1,a=!1){const c=new GT(r);let p;if(a)p=kv;else try{p=await c.verify(t)}catch{p=await c.verify(t,!0)}const _={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in _){const x=_.phoneEnrollmentInfo.phoneNumber,I=_.phoneEnrollmentInfo.recaptchaToken;Object.assign(_,{phoneEnrollmentInfo:{phoneNumber:x,recaptchaToken:I,captchaResponse:p,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in _){const x=_.phoneSignInInfo.recaptchaToken;Object.assign(_,{phoneSignInInfo:{recaptchaToken:x,captchaResponse:p,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return _}return o?Object.assign(_,{captchaResp:p}):Object.assign(_,{captchaResponse:p}),Object.assign(_,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(_,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),_}async function zf(r,e,t,o,a){var c;if((c=r._getRecaptchaConfig())!=null&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const p=await T_(r,e,t,t==="getOobCode");return o(r,p)}else return o(r,e).catch(async p=>{if(p.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const _=await T_(r,e,t,t==="getOobCode");return o(r,_)}else return Promise.reject(p)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KT(r,e){const t=dp(r,"auth");if(t.isInitialized()){const a=t.getImmediate(),c=t.getOptions();if(va(c,e??{}))return a;ai(a,"already-initialized")}return t.initialize({options:e})}function ZT(r,e){const t=(e==null?void 0:e.persistence)||[],o=(Array.isArray(t)?t:[t]).map(Es);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(o,e==null?void 0:e.popupRedirectResolver)}function QT(r,e,t){const o=Pa(r);We(/^https?:\/\//.test(e),o,"invalid-emulator-scheme");const a=!1,c=Av(e),{host:p,port:_}=YT(e),x=_===null?"":`:${_}`,I={url:`${c}//${p}${x}/`},C=Object.freeze({host:p,port:_,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!o._canInitEmulator){We(o.config.emulator&&o.emulatorConfig,o,"emulator-config-failed"),We(va(I,o.config.emulator)&&va(C,o.emulatorConfig),o,"emulator-config-failed");return}o.config.emulator=I,o.emulatorConfig=C,o.settings.appVerificationDisabledForTesting=!0,Nl(p)?(nv(`${c}//${p}${x}`),rv("Auth",!0)):JT()}function Av(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function YT(r){const e=Av(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const o=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(o);if(a){const c=a[1];return{host:c,port:I_(o.substr(c.length+1))}}else{const[c,p]=o.split(":");return{host:c,port:I_(p)}}}function I_(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function JT(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return xs("not implemented")}_getIdTokenResponse(e){return xs("not implemented")}_linkToIdToken(e,t){return xs("not implemented")}_getReauthenticationResolver(e){return xs("not implemented")}}async function XT(r,e){return Vo(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e1(r,e){return Uu(r,"POST","/v1/accounts:signInWithPassword",Oo(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t1(r,e){return Uu(r,"POST","/v1/accounts:signInWithEmailLink",Oo(r,e))}async function n1(r,e){return Uu(r,"POST","/v1/accounts:signInWithEmailLink",Oo(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu extends _p{constructor(e,t,o,a=null){super("password",o),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new bu(e,t,"password")}static _fromEmailAndCode(e,t,o=null){return new bu(e,t,"emailLink",o)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return zf(e,t,"signInWithPassword",e1);case"emailLink":return t1(e,{email:this._email,oobCode:this._password});default:ai(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const o={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return zf(e,o,"signUpPassword",XT);case"emailLink":return n1(e,{idToken:t,email:this._email,oobCode:this._password});default:ai(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vl(r,e){return Uu(r,"POST","/v1/accounts:signInWithIdp",Oo(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1="http://localhost";class xa extends _p{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new xa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ai("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:o,signInMethod:a,...c}=t;if(!o||!a)return null;const p=new xa(o,a);return p.idToken=c.idToken||void 0,p.accessToken=c.accessToken||void 0,p.secret=c.secret,p.nonce=c.nonce,p.pendingToken=c.pendingToken||null,p}_getIdTokenResponse(e){const t=this.buildRequest();return vl(e,t)}_linkToIdToken(e,t){const o=this.buildRequest();return o.idToken=t,vl(e,o)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,vl(e,t)}buildRequest(){const e={requestUri:r1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Fu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i1(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function s1(r){const e=mu(gu(r)).link,t=e?mu(gu(e)).deep_link_id:null,o=mu(gu(r)).deep_link_id;return(o?mu(gu(o)).link:null)||o||t||e||r}class yp{constructor(e){const t=mu(gu(e)),o=t.apiKey??null,a=t.oobCode??null,c=i1(t.mode??null);We(o&&a&&c,"argument-error"),this.apiKey=o,this.operation=c,this.code=a,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=s1(e);try{return new yp(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(){this.providerId=Ca.PROVIDER_ID}static credential(e,t){return bu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const o=yp.parseLink(t);return We(o,"argument-error"),bu._fromEmailAndCode(e,o.code,o.tenantId)}}Ca.PROVIDER_ID="password";Ca.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ca.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu extends bv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo extends Bu{constructor(){super("facebook.com")}static credential(e){return xa._fromParams({providerId:wo.PROVIDER_ID,signInMethod:wo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wo.credentialFromTaggedObject(e)}static credentialFromError(e){return wo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wo.credential(e.oauthAccessToken)}catch{return null}}}wo.FACEBOOK_SIGN_IN_METHOD="facebook.com";wo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo extends Bu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return xa._fromParams({providerId:xo.PROVIDER_ID,signInMethod:xo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return xo.credentialFromTaggedObject(e)}static credentialFromError(e){return xo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:o}=e;if(!t&&!o)return null;try{return xo.credential(t,o)}catch{return null}}}xo.GOOGLE_SIGN_IN_METHOD="google.com";xo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo extends Bu{constructor(){super("github.com")}static credential(e){return xa._fromParams({providerId:Eo.PROVIDER_ID,signInMethod:Eo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Eo.credentialFromTaggedObject(e)}static credentialFromError(e){return Eo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Eo.credential(e.oauthAccessToken)}catch{return null}}}Eo.GITHUB_SIGN_IN_METHOD="github.com";Eo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To extends Bu{constructor(){super("twitter.com")}static credential(e,t){return xa._fromParams({providerId:To.PROVIDER_ID,signInMethod:To.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return To.credentialFromTaggedObject(e)}static credentialFromError(e){return To.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:o}=e;if(!t||!o)return null;try{return To.credential(t,o)}catch{return null}}}To.TWITTER_SIGN_IN_METHOD="twitter.com";To.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o1(r,e){return Uu(r,"POST","/v1/accounts:signUp",Oo(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,o,a=!1){const c=await si._fromIdTokenResponse(e,o,a),p=S_(o);return new Ea({user:c,providerId:p,_tokenResponse:o,operationType:t})}static async _forOperation(e,t,o){await e._updateTokensIfNecessary(o,!0);const a=S_(o);return new Ea({user:e,providerId:a,_tokenResponse:o,operationType:t})}}function S_(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh extends Ns{constructor(e,t,o,a){super(t.code,t.message),this.operationType=o,this.user=a,Object.setPrototypeOf(this,yh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:o}}static _fromErrorAndOperation(e,t,o,a){return new yh(e,t,o,a)}}function Nv(r,e,t,o){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?yh._fromErrorAndOperation(r,c,e,o):c})}async function a1(r,e,t=!1){const o=await Au(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Ea._forOperation(r,"link",o)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rv(r,e,t=!1){const{auth:o}=r;if(Br(o.app))return Promise.reject(Ts(o));const a="reauthenticate";try{const c=await Au(r,Nv(o,a,e,r),t);We(c.idToken,o,"internal-error");const p=mp(c.idToken);We(p,o,"internal-error");const{sub:_}=p;return We(r.uid===_,o,"user-mismatch"),Ea._forOperation(r,a,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&ai(o,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lv(r,e,t=!1){if(Br(r.app))return Promise.reject(Ts(r));const o="signIn",a=await Nv(r,o,e),c=await Ea._fromIdTokenResponse(r,o,a);return t||await r._updateCurrentUser(c.user),c}async function l1(r,e){return Lv(Pa(r),e)}async function u1(r,e){return Rv(Ft(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dv(r){const e=Pa(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function c1(r,e,t){if(Br(r.app))return Promise.reject(Ts(r));const o=Pa(r),p=await zf(o,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",o1).catch(x=>{throw x.code==="auth/password-does-not-meet-requirements"&&Dv(r),x}),_=await Ea._fromIdTokenResponse(o,"signIn",p);return await o._updateCurrentUser(_.user),_}function h1(r,e,t){return Br(r.app)?Promise.reject(Ts(r)):l1(Ft(r),Ca.credential(e,t)).catch(async o=>{throw o.code==="auth/password-does-not-meet-requirements"&&Dv(r),o})}function d1(r,e,t,o){return Ft(r).onIdTokenChanged(e,t,o)}function f1(r,e,t){return Ft(r).beforeAuthStateChanged(e,t)}function p1(r,e,t,o){return Ft(r).onAuthStateChanged(e,t,o)}function m1(r){return Ft(r).signOut()}async function g1(r){return Ft(r).delete()}const vh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(vh,"1"),this.storage.removeItem(vh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1=1e3,y1=10;class Ov extends Mv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Sv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const o=this.storage.getItem(t),a=this.localCache[t];o!==a&&e(t,a,o)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((p,_,x)=>{this.notifyListeners(p,x)});return}const o=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const p=this.storage.getItem(o);!t&&this.localCache[o]===p||this.notifyListeners(o,p)},c=this.storage.getItem(o);DT()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,y1):a()}notifyListeners(e,t){this.localCache[e]=t;const o=this.listeners[e];if(o)for(const a of Array.from(o))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,o)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:o}),!0)})},_1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ov.type="LOCAL";const v1=Ov;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv extends Mv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Vv.type="SESSION";const jv=Vv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w1(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const o=new Mh(e);return this.receivers.push(o),o}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:o,eventType:a,data:c}=t.data,p=this.handlersMap[a];if(!(p!=null&&p.size))return;t.ports[0].postMessage({status:"ack",eventId:o,eventType:a});const _=Array.from(p).map(async I=>I(t.origin,c)),x=await w1(_);t.ports[0].postMessage({status:"done",eventId:o,eventType:a,response:x})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Mh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vp(r="",e=10){let t="";for(let o=0;o<e;o++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,o=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let c,p;return new Promise((_,x)=>{const I=vp("",20);a.port1.start();const C=setTimeout(()=>{x(new Error("unsupported_event"))},o);p={messageChannel:a,onMessage(k){const b=k;if(b.data.eventId===I)switch(b.data.status){case"ack":clearTimeout(C),c=setTimeout(()=>{x(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),_(b.data.response);break;default:clearTimeout(C),clearTimeout(c),x(new Error("invalid_response"));break}}},this.handlers.add(p),a.port1.addEventListener("message",p.onMessage),this.target.postMessage({eventType:e,eventId:I,data:t},[a.port2])}).finally(()=>{p&&this.removeMessageHandler(p)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vi(){return window}function E1(r){Vi().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fv(){return typeof Vi().WorkerGlobalScope<"u"&&typeof Vi().importScripts=="function"}async function T1(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function I1(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function S1(){return Fv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv="firebaseLocalStorageDb",P1=1,wh="firebaseLocalStorage",Uv="fbase_key";class Hu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Oh(r,e){return r.transaction([wh],e?"readwrite":"readonly").objectStore(wh)}function C1(){const r=indexedDB.deleteDatabase(zv);return new Hu(r).toPromise()}function Uf(){const r=indexedDB.open(zv,P1);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const o=r.result;try{o.createObjectStore(wh,{keyPath:Uv})}catch(a){t(a)}}),r.addEventListener("success",async()=>{const o=r.result;o.objectStoreNames.contains(wh)?e(o):(o.close(),await C1(),e(await Uf()))})})}async function P_(r,e,t){const o=Oh(r,!0).put({[Uv]:e,value:t});return new Hu(o).toPromise()}async function k1(r,e){const t=Oh(r,!1).get(e),o=await new Hu(t).toPromise();return o===void 0?null:o.value}function C_(r,e){const t=Oh(r,!0).delete(e);return new Hu(t).toPromise()}const A1=800,b1=3;class Bv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Uf(),this.db)}async _withRetries(e){let t=0;for(;;)try{const o=await this._openDb();return await e(o)}catch(o){if(t++>b1)throw o;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Fv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Mh._getInstance(S1()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,o;if(this.activeServiceWorker=await T1(),!this.activeServiceWorker)return;this.sender=new x1(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(o=e[0])!=null&&o.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||I1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Uf();return await P_(e,vh,"1"),await C_(e,vh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(o=>P_(o,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(o=>k1(o,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>C_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const c=Oh(a,!1).getAll();return new Hu(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],o=new Set;if(e.length!==0)for(const{fbase_key:a,value:c}of e)o.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(c)&&(this.notifyListeners(a,c),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!o.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const o=this.listeners[e];if(o)for(const a of Array.from(o))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),A1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Bv.type="LOCAL";const N1=Bv;new zu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R1(r,e){return e?Es(e):(We(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp extends _p{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return vl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return vl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return vl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function L1(r){return Lv(r.auth,new wp(r),r.bypassAuthState)}function D1(r){const{auth:e,user:t}=r;return We(t,e,"internal-error"),Rv(t,new wp(r),r.bypassAuthState)}async function M1(r){const{auth:e,user:t}=r;return We(t,e,"internal-error"),a1(t,new wp(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(e,t,o,a,c=!1){this.auth=e,this.resolver=o,this.user=a,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(o){this.reject(o)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:o,postBody:a,tenantId:c,error:p,type:_}=e;if(p){this.reject(p);return}const x={auth:this.auth,requestUri:t,sessionId:o,tenantId:c||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(_)(x))}catch(I){this.reject(I)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return L1;case"linkViaPopup":case"linkViaRedirect":return M1;case"reauthViaPopup":case"reauthViaRedirect":return D1;default:ai(this.auth,"internal-error")}}resolve(e){Cs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Cs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O1=new zu(2e3,1e4);class gl extends Hv{constructor(e,t,o,a,c){super(e,t,a,c),this.provider=o,this.authWindow=null,this.pollId=null,gl.currentPopupAction&&gl.currentPopupAction.cancel(),gl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return We(e,this.auth,"internal-error"),e}async onExecution(){Cs(this.filter.length===1,"Popup operations only handle one event");const e=vp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Oi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Oi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,gl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,o;if((o=(t=this.authWindow)==null?void 0:t.window)!=null&&o.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Oi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,O1.get())};e()}}gl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1="pendingRedirect",ih=new Map;class j1 extends Hv{constructor(e,t,o=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,o),this.eventId=null}async execute(){let e=ih.get(this.auth._key());if(!e){try{const o=await F1(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(o)}catch(t){e=()=>Promise.reject(t)}ih.set(this.auth._key(),e)}return this.bypassAuthState||ih.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function F1(r,e){const t=B1(e),o=U1(r);if(!await o._isAvailable())return!1;const a=await o._get(t)==="true";return await o._remove(t),a}function z1(r,e){ih.set(r._key(),e)}function U1(r){return Es(r._redirectPersistence)}function B1(r){return rh(V1,r.config.apiKey,r.name)}async function H1(r,e,t=!1){if(Br(r.app))return Promise.reject(Ts(r));const o=Pa(r),a=R1(o,e),p=await new j1(o,a,t).execute();return p&&!t&&(delete p.user._redirectEventId,await o._persistUserIfCurrent(p.user),await o._setRedirectUser(null,e)),p}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W1=600*1e3;class q1{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(o=>{this.isEventForConsumer(e,o)&&(t=!0,this.sendToConsumer(e,o),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!$1(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var o;if(e.error&&!Wv(e)){const a=((o=e.error.code)==null?void 0:o.split("auth/")[1])||"internal-error";t.onError(Oi(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const o=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&o}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=W1&&this.cachedEventUids.clear(),this.cachedEventUids.has(k_(e))}saveEventToCache(e){this.cachedEventUids.add(k_(e)),this.lastProcessedEventTime=Date.now()}}function k_(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function Wv({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function $1(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Wv(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G1(r,e={}){return Vo(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Z1=/^https?/;async function Q1(r){if(r.config.emulator)return;const{authorizedDomains:e}=await G1(r);for(const t of e)try{if(Y1(t))return}catch{}ai(r,"unauthorized-domain")}function Y1(r){const e=jf(),{protocol:t,hostname:o}=new URL(e);if(r.startsWith("chrome-extension://")){const p=new URL(r);return p.hostname===""&&o===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&p.hostname===o}if(!Z1.test(t))return!1;if(K1.test(r))return o===r;const a=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(o)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1=new zu(3e4,6e4);function A_(){const r=Vi().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function X1(r){return new Promise((e,t)=>{var a,c,p;function o(){A_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{A_(),t(Oi(r,"network-request-failed"))},timeout:J1.get()})}if((c=(a=Vi().gapi)==null?void 0:a.iframes)!=null&&c.Iframe)e(gapi.iframes.getContext());else if((p=Vi().gapi)!=null&&p.load)o();else{const _=HT("iframefcb");return Vi()[_]=()=>{gapi.load?o():t(Oi(r,"network-request-failed"))},Cv(`${BT()}?onload=${_}`).catch(x=>t(x))}}).catch(e=>{throw sh=null,e})}let sh=null;function eI(r){return sh=sh||X1(r),sh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI=new zu(5e3,15e3),nI="__/auth/iframe",rI="emulator/auth/iframe",iI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},sI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function oI(r){const e=r.config;We(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?pp(e,rI):`https://${r.config.authDomain}/${nI}`,o={apiKey:e.apiKey,appName:r.name,v:Rl},a=sI.get(r.config.apiHost);a&&(o.eid=a);const c=r._getFrameworks();return c.length&&(o.fw=c.join(",")),`${t}?${Fu(o).slice(1)}`}async function aI(r){const e=await eI(r),t=Vi().gapi;return We(t,r,"internal-error"),e.open({where:document.body,url:oI(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:iI,dontclear:!0},o=>new Promise(async(a,c)=>{await o.restyle({setHideOnLeave:!1});const p=Oi(r,"network-request-failed"),_=Vi().setTimeout(()=>{c(p)},tI.get());function x(){Vi().clearTimeout(_),a(o)}o.ping(x).then(x,()=>{c(p)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},uI=500,cI=600,hI="_blank",dI="http://localhost";class b_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function fI(r,e,t,o=uI,a=cI){const c=Math.max((window.screen.availHeight-a)/2,0).toString(),p=Math.max((window.screen.availWidth-o)/2,0).toString();let _="";const x={...lI,width:o.toString(),height:a.toString(),top:c,left:p},I=kn().toLowerCase();t&&(_=wv(I)?hI:t),yv(I)&&(e=e||dI,x.scrollbars="yes");const C=Object.entries(x).reduce((b,[q,W])=>`${b}${q}=${W},`,"");if(LT(I)&&_!=="_self")return pI(e||"",_),new b_(null);const k=window.open(e||"",_,C);We(k,r,"popup-blocked");try{k.focus()}catch{}return new b_(k)}function pI(r,e){const t=document.createElement("a");t.href=r,t.target=e;const o=document.createEvent("MouseEvent");o.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI="__/auth/handler",gI="emulator/auth/handler",_I=encodeURIComponent("fac");async function N_(r,e,t,o,a,c){We(r.config.authDomain,r,"auth-domain-config-required"),We(r.config.apiKey,r,"invalid-api-key");const p={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:o,v:Rl,eventId:a};if(e instanceof bv){e.setDefaultLanguage(r.languageCode),p.providerId=e.providerId||"",tE(e.getCustomParameters())||(p.customParameters=JSON.stringify(e.getCustomParameters()));for(const[C,k]of Object.entries({}))p[C]=k}if(e instanceof Bu){const C=e.getScopes().filter(k=>k!=="");C.length>0&&(p.scopes=C.join(","))}r.tenantId&&(p.tid=r.tenantId);const _=p;for(const C of Object.keys(_))_[C]===void 0&&delete _[C];const x=await r._getAppCheckToken(),I=x?`#${_I}=${encodeURIComponent(x)}`:"";return`${yI(r)}?${Fu(_).slice(1)}${I}`}function yI({config:r}){return r.emulator?pp(r,gI):`https://${r.authDomain}/${mI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const If="webStorageSupport";class vI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=jv,this._completeRedirectFn=H1,this._overrideRedirectResult=z1}async _openPopup(e,t,o,a){var p;Cs((p=this.eventManagers[e._key()])==null?void 0:p.manager,"_initialize() not called before _openPopup()");const c=await N_(e,t,o,jf(),a);return fI(e,c,vp())}async _openRedirect(e,t,o,a){await this._originValidation(e);const c=await N_(e,t,o,jf(),a);return E1(c),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:c}=this.eventManagers[t];return a?Promise.resolve(a):(Cs(c,"If manager is not set, promise should be"),c)}const o=this.initAndGetManager(e);return this.eventManagers[t]={promise:o},o.catch(()=>{delete this.eventManagers[t]}),o}async initAndGetManager(e){const t=await aI(e),o=new q1(e);return t.register("authEvent",a=>(We(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:o.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:o},this.iframes[e._key()]=t,o}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(If,{type:If},a=>{var p;const c=(p=a==null?void 0:a[0])==null?void 0:p[If];c!==void 0&&t(!!c),ai(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Q1(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Sv()||vv()||gp()}}const wI=vI;var R_="@firebase/auth",L_="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(o=>{e((o==null?void 0:o.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){We(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EI(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function TI(r){Il(new wa("auth",(e,{options:t})=>{const o=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:p,authDomain:_}=o.options;We(p&&!p.includes(":"),"invalid-api-key",{appName:o.name});const x={apiKey:p,authDomain:_,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Pv(r)},I=new FT(o,a,c,x);return ZT(I,t),I},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,o)=>{e.getProvider("auth-internal").initialize()})),Il(new wa("auth-internal",e=>{const t=Pa(e.getProvider("auth").getImmediate());return(o=>new xI(o))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Co(R_,L_,EI(r)),Co(R_,L_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II=300,SI=tv("authIdTokenMaxAge")||II;let D_=null;const PI=r=>async e=>{const t=e&&await e.getIdTokenResult(),o=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(o&&o>SI)return;const a=t==null?void 0:t.token;D_!==a&&(D_=a,await fetch(r,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function CI(r=av()){const e=dp(r,"auth");if(e.isInitialized())return e.getImmediate();const t=KT(r,{popupRedirectResolver:wI,persistence:[N1,v1,jv]}),o=tv("authTokenSyncURL");if(o&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(o,location.origin);if(location.origin===c.origin){const p=PI(c.toString());f1(t,p,()=>p(t.currentUser)),d1(t,_=>p(_))}}const a=Xy("auth");return a&&QT(t,`http://${a}`),t}function kI(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}zT({loadJS(r){return new Promise((e,t)=>{const o=document.createElement("script");o.setAttribute("src",r),o.onload=e,o.onerror=a=>{const c=Oi("internal-error");c.customData=a,t(c)},o.type="text/javascript",o.charset="UTF-8",kI().appendChild(o)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});TI("Browser");/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AI=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),qv=(...r)=>r.filter((e,t,o)=>!!e&&e.trim()!==""&&o.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var bI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NI=ce.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:o,className:a="",children:c,iconNode:p,..._},x)=>ce.createElement("svg",{ref:x,...bI,width:e,height:e,stroke:r,strokeWidth:o?Number(t)*24/Number(e):t,className:qv("lucide",a),..._},[...p.map(([I,C])=>ce.createElement(I,C)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=(r,e)=>{const t=ce.forwardRef(({className:o,...a},c)=>ce.createElement(NI,{ref:c,iconNode:e,className:qv(`lucide-${AI(r)}`,o),...a}));return t.displayName=`${r}`,t};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RI=tt("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bf=tt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LI=tt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DI=tt("Bed",[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qc=tt("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xp=tt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vh=tt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MI=tt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OI=tt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VI=tt("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jI=tt("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FI=tt("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zI=tt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UI=tt("Coffee",[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BI=tt("Compass",[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ep=tt("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M_=tt("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O_=tt("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V_=tt("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HI=tt("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Un=tt("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=tt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WI=tt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qI=tt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jh=tt("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j_=tt("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tp=tt("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hf=tt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $I=tt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F_=tt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GI=tt("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ka=tt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wl=tt("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KI=tt("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZI=tt("TramFront",[["rect",{width:"16",height:"16",x:"4",y:"3",rx:"2",key:"1wxw4b"}],["path",{d:"M4 11h16",key:"mpoxn0"}],["path",{d:"M12 3v8",key:"1h2ygw"}],["path",{d:"m8 19-2 3",key:"13i0xs"}],["path",{d:"m18 22-2-3",key:"1p0ohu"}],["path",{d:"M8 15h.01",key:"a7atzg"}],["path",{d:"M16 15h.01",key:"rnfrdf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fh=tt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QI=tt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ip=tt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YI=tt("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sp=tt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var JI="firebase",XI="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Co(JI,XI,"app");var z_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ko,$v;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(F,R){function O(){}O.prototype=R.prototype,F.F=R.prototype,F.prototype=new O,F.prototype.constructor=F,F.D=function(U,D,V){for(var N=Array(arguments.length-2),ae=2;ae<arguments.length;ae++)N[ae-2]=arguments[ae];return R.prototype[D].apply(U,N)}}function t(){this.blockSize=-1}function o(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(o,t),o.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(F,R,O){O||(O=0);const U=Array(16);if(typeof R=="string")for(var D=0;D<16;++D)U[D]=R.charCodeAt(O++)|R.charCodeAt(O++)<<8|R.charCodeAt(O++)<<16|R.charCodeAt(O++)<<24;else for(D=0;D<16;++D)U[D]=R[O++]|R[O++]<<8|R[O++]<<16|R[O++]<<24;R=F.g[0],O=F.g[1],D=F.g[2];let V=F.g[3],N;N=R+(V^O&(D^V))+U[0]+3614090360&4294967295,R=O+(N<<7&4294967295|N>>>25),N=V+(D^R&(O^D))+U[1]+3905402710&4294967295,V=R+(N<<12&4294967295|N>>>20),N=D+(O^V&(R^O))+U[2]+606105819&4294967295,D=V+(N<<17&4294967295|N>>>15),N=O+(R^D&(V^R))+U[3]+3250441966&4294967295,O=D+(N<<22&4294967295|N>>>10),N=R+(V^O&(D^V))+U[4]+4118548399&4294967295,R=O+(N<<7&4294967295|N>>>25),N=V+(D^R&(O^D))+U[5]+1200080426&4294967295,V=R+(N<<12&4294967295|N>>>20),N=D+(O^V&(R^O))+U[6]+2821735955&4294967295,D=V+(N<<17&4294967295|N>>>15),N=O+(R^D&(V^R))+U[7]+4249261313&4294967295,O=D+(N<<22&4294967295|N>>>10),N=R+(V^O&(D^V))+U[8]+1770035416&4294967295,R=O+(N<<7&4294967295|N>>>25),N=V+(D^R&(O^D))+U[9]+2336552879&4294967295,V=R+(N<<12&4294967295|N>>>20),N=D+(O^V&(R^O))+U[10]+4294925233&4294967295,D=V+(N<<17&4294967295|N>>>15),N=O+(R^D&(V^R))+U[11]+2304563134&4294967295,O=D+(N<<22&4294967295|N>>>10),N=R+(V^O&(D^V))+U[12]+1804603682&4294967295,R=O+(N<<7&4294967295|N>>>25),N=V+(D^R&(O^D))+U[13]+4254626195&4294967295,V=R+(N<<12&4294967295|N>>>20),N=D+(O^V&(R^O))+U[14]+2792965006&4294967295,D=V+(N<<17&4294967295|N>>>15),N=O+(R^D&(V^R))+U[15]+1236535329&4294967295,O=D+(N<<22&4294967295|N>>>10),N=R+(D^V&(O^D))+U[1]+4129170786&4294967295,R=O+(N<<5&4294967295|N>>>27),N=V+(O^D&(R^O))+U[6]+3225465664&4294967295,V=R+(N<<9&4294967295|N>>>23),N=D+(R^O&(V^R))+U[11]+643717713&4294967295,D=V+(N<<14&4294967295|N>>>18),N=O+(V^R&(D^V))+U[0]+3921069994&4294967295,O=D+(N<<20&4294967295|N>>>12),N=R+(D^V&(O^D))+U[5]+3593408605&4294967295,R=O+(N<<5&4294967295|N>>>27),N=V+(O^D&(R^O))+U[10]+38016083&4294967295,V=R+(N<<9&4294967295|N>>>23),N=D+(R^O&(V^R))+U[15]+3634488961&4294967295,D=V+(N<<14&4294967295|N>>>18),N=O+(V^R&(D^V))+U[4]+3889429448&4294967295,O=D+(N<<20&4294967295|N>>>12),N=R+(D^V&(O^D))+U[9]+568446438&4294967295,R=O+(N<<5&4294967295|N>>>27),N=V+(O^D&(R^O))+U[14]+3275163606&4294967295,V=R+(N<<9&4294967295|N>>>23),N=D+(R^O&(V^R))+U[3]+4107603335&4294967295,D=V+(N<<14&4294967295|N>>>18),N=O+(V^R&(D^V))+U[8]+1163531501&4294967295,O=D+(N<<20&4294967295|N>>>12),N=R+(D^V&(O^D))+U[13]+2850285829&4294967295,R=O+(N<<5&4294967295|N>>>27),N=V+(O^D&(R^O))+U[2]+4243563512&4294967295,V=R+(N<<9&4294967295|N>>>23),N=D+(R^O&(V^R))+U[7]+1735328473&4294967295,D=V+(N<<14&4294967295|N>>>18),N=O+(V^R&(D^V))+U[12]+2368359562&4294967295,O=D+(N<<20&4294967295|N>>>12),N=R+(O^D^V)+U[5]+4294588738&4294967295,R=O+(N<<4&4294967295|N>>>28),N=V+(R^O^D)+U[8]+2272392833&4294967295,V=R+(N<<11&4294967295|N>>>21),N=D+(V^R^O)+U[11]+1839030562&4294967295,D=V+(N<<16&4294967295|N>>>16),N=O+(D^V^R)+U[14]+4259657740&4294967295,O=D+(N<<23&4294967295|N>>>9),N=R+(O^D^V)+U[1]+2763975236&4294967295,R=O+(N<<4&4294967295|N>>>28),N=V+(R^O^D)+U[4]+1272893353&4294967295,V=R+(N<<11&4294967295|N>>>21),N=D+(V^R^O)+U[7]+4139469664&4294967295,D=V+(N<<16&4294967295|N>>>16),N=O+(D^V^R)+U[10]+3200236656&4294967295,O=D+(N<<23&4294967295|N>>>9),N=R+(O^D^V)+U[13]+681279174&4294967295,R=O+(N<<4&4294967295|N>>>28),N=V+(R^O^D)+U[0]+3936430074&4294967295,V=R+(N<<11&4294967295|N>>>21),N=D+(V^R^O)+U[3]+3572445317&4294967295,D=V+(N<<16&4294967295|N>>>16),N=O+(D^V^R)+U[6]+76029189&4294967295,O=D+(N<<23&4294967295|N>>>9),N=R+(O^D^V)+U[9]+3654602809&4294967295,R=O+(N<<4&4294967295|N>>>28),N=V+(R^O^D)+U[12]+3873151461&4294967295,V=R+(N<<11&4294967295|N>>>21),N=D+(V^R^O)+U[15]+530742520&4294967295,D=V+(N<<16&4294967295|N>>>16),N=O+(D^V^R)+U[2]+3299628645&4294967295,O=D+(N<<23&4294967295|N>>>9),N=R+(D^(O|~V))+U[0]+4096336452&4294967295,R=O+(N<<6&4294967295|N>>>26),N=V+(O^(R|~D))+U[7]+1126891415&4294967295,V=R+(N<<10&4294967295|N>>>22),N=D+(R^(V|~O))+U[14]+2878612391&4294967295,D=V+(N<<15&4294967295|N>>>17),N=O+(V^(D|~R))+U[5]+4237533241&4294967295,O=D+(N<<21&4294967295|N>>>11),N=R+(D^(O|~V))+U[12]+1700485571&4294967295,R=O+(N<<6&4294967295|N>>>26),N=V+(O^(R|~D))+U[3]+2399980690&4294967295,V=R+(N<<10&4294967295|N>>>22),N=D+(R^(V|~O))+U[10]+4293915773&4294967295,D=V+(N<<15&4294967295|N>>>17),N=O+(V^(D|~R))+U[1]+2240044497&4294967295,O=D+(N<<21&4294967295|N>>>11),N=R+(D^(O|~V))+U[8]+1873313359&4294967295,R=O+(N<<6&4294967295|N>>>26),N=V+(O^(R|~D))+U[15]+4264355552&4294967295,V=R+(N<<10&4294967295|N>>>22),N=D+(R^(V|~O))+U[6]+2734768916&4294967295,D=V+(N<<15&4294967295|N>>>17),N=O+(V^(D|~R))+U[13]+1309151649&4294967295,O=D+(N<<21&4294967295|N>>>11),N=R+(D^(O|~V))+U[4]+4149444226&4294967295,R=O+(N<<6&4294967295|N>>>26),N=V+(O^(R|~D))+U[11]+3174756917&4294967295,V=R+(N<<10&4294967295|N>>>22),N=D+(R^(V|~O))+U[2]+718787259&4294967295,D=V+(N<<15&4294967295|N>>>17),N=O+(V^(D|~R))+U[9]+3951481745&4294967295,F.g[0]=F.g[0]+R&4294967295,F.g[1]=F.g[1]+(D+(N<<21&4294967295|N>>>11))&4294967295,F.g[2]=F.g[2]+D&4294967295,F.g[3]=F.g[3]+V&4294967295}o.prototype.v=function(F,R){R===void 0&&(R=F.length);const O=R-this.blockSize,U=this.C;let D=this.h,V=0;for(;V<R;){if(D==0)for(;V<=O;)a(this,F,V),V+=this.blockSize;if(typeof F=="string"){for(;V<R;)if(U[D++]=F.charCodeAt(V++),D==this.blockSize){a(this,U),D=0;break}}else for(;V<R;)if(U[D++]=F[V++],D==this.blockSize){a(this,U),D=0;break}}this.h=D,this.o+=R},o.prototype.A=function(){var F=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);F[0]=128;for(var R=1;R<F.length-8;++R)F[R]=0;R=this.o*8;for(var O=F.length-8;O<F.length;++O)F[O]=R&255,R/=256;for(this.v(F),F=Array(16),R=0,O=0;O<4;++O)for(let U=0;U<32;U+=8)F[R++]=this.g[O]>>>U&255;return F};function c(F,R){var O=_;return Object.prototype.hasOwnProperty.call(O,F)?O[F]:O[F]=R(F)}function p(F,R){this.h=R;const O=[];let U=!0;for(let D=F.length-1;D>=0;D--){const V=F[D]|0;U&&V==R||(O[D]=V,U=!1)}this.g=O}var _={};function x(F){return-128<=F&&F<128?c(F,function(R){return new p([R|0],R<0?-1:0)}):new p([F|0],F<0?-1:0)}function I(F){if(isNaN(F)||!isFinite(F))return k;if(F<0)return Y(I(-F));const R=[];let O=1;for(let U=0;F>=O;U++)R[U]=F/O|0,O*=4294967296;return new p(R,0)}function C(F,R){if(F.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(F.charAt(0)=="-")return Y(C(F.substring(1),R));if(F.indexOf("-")>=0)throw Error('number format error: interior "-" character');const O=I(Math.pow(R,8));let U=k;for(let V=0;V<F.length;V+=8){var D=Math.min(8,F.length-V);const N=parseInt(F.substring(V,V+D),R);D<8?(D=I(Math.pow(R,D)),U=U.j(D).add(I(N))):(U=U.j(O),U=U.add(I(N)))}return U}var k=x(0),b=x(1),q=x(16777216);r=p.prototype,r.m=function(){if(Q(this))return-Y(this).m();let F=0,R=1;for(let O=0;O<this.g.length;O++){const U=this.i(O);F+=(U>=0?U:4294967296+U)*R,R*=4294967296}return F},r.toString=function(F){if(F=F||10,F<2||36<F)throw Error("radix out of range: "+F);if(W(this))return"0";if(Q(this))return"-"+Y(this).toString(F);const R=I(Math.pow(F,6));var O=this;let U="";for(;;){const D=Ce(O,R).g;O=de(O,D.j(R));let V=((O.g.length>0?O.g[0]:O.h)>>>0).toString(F);if(O=D,W(O))return V+U;for(;V.length<6;)V="0"+V;U=V+U}},r.i=function(F){return F<0?0:F<this.g.length?this.g[F]:this.h};function W(F){if(F.h!=0)return!1;for(let R=0;R<F.g.length;R++)if(F.g[R]!=0)return!1;return!0}function Q(F){return F.h==-1}r.l=function(F){return F=de(this,F),Q(F)?-1:W(F)?0:1};function Y(F){const R=F.g.length,O=[];for(let U=0;U<R;U++)O[U]=~F.g[U];return new p(O,~F.h).add(b)}r.abs=function(){return Q(this)?Y(this):this},r.add=function(F){const R=Math.max(this.g.length,F.g.length),O=[];let U=0;for(let D=0;D<=R;D++){let V=U+(this.i(D)&65535)+(F.i(D)&65535),N=(V>>>16)+(this.i(D)>>>16)+(F.i(D)>>>16);U=N>>>16,V&=65535,N&=65535,O[D]=N<<16|V}return new p(O,O[O.length-1]&-2147483648?-1:0)};function de(F,R){return F.add(Y(R))}r.j=function(F){if(W(this)||W(F))return k;if(Q(this))return Q(F)?Y(this).j(Y(F)):Y(Y(this).j(F));if(Q(F))return Y(this.j(Y(F)));if(this.l(q)<0&&F.l(q)<0)return I(this.m()*F.m());const R=this.g.length+F.g.length,O=[];for(var U=0;U<2*R;U++)O[U]=0;for(U=0;U<this.g.length;U++)for(let D=0;D<F.g.length;D++){const V=this.i(U)>>>16,N=this.i(U)&65535,ae=F.i(D)>>>16,Oe=F.i(D)&65535;O[2*U+2*D]+=N*Oe,pe(O,2*U+2*D),O[2*U+2*D+1]+=V*Oe,pe(O,2*U+2*D+1),O[2*U+2*D+1]+=N*ae,pe(O,2*U+2*D+1),O[2*U+2*D+2]+=V*ae,pe(O,2*U+2*D+2)}for(F=0;F<R;F++)O[F]=O[2*F+1]<<16|O[2*F];for(F=R;F<2*R;F++)O[F]=0;return new p(O,0)};function pe(F,R){for(;(F[R]&65535)!=F[R];)F[R+1]+=F[R]>>>16,F[R]&=65535,R++}function Ee(F,R){this.g=F,this.h=R}function Ce(F,R){if(W(R))throw Error("division by zero");if(W(F))return new Ee(k,k);if(Q(F))return R=Ce(Y(F),R),new Ee(Y(R.g),Y(R.h));if(Q(R))return R=Ce(F,Y(R)),new Ee(Y(R.g),R.h);if(F.g.length>30){if(Q(F)||Q(R))throw Error("slowDivide_ only works with positive integers.");for(var O=b,U=R;U.l(F)<=0;)O=Se(O),U=Se(U);var D=Le(O,1),V=Le(U,1);for(U=Le(U,2),O=Le(O,2);!W(U);){var N=V.add(U);N.l(F)<=0&&(D=D.add(O),V=N),U=Le(U,1),O=Le(O,1)}return R=de(F,D.j(R)),new Ee(D,R)}for(D=k;F.l(R)>=0;){for(O=Math.max(1,Math.floor(F.m()/R.m())),U=Math.ceil(Math.log(O)/Math.LN2),U=U<=48?1:Math.pow(2,U-48),V=I(O),N=V.j(R);Q(N)||N.l(F)>0;)O-=U,V=I(O),N=V.j(R);W(V)&&(V=b),D=D.add(V),F=de(F,N)}return new Ee(D,F)}r.B=function(F){return Ce(this,F).h},r.and=function(F){const R=Math.max(this.g.length,F.g.length),O=[];for(let U=0;U<R;U++)O[U]=this.i(U)&F.i(U);return new p(O,this.h&F.h)},r.or=function(F){const R=Math.max(this.g.length,F.g.length),O=[];for(let U=0;U<R;U++)O[U]=this.i(U)|F.i(U);return new p(O,this.h|F.h)},r.xor=function(F){const R=Math.max(this.g.length,F.g.length),O=[];for(let U=0;U<R;U++)O[U]=this.i(U)^F.i(U);return new p(O,this.h^F.h)};function Se(F){const R=F.g.length+1,O=[];for(let U=0;U<R;U++)O[U]=F.i(U)<<1|F.i(U-1)>>>31;return new p(O,F.h)}function Le(F,R){const O=R>>5;R%=32;const U=F.g.length-O,D=[];for(let V=0;V<U;V++)D[V]=R>0?F.i(V+O)>>>R|F.i(V+O+1)<<32-R:F.i(V+O);return new p(D,F.h)}o.prototype.digest=o.prototype.A,o.prototype.reset=o.prototype.u,o.prototype.update=o.prototype.v,$v=o,p.prototype.add=p.prototype.add,p.prototype.multiply=p.prototype.j,p.prototype.modulo=p.prototype.B,p.prototype.compare=p.prototype.l,p.prototype.toNumber=p.prototype.m,p.prototype.toString=p.prototype.toString,p.prototype.getBits=p.prototype.i,p.fromNumber=I,p.fromString=C,ko=p}).apply(typeof z_<"u"?z_:typeof self<"u"?self:typeof window<"u"?window:{});var Yc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Gv,_u,Kv,oh,Wf,Zv,Qv,Yv;(function(){var r,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Yc=="object"&&Yc];for(var w=0;w<h.length;++w){var T=h[w];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var o=t(this);function a(h,w){if(w)e:{var T=o;h=h.split(".");for(var A=0;A<h.length-1;A++){var $=h[A];if(!($ in T))break e;T=T[$]}h=h[h.length-1],A=T[h],w=w(A),w!=A&&w!=null&&e(T,h,{configurable:!0,writable:!0,value:w})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(w){var T=[],A;for(A in w)Object.prototype.hasOwnProperty.call(w,A)&&T.push([A,w[A]]);return T}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},p=this||self;function _(h){var w=typeof h;return w=="object"&&h!=null||w=="function"}function x(h,w,T){return h.call.apply(h.bind,arguments)}function I(h,w,T){return I=x,I.apply(null,arguments)}function C(h,w){var T=Array.prototype.slice.call(arguments,1);return function(){var A=T.slice();return A.push.apply(A,arguments),h.apply(this,A)}}function k(h,w){function T(){}T.prototype=w.prototype,h.Z=w.prototype,h.prototype=new T,h.prototype.constructor=h,h.Ob=function(A,$,J){for(var me=Array(arguments.length-2),He=2;He<arguments.length;He++)me[He-2]=arguments[He];return w.prototype[$].apply(A,me)}}var b=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function q(h){const w=h.length;if(w>0){const T=Array(w);for(let A=0;A<w;A++)T[A]=h[A];return T}return[]}function W(h,w){for(let A=1;A<arguments.length;A++){const $=arguments[A];var T=typeof $;if(T=T!="object"?T:$?Array.isArray($)?"array":T:"null",T=="array"||T=="object"&&typeof $.length=="number"){T=h.length||0;const J=$.length||0;h.length=T+J;for(let me=0;me<J;me++)h[T+me]=$[me]}else h.push($)}}class Q{constructor(w,T){this.i=w,this.j=T,this.h=0,this.g=null}get(){let w;return this.h>0?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function Y(h){p.setTimeout(()=>{throw h},0)}function de(){var h=F;let w=null;return h.g&&(w=h.g,h.g=h.g.next,h.g||(h.h=null),w.next=null),w}class pe{constructor(){this.h=this.g=null}add(w,T){const A=Ee.get();A.set(w,T),this.h?this.h.next=A:this.g=A,this.h=A}}var Ee=new Q(()=>new Ce,h=>h.reset());class Ce{constructor(){this.next=this.g=this.h=null}set(w,T){this.h=w,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let Se,Le=!1,F=new pe,R=()=>{const h=Promise.resolve(void 0);Se=()=>{h.then(O)}};function O(){for(var h;h=de();){try{h.h.call(h.g)}catch(T){Y(T)}var w=Ee;w.j(h),w.h<100&&(w.h++,h.next=w.g,w.g=h)}Le=!1}function U(){this.u=this.u,this.C=this.C}U.prototype.u=!1,U.prototype.dispose=function(){this.u||(this.u=!0,this.N())},U.prototype[Symbol.dispose]=function(){this.dispose()},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(h,w){this.type=h,this.g=this.target=w,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var V=(function(){if(!p.addEventListener||!Object.defineProperty)return!1;var h=!1,w=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const T=()=>{};p.addEventListener("test",T,w),p.removeEventListener("test",T,w)}catch{}return h})();function N(h){return/^[\s\xa0]*$/.test(h)}function ae(h,w){D.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,w)}k(ae,D),ae.prototype.init=function(h,w){const T=this.type=h.type,A=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=w,w=h.relatedTarget,w||(T=="mouseover"?w=h.fromElement:T=="mouseout"&&(w=h.toElement)),this.relatedTarget=w,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&ae.Z.h.call(this)},ae.prototype.h=function(){ae.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Oe="closure_listenable_"+(Math.random()*1e6|0),ge=0;function Fe(h,w,T,A,$){this.listener=h,this.proxy=null,this.src=w,this.type=T,this.capture=!!A,this.ha=$,this.key=++ge,this.da=this.fa=!1}function te(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ke(h,w,T){for(const A in h)w.call(T,h[A],A,h)}function ie(h,w){for(const T in h)w.call(void 0,h[T],T,h)}function B(h){const w={};for(const T in h)w[T]=h[T];return w}const ne="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Me(h,w){let T,A;for(let $=1;$<arguments.length;$++){A=arguments[$];for(T in A)h[T]=A[T];for(let J=0;J<ne.length;J++)T=ne[J],Object.prototype.hasOwnProperty.call(A,T)&&(h[T]=A[T])}}function Ne(h){this.src=h,this.g={},this.h=0}Ne.prototype.add=function(h,w,T,A,$){const J=h.toString();h=this.g[J],h||(h=this.g[J]=[],this.h++);const me=we(h,w,A,$);return me>-1?(w=h[me],T||(w.fa=!1)):(w=new Fe(w,this.src,J,!!A,$),w.fa=T,h.push(w)),w};function Ae(h,w){const T=w.type;if(T in h.g){var A=h.g[T],$=Array.prototype.indexOf.call(A,w,void 0),J;(J=$>=0)&&Array.prototype.splice.call(A,$,1),J&&(te(w),h.g[T].length==0&&(delete h.g[T],h.h--))}}function we(h,w,T,A){for(let $=0;$<h.length;++$){const J=h[$];if(!J.da&&J.listener==w&&J.capture==!!T&&J.ha==A)return $}return-1}var et="closure_lm_"+(Math.random()*1e6|0),Qe={};function mt(h,w,T,A,$){if(Array.isArray(w)){for(let J=0;J<w.length;J++)mt(h,w[J],T,A,$);return null}return T=ci(T),h&&h[Oe]?h.J(w,T,_(A)?!!A.capture:!1,$):Kt(h,w,T,!1,A,$)}function Kt(h,w,T,A,$,J){if(!w)throw Error("Invalid event type");const me=_($)?!!$.capture:!!$;let He=Bi(h);if(He||(h[et]=He=new Ne(h)),T=He.add(w,T,A,me,J),T.proxy)return T;if(A=ui(),T.proxy=A,A.src=h,A.listener=T,h.addEventListener)V||($=me),$===void 0&&($=!1),h.addEventListener(w.toString(),A,$);else if(h.attachEvent)h.attachEvent(Rs(w.toString()),A);else if(h.addListener&&h.removeListener)h.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return T}function ui(){function h(T){return w.call(h.src,h.listener,T)}const w=zo;return h}function Wr(h,w,T,A,$){if(Array.isArray(w))for(var J=0;J<w.length;J++)Wr(h,w[J],T,A,$);else A=_(A)?!!A.capture:!!A,T=ci(T),h&&h[Oe]?(h=h.i,J=String(w).toString(),J in h.g&&(w=h.g[J],T=we(w,T,A,$),T>-1&&(te(w[T]),Array.prototype.splice.call(w,T,1),w.length==0&&(delete h.g[J],h.h--)))):h&&(h=Bi(h))&&(w=h.g[w.toString()],h=-1,w&&(h=we(w,T,A,$)),(T=h>-1?w[h]:null)&&mr(T))}function mr(h){if(typeof h!="number"&&h&&!h.da){var w=h.src;if(w&&w[Oe])Ae(w.i,h);else{var T=h.type,A=h.proxy;w.removeEventListener?w.removeEventListener(T,A,h.capture):w.detachEvent?w.detachEvent(Rs(T),A):w.addListener&&w.removeListener&&w.removeListener(A),(T=Bi(w))?(Ae(T,h),T.h==0&&(T.src=null,w[et]=null)):te(h)}}}function Rs(h){return h in Qe?Qe[h]:Qe[h]="on"+h}function zo(h,w){if(h.da)h=!0;else{w=new ae(w,this);const T=h.listener,A=h.ha||h.src;h.fa&&mr(h),h=T.call(A,w)}return h}function Bi(h){return h=h[et],h instanceof Ne?h:null}var qr="__closure_events_fn_"+(Math.random()*1e9>>>0);function ci(h){return typeof h=="function"?h:(h[qr]||(h[qr]=function(w){return h.handleEvent(w)}),h[qr])}function Dt(){U.call(this),this.i=new Ne(this),this.M=this,this.G=null}k(Dt,U),Dt.prototype[Oe]=!0,Dt.prototype.removeEventListener=function(h,w,T,A){Wr(this,h,w,T,A)};function Pt(h,w){var T,A=h.G;if(A)for(T=[];A;A=A.G)T.push(A);if(h=h.M,A=w.type||w,typeof w=="string")w=new D(w,h);else if(w instanceof D)w.target=w.target||h;else{var $=w;w=new D(A,h),Me(w,$)}$=!0;let J,me;if(T)for(me=T.length-1;me>=0;me--)J=w.g=T[me],$=An(J,A,!0,w)&&$;if(J=w.g=h,$=An(J,A,!0,w)&&$,$=An(J,A,!1,w)&&$,T)for(me=0;me<T.length;me++)J=w.g=T[me],$=An(J,A,!1,w)&&$}Dt.prototype.N=function(){if(Dt.Z.N.call(this),this.i){var h=this.i;for(const w in h.g){const T=h.g[w];for(let A=0;A<T.length;A++)te(T[A]);delete h.g[w],h.h--}}this.G=null},Dt.prototype.J=function(h,w,T,A){return this.i.add(String(h),w,!1,T,A)},Dt.prototype.K=function(h,w,T,A){return this.i.add(String(h),w,!0,T,A)};function An(h,w,T,A){if(w=h.i.g[String(w)],!w)return!0;w=w.concat();let $=!0;for(let J=0;J<w.length;++J){const me=w[J];if(me&&!me.da&&me.capture==T){const He=me.listener,lt=me.ha||me.src;me.fa&&Ae(h.i,me),$=He.call(lt,A)!==!1&&$}}return $&&!A.defaultPrevented}function Ls(h,w){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=I(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(w)>2147483647?-1:p.setTimeout(h,w||0)}function Ds(h){h.g=Ls(()=>{h.g=null,h.i&&(h.i=!1,Ds(h))},h.l);const w=h.h;h.h=null,h.m.apply(null,w)}class Ra extends U{constructor(w,T){super(),this.m=w,this.l=T,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:Ds(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function hi(h){U.call(this),this.h=h,this.g={}}k(hi,U);var Hi=[];function Wi(h){ke(h.g,function(w,T){this.g.hasOwnProperty(T)&&mr(w)},h),h.g={}}hi.prototype.N=function(){hi.Z.N.call(this),Wi(this)},hi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $r=p.JSON.stringify,La=p.JSON.parse,di=class{stringify(h){return p.JSON.stringify(h,void 0)}parse(h){return p.JSON.parse(h,void 0)}};function Gr(){}function Da(){}var Kr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function fi(){D.call(this,"d")}k(fi,D);function Ms(){D.call(this,"c")}k(Ms,D);var rr={},gr=null;function pi(){return gr=gr||new Dt}rr.Ia="serverreachability";function Os(h){D.call(this,rr.Ia,h)}k(Os,D);function _r(h){const w=pi();Pt(w,new Os(w))}rr.STAT_EVENT="statevent";function yr(h,w){D.call(this,rr.STAT_EVENT,h),this.stat=w}k(yr,D);function Tt(h){const w=pi();Pt(w,new yr(w,h))}rr.Ja="timingevent";function Uo(h,w){D.call(this,rr.Ja,h),this.size=w}k(Uo,D);function mi(h,w){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){h()},w)}function gi(){this.g=!0}gi.prototype.ua=function(){this.g=!1};function Ma(h,w,T,A,$,J){h.info(function(){if(h.g)if(J){var me="",He=J.split("&");for(let ht=0;ht<He.length;ht++){var lt=He[ht].split("=");if(lt.length>1){const bt=lt[0];lt=lt[1];const On=bt.split("_");me=On.length>=2&&On[1]=="type"?me+(bt+"="+lt+"&"):me+(bt+"=redacted&")}}}else me=null;else me=J;return"XMLHTTP REQ ("+A+") [attempt "+$+"]: "+w+`
`+T+`
`+me})}function Oa(h,w,T,A,$,J,me){h.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+$+"]: "+w+`
`+T+`
`+J+" "+me})}function vr(h,w,T,A){h.info(function(){return"XMLHTTP TEXT ("+w+"): "+qi(h,T)+(A?" "+A:"")})}function Vs(h,w){h.info(function(){return"TIMEOUT: "+w})}gi.prototype.info=function(){};function qi(h,w){if(!h.g)return w;if(!w)return null;try{const J=JSON.parse(w);if(J){for(h=0;h<J.length;h++)if(Array.isArray(J[h])){var T=J[h];if(!(T.length<2)){var A=T[1];if(Array.isArray(A)&&!(A.length<1)){var $=A[0];if($!="noop"&&$!="stop"&&$!="close")for(let me=1;me<A.length;me++)A[me]=""}}}}return $r(J)}catch{return w}}var _i={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},yi={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Va;function zt(){}k(zt,Gr),zt.prototype.g=function(){return new XMLHttpRequest},Va=new zt;function Ie(h){return encodeURIComponent(String(h))}function $i(h){var w=1;h=h.split(":");const T=[];for(;w>0&&h.length;)T.push(h.shift()),w--;return h.length&&T.push(h.join(":")),T}function bn(h,w,T,A){this.j=h,this.i=w,this.l=T,this.S=A||1,this.V=new hi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Bo}function Bo(){this.i=null,this.g="",this.h=!1}var Ho={},Gi={};function Hn(h,w,T){h.M=1,h.A=ft(an(w)),h.u=T,h.R=!0,wr(h,null)}function wr(h,w){h.F=Date.now(),Ki(h),h.B=an(h.A);var T=h.B,A=h.S;Array.isArray(A)||(A=[String(A)]),ts(T.i,"t",A),h.C=0,T=h.j.L,h.h=new Bo,h.g=Yo(h.j,T?w:null,!h.u),h.P>0&&(h.O=new Ra(I(h.Y,h,h.g),h.P)),w=h.V,T=h.g,A=h.ba;var $="readystatechange";Array.isArray($)||($&&(Hi[0]=$.toString()),$=Hi);for(let J=0;J<$.length;J++){const me=mt(T,$[J],A||w.handleEvent,!1,w.h||w);if(!me)break;w.g[me.key]=me}w=h.J?B(h.J):{},h.u?(h.v||(h.v="POST"),w["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,w)):(h.v="GET",h.g.ea(h.B,h.v,null,w)),_r(),Ma(h.i,h.v,h.B,h.l,h.S,h.u)}bn.prototype.ba=function(h){h=h.target;const w=this.O;w&&Cr(h)==3?w.j():this.Y(h)},bn.prototype.Y=function(h){try{if(h==this.g)e:{const He=Cr(this.g),lt=this.g.ya(),ht=this.g.ca();if(!(He<3)&&(He!=3||this.g&&(this.h.h||this.g.la()||Ko(this.g)))){this.K||He!=4||lt==7||(lt==8||ht<=0?_r(3):_r(2)),Zi(this);var w=this.g.ca();this.X=w;var T=Wo(this);if(this.o=w==200,Oa(this.i,this.v,this.B,this.l,this.S,He,w),this.o){if(this.U&&!this.L){t:{if(this.g){var A,$=this.g;if((A=$.g?$.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(A)){var J=A;break t}}J=null}if(h=J)vr(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,vt(this,h);else{this.o=!1,this.m=3,Tt(12),Wn(this),Qi(this);break e}}if(this.R){h=!0;let bt;for(;!this.K&&this.C<T.length;)if(bt=Fa(this,T),bt==Gi){He==4&&(this.m=4,Tt(14),h=!1),vr(this.i,this.l,null,"[Incomplete Response]");break}else if(bt==Ho){this.m=4,Tt(15),vr(this.i,this.l,T,"[Invalid Chunk]"),h=!1;break}else vr(this.i,this.l,bt,null),vt(this,bt);if(ja(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),He!=4||T.length!=0||this.h.h||(this.m=1,Tt(16),h=!1),this.o=this.o&&h,!h)vr(this.i,this.l,T,"[Invalid Chunked Response]"),Wn(this),Qi(this);else if(T.length>0&&!this.W){this.W=!0;var me=this.j;me.g==this&&me.aa&&!me.P&&(me.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),as(me),me.P=!0,Tt(11))}}else vr(this.i,this.l,T,null),vt(this,T);He==4&&Wn(this),this.o&&!this.K&&(He==4?un(this.j,this):(this.o=!1,Ki(this)))}else is(this.g),w==400&&T.indexOf("Unknown SID")>0?(this.m=3,Tt(12)):(this.m=0,Tt(13)),Wn(this),Qi(this)}}}catch{}finally{}};function Wo(h){if(!ja(h))return h.g.la();const w=Ko(h.g);if(w==="")return"";let T="";const A=w.length,$=Cr(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Wn(h),Qi(h),"";h.h.i=new p.TextDecoder}for(let J=0;J<A;J++)h.h.h=!0,T+=h.h.i.decode(w[J],{stream:!($&&J==A-1)});return w.length=0,h.h.g+=T,h.C=0,h.h.g}function ja(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Fa(h,w){var T=h.C,A=w.indexOf(`
`,T);return A==-1?Gi:(T=Number(w.substring(T,A)),isNaN(T)?Ho:(A+=1,A+T>w.length?Gi:(w=w.slice(A,A+T),h.C=A+T,w)))}bn.prototype.cancel=function(){this.K=!0,Wn(this)};function Ki(h){h.T=Date.now()+h.H,qo(h,h.H)}function qo(h,w){if(h.D!=null)throw Error("WatchDog timer not null");h.D=mi(I(h.aa,h),w)}function Zi(h){h.D&&(p.clearTimeout(h.D),h.D=null)}bn.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Vs(this.i,this.B),this.M!=2&&(_r(),Tt(17)),Wn(this),this.m=2,Qi(this)):qo(this,this.T-h)};function Qi(h){h.j.I==0||h.K||un(h.j,h)}function Wn(h){Zi(h);var w=h.O;w&&typeof w.dispose=="function"&&w.dispose(),h.O=null,Wi(h.V),h.g&&(w=h.g,h.g=null,w.abort(),w.dispose())}function vt(h,w){try{var T=h.j;if(T.I!=0&&(T.g==h||Ji(T.h,h))){if(!h.L&&Ji(T.h,h)&&T.I==3){try{var A=T.Ba.g.parse(w)}catch{A=null}if(Array.isArray(A)&&A.length==3){var $=A;if($[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<h.F)Us(T),Dn(T);else break e;Ar(T),Tt(18)}}else T.xa=$[1],0<T.xa-T.K&&$[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=mi(I(T.Va,T),6e3));Yi(T.h)<=1&&T.ta&&(T.ta=void 0)}else yn(T,11)}else if((h.L||T.g==h)&&Us(T),!N(w))for($=T.Ba.g.parse(w),w=0;w<$.length;w++){let ht=$[w];const bt=ht[0];if(!(bt<=T.K))if(T.K=bt,ht=ht[1],T.I==2)if(ht[0]=="c"){T.M=ht[1],T.ba=ht[2];const On=ht[3];On!=null&&(T.ka=On,T.j.info("VER="+T.ka));const or=ht[4];or!=null&&(T.za=or,T.j.info("SVER="+T.za));const Kn=ht[5];Kn!=null&&typeof Kn=="number"&&Kn>0&&(A=1.5*Kn,T.O=A,T.j.info("backChannelRequestTimeoutMs_="+A)),A=T;const Nr=h.g;if(Nr){const $s=Nr.g?Nr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($s){var J=A.h;J.g||$s.indexOf("spdy")==-1&&$s.indexOf("quic")==-1&&$s.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(xr(J,J.h),J.h=null))}if(A.G){const Gs=Nr.g?Nr.g.getResponseHeader("X-HTTP-Session-Id"):null;Gs&&(A.wa=Gs,ve(A.J,A.G,Gs))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-h.F,T.j.info("Handshake RTT: "+T.T+"ms")),A=T;var me=h;if(A.na=Hs(A,A.L?A.ba:null,A.W),me.L){vi(A.h,me);var He=me,lt=A.O;lt&&(He.H=lt),He.D&&(Zi(He),Ki(He)),A.g=me}else Zt(A);T.i.length>0&&Mn(T)}else ht[0]!="stop"&&ht[0]!="close"||yn(T,7);else T.I==3&&(ht[0]=="stop"||ht[0]=="close"?ht[0]=="stop"?yn(T,7):Xe(T):ht[0]!="noop"&&T.l&&T.l.qa(ht),T.A=0)}}_r(4)}catch{}}var zl=class{constructor(h,w){this.g=h,this.map=w}};function js(h){this.l=h||10,p.PerformanceNavigationTiming?(h=p.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function $o(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Yi(h){return h.h?1:h.g?h.g.size:0}function Ji(h,w){return h.h?h.h==w:h.g?h.g.has(w):!1}function xr(h,w){h.g?h.g.add(w):h.h=w}function vi(h,w){h.h&&h.h==w?h.h=null:h.g&&h.g.has(w)&&h.g.delete(w)}js.prototype.cancel=function(){if(this.i=mn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function mn(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let w=h.i;for(const T of h.g.values())w=w.concat(T.G);return w}return q(h.i)}var wi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ge(h,w){if(h){h=h.split("&");for(let T=0;T<h.length;T++){const A=h[T].indexOf("=");let $,J=null;A>=0?($=h[T].substring(0,A),J=h[T].substring(A+1)):$=h[T],w($,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function at(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let w;h instanceof at?(this.l=h.l,qn(this,h.j),this.o=h.o,this.g=h.g,ln(this,h.u),this.h=h.h,Er(this,Ei(h.i)),this.m=h.m):h&&(w=String(h).match(wi))?(this.l=!1,qn(this,w[1]||"",!0),this.o=Zr(w[2]||""),this.g=Zr(w[3]||"",!0),ln(this,w[4]),this.h=Zr(w[5]||"",!0),Er(this,w[6]||"",!0),this.m=Zr(w[7]||"")):(this.l=!1,this.i=new Je(null,this.l))}at.prototype.toString=function(){const h=[];var w=this.j;w&&h.push(Tr(w,Go,!0),":");var T=this.g;return(T||w=="file")&&(h.push("//"),(w=this.o)&&h.push(Tr(w,Go,!0),"@"),h.push(Ie(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&h.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&h.push("/"),h.push(Tr(T,T.charAt(0)=="/"?Nn:xi,!0))),(T=this.i.toString())&&h.push("?",T),(T=this.m)&&h.push("#",Tr(T,ir)),h.join("")},at.prototype.resolve=function(h){const w=an(this);let T=!!h.j;T?qn(w,h.j):T=!!h.o,T?w.o=h.o:T=!!h.g,T?w.g=h.g:T=h.u!=null;var A=h.h;if(T)ln(w,h.u);else if(T=!!h.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var $=w.h.lastIndexOf("/");$!=-1&&(A=w.h.slice(0,$+1)+A)}if($=A,$==".."||$==".")A="";else if($.indexOf("./")!=-1||$.indexOf("/.")!=-1){A=$.lastIndexOf("/",0)==0,$=$.split("/");const J=[];for(let me=0;me<$.length;){const He=$[me++];He=="."?A&&me==$.length&&J.push(""):He==".."?((J.length>1||J.length==1&&J[0]!="")&&J.pop(),A&&me==$.length&&J.push("")):(J.push(He),A=!0)}A=J.join("/")}else A=$}return T?w.h=A:T=h.i.toString()!=="",T?Er(w,Ei(h.i)):T=!!h.m,T&&(w.m=h.m),w};function an(h){return new at(h)}function qn(h,w,T){h.j=T?Zr(w,!0):w,h.j&&(h.j=h.j.replace(/:$/,""))}function ln(h,w){if(w){if(w=Number(w),isNaN(w)||w<0)throw Error("Bad port number "+w);h.u=w}else h.u=null}function Er(h,w,T){w instanceof Je?(h.i=w,Ti(h.i,h.l)):(T||(w=Tr(w,Ct)),h.i=new Je(w,h.l))}function ve(h,w,T){h.i.set(w,T)}function ft(h){return ve(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Zr(h,w){return h?w?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Tr(h,w,T){return typeof h=="string"?(h=encodeURI(h).replace(w,en),T&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function en(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Go=/[#\/\?@]/g,xi=/[#\?:]/g,Nn=/[#\?]/g,Ct=/[#\?@]/g,ir=/#/g;function Je(h,w){this.h=this.g=null,this.i=h||null,this.j=!!w}function gn(h){h.g||(h.g=new Map,h.h=0,h.i&&Ge(h.i,function(w,T){h.add(decodeURIComponent(w.replace(/\+/g," ")),T)}))}r=Je.prototype,r.add=function(h,w){gn(this),this.i=null,h=$n(this,h);let T=this.g.get(h);return T||this.g.set(h,T=[]),T.push(w),this.h+=1,this};function Xi(h,w){gn(h),w=$n(h,w),h.g.has(w)&&(h.i=null,h.h-=h.g.get(w).length,h.g.delete(w))}function Ir(h,w){return gn(h),w=$n(h,w),h.g.has(w)}r.forEach=function(h,w){gn(this),this.g.forEach(function(T,A){T.forEach(function($){h.call(w,$,A,this)},this)},this)};function es(h,w){gn(h);let T=[];if(typeof w=="string")Ir(h,w)&&(T=T.concat(h.g.get($n(h,w))));else for(h=Array.from(h.g.values()),w=0;w<h.length;w++)T=T.concat(h[w]);return T}r.set=function(h,w){return gn(this),this.i=null,h=$n(this,h),Ir(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[w]),this.h+=1,this},r.get=function(h,w){return h?(h=es(this,h),h.length>0?String(h[0]):w):w};function ts(h,w,T){Xi(h,w),T.length>0&&(h.i=null,h.g.set($n(h,w),q(T)),h.h+=T.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],w=Array.from(this.g.keys());for(let A=0;A<w.length;A++){var T=w[A];const $=Ie(T);T=es(this,T);for(let J=0;J<T.length;J++){let me=$;T[J]!==""&&(me+="="+Ie(T[J])),h.push(me)}}return this.i=h.join("&")};function Ei(h){const w=new Je;return w.i=h.i,h.g&&(w.g=new Map(h.g),w.h=h.h),w}function $n(h,w){return w=String(w),h.j&&(w=w.toLowerCase()),w}function Ti(h,w){w&&!h.j&&(gn(h),h.i=null,h.g.forEach(function(T,A){const $=A.toLowerCase();A!=$&&(Xi(this,A),ts(this,$,T))},h)),h.j=w}function Rn(h,w){const T=new gi;if(p.Image){const A=new Image;A.onload=C(Ot,T,"TestLoadImage: loaded",!0,w,A),A.onerror=C(Ot,T,"TestLoadImage: error",!1,w,A),A.onabort=C(Ot,T,"TestLoadImage: abort",!1,w,A),A.ontimeout=C(Ot,T,"TestLoadImage: timeout",!1,w,A),p.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=h}else w(!1)}function sr(h,w){const T=new gi,A=new AbortController,$=setTimeout(()=>{A.abort(),Ot(T,"TestPingServer: timeout",!1,w)},1e4);fetch(h,{signal:A.signal}).then(J=>{clearTimeout($),J.ok?Ot(T,"TestPingServer: ok",!0,w):Ot(T,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout($),Ot(T,"TestPingServer: error",!1,w)})}function Ot(h,w,T,A,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),A(T)}catch{}}function ns(){this.g=new di}function ze(h){this.i=h.Sb||null,this.h=h.ab||!1}k(ze,Gr),ze.prototype.g=function(){return new kt(this.i,this.h)};function kt(h,w){Dt.call(this),this.H=h,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}k(kt,Dt),r=kt.prototype,r.open=function(h,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=w,this.readyState=1,Ln(this)},r.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const w={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(w.body=h),(this.H||p).fetch(new Request(this.D,w)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Qr(this)),this.readyState=0},r.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Ln(this)),this.g&&(this.readyState=3,Ln(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof p.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;pt(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function pt(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}r.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var w=h.value?h.value:new Uint8Array(0);(w=this.B.decode(w,{stream:!h.done}))&&(this.response=this.responseText+=w)}h.done?Qr(this):Ln(this),this.readyState==3&&pt(this)}},r.Oa=function(h){this.g&&(this.response=this.responseText=h,Qr(this))},r.Na=function(h){this.g&&(this.response=h,Qr(this))},r.ga=function(){this.g&&Qr(this)};function Qr(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Ln(h)}r.setRequestHeader=function(h,w){this.A.append(h,w)},r.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],w=this.h.entries();for(var T=w.next();!T.done;)T=T.value,h.push(T[0]+": "+T[1]),T=w.next();return h.join(`\r
`)};function Ln(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(kt.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Fs(h){let w="";return ke(h,function(T,A){w+=A,w+=":",w+=T,w+=`\r
`}),w}function Ii(h,w,T){e:{for(A in T){var A=!1;break e}A=!0}A||(T=Fs(T),typeof h=="string"?T!=null&&Ie(T):ve(h,w,T))}function ot(h){Dt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}k(ot,Dt);var zs=/^https?$/i,rs=["POST","PUT"];r=ot.prototype,r.Fa=function(h){this.H=h},r.ea=function(h,w,T,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);w=w?w.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Va.g(),this.g.onreadystatechange=b(I(this.Ca,this));try{this.B=!0,this.g.open(w,String(h),!0),this.B=!1}catch(J){wt(this,J);return}if(h=T||"",T=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var $ in A)T.set($,A[$]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const J of A.keys())T.set(J,A.get(J));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(T.keys()).find(J=>J.toLowerCase()=="content-type"),$=p.FormData&&h instanceof p.FormData,!(Array.prototype.indexOf.call(rs,w,void 0)>=0)||A||$||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,me]of T)this.g.setRequestHeader(J,me);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(J){wt(this,J)}};function wt(h,w){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=w,h.o=5,_n(h),Pr(h)}function _n(h){h.A||(h.A=!0,Pt(h,"complete"),Pt(h,"error"))}r.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Pt(this,"complete"),Pt(this,"abort"),Pr(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Pr(this,!0)),ot.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Sr(this):this.Xa())},r.Xa=function(){Sr(this)};function Sr(h){if(h.h&&typeof c<"u"){if(h.v&&Cr(h)==4)setTimeout(h.Ca.bind(h),0);else if(Pt(h,"readystatechange"),Cr(h)==4){h.h=!1;try{const J=h.ca();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var T;if(!(T=w)){var A;if(A=J===0){let me=String(h.D).match(wi)[1]||null;!me&&p.self&&p.self.location&&(me=p.self.location.protocol.slice(0,-1)),A=!zs.test(me?me.toLowerCase():"")}T=A}if(T)Pt(h,"complete"),Pt(h,"success");else{h.o=6;try{var $=Cr(h)>2?h.g.statusText:""}catch{$=""}h.l=$+" ["+h.ca()+"]",_n(h)}}finally{Pr(h)}}}}function Pr(h,w){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const T=h.g;h.g=null,w||Pt(h,"ready");try{T.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Cr(h){return h.g?h.g.readyState:0}r.ca=function(){try{return Cr(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(h){if(this.g){var w=this.g.responseText;return h&&w.indexOf(h)==0&&(w=w.substring(h.length)),La(w)}};function Ko(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function is(h){const w={};h=(h.g&&Cr(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<h.length;A++){if(N(h[A]))continue;var T=$i(h[A]);const $=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const J=w[$]||[];w[$]=J,J.push(T)}ie(w,function(A){return A.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function kr(h,w,T){return T&&T.internalChannelParams&&T.internalChannelParams[h]||w}function ss(h){this.za=0,this.i=[],this.j=new gi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=kr("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=kr("baseRetryDelayMs",5e3,h),this.Za=kr("retryDelaySeedMs",1e4,h),this.Ta=kr("forwardChannelMaxRetries",2,h),this.va=kr("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new js(h&&h.concurrentRequestLimit),this.Ba=new ns,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=ss.prototype,r.ka=8,r.I=1,r.connect=function(h,w,T,A){Tt(0),this.W=h,this.H=w||{},T&&A!==void 0&&(this.H.OSID=T,this.H.OAID=A),this.F=this.X,this.J=Hs(this,null,this.W),Mn(this)};function Xe(h){if(tn(h),h.I==3){var w=h.V++,T=an(h.J);if(ve(T,"SID",h.M),ve(T,"RID",w),ve(T,"TYPE","terminate"),Gn(h,T),w=new bn(h,h.j,w),w.M=2,w.A=ft(an(T)),T=!1,p.navigator&&p.navigator.sendBeacon)try{T=p.navigator.sendBeacon(w.A.toString(),"")}catch{}!T&&p.Image&&(new Image().src=w.A,T=!0),T||(w.g=Yo(w.j,null),w.g.ea(w.A)),w.F=Date.now(),Ki(w)}vn(h)}function Dn(h){h.g&&(as(h),h.g.cancel(),h.g=null)}function tn(h){Dn(h),h.v&&(p.clearTimeout(h.v),h.v=null),Us(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&p.clearTimeout(h.m),h.m=null)}function Mn(h){if(!$o(h.h)&&!h.m){h.m=!0;var w=h.Ea;Se||R(),Le||(Se(),Le=!0),F.add(w,h),h.D=0}}function Zo(h,w){return Yi(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=w.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=mi(I(h.Ea,h,w),Bs(h,h.D)),h.D++,!0)}r.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const $=new bn(this,this.j,h);let J=this.o;if(this.U&&(J?(J=B(J),Me(J,this.U)):J=this.U),this.u!==null||this.R||($.J=J,J=null),this.S)e:{for(var w=0,T=0;T<this.i.length;T++){t:{var A=this.i[T];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(w+=A,w>4096){w=T;break e}if(w===4096||T===this.i.length-1){w=T+1;break e}}w=1e3}else w=1e3;w=Qo(this,$,w),T=an(this.J),ve(T,"RID",h),ve(T,"CVER",22),this.G&&ve(T,"X-HTTP-Session-Id",this.G),Gn(this,T),J&&(this.R?w="headers="+Ie(Fs(J))+"&"+w:this.u&&Ii(T,this.u,J)),xr(this.h,$),this.Ra&&ve(T,"TYPE","init"),this.S?(ve(T,"$req",w),ve(T,"SID","null"),$.U=!0,Hn($,T,null)):Hn($,T,w),this.I=2}}else this.I==3&&(h?os(this,h):this.i.length==0||$o(this.h)||os(this))};function os(h,w){var T;w?T=w.l:T=h.V++;const A=an(h.J);ve(A,"SID",h.M),ve(A,"RID",T),ve(A,"AID",h.K),Gn(h,A),h.u&&h.o&&Ii(A,h.u,h.o),T=new bn(h,h.j,T,h.D+1),h.u===null&&(T.J=h.o),w&&(h.i=w.G.concat(h.i)),w=Qo(h,T,1e3),T.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),xr(h.h,T),Hn(T,A,w)}function Gn(h,w){h.H&&ke(h.H,function(T,A){ve(w,A,T)}),h.l&&ke({},function(T,A){ve(w,A,T)})}function Qo(h,w,T){T=Math.min(h.i.length,T);const A=h.l?I(h.l.Ka,h.l,h):null;e:{var $=h.i;let He=-1;for(;;){const lt=["count="+T];He==-1?T>0?(He=$[0].g,lt.push("ofs="+He)):He=0:lt.push("ofs="+He);let ht=!0;for(let bt=0;bt<T;bt++){var J=$[bt].g;const On=$[bt].map;if(J-=He,J<0)He=Math.max(0,$[bt].g-100),ht=!1;else try{J="req"+J+"_"||"";try{var me=On instanceof Map?On:Object.entries(On);for(const[or,Kn]of me){let Nr=Kn;_(Kn)&&(Nr=$r(Kn)),lt.push(J+or+"="+encodeURIComponent(Nr))}}catch(or){throw lt.push(J+"type="+encodeURIComponent("_badmap")),or}}catch{A&&A(On)}}if(ht){me=lt.join("&");break e}}me=void 0}return h=h.i.splice(0,T),w.G=h,me}function Zt(h){if(!h.g&&!h.v){h.Y=1;var w=h.Da;Se||R(),Le||(Se(),Le=!0),F.add(w,h),h.A=0}}function Ar(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=mi(I(h.Da,h),Bs(h,h.A)),h.A++,!0)}r.Da=function(){if(this.v=null,br(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=mi(I(this.Wa,this),h)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Tt(10),Dn(this),br(this))};function as(h){h.B!=null&&(p.clearTimeout(h.B),h.B=null)}function br(h){h.g=new bn(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var w=an(h.na);ve(w,"RID","rpc"),ve(w,"SID",h.M),ve(w,"AID",h.K),ve(w,"CI",h.F?"0":"1"),!h.F&&h.ia&&ve(w,"TO",h.ia),ve(w,"TYPE","xmlhttp"),Gn(h,w),h.u&&h.o&&Ii(w,h.u,h.o),h.O&&(h.g.H=h.O);var T=h.g;h=h.ba,T.M=1,T.A=ft(an(w)),T.u=null,T.R=!0,wr(T,h)}r.Va=function(){this.C!=null&&(this.C=null,Dn(this),Ar(this),Tt(19))};function Us(h){h.C!=null&&(p.clearTimeout(h.C),h.C=null)}function un(h,w){var T=null;if(h.g==w){Us(h),as(h),h.g=null;var A=2}else if(Ji(h.h,w))T=w.G,vi(h.h,w),A=1;else return;if(h.I!=0){if(w.o)if(A==1){T=w.u?w.u.length:0,w=Date.now()-w.F;var $=h.D;A=pi(),Pt(A,new Uo(A,T)),Mn(h)}else Zt(h);else if($=w.m,$==3||$==0&&w.X>0||!(A==1&&Zo(h,w)||A==2&&Ar(h)))switch(T&&T.length>0&&(w=h.h,w.i=w.i.concat(T)),$){case 1:yn(h,5);break;case 4:yn(h,10);break;case 3:yn(h,6);break;default:yn(h,2)}}}function Bs(h,w){let T=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(T*=2),T*w}function yn(h,w){if(h.j.info("Error code "+w),w==2){var T=I(h.bb,h),A=h.Ua;const $=!A;A=new at(A||"//www.google.com/images/cleardot.gif"),p.location&&p.location.protocol=="http"||qn(A,"https"),ft(A),$?Rn(A.toString(),T):sr(A.toString(),T)}else Tt(2);h.I=0,h.l&&h.l.pa(w),vn(h),tn(h)}r.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Tt(2)):(this.j.info("Failed to ping google.com"),Tt(1))};function vn(h){if(h.I=0,h.ja=[],h.l){const w=mn(h.h);(w.length!=0||h.i.length!=0)&&(W(h.ja,w),W(h.ja,h.i),h.h.i.length=0,q(h.i),h.i.length=0),h.l.oa()}}function Hs(h,w,T){var A=T instanceof at?an(T):new at(T);if(A.g!="")w&&(A.g=w+"."+A.g),ln(A,A.u);else{var $=p.location;A=$.protocol,w=w?w+"."+$.hostname:$.hostname,$=+$.port;const J=new at(null);A&&qn(J,A),w&&(J.g=w),$&&ln(J,$),T&&(J.h=T),A=J}return T=h.G,w=h.wa,T&&w&&ve(A,T,w),ve(A,"VER",h.ka),Gn(h,A),A}function Yo(h,w,T){if(w&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return w=h.Aa&&!h.ma?new ot(new ze({ab:T})):new ot(h.ma),w.Fa(h.L),w}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ws(){}r=Ws.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function qs(){}qs.prototype.g=function(h,w){return new Ut(h,w)};function Ut(h,w){Dt.call(this),this.g=new ss(w),this.l=h,this.h=w&&w.messageUrlParams||null,h=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(h?h["X-WebChannel-Content-Type"]=w.messageContentType:h={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.sa&&(h?h["X-WebChannel-Client-Profile"]=w.sa:h={"X-WebChannel-Client-Profile":w.sa}),this.g.U=h,(h=w&&w.Qb)&&!N(h)&&(this.g.u=h),this.A=w&&w.supportsCrossDomainXhr||!1,this.v=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!N(w)&&(this.g.G=w,h=this.h,h!==null&&w in h&&(h=this.h,w in h&&delete h[w])),this.j=new Si(this)}k(Ut,Dt),Ut.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ut.prototype.close=function(){Xe(this.g)},Ut.prototype.o=function(h){var w=this.g;if(typeof h=="string"){var T={};T.__data__=h,h=T}else this.v&&(T={},T.__data__=$r(h),h=T);w.i.push(new zl(w.Ya++,h)),w.I==3&&Mn(w)},Ut.prototype.N=function(){this.g.l=null,delete this.j,Xe(this.g),delete this.g,Ut.Z.N.call(this)};function Jo(h){fi.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var w=h.__sm__;if(w){e:{for(const T in w){h=T;break e}h=void 0}(this.i=h)&&(h=this.i,w=w!==null&&h in w?w[h]:void 0),this.data=w}else this.data=h}k(Jo,fi);function za(){Ms.call(this),this.status=1}k(za,Ms);function Si(h){this.g=h}k(Si,Ws),Si.prototype.ra=function(){Pt(this.g,"a")},Si.prototype.qa=function(h){Pt(this.g,new Jo(h))},Si.prototype.pa=function(h){Pt(this.g,new za)},Si.prototype.oa=function(){Pt(this.g,"b")},qs.prototype.createWebChannel=qs.prototype.g,Ut.prototype.send=Ut.prototype.o,Ut.prototype.open=Ut.prototype.m,Ut.prototype.close=Ut.prototype.close,Yv=function(){return new qs},Qv=function(){return pi()},Zv=rr,Wf={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},_i.NO_ERROR=0,_i.TIMEOUT=8,_i.HTTP_ERROR=6,oh=_i,yi.COMPLETE="complete",Kv=yi,Da.EventType=Kr,Kr.OPEN="a",Kr.CLOSE="b",Kr.ERROR="c",Kr.MESSAGE="d",Dt.prototype.listen=Dt.prototype.J,_u=Da,ot.prototype.listenOnce=ot.prototype.K,ot.prototype.getLastError=ot.prototype.Ha,ot.prototype.getLastErrorCode=ot.prototype.ya,ot.prototype.getStatus=ot.prototype.ca,ot.prototype.getResponseJson=ot.prototype.La,ot.prototype.getResponseText=ot.prototype.la,ot.prototype.send=ot.prototype.ea,ot.prototype.setWithCredentials=ot.prototype.Fa,Gv=ot}).apply(typeof Yc<"u"?Yc:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Pn.UNAUTHENTICATED=new Pn(null),Pn.GOOGLE_CREDENTIALS=new Pn("google-credentials-uid"),Pn.FIRST_PARTY=new Pn("first-party-uid"),Pn.MOCK_USER=new Pn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ll="12.9.0";function eS(r){Ll=r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ta=new cp("@firebase/firestore");function dl(){return Ta.logLevel}function Te(r,...e){if(Ta.logLevel<=rt.DEBUG){const t=e.map(Pp);Ta.debug(`Firestore (${Ll}): ${r}`,...t)}}function ks(r,...e){if(Ta.logLevel<=rt.ERROR){const t=e.map(Pp);Ta.error(`Firestore (${Ll}): ${r}`,...t)}}function Ia(r,...e){if(Ta.logLevel<=rt.WARN){const t=e.map(Pp);Ta.warn(`Firestore (${Ll}): ${r}`,...t)}}function Pp(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qe(r,e,t){let o="Unexpected state";typeof e=="string"?o=e:t=e,Jv(r,o,t)}function Jv(r,e,t){let o=`FIRESTORE (${Ll}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{o+=" CONTEXT: "+JSON.stringify(t)}catch{o+=" CONTEXT: "+t}throw ks(o),new Error(o)}function _t(r,e,t,o){let a="Unexpected state";typeof t=="string"?a=t:o=t,r||Jv(e,a,o)}function Ze(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _e extends Ns{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class tS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Pn.UNAUTHENTICATED)))}shutdown(){}}class nS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class rS{constructor(e){this.t=e,this.currentUser=Pn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){_t(this.o===void 0,42304);let o=this.i;const a=x=>this.i!==o?(o=this.i,t(x)):Promise.resolve();let c=new Ss;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Ss,e.enqueueRetryable((()=>a(this.currentUser)))};const p=()=>{const x=c;e.enqueueRetryable((async()=>{await x.promise,await a(this.currentUser)}))},_=x=>{Te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=x,this.o&&(this.auth.addAuthTokenListener(this.o),p())};this.t.onInit((x=>_(x))),setTimeout((()=>{if(!this.auth){const x=this.t.getImmediate({optional:!0});x?_(x):(Te("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Ss)}}),0),p()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((o=>this.i!==e?(Te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(_t(typeof o.accessToken=="string",31837,{l:o}),new Xv(o.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return _t(e===null||typeof e=="string",2055,{h:e}),new Pn(e)}}class iS{constructor(e,t,o){this.P=e,this.T=t,this.I=o,this.type="FirstParty",this.user=Pn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class sS{constructor(e,t,o){this.P=e,this.T=t,this.I=o}getToken(){return Promise.resolve(new iS(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Pn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class U_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class oS{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Br(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){_t(this.o===void 0,3512);const o=c=>{c.error!=null&&Te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const p=c.token!==this.m;return this.m=c.token,Te("FirebaseAppCheckTokenProvider",`Received ${p?"new":"existing"} token.`),p?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>o(c)))};const a=c=>{Te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>a(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?a(c):Te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new U_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(_t(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new U_(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aS(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let o=0;o<r;o++)t[o]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let o="";for(;o.length<20;){const a=aS(40);for(let c=0;c<a.length;++c)o.length<20&&a[c]<t&&(o+=e.charAt(a[c]%62))}return o}}function it(r,e){return r<e?-1:r>e?1:0}function qf(r,e){const t=Math.min(r.length,e.length);for(let o=0;o<t;o++){const a=r.charAt(o),c=e.charAt(o);if(a!==c)return Sf(a)===Sf(c)?it(a,c):Sf(a)?1:-1}return it(r.length,e.length)}const lS=55296,uS=57343;function Sf(r){const e=r.charCodeAt(0);return e>=lS&&e<=uS}function Sl(r,e,t){return r.length===e.length&&r.every(((o,a)=>t(o,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B_="__name__";class Mi{constructor(e,t,o){t===void 0?t=0:t>e.length&&qe(637,{offset:t,range:e.length}),o===void 0?o=e.length-t:o>e.length-t&&qe(1746,{length:o,range:e.length-t}),this.segments=e,this.offset=t,this.len=o}get length(){return this.len}isEqual(e){return Mi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Mi?e.forEach((o=>{t.push(o)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,o=this.limit();t<o;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const o=Math.min(e.length,t.length);for(let a=0;a<o;a++){const c=Mi.compareSegments(e.get(a),t.get(a));if(c!==0)return c}return it(e.length,t.length)}static compareSegments(e,t){const o=Mi.isNumericId(e),a=Mi.isNumericId(t);return o&&!a?-1:!o&&a?1:o&&a?Mi.extractNumericId(e).compare(Mi.extractNumericId(t)):qf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ko.fromString(e.substring(4,e.length-2))}}class Et extends Mi{construct(e,t,o){return new Et(e,t,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const o of e){if(o.indexOf("//")>=0)throw new _e(re.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);t.push(...o.split("/").filter((a=>a.length>0)))}return new Et(t)}static emptyPath(){return new Et([])}}const cS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fn extends Mi{construct(e,t,o){return new fn(e,t,o)}static isValidIdentifier(e){return cS.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===B_}static keyField(){return new fn([B_])}static fromServerFormat(e){const t=[];let o="",a=0;const c=()=>{if(o.length===0)throw new _e(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(o),o=""};let p=!1;for(;a<e.length;){const _=e[a];if(_==="\\"){if(a+1===e.length)throw new _e(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const x=e[a+1];if(x!=="\\"&&x!=="."&&x!=="`")throw new _e(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=x,a+=2}else _==="`"?(p=!p,a++):_!=="."||p?(o+=_,a++):(c(),a++)}if(c(),p)throw new _e(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new fn(t)}static emptyPath(){return new fn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e){this.path=e}static fromPath(e){return new Ve(Et.fromString(e))}static fromName(e){return new Ve(Et.fromString(e).popFirst(5))}static empty(){return new Ve(Et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Et.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ve(new Et(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e0(r,e,t){if(!t)throw new _e(re.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function hS(r,e,t,o){if(e===!0&&o===!0)throw new _e(re.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function H_(r){if(!Ve.isDocumentKey(r))throw new _e(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function W_(r){if(Ve.isDocumentKey(r))throw new _e(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function t0(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function zh(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(o){return o.constructor?o.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":qe(12329,{type:typeof r})}function As(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new _e(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=zh(r);throw new _e(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $t(r,e){const t={typeString:r};return e&&(t.value=e),t}function Wu(r,e){if(!t0(r))throw new _e(re.INVALID_ARGUMENT,"JSON must be an object");let t;for(const o in e)if(e[o]){const a=e[o].typeString,c="value"in e[o]?{value:e[o].value}:void 0;if(!(o in r)){t=`JSON missing required field: '${o}'`;break}const p=r[o];if(a&&typeof p!==a){t=`JSON field '${o}' must be a ${a}.`;break}if(c!==void 0&&p!==c.value){t=`Expected '${o}' field to equal '${c.value}'`;break}}if(t)throw new _e(re.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q_=-62135596800,$_=1e6;class St{static now(){return St.fromMillis(Date.now())}static fromDate(e){return St.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),o=Math.floor((e-1e3*t)*$_);return new St(t,o)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new _e(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new _e(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<q_)throw new _e(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _e(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/$_}_compareTo(e){return this.seconds===e.seconds?it(this.nanoseconds,e.nanoseconds):it(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:St._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Wu(e,St._jsonSchema))return new St(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-q_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}St._jsonSchemaVersion="firestore/timestamp/1.0",St._jsonSchema={type:$t("string",St._jsonSchemaVersion),seconds:$t("number"),nanoseconds:$t("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{static fromTimestamp(e){return new Ke(e)}static min(){return new Ke(new St(0,0))}static max(){return new Ke(new St(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nu=-1;function dS(r,e){const t=r.toTimestamp().seconds,o=r.toTimestamp().nanoseconds+1,a=Ke.fromTimestamp(o===1e9?new St(t+1,0):new St(t,o));return new bo(a,Ve.empty(),e)}function fS(r){return new bo(r.readTime,r.key,Nu)}class bo{constructor(e,t,o){this.readTime=e,this.documentKey=t,this.largestBatchId=o}static min(){return new bo(Ke.min(),Ve.empty(),Nu)}static max(){return new bo(Ke.max(),Ve.empty(),Nu)}}function pS(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=Ve.comparator(r.documentKey,e.documentKey),t!==0?t:it(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dl(r){if(r.code!==re.FAILED_PRECONDITION||r.message!==mS)throw r;Te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&qe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se(((o,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(o,a)},this.catchCallback=c=>{this.wrapFailure(t,c).next(o,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):se.reject(t)}static resolve(e){return new se(((t,o)=>{t(e)}))}static reject(e){return new se(((t,o)=>{o(e)}))}static waitFor(e){return new se(((t,o)=>{let a=0,c=0,p=!1;e.forEach((_=>{++a,_.next((()=>{++c,p&&c===a&&t()}),(x=>o(x)))})),p=!0,c===a&&t()}))}static or(e){let t=se.resolve(!1);for(const o of e)t=t.next((a=>a?se.resolve(a):o()));return t}static forEach(e,t){const o=[];return e.forEach(((a,c)=>{o.push(t.call(this,a,c))})),this.waitFor(o)}static mapArray(e,t){return new se(((o,a)=>{const c=e.length,p=new Array(c);let _=0;for(let x=0;x<c;x++){const I=x;t(e[I]).next((C=>{p[I]=C,++_,_===c&&o(p)}),(C=>a(C)))}}))}static doWhile(e,t){return new se(((o,a)=>{const c=()=>{e()===!0?t().next((()=>{c()}),a):o()};c()}))}}function _S(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ml(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=o=>this.ae(o),this.ue=o=>t.writeSequenceNumber(o))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Uh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kp=-1;function Bh(r){return r==null}function xh(r){return r===0&&1/r==-1/0}function yS(r){return typeof r=="number"&&Number.isInteger(r)&&!xh(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n0="";function vS(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=G_(e)),e=wS(r.get(t),e);return G_(e)}function wS(r,e){let t=e;const o=r.length;for(let a=0;a<o;a++){const c=r.charAt(a);switch(c){case"\0":t+="";break;case n0:t+="";break;default:t+=c}}return t}function G_(r){return r+n0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K_(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function jo(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function r0(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e,t){this.comparator=e,this.root=t||dn.EMPTY}insert(e,t){return new Lt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,dn.BLACK,null,null))}remove(e){return new Lt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const o=this.comparator(e,t.key);if(o===0)return t.value;o<0?t=t.left:o>0&&(t=t.right)}return null}indexOf(e){let t=0,o=this.root;for(;!o.isEmpty();){const a=this.comparator(e,o.key);if(a===0)return t+o.left.size;a<0?o=o.left:(t+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,o)=>(e(t,o),!1)))}toString(){const e=[];return this.inorderTraversal(((t,o)=>(e.push(`${t}:${o}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Jc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Jc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Jc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Jc(this.root,e,this.comparator,!0)}}class Jc{constructor(e,t,o,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?o(e.key,t):1,t&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class dn{constructor(e,t,o,a,c){this.key=e,this.value=t,this.color=o??dn.RED,this.left=a??dn.EMPTY,this.right=c??dn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,o,a,c){return new dn(e??this.key,t??this.value,o??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,o){let a=this;const c=o(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,t,o),null):c===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,o)),a.fixUp()}removeMin(){if(this.left.isEmpty())return dn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let o,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return dn.EMPTY;o=a.right.min(),a=a.copy(o.key,o.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,dn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,dn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw qe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw qe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw qe(27949);return e+(this.isRed()?0:1)}}dn.EMPTY=null,dn.RED=!0,dn.BLACK=!1;dn.EMPTY=new class{constructor(){this.size=0}get key(){throw qe(57766)}get value(){throw qe(16141)}get color(){throw qe(16727)}get left(){throw qe(29726)}get right(){throw qe(36894)}copy(e,t,o,a,c){return this}insert(e,t,o){return new dn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.comparator=e,this.data=new Lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,o)=>(e(t),!1)))}forEachInRange(e,t){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const a=o.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let o;for(o=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Z_(this.data.getIterator())}getIteratorFrom(e){return new Z_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((o=>{t=t.add(o)})),t}isEqual(e){if(!(e instanceof Xt)||this.size!==e.size)return!1;const t=this.data.getIterator(),o=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=o.getNext().key;if(this.comparator(a,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Xt(this.comparator);return t.data=e,t}}class Z_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e){this.fields=e,e.sort(fn.comparator)}static empty(){return new fr([])}unionWith(e){let t=new Xt(fn.comparator);for(const o of this.fields)t=t.add(o);for(const o of e)t=t.add(o);return new fr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Sl(this.fields,e.fields,((t,o)=>t.isEqual(o)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new i0("Invalid base64 string: "+c):c}})(e);return new pn(t)}static fromUint8Array(e){const t=(function(a){let c="";for(let p=0;p<a.length;++p)c+=String.fromCharCode(a[p]);return c})(e);return new pn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const o=new Uint8Array(t.length);for(let a=0;a<t.length;a++)o[a]=t.charCodeAt(a);return o})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return it(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pn.EMPTY_BYTE_STRING=new pn("");const xS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function No(r){if(_t(!!r,39018),typeof r=="string"){let e=0;const t=xS.exec(r);if(_t(!!t,46558,{timestamp:r}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const o=new Date(r);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:jt(r.seconds),nanos:jt(r.nanos)}}function jt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Ro(r){return typeof r=="string"?pn.fromBase64String(r):pn.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s0="server_timestamp",o0="__type__",a0="__previous_value__",l0="__local_write_time__";function Ap(r){var t,o;return((o=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[o0])==null?void 0:o.stringValue)===s0}function Hh(r){const e=r.mapValue.fields[a0];return Ap(e)?Hh(e):e}function Ru(r){const e=No(r.mapValue.fields[l0].timestampValue);return new St(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e,t,o,a,c,p,_,x,I,C,k){this.databaseId=e,this.appId=t,this.persistenceKey=o,this.host=a,this.ssl=c,this.forceLongPolling=p,this.autoDetectLongPolling=_,this.longPollingOptions=x,this.useFetchStreams=I,this.isUsingEmulator=C,this.apiKey=k}}const Eh="(default)";class Lu{constructor(e,t){this.projectId=e,this.database=t||Eh}static empty(){return new Lu("","")}get isDefaultDatabase(){return this.database===Eh}isEqual(e){return e instanceof Lu&&e.projectId===this.projectId&&e.database===this.database}}function TS(r,e){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new _e(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Lu(r.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u0="__type__",IS="__max__",Xc={mapValue:{}},c0="__vector__",Th="value";function Lo(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Ap(r)?4:PS(r)?9007199254740991:SS(r)?10:11:qe(28295,{value:r})}function Ui(r,e){if(r===e)return!0;const t=Lo(r);if(t!==Lo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Ru(r).isEqual(Ru(e));case 3:return(function(a,c){if(typeof a.timestampValue=="string"&&typeof c.timestampValue=="string"&&a.timestampValue.length===c.timestampValue.length)return a.timestampValue===c.timestampValue;const p=No(a.timestampValue),_=No(c.timestampValue);return p.seconds===_.seconds&&p.nanos===_.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(a,c){return Ro(a.bytesValue).isEqual(Ro(c.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(a,c){return jt(a.geoPointValue.latitude)===jt(c.geoPointValue.latitude)&&jt(a.geoPointValue.longitude)===jt(c.geoPointValue.longitude)})(r,e);case 2:return(function(a,c){if("integerValue"in a&&"integerValue"in c)return jt(a.integerValue)===jt(c.integerValue);if("doubleValue"in a&&"doubleValue"in c){const p=jt(a.doubleValue),_=jt(c.doubleValue);return p===_?xh(p)===xh(_):isNaN(p)&&isNaN(_)}return!1})(r,e);case 9:return Sl(r.arrayValue.values||[],e.arrayValue.values||[],Ui);case 10:case 11:return(function(a,c){const p=a.mapValue.fields||{},_=c.mapValue.fields||{};if(K_(p)!==K_(_))return!1;for(const x in p)if(p.hasOwnProperty(x)&&(_[x]===void 0||!Ui(p[x],_[x])))return!1;return!0})(r,e);default:return qe(52216,{left:r})}}function Du(r,e){return(r.values||[]).find((t=>Ui(t,e)))!==void 0}function Pl(r,e){if(r===e)return 0;const t=Lo(r),o=Lo(e);if(t!==o)return it(t,o);switch(t){case 0:case 9007199254740991:return 0;case 1:return it(r.booleanValue,e.booleanValue);case 2:return(function(c,p){const _=jt(c.integerValue||c.doubleValue),x=jt(p.integerValue||p.doubleValue);return _<x?-1:_>x?1:_===x?0:isNaN(_)?isNaN(x)?0:-1:1})(r,e);case 3:return Q_(r.timestampValue,e.timestampValue);case 4:return Q_(Ru(r),Ru(e));case 5:return qf(r.stringValue,e.stringValue);case 6:return(function(c,p){const _=Ro(c),x=Ro(p);return _.compareTo(x)})(r.bytesValue,e.bytesValue);case 7:return(function(c,p){const _=c.split("/"),x=p.split("/");for(let I=0;I<_.length&&I<x.length;I++){const C=it(_[I],x[I]);if(C!==0)return C}return it(_.length,x.length)})(r.referenceValue,e.referenceValue);case 8:return(function(c,p){const _=it(jt(c.latitude),jt(p.latitude));return _!==0?_:it(jt(c.longitude),jt(p.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return Y_(r.arrayValue,e.arrayValue);case 10:return(function(c,p){var b,q,W,Q;const _=c.fields||{},x=p.fields||{},I=(b=_[Th])==null?void 0:b.arrayValue,C=(q=x[Th])==null?void 0:q.arrayValue,k=it(((W=I==null?void 0:I.values)==null?void 0:W.length)||0,((Q=C==null?void 0:C.values)==null?void 0:Q.length)||0);return k!==0?k:Y_(I,C)})(r.mapValue,e.mapValue);case 11:return(function(c,p){if(c===Xc.mapValue&&p===Xc.mapValue)return 0;if(c===Xc.mapValue)return 1;if(p===Xc.mapValue)return-1;const _=c.fields||{},x=Object.keys(_),I=p.fields||{},C=Object.keys(I);x.sort(),C.sort();for(let k=0;k<x.length&&k<C.length;++k){const b=qf(x[k],C[k]);if(b!==0)return b;const q=Pl(_[x[k]],I[C[k]]);if(q!==0)return q}return it(x.length,C.length)})(r.mapValue,e.mapValue);default:throw qe(23264,{he:t})}}function Q_(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return it(r,e);const t=No(r),o=No(e),a=it(t.seconds,o.seconds);return a!==0?a:it(t.nanos,o.nanos)}function Y_(r,e){const t=r.values||[],o=e.values||[];for(let a=0;a<t.length&&a<o.length;++a){const c=Pl(t[a],o[a]);if(c)return c}return it(t.length,o.length)}function Cl(r){return $f(r)}function $f(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const o=No(t);return`time(${o.seconds},${o.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return Ro(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return Ve.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let o="[",a=!0;for(const c of t.values||[])a?a=!1:o+=",",o+=$f(c);return o+"]"})(r.arrayValue):"mapValue"in r?(function(t){const o=Object.keys(t.fields||{}).sort();let a="{",c=!0;for(const p of o)c?c=!1:a+=",",a+=`${p}:${$f(t.fields[p])}`;return a+"}"})(r.mapValue):qe(61005,{value:r})}function ah(r){switch(Lo(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Hh(r);return e?16+ah(e):16;case 5:return 2*r.stringValue.length;case 6:return Ro(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(o){return(o.values||[]).reduce(((a,c)=>a+ah(c)),0)})(r.arrayValue);case 10:case 11:return(function(o){let a=0;return jo(o.fields,((c,p)=>{a+=c.length+ah(p)})),a})(r.mapValue);default:throw qe(13486,{value:r})}}function J_(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Gf(r){return!!r&&"integerValue"in r}function bp(r){return!!r&&"arrayValue"in r}function X_(r){return!!r&&"nullValue"in r}function ey(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function lh(r){return!!r&&"mapValue"in r}function SS(r){var t,o;return((o=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[u0])==null?void 0:o.stringValue)===c0}function Iu(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return jo(r.mapValue.fields,((t,o)=>e.mapValue.fields[t]=Iu(o))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Iu(r.arrayValue.values[t]);return e}return{...r}}function PS(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===IS}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e){this.value=e}static empty(){return new nr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let o=0;o<e.length-1;++o)if(t=(t.mapValue.fields||{})[e.get(o)],!lh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Iu(t)}setAll(e){let t=fn.emptyPath(),o={},a=[];e.forEach(((p,_)=>{if(!t.isImmediateParentOf(_)){const x=this.getFieldsMap(t);this.applyChanges(x,o,a),o={},a=[],t=_.popLast()}p?o[_.lastSegment()]=Iu(p):a.push(_.lastSegment())}));const c=this.getFieldsMap(t);this.applyChanges(c,o,a)}delete(e){const t=this.field(e.popLast());lh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ui(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let o=0;o<e.length;++o){let a=t.mapValue.fields[e.get(o)];lh(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(o)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,o){jo(t,((a,c)=>e[a]=c));for(const a of o)delete e[a]}clone(){return new nr(Iu(this.value))}}function h0(r){const e=[];return jo(r.fields,((t,o)=>{const a=new fn([t]);if(lh(o)){const c=h0(o.mapValue).fields;if(c.length===0)e.push(a);else for(const p of c)e.push(a.child(p))}else e.push(a)})),new fr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e,t,o,a,c,p,_){this.key=e,this.documentType=t,this.version=o,this.readTime=a,this.createTime=c,this.data=p,this.documentState=_}static newInvalidDocument(e){return new Cn(e,0,Ke.min(),Ke.min(),Ke.min(),nr.empty(),0)}static newFoundDocument(e,t,o,a){return new Cn(e,1,t,Ke.min(),o,a,0)}static newNoDocument(e,t){return new Cn(e,2,t,Ke.min(),Ke.min(),nr.empty(),0)}static newUnknownDocument(e,t){return new Cn(e,3,t,Ke.min(),Ke.min(),nr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ke.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=nr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=nr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ke.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Cn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Cn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(e,t){this.position=e,this.inclusive=t}}function ty(r,e,t){let o=0;for(let a=0;a<r.position.length;a++){const c=e[a],p=r.position[a];if(c.field.isKeyField()?o=Ve.comparator(Ve.fromName(p.referenceValue),t.key):o=Pl(p,t.data.field(c.field)),c.dir==="desc"&&(o*=-1),o!==0)break}return o}function ny(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Ui(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(e,t="asc"){this.field=e,this.dir=t}}function CS(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{}class qt extends d0{constructor(e,t,o){super(),this.field=e,this.op=t,this.value=o}static create(e,t,o){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,o):new AS(e,t,o):t==="array-contains"?new RS(e,o):t==="in"?new LS(e,o):t==="not-in"?new DS(e,o):t==="array-contains-any"?new MS(e,o):new qt(e,t,o)}static createKeyFieldInFilter(e,t,o){return t==="in"?new bS(e,o):new NS(e,o)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Pl(t,this.value)):t!==null&&Lo(this.value)===Lo(t)&&this.matchesComparison(Pl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return qe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class li extends d0{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new li(e,t)}matches(e){return f0(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function f0(r){return r.op==="and"}function p0(r){return kS(r)&&f0(r)}function kS(r){for(const e of r.filters)if(e instanceof li)return!1;return!0}function Kf(r){if(r instanceof qt)return r.field.canonicalString()+r.op.toString()+Cl(r.value);if(p0(r))return r.filters.map((e=>Kf(e))).join(",");{const e=r.filters.map((t=>Kf(t))).join(",");return`${r.op}(${e})`}}function m0(r,e){return r instanceof qt?(function(o,a){return a instanceof qt&&o.op===a.op&&o.field.isEqual(a.field)&&Ui(o.value,a.value)})(r,e):r instanceof li?(function(o,a){return a instanceof li&&o.op===a.op&&o.filters.length===a.filters.length?o.filters.reduce(((c,p,_)=>c&&m0(p,a.filters[_])),!0):!1})(r,e):void qe(19439)}function g0(r){return r instanceof qt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Cl(t.value)}`})(r):r instanceof li?(function(t){return t.op.toString()+" {"+t.getFilters().map(g0).join(" ,")+"}"})(r):"Filter"}class AS extends qt{constructor(e,t,o){super(e,t,o),this.key=Ve.fromName(o.referenceValue)}matches(e){const t=Ve.comparator(e.key,this.key);return this.matchesComparison(t)}}class bS extends qt{constructor(e,t){super(e,"in",t),this.keys=_0("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class NS extends qt{constructor(e,t){super(e,"not-in",t),this.keys=_0("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function _0(r,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((o=>Ve.fromName(o.referenceValue)))}class RS extends qt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return bp(t)&&Du(t.arrayValue,this.value)}}class LS extends qt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Du(this.value.arrayValue,t)}}class DS extends qt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Du(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Du(this.value.arrayValue,t)}}class MS extends qt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!bp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((o=>Du(this.value.arrayValue,o)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(e,t=null,o=[],a=[],c=null,p=null,_=null){this.path=e,this.collectionGroup=t,this.orderBy=o,this.filters=a,this.limit=c,this.startAt=p,this.endAt=_,this.Te=null}}function ry(r,e=null,t=[],o=[],a=null,c=null,p=null){return new OS(r,e,t,o,a,c,p)}function Np(r){const e=Ze(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((o=>Kf(o))).join(","),t+="|ob:",t+=e.orderBy.map((o=>(function(c){return c.field.canonicalString()+c.dir})(o))).join(","),Bh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((o=>Cl(o))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((o=>Cl(o))).join(",")),e.Te=t}return e.Te}function Rp(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!CS(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!m0(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!ny(r.startAt,e.startAt)&&ny(r.endAt,e.endAt)}function Zf(r){return Ve.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(e,t=null,o=[],a=[],c=null,p="F",_=null,x=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=o,this.filters=a,this.limit=c,this.limitType=p,this.startAt=_,this.endAt=x,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function VS(r,e,t,o,a,c,p,_){return new Ol(r,e,t,o,a,c,p,_)}function Lp(r){return new Ol(r)}function iy(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function jS(r){return Ve.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function y0(r){return r.collectionGroup!==null}function Su(r){const e=Ze(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),t.add(c.field.canonicalString());const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(p){let _=new Xt(fn.comparator);return p.filters.forEach((x=>{x.getFlattenedFilters().forEach((I=>{I.isInequality()&&(_=_.add(I.field))}))})),_})(e).forEach((c=>{t.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new Mu(c,o))})),t.has(fn.keyField().canonicalString())||e.Ie.push(new Mu(fn.keyField(),o))}return e.Ie}function ji(r){const e=Ze(r);return e.Ee||(e.Ee=FS(e,Su(r))),e.Ee}function FS(r,e){if(r.limitType==="F")return ry(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((a=>{const c=a.dir==="desc"?"asc":"desc";return new Mu(a.field,c)}));const t=r.endAt?new Ih(r.endAt.position,r.endAt.inclusive):null,o=r.startAt?new Ih(r.startAt.position,r.startAt.inclusive):null;return ry(r.path,r.collectionGroup,e,r.filters,r.limit,t,o)}}function Qf(r,e){const t=r.filters.concat([e]);return new Ol(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function zS(r,e){const t=r.explicitOrderBy.concat([e]);return new Ol(r.path,r.collectionGroup,t,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}function Yf(r,e,t){return new Ol(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Wh(r,e){return Rp(ji(r),ji(e))&&r.limitType===e.limitType}function v0(r){return`${Np(ji(r))}|lt:${r.limitType}`}function fl(r){return`Query(target=${(function(t){let o=t.path.canonicalString();return t.collectionGroup!==null&&(o+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(o+=`, filters: [${t.filters.map((a=>g0(a))).join(", ")}]`),Bh(t.limit)||(o+=", limit: "+t.limit),t.orderBy.length>0&&(o+=`, orderBy: [${t.orderBy.map((a=>(function(p){return`${p.field.canonicalString()} (${p.dir})`})(a))).join(", ")}]`),t.startAt&&(o+=", startAt: ",o+=t.startAt.inclusive?"b:":"a:",o+=t.startAt.position.map((a=>Cl(a))).join(",")),t.endAt&&(o+=", endAt: ",o+=t.endAt.inclusive?"a:":"b:",o+=t.endAt.position.map((a=>Cl(a))).join(",")),`Target(${o})`})(ji(r))}; limitType=${r.limitType})`}function qh(r,e){return e.isFoundDocument()&&(function(o,a){const c=a.key.path;return o.collectionGroup!==null?a.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(c):Ve.isDocumentKey(o.path)?o.path.isEqual(c):o.path.isImmediateParentOf(c)})(r,e)&&(function(o,a){for(const c of Su(o))if(!c.field.isKeyField()&&a.data.field(c.field)===null)return!1;return!0})(r,e)&&(function(o,a){for(const c of o.filters)if(!c.matches(a))return!1;return!0})(r,e)&&(function(o,a){return!(o.startAt&&!(function(p,_,x){const I=ty(p,_,x);return p.inclusive?I<=0:I<0})(o.startAt,Su(o),a)||o.endAt&&!(function(p,_,x){const I=ty(p,_,x);return p.inclusive?I>=0:I>0})(o.endAt,Su(o),a))})(r,e)}function US(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function w0(r){return(e,t)=>{let o=!1;for(const a of Su(r)){const c=BS(a,e,t);if(c!==0)return c;o=o||a.field.isKeyField()}return 0}}function BS(r,e,t){const o=r.field.isKeyField()?Ve.comparator(e.key,t.key):(function(c,p,_){const x=p.data.field(c),I=_.data.field(c);return x!==null&&I!==null?Pl(x,I):qe(42886)})(r.field,e,t);switch(r.dir){case"asc":return o;case"desc":return-1*o;default:return qe(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),o=this.inner[t];if(o!==void 0){for(const[a,c]of o)if(this.equalsFn(a,e))return c}}has(e){return this.get(e)!==void 0}set(e,t){const o=this.mapKeyFn(e),a=this.inner[o];if(a===void 0)return this.inner[o]=[[e,t]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),o=this.inner[t];if(o===void 0)return!1;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return o.length===1?delete this.inner[t]:o.splice(a,1),this.innerSize--,!0;return!1}forEach(e){jo(this.inner,((t,o)=>{for(const[a,c]of o)e(a,c)}))}isEmpty(){return r0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS=new Lt(Ve.comparator);function bs(){return HS}const x0=new Lt(Ve.comparator);function yu(...r){let e=x0;for(const t of r)e=e.insert(t.key,t);return e}function E0(r){let e=x0;return r.forEach(((t,o)=>e=e.insert(t,o.overlayedDocument))),e}function _a(){return Pu()}function T0(){return Pu()}function Pu(){return new Aa((r=>r.toString()),((r,e)=>r.isEqual(e)))}const WS=new Lt(Ve.comparator),qS=new Xt(Ve.comparator);function st(...r){let e=qS;for(const t of r)e=e.add(t);return e}const $S=new Xt(it);function GS(){return $S}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dp(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xh(e)?"-0":e}}function I0(r){return{integerValue:""+r}}function KS(r,e){return yS(e)?I0(e):Dp(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(){this._=void 0}}function ZS(r,e,t){return r instanceof Sh?(function(a,c){const p={fields:{[o0]:{stringValue:s0},[l0]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return c&&Ap(c)&&(c=Hh(c)),c&&(p.fields[a0]=c),{mapValue:p}})(t,e):r instanceof Ou?P0(r,e):r instanceof Vu?C0(r,e):(function(a,c){const p=S0(a,c),_=sy(p)+sy(a.Ae);return Gf(p)&&Gf(a.Ae)?I0(_):Dp(a.serializer,_)})(r,e)}function QS(r,e,t){return r instanceof Ou?P0(r,e):r instanceof Vu?C0(r,e):t}function S0(r,e){return r instanceof Ph?(function(o){return Gf(o)||(function(c){return!!c&&"doubleValue"in c})(o)})(e)?e:{integerValue:0}:null}class Sh extends $h{}class Ou extends $h{constructor(e){super(),this.elements=e}}function P0(r,e){const t=k0(e);for(const o of r.elements)t.some((a=>Ui(a,o)))||t.push(o);return{arrayValue:{values:t}}}class Vu extends $h{constructor(e){super(),this.elements=e}}function C0(r,e){let t=k0(e);for(const o of r.elements)t=t.filter((a=>!Ui(a,o)));return{arrayValue:{values:t}}}class Ph extends $h{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function sy(r){return jt(r.integerValue||r.doubleValue)}function k0(r){return bp(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function YS(r,e){return r.field.isEqual(e.field)&&(function(o,a){return o instanceof Ou&&a instanceof Ou||o instanceof Vu&&a instanceof Vu?Sl(o.elements,a.elements,Ui):o instanceof Ph&&a instanceof Ph?Ui(o.Ae,a.Ae):o instanceof Sh&&a instanceof Sh})(r.transform,e.transform)}class JS{constructor(e,t){this.version=e,this.transformResults=t}}class pr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new pr}static exists(e){return new pr(void 0,e)}static updateTime(e){return new pr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function uh(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Gh{}function A0(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Kh(r.key,pr.none()):new qu(r.key,r.data,pr.none());{const t=r.data,o=nr.empty();let a=new Xt(fn.comparator);for(let c of e.fields)if(!a.has(c)){let p=t.field(c);p===null&&c.length>1&&(c=c.popLast(),p=t.field(c)),p===null?o.delete(c):o.set(c,p),a=a.add(c)}return new Fo(r.key,o,new fr(a.toArray()),pr.none())}}function XS(r,e,t){r instanceof qu?(function(a,c,p){const _=a.value.clone(),x=ay(a.fieldTransforms,c,p.transformResults);_.setAll(x),c.convertToFoundDocument(p.version,_).setHasCommittedMutations()})(r,e,t):r instanceof Fo?(function(a,c,p){if(!uh(a.precondition,c))return void c.convertToUnknownDocument(p.version);const _=ay(a.fieldTransforms,c,p.transformResults),x=c.data;x.setAll(b0(a)),x.setAll(_),c.convertToFoundDocument(p.version,x).setHasCommittedMutations()})(r,e,t):(function(a,c,p){c.convertToNoDocument(p.version).setHasCommittedMutations()})(0,e,t)}function Cu(r,e,t,o){return r instanceof qu?(function(c,p,_,x){if(!uh(c.precondition,p))return _;const I=c.value.clone(),C=ly(c.fieldTransforms,x,p);return I.setAll(C),p.convertToFoundDocument(p.version,I).setHasLocalMutations(),null})(r,e,t,o):r instanceof Fo?(function(c,p,_,x){if(!uh(c.precondition,p))return _;const I=ly(c.fieldTransforms,x,p),C=p.data;return C.setAll(b0(c)),C.setAll(I),p.convertToFoundDocument(p.version,C).setHasLocalMutations(),_===null?null:_.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((k=>k.field)))})(r,e,t,o):(function(c,p,_){return uh(c.precondition,p)?(p.convertToNoDocument(p.version).setHasLocalMutations(),null):_})(r,e,t)}function eP(r,e){let t=null;for(const o of r.fieldTransforms){const a=e.data.field(o.field),c=S0(o.transform,a||null);c!=null&&(t===null&&(t=nr.empty()),t.set(o.field,c))}return t||null}function oy(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(o,a){return o===void 0&&a===void 0||!(!o||!a)&&Sl(o,a,((c,p)=>YS(c,p)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class qu extends Gh{constructor(e,t,o,a=[]){super(),this.key=e,this.value=t,this.precondition=o,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Fo extends Gh{constructor(e,t,o,a,c=[]){super(),this.key=e,this.data=t,this.fieldMask=o,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function b0(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const o=r.data.field(t);e.set(t,o)}})),e}function ay(r,e,t){const o=new Map;_t(r.length===t.length,32656,{Ve:t.length,de:r.length});for(let a=0;a<t.length;a++){const c=r[a],p=c.transform,_=e.data.field(c.field);o.set(c.field,QS(p,_,t[a]))}return o}function ly(r,e,t){const o=new Map;for(const a of r){const c=a.transform,p=t.data.field(a.field);o.set(a.field,ZS(c,p,e))}return o}class Kh extends Gh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class tP extends Gh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{constructor(e,t,o,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=o,this.mutations=a}applyToRemoteDocument(e,t){const o=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&XS(c,e,o[a])}}applyToLocalView(e,t){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(t=Cu(o,e,t,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(t=Cu(o,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const o=T0();return this.mutations.forEach((a=>{const c=e.get(a.key),p=c.overlayedDocument;let _=this.applyToLocalView(p,c.mutatedFields);_=t.has(a.key)?null:_;const x=A0(p,_);x!==null&&o.set(a.key,x),p.isValidDocument()||p.convertToNoDocument(Ke.min())})),o}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),st())}isEqual(e){return this.batchId===e.batchId&&Sl(this.mutations,e.mutations,((t,o)=>oy(t,o)))&&Sl(this.baseMutations,e.baseMutations,((t,o)=>oy(t,o)))}}class Mp{constructor(e,t,o,a){this.batch=e,this.commitVersion=t,this.mutationResults=o,this.docVersions=a}static from(e,t,o){_t(e.mutations.length===o.length,58842,{me:e.mutations.length,fe:o.length});let a=(function(){return WS})();const c=e.mutations;for(let p=0;p<c.length;p++)a=a.insert(c[p].key,o[p].version);return new Mp(e,t,o,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wt,ut;function sP(r){switch(r){case re.OK:return qe(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return qe(15467,{code:r})}}function N0(r){if(r===void 0)return ks("GRPC error has no .code"),re.UNKNOWN;switch(r){case Wt.OK:return re.OK;case Wt.CANCELLED:return re.CANCELLED;case Wt.UNKNOWN:return re.UNKNOWN;case Wt.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case Wt.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case Wt.INTERNAL:return re.INTERNAL;case Wt.UNAVAILABLE:return re.UNAVAILABLE;case Wt.UNAUTHENTICATED:return re.UNAUTHENTICATED;case Wt.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case Wt.NOT_FOUND:return re.NOT_FOUND;case Wt.ALREADY_EXISTS:return re.ALREADY_EXISTS;case Wt.PERMISSION_DENIED:return re.PERMISSION_DENIED;case Wt.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case Wt.ABORTED:return re.ABORTED;case Wt.OUT_OF_RANGE:return re.OUT_OF_RANGE;case Wt.UNIMPLEMENTED:return re.UNIMPLEMENTED;case Wt.DATA_LOSS:return re.DATA_LOSS;default:return qe(39323,{code:r})}}(ut=Wt||(Wt={}))[ut.OK=0]="OK",ut[ut.CANCELLED=1]="CANCELLED",ut[ut.UNKNOWN=2]="UNKNOWN",ut[ut.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ut[ut.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ut[ut.NOT_FOUND=5]="NOT_FOUND",ut[ut.ALREADY_EXISTS=6]="ALREADY_EXISTS",ut[ut.PERMISSION_DENIED=7]="PERMISSION_DENIED",ut[ut.UNAUTHENTICATED=16]="UNAUTHENTICATED",ut[ut.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ut[ut.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ut[ut.ABORTED=10]="ABORTED",ut[ut.OUT_OF_RANGE=11]="OUT_OF_RANGE",ut[ut.UNIMPLEMENTED=12]="UNIMPLEMENTED",ut[ut.INTERNAL=13]="INTERNAL",ut[ut.UNAVAILABLE=14]="UNAVAILABLE",ut[ut.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aP=new ko([4294967295,4294967295],0);function uy(r){const e=oP().encode(r),t=new $v;return t.update(e),new Uint8Array(t.digest())}function cy(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),o=e.getUint32(4,!0),a=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new ko([t,o],0),new ko([a,c],0)]}class Op{constructor(e,t,o){if(this.bitmap=e,this.padding=t,this.hashCount=o,t<0||t>=8)throw new vu(`Invalid padding: ${t}`);if(o<0)throw new vu(`Invalid hash count: ${o}`);if(e.length>0&&this.hashCount===0)throw new vu(`Invalid hash count: ${o}`);if(e.length===0&&t!==0)throw new vu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ko.fromNumber(this.ge)}ye(e,t,o){let a=e.add(t.multiply(ko.fromNumber(o)));return a.compare(aP)===1&&(a=new ko([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=uy(e),[o,a]=cy(t);for(let c=0;c<this.hashCount;c++){const p=this.ye(o,a,c);if(!this.we(p))return!1}return!0}static create(e,t,o){const a=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),p=new Op(c,a,t);return o.forEach((_=>p.insert(_))),p}insert(e){if(this.ge===0)return;const t=uy(e),[o,a]=cy(t);for(let c=0;c<this.hashCount;c++){const p=this.ye(o,a,c);this.be(p)}}be(e){const t=Math.floor(e/8),o=e%8;this.bitmap[t]|=1<<o}}class vu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(e,t,o,a,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=o,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,o){const a=new Map;return a.set(e,$u.createSynthesizedTargetChangeForCurrentChange(e,t,o)),new Zh(Ke.min(),a,new Lt(it),bs(),st())}}class $u{constructor(e,t,o,a,c){this.resumeToken=e,this.current=t,this.addedDocuments=o,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,o){return new $u(o,t,st(),st(),st())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(e,t,o,a){this.Se=e,this.removedTargetIds=t,this.key=o,this.De=a}}class R0{constructor(e,t){this.targetId=e,this.Ce=t}}class L0{constructor(e,t,o=pn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=o,this.cause=a}}class hy{constructor(){this.ve=0,this.Fe=dy(),this.Me=pn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=st(),t=st(),o=st();return this.Fe.forEach(((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:o=o.add(a);break;default:qe(38017,{changeType:c})}})),new $u(this.Me,this.xe,e,t,o)}Ke(){this.Oe=!1,this.Fe=dy()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,_t(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class lP{constructor(e){this.Ge=e,this.ze=new Map,this.je=bs(),this.He=eh(),this.Je=eh(),this.Ze=new Lt(it)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const o=this.nt(t);switch(e.state){case 0:this.rt(t)&&o.Le(e.resumeToken);break;case 1:o.We(),o.Ne||o.Ke(),o.Le(e.resumeToken);break;case 2:o.We(),o.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(o.Qe(),o.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),o.Le(e.resumeToken));break;default:qe(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((o,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,o=e.Ce.count,a=this.ot(t);if(a){const c=a.target;if(Zf(c))if(o===0){const p=new Ve(c.path);this.et(t,p,Cn.newNoDocument(p,Ke.min()))}else _t(o===1,20013,{expectedCount:o});else{const p=this._t(t);if(p!==o){const _=this.ut(e),x=_?this.ct(_,e,p):1;if(x!==0){this.it(t);const I=x===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,I)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:o="",padding:a=0},hashCount:c=0}=t;let p,_;try{p=Ro(o).toUint8Array()}catch(x){if(x instanceof i0)return Ia("Decoding the base64 bloom filter in existence filter failed ("+x.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw x}try{_=new Op(p,a,c)}catch(x){return Ia(x instanceof vu?"BloomFilter error: ":"Applying bloom filter failed: ",x),null}return _.ge===0?null:_}ct(e,t,o){return t.Ce.count===o-this.Pt(e,t.targetId)?0:2}Pt(e,t){const o=this.Ge.getRemoteKeysForTarget(t);let a=0;return o.forEach((c=>{const p=this.Ge.ht(),_=`projects/${p.projectId}/databases/${p.database}/documents/${c.path.canonicalString()}`;e.mightContain(_)||(this.et(t,c,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((c,p)=>{const _=this.ot(p);if(_){if(c.current&&Zf(_.target)){const x=new Ve(_.target.path);this.It(x).has(p)||this.Et(p,x)||this.et(p,x,Cn.newNoDocument(x,e))}c.Be&&(t.set(p,c.ke()),c.Ke())}}));let o=st();this.Je.forEach(((c,p)=>{let _=!0;p.forEachWhile((x=>{const I=this.ot(x);return!I||I.purpose==="TargetPurposeLimboResolution"||(_=!1,!1)})),_&&(o=o.add(c))})),this.je.forEach(((c,p)=>p.setReadTime(e)));const a=new Zh(e,t,this.Ze,this.je,o);return this.je=bs(),this.He=eh(),this.Je=eh(),this.Ze=new Lt(it),a}Ye(e,t){if(!this.rt(e))return;const o=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,o),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,o){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.qe(t,1):a.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),o&&(this.je=this.je.insert(t,o))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new hy,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Xt(it),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Xt(it),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Te("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new hy),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function eh(){return new Lt(Ve.comparator)}function dy(){return new Lt(Ve.comparator)}const uP={asc:"ASCENDING",desc:"DESCENDING"},cP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hP={and:"AND",or:"OR"};class dP{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Jf(r,e){return r.useProto3Json||Bh(e)?e:{value:e}}function Ch(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function D0(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function fP(r,e){return Ch(r,e.toTimestamp())}function Fi(r){return _t(!!r,49232),Ke.fromTimestamp((function(t){const o=No(t);return new St(o.seconds,o.nanos)})(r))}function Vp(r,e){return Xf(r,e).canonicalString()}function Xf(r,e){const t=(function(a){return new Et(["projects",a.projectId,"databases",a.database])})(r).child("documents");return e===void 0?t:t.child(e)}function M0(r){const e=Et.fromString(r);return _t(z0(e),10190,{key:e.toString()}),e}function ep(r,e){return Vp(r.databaseId,e.path)}function Pf(r,e){const t=M0(e);if(t.get(1)!==r.databaseId.projectId)throw new _e(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new _e(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Ve(V0(t))}function O0(r,e){return Vp(r.databaseId,e)}function pP(r){const e=M0(r);return e.length===4?Et.emptyPath():V0(e)}function tp(r){return new Et(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function V0(r){return _t(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function fy(r,e,t){return{name:ep(r,e),fields:t.value.mapValue.fields}}function mP(r,e){let t;if("targetChange"in e){e.targetChange;const o=(function(I){return I==="NO_CHANGE"?0:I==="ADD"?1:I==="REMOVE"?2:I==="CURRENT"?3:I==="RESET"?4:qe(39313,{state:I})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],c=(function(I,C){return I.useProto3Json?(_t(C===void 0||typeof C=="string",58123),pn.fromBase64String(C||"")):(_t(C===void 0||C instanceof Buffer||C instanceof Uint8Array,16193),pn.fromUint8Array(C||new Uint8Array))})(r,e.targetChange.resumeToken),p=e.targetChange.cause,_=p&&(function(I){const C=I.code===void 0?re.UNKNOWN:N0(I.code);return new _e(C,I.message||"")})(p);t=new L0(o,a,c,_||null)}else if("documentChange"in e){e.documentChange;const o=e.documentChange;o.document,o.document.name,o.document.updateTime;const a=Pf(r,o.document.name),c=Fi(o.document.updateTime),p=o.document.createTime?Fi(o.document.createTime):Ke.min(),_=new nr({mapValue:{fields:o.document.fields}}),x=Cn.newFoundDocument(a,c,p,_),I=o.targetIds||[],C=o.removedTargetIds||[];t=new ch(I,C,x.key,x)}else if("documentDelete"in e){e.documentDelete;const o=e.documentDelete;o.document;const a=Pf(r,o.document),c=o.readTime?Fi(o.readTime):Ke.min(),p=Cn.newNoDocument(a,c),_=o.removedTargetIds||[];t=new ch([],_,p.key,p)}else if("documentRemove"in e){e.documentRemove;const o=e.documentRemove;o.document;const a=Pf(r,o.document),c=o.removedTargetIds||[];t=new ch([],c,a,null)}else{if(!("filter"in e))return qe(11601,{Vt:e});{e.filter;const o=e.filter;o.targetId;const{count:a=0,unchangedNames:c}=o,p=new iP(a,c),_=o.targetId;t=new R0(_,p)}}return t}function gP(r,e){let t;if(e instanceof qu)t={update:fy(r,e.key,e.value)};else if(e instanceof Kh)t={delete:ep(r,e.key)};else if(e instanceof Fo)t={update:fy(r,e.key,e.data),updateMask:SP(e.fieldMask)};else{if(!(e instanceof tP))return qe(16599,{dt:e.type});t={verify:ep(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((o=>(function(c,p){const _=p.transform;if(_ instanceof Sh)return{fieldPath:p.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(_ instanceof Ou)return{fieldPath:p.field.canonicalString(),appendMissingElements:{values:_.elements}};if(_ instanceof Vu)return{fieldPath:p.field.canonicalString(),removeAllFromArray:{values:_.elements}};if(_ instanceof Ph)return{fieldPath:p.field.canonicalString(),increment:_.Ae};throw qe(20930,{transform:p.transform})})(0,o)))),e.precondition.isNone||(t.currentDocument=(function(a,c){return c.updateTime!==void 0?{updateTime:fP(a,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:qe(27497)})(r,e.precondition)),t}function _P(r,e){return r&&r.length>0?(_t(e!==void 0,14353),r.map((t=>(function(a,c){let p=a.updateTime?Fi(a.updateTime):Fi(c);return p.isEqual(Ke.min())&&(p=Fi(c)),new JS(p,a.transformResults||[])})(t,e)))):[]}function yP(r,e){return{documents:[O0(r,e.path)]}}function vP(r,e){const t={structuredQuery:{}},o=e.path;let a;e.collectionGroup!==null?(a=o,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=o.popLast(),t.structuredQuery.from=[{collectionId:o.lastSegment()}]),t.parent=O0(r,a);const c=(function(I){if(I.length!==0)return F0(li.create(I,"and"))})(e.filters);c&&(t.structuredQuery.where=c);const p=(function(I){if(I.length!==0)return I.map((C=>(function(b){return{field:pl(b.field),direction:EP(b.dir)}})(C)))})(e.orderBy);p&&(t.structuredQuery.orderBy=p);const _=Jf(r,e.limit);return _!==null&&(t.structuredQuery.limit=_),e.startAt&&(t.structuredQuery.startAt=(function(I){return{before:I.inclusive,values:I.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(I){return{before:!I.inclusive,values:I.position}})(e.endAt)),{ft:t,parent:a}}function wP(r){let e=pP(r.parent);const t=r.structuredQuery,o=t.from?t.from.length:0;let a=null;if(o>0){_t(o===1,65062);const C=t.from[0];C.allDescendants?a=C.collectionId:e=e.child(C.collectionId)}let c=[];t.where&&(c=(function(k){const b=j0(k);return b instanceof li&&p0(b)?b.getFilters():[b]})(t.where));let p=[];t.orderBy&&(p=(function(k){return k.map((b=>(function(W){return new Mu(ml(W.field),(function(Y){switch(Y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(W.direction))})(b)))})(t.orderBy));let _=null;t.limit&&(_=(function(k){let b;return b=typeof k=="object"?k.value:k,Bh(b)?null:b})(t.limit));let x=null;t.startAt&&(x=(function(k){const b=!!k.before,q=k.values||[];return new Ih(q,b)})(t.startAt));let I=null;return t.endAt&&(I=(function(k){const b=!k.before,q=k.values||[];return new Ih(q,b)})(t.endAt)),VS(e,a,p,c,_,"F",x,I)}function xP(r,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return qe(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function j0(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const o=ml(t.unaryFilter.field);return qt.create(o,"==",{doubleValue:NaN});case"IS_NULL":const a=ml(t.unaryFilter.field);return qt.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=ml(t.unaryFilter.field);return qt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const p=ml(t.unaryFilter.field);return qt.create(p,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return qe(61313);default:return qe(60726)}})(r):r.fieldFilter!==void 0?(function(t){return qt.create(ml(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return qe(58110);default:return qe(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return li.create(t.compositeFilter.filters.map((o=>j0(o))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return qe(1026)}})(t.compositeFilter.op))})(r):qe(30097,{filter:r})}function EP(r){return uP[r]}function TP(r){return cP[r]}function IP(r){return hP[r]}function pl(r){return{fieldPath:r.canonicalString()}}function ml(r){return fn.fromServerFormat(r.fieldPath)}function F0(r){return r instanceof qt?(function(t){if(t.op==="=="){if(ey(t.value))return{unaryFilter:{field:pl(t.field),op:"IS_NAN"}};if(X_(t.value))return{unaryFilter:{field:pl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(ey(t.value))return{unaryFilter:{field:pl(t.field),op:"IS_NOT_NAN"}};if(X_(t.value))return{unaryFilter:{field:pl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:pl(t.field),op:TP(t.op),value:t.value}}})(r):r instanceof li?(function(t){const o=t.getFilters().map((a=>F0(a)));return o.length===1?o[0]:{compositeFilter:{op:IP(t.op),filters:o}}})(r):qe(54877,{filter:r})}function SP(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function z0(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}function U0(r){return!!r&&typeof r._toProto=="function"&&r._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e,t,o,a,c=Ke.min(),p=Ke.min(),_=pn.EMPTY_BYTE_STRING,x=null){this.target=e,this.targetId=t,this.purpose=o,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=p,this.resumeToken=_,this.expectedCount=x}withSequenceNumber(e){return new Io(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Io(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Io(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Io(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(e){this.yt=e}}function CP(r){const e=wP({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Yf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kP{constructor(){this.Sn=new AP}addToCollectionParentIndex(e,t){return this.Sn.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(bo.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(bo.min())}updateCollectionGroup(e,t,o){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class AP{constructor(){this.index={}}add(e){const t=e.lastSegment(),o=e.popLast(),a=this.index[t]||new Xt(Et.comparator),c=!a.has(o);return this.index[t]=a.add(o),c}has(e){const t=e.lastSegment(),o=e.popLast(),a=this.index[t];return a&&a.has(o)}getEntries(e){return(this.index[e]||new Xt(Et.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const py={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},B0=41943040;class tr{static withCacheSize(e){return new tr(e,tr.DEFAULT_COLLECTION_PERCENTILE,tr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */tr.DEFAULT_COLLECTION_PERCENTILE=10,tr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,tr.DEFAULT=new tr(B0,tr.DEFAULT_COLLECTION_PERCENTILE,tr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),tr.DISABLED=new tr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new kl(0)}static ar(){return new kl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const my="LruGarbageCollector",bP=1048576;function gy([r,e],[t,o]){const a=it(r,t);return a===0?it(e,o):a}class NP{constructor(e){this.Pr=e,this.buffer=new Xt(gy),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const o=this.buffer.last();gy(t,o)<0&&(this.buffer=this.buffer.delete(o).add(t))}}get maxValue(){return this.buffer.last()[0]}}class RP{constructor(e,t,o){this.garbageCollector=e,this.asyncQueue=t,this.localStore=o,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Te(my,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ml(t)?Te(my,"Ignoring IndexedDB error during garbage collection: ",t):await Dl(t)}await this.Ar(3e5)}))}}class LP{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((o=>Math.floor(t/100*o)))}nthSequenceNumber(e,t){if(t===0)return se.resolve(Uh.ce);const o=new NP(t);return this.Vr.forEachTarget(e,(a=>o.Er(a.sequenceNumber))).next((()=>this.Vr.mr(e,(a=>o.Er(a))))).next((()=>o.maxValue))}removeTargets(e,t,o){return this.Vr.removeTargets(e,t,o)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Te("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(py)):this.getCacheSize(e).next((o=>o<this.params.cacheSizeCollectionThreshold?(Te("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),py):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let o,a,c,p,_,x,I;const C=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((k=>(k>this.params.maximumSequenceNumbersToCollect?(Te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${k}`),a=this.params.maximumSequenceNumbersToCollect):a=k,p=Date.now(),this.nthSequenceNumber(e,a)))).next((k=>(o=k,_=Date.now(),this.removeTargets(e,o,t)))).next((k=>(c=k,x=Date.now(),this.removeOrphanedDocuments(e,o)))).next((k=>(I=Date.now(),dl()<=rt.DEBUG&&Te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${p-C}ms
	Determined least recently used ${a} in `+(_-p)+`ms
	Removed ${c} targets in `+(x-_)+`ms
	Removed ${k} documents in `+(I-x)+`ms
Total Duration: ${I-C}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:k}))))}}function DP(r,e){return new LP(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(){this.changes=new Aa((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Cn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const o=this.changes.get(t);return o!==void 0?se.resolve(o):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(e,t,o,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=o,this.indexManager=a}getDocument(e,t){let o=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(o=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(o!==null&&Cu(o.mutation,a,fr.empty(),St.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((o=>this.getLocalViewOfDocuments(e,o,st()).next((()=>o))))}getLocalViewOfDocuments(e,t,o=st()){const a=_a();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,o).next((c=>{let p=yu();return c.forEach(((_,x)=>{p=p.insert(_,x.overlayedDocument)})),p}))))}getOverlayedDocuments(e,t){const o=_a();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,st())))}populateOverlays(e,t,o){const a=[];return o.forEach((c=>{t.has(c)||a.push(c)})),this.documentOverlayCache.getOverlays(e,a).next((c=>{c.forEach(((p,_)=>{t.set(p,_)}))}))}computeViews(e,t,o,a){let c=bs();const p=Pu(),_=(function(){return Pu()})();return t.forEach(((x,I)=>{const C=o.get(I.key);a.has(I.key)&&(C===void 0||C.mutation instanceof Fo)?c=c.insert(I.key,I):C!==void 0?(p.set(I.key,C.mutation.getFieldMask()),Cu(C.mutation,I,C.mutation.getFieldMask(),St.now())):p.set(I.key,fr.empty())})),this.recalculateAndSaveOverlays(e,c).next((x=>(x.forEach(((I,C)=>p.set(I,C))),t.forEach(((I,C)=>_.set(I,new OP(C,p.get(I)??null)))),_)))}recalculateAndSaveOverlays(e,t){const o=Pu();let a=new Lt(((p,_)=>p-_)),c=st();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((p=>{for(const _ of p)_.keys().forEach((x=>{const I=t.get(x);if(I===null)return;let C=o.get(x)||fr.empty();C=_.applyToLocalView(I,C),o.set(x,C);const k=(a.get(_.batchId)||st()).add(x);a=a.insert(_.batchId,k)}))})).next((()=>{const p=[],_=a.getReverseIterator();for(;_.hasNext();){const x=_.getNext(),I=x.key,C=x.value,k=T0();C.forEach((b=>{if(!c.has(b)){const q=A0(t.get(b),o.get(b));q!==null&&k.set(b,q),c=c.add(b)}})),p.push(this.documentOverlayCache.saveOverlays(e,I,k))}return se.waitFor(p)})).next((()=>o))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((o=>this.recalculateAndSaveOverlays(e,o)))}getDocumentsMatchingQuery(e,t,o,a){return jS(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):y0(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,o,a):this.getDocumentsMatchingCollectionQuery(e,t,o,a)}getNextDocuments(e,t,o,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,o,a).next((c=>{const p=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,o.largestBatchId,a-c.size):se.resolve(_a());let _=Nu,x=c;return p.next((I=>se.forEach(I,((C,k)=>(_<k.largestBatchId&&(_=k.largestBatchId),c.get(C)?se.resolve():this.remoteDocumentCache.getEntry(e,C).next((b=>{x=x.insert(C,b)}))))).next((()=>this.populateOverlays(e,I,c))).next((()=>this.computeViews(e,x,I,st()))).next((C=>({batchId:_,changes:E0(C)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ve(t)).next((o=>{let a=yu();return o.isFoundDocument()&&(a=a.insert(o.key,o)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,o,a){const c=t.collectionGroup;let p=yu();return this.indexManager.getCollectionParents(e,c).next((_=>se.forEach(_,(x=>{const I=(function(k,b){return new Ol(b,null,k.explicitOrderBy.slice(),k.filters.slice(),k.limit,k.limitType,k.startAt,k.endAt)})(t,x.child(c));return this.getDocumentsMatchingCollectionQuery(e,I,o,a).next((C=>{C.forEach(((k,b)=>{p=p.insert(k,b)}))}))})).next((()=>p))))}getDocumentsMatchingCollectionQuery(e,t,o,a){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,o.largestBatchId).next((p=>(c=p,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,o,c,a)))).next((p=>{c.forEach(((x,I)=>{const C=I.getKey();p.get(C)===null&&(p=p.insert(C,Cn.newInvalidDocument(C)))}));let _=yu();return p.forEach(((x,I)=>{const C=c.get(x);C!==void 0&&Cu(C.mutation,I,fr.empty(),St.now()),qh(t,I)&&(_=_.insert(x,I))})),_}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return se.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:Fi(a.createTime)}})(t)),se.resolve()}getNamedQuery(e,t){return se.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(a){return{name:a.name,query:CP(a.bundledQuery),readTime:Fi(a.readTime)}})(t)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(){this.overlays=new Lt(Ve.comparator),this.Lr=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const o=_a();return se.forEach(t,(a=>this.getOverlay(e,a).next((c=>{c!==null&&o.set(a,c)})))).next((()=>o))}saveOverlays(e,t,o){return o.forEach(((a,c)=>{this.bt(e,t,c)})),se.resolve()}removeOverlaysForBatchId(e,t,o){const a=this.Lr.get(o);return a!==void 0&&(a.forEach((c=>this.overlays=this.overlays.remove(c))),this.Lr.delete(o)),se.resolve()}getOverlaysForCollection(e,t,o){const a=_a(),c=t.length+1,p=new Ve(t.child("")),_=this.overlays.getIteratorFrom(p);for(;_.hasNext();){const x=_.getNext().value,I=x.getKey();if(!t.isPrefixOf(I.path))break;I.path.length===c&&x.largestBatchId>o&&a.set(x.getKey(),x)}return se.resolve(a)}getOverlaysForCollectionGroup(e,t,o,a){let c=new Lt(((I,C)=>I-C));const p=this.overlays.getIterator();for(;p.hasNext();){const I=p.getNext().value;if(I.getKey().getCollectionGroup()===t&&I.largestBatchId>o){let C=c.get(I.largestBatchId);C===null&&(C=_a(),c=c.insert(I.largestBatchId,C)),C.set(I.getKey(),I)}}const _=_a(),x=c.getIterator();for(;x.hasNext()&&(x.getNext().value.forEach(((I,C)=>_.set(I,C))),!(_.size()>=a)););return se.resolve(_)}bt(e,t,o){const a=this.overlays.get(o.key);if(a!==null){const p=this.Lr.get(a.largestBatchId).delete(o.key);this.Lr.set(a.largestBatchId,p)}this.overlays=this.overlays.insert(o.key,new rP(t,o));let c=this.Lr.get(t);c===void 0&&(c=st(),this.Lr.set(t,c)),this.Lr.set(t,c.add(o.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{constructor(){this.sessionToken=pn.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(){this.kr=new Xt(on.Kr),this.qr=new Xt(on.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const o=new on(e,t);this.kr=this.kr.add(o),this.qr=this.qr.add(o)}$r(e,t){e.forEach((o=>this.addReference(o,t)))}removeReference(e,t){this.Wr(new on(e,t))}Qr(e,t){e.forEach((o=>this.removeReference(o,t)))}Gr(e){const t=new Ve(new Et([])),o=new on(t,e),a=new on(t,e+1),c=[];return this.qr.forEachInRange([o,a],(p=>{this.Wr(p),c.push(p.key)})),c}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new Ve(new Et([])),o=new on(t,e),a=new on(t,e+1);let c=st();return this.qr.forEachInRange([o,a],(p=>{c=c.add(p.key)})),c}containsKey(e){const t=new on(e,0),o=this.kr.firstAfterOrEqual(t);return o!==null&&e.isEqual(o.key)}}class on{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return Ve.comparator(e.key,t.key)||it(e.Hr,t.Hr)}static Ur(e,t){return it(e.Hr,t.Hr)||Ve.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Xt(on.Kr)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,o,a){const c=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const p=new nP(c,t,o,a);this.mutationQueue.push(p);for(const _ of a)this.Jr=this.Jr.add(new on(_.key,c)),this.indexManager.addToCollectionParentIndex(e,_.key.path.popLast());return se.resolve(p)}lookupMutationBatch(e,t){return se.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const o=t+1,a=this.Xr(o),c=a<0?0:a;return se.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?kp:this.Yn-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const o=new on(t,0),a=new on(t,Number.POSITIVE_INFINITY),c=[];return this.Jr.forEachInRange([o,a],(p=>{const _=this.Zr(p.Hr);c.push(_)})),se.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new Xt(it);return t.forEach((a=>{const c=new on(a,0),p=new on(a,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([c,p],(_=>{o=o.add(_.Hr)}))})),se.resolve(this.Yr(o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,a=o.length+1;let c=o;Ve.isDocumentKey(c)||(c=c.child(""));const p=new on(new Ve(c),0);let _=new Xt(it);return this.Jr.forEachWhile((x=>{const I=x.key.path;return!!o.isPrefixOf(I)&&(I.length===a&&(_=_.add(x.Hr)),!0)}),p),se.resolve(this.Yr(_))}Yr(e){const t=[];return e.forEach((o=>{const a=this.Zr(o);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){_t(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let o=this.Jr;return se.forEach(t.mutations,(a=>{const c=new on(a.key,t.batchId);return o=o.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Jr=o}))}nr(e){}containsKey(e,t){const o=new on(t,0),a=this.Jr.firstAfterOrEqual(o);return se.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(e){this.ti=e,this.docs=(function(){return new Lt(Ve.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const o=t.key,a=this.docs.get(o),c=a?a.size:0,p=this.ti(t);return this.docs=this.docs.insert(o,{document:t.mutableCopy(),size:p}),this.size+=p-c,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const o=this.docs.get(t);return se.resolve(o?o.document.mutableCopy():Cn.newInvalidDocument(t))}getEntries(e,t){let o=bs();return t.forEach((a=>{const c=this.docs.get(a);o=o.insert(a,c?c.document.mutableCopy():Cn.newInvalidDocument(a))})),se.resolve(o)}getDocumentsMatchingQuery(e,t,o,a){let c=bs();const p=t.path,_=new Ve(p.child("__id-9223372036854775808__")),x=this.docs.getIteratorFrom(_);for(;x.hasNext();){const{key:I,value:{document:C}}=x.getNext();if(!p.isPrefixOf(I.path))break;I.path.length>p.length+1||pS(fS(C),o)<=0||(a.has(C.key)||qh(t,C))&&(c=c.insert(C.key,C.mutableCopy()))}return se.resolve(c)}getAllFromCollectionGroup(e,t,o,a){qe(9500)}ni(e,t){return se.forEach(this.docs,(o=>t(o)))}newChangeBuffer(e){return new HP(this)}getSize(e){return se.resolve(this.size)}}class HP extends MP{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((o,a)=>{a.isValidDocument()?t.push(this.Mr.addEntry(e,a)):this.Mr.removeEntry(o)})),se.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(e){this.persistence=e,this.ri=new Aa((t=>Np(t)),Rp),this.lastRemoteSnapshotVersion=Ke.min(),this.highestTargetId=0,this.ii=0,this.si=new jp,this.targetCount=0,this.oi=kl._r()}forEachTarget(e,t){return this.ri.forEach(((o,a)=>t(a))),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,o){return o&&(this.lastRemoteSnapshotVersion=o),t>this.ii&&(this.ii=t),se.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new kl(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.lr(t),se.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,o){let a=0;const c=[];return this.ri.forEach(((p,_)=>{_.sequenceNumber<=t&&o.get(_.targetId)===null&&(this.ri.delete(p),c.push(this.removeMatchingKeysForTargetId(e,_.targetId)),a++)})),se.waitFor(c).next((()=>a))}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const o=this.ri.get(t)||null;return se.resolve(o)}addMatchingKeys(e,t,o){return this.si.$r(t,o),se.resolve()}removeMatchingKeys(e,t,o){this.si.Qr(t,o);const a=this.persistence.referenceDelegate,c=[];return a&&t.forEach((p=>{c.push(a.markPotentiallyOrphaned(e,p))})),se.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),se.resolve()}getMatchingKeysForTargetId(e,t){const o=this.si.jr(t);return se.resolve(o)}containsKey(e,t){return se.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0{constructor(e,t){this._i={},this.overlays={},this.ai=new Uh(0),this.ui=!1,this.ui=!0,this.ci=new zP,this.referenceDelegate=e(this),this.li=new WP(this),this.indexManager=new kP,this.remoteDocumentCache=(function(a){return new BP(a)})((o=>this.referenceDelegate.hi(o))),this.serializer=new PP(t),this.Pi=new jP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new FP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let o=this._i[e.toKey()];return o||(o=new UP(t,this.referenceDelegate),this._i[e.toKey()]=o),o}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,o){Te("MemoryPersistence","Starting transaction:",e);const a=new qP(this.ai.next());return this.referenceDelegate.Ti(),o(a).next((c=>this.referenceDelegate.Ii(a).next((()=>c)))).toPromise().then((c=>(a.raiseOnCommittedEvent(),c)))}Ei(e,t){return se.or(Object.values(this._i).map((o=>()=>o.containsKey(e,t))))}}class qP extends gS{constructor(e){super(),this.currentSequenceNumber=e}}class Fp{constructor(e){this.persistence=e,this.Ri=new jp,this.Ai=null}static Vi(e){return new Fp(e)}get di(){if(this.Ai)return this.Ai;throw qe(60996)}addReference(e,t,o){return this.Ri.addReference(o,t),this.di.delete(o.toString()),se.resolve()}removeReference(e,t,o){return this.Ri.removeReference(o,t),this.di.add(o.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),se.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((a=>this.di.add(a.toString())));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((c=>this.di.add(c.toString())))})).next((()=>o.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.di,(o=>{const a=Ve.fromPath(o);return this.mi(e,a).next((c=>{c||t.removeEntry(a,Ke.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((o=>{o?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return se.or([()=>se.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class kh{constructor(e,t){this.persistence=e,this.fi=new Aa((o=>vS(o.path)),((o,a)=>o.isEqual(a))),this.garbageCollector=DP(this,t)}static Vi(e,t){return new kh(e,t)}Ti(){}Ii(e){return se.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((o=>t.next((a=>o+a))))}pr(e){let t=0;return this.mr(e,(o=>{t++})).next((()=>t))}mr(e,t){return se.forEach(this.fi,((o,a)=>this.wr(e,o,a).next((c=>c?se.resolve():t(a)))))}removeTargets(e,t,o){return this.persistence.getTargetCache().removeTargets(e,t,o)}removeOrphanedDocuments(e,t){let o=0;const a=this.persistence.getRemoteDocumentCache(),c=a.newChangeBuffer();return a.ni(e,(p=>this.wr(e,p,t).next((_=>{_||(o++,c.removeEntry(p,Ke.min()))})))).next((()=>c.apply(e))).next((()=>o))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),se.resolve()}removeTarget(e,t){const o=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,o)}addReference(e,t,o){return this.fi.set(o,e.currentSequenceNumber),se.resolve()}removeReference(e,t,o){return this.fi.set(o,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),se.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ah(e.data.value)),t}wr(e,t,o){return se.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.fi.get(t);return se.resolve(a!==void 0&&a>o)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(e,t,o,a){this.targetId=e,this.fromCache=t,this.Ts=o,this.Is=a}static Es(e,t){let o=st(),a=st();for(const c of t.docChanges)switch(c.type){case 0:o=o.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new zp(e,t.fromCache,o,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return Zx()?8:_S(kn())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,o,a){const c={result:null};return this.gs(e,t).next((p=>{c.result=p})).next((()=>{if(!c.result)return this.ps(e,t,a,o).next((p=>{c.result=p}))})).next((()=>{if(c.result)return;const p=new $P;return this.ys(e,t,p).next((_=>{if(c.result=_,this.As)return this.ws(e,t,p,_.size)}))})).next((()=>c.result))}ws(e,t,o,a){return o.documentReadCount<this.Vs?(dl()<=rt.DEBUG&&Te("QueryEngine","SDK will not create cache indexes for query:",fl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),se.resolve()):(dl()<=rt.DEBUG&&Te("QueryEngine","Query:",fl(t),"scans",o.documentReadCount,"local documents and returns",a,"documents as results."),o.documentReadCount>this.ds*a?(dl()<=rt.DEBUG&&Te("QueryEngine","The SDK decides to create cache indexes for query:",fl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ji(t))):se.resolve())}gs(e,t){if(iy(t))return se.resolve(null);let o=ji(t);return this.indexManager.getIndexType(e,o).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=Yf(t,null,"F"),o=ji(t)),this.indexManager.getDocumentsMatchingTarget(e,o).next((c=>{const p=st(...c);return this.fs.getDocuments(e,p).next((_=>this.indexManager.getMinOffset(e,o).next((x=>{const I=this.bs(t,_);return this.Ss(t,I,p,x.readTime)?this.gs(e,Yf(t,null,"F")):this.Ds(e,I,t,x)}))))})))))}ps(e,t,o,a){return iy(t)||a.isEqual(Ke.min())?se.resolve(null):this.fs.getDocuments(e,o).next((c=>{const p=this.bs(t,c);return this.Ss(t,p,o,a)?se.resolve(null):(dl()<=rt.DEBUG&&Te("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),fl(t)),this.Ds(e,p,t,dS(a,Nu)).next((_=>_)))}))}bs(e,t){let o=new Xt(w0(e));return t.forEach(((a,c)=>{qh(e,c)&&(o=o.add(c))})),o}Ss(e,t,o,a){if(e.limit===null)return!1;if(o.size!==t.size)return!0;const c=e.limitType==="F"?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}ys(e,t,o){return dl()<=rt.DEBUG&&Te("QueryEngine","Using full collection scan to execute query:",fl(t)),this.fs.getDocumentsMatchingQuery(e,t,bo.min(),o)}Ds(e,t,o,a){return this.fs.getDocumentsMatchingQuery(e,o,a).next((c=>(t.forEach((p=>{c=c.insert(p.key,p)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Up="LocalStore",KP=3e8;class ZP{constructor(e,t,o,a){this.persistence=e,this.Cs=t,this.serializer=a,this.vs=new Lt(it),this.Fs=new Aa((c=>Np(c)),Rp),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(o)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new VP(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function QP(r,e,t,o){return new ZP(r,e,t,o)}async function W0(r,e){const t=Ze(r);return await t.persistence.runTransaction("Handle user change","readonly",(o=>{let a;return t.mutationQueue.getAllMutationBatches(o).next((c=>(a=c,t.Os(e),t.mutationQueue.getAllMutationBatches(o)))).next((c=>{const p=[],_=[];let x=st();for(const I of a){p.push(I.batchId);for(const C of I.mutations)x=x.add(C.key)}for(const I of c){_.push(I.batchId);for(const C of I.mutations)x=x.add(C.key)}return t.localDocuments.getDocuments(o,x).next((I=>({Ns:I,removedBatchIds:p,addedBatchIds:_})))}))}))}function YP(r,e){const t=Ze(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(o=>{const a=e.batch.keys(),c=t.xs.newChangeBuffer({trackRemovals:!0});return(function(_,x,I,C){const k=I.batch,b=k.keys();let q=se.resolve();return b.forEach((W=>{q=q.next((()=>C.getEntry(x,W))).next((Q=>{const Y=I.docVersions.get(W);_t(Y!==null,48541),Q.version.compareTo(Y)<0&&(k.applyToRemoteDocument(Q,I),Q.isValidDocument()&&(Q.setReadTime(I.commitVersion),C.addEntry(Q)))}))})),q.next((()=>_.mutationQueue.removeMutationBatch(x,k)))})(t,o,e,c).next((()=>c.apply(o))).next((()=>t.mutationQueue.performConsistencyCheck(o))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(o,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,(function(_){let x=st();for(let I=0;I<_.mutationResults.length;++I)_.mutationResults[I].transformResults.length>0&&(x=x.add(_.batch.mutations[I].key));return x})(e)))).next((()=>t.localDocuments.getDocuments(o,a)))}))}function q0(r){const e=Ze(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function JP(r,e){const t=Ze(r),o=e.snapshotVersion;let a=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const p=t.xs.newChangeBuffer({trackRemovals:!0});a=t.vs;const _=[];e.targetChanges.forEach(((C,k)=>{const b=a.get(k);if(!b)return;_.push(t.li.removeMatchingKeys(c,C.removedDocuments,k).next((()=>t.li.addMatchingKeys(c,C.addedDocuments,k))));let q=b.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(k)!==null?q=q.withResumeToken(pn.EMPTY_BYTE_STRING,Ke.min()).withLastLimboFreeSnapshotVersion(Ke.min()):C.resumeToken.approximateByteSize()>0&&(q=q.withResumeToken(C.resumeToken,o)),a=a.insert(k,q),(function(Q,Y,de){return Q.resumeToken.approximateByteSize()===0||Y.snapshotVersion.toMicroseconds()-Q.snapshotVersion.toMicroseconds()>=KP?!0:de.addedDocuments.size+de.modifiedDocuments.size+de.removedDocuments.size>0})(b,q,C)&&_.push(t.li.updateTargetData(c,q))}));let x=bs(),I=st();if(e.documentUpdates.forEach((C=>{e.resolvedLimboDocuments.has(C)&&_.push(t.persistence.referenceDelegate.updateLimboDocument(c,C))})),_.push(XP(c,p,e.documentUpdates).next((C=>{x=C.Bs,I=C.Ls}))),!o.isEqual(Ke.min())){const C=t.li.getLastRemoteSnapshotVersion(c).next((k=>t.li.setTargetsMetadata(c,c.currentSequenceNumber,o)));_.push(C)}return se.waitFor(_).next((()=>p.apply(c))).next((()=>t.localDocuments.getLocalViewOfDocuments(c,x,I))).next((()=>x))})).then((c=>(t.vs=a,c)))}function XP(r,e,t){let o=st(),a=st();return t.forEach((c=>o=o.add(c))),e.getEntries(r,o).next((c=>{let p=bs();return t.forEach(((_,x)=>{const I=c.get(_);x.isFoundDocument()!==I.isFoundDocument()&&(a=a.add(_)),x.isNoDocument()&&x.version.isEqual(Ke.min())?(e.removeEntry(_,x.readTime),p=p.insert(_,x)):!I.isValidDocument()||x.version.compareTo(I.version)>0||x.version.compareTo(I.version)===0&&I.hasPendingWrites?(e.addEntry(x),p=p.insert(_,x)):Te(Up,"Ignoring outdated watch update for ",_,". Current version:",I.version," Watch version:",x.version)})),{Bs:p,Ls:a}}))}function eC(r,e){const t=Ze(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(o=>(e===void 0&&(e=kp),t.mutationQueue.getNextMutationBatchAfterBatchId(o,e))))}function tC(r,e){const t=Ze(r);return t.persistence.runTransaction("Allocate target","readwrite",(o=>{let a;return t.li.getTargetData(o,e).next((c=>c?(a=c,se.resolve(a)):t.li.allocateTargetId(o).next((p=>(a=new Io(e,p,"TargetPurposeListen",o.currentSequenceNumber),t.li.addTargetData(o,a).next((()=>a)))))))})).then((o=>{const a=t.vs.get(o.targetId);return(a===null||o.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.vs=t.vs.insert(o.targetId,o),t.Fs.set(e,o.targetId)),o}))}async function np(r,e,t){const o=Ze(r),a=o.vs.get(e),c=t?"readwrite":"readwrite-primary";try{t||await o.persistence.runTransaction("Release target",c,(p=>o.persistence.referenceDelegate.removeTarget(p,a)))}catch(p){if(!Ml(p))throw p;Te(Up,`Failed to update sequence numbers for target ${e}: ${p}`)}o.vs=o.vs.remove(e),o.Fs.delete(a.target)}function _y(r,e,t){const o=Ze(r);let a=Ke.min(),c=st();return o.persistence.runTransaction("Execute query","readwrite",(p=>(function(x,I,C){const k=Ze(x),b=k.Fs.get(C);return b!==void 0?se.resolve(k.vs.get(b)):k.li.getTargetData(I,C)})(o,p,ji(e)).next((_=>{if(_)return a=_.lastLimboFreeSnapshotVersion,o.li.getMatchingKeysForTargetId(p,_.targetId).next((x=>{c=x}))})).next((()=>o.Cs.getDocumentsMatchingQuery(p,e,t?a:Ke.min(),t?c:st()))).next((_=>(nC(o,US(e),_),{documents:_,ks:c})))))}function nC(r,e,t){let o=r.Ms.get(e)||Ke.min();t.forEach(((a,c)=>{c.readTime.compareTo(o)>0&&(o=c.readTime)})),r.Ms.set(e,o)}class yy{constructor(){this.activeTargetIds=GS()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class rC{constructor(){this.vo=new yy,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,o){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,o){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new yy,Promise.resolve()}handleUserChange(e,t,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vy="ConnectivityMonitor";class wy{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Te(vy,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Te(vy,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let th=null;function rp(){return th===null?th=(function(){return 268435456+Math.round(2147483648*Math.random())})():th++,"0x"+th.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cf="RestConnection",sC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class oC{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${o}/databases/${a}`,this.$o=this.databaseId.database===Eh?`project_id=${o}`:`project_id=${o}&database_id=${a}`}Wo(e,t,o,a,c){const p=rp(),_=this.Qo(e,t.toUriEncodedString());Te(Cf,`Sending RPC '${e}' ${p}:`,_,o);const x={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(x,a,c);const{host:I}=new URL(_),C=Nl(I);return this.zo(e,_,x,o,C).then((k=>(Te(Cf,`Received RPC '${e}' ${p}: `,k),k)),(k=>{throw Ia(Cf,`RPC '${e}' ${p} failed with error: `,k,"url: ",_,"request:",o),k}))}jo(e,t,o,a,c,p){return this.Wo(e,t,o,a,c)}Go(e,t,o){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ll})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,c)=>e[c]=a)),o&&o.headers.forEach(((a,c)=>e[c]=a))}Qo(e,t){const o=sC[e];let a=`${this.qo}/v1/${t}:${o}`;return this.databaseInfo.apiKey&&(a=`${a}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),a}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sn="WebChannelConnection",pu=(r,e,t)=>{r.listen(e,(o=>{try{t(o)}catch(a){setTimeout((()=>{throw a}),0)}}))};class xl extends oC{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!xl.c_){const e=Qv();pu(e,Zv.STAT_EVENT,(t=>{t.stat===Wf.PROXY?Te(Sn,"STAT_EVENT: detected buffering proxy"):t.stat===Wf.NOPROXY&&Te(Sn,"STAT_EVENT: detected no buffering proxy")})),xl.c_=!0}}zo(e,t,o,a,c){const p=rp();return new Promise(((_,x)=>{const I=new Gv;I.setWithCredentials(!0),I.listenOnce(Kv.COMPLETE,(()=>{try{switch(I.getLastErrorCode()){case oh.NO_ERROR:const k=I.getResponseJson();Te(Sn,`XHR for RPC '${e}' ${p} received:`,JSON.stringify(k)),_(k);break;case oh.TIMEOUT:Te(Sn,`RPC '${e}' ${p} timed out`),x(new _e(re.DEADLINE_EXCEEDED,"Request time out"));break;case oh.HTTP_ERROR:const b=I.getStatus();if(Te(Sn,`RPC '${e}' ${p} failed with status:`,b,"response text:",I.getResponseText()),b>0){let q=I.getResponseJson();Array.isArray(q)&&(q=q[0]);const W=q==null?void 0:q.error;if(W&&W.status&&W.message){const Q=(function(de){const pe=de.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(pe)>=0?pe:re.UNKNOWN})(W.status);x(new _e(Q,W.message))}else x(new _e(re.UNKNOWN,"Server responded with status "+I.getStatus()))}else x(new _e(re.UNAVAILABLE,"Connection failed."));break;default:qe(9055,{l_:e,streamId:p,h_:I.getLastErrorCode(),P_:I.getLastError()})}}finally{Te(Sn,`RPC '${e}' ${p} completed.`)}}));const C=JSON.stringify(a);Te(Sn,`RPC '${e}' ${p} sending request:`,a),I.send(t,"POST",C,o,15)}))}T_(e,t,o){const a=rp(),c=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],p=this.createWebChannelTransport(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},x=this.longPollingOptions.timeoutSeconds;x!==void 0&&(_.longPollingTimeout=Math.round(1e3*x)),this.useFetchStreams&&(_.useFetchStreams=!0),this.Go(_.initMessageHeaders,t,o),_.encodeInitMessageHeaders=!0;const I=c.join("");Te(Sn,`Creating RPC '${e}' stream ${a}: ${I}`,_);const C=p.createWebChannel(I,_);this.I_(C);let k=!1,b=!1;const q=new aC({Ho:W=>{b?Te(Sn,`Not sending because RPC '${e}' stream ${a} is closed:`,W):(k||(Te(Sn,`Opening RPC '${e}' stream ${a} transport.`),C.open(),k=!0),Te(Sn,`RPC '${e}' stream ${a} sending:`,W),C.send(W))},Jo:()=>C.close()});return pu(C,_u.EventType.OPEN,(()=>{b||(Te(Sn,`RPC '${e}' stream ${a} transport opened.`),q.i_())})),pu(C,_u.EventType.CLOSE,(()=>{b||(b=!0,Te(Sn,`RPC '${e}' stream ${a} transport closed`),q.o_(),this.E_(C))})),pu(C,_u.EventType.ERROR,(W=>{b||(b=!0,Ia(Sn,`RPC '${e}' stream ${a} transport errored. Name:`,W.name,"Message:",W.message),q.o_(new _e(re.UNAVAILABLE,"The operation could not be completed")))})),pu(C,_u.EventType.MESSAGE,(W=>{var Q;if(!b){const Y=W.data[0];_t(!!Y,16349);const de=Y,pe=(de==null?void 0:de.error)||((Q=de[0])==null?void 0:Q.error);if(pe){Te(Sn,`RPC '${e}' stream ${a} received error:`,pe);const Ee=pe.status;let Ce=(function(F){const R=Wt[F];if(R!==void 0)return N0(R)})(Ee),Se=pe.message;Ee==="NOT_FOUND"&&Se.includes("database")&&Se.includes("does not exist")&&Se.includes(this.databaseId.database)&&Ia(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),Ce===void 0&&(Ce=re.INTERNAL,Se="Unknown error status: "+Ee+" with message "+pe.message),b=!0,q.o_(new _e(Ce,Se)),C.close()}else Te(Sn,`RPC '${e}' stream ${a} received:`,Y),q.__(Y)}})),xl.u_(),setTimeout((()=>{q.s_()}),0),q}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,o){super.Go(e,t,o),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Yv()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lC(r){return new xl(r)}function kf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qh(r){return new dP(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xl.c_=!1;class $0{constructor(e,t,o=1e3,a=1.5,c=6e4){this.Ci=e,this.timerId=t,this.R_=o,this.A_=a,this.V_=c,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),o=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-o);a>0&&Te("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${o} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xy="PersistentStream";class G0{constructor(e,t,o,a,c,p,_,x){this.Ci=e,this.b_=o,this.S_=a,this.connection=c,this.authCredentialsProvider=p,this.appCheckCredentialsProvider=_,this.listener=x,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new $0(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(ks(t.toString()),ks("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([o,a])=>{this.D_===t&&this.G_(o,a)}),(o=>{e((()=>{const a=new _e(re.UNKNOWN,"Fetching auth token failed: "+o.message);return this.z_(a)}))}))}G_(e,t){const o=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{o((()=>this.listener.Zo()))})),this.stream.Yo((()=>{o((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((a=>{o((()=>this.z_(a)))})),this.stream.onMessage((a=>{o((()=>++this.F_==1?this.H_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Te(xy,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(Te(xy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class uC extends G0{constructor(e,t,o,a,c,p){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,o,a,p),this.serializer=c}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=mP(this.serializer,e),o=(function(c){if(!("targetChange"in c))return Ke.min();const p=c.targetChange;return p.targetIds&&p.targetIds.length?Ke.min():p.readTime?Fi(p.readTime):Ke.min()})(e);return this.listener.J_(t,o)}Z_(e){const t={};t.database=tp(this.serializer),t.addTarget=(function(c,p){let _;const x=p.target;if(_=Zf(x)?{documents:yP(c,x)}:{query:vP(c,x).ft},_.targetId=p.targetId,p.resumeToken.approximateByteSize()>0){_.resumeToken=D0(c,p.resumeToken);const I=Jf(c,p.expectedCount);I!==null&&(_.expectedCount=I)}else if(p.snapshotVersion.compareTo(Ke.min())>0){_.readTime=Ch(c,p.snapshotVersion.toTimestamp());const I=Jf(c,p.expectedCount);I!==null&&(_.expectedCount=I)}return _})(this.serializer,e);const o=xP(this.serializer,e);o&&(t.labels=o),this.K_(t)}X_(e){const t={};t.database=tp(this.serializer),t.removeTarget=e,this.K_(t)}}class cC extends G0{constructor(e,t,o,a,c,p){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,o,a,p),this.serializer=c}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return _t(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,_t(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){_t(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=_P(e.writeResults,e.commitTime),o=Fi(e.commitTime);return this.listener.na(o,t)}ra(){const e={};e.database=tp(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((o=>gP(this.serializer,o)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{}class dC extends hC{constructor(e,t,o,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=o,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new _e(re.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,o,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,p])=>this.connection.Wo(e,Xf(t,o),a,c,p))).catch((c=>{throw c.name==="FirebaseError"?(c.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new _e(re.UNKNOWN,c.toString())}))}jo(e,t,o,a,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([p,_])=>this.connection.jo(e,Xf(t,o),a,p,_,c))).catch((p=>{throw p.name==="FirebaseError"?(p.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),p):new _e(re.UNKNOWN,p.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function fC(r,e,t,o){return new dC(r,e,t,o)}class pC{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ks(t),this.aa=!1):Te("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sa="RemoteStore";class mC{constructor(e,t,o,a,c){this.localStore=e,this.datastore=t,this.asyncQueue=o,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=c,this.Aa.Mo((p=>{o.enqueueAndForget((async()=>{ba(this)&&(Te(Sa,"Restarting streams for network reachability change."),await(async function(x){const I=Ze(x);I.Ea.add(4),await Gu(I),I.Va.set("Unknown"),I.Ea.delete(4),await Yh(I)})(this))}))})),this.Va=new pC(o,a)}}async function Yh(r){if(ba(r))for(const e of r.Ra)await e(!0)}async function Gu(r){for(const e of r.Ra)await e(!1)}function K0(r,e){const t=Ze(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),qp(t)?Wp(t):Vl(t).O_()&&Hp(t,e))}function Bp(r,e){const t=Ze(r),o=Vl(t);t.Ia.delete(e),o.O_()&&Z0(t,e),t.Ia.size===0&&(o.O_()?o.L_():ba(t)&&t.Va.set("Unknown"))}function Hp(r,e){if(r.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ke.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Vl(r).Z_(e)}function Z0(r,e){r.da.$e(e),Vl(r).X_(e)}function Wp(r){r.da=new lP({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Vl(r).start(),r.Va.ua()}function qp(r){return ba(r)&&!Vl(r).x_()&&r.Ia.size>0}function ba(r){return Ze(r).Ea.size===0}function Q0(r){r.da=void 0}async function gC(r){r.Va.set("Online")}async function _C(r){r.Ia.forEach(((e,t)=>{Hp(r,e)}))}async function yC(r,e){Q0(r),qp(r)?(r.Va.ha(e),Wp(r)):r.Va.set("Unknown")}async function vC(r,e,t){if(r.Va.set("Online"),e instanceof L0&&e.state===2&&e.cause)try{await(async function(a,c){const p=c.cause;for(const _ of c.targetIds)a.Ia.has(_)&&(await a.remoteSyncer.rejectListen(_,p),a.Ia.delete(_),a.da.removeTarget(_))})(r,e)}catch(o){Te(Sa,"Failed to remove targets %s: %s ",e.targetIds.join(","),o),await Ah(r,o)}else if(e instanceof ch?r.da.Xe(e):e instanceof R0?r.da.st(e):r.da.tt(e),!t.isEqual(Ke.min()))try{const o=await q0(r.localStore);t.compareTo(o)>=0&&await(function(c,p){const _=c.da.Tt(p);return _.targetChanges.forEach(((x,I)=>{if(x.resumeToken.approximateByteSize()>0){const C=c.Ia.get(I);C&&c.Ia.set(I,C.withResumeToken(x.resumeToken,p))}})),_.targetMismatches.forEach(((x,I)=>{const C=c.Ia.get(x);if(!C)return;c.Ia.set(x,C.withResumeToken(pn.EMPTY_BYTE_STRING,C.snapshotVersion)),Z0(c,x);const k=new Io(C.target,x,I,C.sequenceNumber);Hp(c,k)})),c.remoteSyncer.applyRemoteEvent(_)})(r,t)}catch(o){Te(Sa,"Failed to raise snapshot:",o),await Ah(r,o)}}async function Ah(r,e,t){if(!Ml(e))throw e;r.Ea.add(1),await Gu(r),r.Va.set("Offline"),t||(t=()=>q0(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{Te(Sa,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await Yh(r)}))}function Y0(r,e){return e().catch((t=>Ah(r,t,e)))}async function Jh(r){const e=Ze(r),t=Do(e);let o=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:kp;for(;wC(e);)try{const a=await eC(e.localStore,o);if(a===null){e.Ta.length===0&&t.L_();break}o=a.batchId,xC(e,a)}catch(a){await Ah(e,a)}J0(e)&&X0(e)}function wC(r){return ba(r)&&r.Ta.length<10}function xC(r,e){r.Ta.push(e);const t=Do(r);t.O_()&&t.Y_&&t.ea(e.mutations)}function J0(r){return ba(r)&&!Do(r).x_()&&r.Ta.length>0}function X0(r){Do(r).start()}async function EC(r){Do(r).ra()}async function TC(r){const e=Do(r);for(const t of r.Ta)e.ea(t.mutations)}async function IC(r,e,t){const o=r.Ta.shift(),a=Mp.from(o,e,t);await Y0(r,(()=>r.remoteSyncer.applySuccessfulWrite(a))),await Jh(r)}async function SC(r,e){e&&Do(r).Y_&&await(async function(o,a){if((function(p){return sP(p)&&p!==re.ABORTED})(a.code)){const c=o.Ta.shift();Do(o).B_(),await Y0(o,(()=>o.remoteSyncer.rejectFailedWrite(c.batchId,a))),await Jh(o)}})(r,e),J0(r)&&X0(r)}async function Ey(r,e){const t=Ze(r);t.asyncQueue.verifyOperationInProgress(),Te(Sa,"RemoteStore received new credentials");const o=ba(t);t.Ea.add(3),await Gu(t),o&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Yh(t)}async function PC(r,e){const t=Ze(r);e?(t.Ea.delete(2),await Yh(t)):e||(t.Ea.add(2),await Gu(t),t.Va.set("Unknown"))}function Vl(r){return r.ma||(r.ma=(function(t,o,a){const c=Ze(t);return c.sa(),new uC(o,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(r.datastore,r.asyncQueue,{Zo:gC.bind(null,r),Yo:_C.bind(null,r),t_:yC.bind(null,r),J_:vC.bind(null,r)}),r.Ra.push((async e=>{e?(r.ma.B_(),qp(r)?Wp(r):r.Va.set("Unknown")):(await r.ma.stop(),Q0(r))}))),r.ma}function Do(r){return r.fa||(r.fa=(function(t,o,a){const c=Ze(t);return c.sa(),new cC(o,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),Yo:EC.bind(null,r),t_:SC.bind(null,r),ta:TC.bind(null,r),na:IC.bind(null,r)}),r.Ra.push((async e=>{e?(r.fa.B_(),await Jh(r)):(await r.fa.stop(),r.Ta.length>0&&(Te(Sa,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(e,t,o,a,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=o,this.op=a,this.removalCallback=c,this.deferred=new Ss,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((p=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,o,a,c){const p=Date.now()+o,_=new $p(e,t,p,a,c);return _.start(o),_}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _e(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Gp(r,e){if(ks("AsyncQueue",`${e}: ${r}`),Ml(r))return new _e(re.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{static emptySet(e){return new El(e.comparator)}constructor(e){this.comparator=e?(t,o)=>e(t,o)||Ve.comparator(t.key,o.key):(t,o)=>Ve.comparator(t.key,o.key),this.keyedMap=yu(),this.sortedSet=new Lt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,o)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof El)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=o.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const o=new El;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=t,o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{constructor(){this.ga=new Lt(Ve.comparator)}track(e){const t=e.doc.key,o=this.ga.get(t);o?e.type!==0&&o.type===3?this.ga=this.ga.insert(t,e):e.type===3&&o.type!==1?this.ga=this.ga.insert(t,{type:o.type,doc:e.doc}):e.type===2&&o.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&o.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&o.type===0?this.ga=this.ga.remove(t):e.type===1&&o.type===2?this.ga=this.ga.insert(t,{type:1,doc:o.doc}):e.type===0&&o.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):qe(63341,{Vt:e,pa:o}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,o)=>{e.push(o)})),e}}class Al{constructor(e,t,o,a,c,p,_,x,I){this.query=e,this.docs=t,this.oldDocs=o,this.docChanges=a,this.mutatedKeys=c,this.fromCache=p,this.syncStateChanged=_,this.excludesMetadataChanges=x,this.hasCachedResults=I}static fromInitialDocuments(e,t,o,a,c){const p=[];return t.forEach((_=>{p.push({type:0,doc:_})})),new Al(e,t,El.emptySet(t),p,o,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Wh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,o=e.docChanges;if(t.length!==o.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==o[a].type||!t[a].doc.isEqual(o[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class kC{constructor(){this.queries=Iy(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,o){const a=Ze(t),c=a.queries;a.queries=Iy(),c.forEach(((p,_)=>{for(const x of _.ba)x.onError(o)}))})(this,new _e(re.ABORTED,"Firestore shutting down"))}}function Iy(){return new Aa((r=>v0(r)),Wh)}async function ew(r,e){const t=Ze(r);let o=3;const a=e.query;let c=t.queries.get(a);c?!c.Sa()&&e.Da()&&(o=2):(c=new CC,o=e.Da()?0:1);try{switch(o){case 0:c.wa=await t.onListen(a,!0);break;case 1:c.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(p){const _=Gp(p,`Initialization of query '${fl(e.query)}' failed`);return void e.onError(_)}t.queries.set(a,c),c.ba.push(e),e.va(t.onlineState),c.wa&&e.Fa(c.wa)&&Kp(t)}async function tw(r,e){const t=Ze(r),o=e.query;let a=3;const c=t.queries.get(o);if(c){const p=c.ba.indexOf(e);p>=0&&(c.ba.splice(p,1),c.ba.length===0?a=e.Da()?0:1:!c.Sa()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(o),t.onUnlisten(o,!0);case 1:return t.queries.delete(o),t.onUnlisten(o,!1);case 2:return t.onLastRemoteStoreUnlisten(o);default:return}}function AC(r,e){const t=Ze(r);let o=!1;for(const a of e){const c=a.query,p=t.queries.get(c);if(p){for(const _ of p.ba)_.Fa(a)&&(o=!0);p.wa=a}}o&&Kp(t)}function bC(r,e,t){const o=Ze(r),a=o.queries.get(e);if(a)for(const c of a.ba)c.onError(t);o.queries.delete(e)}function Kp(r){r.Ca.forEach((e=>{e.next()}))}var ip,Sy;(Sy=ip||(ip={})).Ma="default",Sy.Cache="cache";class nw{constructor(e,t,o){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=o||{}}Fa(e){if(!this.options.includeMetadataChanges){const o=[];for(const a of e.docChanges)a.type!==3&&o.push(a);e=new Al(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const o=t!=="Offline";return(!this.options.Ka||!o)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Al.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ip.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{constructor(e){this.key=e}}class iw{constructor(e){this.key=e}}class NC{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=st(),this.mutatedKeys=st(),this.eu=w0(e),this.tu=new El(this.eu)}get nu(){return this.Za}ru(e,t){const o=t?t.iu:new Ty,a=t?t.tu:this.tu;let c=t?t.mutatedKeys:this.mutatedKeys,p=a,_=!1;const x=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,I=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((C,k)=>{const b=a.get(C),q=qh(this.query,k)?k:null,W=!!b&&this.mutatedKeys.has(b.key),Q=!!q&&(q.hasLocalMutations||this.mutatedKeys.has(q.key)&&q.hasCommittedMutations);let Y=!1;b&&q?b.data.isEqual(q.data)?W!==Q&&(o.track({type:3,doc:q}),Y=!0):this.su(b,q)||(o.track({type:2,doc:q}),Y=!0,(x&&this.eu(q,x)>0||I&&this.eu(q,I)<0)&&(_=!0)):!b&&q?(o.track({type:0,doc:q}),Y=!0):b&&!q&&(o.track({type:1,doc:b}),Y=!0,(x||I)&&(_=!0)),Y&&(q?(p=p.add(q),c=Q?c.add(C):c.delete(C)):(p=p.delete(C),c=c.delete(C)))})),this.query.limit!==null)for(;p.size>this.query.limit;){const C=this.query.limitType==="F"?p.last():p.first();p=p.delete(C.key),c=c.delete(C.key),o.track({type:1,doc:C})}return{tu:p,iu:o,Ss:_,mutatedKeys:c}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,o,a){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const p=e.iu.ya();p.sort(((C,k)=>(function(q,W){const Q=Y=>{switch(Y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return qe(20277,{Vt:Y})}};return Q(q)-Q(W)})(C.type,k.type)||this.eu(C.doc,k.doc))),this.ou(o),a=a??!1;const _=t&&!a?this._u():[],x=this.Ya.size===0&&this.current&&!a?1:0,I=x!==this.Xa;return this.Xa=x,p.length!==0||I?{snapshot:new Al(this.query,e.tu,c,p,e.mutatedKeys,x===0,I,!1,!!o&&o.resumeToken.approximateByteSize()>0),au:_}:{au:_}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ty,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=st(),this.tu.forEach((o=>{this.uu(o.key)&&(this.Ya=this.Ya.add(o.key))}));const t=[];return e.forEach((o=>{this.Ya.has(o)||t.push(new iw(o))})),this.Ya.forEach((o=>{e.has(o)||t.push(new rw(o))})),t}cu(e){this.Za=e.ks,this.Ya=st();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Al.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Zp="SyncEngine";class RC{constructor(e,t,o){this.query=e,this.targetId=t,this.view=o}}class LC{constructor(e){this.key=e,this.hu=!1}}class DC{constructor(e,t,o,a,c,p){this.localStore=e,this.remoteStore=t,this.eventManager=o,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=p,this.Pu={},this.Tu=new Aa((_=>v0(_)),Wh),this.Iu=new Map,this.Eu=new Set,this.Ru=new Lt(Ve.comparator),this.Au=new Map,this.Vu=new jp,this.du={},this.mu=new Map,this.fu=kl.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function MC(r,e,t=!0){const o=cw(r);let a;const c=o.Tu.get(e);return c?(o.sharedClientState.addLocalQueryTarget(c.targetId),a=c.view.lu()):a=await sw(o,e,t,!0),a}async function OC(r,e){const t=cw(r);await sw(t,e,!0,!1)}async function sw(r,e,t,o){const a=await tC(r.localStore,ji(e)),c=a.targetId,p=r.sharedClientState.addLocalQueryTarget(c,t);let _;return o&&(_=await VC(r,e,c,p==="current",a.resumeToken)),r.isPrimaryClient&&t&&K0(r.remoteStore,a),_}async function VC(r,e,t,o,a){r.pu=(k,b,q)=>(async function(Q,Y,de,pe){let Ee=Y.view.ru(de);Ee.Ss&&(Ee=await _y(Q.localStore,Y.query,!1).then((({documents:F})=>Y.view.ru(F,Ee))));const Ce=pe&&pe.targetChanges.get(Y.targetId),Se=pe&&pe.targetMismatches.get(Y.targetId)!=null,Le=Y.view.applyChanges(Ee,Q.isPrimaryClient,Ce,Se);return Cy(Q,Y.targetId,Le.au),Le.snapshot})(r,k,b,q);const c=await _y(r.localStore,e,!0),p=new NC(e,c.ks),_=p.ru(c.documents),x=$u.createSynthesizedTargetChangeForCurrentChange(t,o&&r.onlineState!=="Offline",a),I=p.applyChanges(_,r.isPrimaryClient,x);Cy(r,t,I.au);const C=new RC(e,t,p);return r.Tu.set(e,C),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),I.snapshot}async function jC(r,e,t){const o=Ze(r),a=o.Tu.get(e),c=o.Iu.get(a.targetId);if(c.length>1)return o.Iu.set(a.targetId,c.filter((p=>!Wh(p,e)))),void o.Tu.delete(e);o.isPrimaryClient?(o.sharedClientState.removeLocalQueryTarget(a.targetId),o.sharedClientState.isActiveQueryTarget(a.targetId)||await np(o.localStore,a.targetId,!1).then((()=>{o.sharedClientState.clearQueryState(a.targetId),t&&Bp(o.remoteStore,a.targetId),sp(o,a.targetId)})).catch(Dl)):(sp(o,a.targetId),await np(o.localStore,a.targetId,!0))}async function FC(r,e){const t=Ze(r),o=t.Tu.get(e),a=t.Iu.get(o.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(o.targetId),Bp(t.remoteStore,o.targetId))}async function zC(r,e,t){const o=GC(r);try{const a=await(function(p,_){const x=Ze(p),I=St.now(),C=_.reduce(((q,W)=>q.add(W.key)),st());let k,b;return x.persistence.runTransaction("Locally write mutations","readwrite",(q=>{let W=bs(),Q=st();return x.xs.getEntries(q,C).next((Y=>{W=Y,W.forEach(((de,pe)=>{pe.isValidDocument()||(Q=Q.add(de))}))})).next((()=>x.localDocuments.getOverlayedDocuments(q,W))).next((Y=>{k=Y;const de=[];for(const pe of _){const Ee=eP(pe,k.get(pe.key).overlayedDocument);Ee!=null&&de.push(new Fo(pe.key,Ee,h0(Ee.value.mapValue),pr.exists(!0)))}return x.mutationQueue.addMutationBatch(q,I,de,_)})).next((Y=>{b=Y;const de=Y.applyToLocalDocumentSet(k,Q);return x.documentOverlayCache.saveOverlays(q,Y.batchId,de)}))})).then((()=>({batchId:b.batchId,changes:E0(k)})))})(o.localStore,e);o.sharedClientState.addPendingMutation(a.batchId),(function(p,_,x){let I=p.du[p.currentUser.toKey()];I||(I=new Lt(it)),I=I.insert(_,x),p.du[p.currentUser.toKey()]=I})(o,a.batchId,t),await Ku(o,a.changes),await Jh(o.remoteStore)}catch(a){const c=Gp(a,"Failed to persist write");t.reject(c)}}async function ow(r,e){const t=Ze(r);try{const o=await JP(t.localStore,e);e.targetChanges.forEach(((a,c)=>{const p=t.Au.get(c);p&&(_t(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?p.hu=!0:a.modifiedDocuments.size>0?_t(p.hu,14607):a.removedDocuments.size>0&&(_t(p.hu,42227),p.hu=!1))})),await Ku(t,o,e)}catch(o){await Dl(o)}}function Py(r,e,t){const o=Ze(r);if(o.isPrimaryClient&&t===0||!o.isPrimaryClient&&t===1){const a=[];o.Tu.forEach(((c,p)=>{const _=p.view.va(e);_.snapshot&&a.push(_.snapshot)})),(function(p,_){const x=Ze(p);x.onlineState=_;let I=!1;x.queries.forEach(((C,k)=>{for(const b of k.ba)b.va(_)&&(I=!0)})),I&&Kp(x)})(o.eventManager,e),a.length&&o.Pu.J_(a),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}async function UC(r,e,t){const o=Ze(r);o.sharedClientState.updateQueryState(e,"rejected",t);const a=o.Au.get(e),c=a&&a.key;if(c){let p=new Lt(Ve.comparator);p=p.insert(c,Cn.newNoDocument(c,Ke.min()));const _=st().add(c),x=new Zh(Ke.min(),new Map,new Lt(it),p,_);await ow(o,x),o.Ru=o.Ru.remove(c),o.Au.delete(e),Qp(o)}else await np(o.localStore,e,!1).then((()=>sp(o,e,t))).catch(Dl)}async function BC(r,e){const t=Ze(r),o=e.batch.batchId;try{const a=await YP(t.localStore,e);lw(t,o,null),aw(t,o),t.sharedClientState.updateMutationState(o,"acknowledged"),await Ku(t,a)}catch(a){await Dl(a)}}async function HC(r,e,t){const o=Ze(r);try{const a=await(function(p,_){const x=Ze(p);return x.persistence.runTransaction("Reject batch","readwrite-primary",(I=>{let C;return x.mutationQueue.lookupMutationBatch(I,_).next((k=>(_t(k!==null,37113),C=k.keys(),x.mutationQueue.removeMutationBatch(I,k)))).next((()=>x.mutationQueue.performConsistencyCheck(I))).next((()=>x.documentOverlayCache.removeOverlaysForBatchId(I,C,_))).next((()=>x.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(I,C))).next((()=>x.localDocuments.getDocuments(I,C)))}))})(o.localStore,e);lw(o,e,t),aw(o,e),o.sharedClientState.updateMutationState(e,"rejected",t),await Ku(o,a)}catch(a){await Dl(a)}}function aw(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function lw(r,e,t){const o=Ze(r);let a=o.du[o.currentUser.toKey()];if(a){const c=a.get(e);c&&(t?c.reject(t):c.resolve(),a=a.remove(e)),o.du[o.currentUser.toKey()]=a}}function sp(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const o of r.Iu.get(e))r.Tu.delete(o),t&&r.Pu.yu(o,t);r.Iu.delete(e),r.isPrimaryClient&&r.Vu.Gr(e).forEach((o=>{r.Vu.containsKey(o)||uw(r,o)}))}function uw(r,e){r.Eu.delete(e.path.canonicalString());const t=r.Ru.get(e);t!==null&&(Bp(r.remoteStore,t),r.Ru=r.Ru.remove(e),r.Au.delete(t),Qp(r))}function Cy(r,e,t){for(const o of t)o instanceof rw?(r.Vu.addReference(o.key,e),WC(r,o)):o instanceof iw?(Te(Zp,"Document no longer in limbo: "+o.key),r.Vu.removeReference(o.key,e),r.Vu.containsKey(o.key)||uw(r,o.key)):qe(19791,{wu:o})}function WC(r,e){const t=e.key,o=t.path.canonicalString();r.Ru.get(t)||r.Eu.has(o)||(Te(Zp,"New document in limbo: "+t),r.Eu.add(o),Qp(r))}function Qp(r){for(;r.Eu.size>0&&r.Ru.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new Ve(Et.fromString(e)),o=r.fu.next();r.Au.set(o,new LC(t)),r.Ru=r.Ru.insert(t,o),K0(r.remoteStore,new Io(ji(Lp(t.path)),o,"TargetPurposeLimboResolution",Uh.ce))}}async function Ku(r,e,t){const o=Ze(r),a=[],c=[],p=[];o.Tu.isEmpty()||(o.Tu.forEach(((_,x)=>{p.push(o.pu(x,e,t).then((I=>{var C;if((I||t)&&o.isPrimaryClient){const k=I?!I.fromCache:(C=t==null?void 0:t.targetChanges.get(x.targetId))==null?void 0:C.current;o.sharedClientState.updateQueryState(x.targetId,k?"current":"not-current")}if(I){a.push(I);const k=zp.Es(x.targetId,I);c.push(k)}})))})),await Promise.all(p),o.Pu.J_(a),await(async function(x,I){const C=Ze(x);try{await C.persistence.runTransaction("notifyLocalViewChanges","readwrite",(k=>se.forEach(I,(b=>se.forEach(b.Ts,(q=>C.persistence.referenceDelegate.addReference(k,b.targetId,q))).next((()=>se.forEach(b.Is,(q=>C.persistence.referenceDelegate.removeReference(k,b.targetId,q)))))))))}catch(k){if(!Ml(k))throw k;Te(Up,"Failed to update sequence numbers: "+k)}for(const k of I){const b=k.targetId;if(!k.fromCache){const q=C.vs.get(b),W=q.snapshotVersion,Q=q.withLastLimboFreeSnapshotVersion(W);C.vs=C.vs.insert(b,Q)}}})(o.localStore,c))}async function qC(r,e){const t=Ze(r);if(!t.currentUser.isEqual(e)){Te(Zp,"User change. New user:",e.toKey());const o=await W0(t.localStore,e);t.currentUser=e,(function(c,p){c.mu.forEach((_=>{_.forEach((x=>{x.reject(new _e(re.CANCELLED,p))}))})),c.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),await Ku(t,o.Ns)}}function $C(r,e){const t=Ze(r),o=t.Au.get(e);if(o&&o.hu)return st().add(o.key);{let a=st();const c=t.Iu.get(e);if(!c)return a;for(const p of c){const _=t.Tu.get(p);a=a.unionWith(_.view.nu)}return a}}function cw(r){const e=Ze(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=ow.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$C.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=UC.bind(null,e),e.Pu.J_=AC.bind(null,e.eventManager),e.Pu.yu=bC.bind(null,e.eventManager),e}function GC(r){const e=Ze(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=BC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=HC.bind(null,e),e}class bh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Qh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return QP(this.persistence,new GP,e.initialUser,this.serializer)}Cu(e){return new H0(Fp.Vi,this.serializer)}Du(e){return new rC}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}bh.provider={build:()=>new bh};class KC extends bh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){_t(this.persistence.referenceDelegate instanceof kh,46915);const o=this.persistence.referenceDelegate.garbageCollector;return new RP(o,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?tr.withCacheSize(this.cacheSizeBytes):tr.DEFAULT;return new H0((o=>kh.Vi(o,t)),this.serializer)}}class op{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=o=>Py(this.syncEngine,o,1),this.remoteStore.remoteSyncer.handleCredentialChange=qC.bind(null,this.syncEngine),await PC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new kC})()}createDatastore(e){const t=Qh(e.databaseInfo.databaseId),o=lC(e.databaseInfo);return fC(e.authCredentials,e.appCheckCredentials,o,t)}createRemoteStore(e){return(function(o,a,c,p,_){return new mC(o,a,c,p,_)})(this.localStore,this.datastore,e.asyncQueue,(t=>Py(this.syncEngine,t,0)),(function(){return wy.v()?new wy:new iC})())}createSyncEngine(e,t){return(function(a,c,p,_,x,I,C){const k=new DC(a,c,p,_,x,I);return C&&(k.gu=!0),k})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(a){const c=Ze(a);Te(Sa,"RemoteStore shutting down."),c.Ea.add(5),await Gu(c),c.Aa.shutdown(),c.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}op.provider={build:()=>new op};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ks("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mo="FirestoreClient";class ZC{constructor(e,t,o,a,c){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=o,this._databaseInfo=a,this.user=Pn.UNAUTHENTICATED,this.clientId=Cp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(o,(async p=>{Te(Mo,"Received user=",p.uid),await this.authCredentialListener(p),this.user=p})),this.appCheckCredentials.start(o,(p=>(Te(Mo,"Received new app check token=",p),this.appCheckCredentialListener(p,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ss;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const o=Gp(t,"Failed to shutdown persistence");e.reject(o)}})),e.promise}}async function Af(r,e){r.asyncQueue.verifyOperationInProgress(),Te(Mo,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let o=t.initialUser;r.setCredentialChangeListener((async a=>{o.isEqual(a)||(await W0(e.localStore,a),o=a)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function ky(r,e){r.asyncQueue.verifyOperationInProgress();const t=await QC(r);Te(Mo,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((o=>Ey(e.remoteStore,o))),r.setAppCheckTokenChangeListener(((o,a)=>Ey(e.remoteStore,a))),r._onlineComponents=e}async function QC(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){Te(Mo,"Using user provided OfflineComponentProvider");try{await Af(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===re.FAILED_PRECONDITION||a.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;Ia("Error using user provided cache. Falling back to memory cache: "+t),await Af(r,new bh)}}else Te(Mo,"Using default OfflineComponentProvider"),await Af(r,new KC(void 0));return r._offlineComponents}async function dw(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(Te(Mo,"Using user provided OnlineComponentProvider"),await ky(r,r._uninitializedComponentsProvider._online)):(Te(Mo,"Using default OnlineComponentProvider"),await ky(r,new op))),r._onlineComponents}function YC(r){return dw(r).then((e=>e.syncEngine))}async function fw(r){const e=await dw(r),t=e.eventManager;return t.onListen=MC.bind(null,e.syncEngine),t.onUnlisten=jC.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=OC.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=FC.bind(null,e.syncEngine),t}function JC(r,e,t={}){const o=new Ss;return r.asyncQueue.enqueueAndForget((async()=>(function(c,p,_,x,I){const C=new hw({next:b=>{C.Nu(),p.enqueueAndForget((()=>tw(c,k)));const q=b.docs.has(_);!q&&b.fromCache?I.reject(new _e(re.UNAVAILABLE,"Failed to get document because the client is offline.")):q&&b.fromCache&&x&&x.source==="server"?I.reject(new _e(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):I.resolve(b)},error:b=>I.reject(b)}),k=new nw(Lp(_.path),C,{includeMetadataChanges:!0,Ka:!0});return ew(c,k)})(await fw(r),r.asyncQueue,e,t,o))),o.promise}function XC(r,e,t={}){const o=new Ss;return r.asyncQueue.enqueueAndForget((async()=>(function(c,p,_,x,I){const C=new hw({next:b=>{C.Nu(),p.enqueueAndForget((()=>tw(c,k))),b.fromCache&&x.source==="server"?I.reject(new _e(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):I.resolve(b)},error:b=>I.reject(b)}),k=new nw(_,C,{includeMetadataChanges:!0,Ka:!0});return ew(c,k)})(await fw(r),r.asyncQueue,e,t,o))),o.promise}function ek(r,e){const t=new Ss;return r.asyncQueue.enqueueAndForget((async()=>zC(await YC(r),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pw(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tk="ComponentProvider",Ay=new Map;function nk(r,e,t,o,a){return new ES(r,e,t,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,pw(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator,o)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mw="firestore.googleapis.com",by=!0;class Ny{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new _e(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=mw,this.ssl=by}else this.host=e.host,this.ssl=e.ssl??by;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=B0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<bP)throw new _e(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}hS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=pw(e.experimentalLongPollingOptions??{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new _e(re.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new _e(re.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new _e(re.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(o,a){return o.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Xh{constructor(e,t,o,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=o,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ny({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new _e(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new _e(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ny(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(o){if(!o)return new tS;switch(o.type){case"firstParty":return new sS(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new _e(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const o=Ay.get(t);o&&(Te(tk,"Removing Datastore"),Ay.delete(t),o.terminate())})(this),Promise.resolve()}}function rk(r,e,t,o={}){var I;r=As(r,Xh);const a=Nl(e),c=r._getSettings(),p={...c,emulatorOptions:r._getEmulatorOptions()},_=`${e}:${t}`;a&&(nv(`https://${_}`),rv("Firestore",!0)),c.host!==mw&&c.host!==_&&Ia("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const x={...c,host:_,ssl:a,emulatorOptions:o};if(!va(x,p)&&(r._setSettings(x),o.mockUserToken)){let C,k;if(typeof o.mockUserToken=="string")C=o.mockUserToken,k=Pn.MOCK_USER;else{C=zx(o.mockUserToken,(I=r._app)==null?void 0:I.options.projectId);const b=o.mockUserToken.sub||o.mockUserToken.user_id;if(!b)throw new _e(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");k=new Pn(b)}r._authCredentials=new nS(new Xv(C,k))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e,t,o){this.converter=t,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new Na(this.firestore,e,this._query)}}class Gt{constructor(e,t,o){this.converter=t,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ao(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gt(this.firestore,e,this._key)}toJSON(){return{type:Gt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,o){if(Wu(t,Gt._jsonSchema))return new Gt(e,o||null,new Ve(Et.fromString(t.referencePath)))}}Gt._jsonSchemaVersion="firestore/documentReference/1.0",Gt._jsonSchema={type:$t("string",Gt._jsonSchemaVersion),referencePath:$t("string")};class Ao extends Na{constructor(e,t,o){super(e,t,Lp(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gt(this.firestore,null,new Ve(e))}withConverter(e){return new Ao(this.firestore,e,this._path)}}function gw(r,e,...t){if(r=Ft(r),e0("collection","path",e),r instanceof Xh){const o=Et.fromString(e,...t);return W_(o),new Ao(r,null,o)}{if(!(r instanceof Gt||r instanceof Ao))throw new _e(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=r._path.child(Et.fromString(e,...t));return W_(o),new Ao(r.firestore,null,o)}}function Yp(r,e,...t){if(r=Ft(r),arguments.length===1&&(e=Cp.newId()),e0("doc","path",e),r instanceof Xh){const o=Et.fromString(e,...t);return H_(o),new Gt(r,null,new Ve(o))}{if(!(r instanceof Gt||r instanceof Ao))throw new _e(re.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=r._path.child(Et.fromString(e,...t));return H_(o),new Gt(r.firestore,r instanceof Ao?r.converter:null,new Ve(o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ry="AsyncQueue";class Ly{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new $0(this,"async_queue_retry"),this._c=()=>{const o=kf();o&&Te(Ry,"Visibility state changed to "+o.visibilityState),this.M_.w_()},this.ac=e;const t=kf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=kf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Ss;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Ml(e))throw e;Te(Ry,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((o=>{throw this.nc=o,this.rc=!1,ks("INTERNAL UNHANDLED ERROR: ",Dy(o)),o})).then((o=>(this.rc=!1,o))))));return this.ac=t,t}enqueueAfterDelay(e,t,o){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=$p.createAndSchedule(this,e,t,o,(c=>this.hc(c)));return this.tc.push(a),a}uc(){this.nc&&qe(47125,{Pc:Dy(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,o)=>t.targetTimeMs-o.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Dy(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class jl extends Xh{constructor(e,t,o,a){super(e,t,o,a),this.type="firestore",this._queue=new Ly,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Ly(e),this._firestoreClient=void 0,await e}}}function ik(r,e){const t=typeof r=="object"?r:av(),o=typeof r=="string"?r:Eh,a=dp(t,"firestore").getImmediate({identifier:o});if(!a._initialized){const c=jx("firestore");c&&rk(a,...c)}return a}function ed(r){if(r._terminated)throw new _e(re.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||sk(r),r._firestoreClient}function sk(r){var o,a,c,p;const e=r._freezeSettings(),t=nk(r._databaseId,((o=r._app)==null?void 0:o.options.appId)||"",r._persistenceKey,(a=r._app)==null?void 0:a.options.apiKey,e);r._componentsProvider||(c=e.localCache)!=null&&c._offlineComponentProvider&&((p=e.localCache)!=null&&p._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new ZC(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(x){const I=x==null?void 0:x._online.build();return{_offline:x==null?void 0:x._offline.build(I),_online:I}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Hr(pn.fromBase64String(e))}catch(t){throw new _e(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Hr(pn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Hr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Wu(e,Hr._jsonSchema))return Hr.fromBase64String(e.bytes)}}Hr._jsonSchemaVersion="firestore/bytes/1.0",Hr._jsonSchema={type:$t("string",Hr._jsonSchemaVersion),bytes:$t("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new _e(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new _e(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new _e(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return it(this._lat,e._lat)||it(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:zi._jsonSchemaVersion}}static fromJSON(e){if(Wu(e,zi._jsonSchema))return new zi(e.latitude,e.longitude)}}zi._jsonSchemaVersion="firestore/geoPoint/1.0",zi._jsonSchema={type:$t("string",zi._jsonSchemaVersion),latitude:$t("number"),longitude:$t("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(o,a){if(o.length!==a.length)return!1;for(let c=0;c<o.length;++c)if(o[c]!==a[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:oi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Wu(e,oi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new oi(e.vectorValues);throw new _e(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}oi._jsonSchemaVersion="firestore/vectorValue/1.0",oi._jsonSchema={type:$t("string",oi._jsonSchemaVersion),vectorValues:$t("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ok=/^__.*__$/;class ak{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return this.fieldMask!==null?new Fo(e,this.data,this.fieldMask,t,this.fieldTransforms):new qu(e,this.data,t,this.fieldTransforms)}}class _w{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return new Fo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function yw(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw qe(40011,{dataSource:r})}}class em{constructor(e,t,o,a,c,p){this.settings=e,this.databaseId=t,this.serializer=o,this.ignoreUndefinedProperties=a,c===void 0&&this.validatePath(),this.fieldTransforms=c||[],this.fieldMask=p||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new em({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var a;const t=(a=this.path)==null?void 0:a.child(e),o=this.contextWith({path:t,arrayElement:!1});return o.validatePathSegment(e),o}childContextForFieldPath(e){var a;const t=(a=this.path)==null?void 0:a.child(e),o=this.contextWith({path:t,arrayElement:!1});return o.validatePath(),o}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Nh(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(yw(this.dataSource)&&ok.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class lk{constructor(e,t,o){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=o||Qh(e)}createContext(e,t,o,a=!1){return new em({dataSource:e,methodName:t,targetDoc:o,path:fn.emptyPath(),arrayElement:!1,hasConverter:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function tm(r){const e=r._freezeSettings(),t=Qh(r._databaseId);return new lk(r._databaseId,!!e.ignoreUndefinedProperties,t)}function vw(r,e,t,o,a,c={}){const p=r.createContext(c.merge||c.mergeFields?2:0,e,t,a);nm("Data must be an object, but it was:",p,o);const _=ww(o,p);let x,I;if(c.merge)x=new fr(p.fieldMask),I=p.fieldTransforms;else if(c.mergeFields){const C=[];for(const k of c.mergeFields){const b=bl(e,k,t);if(!p.contains(b))throw new _e(re.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);Tw(C,b)||C.push(b)}x=new fr(C),I=p.fieldTransforms.filter((k=>x.covers(k.field)))}else x=null,I=p.fieldTransforms;return new ak(new nr(_),x,I)}class td extends Xp{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof td}}function uk(r,e,t,o){const a=r.createContext(1,e,t);nm("Data must be an object, but it was:",a,o);const c=[],p=nr.empty();jo(o,((x,I)=>{const C=Ew(e,x,t);I=Ft(I);const k=a.childContextForFieldPath(C);if(I instanceof td)c.push(C);else{const b=Zu(I,k);b!=null&&(c.push(C),p.set(C,b))}}));const _=new fr(c);return new _w(p,_,a.fieldTransforms)}function ck(r,e,t,o,a,c){const p=r.createContext(1,e,t),_=[bl(e,o,t)],x=[a];if(c.length%2!=0)throw new _e(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<c.length;b+=2)_.push(bl(e,c[b])),x.push(c[b+1]);const I=[],C=nr.empty();for(let b=_.length-1;b>=0;--b)if(!Tw(I,_[b])){const q=_[b];let W=x[b];W=Ft(W);const Q=p.childContextForFieldPath(q);if(W instanceof td)I.push(q);else{const Y=Zu(W,Q);Y!=null&&(I.push(q),C.set(q,Y))}}const k=new fr(I);return new _w(C,k,p.fieldTransforms)}function hk(r,e,t,o=!1){return Zu(t,r.createContext(o?4:3,e))}function Zu(r,e){if(xw(r=Ft(r)))return nm("Unsupported field value:",e,r),ww(r,e);if(r instanceof Xp)return(function(o,a){if(!yw(a.dataSource))throw a.createError(`${o._methodName}() can only be used with update() and set()`);if(!a.path)throw a.createError(`${o._methodName}() is not currently supported inside arrays`);const c=o._toFieldTransform(a);c&&a.fieldTransforms.push(c)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(o,a){const c=[];let p=0;for(const _ of o){let x=Zu(_,a.childContextForArray(p));x==null&&(x={nullValue:"NULL_VALUE"}),c.push(x),p++}return{arrayValue:{values:c}}})(r,e)}return(function(o,a){if((o=Ft(o))===null)return{nullValue:"NULL_VALUE"};if(typeof o=="number")return KS(a.serializer,o);if(typeof o=="boolean")return{booleanValue:o};if(typeof o=="string")return{stringValue:o};if(o instanceof Date){const c=St.fromDate(o);return{timestampValue:Ch(a.serializer,c)}}if(o instanceof St){const c=new St(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:Ch(a.serializer,c)}}if(o instanceof zi)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof Hr)return{bytesValue:D0(a.serializer,o._byteString)};if(o instanceof Gt){const c=a.databaseId,p=o.firestore._databaseId;if(!p.isEqual(c))throw a.createError(`Document reference is for database ${p.projectId}/${p.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Vp(o.firestore._databaseId||a.databaseId,o._key.path)}}if(o instanceof oi)return(function(p,_){const x=p instanceof oi?p.toArray():p;return{mapValue:{fields:{[u0]:{stringValue:c0},[Th]:{arrayValue:{values:x.map((C=>{if(typeof C!="number")throw _.createError("VectorValues must only contain numeric values.");return Dp(_.serializer,C)}))}}}}}})(o,a);if(U0(o))return o._toProto(a.serializer);throw a.createError(`Unsupported field value: ${zh(o)}`)})(r,e)}function ww(r,e){const t={};return r0(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):jo(r,((o,a)=>{const c=Zu(a,e.childContextForField(o));c!=null&&(t[o]=c)})),{mapValue:{fields:t}}}function xw(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof St||r instanceof zi||r instanceof Hr||r instanceof Gt||r instanceof Xp||r instanceof oi||U0(r))}function nm(r,e,t){if(!xw(t)||!t0(t)){const o=zh(t);throw o==="an object"?e.createError(r+" a custom object"):e.createError(r+" "+o)}}function bl(r,e,t){if((e=Ft(e))instanceof Jp)return e._internalPath;if(typeof e=="string")return Ew(r,e);throw Nh("Field path arguments must be of type string or ",r,!1,void 0,t)}const dk=new RegExp("[~\\*/\\[\\]]");function Ew(r,e,t){if(e.search(dk)>=0)throw Nh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Jp(...e.split("."))._internalPath}catch{throw Nh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Nh(r,e,t,o,a){const c=o&&!o.isEmpty(),p=a!==void 0;let _=`Function ${e}() called with invalid data`;t&&(_+=" (via `toFirestore()`)"),_+=". ";let x="";return(c||p)&&(x+=" (found",c&&(x+=` in field ${o}`),p&&(x+=` in document ${a}`),x+=")"),new _e(re.INVALID_ARGUMENT,_+r+x)}function Tw(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{convertValue(e,t="none"){switch(Lo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return jt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ro(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw qe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const o={};return jo(e,((a,c)=>{o[a]=this.convertValue(c,t)})),o}convertVectorValue(e){var o,a,c;const t=(c=(a=(o=e.fields)==null?void 0:o[Th].arrayValue)==null?void 0:a.values)==null?void 0:c.map((p=>jt(p.doubleValue)));return new oi(t)}convertGeoPoint(e){return new zi(jt(e.latitude),jt(e.longitude))}convertArray(e,t){return(e.values||[]).map((o=>this.convertValue(o,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const o=Hh(e);return o==null?null:this.convertValue(o,t);case"estimate":return this.convertTimestamp(Ru(e));default:return null}}convertTimestamp(e){const t=No(e);return new St(t.seconds,t.nanos)}convertDocumentKey(e,t){const o=Et.fromString(e);_t(z0(o),9688,{name:e});const a=new Lu(o.get(1),o.get(3)),c=new Ve(o.popFirst(5));return a.isEqual(t)||ks(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw extends fk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Gt(this.firestore,null,t)}}const My="@firebase/firestore",Oy="4.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(e,t,o,a,c){this._firestore=e,this._userDataWriter=t,this._key=o,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new pk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(bl("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class pk extends Sw{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mk(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new _e(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class rm{}class Pw extends rm{}function gk(r,e,...t){let o=[];e instanceof rm&&o.push(e),o=o.concat(t),(function(c){const p=c.filter((x=>x instanceof sm)).length,_=c.filter((x=>x instanceof im)).length;if(p>1||p>0&&_>0)throw new _e(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(o);for(const a of o)r=a._apply(r);return r}class im extends Pw{constructor(e,t,o){super(),this._field=e,this._op=t,this._value=o,this.type="where"}static _create(e,t,o){return new im(e,t,o)}_apply(e){const t=this._parse(e);return Cw(e._query,t),new Na(e.firestore,e.converter,Qf(e._query,t))}_parse(e){const t=tm(e.firestore);return(function(c,p,_,x,I,C,k){let b;if(I.isKeyField()){if(C==="array-contains"||C==="array-contains-any")throw new _e(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on documentId().`);if(C==="in"||C==="not-in"){jy(k,C);const W=[];for(const Q of k)W.push(Vy(x,c,Q));b={arrayValue:{values:W}}}else b=Vy(x,c,k)}else C!=="in"&&C!=="not-in"&&C!=="array-contains-any"||jy(k,C),b=hk(_,p,k,C==="in"||C==="not-in");return qt.create(I,C,b)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class sm extends rm{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new sm(e,t)}_parse(e){const t=this._queryConstraints.map((o=>o._parse(e))).filter((o=>o.getFilters().length>0));return t.length===1?t[0]:li.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,c){let p=a;const _=c.getFlattenedFilters();for(const x of _)Cw(p,x),p=Qf(p,x)})(e._query,t),new Na(e.firestore,e.converter,Qf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class om extends Pw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new om(e,t)}_apply(e){const t=(function(a,c,p){if(a.startAt!==null)throw new _e(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new _e(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Mu(c,p)})(e._query,this._field,this._direction);return new Na(e.firestore,e.converter,zS(e._query,t))}}function _k(r,e="asc"){const t=e,o=bl("orderBy",r);return om._create(o,t)}function Vy(r,e,t){if(typeof(t=Ft(t))=="string"){if(t==="")throw new _e(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!y0(e)&&t.indexOf("/")!==-1)throw new _e(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const o=e.path.child(Et.fromString(t));if(!Ve.isDocumentKey(o))throw new _e(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return J_(r,new Ve(o))}if(t instanceof Gt)return J_(r,t._key);throw new _e(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${zh(t)}.`)}function jy(r,e){if(!Array.isArray(r)||r.length===0)throw new _e(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Cw(r,e){const t=(function(a,c){for(const p of a)for(const _ of p.getFlattenedFilters())if(c.indexOf(_.op)>=0)return _.op;return null})(r.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new _e(re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new _e(re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function kw(r,e,t){let o;return o=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,o}class wu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ya extends Sw{constructor(e,t,o,a,c,p){super(e,t,o,a,p),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new hh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const o=this._document.data.field(bl("DocumentSnapshot.get",e));if(o!==null)return this._userDataWriter.convertValue(o,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ya._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ya._jsonSchemaVersion="firestore/documentSnapshot/1.0",ya._jsonSchema={type:$t("string",ya._jsonSchemaVersion),bundleSource:$t("string","DocumentSnapshot"),bundleName:$t("string"),bundle:$t("string")};class hh extends ya{data(e={}){return super.data(e)}}class Tl{constructor(e,t,o,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new wu(a.hasPendingWrites,a.fromCache),this.query=o}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((o=>{e.call(t,new hh(this._firestore,this._userDataWriter,o.key,o,new wu(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new _e(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,c){if(a._snapshot.oldDocs.isEmpty()){let p=0;return a._snapshot.docChanges.map((_=>{const x=new hh(a._firestore,a._userDataWriter,_.doc.key,_.doc,new wu(a._snapshot.mutatedKeys.has(_.doc.key),a._snapshot.fromCache),a.query.converter);return _.doc,{type:"added",doc:x,oldIndex:-1,newIndex:p++}}))}{let p=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((_=>c||_.type!==3)).map((_=>{const x=new hh(a._firestore,a._userDataWriter,_.doc.key,_.doc,new wu(a._snapshot.mutatedKeys.has(_.doc.key),a._snapshot.fromCache),a.query.converter);let I=-1,C=-1;return _.type!==0&&(I=p.indexOf(_.doc.key),p=p.delete(_.doc.key)),_.type!==1&&(p=p.add(_.doc),C=p.indexOf(_.doc.key)),{type:yk(_.type),doc:x,oldIndex:I,newIndex:C}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Tl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Cp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],o=[],a=[];return this.docs.forEach((c=>{c._document!==null&&(t.push(c._document),o.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),a.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function yk(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return qe(61501,{type:r})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tl._jsonSchemaVersion="firestore/querySnapshot/1.0",Tl._jsonSchema={type:$t("string",Tl._jsonSchemaVersion),bundleSource:$t("string","QuerySnapshot"),bundleName:$t("string"),bundle:$t("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=tm(e)}set(e,t,o){this._verifyNotCommitted();const a=bf(e,this._firestore),c=kw(a.converter,t,o),p=vw(this._dataReader,"WriteBatch.set",a._key,c,a.converter!==null,o);return this._mutations.push(p.toMutation(a._key,pr.none())),this}update(e,t,o,...a){this._verifyNotCommitted();const c=bf(e,this._firestore);let p;return p=typeof(t=Ft(t))=="string"||t instanceof Jp?ck(this._dataReader,"WriteBatch.update",c._key,t,o,a):uk(this._dataReader,"WriteBatch.update",c._key,t),this._mutations.push(p.toMutation(c._key,pr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=bf(e,this._firestore);return this._mutations=this._mutations.concat(new Kh(t._key,pr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new _e(re.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function bf(r,e){if((r=Ft(r)).firestore!==e)throw new _e(re.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aw(r){r=As(r,Gt);const e=As(r.firestore,jl),t=ed(e);return JC(t,r._key).then((o=>wk(e,r,o)))}function ap(r){r=As(r,Na);const e=As(r.firestore,jl),t=ed(e),o=new Iw(e);return mk(r._query),XC(t,r._query).then((a=>new Tl(e,o,r,a)))}function am(r,e,t){r=As(r,Gt);const o=As(r.firestore,jl),a=kw(r.converter,e,t),c=tm(o);return lm(o,[vw(c,"setDoc",r._key,a,r.converter!==null,t).toMutation(r._key,pr.none())])}function Fy(r){return lm(As(r.firestore,jl),[new Kh(r._key,pr.none())])}function lm(r,e){const t=ed(r);return ek(t,e)}function wk(r,e,t){const o=t.docs.get(e._key),a=new Iw(r);return new ya(r,a,e._key,o,new wu(t.hasPendingWrites,t.fromCache),e.converter)}function xk(r){return r=As(r,jl),ed(r),new vk(r,(e=>lm(r,e)))}(function(e,t=!0){eS(Rl),Il(new wa("firestore",((o,{instanceIdentifier:a,options:c})=>{const p=o.getProvider("app").getImmediate(),_=new jl(new rS(o.getProvider("auth-internal")),new oS(p,o.getProvider("app-check-internal")),TS(p,a),p);return c={useFetchStreams:t,...c},_._setSettings(c),_}),"PUBLIC").setMultipleInstances(!0)),Co(My,Oy,e),Co(My,Oy,"esm2020")})();const Ek={apiKey:"AIzaSyBAf83WJpNKrse4AIIGYajoGt_Q0jeQ5zs",authDomain:"wandr-b02f5.firebaseapp.com",projectId:"wandr-b02f5",storageBucket:"wandr-b02f5.firebasestorage.app",messagingSenderId:"426584594137",appId:"1:426584594137:web:5beca6fa60330f90b410c8"},bw=ov(Ek),Rh=CI(bw),Fl=ik(bw);function Tk(){const[r,e]=ce.useState(null),[t,o]=ce.useState(!0);return ce.useEffect(()=>p1(Rh,c=>{e(c),o(!1)}),[]),{user:r,loading:t}}function Nw(r){return gw(Fl,"users",r,"trips")}function Rw(r,e){return Yp(Fl,"users",r,"trips",e)}function um(r,e){return Yp(Fl,"users",r,"chats",e)}function Ik(r){return gw(Fl,"users",r,"chats")}function cm(r){return Yp(Fl,"users",r,"settings","main")}async function Sk(r){return(await ap(gk(Nw(r),_k("createdAt","desc")))).docs.map(t=>t.data())}async function zy(r,e){await am(Rw(r,e.id),e)}async function Pk(r,e){await Promise.all([Fy(Rw(r,e)),Fy(um(r,e))])}async function Ck(r,e){const t=await Aw(um(r,e));return t.exists()?t.data().messages??[]:[]}async function kk(r,e,t){await am(um(r,e),{messages:t})}async function Ak(r){const e=await Aw(cm(r));if(!e.exists())return{perplexityKey:"",anthropicKey:""};const t=e.data();return{perplexityKey:t.perplexityKey??t.apiKey??"",anthropicKey:t.anthropicKey??""}}async function bk(r,e){await am(cm(r),{perplexityKey:e.perplexityKey,anthropicKey:e.anthropicKey},{merge:!0})}async function Nk(r){const e=xk(Fl),[t,o]=await Promise.all([ap(Nw(r)),ap(Ik(r))]);t.docs.forEach(a=>e.delete(a.ref)),o.docs.forEach(a=>e.delete(a.ref)),e.delete(cm(r)),await e.commit()}let dh=null;function Uy(r){dh=r}function Rk(){return Math.random().toString(36).slice(2,9)}function Bn(r){const e=Rk();return dh==null||dh({...r,id:e,timestamp:new Date().toISOString()}),e}const Lk="https://api.perplexity.ai/chat/completions",Dk="sonar-pro",Mk="sonar";async function hm(r,e,t,o={}){var I;const{maxTokens:a=8192,model:c=Dk}=o,p=[{role:"system",content:e},...r],_=await fetch(Lk,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({model:c,max_tokens:a,messages:p})});if(!_.ok){const C=await _.json().catch(()=>({}));throw new Error(((I=C==null?void 0:C.error)==null?void 0:I.message)||`Perplexity API error ${_.status}`)}return(await _.json()).choices[0].message.content}const Ok="https://api.anthropic.com/v1/messages",Vk="claude-haiku-4-5-20251001";async function jk(r,e,t,o={}){var x;const{maxTokens:a=8192}=o,c=await fetch(Ok,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":t,"anthropic-version":"2023-06-01","anthropic-dangerous-direct-browser-access":"true"},body:JSON.stringify({model:Vk,max_tokens:a,system:e,messages:[{role:"user",content:r}]})});if(!c.ok){const I=await c.json().catch(()=>({}));throw new Error(((x=I==null?void 0:I.error)==null?void 0:x.message)||`Claude API error ${c.status}`)}const _=(await c.json()).content.find(I=>I.type==="text");if(!_)throw new Error("No text content in Claude response");return _.text}async function dm(r,e,t,o,a={}){return t?jk(r,e,t,a):hm([{role:"user",content:r}],e,o,a)}function fm(r){try{return JSON.parse(r)}catch{const e=r.indexOf("{"),t=r.indexOf("[");let o=-1,a="";if(e!==-1&&(t===-1||e<t)?(o=e,a="}"):t!==-1&&(o=t,a="]"),o!==-1){const c=r.lastIndexOf(a);if(c>o)try{return JSON.parse(r.slice(o,c+1))}catch{}}throw new Error("AI returned an unexpected format. Please try again.")}}async function Fk(r){const{destination:e,startDate:t,endDate:o,interests:a,budget:c,travelers:p,anthropicKey:_,perplexityKey:x}=r;Bn({message:`Creating trip to ${e}`,status:"pending"});const I=`Trip to ${e} (${t}  ${o}).
Interests: ${a.join(", ")}. Budget: $${c}. Travelers: ${p}.

Fill in this JSON exactly (no other text):
{
  "name": "<catchy 3-5 word trip name>",
  "emoji": "<single emoji>",
  "description": "<2 sentences about this trip>",
  "coverGradient": "<exactly one of: from-violet-900 to-indigo-900 | from-blue-900 to-cyan-900 | from-emerald-900 to-teal-900 | from-rose-900 to-pink-900 | from-amber-900 to-orange-900 | from-slate-900 to-blue-900>"
}`;try{const C=await dm(I,"You are a travel expert. Output valid JSON only, no other text.",_,x,{maxTokens:512}),k=fm(C);return Bn({message:`Trip "${k.name}" created`,status:"success"}),k}catch(C){const k=C instanceof Error?C.message:"Unknown error";throw Bn({message:"Failed to create trip",detail:k,status:"error"}),C}}async function zk(r,e,t){const o=Math.ceil((new Date(r.endDate).getTime()-new Date(r.startDate).getTime())/864e5)+1;Bn({message:`Generating ${o}-day itinerary for ${r.destination}`,status:"pending"});const a=[];for(let p=0;p<o;p++){const _=new Date(r.startDate+"T12:00:00");_.setDate(_.getDate()+p),a.push(_.toISOString().split("T")[0])}const c=`Create a ${o}-day itinerary for ${r.destination}.
Dates: ${a.join(", ")}. Interests: ${r.interests.join(", ")}.
Budget: ${r.currency}${r.budget} for ${r.travelers} person(s).

Return a JSON array of ${o} objects. Each object:
{"id":"day-N","date":"YYYY-MM-DD","title":"Day theme","activities":[
  {"id":"act-N-M","time":"HH:MM","title":"Name","description":"One sentence.","category":"food|sightseeing|activity|transport|accommodation|free","estimatedCost":0,"lat":0.0000,"lng":0.0000}
]}
Exactly 4 activities per day. Include accurate GPS coordinates (lat/lng) for each specific location. Keep descriptions to 1 sentence.`;try{const p=await dm(c,"Output valid JSON array only. No preamble, no explanation.",e,t,{maxTokens:8192}),_=fm(p);return Bn({message:`Itinerary ready  ${_.length} days, ${_.reduce((x,I)=>x+I.activities.length,0)} activities`,status:"success"}),_}catch(p){const _=p instanceof Error?p.message:"Unknown error";throw Bn({message:"Failed to generate itinerary",detail:_,status:"error"}),p}}async function Uk(r,e,t){const o=Math.ceil((new Date(r.endDate).getTime()-new Date(r.startDate).getTime())/864e5)+1;Bn({message:`Generating packing list for ${r.destination}`,status:"pending"});const a=`Packing list for ${o}-day trip to ${r.destination}.
Activities: ${r.interests.join(", ")}. Travelers: ${r.travelers}.

Return a JSON array of exactly 25 items:
[{"id":"item-N","name":"Item","category":"Documents|Clothing|Toiletries|Electronics|Health & Safety|Activities|Miscellaneous","packed":false,"quantity":1,"essential":true}]
Mark passport, medications as essential:true. Others essential:false.`;try{const c=await dm(a,"Output valid JSON array only.",e,t,{maxTokens:3e3}),p=fm(c);return Bn({message:`Packing list ready  ${p.length} items`,status:"success"}),p}catch(c){const p=c instanceof Error?c.message:"Unknown error";throw Bn({message:"Failed to generate packing list",detail:p,status:"error"}),c}}async function Bk(r,e,t,o){Bn({message:"AI assistant responding",status:"pending"});const a=`You are a travel assistant for a trip to ${t.destination} (${t.startDate}  ${t.endDate}).
${t.travelers} traveler(s). Budget: ${t.currency}${t.budget}. Interests: ${t.interests.join(", ")}.
Be concise and specific. 2-4 sentences per answer.`;try{const c=await hm([...e,{role:"user",content:r}],a,o,{maxTokens:1024});return Bn({message:"AI assistant replied",status:"success"}),c}catch(c){const p=c instanceof Error?c.message:"Unknown error";throw Bn({message:"AI chat error",detail:p,status:"error"}),c}}async function Hk(r,e,t){Bn({message:"Searching travel info",status:"pending"});const o=`You are a real-time travel search assistant. The user is planning a trip to ${e.destination} from ${e.startDate} to ${e.endDate} with ${e.travelers} traveler(s), budget ${e.currency}${e.budget}. Provide up-to-date, specific answers using web search. Be concise but thorough. Use clear sections when listing multiple items.`;try{const a=await hm([{role:"user",content:r}],o,t,{maxTokens:2048,model:Mk});return Bn({message:"Search complete",status:"success"}),a}catch(a){const c=a instanceof Error?a.message:"Unknown error";throw Bn({message:"Search failed",detail:c,status:"error"}),a}}function Wk(r){switch(r){case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":return"Invalid email or password.";case"auth/email-already-in-use":return"An account with this email already exists.";case"auth/weak-password":return"Password must be at least 6 characters.";case"auth/invalid-email":return"Please enter a valid email address.";case"auth/too-many-requests":return"Too many failed attempts. Please try again later.";default:return"Something went wrong. Please try again."}}function qk(){const[r,e]=ce.useState("login"),[t,o]=ce.useState(""),[a,c]=ce.useState(""),[p,_]=ce.useState(""),[x,I]=ce.useState(!1),C=async b=>{b.preventDefault(),_(""),I(!0);try{r==="create"?await c1(Rh,t,a):await h1(Rh,t,a)}catch(q){_(Wk(q.code))}finally{I(!1)}},k=()=>{e(b=>b==="login"?"create":"login"),_("")};return y.jsx("div",{className:"min-h-screen bg-gray-950 flex items-center justify-center p-4",children:y.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-8 w-full max-w-md shadow-2xl",children:[y.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[y.jsx("div",{className:"p-2.5 bg-indigo-500/20 rounded-xl border border-indigo-500/30",children:y.jsx(Tp,{className:"w-6 h-6 text-indigo-400"})}),y.jsxs("div",{children:[y.jsx("h1",{className:"text-xl font-bold text-gray-100",children:"Wandr"}),y.jsx("p",{className:"text-xs text-indigo-400",children:"AI Trip Planner"})]})]}),y.jsx("h2",{className:"text-lg font-semibold text-gray-100 mb-6",children:r==="login"?"Sign in to your account":"Create your account"}),y.jsxs("form",{onSubmit:C,className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1.5",children:"Email"}),y.jsxs("div",{className:"relative",children:[y.jsx(qI,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-600"}),y.jsx("input",{type:"email",value:t,onChange:b=>o(b.target.value),required:!0,placeholder:"you@example.com",className:"w-full bg-gray-800 border border-gray-700 rounded-xl pl-10 pr-4 py-3 text-gray-100 placeholder-gray-600 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm text-gray-400 mb-1.5",children:"Password"}),y.jsxs("div",{className:"relative",children:[y.jsx(Is,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-600"}),y.jsx("input",{type:"password",value:a,onChange:b=>c(b.target.value),required:!0,minLength:6,placeholder:"Minimum 6 characters",className:"w-full bg-gray-800 border border-gray-700 rounded-xl pl-10 pr-4 py-3 text-gray-100 placeholder-gray-600 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition"})]})]}),p&&y.jsx("p",{className:"text-sm text-red-400 bg-red-500/10 border border-red-500/20 rounded-xl px-4 py-2.5",children:p}),y.jsxs("button",{type:"submit",disabled:x||!t||!a,className:"w-full py-3 bg-indigo-600 hover:bg-indigo-500 disabled:opacity-40 disabled:cursor-not-allowed rounded-xl font-medium transition shadow-lg shadow-indigo-900/30 flex items-center justify-center gap-2",children:[x&&y.jsx(Un,{className:"w-4 h-4 animate-spin"}),r==="login"?"Sign In":"Create Account"]})]}),y.jsxs("p",{className:"text-center text-sm text-gray-500 mt-6",children:[r==="login"?"Don't have an account?":"Already have an account?"," ",y.jsx("button",{onClick:k,className:"text-indigo-400 hover:text-indigo-300 transition font-medium",children:r==="login"?"Create one":"Sign in"})]})]})})}function $k({onSave:r,existing:e,onClose:t,onLogout:o,onDeleteAccount:a}){const[c,p]=ce.useState(e.perplexityKey),[_,x]=ce.useState(e.anthropicKey),[I,C]=ce.useState(!1),[k,b]=ce.useState(!1),[q,W]=ce.useState(!1),[Q,Y]=ce.useState(!1),[de,pe]=ce.useState(""),[Ee,Ce]=ce.useState(""),[Se,Le]=ce.useState(!1),F=()=>{r({perplexityKey:c.trim(),anthropicKey:_.trim()}),W(!0),setTimeout(()=>W(!1),2e3)},R=async()=>{Le(!0),Ce("");try{await a(de)}catch(O){const U=O;U.code==="auth/wrong-password"||U.code==="auth/invalid-credential"?Ce("Incorrect password."):Ce("Failed to delete account. Please try again."),Le(!1)}};return y.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:y.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-8 w-full max-w-md shadow-2xl",children:[y.jsxs("div",{className:"flex items-center justify-between mb-8",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"p-2 bg-gray-800 rounded-lg",children:y.jsx(HI,{className:"w-5 h-5 text-gray-400"})}),y.jsxs("div",{children:[y.jsx("h2",{className:"font-semibold text-gray-100",children:"API Settings"}),y.jsx("p",{className:"text-xs text-gray-500",children:"Configure your AI provider keys"})]})]}),y.jsx("button",{onClick:t,className:"p-1.5 text-gray-500 hover:text-gray-300 hover:bg-gray-800 rounded-lg transition",title:"Close",children:y.jsx(Sp,{className:"w-4 h-4"})})]}),y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Perplexity API Key",e.perplexityKey&&y.jsx("span",{className:"ml-2 text-xs text-emerald-400",children:" configured"})]}),y.jsxs("div",{className:"relative",children:[y.jsx("input",{type:I?"text":"password",value:c,onChange:O=>p(O.target.value),placeholder:"pplx-...",className:"w-full bg-gray-800 border border-gray-700 rounded-xl px-4 py-3 pr-10 text-gray-100 placeholder-gray-600 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition font-mono text-sm"}),y.jsx("button",{type:"button",onClick:()=>C(O=>!O),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-300 transition",children:I?y.jsx(O_,{className:"w-4 h-4"}):y.jsx(V_,{className:"w-4 h-4"})})]}),y.jsx("p",{className:"mt-1.5 text-xs text-gray-500",children:"Used for itinerary generation, packing lists, and AI chat."}),y.jsxs("a",{href:"https://www.perplexity.ai/settings/api",target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-1 mt-1 text-xs text-indigo-400 hover:text-indigo-300 transition",children:[y.jsx(M_,{className:"w-3 h-3"}),"Get your Perplexity key"]})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Anthropic API Key",e.anthropicKey&&y.jsx("span",{className:"ml-2 text-xs text-emerald-400",children:" configured"})]}),y.jsxs("div",{className:"relative",children:[y.jsx("input",{type:k?"text":"password",value:_,onChange:O=>x(O.target.value),placeholder:"sk-ant-...",className:"w-full bg-gray-800 border border-gray-700 rounded-xl px-4 py-3 pr-10 text-gray-100 placeholder-gray-600 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition font-mono text-sm"}),y.jsx("button",{type:"button",onClick:()=>b(O=>!O),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-300 transition",children:k?y.jsx(O_,{className:"w-4 h-4"}):y.jsx(V_,{className:"w-4 h-4"})})]}),y.jsx("p",{className:"mt-1.5 text-xs text-gray-500",children:"For Claude-powered features."}),y.jsxs("a",{href:"https://console.anthropic.com/settings/keys",target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-1 mt-1 text-xs text-indigo-400 hover:text-indigo-300 transition",children:[y.jsx(M_,{className:"w-3 h-3"}),"Get your Anthropic key"]})]}),y.jsx("button",{onClick:F,className:`w-full py-3 rounded-xl font-medium transition shadow-lg shadow-indigo-900/30 ${q?"bg-emerald-600 hover:bg-emerald-500":"bg-indigo-600 hover:bg-indigo-500"}`,children:q?" Saved":"Save Keys"})]}),y.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-800",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("button",{onClick:o,className:"flex items-center gap-2 text-sm text-gray-400 hover:text-gray-200 transition",children:[y.jsx(WI,{className:"w-4 h-4"}),"Sign out"]}),y.jsx("button",{onClick:()=>Y(!0),className:"text-sm text-red-500 hover:text-red-400 transition",children:"Delete account"})]}),Q&&y.jsxs("div",{className:"mt-4 p-4 bg-red-500/10 border border-red-500/20 rounded-xl space-y-3",children:[y.jsx("p",{className:"text-sm text-red-300 leading-relaxed",children:"This will permanently delete all your trips, chat history, and your account. Enter your password to confirm."}),y.jsx("input",{type:"password",value:de,onChange:O=>{pe(O.target.value),Ce("")},placeholder:"Your password",className:"w-full bg-gray-800 border border-gray-700 rounded-xl px-4 py-2.5 text-gray-100 placeholder-gray-600 text-sm focus:outline-none focus:border-red-500 transition"}),Ee&&y.jsx("p",{className:"text-xs text-red-400",children:Ee}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx("button",{onClick:()=>{Y(!1),pe(""),Ce("")},className:"flex-1 py-2 text-sm text-gray-400 hover:text-gray-200 bg-gray-800 hover:bg-gray-700 rounded-xl transition",children:"Cancel"}),y.jsxs("button",{onClick:R,disabled:!de||Se,className:"flex-1 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-500 disabled:opacity-40 rounded-xl transition flex items-center justify-center gap-1.5",children:[Se&&y.jsx(Un,{className:"w-3.5 h-3.5 animate-spin"}),"Delete everything"]})]})]})]})]})})}function By({trip:r,onClick:e}){const t=new Date(r.startDate),o=new Date(r.endDate),a=Math.ceil((o.getTime()-t.getTime())/864e5)+1,p={planning:{bg:"bg-amber-500/20",text:"text-amber-300",label:"Planning"},upcoming:{bg:"bg-blue-500/20",text:"text-blue-300",label:"Upcoming"},completed:{bg:"bg-emerald-500/20",text:"text-emerald-300",label:"Completed"}}[r.status];return y.jsxs("button",{onClick:e,className:"group w-full text-left rounded-2xl overflow-hidden border border-gray-800 hover:border-gray-600 transition-all duration-200 hover:-translate-y-0.5 hover:shadow-xl hover:shadow-black/40 bg-gray-900",children:[y.jsxs("div",{className:`h-32 bg-gradient-to-br ${r.coverGradient} relative overflow-hidden`,children:[y.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/40 to-transparent"}),y.jsx("div",{className:"absolute bottom-3 left-4 text-4xl drop-shadow-lg",children:r.emoji}),y.jsx("div",{className:"absolute top-3 right-3",children:y.jsx("span",{className:`text-xs px-2.5 py-1 rounded-full font-medium backdrop-blur-sm ${p.bg} ${p.text}`,children:p.label})})]}),y.jsxs("div",{className:"p-4",children:[y.jsx("h3",{className:"font-semibold text-gray-100 group-hover:text-white truncate leading-tight",children:r.name}),y.jsxs("div",{className:"flex items-center gap-1.5 mt-1",children:[y.jsx(jh,{className:"w-3.5 h-3.5 text-gray-500 shrink-0"}),y.jsx("span",{className:"text-sm text-gray-400 truncate",children:r.destination})]}),y.jsxs("div",{className:"flex items-center justify-between mt-3 text-xs text-gray-500",children:[y.jsxs("span",{className:"flex items-center gap-1",children:[y.jsx(xp,{className:"w-3.5 h-3.5"}),t.toLocaleDateString("en",{month:"short",day:"numeric"})]}),y.jsxs("span",{className:"flex items-center gap-1",children:[y.jsx(Ip,{className:"w-3.5 h-3.5"}),r.travelers]}),y.jsxs("span",{className:"font-medium text-gray-400",children:[a,"d"]})]})]})]})}function Gk({trips:r,onNewTrip:e,onSelectTrip:t,onSettingsClick:o,hasAiKey:a}){const c=r.filter(_=>_.status!=="completed"),p=r.filter(_=>_.status==="completed");return y.jsxs("div",{className:"min-h-screen flex flex-col",children:[y.jsx("header",{className:"border-b border-gray-800 bg-gray-950/90 backdrop-blur-sm sticky top-0 z-10",children:y.jsxs("div",{className:"max-w-6xl mx-auto px-4 md:px-6 py-4 flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"p-2 bg-indigo-500/20 rounded-xl border border-indigo-500/20",children:y.jsx(Tp,{className:"w-5 h-5 text-indigo-400"})}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"text-xl font-bold tracking-tight",children:"Wandr"}),y.jsx("span",{className:"text-xs text-indigo-400 bg-indigo-500/10 border border-indigo-500/20 px-2 py-0.5 rounded-full font-medium",children:"AI"})]})]}),y.jsxs("button",{onClick:o,className:"relative p-2 text-gray-400 hover:text-gray-200 hover:bg-gray-800 rounded-lg transition",title:"API Settings",children:[y.jsx(ka,{className:"w-5 h-5"}),!a&&y.jsx("span",{className:"absolute top-1.5 right-1.5 w-2 h-2 bg-amber-400 rounded-full"})]})]})}),y.jsxs("main",{className:"flex-1 max-w-6xl mx-auto w-full px-4 md:px-6 py-6 md:py-8",children:[y.jsxs("div",{className:"flex items-start justify-between mb-8",children:[y.jsxs("div",{children:[y.jsx("h1",{className:"text-3xl font-bold text-gray-100",children:"Your Trips"}),y.jsx("p",{className:"text-gray-400 mt-1",children:"Plan and explore the world with AI"})]}),y.jsxs("button",{onClick:e,className:"flex items-center gap-2 px-3 md:px-5 py-2.5 bg-indigo-600 hover:bg-indigo-500 rounded-xl font-medium transition shadow-lg shadow-indigo-900/30 shrink-0",children:[y.jsx(Hf,{className:"w-4 h-4"}),y.jsx("span",{className:"hidden sm:inline",children:"New Trip"})]})]}),!a&&y.jsxs("div",{className:"mb-6 flex items-center justify-between gap-3 bg-amber-500/10 border border-amber-500/20 rounded-xl px-4 py-3",children:[y.jsx("p",{className:"text-sm text-amber-300",children:"AI features are disabled  add your Perplexity API key to generate itineraries, packing lists, and use AI chat."}),y.jsx("button",{onClick:o,className:"shrink-0 text-xs font-medium text-amber-300 hover:text-amber-200 bg-amber-500/20 hover:bg-amber-500/30 px-3 py-1.5 rounded-lg transition",children:"Set up"})]}),r.length===0&&y.jsxs("div",{className:"flex flex-col items-center justify-center py-24 text-center",children:[y.jsx("div",{className:"w-20 h-20 bg-indigo-500/10 border border-indigo-500/20 rounded-3xl flex items-center justify-center mb-5",children:y.jsx(BI,{className:"w-10 h-10 text-indigo-400"})}),y.jsx("h2",{className:"text-xl font-semibold text-gray-200 mb-2",children:"No trips yet"}),y.jsx("p",{className:"text-gray-500 max-w-sm mb-6 leading-relaxed",children:"Create your first trip and let AI build a personalized itinerary, packing list, and travel guide."}),y.jsxs("button",{onClick:e,className:"flex items-center gap-2 px-6 py-3 bg-indigo-600 hover:bg-indigo-500 rounded-xl font-medium transition",children:[y.jsx(Hf,{className:"w-4 h-4"}),"Plan your first trip"]})]}),c.length>0&&y.jsxs("section",{className:"mb-8",children:[y.jsx("h2",{className:"text-xs font-semibold text-gray-500 uppercase tracking-widest mb-4",children:"Upcoming & Planning"}),y.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:c.map(_=>y.jsx(By,{trip:_,onClick:()=>t(_)},_.id))})]}),p.length>0&&y.jsxs("section",{children:[y.jsx("h2",{className:"text-xs font-semibold text-gray-500 uppercase tracking-widest mb-4",children:"Completed"}),y.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 opacity-70",children:p.map(_=>y.jsx(By,{trip:_,onClick:()=>t(_)},_.id))})]})]})]})}const Hy=[{id:"culture",label:"Culture & History",emoji:""},{id:"food",label:"Food & Dining",emoji:""},{id:"nature",label:"Nature & Outdoors",emoji:""},{id:"adventure",label:"Adventure",emoji:""},{id:"beach",label:"Beach & Relaxation",emoji:""},{id:"shopping",label:"Shopping",emoji:""},{id:"nightlife",label:"Nightlife",emoji:""},{id:"photography",label:"Photography",emoji:""},{id:"family",label:"Family-Friendly",emoji:""},{id:"luxury",label:"Luxury",emoji:""},{id:"backpacking",label:"Budget Travel",emoji:""},{id:"wellness",label:"Wellness & Spa",emoji:""}],Kk=[500,1500,3e3,5e3,1e4];function Zk({onBack:r,onCreate:e,hasAiKey:t,onSettingsClick:o}){const[a,c]=ce.useState(1),[p,_]=ce.useState(!1),[x,I]=ce.useState(""),[C,k]=ce.useState(""),[b,q]=ce.useState(""),[W,Q]=ce.useState(""),[Y,de]=ce.useState(2),[pe,Ee]=ce.useState([]),[Ce,Se]=ce.useState(3e3),[Le,F]=ce.useState("USD"),R=new Date().toISOString().split("T")[0],O=C.trim()!==""&&b!==""&&W!==""&&new Date(W)>=new Date(b),U=pe.length>0&&Ce>0,D=ae=>Ee(Oe=>Oe.includes(ae)?Oe.filter(ge=>ge!==ae):[...Oe,ae]),V=async()=>{_(!0),I("");try{await e({destination:C,startDate:b,endDate:W,travelers:Y,budget:Ce,currency:Le,interests:pe})}catch(ae){const Oe=ae instanceof Error?ae.message:"Failed to create trip";I(Oe),_(!1)}},N=b&&W?Math.ceil((new Date(W).getTime()-new Date(b).getTime())/864e5)+1:null;return y.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-950",children:[y.jsx("header",{className:"border-b border-gray-800 bg-gray-950",children:y.jsxs("div",{className:"max-w-2xl mx-auto px-6 py-4 flex items-center gap-4",children:[y.jsx("button",{onClick:r,className:"p-2 text-gray-400 hover:text-gray-200 hover:bg-gray-800 rounded-lg transition",children:y.jsx(Bf,{className:"w-5 h-5"})}),y.jsxs("div",{className:"flex-1",children:[y.jsx("h1",{className:"font-semibold text-gray-100",children:"New Trip"}),y.jsxs("p",{className:"text-xs text-gray-500",children:["Step ",a," of 3"]})]}),y.jsx("div",{className:"flex gap-1.5",children:[1,2,3].map(ae=>y.jsx("div",{className:`h-1.5 w-10 rounded-full transition-colors duration-300 ${ae<=a?"bg-indigo-500":"bg-gray-800"}`},ae))})]})}),y.jsxs("main",{className:"flex-1 max-w-2xl mx-auto w-full px-6 py-10",children:[a===1&&y.jsxs("div",{className:"space-y-7",children:[y.jsxs("div",{children:[y.jsx("h2",{className:"text-2xl font-bold text-gray-100 mb-1",children:"Where are you going?"}),y.jsx("p",{className:"text-gray-400",children:"Tell us your destination and travel dates."})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[y.jsx(jh,{className:"w-4 h-4 inline mr-1.5 text-gray-500"}),"Destination"]}),y.jsx("input",{type:"text",value:C,onChange:ae=>k(ae.target.value),placeholder:"e.g. Tokyo, Japan",className:"w-full bg-gray-900 border border-gray-700 rounded-xl px-4 py-3 text-gray-100 placeholder-gray-600 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition",autoFocus:!0})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[y.jsx(xp,{className:"w-4 h-4 inline mr-1.5 text-gray-500"}),"Start Date"]}),y.jsx("input",{type:"date",value:b,min:R,onChange:ae=>{q(ae.target.value),W&&ae.target.value>W&&Q(ae.target.value)},className:"w-full bg-gray-900 border border-gray-700 rounded-xl px-4 py-3 text-gray-100 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition [color-scheme:dark]"})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["End Date",N&&y.jsxs("span",{className:"ml-2 text-xs text-indigo-400",children:[N,"d"]})]}),y.jsx("input",{type:"date",value:W,min:b||R,onChange:ae=>Q(ae.target.value),className:"w-full bg-gray-900 border border-gray-700 rounded-xl px-4 py-3 text-gray-100 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition [color-scheme:dark]"})]})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:[y.jsx(Ip,{className:"w-4 h-4 inline mr-1.5 text-gray-500"}),"Travelers"]}),y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx("button",{type:"button",onClick:()=>de(Math.max(1,Y-1)),className:"w-10 h-10 bg-gray-800 hover:bg-gray-700 rounded-xl flex items-center justify-center text-xl font-light text-gray-300 transition",children:""}),y.jsx("span",{className:"text-2xl font-bold w-8 text-center text-gray-100",children:Y}),y.jsx("button",{type:"button",onClick:()=>de(Y+1),className:"w-10 h-10 bg-gray-800 hover:bg-gray-700 rounded-xl flex items-center justify-center text-xl font-light text-gray-300 transition",children:"+"}),y.jsx("span",{className:"text-gray-400 text-sm",children:Y===1?"traveler":"travelers"})]})]})]}),a===2&&y.jsxs("div",{className:"space-y-7",children:[y.jsxs("div",{children:[y.jsx("h2",{className:"text-2xl font-bold text-gray-100 mb-1",children:"What's your style?"}),y.jsx("p",{className:"text-gray-400",children:"Pick interests and set your total budget."})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:["Interests ",y.jsx("span",{className:"text-gray-500",children:"(select all that apply)"})]}),y.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:Hy.map(({id:ae,label:Oe,emoji:ge})=>{const Fe=pe.includes(ae);return y.jsxs("button",{type:"button",onClick:()=>D(ae),className:`flex items-center gap-2 px-3 py-2.5 rounded-xl text-sm border transition-all text-left ${Fe?"bg-indigo-600/20 border-indigo-500/60 text-indigo-200":"bg-gray-900 border-gray-700 text-gray-300 hover:border-gray-500 hover:text-gray-200"}`,children:[y.jsx("span",{className:"text-base",children:ge}),y.jsx("span",{className:"flex-1 leading-tight",children:Oe}),Fe&&y.jsx(Vh,{className:"w-3.5 h-3.5 text-indigo-400 shrink-0"})]},ae)})})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[y.jsx(Ep,{className:"w-4 h-4 inline mr-1.5 text-gray-500"}),"Total Budget (all travelers)"]}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx("select",{value:Le,onChange:ae=>F(ae.target.value),className:"bg-gray-900 border border-gray-700 rounded-xl px-3 py-3 text-gray-100 focus:outline-none focus:border-indigo-500 transition",children:["USD","EUR","GBP","JPY","AUD","CAD"].map(ae=>y.jsx("option",{value:ae,children:ae},ae))}),y.jsx("input",{type:"number",value:Ce,min:100,step:100,onChange:ae=>Se(Number(ae.target.value)),className:"flex-1 bg-gray-900 border border-gray-700 rounded-xl px-4 py-3 text-gray-100 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition"})]}),y.jsx("div",{className:"flex gap-2 mt-2.5",children:Kk.map(ae=>y.jsxs("button",{type:"button",onClick:()=>Se(ae),className:`flex-1 py-1.5 text-xs rounded-lg border transition ${Ce===ae?"bg-indigo-600/20 border-indigo-500/40 text-indigo-300":"bg-gray-900 border-gray-700 text-gray-500 hover:text-gray-300 hover:border-gray-600"}`,children:["$",(ae/1e3).toFixed((ae<1e3,0))+(ae>=1e3?"k":"")]},ae))})]})]}),a===3&&y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{children:[y.jsx("h2",{className:"text-2xl font-bold text-gray-100 mb-1",children:"Ready to create!"}),y.jsx("p",{className:"text-gray-400",children:"AI will generate your trip name, description, and set up the foundation for your itinerary."})]}),y.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-6 space-y-5",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"p-2.5 bg-indigo-500/20 rounded-xl",children:y.jsx(Tp,{className:"w-5 h-5 text-indigo-400"})}),y.jsxs("div",{children:[y.jsx("p",{className:"font-semibold text-gray-100",children:C}),y.jsxs("p",{className:"text-sm text-gray-400",children:[new Date(b).toLocaleDateString("en",{month:"long",day:"numeric"})," "," ",new Date(W).toLocaleDateString("en",{month:"long",day:"numeric",year:"numeric"}),N&&y.jsxs("span",{className:"ml-1.5 text-gray-500",children:["(",N," days)"]})]})]})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[y.jsxs("div",{className:"bg-gray-800/60 rounded-xl p-3",children:[y.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Travelers"}),y.jsxs("p",{className:"font-medium text-gray-200",children:[Y," ",Y===1?"person":"people"]})]}),y.jsxs("div",{className:"bg-gray-800/60 rounded-xl p-3",children:[y.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Budget"}),y.jsxs("p",{className:"font-medium text-gray-200",children:[Le," ",Ce.toLocaleString()]})]})]}),y.jsxs("div",{children:[y.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Interests"}),y.jsx("div",{className:"flex flex-wrap gap-1.5",children:pe.map(ae=>{const Oe=Hy.find(ge=>ge.id===ae);return Oe?y.jsxs("span",{className:"text-xs bg-indigo-500/15 text-indigo-300 border border-indigo-500/25 px-2.5 py-1 rounded-full",children:[Oe.emoji," ",Oe.label]},ae):null})})]})]}),!t&&y.jsxs("div",{className:"flex items-center justify-between gap-3 bg-amber-500/10 border border-amber-500/20 rounded-xl px-4 py-3",children:[y.jsx("p",{className:"text-sm text-amber-300",children:"A Perplexity API key is required to create trips with AI."}),y.jsxs("button",{onClick:o,className:"shrink-0 flex items-center gap-1.5 text-xs font-medium text-amber-300 hover:text-amber-200 bg-amber-500/20 hover:bg-amber-500/30 px-3 py-1.5 rounded-lg transition",children:[y.jsx(ka,{className:"w-3.5 h-3.5"}),"Set up"]})]}),x&&y.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-4 text-sm text-red-300",children:[y.jsx("strong",{children:"Error:"})," ",x]}),y.jsx("button",{onClick:V,disabled:p||!t,className:"w-full py-4 bg-indigo-600 hover:bg-indigo-500 disabled:opacity-40 disabled:cursor-not-allowed rounded-xl font-semibold flex items-center justify-center gap-2.5 transition shadow-lg shadow-indigo-900/30 text-base",children:p?y.jsxs(y.Fragment,{children:[y.jsx(Un,{className:"w-5 h-5 animate-spin"}),"AI is crafting your trip"]}):y.jsxs(y.Fragment,{children:[y.jsx(wl,{className:"w-5 h-5"}),"Create Trip with AI"]})})]}),a<3&&y.jsxs("div",{className:"flex justify-between mt-10",children:[a>1?y.jsxs("button",{onClick:()=>c(ae=>ae-1),className:"flex items-center gap-2 px-4 py-2.5 text-gray-400 hover:text-gray-200 hover:bg-gray-800 rounded-xl transition",children:[y.jsx(Bf,{className:"w-4 h-4"}),"Back"]}):y.jsx("div",{}),y.jsxs("button",{onClick:()=>c(ae=>ae+1),disabled:a===1?!O:!U,className:"flex items-center gap-2 px-6 py-2.5 bg-indigo-600 hover:bg-indigo-500 disabled:opacity-40 disabled:cursor-not-allowed rounded-xl font-medium transition",children:["Next",y.jsx(LI,{className:"w-4 h-4"})]})]})]})]})}const Qk=["accommodation","transport","food","activity","sightseeing","free"],Wy={accommodation:{Icon:DI,cls:"text-purple-400 bg-purple-500/10 border-purple-500/20"},transport:{Icon:ZI,cls:"text-blue-400 bg-blue-500/10 border-blue-500/20"},food:{Icon:YI,cls:"text-orange-400 bg-orange-500/10 border-orange-500/20"},activity:{Icon:KI,cls:"text-indigo-400 bg-indigo-500/10 border-indigo-500/20"},sightseeing:{Icon:jh,cls:"text-emerald-400 bg-emerald-500/10 border-emerald-500/20"},free:{Icon:UI,cls:"text-gray-400 bg-gray-500/10 border-gray-700"}};function Yk(){return Math.random().toString(36).slice(2,9)}function qy({value:r,onChange:e,onSave:t,onCancel:o}){var c;const a="w-full bg-gray-800 border border-gray-700 rounded-lg px-3 py-2 text-sm text-gray-100 placeholder-gray-600 focus:outline-none focus:border-indigo-500 transition";return y.jsxs("div",{className:"bg-gray-900 border border-indigo-500/40 rounded-xl p-4 space-y-3",children:[y.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Time"}),y.jsx("input",{type:"time",value:r.time??"09:00",onChange:p=>e({...r,time:p.target.value}),className:a+" [color-scheme:dark]"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Category"}),y.jsx("select",{value:r.category??"activity",onChange:p=>e({...r,category:p.target.value}),className:a,children:Qk.map(p=>y.jsx("option",{value:p,children:p},p))})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Activity name"}),y.jsx("input",{type:"text",value:r.title??"",onChange:p=>e({...r,title:p.target.value}),placeholder:"e.g. Visit the Eiffel Tower",className:a,autoFocus:!0})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Description"}),y.jsx("textarea",{value:r.description??"",onChange:p=>e({...r,description:p.target.value}),placeholder:"Brief description",rows:2,className:a+" resize-none"})]}),y.jsxs("div",{children:[y.jsxs("label",{className:"block text-xs text-gray-500 mb-1",children:[y.jsx(Ep,{className:"w-3 h-3 inline"})," Estimated cost per person"]}),y.jsx("input",{type:"number",min:0,step:5,value:r.estimatedCost??0,onChange:p=>e({...r,estimatedCost:Number(p.target.value)}),className:a})]}),y.jsxs("div",{className:"flex justify-end gap-2 pt-1",children:[y.jsxs("button",{onClick:o,className:"flex items-center gap-1.5 px-3 py-1.5 text-sm text-gray-400 hover:text-gray-200 hover:bg-gray-800 rounded-lg transition",children:[y.jsx(Sp,{className:"w-3.5 h-3.5"})," Cancel"]}),y.jsxs("button",{onClick:t,disabled:!((c=r.title)!=null&&c.trim()),className:"flex items-center gap-1.5 px-4 py-1.5 text-sm bg-indigo-600 hover:bg-indigo-500 disabled:opacity-40 rounded-lg font-medium transition",children:[y.jsx(Vh,{className:"w-3.5 h-3.5"})," Save"]})]})]})}function Jk({trip:r,onGenerate:e,onUpdate:t,hasAiKey:o,onSettingsClick:a}){const[c,p]=ce.useState(!1),[_,x]=ce.useState(""),[I,C]=ce.useState(0),[k,b]=ce.useState(null),[q,W]=ce.useState({}),[Q,Y]=ce.useState(!1),[de,pe]=ce.useState(""),Ee=async()=>{p(!0),x(""),b(null);try{await e(r)}catch(ge){x(ge instanceof Error?ge.message:"Failed to generate itinerary")}finally{p(!1)}},Ce=(ge,Fe)=>{t({...r,itinerary:r.itinerary.map(te=>te.id===ge?Fe(te):te)})},Se=ge=>{if(!k)return;const Fe=!r.itinerary.flatMap(te=>te.activities).find(te=>te.id===k);Ce(ge,te=>({...te,activities:Fe?[...te.activities,{id:k,time:"12:00",title:"",description:"",category:"activity",estimatedCost:0,...q}]:te.activities.map(ke=>ke.id===k?{...ke,...q}:ke)})),b(null),W({})},Le=(ge,Fe)=>{Ce(ge,te=>({...te,activities:te.activities.filter(ke=>ke.id!==Fe)}))},F=ge=>{const Fe=Yk();b(Fe),W({time:"12:00",title:"",description:"",category:"activity",estimatedCost:0})},R=ge=>{de.trim()&&Ce(ge,Fe=>({...Fe,title:de.trim()})),Y(!1)},O=r.itinerary.flatMap(ge=>ge.activities),D=O.reduce((ge,Fe)=>ge+(Fe.estimatedCost||0),0)*r.travelers,V=r.budget-D,N=V<0,ae=Math.min(100,r.budget>0?D/r.budget*100:0);if(r.itinerary.length===0)return y.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[y.jsx("div",{className:"w-16 h-16 bg-indigo-500/10 border border-indigo-500/20 rounded-2xl flex items-center justify-center mb-5",children:y.jsx("span",{className:"text-3xl",children:""})}),y.jsx("h3",{className:"text-xl font-semibold text-gray-200 mb-2",children:"No itinerary yet"}),y.jsx("p",{className:"text-gray-500 max-w-sm mb-6 leading-relaxed",children:o?"AI will create a personalized day-by-day schedule based on your destination, interests, and travel dates.":"Add activities manually using the button below, or set up your Perplexity API key to generate one with AI."}),_&&y.jsx("div",{className:"mb-5 text-sm text-red-300 bg-red-500/10 border border-red-500/20 rounded-xl px-4 py-3 max-w-sm",children:_}),o?y.jsxs("button",{onClick:Ee,disabled:c,className:"flex items-center gap-2 px-6 py-3 bg-indigo-600 hover:bg-indigo-500 disabled:opacity-60 rounded-xl font-medium transition",children:[c?y.jsx(Un,{className:"w-5 h-5 animate-spin"}):y.jsx(wl,{className:"w-5 h-5"}),c?"Generating itinerary":"Generate Itinerary"]}):y.jsxs("button",{onClick:a,className:"flex items-center gap-2 px-5 py-2.5 bg-gray-800 hover:bg-gray-700 border border-gray-700 rounded-xl text-sm text-gray-300 transition",children:[y.jsx(ka,{className:"w-4 h-4"}),"Set up AI in Settings"]})]});const Oe=r.itinerary[I];return y.jsxs("div",{className:"space-y-4",children:[D>0&&y.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl px-5 py-4",children:[y.jsxs("div",{className:"flex items-center justify-between mb-2 text-sm",children:[y.jsx("span",{className:"text-gray-400 font-medium",children:"Provisional budget"}),y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsxs("span",{className:"text-gray-400",children:[y.jsxs("span",{className:"text-gray-200 font-semibold",children:[r.currency," ",D.toLocaleString()]}),y.jsxs("span",{className:"text-gray-600",children:[" / ",r.currency," ",r.budget.toLocaleString()]})]}),y.jsxs("span",{className:`text-xs font-medium px-2 py-0.5 rounded-full ${N?"bg-red-500/15 text-red-300 border border-red-500/25":"bg-emerald-500/15 text-emerald-300 border border-emerald-500/25"}`,children:[N?" ":" ",r.currency," ",Math.abs(V).toLocaleString()," ",N?"over":"left"]})]})]}),y.jsx("div",{className:"h-2 bg-gray-800 rounded-full overflow-hidden",children:y.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${N?"bg-red-500":ae>80?"bg-amber-500":"bg-emerald-500"}`,style:{width:`${ae}%`}})}),y.jsxs("p",{className:"text-xs text-gray-600 mt-1.5",children:["Based on ",O.filter(ge=>ge.estimatedCost>0).length," activities with cost estimates  ",r.travelers," traveler(s)"]})]}),y.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:gap-5",children:[y.jsxs("div",{className:"md:w-24 md:shrink-0",children:[y.jsxs("div",{className:"flex md:flex-col gap-1 overflow-x-auto md:overflow-visible scrollbar-hide pb-1 md:pb-0 md:space-y-1",children:[r.itinerary.map((ge,Fe)=>{const te=new Date(ge.date+"T12:00:00"),ke=Fe===I;return y.jsxs("button",{onClick:()=>{C(Fe),b(null)},className:`shrink-0 md:w-full text-center px-3 md:px-2 py-2 md:py-2.5 rounded-xl transition ${ke?"bg-indigo-600 text-white":"text-gray-400 hover:bg-gray-800 hover:text-gray-200"}`,children:[y.jsx("p",{className:"text-xs font-medium opacity-80",children:te.toLocaleDateString("en",{weekday:"short"})}),y.jsx("p",{className:"text-base md:text-xl font-bold leading-tight",children:te.getDate()}),y.jsx("p",{className:"text-xs opacity-60 hidden md:block",children:te.toLocaleDateString("en",{month:"short"})})]},ge.id)}),o?y.jsxs("button",{onClick:Ee,disabled:c,className:"md:hidden shrink-0 flex flex-col items-center justify-center gap-0.5 px-3 py-2 text-gray-600 hover:text-gray-400 hover:bg-gray-800 rounded-xl transition",children:[c?y.jsx(Un,{className:"w-3.5 h-3.5 animate-spin"}):y.jsx(wl,{className:"w-3.5 h-3.5"}),y.jsx("span",{className:"text-xs",children:"Regen"})]}):y.jsxs("button",{onClick:a,className:"md:hidden shrink-0 flex flex-col items-center justify-center gap-0.5 px-3 py-2 text-gray-700 hover:text-gray-500 hover:bg-gray-800 rounded-xl transition",title:"Set up AI key",children:[y.jsx(Is,{className:"w-3.5 h-3.5"}),y.jsx("span",{className:"text-xs",children:"AI"})]})]}),o?y.jsxs("button",{onClick:Ee,disabled:c,title:"Regenerate itinerary",className:"hidden md:flex w-full mt-1 p-2 text-xs text-gray-600 hover:text-gray-400 hover:bg-gray-800 rounded-xl transition items-center justify-center gap-1",children:[c?y.jsx(Un,{className:"w-3.5 h-3.5 animate-spin"}):y.jsx(wl,{className:"w-3.5 h-3.5"}),"Regen"]}):y.jsxs("button",{onClick:a,title:"Set up Perplexity key to regenerate",className:"hidden md:flex w-full mt-1 p-2 text-xs text-gray-700 hover:text-gray-500 hover:bg-gray-800 rounded-xl transition items-center justify-center gap-1",children:[y.jsx(Is,{className:"w-3.5 h-3.5"}),"Regen"]})]}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsxs("div",{className:"flex items-start justify-between mb-4",children:[y.jsxs("div",{className:"flex-1 min-w-0",children:[Q?y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("input",{value:de,onChange:ge=>pe(ge.target.value),onKeyDown:ge=>{ge.key==="Enter"&&R(Oe.id),ge.key==="Escape"&&Y(!1)},className:"flex-1 bg-gray-800 border border-indigo-500 rounded-lg px-3 py-1.5 text-gray-100 text-base font-semibold focus:outline-none",autoFocus:!0}),y.jsx("button",{onClick:()=>R(Oe.id),className:"p-1.5 text-emerald-400 hover:bg-gray-800 rounded-lg transition",children:y.jsx(Vh,{className:"w-4 h-4"})}),y.jsx("button",{onClick:()=>Y(!1),className:"p-1.5 text-gray-500 hover:bg-gray-800 rounded-lg transition",children:y.jsx(Sp,{className:"w-4 h-4"})})]}):y.jsxs("button",{onClick:()=>{Y(!0),pe(Oe.title)},className:"group flex items-center gap-2 text-left",children:[y.jsx("h3",{className:"text-lg font-semibold text-gray-100 group-hover:text-white",children:Oe.title}),y.jsx(j_,{className:"w-3.5 h-3.5 text-gray-600 group-hover:text-gray-400 opacity-0 group-hover:opacity-100 transition"})]}),y.jsx("p",{className:"text-sm text-gray-400 mt-0.5",children:new Date(Oe.date+"T12:00:00").toLocaleDateString("en",{weekday:"long",month:"long",day:"numeric"})})]}),(()=>{const ge=Oe.activities.reduce((Fe,te)=>Fe+(te.estimatedCost||0),0)*r.travelers;return ge>0?y.jsxs("span",{className:"text-xs text-gray-400 bg-gray-800 px-3 py-1.5 rounded-lg shrink-0 ml-3 font-medium",children:[r.currency," ",ge.toLocaleString()," est."]}):null})()]}),y.jsxs("div",{className:"space-y-2.5",children:[Oe.activities.map(ge=>{const{Icon:Fe,cls:te}=Wy[ge.category]??Wy.free;return k===ge.id?y.jsx(qy,{value:q,onChange:W,onSave:()=>Se(Oe.id),onCancel:()=>{b(null),W({})}},ge.id):y.jsxs("div",{className:"group flex gap-3 bg-gray-900 border border-gray-800 hover:border-gray-700 rounded-xl p-4 transition",children:[y.jsx("div",{className:`p-2 rounded-lg border shrink-0 ${te}`,children:y.jsx(Fe,{className:"w-4 h-4"})}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsxs("div",{className:"flex items-center gap-2 justify-between",children:[y.jsx("h4",{className:"font-medium text-gray-200 truncate",children:ge.title}),y.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[y.jsxs("span",{className:"text-xs text-gray-500 flex items-center gap-0.5 mr-1",children:[y.jsx(zI,{className:"w-3 h-3"}),ge.time]}),y.jsx("button",{onClick:()=>{b(ge.id),W({...ge})},className:"opacity-0 group-hover:opacity-100 p-1.5 text-gray-500 hover:text-indigo-400 hover:bg-gray-800 rounded-lg transition",title:"Edit activity",children:y.jsx(j_,{className:"w-3.5 h-3.5"})}),y.jsx("button",{onClick:()=>Le(Oe.id,ge.id),className:"opacity-0 group-hover:opacity-100 p-1.5 text-gray-500 hover:text-red-400 hover:bg-gray-800 rounded-lg transition",title:"Delete activity",children:y.jsx(Fh,{className:"w-3.5 h-3.5"})})]})]}),y.jsx("p",{className:"text-sm text-gray-400 mt-0.5 leading-relaxed",children:ge.description}),ge.estimatedCost>0&&y.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["~",r.currency,ge.estimatedCost," /person  ",r.currency,(ge.estimatedCost*r.travelers).toLocaleString()," total"]})]})]},ge.id)}),k&&!Oe.activities.find(ge=>ge.id===k)&&y.jsx(qy,{value:q,onChange:W,onSave:()=>Se(Oe.id),onCancel:()=>{b(null),W({})}}),!k&&y.jsxs("button",{onClick:()=>F(Oe.id),className:"w-full flex items-center justify-center gap-2 py-3 border border-dashed border-gray-700 hover:border-indigo-500/50 hover:bg-indigo-500/5 rounded-xl text-sm text-gray-500 hover:text-indigo-400 transition",children:[y.jsx(Hf,{className:"w-4 h-4"}),"Add activity"]})]}),_&&y.jsx("div",{className:"mt-4 text-sm text-red-300 bg-red-500/10 border border-red-500/20 rounded-xl px-4 py-3",children:_})]})]})]})}const Xk={Documents:"",Clothing:"",Toiletries:"",Electronics:"","Health & Safety":"",Activities:"",Miscellaneous:""};function eA({trip:r,onGenerate:e,onUpdate:t,hasAiKey:o,onSettingsClick:a}){const[c,p]=ce.useState(!1),[_,x]=ce.useState(""),I=async()=>{p(!0),x("");try{await e(r)}catch(de){x(de instanceof Error?de.message:"Failed to generate packing list")}finally{p(!1)}},C=de=>{t({...r,packingList:r.packingList.map(pe=>pe.id===de?{...pe,packed:!pe.packed}:pe)})},k=()=>{t({...r,packingList:r.packingList.map(de=>({...de,packed:!0}))})},b=()=>{t({...r,packingList:r.packingList.map(de=>({...de,packed:!1}))})};if(r.packingList.length===0)return y.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[y.jsx("div",{className:"w-16 h-16 bg-indigo-500/10 border border-indigo-500/20 rounded-2xl flex items-center justify-center mb-5",children:y.jsx("span",{className:"text-3xl",children:""})}),y.jsx("h3",{className:"text-xl font-semibold text-gray-200 mb-2",children:"No packing list yet"}),y.jsx("p",{className:"text-gray-500 max-w-sm mb-6 leading-relaxed",children:o?"AI will create a smart, categorized packing list tailored to your destination, activities, and trip duration.":"Set up your Perplexity API key to generate a smart packing list with AI."}),_&&y.jsx("div",{className:"mb-5 text-sm text-red-300 bg-red-500/10 border border-red-500/20 rounded-xl px-4 py-3 max-w-sm",children:_}),o?y.jsxs("button",{onClick:I,disabled:c,className:"flex items-center gap-2 px-6 py-3 bg-indigo-600 hover:bg-indigo-500 disabled:opacity-60 rounded-xl font-medium transition",children:[c?y.jsx(Un,{className:"w-5 h-5 animate-spin"}):y.jsx(wl,{className:"w-5 h-5"}),c?"Generating packing list":"Generate Packing List"]}):y.jsxs("button",{onClick:a,className:"flex items-center gap-2 px-5 py-2.5 bg-gray-800 hover:bg-gray-700 border border-gray-700 rounded-xl text-sm text-gray-300 transition",children:[y.jsx(ka,{className:"w-4 h-4"}),"Set up AI in Settings"]})]});const q=r.packingList.filter(de=>de.packed).length,W=r.packingList.length,Q=W>0?Math.round(q/W*100):0,Y=[...new Set(r.packingList.map(de=>de.category))];return y.jsxs("div",{className:"space-y-5",children:[y.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-5",children:[y.jsxs("div",{className:"flex items-center justify-between mb-3",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"font-semibold text-gray-200",children:"Packing Progress"}),y.jsxs("p",{className:"text-sm text-gray-500 mt-0.5",children:[q," of ",W," items packed"]})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("button",{onClick:b,className:"text-xs text-gray-500 hover:text-gray-300 px-3 py-1.5 rounded-lg hover:bg-gray-800 transition",children:"Unpack all"}),y.jsx("button",{onClick:k,className:"text-xs text-indigo-400 hover:text-indigo-300 px-3 py-1.5 rounded-lg hover:bg-gray-800 transition",children:"Pack all"})]})]}),y.jsx("div",{className:"h-2 bg-gray-800 rounded-full overflow-hidden",children:y.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${Q===100?"bg-emerald-500":"bg-indigo-500"}`,style:{width:`${Q}%`}})}),y.jsxs("div",{className:"flex items-center justify-between mt-2",children:[y.jsxs("span",{className:"text-xs text-gray-500",children:[Q,"% packed"]}),Q===100&&y.jsx("span",{className:"text-xs text-emerald-400 font-medium",children:"All packed! "}),o?y.jsxs("button",{onClick:I,disabled:c,className:"text-xs text-gray-500 hover:text-indigo-400 flex items-center gap-1 transition",children:[c?y.jsx(Un,{className:"w-3 h-3 animate-spin"}):y.jsx(wl,{className:"w-3 h-3"}),"Regenerate"]}):y.jsxs("button",{onClick:a,className:"text-xs text-gray-700 hover:text-gray-500 flex items-center gap-1 transition",title:"Set up Perplexity key to regenerate",children:[y.jsx(Is,{className:"w-3 h-3"}),"Regenerate"]})]})]}),_&&y.jsx("div",{className:"text-sm text-red-300 bg-red-500/10 border border-red-500/20 rounded-xl px-4 py-3",children:_}),(()=>{const de=r.packingList.filter(pe=>pe.essential&&!pe.packed);return de.length>0?y.jsxs("div",{className:"flex items-start gap-3 bg-amber-500/10 border border-amber-500/20 rounded-xl p-4",children:[y.jsx(VI,{className:"w-4 h-4 text-amber-400 shrink-0 mt-0.5"}),y.jsxs("div",{children:[y.jsxs("p",{className:"text-sm font-medium text-amber-300",children:[de.length," essential item",de.length!==1?"s":""," not packed"]}),y.jsxs("p",{className:"text-xs text-amber-400/70 mt-0.5",children:[de.slice(0,3).map(pe=>pe.name).join(", "),de.length>3?` and ${de.length-3} more`:""]})]})]}):null})(),Y.map(de=>{const pe=r.packingList.filter(Se=>Se.category===de),Ee=pe.filter(Se=>Se.packed).length,Ce=Xk[de]??"";return y.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl overflow-hidden",children:[y.jsxs("div",{className:"px-5 py-3 border-b border-gray-800 flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"text-base",children:Ce}),y.jsx("h4",{className:"font-medium text-gray-300 text-sm",children:de})]}),y.jsxs("span",{className:"text-xs text-gray-500",children:[Ee,"/",pe.length]})]}),y.jsx("div",{className:"divide-y divide-gray-800/50",children:pe.map(Se=>y.jsxs("button",{onClick:()=>C(Se.id),className:"w-full flex items-center gap-3 px-5 py-3 hover:bg-gray-800/50 transition text-left",children:[y.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center shrink-0 transition-colors ${Se.packed?"bg-indigo-600 border-indigo-600":"border-gray-600 hover:border-gray-400"}`,children:Se.packed&&y.jsx(Vh,{className:"w-3 h-3 text-white",strokeWidth:3})}),y.jsx("span",{className:`flex-1 text-sm transition-colors ${Se.packed?"text-gray-600 line-through":"text-gray-200"}`,children:Se.name}),y.jsxs("div",{className:"flex items-center gap-1.5 shrink-0",children:[Se.quantity>1&&y.jsxs("span",{className:"text-xs text-gray-500",children:["",Se.quantity]}),Se.essential&&!Se.packed&&y.jsx("span",{className:"text-xs text-amber-400 bg-amber-500/10 border border-amber-500/20 px-1.5 py-0.5 rounded",children:"essential"})]})]},Se.id))})]},de)})]})}const tA=["What are the must-try local foods?","Best way to get around the city?","What should I know about local customs?","Hidden gems most tourists miss?","Best time of day to visit popular sites?","Safety tips for this destination?"];function Nf(){return Math.random().toString(36).slice(2,9)}function nA({trip:r,perplexityKey:e,hasAiKey:t,onSettingsClick:o,getChatHistory:a,saveChatHistory:c}){const[p,_]=ce.useState([]),[x,I]=ce.useState(""),[C,k]=ce.useState(!1),b=ce.useRef(null),q=ce.useRef(null);ce.useEffect(()=>{let Y=!1;return a(r.id).then(de=>{Y||_(de)}),()=>{Y=!0}},[r.id]),ce.useEffect(()=>{var Y;(Y=b.current)==null||Y.scrollIntoView({behavior:"smooth"})},[p]);const W=async Y=>{var Ee;if(!Y.trim()||C)return;const de={id:Nf(),role:"user",content:Y.trim(),timestamp:new Date().toISOString()},pe=[...p,de];_(pe),I(""),k(!0),(Ee=q.current)==null||Ee.focus();try{const Ce=p.map(R=>({role:R.role,content:R.content})),Se=await Bk(Y.trim(),Ce,r,e),Le={id:Nf(),role:"assistant",content:Se,timestamp:new Date().toISOString()},F=[...pe,Le];_(F),await c(r.id,F)}catch(Ce){const Se=Ce instanceof Error?Ce.message:"Something went wrong",Le={id:Nf(),role:"assistant",content:`Sorry, I ran into an error: ${Se}`,timestamp:new Date().toISOString()},F=[...pe,Le];_(F),await c(r.id,F)}finally{k(!1)}},Q=async()=>{confirm("Clear chat history?")&&(_([]),await c(r.id,[]))};return t?y.jsxs("div",{className:"flex flex-col",style:{height:"calc(100dvh - 300px)",minHeight:"280px"},children:[y.jsxs("div",{className:"flex items-center justify-between pb-3 mb-3 border-b border-gray-800",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"w-7 h-7 bg-indigo-500/20 rounded-lg flex items-center justify-center",children:y.jsx(Qc,{className:"w-4 h-4 text-indigo-400"})}),y.jsx("span",{className:"text-sm font-medium text-gray-300",children:"AI Travel Assistant"}),y.jsx("span",{className:"text-xs text-emerald-400 bg-emerald-500/10 px-2 py-0.5 rounded-full",children:"Online"})]}),p.length>0&&y.jsx("button",{onClick:Q,className:"p-1.5 text-gray-600 hover:text-gray-400 hover:bg-gray-800 rounded-lg transition",title:"Clear chat",children:y.jsx(Fh,{className:"w-4 h-4"})})]}),y.jsxs("div",{className:"flex-1 overflow-y-auto space-y-4",children:[p.length===0&&y.jsxs("div",{className:"flex flex-col items-center text-center pt-6 pb-4",children:[y.jsx("div",{className:"w-14 h-14 bg-indigo-500/10 border border-indigo-500/20 rounded-2xl flex items-center justify-center mb-3",children:y.jsx(Qc,{className:"w-7 h-7 text-indigo-400"})}),y.jsxs("p",{className:"font-medium text-gray-300 mb-1",children:["Ask me anything about ",r.destination]}),y.jsx("p",{className:"text-sm text-gray-500 mb-5 max-w-sm",children:"I know your trip details, interests, and budget. Let me help you plan the perfect experience."}),y.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:tA.map(Y=>y.jsx("button",{onClick:()=>W(Y),className:"text-sm text-indigo-300 bg-indigo-500/10 hover:bg-indigo-500/20 border border-indigo-500/20 hover:border-indigo-500/40 px-3 py-1.5 rounded-full transition",children:Y},Y))})]}),p.map(Y=>y.jsxs("div",{className:`flex gap-2.5 ${Y.role==="user"?"flex-row-reverse":"flex-row"}`,children:[y.jsx("div",{className:`w-7 h-7 rounded-lg flex items-center justify-center shrink-0 mt-0.5 ${Y.role==="assistant"?"bg-indigo-500/20":"bg-gray-700"}`,children:Y.role==="assistant"?y.jsx(Qc,{className:"w-3.5 h-3.5 text-indigo-400"}):y.jsx(QI,{className:"w-3.5 h-3.5 text-gray-300"})}),y.jsx("div",{className:`max-w-[78%] rounded-2xl px-4 py-3 text-sm leading-relaxed whitespace-pre-wrap ${Y.role==="user"?"bg-indigo-600 text-white rounded-tr-sm":"bg-gray-900 border border-gray-800 text-gray-200 rounded-tl-sm"}`,children:Y.content})]},Y.id)),C&&y.jsxs("div",{className:"flex gap-2.5",children:[y.jsx("div",{className:"w-7 h-7 rounded-lg bg-indigo-500/20 flex items-center justify-center shrink-0",children:y.jsx(Qc,{className:"w-3.5 h-3.5 text-indigo-400"})}),y.jsx("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl rounded-tl-sm px-4 py-3",children:y.jsxs("div",{className:"flex gap-1 items-center h-4",children:[y.jsx("span",{className:"w-1.5 h-1.5 bg-gray-500 rounded-full animate-bounce [animation-delay:0ms]"}),y.jsx("span",{className:"w-1.5 h-1.5 bg-gray-500 rounded-full animate-bounce [animation-delay:150ms]"}),y.jsx("span",{className:"w-1.5 h-1.5 bg-gray-500 rounded-full animate-bounce [animation-delay:300ms]"})]})})]}),y.jsx("div",{ref:b})]}),y.jsx("div",{className:"pt-4 border-t border-gray-800",children:y.jsxs("form",{onSubmit:Y=>{Y.preventDefault(),W(x)},className:"flex gap-2",children:[y.jsx("input",{ref:q,value:x,onChange:Y=>I(Y.target.value),placeholder:`Ask about ${r.destination}...`,disabled:C,className:"flex-1 bg-gray-900 border border-gray-700 rounded-xl px-4 py-3 text-gray-100 placeholder-gray-600 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition disabled:opacity-50 text-sm"}),y.jsx("button",{type:"submit",disabled:!x.trim()||C,className:"p-3 bg-indigo-600 hover:bg-indigo-500 disabled:opacity-40 disabled:cursor-not-allowed rounded-xl transition shrink-0",children:C?y.jsx(Un,{className:"w-5 h-5 animate-spin"}):y.jsx(GI,{className:"w-5 h-5"})})]})})]}):y.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[y.jsx("div",{className:"w-16 h-16 bg-gray-800 border border-gray-700 rounded-2xl flex items-center justify-center mb-5",children:y.jsx(Is,{className:"w-7 h-7 text-gray-500"})}),y.jsx("h3",{className:"text-lg font-semibold text-gray-400 mb-2",children:"AI Chat unavailable"}),y.jsxs("p",{className:"text-gray-600 max-w-sm mb-6 leading-relaxed text-sm",children:["Add your Perplexity API key to chat with an AI assistant about your trip to ",r.destination,"."]}),y.jsxs("button",{onClick:o,className:"flex items-center gap-2 px-5 py-2.5 bg-gray-800 hover:bg-gray-700 border border-gray-700 rounded-xl text-sm text-gray-300 transition",children:[y.jsx(ka,{className:"w-4 h-4"}),"Set up in Settings"]})]})}function Lw(r,e){const t=ce.useRef(e);ce.useEffect(function(){e!==t.current&&r.attributionControl!=null&&(t.current!=null&&r.attributionControl.removeAttribution(t.current),e!=null&&r.attributionControl.addAttribution(e)),t.current=e},[r,e])}var rA=Zy();const iA=1;function sA(r){return Object.freeze({__version:iA,map:r})}function oA(r,e){return Object.freeze({...r,...e})}const Dw=ce.createContext(null),Mw=Dw.Provider;function pm(){const r=ce.useContext(Dw);if(r==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return r}function aA(r){function e(t,o){const{instance:a,context:c}=r(t).current;return ce.useImperativeHandle(o,()=>a),t.children==null?null:Rf.createElement(Mw,{value:c},t.children)}return ce.forwardRef(e)}function lA(r){function e(t,o){const[a,c]=ce.useState(!1),{instance:p}=r(t,c).current;ce.useImperativeHandle(o,()=>p),ce.useEffect(function(){a&&p.update()},[p,a,t.children]);const _=p._contentNode;return _?rA.createPortal(t.children,_):null}return ce.forwardRef(e)}function uA(r){function e(t,o){const{instance:a}=r(t).current;return ce.useImperativeHandle(o,()=>a),null}return ce.forwardRef(e)}function Ow(r,e){const t=ce.useRef();ce.useEffect(function(){return e!=null&&r.instance.on(e),t.current=e,function(){t.current!=null&&r.instance.off(t.current),t.current=null}},[r,e])}function mm(r,e){const t=r.pane??e.pane;return t?{...r,pane:t}:r}function cA(r,e){return function(o,a){const c=pm(),p=r(mm(o,c),c);return Lw(c.map,o.attribution),Ow(p.current,o.eventHandlers),e(p.current,c,o,a),p}}var xu={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var hA=xu.exports,$y;function dA(){return $y||($y=1,(function(r,e){(function(t,o){o(e)})(hA,(function(t){var o="1.9.4";function a(i){var l,d,m,E;for(d=1,m=arguments.length;d<m;d++){E=arguments[d];for(l in E)i[l]=E[l]}return i}var c=Object.create||(function(){function i(){}return function(l){return i.prototype=l,new i}})();function p(i,l){var d=Array.prototype.slice;if(i.bind)return i.bind.apply(i,d.call(arguments,1));var m=d.call(arguments,2);return function(){return i.apply(l,m.length?m.concat(d.call(arguments)):arguments)}}var _=0;function x(i){return"_leaflet_id"in i||(i._leaflet_id=++_),i._leaflet_id}function I(i,l,d){var m,E,P,j;return j=function(){m=!1,E&&(P.apply(d,E),E=!1)},P=function(){m?E=arguments:(i.apply(d,arguments),setTimeout(j,l),m=!0)},P}function C(i,l,d){var m=l[1],E=l[0],P=m-E;return i===m&&d?i:((i-E)%P+P)%P+E}function k(){return!1}function b(i,l){if(l===!1)return i;var d=Math.pow(10,l===void 0?6:l);return Math.round(i*d)/d}function q(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}function W(i){return q(i).split(/\s+/)}function Q(i,l){Object.prototype.hasOwnProperty.call(i,"options")||(i.options=i.options?c(i.options):{});for(var d in l)i.options[d]=l[d];return i.options}function Y(i,l,d){var m=[];for(var E in i)m.push(encodeURIComponent(d?E.toUpperCase():E)+"="+encodeURIComponent(i[E]));return(!l||l.indexOf("?")===-1?"?":"&")+m.join("&")}var de=/\{ *([\w_ -]+) *\}/g;function pe(i,l){return i.replace(de,function(d,m){var E=l[m];if(E===void 0)throw new Error("No value provided for variable "+d);return typeof E=="function"&&(E=E(l)),E})}var Ee=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"};function Ce(i,l){for(var d=0;d<i.length;d++)if(i[d]===l)return d;return-1}var Se="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Le(i){return window["webkit"+i]||window["moz"+i]||window["ms"+i]}var F=0;function R(i){var l=+new Date,d=Math.max(0,16-(l-F));return F=l+d,window.setTimeout(i,d)}var O=window.requestAnimationFrame||Le("RequestAnimationFrame")||R,U=window.cancelAnimationFrame||Le("CancelAnimationFrame")||Le("CancelRequestAnimationFrame")||function(i){window.clearTimeout(i)};function D(i,l,d){if(d&&O===R)i.call(l);else return O.call(window,p(i,l))}function V(i){i&&U.call(window,i)}var N={__proto__:null,extend:a,create:c,bind:p,get lastId(){return _},stamp:x,throttle:I,wrapNum:C,falseFn:k,formatNum:b,trim:q,splitWords:W,setOptions:Q,getParamString:Y,template:pe,isArray:Ee,indexOf:Ce,emptyImageUrl:Se,requestFn:O,cancelFn:U,requestAnimFrame:D,cancelAnimFrame:V};function ae(){}ae.extend=function(i){var l=function(){Q(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},d=l.__super__=this.prototype,m=c(d);m.constructor=l,l.prototype=m;for(var E in this)Object.prototype.hasOwnProperty.call(this,E)&&E!=="prototype"&&E!=="__super__"&&(l[E]=this[E]);return i.statics&&a(l,i.statics),i.includes&&(Oe(i.includes),a.apply(null,[m].concat(i.includes))),a(m,i),delete m.statics,delete m.includes,m.options&&(m.options=d.options?c(d.options):{},a(m.options,i.options)),m._initHooks=[],m.callInitHooks=function(){if(!this._initHooksCalled){d.callInitHooks&&d.callInitHooks.call(this),this._initHooksCalled=!0;for(var P=0,j=m._initHooks.length;P<j;P++)m._initHooks[P].call(this)}},l},ae.include=function(i){var l=this.prototype.options;return a(this.prototype,i),i.options&&(this.prototype.options=l,this.mergeOptions(i.options)),this},ae.mergeOptions=function(i){return a(this.prototype.options,i),this},ae.addInitHook=function(i){var l=Array.prototype.slice.call(arguments,1),d=typeof i=="function"?i:function(){this[i].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(d),this};function Oe(i){if(!(typeof L>"u"||!L||!L.Mixin)){i=Ee(i)?i:[i];for(var l=0;l<i.length;l++)i[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ge={on:function(i,l,d){if(typeof i=="object")for(var m in i)this._on(m,i[m],l);else{i=W(i);for(var E=0,P=i.length;E<P;E++)this._on(i[E],l,d)}return this},off:function(i,l,d){if(!arguments.length)delete this._events;else if(typeof i=="object")for(var m in i)this._off(m,i[m],l);else{i=W(i);for(var E=arguments.length===1,P=0,j=i.length;P<j;P++)E?this._off(i[P]):this._off(i[P],l,d)}return this},_on:function(i,l,d,m){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(i,l,d)===!1){d===this&&(d=void 0);var E={fn:l,ctx:d};m&&(E.once=!0),this._events=this._events||{},this._events[i]=this._events[i]||[],this._events[i].push(E)}},_off:function(i,l,d){var m,E,P;if(this._events&&(m=this._events[i],!!m)){if(arguments.length===1){if(this._firingCount)for(E=0,P=m.length;E<P;E++)m[E].fn=k;delete this._events[i];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var j=this._listens(i,l,d);if(j!==!1){var G=m[j];this._firingCount&&(G.fn=k,this._events[i]=m=m.slice()),m.splice(j,1)}}},fire:function(i,l,d){if(!this.listens(i,d))return this;var m=a({},l,{type:i,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var E=this._events[i];if(E){this._firingCount=this._firingCount+1||1;for(var P=0,j=E.length;P<j;P++){var G=E[P],X=G.fn;G.once&&this.off(i,X,G.ctx),X.call(G.ctx||this,m)}this._firingCount--}}return d&&this._propagateEvent(m),this},listens:function(i,l,d,m){typeof i!="string"&&console.warn('"string" type argument expected');var E=l;typeof l!="function"&&(m=!!l,E=void 0,d=void 0);var P=this._events&&this._events[i];if(P&&P.length&&this._listens(i,E,d)!==!1)return!0;if(m){for(var j in this._eventParents)if(this._eventParents[j].listens(i,l,d,m))return!0}return!1},_listens:function(i,l,d){if(!this._events)return!1;var m=this._events[i]||[];if(!l)return!!m.length;d===this&&(d=void 0);for(var E=0,P=m.length;E<P;E++)if(m[E].fn===l&&m[E].ctx===d)return E;return!1},once:function(i,l,d){if(typeof i=="object")for(var m in i)this._on(m,i[m],l,!0);else{i=W(i);for(var E=0,P=i.length;E<P;E++)this._on(i[E],l,d,!0)}return this},addEventParent:function(i){return this._eventParents=this._eventParents||{},this._eventParents[x(i)]=i,this},removeEventParent:function(i){return this._eventParents&&delete this._eventParents[x(i)],this},_propagateEvent:function(i){for(var l in this._eventParents)this._eventParents[l].fire(i.type,a({layer:i.target,propagatedFrom:i.target},i),!0)}};ge.addEventListener=ge.on,ge.removeEventListener=ge.clearAllEventListeners=ge.off,ge.addOneTimeEventListener=ge.once,ge.fireEvent=ge.fire,ge.hasEventListeners=ge.listens;var Fe=ae.extend(ge);function te(i,l,d){this.x=d?Math.round(i):i,this.y=d?Math.round(l):l}var ke=Math.trunc||function(i){return i>0?Math.floor(i):Math.ceil(i)};te.prototype={clone:function(){return new te(this.x,this.y)},add:function(i){return this.clone()._add(ie(i))},_add:function(i){return this.x+=i.x,this.y+=i.y,this},subtract:function(i){return this.clone()._subtract(ie(i))},_subtract:function(i){return this.x-=i.x,this.y-=i.y,this},divideBy:function(i){return this.clone()._divideBy(i)},_divideBy:function(i){return this.x/=i,this.y/=i,this},multiplyBy:function(i){return this.clone()._multiplyBy(i)},_multiplyBy:function(i){return this.x*=i,this.y*=i,this},scaleBy:function(i){return new te(this.x*i.x,this.y*i.y)},unscaleBy:function(i){return new te(this.x/i.x,this.y/i.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ke(this.x),this.y=ke(this.y),this},distanceTo:function(i){i=ie(i);var l=i.x-this.x,d=i.y-this.y;return Math.sqrt(l*l+d*d)},equals:function(i){return i=ie(i),i.x===this.x&&i.y===this.y},contains:function(i){return i=ie(i),Math.abs(i.x)<=Math.abs(this.x)&&Math.abs(i.y)<=Math.abs(this.y)},toString:function(){return"Point("+b(this.x)+", "+b(this.y)+")"}};function ie(i,l,d){return i instanceof te?i:Ee(i)?new te(i[0],i[1]):i==null?i:typeof i=="object"&&"x"in i&&"y"in i?new te(i.x,i.y):new te(i,l,d)}function B(i,l){if(i)for(var d=l?[i,l]:i,m=0,E=d.length;m<E;m++)this.extend(d[m])}B.prototype={extend:function(i){var l,d;if(!i)return this;if(i instanceof te||typeof i[0]=="number"||"x"in i)l=d=ie(i);else if(i=ne(i),l=i.min,d=i.max,!l||!d)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=d.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(d.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(d.y,this.max.y)),this},getCenter:function(i){return ie((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,i)},getBottomLeft:function(){return ie(this.min.x,this.max.y)},getTopRight:function(){return ie(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(i){var l,d;return typeof i[0]=="number"||i instanceof te?i=ie(i):i=ne(i),i instanceof B?(l=i.min,d=i.max):l=d=i,l.x>=this.min.x&&d.x<=this.max.x&&l.y>=this.min.y&&d.y<=this.max.y},intersects:function(i){i=ne(i);var l=this.min,d=this.max,m=i.min,E=i.max,P=E.x>=l.x&&m.x<=d.x,j=E.y>=l.y&&m.y<=d.y;return P&&j},overlaps:function(i){i=ne(i);var l=this.min,d=this.max,m=i.min,E=i.max,P=E.x>l.x&&m.x<d.x,j=E.y>l.y&&m.y<d.y;return P&&j},isValid:function(){return!!(this.min&&this.max)},pad:function(i){var l=this.min,d=this.max,m=Math.abs(l.x-d.x)*i,E=Math.abs(l.y-d.y)*i;return ne(ie(l.x-m,l.y-E),ie(d.x+m,d.y+E))},equals:function(i){return i?(i=ne(i),this.min.equals(i.getTopLeft())&&this.max.equals(i.getBottomRight())):!1}};function ne(i,l){return!i||i instanceof B?i:new B(i,l)}function Me(i,l){if(i)for(var d=l?[i,l]:i,m=0,E=d.length;m<E;m++)this.extend(d[m])}Me.prototype={extend:function(i){var l=this._southWest,d=this._northEast,m,E;if(i instanceof Ae)m=i,E=i;else if(i instanceof Me){if(m=i._southWest,E=i._northEast,!m||!E)return this}else return i?this.extend(we(i)||Ne(i)):this;return!l&&!d?(this._southWest=new Ae(m.lat,m.lng),this._northEast=new Ae(E.lat,E.lng)):(l.lat=Math.min(m.lat,l.lat),l.lng=Math.min(m.lng,l.lng),d.lat=Math.max(E.lat,d.lat),d.lng=Math.max(E.lng,d.lng)),this},pad:function(i){var l=this._southWest,d=this._northEast,m=Math.abs(l.lat-d.lat)*i,E=Math.abs(l.lng-d.lng)*i;return new Me(new Ae(l.lat-m,l.lng-E),new Ae(d.lat+m,d.lng+E))},getCenter:function(){return new Ae((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Ae(this.getNorth(),this.getWest())},getSouthEast:function(){return new Ae(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(i){typeof i[0]=="number"||i instanceof Ae||"lat"in i?i=we(i):i=Ne(i);var l=this._southWest,d=this._northEast,m,E;return i instanceof Me?(m=i.getSouthWest(),E=i.getNorthEast()):m=E=i,m.lat>=l.lat&&E.lat<=d.lat&&m.lng>=l.lng&&E.lng<=d.lng},intersects:function(i){i=Ne(i);var l=this._southWest,d=this._northEast,m=i.getSouthWest(),E=i.getNorthEast(),P=E.lat>=l.lat&&m.lat<=d.lat,j=E.lng>=l.lng&&m.lng<=d.lng;return P&&j},overlaps:function(i){i=Ne(i);var l=this._southWest,d=this._northEast,m=i.getSouthWest(),E=i.getNorthEast(),P=E.lat>l.lat&&m.lat<d.lat,j=E.lng>l.lng&&m.lng<d.lng;return P&&j},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(i,l){return i?(i=Ne(i),this._southWest.equals(i.getSouthWest(),l)&&this._northEast.equals(i.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Ne(i,l){return i instanceof Me?i:new Me(i,l)}function Ae(i,l,d){if(isNaN(i)||isNaN(l))throw new Error("Invalid LatLng object: ("+i+", "+l+")");this.lat=+i,this.lng=+l,d!==void 0&&(this.alt=+d)}Ae.prototype={equals:function(i,l){if(!i)return!1;i=we(i);var d=Math.max(Math.abs(this.lat-i.lat),Math.abs(this.lng-i.lng));return d<=(l===void 0?1e-9:l)},toString:function(i){return"LatLng("+b(this.lat,i)+", "+b(this.lng,i)+")"},distanceTo:function(i){return Qe.distance(this,we(i))},wrap:function(){return Qe.wrapLatLng(this)},toBounds:function(i){var l=180*i/40075017,d=l/Math.cos(Math.PI/180*this.lat);return Ne([this.lat-l,this.lng-d],[this.lat+l,this.lng+d])},clone:function(){return new Ae(this.lat,this.lng,this.alt)}};function we(i,l,d){return i instanceof Ae?i:Ee(i)&&typeof i[0]!="object"?i.length===3?new Ae(i[0],i[1],i[2]):i.length===2?new Ae(i[0],i[1]):null:i==null?i:typeof i=="object"&&"lat"in i?new Ae(i.lat,"lng"in i?i.lng:i.lon,i.alt):l===void 0?null:new Ae(i,l,d)}var et={latLngToPoint:function(i,l){var d=this.projection.project(i),m=this.scale(l);return this.transformation._transform(d,m)},pointToLatLng:function(i,l){var d=this.scale(l),m=this.transformation.untransform(i,d);return this.projection.unproject(m)},project:function(i){return this.projection.project(i)},unproject:function(i){return this.projection.unproject(i)},scale:function(i){return 256*Math.pow(2,i)},zoom:function(i){return Math.log(i/256)/Math.LN2},getProjectedBounds:function(i){if(this.infinite)return null;var l=this.projection.bounds,d=this.scale(i),m=this.transformation.transform(l.min,d),E=this.transformation.transform(l.max,d);return new B(m,E)},infinite:!1,wrapLatLng:function(i){var l=this.wrapLng?C(i.lng,this.wrapLng,!0):i.lng,d=this.wrapLat?C(i.lat,this.wrapLat,!0):i.lat,m=i.alt;return new Ae(d,l,m)},wrapLatLngBounds:function(i){var l=i.getCenter(),d=this.wrapLatLng(l),m=l.lat-d.lat,E=l.lng-d.lng;if(m===0&&E===0)return i;var P=i.getSouthWest(),j=i.getNorthEast(),G=new Ae(P.lat-m,P.lng-E),X=new Ae(j.lat-m,j.lng-E);return new Me(G,X)}},Qe=a({},et,{wrapLng:[-180,180],R:6371e3,distance:function(i,l){var d=Math.PI/180,m=i.lat*d,E=l.lat*d,P=Math.sin((l.lat-i.lat)*d/2),j=Math.sin((l.lng-i.lng)*d/2),G=P*P+Math.cos(m)*Math.cos(E)*j*j,X=2*Math.atan2(Math.sqrt(G),Math.sqrt(1-G));return this.R*X}}),mt=6378137,Kt={R:mt,MAX_LATITUDE:85.0511287798,project:function(i){var l=Math.PI/180,d=this.MAX_LATITUDE,m=Math.max(Math.min(d,i.lat),-d),E=Math.sin(m*l);return new te(this.R*i.lng*l,this.R*Math.log((1+E)/(1-E))/2)},unproject:function(i){var l=180/Math.PI;return new Ae((2*Math.atan(Math.exp(i.y/this.R))-Math.PI/2)*l,i.x*l/this.R)},bounds:(function(){var i=mt*Math.PI;return new B([-i,-i],[i,i])})()};function ui(i,l,d,m){if(Ee(i)){this._a=i[0],this._b=i[1],this._c=i[2],this._d=i[3];return}this._a=i,this._b=l,this._c=d,this._d=m}ui.prototype={transform:function(i,l){return this._transform(i.clone(),l)},_transform:function(i,l){return l=l||1,i.x=l*(this._a*i.x+this._b),i.y=l*(this._c*i.y+this._d),i},untransform:function(i,l){return l=l||1,new te((i.x/l-this._b)/this._a,(i.y/l-this._d)/this._c)}};function Wr(i,l,d,m){return new ui(i,l,d,m)}var mr=a({},Qe,{code:"EPSG:3857",projection:Kt,transformation:(function(){var i=.5/(Math.PI*Kt.R);return Wr(i,.5,-i,.5)})()}),Rs=a({},mr,{code:"EPSG:900913"});function zo(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function Bi(i,l){var d="",m,E,P,j,G,X;for(m=0,P=i.length;m<P;m++){for(G=i[m],E=0,j=G.length;E<j;E++)X=G[E],d+=(E?"L":"M")+X.x+" "+X.y;d+=l?Ie.svg?"z":"x":""}return d||"M0 0"}var qr=document.documentElement.style,ci="ActiveXObject"in window,Dt=ci&&!document.addEventListener,Pt="msLaunchUri"in navigator&&!("documentMode"in document),An=zt("webkit"),Ls=zt("android"),Ds=zt("android 2")||zt("android 3"),Ra=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),hi=Ls&&zt("Google")&&Ra<537&&!("AudioNode"in window),Hi=!!window.opera,Wi=!Pt&&zt("chrome"),$r=zt("gecko")&&!An&&!Hi&&!ci,La=!Wi&&zt("safari"),di=zt("phantom"),Gr="OTransition"in qr,Da=navigator.platform.indexOf("Win")===0,Kr=ci&&"transition"in qr,fi="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Ds,Ms="MozPerspective"in qr,rr=!window.L_DISABLE_3D&&(Kr||fi||Ms)&&!Gr&&!di,gr=typeof orientation<"u"||zt("mobile"),pi=gr&&An,Os=gr&&fi,_r=!window.PointerEvent&&window.MSPointerEvent,yr=!!(window.PointerEvent||_r),Tt="ontouchstart"in window||!!window.TouchEvent,Uo=!window.L_NO_TOUCH&&(Tt||yr),mi=gr&&Hi,gi=gr&&$r,Ma=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Oa=(function(){var i=!1;try{var l=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("testPassiveEventSupport",k,l),window.removeEventListener("testPassiveEventSupport",k,l)}catch{}return i})(),vr=(function(){return!!document.createElement("canvas").getContext})(),Vs=!!(document.createElementNS&&zo("svg").createSVGRect),qi=!!Vs&&(function(){var i=document.createElement("div");return i.innerHTML="<svg/>",(i.firstChild&&i.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),_i=!Vs&&(function(){try{var i=document.createElement("div");i.innerHTML='<v:shape adj="1"/>';var l=i.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}})(),yi=navigator.platform.indexOf("Mac")===0,Va=navigator.platform.indexOf("Linux")===0;function zt(i){return navigator.userAgent.toLowerCase().indexOf(i)>=0}var Ie={ie:ci,ielt9:Dt,edge:Pt,webkit:An,android:Ls,android23:Ds,androidStock:hi,opera:Hi,chrome:Wi,gecko:$r,safari:La,phantom:di,opera12:Gr,win:Da,ie3d:Kr,webkit3d:fi,gecko3d:Ms,any3d:rr,mobile:gr,mobileWebkit:pi,mobileWebkit3d:Os,msPointer:_r,pointer:yr,touch:Uo,touchNative:Tt,mobileOpera:mi,mobileGecko:gi,retina:Ma,passiveEvents:Oa,canvas:vr,svg:Vs,vml:_i,inlineSvg:qi,mac:yi,linux:Va},$i=Ie.msPointer?"MSPointerDown":"pointerdown",bn=Ie.msPointer?"MSPointerMove":"pointermove",Bo=Ie.msPointer?"MSPointerUp":"pointerup",Ho=Ie.msPointer?"MSPointerCancel":"pointercancel",Gi={touchstart:$i,touchmove:bn,touchend:Bo,touchcancel:Ho},Hn={touchstart:vt,touchmove:Wn,touchend:Wn,touchcancel:Wn},wr={},Wo=!1;function ja(i,l,d){return l==="touchstart"&&Qi(),Hn[l]?(d=Hn[l].bind(this,d),i.addEventListener(Gi[l],d,!1),d):(console.warn("wrong event specified:",l),k)}function Fa(i,l,d){if(!Gi[l]){console.warn("wrong event specified:",l);return}i.removeEventListener(Gi[l],d,!1)}function Ki(i){wr[i.pointerId]=i}function qo(i){wr[i.pointerId]&&(wr[i.pointerId]=i)}function Zi(i){delete wr[i.pointerId]}function Qi(){Wo||(document.addEventListener($i,Ki,!0),document.addEventListener(bn,qo,!0),document.addEventListener(Bo,Zi,!0),document.addEventListener(Ho,Zi,!0),Wo=!0)}function Wn(i,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var d in wr)l.touches.push(wr[d]);l.changedTouches=[l],i(l)}}function vt(i,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&wt(l),Wn(i,l)}function zl(i){var l={},d,m;for(m in i)d=i[m],l[m]=d&&d.bind?d.bind(i):d;return i=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var js=200;function $o(i,l){i.addEventListener("dblclick",l);var d=0,m;function E(P){if(P.detail!==1){m=P.detail;return}if(!(P.pointerType==="mouse"||P.sourceCapabilities&&!P.sourceCapabilities.firesTouchEvents)){var j=Sr(P);if(!(j.some(function(X){return X instanceof HTMLLabelElement&&X.attributes.for})&&!j.some(function(X){return X instanceof HTMLInputElement||X instanceof HTMLSelectElement}))){var G=Date.now();G-d<=js?(m++,m===2&&l(zl(P))):m=1,d=G}}}return i.addEventListener("click",E),{dblclick:l,simDblclick:E}}function Yi(i,l){i.removeEventListener("dblclick",l.dblclick),i.removeEventListener("click",l.simDblclick)}var Ji=xi(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),xr=xi(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),vi=xr==="webkitTransition"||xr==="OTransition"?xr+"End":"transitionend";function mn(i){return typeof i=="string"?document.getElementById(i):i}function wi(i,l){var d=i.style[l]||i.currentStyle&&i.currentStyle[l];if((!d||d==="auto")&&document.defaultView){var m=document.defaultView.getComputedStyle(i,null);d=m?m[l]:null}return d==="auto"?null:d}function Ge(i,l,d){var m=document.createElement(i);return m.className=l||"",d&&d.appendChild(m),m}function at(i){var l=i.parentNode;l&&l.removeChild(i)}function an(i){for(;i.firstChild;)i.removeChild(i.firstChild)}function qn(i){var l=i.parentNode;l&&l.lastChild!==i&&l.appendChild(i)}function ln(i){var l=i.parentNode;l&&l.firstChild!==i&&l.insertBefore(i,l.firstChild)}function Er(i,l){if(i.classList!==void 0)return i.classList.contains(l);var d=Tr(i);return d.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(d)}function ve(i,l){if(i.classList!==void 0)for(var d=W(l),m=0,E=d.length;m<E;m++)i.classList.add(d[m]);else if(!Er(i,l)){var P=Tr(i);Zr(i,(P?P+" ":"")+l)}}function ft(i,l){i.classList!==void 0?i.classList.remove(l):Zr(i,q((" "+Tr(i)+" ").replace(" "+l+" "," ")))}function Zr(i,l){i.className.baseVal===void 0?i.className=l:i.className.baseVal=l}function Tr(i){return i.correspondingElement&&(i=i.correspondingElement),i.className.baseVal===void 0?i.className:i.className.baseVal}function en(i,l){"opacity"in i.style?i.style.opacity=l:"filter"in i.style&&Go(i,l)}function Go(i,l){var d=!1,m="DXImageTransform.Microsoft.Alpha";try{d=i.filters.item(m)}catch{if(l===1)return}l=Math.round(l*100),d?(d.Enabled=l!==100,d.Opacity=l):i.style.filter+=" progid:"+m+"(opacity="+l+")"}function xi(i){for(var l=document.documentElement.style,d=0;d<i.length;d++)if(i[d]in l)return i[d];return!1}function Nn(i,l,d){var m=l||new te(0,0);i.style[Ji]=(Ie.ie3d?"translate("+m.x+"px,"+m.y+"px)":"translate3d("+m.x+"px,"+m.y+"px,0)")+(d?" scale("+d+")":"")}function Ct(i,l){i._leaflet_pos=l,Ie.any3d?Nn(i,l):(i.style.left=l.x+"px",i.style.top=l.y+"px")}function ir(i){return i._leaflet_pos||new te(0,0)}var Je,gn,Xi;if("onselectstart"in document)Je=function(){ze(window,"selectstart",wt)},gn=function(){pt(window,"selectstart",wt)};else{var Ir=xi(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Je=function(){if(Ir){var i=document.documentElement.style;Xi=i[Ir],i[Ir]="none"}},gn=function(){Ir&&(document.documentElement.style[Ir]=Xi,Xi=void 0)}}function es(){ze(window,"dragstart",wt)}function ts(){pt(window,"dragstart",wt)}var Ei,$n;function Ti(i){for(;i.tabIndex===-1;)i=i.parentNode;i.style&&(Rn(),Ei=i,$n=i.style.outlineStyle,i.style.outlineStyle="none",ze(window,"keydown",Rn))}function Rn(){Ei&&(Ei.style.outlineStyle=$n,Ei=void 0,$n=void 0,pt(window,"keydown",Rn))}function sr(i){do i=i.parentNode;while((!i.offsetWidth||!i.offsetHeight)&&i!==document.body);return i}function Ot(i){var l=i.getBoundingClientRect();return{x:l.width/i.offsetWidth||1,y:l.height/i.offsetHeight||1,boundingClientRect:l}}var ns={__proto__:null,TRANSFORM:Ji,TRANSITION:xr,TRANSITION_END:vi,get:mn,getStyle:wi,create:Ge,remove:at,empty:an,toFront:qn,toBack:ln,hasClass:Er,addClass:ve,removeClass:ft,setClass:Zr,getClass:Tr,setOpacity:en,testProp:xi,setTransform:Nn,setPosition:Ct,getPosition:ir,get disableTextSelection(){return Je},get enableTextSelection(){return gn},disableImageDrag:es,enableImageDrag:ts,preventOutline:Ti,restoreOutline:Rn,getSizedParentNode:sr,getScale:Ot};function ze(i,l,d,m){if(l&&typeof l=="object")for(var E in l)Fs(i,E,l[E],d);else{l=W(l);for(var P=0,j=l.length;P<j;P++)Fs(i,l[P],d,m)}return this}var kt="_leaflet_events";function pt(i,l,d,m){if(arguments.length===1)Qr(i),delete i[kt];else if(l&&typeof l=="object")for(var E in l)Ii(i,E,l[E],d);else if(l=W(l),arguments.length===2)Qr(i,function(G){return Ce(l,G)!==-1});else for(var P=0,j=l.length;P<j;P++)Ii(i,l[P],d,m);return this}function Qr(i,l){for(var d in i[kt]){var m=d.split(/\d/)[0];(!l||l(m))&&Ii(i,m,null,null,d)}}var Ln={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Fs(i,l,d,m){var E=l+x(d)+(m?"_"+x(m):"");if(i[kt]&&i[kt][E])return this;var P=function(G){return d.call(m||i,G||window.event)},j=P;!Ie.touchNative&&Ie.pointer&&l.indexOf("touch")===0?P=ja(i,l,P):Ie.touch&&l==="dblclick"?P=$o(i,P):"addEventListener"in i?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?i.addEventListener(Ln[l]||l,P,Ie.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(P=function(G){G=G||window.event,is(i,G)&&j(G)},i.addEventListener(Ln[l],P,!1)):i.addEventListener(l,j,!1):i.attachEvent("on"+l,P),i[kt]=i[kt]||{},i[kt][E]=P}function Ii(i,l,d,m,E){E=E||l+x(d)+(m?"_"+x(m):"");var P=i[kt]&&i[kt][E];if(!P)return this;!Ie.touchNative&&Ie.pointer&&l.indexOf("touch")===0?Fa(i,l,P):Ie.touch&&l==="dblclick"?Yi(i,P):"removeEventListener"in i?i.removeEventListener(Ln[l]||l,P,!1):i.detachEvent("on"+l,P),i[kt][E]=null}function ot(i){return i.stopPropagation?i.stopPropagation():i.originalEvent?i.originalEvent._stopped=!0:i.cancelBubble=!0,this}function zs(i){return Fs(i,"wheel",ot),this}function rs(i){return ze(i,"mousedown touchstart dblclick contextmenu",ot),i._leaflet_disable_click=!0,this}function wt(i){return i.preventDefault?i.preventDefault():i.returnValue=!1,this}function _n(i){return wt(i),ot(i),this}function Sr(i){if(i.composedPath)return i.composedPath();for(var l=[],d=i.target;d;)l.push(d),d=d.parentNode;return l}function Pr(i,l){if(!l)return new te(i.clientX,i.clientY);var d=Ot(l),m=d.boundingClientRect;return new te((i.clientX-m.left)/d.x-l.clientLeft,(i.clientY-m.top)/d.y-l.clientTop)}var Cr=Ie.linux&&Ie.chrome?window.devicePixelRatio:Ie.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Ko(i){return Ie.edge?i.wheelDeltaY/2:i.deltaY&&i.deltaMode===0?-i.deltaY/Cr:i.deltaY&&i.deltaMode===1?-i.deltaY*20:i.deltaY&&i.deltaMode===2?-i.deltaY*60:i.deltaX||i.deltaZ?0:i.wheelDelta?(i.wheelDeltaY||i.wheelDelta)/2:i.detail&&Math.abs(i.detail)<32765?-i.detail*20:i.detail?i.detail/-32765*60:0}function is(i,l){var d=l.relatedTarget;if(!d)return!0;try{for(;d&&d!==i;)d=d.parentNode}catch{return!1}return d!==i}var kr={__proto__:null,on:ze,off:pt,stopPropagation:ot,disableScrollPropagation:zs,disableClickPropagation:rs,preventDefault:wt,stop:_n,getPropagationPath:Sr,getMousePosition:Pr,getWheelDelta:Ko,isExternalTarget:is,addListener:ze,removeListener:pt},ss=Fe.extend({run:function(i,l,d,m){this.stop(),this._el=i,this._inProgress=!0,this._duration=d||.25,this._easeOutPower=1/Math.max(m||.5,.2),this._startPos=ir(i),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=D(this._animate,this),this._step()},_step:function(i){var l=+new Date-this._startTime,d=this._duration*1e3;l<d?this._runFrame(this._easeOut(l/d),i):(this._runFrame(1),this._complete())},_runFrame:function(i,l){var d=this._startPos.add(this._offset.multiplyBy(i));l&&d._round(),Ct(this._el,d),this.fire("step")},_complete:function(){V(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(i){return 1-Math.pow(1-i,this._easeOutPower)}}),Xe=Fe.extend({options:{crs:mr,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(i,l){l=Q(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(i),this._initLayout(),this._onResize=p(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(we(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=xr&&Ie.any3d&&!Ie.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ze(this._proxy,vi,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(i,l,d){if(l=l===void 0?this._zoom:this._limitZoom(l),i=this._limitCenter(we(i),l,this.options.maxBounds),d=d||{},this._stop(),this._loaded&&!d.reset&&d!==!0){d.animate!==void 0&&(d.zoom=a({animate:d.animate},d.zoom),d.pan=a({animate:d.animate,duration:d.duration},d.pan));var m=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(i,l,d.zoom):this._tryAnimatedPan(i,d.pan);if(m)return clearTimeout(this._sizeTimer),this}return this._resetView(i,l,d.pan&&d.pan.noMoveStart),this},setZoom:function(i,l){return this._loaded?this.setView(this.getCenter(),i,{zoom:l}):(this._zoom=i,this)},zoomIn:function(i,l){return i=i||(Ie.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+i,l)},zoomOut:function(i,l){return i=i||(Ie.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-i,l)},setZoomAround:function(i,l,d){var m=this.getZoomScale(l),E=this.getSize().divideBy(2),P=i instanceof te?i:this.latLngToContainerPoint(i),j=P.subtract(E).multiplyBy(1-1/m),G=this.containerPointToLatLng(E.add(j));return this.setView(G,l,{zoom:d})},_getBoundsCenterZoom:function(i,l){l=l||{},i=i.getBounds?i.getBounds():Ne(i);var d=ie(l.paddingTopLeft||l.padding||[0,0]),m=ie(l.paddingBottomRight||l.padding||[0,0]),E=this.getBoundsZoom(i,!1,d.add(m));if(E=typeof l.maxZoom=="number"?Math.min(l.maxZoom,E):E,E===1/0)return{center:i.getCenter(),zoom:E};var P=m.subtract(d).divideBy(2),j=this.project(i.getSouthWest(),E),G=this.project(i.getNorthEast(),E),X=this.unproject(j.add(G).divideBy(2).add(P),E);return{center:X,zoom:E}},fitBounds:function(i,l){if(i=Ne(i),!i.isValid())throw new Error("Bounds are not valid.");var d=this._getBoundsCenterZoom(i,l);return this.setView(d.center,d.zoom,l)},fitWorld:function(i){return this.fitBounds([[-90,-180],[90,180]],i)},panTo:function(i,l){return this.setView(i,this._zoom,{pan:l})},panBy:function(i,l){if(i=ie(i).round(),l=l||{},!i.x&&!i.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(i))return this._resetView(this.unproject(this.project(this.getCenter()).add(i)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ss,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){ve(this._mapPane,"leaflet-pan-anim");var d=this._getMapPanePos().subtract(i).round();this._panAnim.run(this._mapPane,d,l.duration||.25,l.easeLinearity)}else this._rawPanBy(i),this.fire("move").fire("moveend");return this},flyTo:function(i,l,d){if(d=d||{},d.animate===!1||!Ie.any3d)return this.setView(i,l,d);this._stop();var m=this.project(this.getCenter()),E=this.project(i),P=this.getSize(),j=this._zoom;i=we(i),l=l===void 0?j:l;var G=Math.max(P.x,P.y),X=G*this.getZoomScale(j,l),oe=E.distanceTo(m)||1,ye=1.42,je=ye*ye;function Ye(gt){var so=gt?-1:1,ad=gt?X:G,ld=X*X-G*G+so*je*je*oe*oe,hs=2*ad*je*oe,ds=ld/hs,fs=Math.sqrt(ds*ds+1)-ds,Ya=fs<1e-9?-18:Math.log(fs);return Ya}function Qt(gt){return(Math.exp(gt)-Math.exp(-gt))/2}function Bt(gt){return(Math.exp(gt)+Math.exp(-gt))/2}function jn(gt){return Qt(gt)/Bt(gt)}var wn=Ye(0);function ro(gt){return G*(Bt(wn)/Bt(wn+ye*gt))}function Jl(gt){return G*(Bt(wn)*jn(wn+ye*gt)-Qt(wn))/je}function Ni(gt){return 1-Math.pow(1-gt,1.5)}var uc=Date.now(),cs=(Ye(1)-wn)/ye,Mr=d.duration?1e3*d.duration:1e3*cs*.8;function io(){var gt=(Date.now()-uc)/Mr,so=Ni(gt)*cs;gt<=1?(this._flyToFrame=D(io,this),this._move(this.unproject(m.add(E.subtract(m).multiplyBy(Jl(so)/oe)),j),this.getScaleZoom(G/ro(so),j),{flyTo:!0})):this._move(i,l)._moveEnd(!0)}return this._moveStart(!0,d.noMoveStart),io.call(this),this},flyToBounds:function(i,l){var d=this._getBoundsCenterZoom(i,l);return this.flyTo(d.center,d.zoom,l)},setMaxBounds:function(i){return i=Ne(i),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),i.isValid()?(this.options.maxBounds=i,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(i){var l=this.options.minZoom;return this.options.minZoom=i,this._loaded&&l!==i&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(i):this},setMaxZoom:function(i){var l=this.options.maxZoom;return this.options.maxZoom=i,this._loaded&&l!==i&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(i):this},panInsideBounds:function(i,l){this._enforcingBounds=!0;var d=this.getCenter(),m=this._limitCenter(d,this._zoom,Ne(i));return d.equals(m)||this.panTo(m,l),this._enforcingBounds=!1,this},panInside:function(i,l){l=l||{};var d=ie(l.paddingTopLeft||l.padding||[0,0]),m=ie(l.paddingBottomRight||l.padding||[0,0]),E=this.project(this.getCenter()),P=this.project(i),j=this.getPixelBounds(),G=ne([j.min.add(d),j.max.subtract(m)]),X=G.getSize();if(!G.contains(P)){this._enforcingBounds=!0;var oe=P.subtract(G.getCenter()),ye=G.extend(P).getSize().subtract(X);E.x+=oe.x<0?-ye.x:ye.x,E.y+=oe.y<0?-ye.y:ye.y,this.panTo(this.unproject(E),l),this._enforcingBounds=!1}return this},invalidateSize:function(i){if(!this._loaded)return this;i=a({animate:!1,pan:!0},i===!0?{animate:!0}:i);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var d=this.getSize(),m=l.divideBy(2).round(),E=d.divideBy(2).round(),P=m.subtract(E);return!P.x&&!P.y?this:(i.animate&&i.pan?this.panBy(P):(i.pan&&this._rawPanBy(P),this.fire("move"),i.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(p(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:d}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(i){if(i=this._locateOptions=a({timeout:1e4,watch:!1},i),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=p(this._handleGeolocationResponse,this),d=p(this._handleGeolocationError,this);return i.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,d,i):navigator.geolocation.getCurrentPosition(l,d,i),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(i){if(this._container._leaflet_id){var l=i.code,d=i.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+d+"."})}},_handleGeolocationResponse:function(i){if(this._container._leaflet_id){var l=i.coords.latitude,d=i.coords.longitude,m=new Ae(l,d),E=m.toBounds(i.coords.accuracy*2),P=this._locateOptions;if(P.setView){var j=this.getBoundsZoom(E);this.setView(m,P.maxZoom?Math.min(j,P.maxZoom):j)}var G={latlng:m,bounds:E,timestamp:i.timestamp};for(var X in i.coords)typeof i.coords[X]=="number"&&(G[X]=i.coords[X]);this.fire("locationfound",G)}},addHandler:function(i,l){if(!l)return this;var d=this[i]=new l(this);return this._handlers.push(d),this.options[i]&&d.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),at(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(V(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var i;for(i in this._layers)this._layers[i].remove();for(i in this._panes)at(this._panes[i]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(i,l){var d="leaflet-pane"+(i?" leaflet-"+i.replace("Pane","")+"-pane":""),m=Ge("div",d,l||this._mapPane);return i&&(this._panes[i]=m),m},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var i=this.getPixelBounds(),l=this.unproject(i.getBottomLeft()),d=this.unproject(i.getTopRight());return new Me(l,d)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(i,l,d){i=Ne(i),d=ie(d||[0,0]);var m=this.getZoom()||0,E=this.getMinZoom(),P=this.getMaxZoom(),j=i.getNorthWest(),G=i.getSouthEast(),X=this.getSize().subtract(d),oe=ne(this.project(G,m),this.project(j,m)).getSize(),ye=Ie.any3d?this.options.zoomSnap:1,je=X.x/oe.x,Ye=X.y/oe.y,Qt=l?Math.max(je,Ye):Math.min(je,Ye);return m=this.getScaleZoom(Qt,m),ye&&(m=Math.round(m/(ye/100))*(ye/100),m=l?Math.ceil(m/ye)*ye:Math.floor(m/ye)*ye),Math.max(E,Math.min(P,m))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new te(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(i,l){var d=this._getTopLeftPoint(i,l);return new B(d,d.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(i){return this.options.crs.getProjectedBounds(i===void 0?this.getZoom():i)},getPane:function(i){return typeof i=="string"?this._panes[i]:i},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(i,l){var d=this.options.crs;return l=l===void 0?this._zoom:l,d.scale(i)/d.scale(l)},getScaleZoom:function(i,l){var d=this.options.crs;l=l===void 0?this._zoom:l;var m=d.zoom(i*d.scale(l));return isNaN(m)?1/0:m},project:function(i,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(we(i),l)},unproject:function(i,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(ie(i),l)},layerPointToLatLng:function(i){var l=ie(i).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(i){var l=this.project(we(i))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(i){return this.options.crs.wrapLatLng(we(i))},wrapLatLngBounds:function(i){return this.options.crs.wrapLatLngBounds(Ne(i))},distance:function(i,l){return this.options.crs.distance(we(i),we(l))},containerPointToLayerPoint:function(i){return ie(i).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(i){return ie(i).add(this._getMapPanePos())},containerPointToLatLng:function(i){var l=this.containerPointToLayerPoint(ie(i));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(i){return this.layerPointToContainerPoint(this.latLngToLayerPoint(we(i)))},mouseEventToContainerPoint:function(i){return Pr(i,this._container)},mouseEventToLayerPoint:function(i){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(i))},mouseEventToLatLng:function(i){return this.layerPointToLatLng(this.mouseEventToLayerPoint(i))},_initContainer:function(i){var l=this._container=mn(i);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ze(l,"scroll",this._onScroll,this),this._containerId=x(l)},_initLayout:function(){var i=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ie.any3d,ve(i,"leaflet-container"+(Ie.touch?" leaflet-touch":"")+(Ie.retina?" leaflet-retina":"")+(Ie.ielt9?" leaflet-oldie":"")+(Ie.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=wi(i,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(i.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var i=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ct(this._mapPane,new te(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ve(i.markerPane,"leaflet-zoom-hide"),ve(i.shadowPane,"leaflet-zoom-hide"))},_resetView:function(i,l,d){Ct(this._mapPane,new te(0,0));var m=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var E=this._zoom!==l;this._moveStart(E,d)._move(i,l)._moveEnd(E),this.fire("viewreset"),m&&this.fire("load")},_moveStart:function(i,l){return i&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(i,l,d,m){l===void 0&&(l=this._zoom);var E=this._zoom!==l;return this._zoom=l,this._lastCenter=i,this._pixelOrigin=this._getNewPixelOrigin(i),m?d&&d.pinch&&this.fire("zoom",d):((E||d&&d.pinch)&&this.fire("zoom",d),this.fire("move",d)),this},_moveEnd:function(i){return i&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return V(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(i){Ct(this._mapPane,this._getMapPanePos().subtract(i))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(i){this._targets={},this._targets[x(this._container)]=this;var l=i?pt:ze;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),Ie.any3d&&this.options.transform3DLimit&&(i?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){V(this._resizeRequest),this._resizeRequest=D(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var i=this._getMapPanePos();Math.max(Math.abs(i.x),Math.abs(i.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(i,l){for(var d=[],m,E=l==="mouseout"||l==="mouseover",P=i.target||i.srcElement,j=!1;P;){if(m=this._targets[x(P)],m&&(l==="click"||l==="preclick")&&this._draggableMoved(m)){j=!0;break}if(m&&m.listens(l,!0)&&(E&&!is(P,i)||(d.push(m),E))||P===this._container)break;P=P.parentNode}return!d.length&&!j&&!E&&this.listens(l,!0)&&(d=[this]),d},_isClickDisabled:function(i){for(;i&&i!==this._container;){if(i._leaflet_disable_click)return!0;i=i.parentNode}},_handleDOMEvent:function(i){var l=i.target||i.srcElement;if(!(!this._loaded||l._leaflet_disable_events||i.type==="click"&&this._isClickDisabled(l))){var d=i.type;d==="mousedown"&&Ti(l),this._fireDOMEvent(i,d)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(i,l,d){if(i.type==="click"){var m=a({},i);m.type="preclick",this._fireDOMEvent(m,m.type,d)}var E=this._findEventTargets(i,l);if(d){for(var P=[],j=0;j<d.length;j++)d[j].listens(l,!0)&&P.push(d[j]);E=P.concat(E)}if(E.length){l==="contextmenu"&&wt(i);var G=E[0],X={originalEvent:i};if(i.type!=="keypress"&&i.type!=="keydown"&&i.type!=="keyup"){var oe=G.getLatLng&&(!G._radius||G._radius<=10);X.containerPoint=oe?this.latLngToContainerPoint(G.getLatLng()):this.mouseEventToContainerPoint(i),X.layerPoint=this.containerPointToLayerPoint(X.containerPoint),X.latlng=oe?G.getLatLng():this.layerPointToLatLng(X.layerPoint)}for(j=0;j<E.length;j++)if(E[j].fire(l,X,!0),X.originalEvent._stopped||E[j].options.bubblingMouseEvents===!1&&Ce(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(i){return i=i.dragging&&i.dragging.enabled()?i:this,i.dragging&&i.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var i=0,l=this._handlers.length;i<l;i++)this._handlers[i].disable()},whenReady:function(i,l){return this._loaded?i.call(l||this,{target:this}):this.on("load",i,l),this},_getMapPanePos:function(){return ir(this._mapPane)||new te(0,0)},_moved:function(){var i=this._getMapPanePos();return i&&!i.equals([0,0])},_getTopLeftPoint:function(i,l){var d=i&&l!==void 0?this._getNewPixelOrigin(i,l):this.getPixelOrigin();return d.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(i,l){var d=this.getSize()._divideBy(2);return this.project(i,l)._subtract(d)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(i,l,d){var m=this._getNewPixelOrigin(d,l);return this.project(i,l)._subtract(m)},_latLngBoundsToNewLayerBounds:function(i,l,d){var m=this._getNewPixelOrigin(d,l);return ne([this.project(i.getSouthWest(),l)._subtract(m),this.project(i.getNorthWest(),l)._subtract(m),this.project(i.getSouthEast(),l)._subtract(m),this.project(i.getNorthEast(),l)._subtract(m)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(i){return this.latLngToLayerPoint(i).subtract(this._getCenterLayerPoint())},_limitCenter:function(i,l,d){if(!d)return i;var m=this.project(i,l),E=this.getSize().divideBy(2),P=new B(m.subtract(E),m.add(E)),j=this._getBoundsOffset(P,d,l);return Math.abs(j.x)<=1&&Math.abs(j.y)<=1?i:this.unproject(m.add(j),l)},_limitOffset:function(i,l){if(!l)return i;var d=this.getPixelBounds(),m=new B(d.min.add(i),d.max.add(i));return i.add(this._getBoundsOffset(m,l))},_getBoundsOffset:function(i,l,d){var m=ne(this.project(l.getNorthEast(),d),this.project(l.getSouthWest(),d)),E=m.min.subtract(i.min),P=m.max.subtract(i.max),j=this._rebound(E.x,-P.x),G=this._rebound(E.y,-P.y);return new te(j,G)},_rebound:function(i,l){return i+l>0?Math.round(i-l)/2:Math.max(0,Math.ceil(i))-Math.max(0,Math.floor(l))},_limitZoom:function(i){var l=this.getMinZoom(),d=this.getMaxZoom(),m=Ie.any3d?this.options.zoomSnap:1;return m&&(i=Math.round(i/m)*m),Math.max(l,Math.min(d,i))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ft(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(i,l){var d=this._getCenterOffset(i)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(d)?!1:(this.panBy(d,l),!0)},_createAnimProxy:function(){var i=this._proxy=Ge("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(i),this.on("zoomanim",function(l){var d=Ji,m=this._proxy.style[d];Nn(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),m===this._proxy.style[d]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){at(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var i=this.getCenter(),l=this.getZoom();Nn(this._proxy,this.project(i,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(i){this._animatingZoom&&i.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(i,l,d){if(this._animatingZoom)return!0;if(d=d||{},!this._zoomAnimated||d.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var m=this.getZoomScale(l),E=this._getCenterOffset(i)._divideBy(1-1/m);return d.animate!==!0&&!this.getSize().contains(E)?!1:(D(function(){this._moveStart(!0,d.noMoveStart||!1)._animateZoom(i,l,!0)},this),!0)},_animateZoom:function(i,l,d,m){this._mapPane&&(d&&(this._animatingZoom=!0,this._animateToCenter=i,this._animateToZoom=l,ve(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:i,zoom:l,noUpdate:m}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(p(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ft(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Dn(i,l){return new Xe(i,l)}var tn=ae.extend({options:{position:"topright"},initialize:function(i){Q(this,i)},getPosition:function(){return this.options.position},setPosition:function(i){var l=this._map;return l&&l.removeControl(this),this.options.position=i,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(i){this.remove(),this._map=i;var l=this._container=this.onAdd(i),d=this.getPosition(),m=i._controlCorners[d];return ve(l,"leaflet-control"),d.indexOf("bottom")!==-1?m.insertBefore(l,m.firstChild):m.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(at(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(i){this._map&&i&&i.screenX>0&&i.screenY>0&&this._map.getContainer().focus()}}),Mn=function(i){return new tn(i)};Xe.include({addControl:function(i){return i.addTo(this),this},removeControl:function(i){return i.remove(),this},_initControlPos:function(){var i=this._controlCorners={},l="leaflet-",d=this._controlContainer=Ge("div",l+"control-container",this._container);function m(E,P){var j=l+E+" "+l+P;i[E+P]=Ge("div",j,d)}m("top","left"),m("top","right"),m("bottom","left"),m("bottom","right")},_clearControlPos:function(){for(var i in this._controlCorners)at(this._controlCorners[i]);at(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Zo=tn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(i,l,d,m){return d<m?-1:m<d?1:0}},initialize:function(i,l,d){Q(this,d),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var m in i)this._addLayer(i[m],m);for(m in l)this._addLayer(l[m],m,!0)},onAdd:function(i){this._initLayout(),this._update(),this._map=i,i.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(i){return tn.prototype.addTo.call(this,i),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(i,l){return this._addLayer(i,l),this._map?this._update():this},addOverlay:function(i,l){return this._addLayer(i,l,!0),this._map?this._update():this},removeLayer:function(i){i.off("add remove",this._onLayerChange,this);var l=this._getLayer(x(i));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){ve(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var i=this._map.getSize().y-(this._container.offsetTop+50);return i<this._section.clientHeight?(ve(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=i+"px"):ft(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ft(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var i="leaflet-control-layers",l=this._container=Ge("div",i),d=this.options.collapsed;l.setAttribute("aria-haspopup",!0),rs(l),zs(l);var m=this._section=Ge("section",i+"-list");d&&(this._map.on("click",this.collapse,this),ze(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var E=this._layersLink=Ge("a",i+"-toggle",l);E.href="#",E.title="Layers",E.setAttribute("role","button"),ze(E,{keydown:function(P){P.keyCode===13&&this._expandSafely()},click:function(P){wt(P),this._expandSafely()}},this),d||this.expand(),this._baseLayersList=Ge("div",i+"-base",m),this._separator=Ge("div",i+"-separator",m),this._overlaysList=Ge("div",i+"-overlays",m),l.appendChild(m)},_getLayer:function(i){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&x(this._layers[l].layer)===i)return this._layers[l]},_addLayer:function(i,l,d){this._map&&i.on("add remove",this._onLayerChange,this),this._layers.push({layer:i,name:l,overlay:d}),this.options.sortLayers&&this._layers.sort(p(function(m,E){return this.options.sortFunction(m.layer,E.layer,m.name,E.name)},this)),this.options.autoZIndex&&i.setZIndex&&(this._lastZIndex++,i.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;an(this._baseLayersList),an(this._overlaysList),this._layerControlInputs=[];var i,l,d,m,E=0;for(d=0;d<this._layers.length;d++)m=this._layers[d],this._addItem(m),l=l||m.overlay,i=i||!m.overlay,E+=m.overlay?0:1;return this.options.hideSingleBase&&(i=i&&E>1,this._baseLayersList.style.display=i?"":"none"),this._separator.style.display=l&&i?"":"none",this},_onLayerChange:function(i){this._handlingClick||this._update();var l=this._getLayer(x(i.target)),d=l.overlay?i.type==="add"?"overlayadd":"overlayremove":i.type==="add"?"baselayerchange":null;d&&this._map.fire(d,l)},_createRadioElement:function(i,l){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+i+'"'+(l?' checked="checked"':"")+"/>",m=document.createElement("div");return m.innerHTML=d,m.firstChild},_addItem:function(i){var l=document.createElement("label"),d=this._map.hasLayer(i.layer),m;i.overlay?(m=document.createElement("input"),m.type="checkbox",m.className="leaflet-control-layers-selector",m.defaultChecked=d):m=this._createRadioElement("leaflet-base-layers_"+x(this),d),this._layerControlInputs.push(m),m.layerId=x(i.layer),ze(m,"click",this._onInputClick,this);var E=document.createElement("span");E.innerHTML=" "+i.name;var P=document.createElement("span");l.appendChild(P),P.appendChild(m),P.appendChild(E);var j=i.overlay?this._overlaysList:this._baseLayersList;return j.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var i=this._layerControlInputs,l,d,m=[],E=[];this._handlingClick=!0;for(var P=i.length-1;P>=0;P--)l=i[P],d=this._getLayer(l.layerId).layer,l.checked?m.push(d):l.checked||E.push(d);for(P=0;P<E.length;P++)this._map.hasLayer(E[P])&&this._map.removeLayer(E[P]);for(P=0;P<m.length;P++)this._map.hasLayer(m[P])||this._map.addLayer(m[P]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var i=this._layerControlInputs,l,d,m=this._map.getZoom(),E=i.length-1;E>=0;E--)l=i[E],d=this._getLayer(l.layerId).layer,l.disabled=d.options.minZoom!==void 0&&m<d.options.minZoom||d.options.maxZoom!==void 0&&m>d.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var i=this._section;this._preventClick=!0,ze(i,"click",wt),this.expand();var l=this;setTimeout(function(){pt(i,"click",wt),l._preventClick=!1})}}),os=function(i,l,d){return new Zo(i,l,d)},Gn=tn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(i){var l="leaflet-control-zoom",d=Ge("div",l+" leaflet-bar"),m=this.options;return this._zoomInButton=this._createButton(m.zoomInText,m.zoomInTitle,l+"-in",d,this._zoomIn),this._zoomOutButton=this._createButton(m.zoomOutText,m.zoomOutTitle,l+"-out",d,this._zoomOut),this._updateDisabled(),i.on("zoomend zoomlevelschange",this._updateDisabled,this),d},onRemove:function(i){i.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(i){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(i.shiftKey?3:1))},_zoomOut:function(i){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(i.shiftKey?3:1))},_createButton:function(i,l,d,m,E){var P=Ge("a",d,m);return P.innerHTML=i,P.href="#",P.title=l,P.setAttribute("role","button"),P.setAttribute("aria-label",l),rs(P),ze(P,"click",_n),ze(P,"click",E,this),ze(P,"click",this._refocusOnMap,this),P},_updateDisabled:function(){var i=this._map,l="leaflet-disabled";ft(this._zoomInButton,l),ft(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||i._zoom===i.getMinZoom())&&(ve(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||i._zoom===i.getMaxZoom())&&(ve(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});Xe.mergeOptions({zoomControl:!0}),Xe.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Gn,this.addControl(this.zoomControl))});var Qo=function(i){return new Gn(i)},Zt=tn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(i){var l="leaflet-control-scale",d=Ge("div",l),m=this.options;return this._addScales(m,l+"-line",d),i.on(m.updateWhenIdle?"moveend":"move",this._update,this),i.whenReady(this._update,this),d},onRemove:function(i){i.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(i,l,d){i.metric&&(this._mScale=Ge("div",l,d)),i.imperial&&(this._iScale=Ge("div",l,d))},_update:function(){var i=this._map,l=i.getSize().y/2,d=i.distance(i.containerPointToLatLng([0,l]),i.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(d)},_updateScales:function(i){this.options.metric&&i&&this._updateMetric(i),this.options.imperial&&i&&this._updateImperial(i)},_updateMetric:function(i){var l=this._getRoundNum(i),d=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,d,l/i)},_updateImperial:function(i){var l=i*3.2808399,d,m,E;l>5280?(d=l/5280,m=this._getRoundNum(d),this._updateScale(this._iScale,m+" mi",m/d)):(E=this._getRoundNum(l),this._updateScale(this._iScale,E+" ft",E/l))},_updateScale:function(i,l,d){i.style.width=Math.round(this.options.maxWidth*d)+"px",i.innerHTML=l},_getRoundNum:function(i){var l=Math.pow(10,(Math.floor(i)+"").length-1),d=i/l;return d=d>=10?10:d>=5?5:d>=3?3:d>=2?2:1,l*d}}),Ar=function(i){return new Zt(i)},as='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',br=tn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ie.inlineSvg?as+" ":"")+"Leaflet</a>"},initialize:function(i){Q(this,i),this._attributions={}},onAdd:function(i){i.attributionControl=this,this._container=Ge("div","leaflet-control-attribution"),rs(this._container);for(var l in i._layers)i._layers[l].getAttribution&&this.addAttribution(i._layers[l].getAttribution());return this._update(),i.on("layeradd",this._addAttribution,this),this._container},onRemove:function(i){i.off("layeradd",this._addAttribution,this)},_addAttribution:function(i){i.layer.getAttribution&&(this.addAttribution(i.layer.getAttribution()),i.layer.once("remove",function(){this.removeAttribution(i.layer.getAttribution())},this))},setPrefix:function(i){return this.options.prefix=i,this._update(),this},addAttribution:function(i){return i?(this._attributions[i]||(this._attributions[i]=0),this._attributions[i]++,this._update(),this):this},removeAttribution:function(i){return i?(this._attributions[i]&&(this._attributions[i]--,this._update()),this):this},_update:function(){if(this._map){var i=[];for(var l in this._attributions)this._attributions[l]&&i.push(l);var d=[];this.options.prefix&&d.push(this.options.prefix),i.length&&d.push(i.join(", ")),this._container.innerHTML=d.join(' <span aria-hidden="true">|</span> ')}}});Xe.mergeOptions({attributionControl:!0}),Xe.addInitHook(function(){this.options.attributionControl&&new br().addTo(this)});var Us=function(i){return new br(i)};tn.Layers=Zo,tn.Zoom=Gn,tn.Scale=Zt,tn.Attribution=br,Mn.layers=os,Mn.zoom=Qo,Mn.scale=Ar,Mn.attribution=Us;var un=ae.extend({initialize:function(i){this._map=i},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});un.addTo=function(i,l){return i.addHandler(l,this),this};var Bs={Events:ge},yn=Ie.touch?"touchstart mousedown":"mousedown",vn=Fe.extend({options:{clickTolerance:3},initialize:function(i,l,d,m){Q(this,m),this._element=i,this._dragStartTarget=l||i,this._preventOutline=d},enable:function(){this._enabled||(ze(this._dragStartTarget,yn,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(vn._dragging===this&&this.finishDrag(!0),pt(this._dragStartTarget,yn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(i){if(this._enabled&&(this._moved=!1,!Er(this._element,"leaflet-zoom-anim"))){if(i.touches&&i.touches.length!==1){vn._dragging===this&&this.finishDrag();return}if(!(vn._dragging||i.shiftKey||i.which!==1&&i.button!==1&&!i.touches)&&(vn._dragging=this,this._preventOutline&&Ti(this._element),es(),Je(),!this._moving)){this.fire("down");var l=i.touches?i.touches[0]:i,d=sr(this._element);this._startPoint=new te(l.clientX,l.clientY),this._startPos=ir(this._element),this._parentScale=Ot(d);var m=i.type==="mousedown";ze(document,m?"mousemove":"touchmove",this._onMove,this),ze(document,m?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(i){if(this._enabled){if(i.touches&&i.touches.length>1){this._moved=!0;return}var l=i.touches&&i.touches.length===1?i.touches[0]:i,d=new te(l.clientX,l.clientY)._subtract(this._startPoint);!d.x&&!d.y||Math.abs(d.x)+Math.abs(d.y)<this.options.clickTolerance||(d.x/=this._parentScale.x,d.y/=this._parentScale.y,wt(i),this._moved||(this.fire("dragstart"),this._moved=!0,ve(document.body,"leaflet-dragging"),this._lastTarget=i.target||i.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ve(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(d),this._moving=!0,this._lastEvent=i,this._updatePosition())}},_updatePosition:function(){var i={originalEvent:this._lastEvent};this.fire("predrag",i),Ct(this._element,this._newPos),this.fire("drag",i)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(i){ft(document.body,"leaflet-dragging"),this._lastTarget&&(ft(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),pt(document,"mousemove touchmove",this._onMove,this),pt(document,"mouseup touchend touchcancel",this._onUp,this),ts(),gn();var l=this._moved&&this._moving;this._moving=!1,vn._dragging=!1,l&&this.fire("dragend",{noInertia:i,distance:this._newPos.distanceTo(this._startPos)})}});function Hs(i,l,d){var m,E=[1,4,2,8],P,j,G,X,oe,ye,je,Ye;for(P=0,ye=i.length;P<ye;P++)i[P]._code=J(i[P],l);for(G=0;G<4;G++){for(je=E[G],m=[],P=0,ye=i.length,j=ye-1;P<ye;j=P++)X=i[P],oe=i[j],X._code&je?oe._code&je||(Ye=$(oe,X,je,l,d),Ye._code=J(Ye,l),m.push(Ye)):(oe._code&je&&(Ye=$(oe,X,je,l,d),Ye._code=J(Ye,l),m.push(Ye)),m.push(X));i=m}return i}function Yo(i,l){var d,m,E,P,j,G,X,oe,ye;if(!i||i.length===0)throw new Error("latlngs not passed");lt(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var je=we([0,0]),Ye=Ne(i),Qt=Ye.getNorthWest().distanceTo(Ye.getSouthWest())*Ye.getNorthEast().distanceTo(Ye.getNorthWest());Qt<1700&&(je=Ws(i));var Bt=i.length,jn=[];for(d=0;d<Bt;d++){var wn=we(i[d]);jn.push(l.project(we([wn.lat-je.lat,wn.lng-je.lng])))}for(G=X=oe=0,d=0,m=Bt-1;d<Bt;m=d++)E=jn[d],P=jn[m],j=E.y*P.x-P.y*E.x,X+=(E.x+P.x)*j,oe+=(E.y+P.y)*j,G+=j*3;G===0?ye=jn[0]:ye=[X/G,oe/G];var ro=l.unproject(ie(ye));return we([ro.lat+je.lat,ro.lng+je.lng])}function Ws(i){for(var l=0,d=0,m=0,E=0;E<i.length;E++){var P=we(i[E]);l+=P.lat,d+=P.lng,m++}return we([l/m,d/m])}var qs={__proto__:null,clipPolygon:Hs,polygonCenter:Yo,centroid:Ws};function Ut(i,l){if(!l||!i.length)return i.slice();var d=l*l;return i=w(i,d),i=Si(i,d),i}function Jo(i,l,d){return Math.sqrt(He(i,l,d,!0))}function za(i,l,d){return He(i,l,d)}function Si(i,l){var d=i.length,m=typeof Uint8Array<"u"?Uint8Array:Array,E=new m(d);E[0]=E[d-1]=1,h(i,E,l,0,d-1);var P,j=[];for(P=0;P<d;P++)E[P]&&j.push(i[P]);return j}function h(i,l,d,m,E){var P=0,j,G,X;for(G=m+1;G<=E-1;G++)X=He(i[G],i[m],i[E],!0),X>P&&(j=G,P=X);P>d&&(l[j]=1,h(i,l,d,m,j),h(i,l,d,j,E))}function w(i,l){for(var d=[i[0]],m=1,E=0,P=i.length;m<P;m++)me(i[m],i[E])>l&&(d.push(i[m]),E=m);return E<P-1&&d.push(i[P-1]),d}var T;function A(i,l,d,m,E){var P=m?T:J(i,d),j=J(l,d),G,X,oe;for(T=j;;){if(!(P|j))return[i,l];if(P&j)return!1;G=P||j,X=$(i,l,G,d,E),oe=J(X,d),G===P?(i=X,P=oe):(l=X,j=oe)}}function $(i,l,d,m,E){var P=l.x-i.x,j=l.y-i.y,G=m.min,X=m.max,oe,ye;return d&8?(oe=i.x+P*(X.y-i.y)/j,ye=X.y):d&4?(oe=i.x+P*(G.y-i.y)/j,ye=G.y):d&2?(oe=X.x,ye=i.y+j*(X.x-i.x)/P):d&1&&(oe=G.x,ye=i.y+j*(G.x-i.x)/P),new te(oe,ye,E)}function J(i,l){var d=0;return i.x<l.min.x?d|=1:i.x>l.max.x&&(d|=2),i.y<l.min.y?d|=4:i.y>l.max.y&&(d|=8),d}function me(i,l){var d=l.x-i.x,m=l.y-i.y;return d*d+m*m}function He(i,l,d,m){var E=l.x,P=l.y,j=d.x-E,G=d.y-P,X=j*j+G*G,oe;return X>0&&(oe=((i.x-E)*j+(i.y-P)*G)/X,oe>1?(E=d.x,P=d.y):oe>0&&(E+=j*oe,P+=G*oe)),j=i.x-E,G=i.y-P,m?j*j+G*G:new te(E,P)}function lt(i){return!Ee(i[0])||typeof i[0][0]!="object"&&typeof i[0][0]<"u"}function ht(i){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),lt(i)}function bt(i,l){var d,m,E,P,j,G,X,oe;if(!i||i.length===0)throw new Error("latlngs not passed");lt(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var ye=we([0,0]),je=Ne(i),Ye=je.getNorthWest().distanceTo(je.getSouthWest())*je.getNorthEast().distanceTo(je.getNorthWest());Ye<1700&&(ye=Ws(i));var Qt=i.length,Bt=[];for(d=0;d<Qt;d++){var jn=we(i[d]);Bt.push(l.project(we([jn.lat-ye.lat,jn.lng-ye.lng])))}for(d=0,m=0;d<Qt-1;d++)m+=Bt[d].distanceTo(Bt[d+1])/2;if(m===0)oe=Bt[0];else for(d=0,P=0;d<Qt-1;d++)if(j=Bt[d],G=Bt[d+1],E=j.distanceTo(G),P+=E,P>m){X=(P-m)/E,oe=[G.x-X*(G.x-j.x),G.y-X*(G.y-j.y)];break}var wn=l.unproject(ie(oe));return we([wn.lat+ye.lat,wn.lng+ye.lng])}var On={__proto__:null,simplify:Ut,pointToSegmentDistance:Jo,closestPointOnSegment:za,clipSegment:A,_getEdgeIntersection:$,_getBitCode:J,_sqClosestPointOnSegment:He,isFlat:lt,_flat:ht,polylineCenter:bt},or={project:function(i){return new te(i.lng,i.lat)},unproject:function(i){return new Ae(i.y,i.x)},bounds:new B([-180,-90],[180,90])},Kn={R:6378137,R_MINOR:6356752314245179e-9,bounds:new B([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(i){var l=Math.PI/180,d=this.R,m=i.lat*l,E=this.R_MINOR/d,P=Math.sqrt(1-E*E),j=P*Math.sin(m),G=Math.tan(Math.PI/4-m/2)/Math.pow((1-j)/(1+j),P/2);return m=-d*Math.log(Math.max(G,1e-10)),new te(i.lng*l*d,m)},unproject:function(i){for(var l=180/Math.PI,d=this.R,m=this.R_MINOR/d,E=Math.sqrt(1-m*m),P=Math.exp(-i.y/d),j=Math.PI/2-2*Math.atan(P),G=0,X=.1,oe;G<15&&Math.abs(X)>1e-7;G++)oe=E*Math.sin(j),oe=Math.pow((1-oe)/(1+oe),E/2),X=Math.PI/2-2*Math.atan(P*oe)-j,j+=X;return new Ae(j*l,i.x*l/d)}},Nr={__proto__:null,LonLat:or,Mercator:Kn,SphericalMercator:Kt},$s=a({},Qe,{code:"EPSG:3395",projection:Kn,transformation:(function(){var i=.5/(Math.PI*Kn.R);return Wr(i,.5,-i,.5)})()}),Gs=a({},Qe,{code:"EPSG:4326",projection:or,transformation:Wr(1/180,1,-1/180,.5)}),nd=a({},et,{projection:or,transformation:Wr(1,0,-1,0),scale:function(i){return Math.pow(2,i)},zoom:function(i){return Math.log(i)/Math.LN2},distance:function(i,l){var d=l.lng-i.lng,m=l.lat-i.lat;return Math.sqrt(d*d+m*m)},infinite:!0});et.Earth=Qe,et.EPSG3395=$s,et.EPSG3857=mr,et.EPSG900913=Rs,et.EPSG4326=Gs,et.Simple=nd;var ar=Fe.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(i){return i.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(i){return i&&i.removeLayer(this),this},getPane:function(i){return this._map.getPane(i?this.options[i]||i:this.options.pane)},addInteractiveTarget:function(i){return this._map._targets[x(i)]=this,this},removeInteractiveTarget:function(i){return delete this._map._targets[x(i)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(i){var l=i.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var d=this.getEvents();l.on(d,this),this.once("remove",function(){l.off(d,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});Xe.include({addLayer:function(i){if(!i._layerAdd)throw new Error("The provided object is not a Layer.");var l=x(i);return this._layers[l]?this:(this._layers[l]=i,i._mapToAdd=this,i.beforeAdd&&i.beforeAdd(this),this.whenReady(i._layerAdd,i),this)},removeLayer:function(i){var l=x(i);return this._layers[l]?(this._loaded&&i.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:i}),i.fire("remove")),i._map=i._mapToAdd=null,this):this},hasLayer:function(i){return x(i)in this._layers},eachLayer:function(i,l){for(var d in this._layers)i.call(l,this._layers[d]);return this},_addLayers:function(i){i=i?Ee(i)?i:[i]:[];for(var l=0,d=i.length;l<d;l++)this.addLayer(i[l])},_addZoomLimit:function(i){(!isNaN(i.options.maxZoom)||!isNaN(i.options.minZoom))&&(this._zoomBoundLayers[x(i)]=i,this._updateZoomLevels())},_removeZoomLimit:function(i){var l=x(i);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var i=1/0,l=-1/0,d=this._getZoomSpan();for(var m in this._zoomBoundLayers){var E=this._zoomBoundLayers[m].options;i=E.minZoom===void 0?i:Math.min(i,E.minZoom),l=E.maxZoom===void 0?l:Math.max(l,E.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=i===1/0?void 0:i,d!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Pi=ar.extend({initialize:function(i,l){Q(this,l),this._layers={};var d,m;if(i)for(d=0,m=i.length;d<m;d++)this.addLayer(i[d])},addLayer:function(i){var l=this.getLayerId(i);return this._layers[l]=i,this._map&&this._map.addLayer(i),this},removeLayer:function(i){var l=i in this._layers?i:this.getLayerId(i);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(i){var l=typeof i=="number"?i:this.getLayerId(i);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(i){var l=Array.prototype.slice.call(arguments,1),d,m;for(d in this._layers)m=this._layers[d],m[i]&&m[i].apply(m,l);return this},onAdd:function(i){this.eachLayer(i.addLayer,i)},onRemove:function(i){this.eachLayer(i.removeLayer,i)},eachLayer:function(i,l){for(var d in this._layers)i.call(l,this._layers[d]);return this},getLayer:function(i){return this._layers[i]},getLayers:function(){var i=[];return this.eachLayer(i.push,i),i},setZIndex:function(i){return this.invoke("setZIndex",i)},getLayerId:function(i){return x(i)}}),Xo=function(i,l){return new Pi(i,l)},Yr=Pi.extend({addLayer:function(i){return this.hasLayer(i)?this:(i.addEventParent(this),Pi.prototype.addLayer.call(this,i),this.fire("layeradd",{layer:i}))},removeLayer:function(i){return this.hasLayer(i)?(i in this._layers&&(i=this._layers[i]),i.removeEventParent(this),Pi.prototype.removeLayer.call(this,i),this.fire("layerremove",{layer:i})):this},setStyle:function(i){return this.invoke("setStyle",i)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var i=new Me;for(var l in this._layers){var d=this._layers[l];i.extend(d.getBounds?d.getBounds():d.getLatLng())}return i}}),Yu=function(i,l){return new Yr(i,l)},ls=ae.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(i){Q(this,i)},createIcon:function(i){return this._createIcon("icon",i)},createShadow:function(i){return this._createIcon("shadow",i)},_createIcon:function(i,l){var d=this._getIconUrl(i);if(!d){if(i==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var m=this._createImg(d,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(m,i),(this.options.crossOrigin||this.options.crossOrigin==="")&&(m.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),m},_setIconStyles:function(i,l){var d=this.options,m=d[l+"Size"];typeof m=="number"&&(m=[m,m]);var E=ie(m),P=ie(l==="shadow"&&d.shadowAnchor||d.iconAnchor||E&&E.divideBy(2,!0));i.className="leaflet-marker-"+l+" "+(d.className||""),P&&(i.style.marginLeft=-P.x+"px",i.style.marginTop=-P.y+"px"),E&&(i.style.width=E.x+"px",i.style.height=E.y+"px")},_createImg:function(i,l){return l=l||document.createElement("img"),l.src=i,l},_getIconUrl:function(i){return Ie.retina&&this.options[i+"RetinaUrl"]||this.options[i+"Url"]}});function Ju(i){return new ls(i)}var Ks=ls.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(i){return typeof Ks.imagePath!="string"&&(Ks.imagePath=this._detectIconPath()),(this.options.imagePath||Ks.imagePath)+ls.prototype._getIconUrl.call(this,i)},_stripUrl:function(i){var l=function(d,m,E){var P=m.exec(d);return P&&P[E]};return i=l(i,/^url\((['"])?(.+)\1\)$/,2),i&&l(i,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var i=Ge("div","leaflet-default-icon-path",document.body),l=wi(i,"background-image")||wi(i,"backgroundImage");if(document.body.removeChild(i),l=this._stripUrl(l),l)return l;var d=document.querySelector('link[href$="leaflet.css"]');return d?d.href.substring(0,d.href.length-11-1):""}}),Ul=un.extend({initialize:function(i){this._marker=i},addHooks:function(){var i=this._marker._icon;this._draggable||(this._draggable=new vn(i,i,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ve(i,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ft(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(i){var l=this._marker,d=l._map,m=this._marker.options.autoPanSpeed,E=this._marker.options.autoPanPadding,P=ir(l._icon),j=d.getPixelBounds(),G=d.getPixelOrigin(),X=ne(j.min._subtract(G).add(E),j.max._subtract(G).subtract(E));if(!X.contains(P)){var oe=ie((Math.max(X.max.x,P.x)-X.max.x)/(j.max.x-X.max.x)-(Math.min(X.min.x,P.x)-X.min.x)/(j.min.x-X.min.x),(Math.max(X.max.y,P.y)-X.max.y)/(j.max.y-X.max.y)-(Math.min(X.min.y,P.y)-X.min.y)/(j.min.y-X.min.y)).multiplyBy(m);d.panBy(oe,{animate:!1}),this._draggable._newPos._add(oe),this._draggable._startPos._add(oe),Ct(l._icon,this._draggable._newPos),this._onDrag(i),this._panRequest=D(this._adjustPan.bind(this,i))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(i){this._marker.options.autoPan&&(V(this._panRequest),this._panRequest=D(this._adjustPan.bind(this,i)))},_onDrag:function(i){var l=this._marker,d=l._shadow,m=ir(l._icon),E=l._map.layerPointToLatLng(m);d&&Ct(d,m),l._latlng=E,i.latlng=E,i.oldLatLng=this._oldLatLng,l.fire("move",i).fire("drag",i)},_onDragEnd:function(i){V(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",i)}}),Jr=ar.extend({options:{icon:new Ks,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(i,l){Q(this,l),this._latlng=we(i)},onAdd:function(i){this._zoomAnimated=this._zoomAnimated&&i.options.markerZoomAnimation,this._zoomAnimated&&i.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(i){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&i.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(i){var l=this._latlng;return this._latlng=we(i),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(i){return this.options.zIndexOffset=i,this.update()},getIcon:function(){return this.options.icon},setIcon:function(i){return this.options.icon=i,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var i=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(i)}return this},_initIcon:function(){var i=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),d=i.icon.createIcon(this._icon),m=!1;d!==this._icon&&(this._icon&&this._removeIcon(),m=!0,i.title&&(d.title=i.title),d.tagName==="IMG"&&(d.alt=i.alt||"")),ve(d,l),i.keyboard&&(d.tabIndex="0",d.setAttribute("role","button")),this._icon=d,i.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ze(d,"focus",this._panOnFocus,this);var E=i.icon.createShadow(this._shadow),P=!1;E!==this._shadow&&(this._removeShadow(),P=!0),E&&(ve(E,l),E.alt=""),this._shadow=E,i.opacity<1&&this._updateOpacity(),m&&this.getPane().appendChild(this._icon),this._initInteraction(),E&&P&&this.getPane(i.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&pt(this._icon,"focus",this._panOnFocus,this),at(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&at(this._shadow),this._shadow=null},_setPos:function(i){this._icon&&Ct(this._icon,i),this._shadow&&Ct(this._shadow,i),this._zIndex=i.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(i){this._icon&&(this._icon.style.zIndex=this._zIndex+i)},_animateZoom:function(i){var l=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(ve(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ul)){var i=this.options.draggable;this.dragging&&(i=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ul(this),i&&this.dragging.enable()}},setOpacity:function(i){return this.options.opacity=i,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var i=this.options.opacity;this._icon&&en(this._icon,i),this._shadow&&en(this._shadow,i)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var i=this._map;if(i){var l=this.options.icon.options,d=l.iconSize?ie(l.iconSize):ie(0,0),m=l.iconAnchor?ie(l.iconAnchor):ie(0,0);i.panInside(this._latlng,{paddingTopLeft:m,paddingBottomRight:d.subtract(m)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function rd(i,l){return new Jr(i,l)}var Ci=ar.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(i){this._renderer=i.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(i){return Q(this,i),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&i&&Object.prototype.hasOwnProperty.call(i,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Ua=Ci.extend({options:{fill:!0,radius:10},initialize:function(i,l){Q(this,l),this._latlng=we(i),this._radius=this.options.radius},setLatLng:function(i){var l=this._latlng;return this._latlng=we(i),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(i){return this.options.radius=this._radius=i,this.redraw()},getRadius:function(){return this._radius},setStyle:function(i){var l=i&&i.radius||this._radius;return Ci.prototype.setStyle.call(this,i),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var i=this._radius,l=this._radiusY||i,d=this._clickTolerance(),m=[i+d,l+d];this._pxBounds=new B(this._point.subtract(m),this._point.add(m))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(i){return i.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Xu(i,l){return new Ua(i,l)}var Ba=Ua.extend({initialize:function(i,l,d){if(typeof l=="number"&&(l=a({},d,{radius:l})),Q(this,l),this._latlng=we(i),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(i){return this._mRadius=i,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var i=[this._radius,this._radiusY||this._radius];return new Me(this._map.layerPointToLatLng(this._point.subtract(i)),this._map.layerPointToLatLng(this._point.add(i)))},setStyle:Ci.prototype.setStyle,_project:function(){var i=this._latlng.lng,l=this._latlng.lat,d=this._map,m=d.options.crs;if(m.distance===Qe.distance){var E=Math.PI/180,P=this._mRadius/Qe.R/E,j=d.project([l+P,i]),G=d.project([l-P,i]),X=j.add(G).divideBy(2),oe=d.unproject(X).lat,ye=Math.acos((Math.cos(P*E)-Math.sin(l*E)*Math.sin(oe*E))/(Math.cos(l*E)*Math.cos(oe*E)))/E;(isNaN(ye)||ye===0)&&(ye=P/Math.cos(Math.PI/180*l)),this._point=X.subtract(d.getPixelOrigin()),this._radius=isNaN(ye)?0:X.x-d.project([oe,i-ye]).x,this._radiusY=X.y-j.y}else{var je=m.unproject(m.project(this._latlng).subtract([this._mRadius,0]));this._point=d.latLngToLayerPoint(this._latlng),this._radius=this._point.x-d.latLngToLayerPoint(je).x}this._updateBounds()}});function ea(i,l,d){return new Ba(i,l,d)}var Vn=Ci.extend({options:{smoothFactor:1,noClip:!1},initialize:function(i,l){Q(this,l),this._setLatLngs(i)},getLatLngs:function(){return this._latlngs},setLatLngs:function(i){return this._setLatLngs(i),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(i){for(var l=1/0,d=null,m=He,E,P,j=0,G=this._parts.length;j<G;j++)for(var X=this._parts[j],oe=1,ye=X.length;oe<ye;oe++){E=X[oe-1],P=X[oe];var je=m(i,E,P,!0);je<l&&(l=je,d=m(i,E,P))}return d&&(d.distance=Math.sqrt(l)),d},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return bt(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(i,l){return l=l||this._defaultShape(),i=we(i),l.push(i),this._bounds.extend(i),this.redraw()},_setLatLngs:function(i){this._bounds=new Me,this._latlngs=this._convertLatLngs(i)},_defaultShape:function(){return lt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(i){for(var l=[],d=lt(i),m=0,E=i.length;m<E;m++)d?(l[m]=we(i[m]),this._bounds.extend(l[m])):l[m]=this._convertLatLngs(i[m]);return l},_project:function(){var i=new B;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,i),this._bounds.isValid()&&i.isValid()&&(this._rawPxBounds=i,this._updateBounds())},_updateBounds:function(){var i=this._clickTolerance(),l=new te(i,i);this._rawPxBounds&&(this._pxBounds=new B([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(i,l,d){var m=i[0]instanceof Ae,E=i.length,P,j;if(m){for(j=[],P=0;P<E;P++)j[P]=this._map.latLngToLayerPoint(i[P]),d.extend(j[P]);l.push(j)}else for(P=0;P<E;P++)this._projectLatlngs(i[P],l,d)},_clipPoints:function(){var i=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,d,m,E,P,j,G,X;for(d=0,E=0,P=this._rings.length;d<P;d++)for(X=this._rings[d],m=0,j=X.length;m<j-1;m++)G=A(X[m],X[m+1],i,m,!0),G&&(l[E]=l[E]||[],l[E].push(G[0]),(G[1]!==X[m+1]||m===j-2)&&(l[E].push(G[1]),E++))}},_simplifyPoints:function(){for(var i=this._parts,l=this.options.smoothFactor,d=0,m=i.length;d<m;d++)i[d]=Ut(i[d],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(i,l){var d,m,E,P,j,G,X=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(d=0,P=this._parts.length;d<P;d++)for(G=this._parts[d],m=0,j=G.length,E=j-1;m<j;E=m++)if(!(!l&&m===0)&&Jo(i,G[E],G[m])<=X)return!0;return!1}});function id(i,l){return new Vn(i,l)}Vn._flat=ht;var Xr=Vn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Yo(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(i){var l=Vn.prototype._convertLatLngs.call(this,i),d=l.length;return d>=2&&l[0]instanceof Ae&&l[0].equals(l[d-1])&&l.pop(),l},_setLatLngs:function(i){Vn.prototype._setLatLngs.call(this,i),lt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return lt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var i=this._renderer._bounds,l=this.options.weight,d=new te(l,l);if(i=new B(i.min.subtract(d),i.max.add(d)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}for(var m=0,E=this._rings.length,P;m<E;m++)P=Hs(this._rings[m],i,!0),P.length&&this._parts.push(P)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(i){var l=!1,d,m,E,P,j,G,X,oe;if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(P=0,X=this._parts.length;P<X;P++)for(d=this._parts[P],j=0,oe=d.length,G=oe-1;j<oe;G=j++)m=d[j],E=d[G],m.y>i.y!=E.y>i.y&&i.x<(E.x-m.x)*(i.y-m.y)/(E.y-m.y)+m.x&&(l=!l);return l||Vn.prototype._containsPoint.call(this,i,!0)}});function sd(i,l){return new Xr(i,l)}var Rr=Yr.extend({initialize:function(i,l){Q(this,l),this._layers={},i&&this.addData(i)},addData:function(i){var l=Ee(i)?i:i.features,d,m,E;if(l){for(d=0,m=l.length;d<m;d++)E=l[d],(E.geometries||E.geometry||E.features||E.coordinates)&&this.addData(E);return this}var P=this.options;if(P.filter&&!P.filter(i))return this;var j=Zs(i,P);return j?(j.feature=Ga(i),j.defaultOptions=j.options,this.resetStyle(j),P.onEachFeature&&P.onEachFeature(i,j),this.addLayer(j)):this},resetStyle:function(i){return i===void 0?this.eachLayer(this.resetStyle,this):(i.options=a({},i.defaultOptions),this._setLayerStyle(i,this.options.style),this)},setStyle:function(i){return this.eachLayer(function(l){this._setLayerStyle(l,i)},this)},_setLayerStyle:function(i,l){i.setStyle&&(typeof l=="function"&&(l=l(i.feature)),i.setStyle(l))}});function Zs(i,l){var d=i.type==="Feature"?i.geometry:i,m=d?d.coordinates:null,E=[],P=l&&l.pointToLayer,j=l&&l.coordsToLatLng||Wa,G,X,oe,ye;if(!m&&!d)return null;switch(d.type){case"Point":return G=j(m),Ha(P,i,G,l);case"MultiPoint":for(oe=0,ye=m.length;oe<ye;oe++)G=j(m[oe]),E.push(Ha(P,i,G,l));return new Yr(E);case"LineString":case"MultiLineString":return X=ta(m,d.type==="LineString"?0:1,j),new Vn(X,l);case"Polygon":case"MultiPolygon":return X=ta(m,d.type==="Polygon"?1:2,j),new Xr(X,l);case"GeometryCollection":for(oe=0,ye=d.geometries.length;oe<ye;oe++){var je=Zs({geometry:d.geometries[oe],type:"Feature",properties:i.properties},l);je&&E.push(je)}return new Yr(E);case"FeatureCollection":for(oe=0,ye=d.features.length;oe<ye;oe++){var Ye=Zs(d.features[oe],l);Ye&&E.push(Ye)}return new Yr(E);default:throw new Error("Invalid GeoJSON object.")}}function Ha(i,l,d,m){return i?i(l,d):new Jr(d,m&&m.markersInheritOptions&&m)}function Wa(i){return new Ae(i[1],i[0],i[2])}function ta(i,l,d){for(var m=[],E=0,P=i.length,j;E<P;E++)j=l?ta(i[E],l-1,d):(d||Wa)(i[E]),m.push(j);return m}function qa(i,l){return i=we(i),i.alt!==void 0?[b(i.lng,l),b(i.lat,l),b(i.alt,l)]:[b(i.lng,l),b(i.lat,l)]}function $a(i,l,d,m){for(var E=[],P=0,j=i.length;P<j;P++)E.push(l?$a(i[P],lt(i[P])?0:l-1,d,m):qa(i[P],m));return!l&&d&&E.length>0&&E.push(E[0].slice()),E}function Qs(i,l){return i.feature?a({},i.feature,{geometry:l}):Ga(l)}function Ga(i){return i.type==="Feature"||i.type==="FeatureCollection"?i:{type:"Feature",properties:{},geometry:i}}var Bl={toGeoJSON:function(i){return Qs(this,{type:"Point",coordinates:qa(this.getLatLng(),i)})}};Jr.include(Bl),Ba.include(Bl),Ua.include(Bl),Vn.include({toGeoJSON:function(i){var l=!lt(this._latlngs),d=$a(this._latlngs,l?1:0,!1,i);return Qs(this,{type:(l?"Multi":"")+"LineString",coordinates:d})}}),Xr.include({toGeoJSON:function(i){var l=!lt(this._latlngs),d=l&&!lt(this._latlngs[0]),m=$a(this._latlngs,d?2:l?1:0,!0,i);return l||(m=[m]),Qs(this,{type:(d?"Multi":"")+"Polygon",coordinates:m})}}),Pi.include({toMultiPoint:function(i){var l=[];return this.eachLayer(function(d){l.push(d.toGeoJSON(i).geometry.coordinates)}),Qs(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(i){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(i);var d=l==="GeometryCollection",m=[];return this.eachLayer(function(E){if(E.toGeoJSON){var P=E.toGeoJSON(i);if(d)m.push(P.geometry);else{var j=Ga(P);j.type==="FeatureCollection"?m.push.apply(m,j.features):m.push(j)}}}),d?Qs(this,{geometries:m,type:"GeometryCollection"}):{type:"FeatureCollection",features:m}}});function ec(i,l){return new Rr(i,l)}var lr=ec,ki=ar.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(i,l,d){this._url=i,this._bounds=Ne(l),Q(this,d)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ve(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){at(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(i){return this.options.opacity=i,this._image&&this._updateOpacity(),this},setStyle:function(i){return i.opacity&&this.setOpacity(i.opacity),this},bringToFront:function(){return this._map&&qn(this._image),this},bringToBack:function(){return this._map&&ln(this._image),this},setUrl:function(i){return this._url=i,this._image&&(this._image.src=i),this},setBounds:function(i){return this._bounds=Ne(i),this._map&&this._reset(),this},getEvents:function(){var i={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var i=this._url.tagName==="IMG",l=this._image=i?this._url:Ge("img");if(ve(l,"leaflet-image-layer"),this._zoomAnimated&&ve(l,"leaflet-zoom-animated"),this.options.className&&ve(l,this.options.className),l.onselectstart=k,l.onmousemove=k,l.onload=p(this.fire,this,"load"),l.onerror=p(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),i){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(i){var l=this._map.getZoomScale(i.zoom),d=this._map._latLngBoundsToNewLayerBounds(this._bounds,i.zoom,i.center).min;Nn(this._image,d,l)},_reset:function(){var i=this._image,l=new B(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),d=l.getSize();Ct(i,l.min),i.style.width=d.x+"px",i.style.height=d.y+"px"},_updateOpacity:function(){en(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var i=this.options.errorOverlayUrl;i&&this._url!==i&&(this._url=i,this._image.src=i)},getCenter:function(){return this._bounds.getCenter()}}),tc=function(i,l,d){return new ki(i,l,d)},Hl=ki.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var i=this._url.tagName==="VIDEO",l=this._image=i?this._url:Ge("video");if(ve(l,"leaflet-image-layer"),this._zoomAnimated&&ve(l,"leaflet-zoom-animated"),this.options.className&&ve(l,this.options.className),l.onselectstart=k,l.onmousemove=k,l.onloadeddata=p(this.fire,this,"load"),i){for(var d=l.getElementsByTagName("source"),m=[],E=0;E<d.length;E++)m.push(d[E].src);this._url=d.length>0?m:[l.src];return}Ee(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var P=0;P<this._url.length;P++){var j=Ge("source");j.src=this._url[P],l.appendChild(j)}}});function nc(i,l,d){return new Hl(i,l,d)}var Wl=ki.extend({_initImage:function(){var i=this._image=this._url;ve(i,"leaflet-image-layer"),this._zoomAnimated&&ve(i,"leaflet-zoom-animated"),this.options.className&&ve(i,this.options.className),i.onselectstart=k,i.onmousemove=k}});function ql(i,l,d){return new Wl(i,l,d)}var Lr=ar.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(i,l){i&&(i instanceof Ae||Ee(i))?(this._latlng=we(i),Q(this,l)):(Q(this,i),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(i){return i=arguments.length?i:this._source._map,i.hasLayer(this)||i.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(i){return this._map?this.close():(arguments.length?this._source=i:i=this._source,this._prepareOpen(),this.openOn(i._map)),this},onAdd:function(i){this._zoomAnimated=i._zoomAnimated,this._container||this._initLayout(),i._fadeAnimated&&en(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),i._fadeAnimated&&en(this._container,1),this.bringToFront(),this.options.interactive&&(ve(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(i){i._fadeAnimated?(en(this._container,0),this._removeTimeout=setTimeout(p(at,void 0,this._container),200)):at(this._container),this.options.interactive&&(ft(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(i){return this._latlng=we(i),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(i){return this._content=i,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var i={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&qn(this._container),this},bringToBack:function(){return this._map&&ln(this._container),this},_prepareOpen:function(i){var l=this._source;if(!l._map)return!1;if(l instanceof Yr){l=null;var d=this._source._layers;for(var m in d)if(d[m]._map){l=d[m];break}if(!l)return!1;this._source=l}if(!i)if(l.getCenter)i=l.getCenter();else if(l.getLatLng)i=l.getLatLng();else if(l.getBounds)i=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(i),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var i=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")i.innerHTML=l;else{for(;i.hasChildNodes();)i.removeChild(i.firstChild);i.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var i=this._map.latLngToLayerPoint(this._latlng),l=ie(this.options.offset),d=this._getAnchor();this._zoomAnimated?Ct(this._container,i.add(d)):l=l.add(i).add(d);var m=this._containerBottom=-l.y,E=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=m+"px",this._container.style.left=E+"px"}},_getAnchor:function(){return[0,0]}});Xe.include({_initOverlay:function(i,l,d,m){var E=l;return E instanceof i||(E=new i(m).setContent(l)),d&&E.setLatLng(d),E}}),ar.include({_initOverlay:function(i,l,d,m){var E=d;return E instanceof i?(Q(E,m),E._source=this):(E=l&&!m?l:new i(m,this),E.setContent(d)),E}});var Ka=Lr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(i){return i=arguments.length?i:this._source._map,!i.hasLayer(this)&&i._popup&&i._popup.options.autoClose&&i.removeLayer(i._popup),i._popup=this,Lr.prototype.openOn.call(this,i)},onAdd:function(i){Lr.prototype.onAdd.call(this,i),i.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Ci||this._source.on("preclick",ot))},onRemove:function(i){Lr.prototype.onRemove.call(this,i),i.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Ci||this._source.off("preclick",ot))},getEvents:function(){var i=Lr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(i.preclick=this.close),this.options.keepInView&&(i.moveend=this._adjustPan),i},_initLayout:function(){var i="leaflet-popup",l=this._container=Ge("div",i+" "+(this.options.className||"")+" leaflet-zoom-animated"),d=this._wrapper=Ge("div",i+"-content-wrapper",l);if(this._contentNode=Ge("div",i+"-content",d),rs(l),zs(this._contentNode),ze(l,"contextmenu",ot),this._tipContainer=Ge("div",i+"-tip-container",l),this._tip=Ge("div",i+"-tip",this._tipContainer),this.options.closeButton){var m=this._closeButton=Ge("a",i+"-close-button",l);m.setAttribute("role","button"),m.setAttribute("aria-label","Close popup"),m.href="#close",m.innerHTML='<span aria-hidden="true">&#215;</span>',ze(m,"click",function(E){wt(E),this.close()},this)}},_updateLayout:function(){var i=this._contentNode,l=i.style;l.width="",l.whiteSpace="nowrap";var d=i.offsetWidth;d=Math.min(d,this.options.maxWidth),d=Math.max(d,this.options.minWidth),l.width=d+1+"px",l.whiteSpace="",l.height="";var m=i.offsetHeight,E=this.options.maxHeight,P="leaflet-popup-scrolled";E&&m>E?(l.height=E+"px",ve(i,P)):ft(i,P),this._containerWidth=this._container.offsetWidth},_animateZoom:function(i){var l=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center),d=this._getAnchor();Ct(this._container,l.add(d))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var i=this._map,l=parseInt(wi(this._container,"marginBottom"),10)||0,d=this._container.offsetHeight+l,m=this._containerWidth,E=new te(this._containerLeft,-d-this._containerBottom);E._add(ir(this._container));var P=i.layerPointToContainerPoint(E),j=ie(this.options.autoPanPadding),G=ie(this.options.autoPanPaddingTopLeft||j),X=ie(this.options.autoPanPaddingBottomRight||j),oe=i.getSize(),ye=0,je=0;P.x+m+X.x>oe.x&&(ye=P.x+m-oe.x+X.x),P.x-ye-G.x<0&&(ye=P.x-G.x),P.y+d+X.y>oe.y&&(je=P.y+d-oe.y+X.y),P.y-je-G.y<0&&(je=P.y-G.y),(ye||je)&&(this.options.keepInView&&(this._autopanning=!0),i.fire("autopanstart").panBy([ye,je]))}},_getAnchor:function(){return ie(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Ys=function(i,l){return new Ka(i,l)};Xe.mergeOptions({closePopupOnClick:!0}),Xe.include({openPopup:function(i,l,d){return this._initOverlay(Ka,i,l,d).openOn(this),this},closePopup:function(i){return i=arguments.length?i:this._popup,i&&i.close(),this}}),ar.include({bindPopup:function(i,l){return this._popup=this._initOverlay(Ka,this._popup,i,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(i){return this._popup&&(this instanceof Yr||(this._popup._source=this),this._popup._prepareOpen(i||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(i){return this._popup&&this._popup.setContent(i),this},getPopup:function(){return this._popup},_openPopup:function(i){if(!(!this._popup||!this._map)){_n(i);var l=i.layer||i.target;if(this._popup._source===l&&!(l instanceof Ci)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(i.latlng);return}this._popup._source=l,this.openPopup(i.latlng)}},_movePopup:function(i){this._popup.setLatLng(i.latlng)},_onKeyPress:function(i){i.originalEvent.keyCode===13&&this._openPopup(i)}});var Js=Lr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(i){Lr.prototype.onAdd.call(this,i),this.setOpacity(this.options.opacity),i.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(i){Lr.prototype.onRemove.call(this,i),i.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var i=Lr.prototype.getEvents.call(this);return this.options.permanent||(i.preclick=this.close),i},_initLayout:function(){var i="leaflet-tooltip",l=i+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ge("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+x(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(i){var l,d,m=this._map,E=this._container,P=m.latLngToContainerPoint(m.getCenter()),j=m.layerPointToContainerPoint(i),G=this.options.direction,X=E.offsetWidth,oe=E.offsetHeight,ye=ie(this.options.offset),je=this._getAnchor();G==="top"?(l=X/2,d=oe):G==="bottom"?(l=X/2,d=0):G==="center"?(l=X/2,d=oe/2):G==="right"?(l=0,d=oe/2):G==="left"?(l=X,d=oe/2):j.x<P.x?(G="right",l=0,d=oe/2):(G="left",l=X+(ye.x+je.x)*2,d=oe/2),i=i.subtract(ie(l,d,!0)).add(ye).add(je),ft(E,"leaflet-tooltip-right"),ft(E,"leaflet-tooltip-left"),ft(E,"leaflet-tooltip-top"),ft(E,"leaflet-tooltip-bottom"),ve(E,"leaflet-tooltip-"+G),Ct(E,i)},_updatePosition:function(){var i=this._map.latLngToLayerPoint(this._latlng);this._setPosition(i)},setOpacity:function(i){this.options.opacity=i,this._container&&en(this._container,i)},_animateZoom:function(i){var l=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center);this._setPosition(l)},_getAnchor:function(){return ie(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),na=function(i,l){return new Js(i,l)};Xe.include({openTooltip:function(i,l,d){return this._initOverlay(Js,i,l,d).openOn(this),this},closeTooltip:function(i){return i.close(),this}}),ar.include({bindTooltip:function(i,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Js,this._tooltip,i,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(i){if(!(!i&&this._tooltipHandlersAdded)){var l=i?"off":"on",d={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?d.add=this._openTooltip:(d.mouseover=this._openTooltip,d.mouseout=this.closeTooltip,d.click=this._openTooltip,this._map?this._addFocusListeners():d.add=this._addFocusListeners),this._tooltip.options.sticky&&(d.mousemove=this._moveTooltip),this[l](d),this._tooltipHandlersAdded=!i}},openTooltip:function(i){return this._tooltip&&(this instanceof Yr||(this._tooltip._source=this),this._tooltip._prepareOpen(i)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(i){return this._tooltip&&this._tooltip.setContent(i),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(i){var l=typeof i.getElement=="function"&&i.getElement();l&&(ze(l,"focus",function(){this._tooltip._source=i,this.openTooltip()},this),ze(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(i){var l=typeof i.getElement=="function"&&i.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(i){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(i)});return}this._tooltip._source=i.layer||i.target,this.openTooltip(this._tooltip.options.sticky?i.latlng:void 0)}},_moveTooltip:function(i){var l=i.latlng,d,m;this._tooltip.options.sticky&&i.originalEvent&&(d=this._map.mouseEventToContainerPoint(i.originalEvent),m=this._map.containerPointToLayerPoint(d),l=this._map.layerPointToLatLng(m)),this._tooltip.setLatLng(l)}});var Za=ls.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(i){var l=i&&i.tagName==="DIV"?i:document.createElement("div"),d=this.options;if(d.html instanceof Element?(an(l),l.appendChild(d.html)):l.innerHTML=d.html!==!1?d.html:"",d.bgPos){var m=ie(d.bgPos);l.style.backgroundPosition=-m.x+"px "+-m.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function rc(i){return new Za(i)}ls.Default=Ks;var Ai=ar.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ie.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(i){Q(this,i)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(i){i._addZoomLimit(this)},onRemove:function(i){this._removeAllTiles(),at(this._container),i._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(qn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ln(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(i){return this.options.opacity=i,this._updateOpacity(),this},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var i=this._clampZoom(this._map.getZoom());i!==this._tileZoom&&(this._tileZoom=i,this._updateLevels()),this._update()}return this},getEvents:function(){var i={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=I(this._onMoveEnd,this.options.updateInterval,this)),i.move=this._onMove),this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},createTile:function(){return document.createElement("div")},getTileSize:function(){var i=this.options.tileSize;return i instanceof te?i:new te(i,i)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(i){for(var l=this.getPane().children,d=-i(-1/0,1/0),m=0,E=l.length,P;m<E;m++)P=l[m].style.zIndex,l[m]!==this._container&&P&&(d=i(d,+P));isFinite(d)&&(this.options.zIndex=d+i(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ie.ielt9){en(this._container,this.options.opacity);var i=+new Date,l=!1,d=!1;for(var m in this._tiles){var E=this._tiles[m];if(!(!E.current||!E.loaded)){var P=Math.min(1,(i-E.loaded)/200);en(E.el,P),P<1?l=!0:(E.active?d=!0:this._onOpaqueTile(E),E.active=!0)}}d&&!this._noPrune&&this._pruneTiles(),l&&(V(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this))}},_onOpaqueTile:k,_initContainer:function(){this._container||(this._container=Ge("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var i=this._tileZoom,l=this.options.maxZoom;if(i!==void 0){for(var d in this._levels)d=Number(d),this._levels[d].el.children.length||d===i?(this._levels[d].el.style.zIndex=l-Math.abs(i-d),this._onUpdateLevel(d)):(at(this._levels[d].el),this._removeTilesAtZoom(d),this._onRemoveLevel(d),delete this._levels[d]);var m=this._levels[i],E=this._map;return m||(m=this._levels[i]={},m.el=Ge("div","leaflet-tile-container leaflet-zoom-animated",this._container),m.el.style.zIndex=l,m.origin=E.project(E.unproject(E.getPixelOrigin()),i).round(),m.zoom=i,this._setZoomTransform(m,E.getCenter(),E.getZoom()),k(m.el.offsetWidth),this._onCreateLevel(m)),this._level=m,m}},_onUpdateLevel:k,_onRemoveLevel:k,_onCreateLevel:k,_pruneTiles:function(){if(this._map){var i,l,d=this._map.getZoom();if(d>this.options.maxZoom||d<this.options.minZoom){this._removeAllTiles();return}for(i in this._tiles)l=this._tiles[i],l.retain=l.current;for(i in this._tiles)if(l=this._tiles[i],l.current&&!l.active){var m=l.coords;this._retainParent(m.x,m.y,m.z,m.z-5)||this._retainChildren(m.x,m.y,m.z,m.z+2)}for(i in this._tiles)this._tiles[i].retain||this._removeTile(i)}},_removeTilesAtZoom:function(i){for(var l in this._tiles)this._tiles[l].coords.z===i&&this._removeTile(l)},_removeAllTiles:function(){for(var i in this._tiles)this._removeTile(i)},_invalidateAll:function(){for(var i in this._levels)at(this._levels[i].el),this._onRemoveLevel(Number(i)),delete this._levels[i];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(i,l,d,m){var E=Math.floor(i/2),P=Math.floor(l/2),j=d-1,G=new te(+E,+P);G.z=+j;var X=this._tileCoordsToKey(G),oe=this._tiles[X];return oe&&oe.active?(oe.retain=!0,!0):(oe&&oe.loaded&&(oe.retain=!0),j>m?this._retainParent(E,P,j,m):!1)},_retainChildren:function(i,l,d,m){for(var E=2*i;E<2*i+2;E++)for(var P=2*l;P<2*l+2;P++){var j=new te(E,P);j.z=d+1;var G=this._tileCoordsToKey(j),X=this._tiles[G];if(X&&X.active){X.retain=!0;continue}else X&&X.loaded&&(X.retain=!0);d+1<m&&this._retainChildren(E,P,d+1,m)}},_resetView:function(i){var l=i&&(i.pinch||i.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(i){this._setView(i.center,i.zoom,!0,i.noUpdate)},_clampZoom:function(i){var l=this.options;return l.minNativeZoom!==void 0&&i<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<i?l.maxNativeZoom:i},_setView:function(i,l,d,m){var E=Math.round(l);this.options.maxZoom!==void 0&&E>this.options.maxZoom||this.options.minZoom!==void 0&&E<this.options.minZoom?E=void 0:E=this._clampZoom(E);var P=this.options.updateWhenZooming&&E!==this._tileZoom;(!m||P)&&(this._tileZoom=E,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),E!==void 0&&this._update(i),d||this._pruneTiles(),this._noPrune=!!d),this._setZoomTransforms(i,l)},_setZoomTransforms:function(i,l){for(var d in this._levels)this._setZoomTransform(this._levels[d],i,l)},_setZoomTransform:function(i,l,d){var m=this._map.getZoomScale(d,i.zoom),E=i.origin.multiplyBy(m).subtract(this._map._getNewPixelOrigin(l,d)).round();Ie.any3d?Nn(i.el,E,m):Ct(i.el,E)},_resetGrid:function(){var i=this._map,l=i.options.crs,d=this._tileSize=this.getTileSize(),m=this._tileZoom,E=this._map.getPixelWorldBounds(this._tileZoom);E&&(this._globalTileRange=this._pxBoundsToTileRange(E)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(i.project([0,l.wrapLng[0]],m).x/d.x),Math.ceil(i.project([0,l.wrapLng[1]],m).x/d.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(i.project([l.wrapLat[0],0],m).y/d.x),Math.ceil(i.project([l.wrapLat[1],0],m).y/d.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(i){var l=this._map,d=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),m=l.getZoomScale(d,this._tileZoom),E=l.project(i,this._tileZoom).floor(),P=l.getSize().divideBy(m*2);return new B(E.subtract(P),E.add(P))},_update:function(i){var l=this._map;if(l){var d=this._clampZoom(l.getZoom());if(i===void 0&&(i=l.getCenter()),this._tileZoom!==void 0){var m=this._getTiledPixelBounds(i),E=this._pxBoundsToTileRange(m),P=E.getCenter(),j=[],G=this.options.keepBuffer,X=new B(E.getBottomLeft().subtract([G,-G]),E.getTopRight().add([G,-G]));if(!(isFinite(E.min.x)&&isFinite(E.min.y)&&isFinite(E.max.x)&&isFinite(E.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var oe in this._tiles){var ye=this._tiles[oe].coords;(ye.z!==this._tileZoom||!X.contains(new te(ye.x,ye.y)))&&(this._tiles[oe].current=!1)}if(Math.abs(d-this._tileZoom)>1){this._setView(i,d);return}for(var je=E.min.y;je<=E.max.y;je++)for(var Ye=E.min.x;Ye<=E.max.x;Ye++){var Qt=new te(Ye,je);if(Qt.z=this._tileZoom,!!this._isValidTile(Qt)){var Bt=this._tiles[this._tileCoordsToKey(Qt)];Bt?Bt.current=!0:j.push(Qt)}}if(j.sort(function(wn,ro){return wn.distanceTo(P)-ro.distanceTo(P)}),j.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var jn=document.createDocumentFragment();for(Ye=0;Ye<j.length;Ye++)this._addTile(j[Ye],jn);this._level.el.appendChild(jn)}}}},_isValidTile:function(i){var l=this._map.options.crs;if(!l.infinite){var d=this._globalTileRange;if(!l.wrapLng&&(i.x<d.min.x||i.x>d.max.x)||!l.wrapLat&&(i.y<d.min.y||i.y>d.max.y))return!1}if(!this.options.bounds)return!0;var m=this._tileCoordsToBounds(i);return Ne(this.options.bounds).overlaps(m)},_keyToBounds:function(i){return this._tileCoordsToBounds(this._keyToTileCoords(i))},_tileCoordsToNwSe:function(i){var l=this._map,d=this.getTileSize(),m=i.scaleBy(d),E=m.add(d),P=l.unproject(m,i.z),j=l.unproject(E,i.z);return[P,j]},_tileCoordsToBounds:function(i){var l=this._tileCoordsToNwSe(i),d=new Me(l[0],l[1]);return this.options.noWrap||(d=this._map.wrapLatLngBounds(d)),d},_tileCoordsToKey:function(i){return i.x+":"+i.y+":"+i.z},_keyToTileCoords:function(i){var l=i.split(":"),d=new te(+l[0],+l[1]);return d.z=+l[2],d},_removeTile:function(i){var l=this._tiles[i];l&&(at(l.el),delete this._tiles[i],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(i)}))},_initTile:function(i){ve(i,"leaflet-tile");var l=this.getTileSize();i.style.width=l.x+"px",i.style.height=l.y+"px",i.onselectstart=k,i.onmousemove=k,Ie.ielt9&&this.options.opacity<1&&en(i,this.options.opacity)},_addTile:function(i,l){var d=this._getTilePos(i),m=this._tileCoordsToKey(i),E=this.createTile(this._wrapCoords(i),p(this._tileReady,this,i));this._initTile(E),this.createTile.length<2&&D(p(this._tileReady,this,i,null,E)),Ct(E,d),this._tiles[m]={el:E,coords:i,current:!0},l.appendChild(E),this.fire("tileloadstart",{tile:E,coords:i})},_tileReady:function(i,l,d){l&&this.fire("tileerror",{error:l,tile:d,coords:i});var m=this._tileCoordsToKey(i);d=this._tiles[m],d&&(d.loaded=+new Date,this._map._fadeAnimated?(en(d.el,0),V(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this)):(d.active=!0,this._pruneTiles()),l||(ve(d.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:d.el,coords:i})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ie.ielt9||!this._map._fadeAnimated?D(this._pruneTiles,this):setTimeout(p(this._pruneTiles,this),250)))},_getTilePos:function(i){return i.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(i){var l=new te(this._wrapX?C(i.x,this._wrapX):i.x,this._wrapY?C(i.y,this._wrapY):i.y);return l.z=i.z,l},_pxBoundsToTileRange:function(i){var l=this.getTileSize();return new B(i.min.unscaleBy(l).floor(),i.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var i in this._tiles)if(!this._tiles[i].loaded)return!1;return!0}});function Xs(i){return new Ai(i)}var bi=Ai.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(i,l){this._url=i,l=Q(this,l),l.detectRetina&&Ie.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(i,l){return this._url===i&&l===void 0&&(l=!0),this._url=i,l||this.redraw(),this},createTile:function(i,l){var d=document.createElement("img");return ze(d,"load",p(this._tileOnLoad,this,l,d)),ze(d,"error",p(this._tileOnError,this,l,d)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(d.referrerPolicy=this.options.referrerPolicy),d.alt="",d.src=this.getTileUrl(i),d},getTileUrl:function(i){var l={r:Ie.retina?"@2x":"",s:this._getSubdomain(i),x:i.x,y:i.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var d=this._globalTileRange.max.y-i.y;this.options.tms&&(l.y=d),l["-y"]=d}return pe(this._url,a(l,this.options))},_tileOnLoad:function(i,l){Ie.ielt9?setTimeout(p(i,this,null,l),0):i(null,l)},_tileOnError:function(i,l,d){var m=this.options.errorTileUrl;m&&l.getAttribute("src")!==m&&(l.src=m),i(d,l)},_onTileRemove:function(i){i.tile.onload=null},_getZoomForUrl:function(){var i=this._tileZoom,l=this.options.maxZoom,d=this.options.zoomReverse,m=this.options.zoomOffset;return d&&(i=l-i),i+m},_getSubdomain:function(i){var l=Math.abs(i.x+i.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var i,l;for(i in this._tiles)if(this._tiles[i].coords.z!==this._tileZoom&&(l=this._tiles[i].el,l.onload=k,l.onerror=k,!l.complete)){l.src=Se;var d=this._tiles[i].coords;at(l),delete this._tiles[i],this.fire("tileabort",{tile:l,coords:d})}},_removeTile:function(i){var l=this._tiles[i];if(l)return l.el.setAttribute("src",Se),Ai.prototype._removeTile.call(this,i)},_tileReady:function(i,l,d){if(!(!this._map||d&&d.getAttribute("src")===Se))return Ai.prototype._tileReady.call(this,i,l,d)}});function $l(i,l){return new bi(i,l)}var ra=bi.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(i,l){this._url=i;var d=a({},this.defaultWmsParams);for(var m in l)m in this.options||(d[m]=l[m]);l=Q(this,l);var E=l.detectRetina&&Ie.retina?2:1,P=this.getTileSize();d.width=P.x*E,d.height=P.y*E,this.wmsParams=d},onAdd:function(i){this._crs=this.options.crs||i.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,bi.prototype.onAdd.call(this,i)},getTileUrl:function(i){var l=this._tileCoordsToNwSe(i),d=this._crs,m=ne(d.project(l[0]),d.project(l[1])),E=m.min,P=m.max,j=(this._wmsVersion>=1.3&&this._crs===Gs?[E.y,E.x,P.y,P.x]:[E.x,E.y,P.x,P.y]).join(","),G=bi.prototype.getTileUrl.call(this,i);return G+Y(this.wmsParams,G,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+j},setParams:function(i,l){return a(this.wmsParams,i),l||this.redraw(),this}});function ic(i,l){return new ra(i,l)}bi.WMS=ra,$l.wms=ic;var Dr=ar.extend({options:{padding:.1},initialize:function(i){Q(this,i),x(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ve(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var i={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(i.zoomanim=this._onAnimZoom),i},_onAnimZoom:function(i){this._updateTransform(i.center,i.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(i,l){var d=this._map.getZoomScale(l,this._zoom),m=this._map.getSize().multiplyBy(.5+this.options.padding),E=this._map.project(this._center,l),P=m.multiplyBy(-d).add(E).subtract(this._map._getNewPixelOrigin(i,l));Ie.any3d?Nn(this._container,P,d):Ct(this._container,P)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var i in this._layers)this._layers[i]._reset()},_onZoomEnd:function(){for(var i in this._layers)this._layers[i]._project()},_updatePaths:function(){for(var i in this._layers)this._layers[i]._update()},_update:function(){var i=this.options.padding,l=this._map.getSize(),d=this._map.containerPointToLayerPoint(l.multiplyBy(-i)).round();this._bounds=new B(d,d.add(l.multiplyBy(1+i*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Gl=Dr.extend({options:{tolerance:0},getEvents:function(){var i=Dr.prototype.getEvents.call(this);return i.viewprereset=this._onViewPreReset,i},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Dr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var i=this._container=document.createElement("canvas");ze(i,"mousemove",this._onMouseMove,this),ze(i,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ze(i,"mouseout",this._handleMouseOut,this),i._leaflet_disable_events=!0,this._ctx=i.getContext("2d")},_destroyContainer:function(){V(this._redrawRequest),delete this._ctx,at(this._container),pt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var i;this._redrawBounds=null;for(var l in this._layers)i=this._layers[l],i._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Dr.prototype._update.call(this);var i=this._bounds,l=this._container,d=i.getSize(),m=Ie.retina?2:1;Ct(l,i.min),l.width=m*d.x,l.height=m*d.y,l.style.width=d.x+"px",l.style.height=d.y+"px",Ie.retina&&this._ctx.scale(2,2),this._ctx.translate(-i.min.x,-i.min.y),this.fire("update")}},_reset:function(){Dr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(i){this._updateDashArray(i),this._layers[x(i)]=i;var l=i._order={layer:i,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(i){this._requestRedraw(i)},_removePath:function(i){var l=i._order,d=l.next,m=l.prev;d?d.prev=m:this._drawLast=m,m?m.next=d:this._drawFirst=d,delete i._order,delete this._layers[x(i)],this._requestRedraw(i)},_updatePath:function(i){this._extendRedrawBounds(i),i._project(),i._update(),this._requestRedraw(i)},_updateStyle:function(i){this._updateDashArray(i),this._requestRedraw(i)},_updateDashArray:function(i){if(typeof i.options.dashArray=="string"){var l=i.options.dashArray.split(/[, ]+/),d=[],m,E;for(E=0;E<l.length;E++){if(m=Number(l[E]),isNaN(m))return;d.push(m)}i.options._dashArray=d}else i.options._dashArray=i.options.dashArray},_requestRedraw:function(i){this._map&&(this._extendRedrawBounds(i),this._redrawRequest=this._redrawRequest||D(this._redraw,this))},_extendRedrawBounds:function(i){if(i._pxBounds){var l=(i.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new B,this._redrawBounds.extend(i._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(i._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var i=this._redrawBounds;if(i){var l=i.getSize();this._ctx.clearRect(i.min.x,i.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var i,l=this._redrawBounds;if(this._ctx.save(),l){var d=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,d.x,d.y),this._ctx.clip()}this._drawing=!0;for(var m=this._drawFirst;m;m=m.next)i=m.layer,(!l||i._pxBounds&&i._pxBounds.intersects(l))&&i._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(i,l){if(this._drawing){var d,m,E,P,j=i._parts,G=j.length,X=this._ctx;if(G){for(X.beginPath(),d=0;d<G;d++){for(m=0,E=j[d].length;m<E;m++)P=j[d][m],X[m?"lineTo":"moveTo"](P.x,P.y);l&&X.closePath()}this._fillStroke(X,i)}}},_updateCircle:function(i){if(!(!this._drawing||i._empty())){var l=i._point,d=this._ctx,m=Math.max(Math.round(i._radius),1),E=(Math.max(Math.round(i._radiusY),1)||m)/m;E!==1&&(d.save(),d.scale(1,E)),d.beginPath(),d.arc(l.x,l.y/E,m,0,Math.PI*2,!1),E!==1&&d.restore(),this._fillStroke(d,i)}},_fillStroke:function(i,l){var d=l.options;d.fill&&(i.globalAlpha=d.fillOpacity,i.fillStyle=d.fillColor||d.color,i.fill(d.fillRule||"evenodd")),d.stroke&&d.weight!==0&&(i.setLineDash&&i.setLineDash(l.options&&l.options._dashArray||[]),i.globalAlpha=d.opacity,i.lineWidth=d.weight,i.strokeStyle=d.color,i.lineCap=d.lineCap,i.lineJoin=d.lineJoin,i.stroke())},_onClick:function(i){for(var l=this._map.mouseEventToLayerPoint(i),d,m,E=this._drawFirst;E;E=E.next)d=E.layer,d.options.interactive&&d._containsPoint(l)&&(!(i.type==="click"||i.type==="preclick")||!this._map._draggableMoved(d))&&(m=d);this._fireEvent(m?[m]:!1,i)},_onMouseMove:function(i){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(i);this._handleMouseHover(i,l)}},_handleMouseOut:function(i){var l=this._hoveredLayer;l&&(ft(this._container,"leaflet-interactive"),this._fireEvent([l],i,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(i,l){if(!this._mouseHoverThrottled){for(var d,m,E=this._drawFirst;E;E=E.next)d=E.layer,d.options.interactive&&d._containsPoint(l)&&(m=d);m!==this._hoveredLayer&&(this._handleMouseOut(i),m&&(ve(this._container,"leaflet-interactive"),this._fireEvent([m],i,"mouseover"),this._hoveredLayer=m)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,i),this._mouseHoverThrottled=!0,setTimeout(p(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(i,l,d){this._map._fireDOMEvent(l,d||l.type,i)},_bringToFront:function(i){var l=i._order;if(l){var d=l.next,m=l.prev;if(d)d.prev=m;else return;m?m.next=d:d&&(this._drawFirst=d),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(i)}},_bringToBack:function(i){var l=i._order;if(l){var d=l.next,m=l.prev;if(m)m.next=d;else return;d?d.prev=m:m&&(this._drawLast=m),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(i)}}});function Kl(i){return Ie.canvas?new Gl(i):null}var eo=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(i){return document.createElement("<lvml:"+i+' class="lvml">')}}catch{}return function(i){return document.createElement("<"+i+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),sc={_initContainer:function(){this._container=Ge("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Dr.prototype._update.call(this),this.fire("update"))},_initPath:function(i){var l=i._container=eo("shape");ve(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",i._path=eo("path"),l.appendChild(i._path),this._updateStyle(i),this._layers[x(i)]=i},_addPath:function(i){var l=i._container;this._container.appendChild(l),i.options.interactive&&i.addInteractiveTarget(l)},_removePath:function(i){var l=i._container;at(l),i.removeInteractiveTarget(l),delete this._layers[x(i)]},_updateStyle:function(i){var l=i._stroke,d=i._fill,m=i.options,E=i._container;E.stroked=!!m.stroke,E.filled=!!m.fill,m.stroke?(l||(l=i._stroke=eo("stroke")),E.appendChild(l),l.weight=m.weight+"px",l.color=m.color,l.opacity=m.opacity,m.dashArray?l.dashStyle=Ee(m.dashArray)?m.dashArray.join(" "):m.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=m.lineCap.replace("butt","flat"),l.joinstyle=m.lineJoin):l&&(E.removeChild(l),i._stroke=null),m.fill?(d||(d=i._fill=eo("fill")),E.appendChild(d),d.color=m.fillColor||m.color,d.opacity=m.fillOpacity):d&&(E.removeChild(d),i._fill=null)},_updateCircle:function(i){var l=i._point.round(),d=Math.round(i._radius),m=Math.round(i._radiusY||d);this._setPath(i,i._empty()?"M0 0":"AL "+l.x+","+l.y+" "+d+","+m+" 0,"+65535*360)},_setPath:function(i,l){i._path.v=l},_bringToFront:function(i){qn(i._container)},_bringToBack:function(i){ln(i._container)}},ur=Ie.vml?eo:zo,us=Dr.extend({_initContainer:function(){this._container=ur("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=ur("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){at(this._container),pt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Dr.prototype._update.call(this);var i=this._bounds,l=i.getSize(),d=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,d.setAttribute("width",l.x),d.setAttribute("height",l.y)),Ct(d,i.min),d.setAttribute("viewBox",[i.min.x,i.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(i){var l=i._path=ur("path");i.options.className&&ve(l,i.options.className),i.options.interactive&&ve(l,"leaflet-interactive"),this._updateStyle(i),this._layers[x(i)]=i},_addPath:function(i){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(i._path),i.addInteractiveTarget(i._path)},_removePath:function(i){at(i._path),i.removeInteractiveTarget(i._path),delete this._layers[x(i)]},_updatePath:function(i){i._project(),i._update()},_updateStyle:function(i){var l=i._path,d=i.options;l&&(d.stroke?(l.setAttribute("stroke",d.color),l.setAttribute("stroke-opacity",d.opacity),l.setAttribute("stroke-width",d.weight),l.setAttribute("stroke-linecap",d.lineCap),l.setAttribute("stroke-linejoin",d.lineJoin),d.dashArray?l.setAttribute("stroke-dasharray",d.dashArray):l.removeAttribute("stroke-dasharray"),d.dashOffset?l.setAttribute("stroke-dashoffset",d.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),d.fill?(l.setAttribute("fill",d.fillColor||d.color),l.setAttribute("fill-opacity",d.fillOpacity),l.setAttribute("fill-rule",d.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(i,l){this._setPath(i,Bi(i._parts,l))},_updateCircle:function(i){var l=i._point,d=Math.max(Math.round(i._radius),1),m=Math.max(Math.round(i._radiusY),1)||d,E="a"+d+","+m+" 0 1,0 ",P=i._empty()?"M0 0":"M"+(l.x-d)+","+l.y+E+d*2+",0 "+E+-d*2+",0 ";this._setPath(i,P)},_setPath:function(i,l){i._path.setAttribute("d",l)},_bringToFront:function(i){qn(i._path)},_bringToBack:function(i){ln(i._path)}});Ie.vml&&us.include(sc);function Qa(i){return Ie.svg||Ie.vml?new us(i):null}Xe.include({getRenderer:function(i){var l=i.options.renderer||this._getPaneRenderer(i.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(i){if(i==="overlayPane"||i===void 0)return!1;var l=this._paneRenderers[i];return l===void 0&&(l=this._createRenderer({pane:i}),this._paneRenderers[i]=l),l},_createRenderer:function(i){return this.options.preferCanvas&&Kl(i)||Qa(i)}});var oc=Xr.extend({initialize:function(i,l){Xr.prototype.initialize.call(this,this._boundsToLatLngs(i),l)},setBounds:function(i){return this.setLatLngs(this._boundsToLatLngs(i))},_boundsToLatLngs:function(i){return i=Ne(i),[i.getSouthWest(),i.getNorthWest(),i.getNorthEast(),i.getSouthEast()]}});function od(i,l){return new oc(i,l)}us.create=ur,us.pointsToPath=Bi,Rr.geometryToLayer=Zs,Rr.coordsToLatLng=Wa,Rr.coordsToLatLngs=ta,Rr.latLngToCoords=qa,Rr.latLngsToCoords=$a,Rr.getFeature=Qs,Rr.asFeature=Ga,Xe.mergeOptions({boxZoom:!0});var to=un.extend({initialize:function(i){this._map=i,this._container=i._container,this._pane=i._panes.overlayPane,this._resetStateTimeout=0,i.on("unload",this._destroy,this)},addHooks:function(){ze(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){pt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){at(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(i){if(!i.shiftKey||i.which!==1&&i.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Je(),es(),this._startPoint=this._map.mouseEventToContainerPoint(i),ze(document,{contextmenu:_n,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(i){this._moved||(this._moved=!0,this._box=Ge("div","leaflet-zoom-box",this._container),ve(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(i);var l=new B(this._point,this._startPoint),d=l.getSize();Ct(this._box,l.min),this._box.style.width=d.x+"px",this._box.style.height=d.y+"px"},_finish:function(){this._moved&&(at(this._box),ft(this._container,"leaflet-crosshair")),gn(),ts(),pt(document,{contextmenu:_n,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(i){if(!(i.which!==1&&i.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(p(this._resetState,this),0);var l=new Me(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(i){i.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Xe.addInitHook("addHandler","boxZoom",to),Xe.mergeOptions({doubleClickZoom:!0});var ac=un.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(i){var l=this._map,d=l.getZoom(),m=l.options.zoomDelta,E=i.originalEvent.shiftKey?d-m:d+m;l.options.doubleClickZoom==="center"?l.setZoom(E):l.setZoomAround(i.containerPoint,E)}});Xe.addInitHook("addHandler","doubleClickZoom",ac),Xe.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Zl=un.extend({addHooks:function(){if(!this._draggable){var i=this._map;this._draggable=new vn(i._mapPane,i._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),i.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),i.on("zoomend",this._onZoomEnd,this),i.whenReady(this._onZoomEnd,this))}ve(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ft(this._map._container,"leaflet-grab"),ft(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var i=this._map;if(i._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=Ne(this._map.options.maxBounds);this._offsetLimit=ne(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;i.fire("movestart").fire("dragstart"),i.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(i){if(this._map.options.inertia){var l=this._lastTime=+new Date,d=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(d),this._times.push(l),this._prunePositions(l)}this._map.fire("move",i).fire("drag",i)},_prunePositions:function(i){for(;this._positions.length>1&&i-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var i=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(i).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(i,l){return i-(i-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var i=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;i.x<l.min.x&&(i.x=this._viscousLimit(i.x,l.min.x)),i.y<l.min.y&&(i.y=this._viscousLimit(i.y,l.min.y)),i.x>l.max.x&&(i.x=this._viscousLimit(i.x,l.max.x)),i.y>l.max.y&&(i.y=this._viscousLimit(i.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(i)}},_onPreDragWrap:function(){var i=this._worldWidth,l=Math.round(i/2),d=this._initialWorldOffset,m=this._draggable._newPos.x,E=(m-l+d)%i+l-d,P=(m+l+d)%i-l-d,j=Math.abs(E+d)<Math.abs(P+d)?E:P;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=j},_onDragEnd:function(i){var l=this._map,d=l.options,m=!d.inertia||i.noInertia||this._times.length<2;if(l.fire("dragend",i),m)l.fire("moveend");else{this._prunePositions(+new Date);var E=this._lastPos.subtract(this._positions[0]),P=(this._lastTime-this._times[0])/1e3,j=d.easeLinearity,G=E.multiplyBy(j/P),X=G.distanceTo([0,0]),oe=Math.min(d.inertiaMaxSpeed,X),ye=G.multiplyBy(oe/X),je=oe/(d.inertiaDeceleration*j),Ye=ye.multiplyBy(-je/2).round();!Ye.x&&!Ye.y?l.fire("moveend"):(Ye=l._limitOffset(Ye,l.options.maxBounds),D(function(){l.panBy(Ye,{duration:je,easeLinearity:j,noMoveStart:!0,animate:!0})}))}}});Xe.addInitHook("addHandler","dragging",Zl),Xe.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Ql=un.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(i){this._map=i,this._setPanDelta(i.options.keyboardPanDelta),this._setZoomDelta(i.options.zoomDelta)},addHooks:function(){var i=this._map._container;i.tabIndex<=0&&(i.tabIndex="0"),ze(i,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),pt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var i=document.body,l=document.documentElement,d=i.scrollTop||l.scrollTop,m=i.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(m,d)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(i){var l=this._panKeys={},d=this.keyCodes,m,E;for(m=0,E=d.left.length;m<E;m++)l[d.left[m]]=[-1*i,0];for(m=0,E=d.right.length;m<E;m++)l[d.right[m]]=[i,0];for(m=0,E=d.down.length;m<E;m++)l[d.down[m]]=[0,i];for(m=0,E=d.up.length;m<E;m++)l[d.up[m]]=[0,-1*i]},_setZoomDelta:function(i){var l=this._zoomKeys={},d=this.keyCodes,m,E;for(m=0,E=d.zoomIn.length;m<E;m++)l[d.zoomIn[m]]=i;for(m=0,E=d.zoomOut.length;m<E;m++)l[d.zoomOut[m]]=-i},_addHooks:function(){ze(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){pt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(i){if(!(i.altKey||i.ctrlKey||i.metaKey)){var l=i.keyCode,d=this._map,m;if(l in this._panKeys){if(!d._panAnim||!d._panAnim._inProgress)if(m=this._panKeys[l],i.shiftKey&&(m=ie(m).multiplyBy(3)),d.options.maxBounds&&(m=d._limitOffset(ie(m),d.options.maxBounds)),d.options.worldCopyJump){var E=d.wrapLatLng(d.unproject(d.project(d.getCenter()).add(m)));d.panTo(E)}else d.panBy(m)}else if(l in this._zoomKeys)d.setZoom(d.getZoom()+(i.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&d._popup&&d._popup.options.closeOnEscapeKey)d.closePopup();else return;_n(i)}}});Xe.addInitHook("addHandler","keyboard",Ql),Xe.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var yt=un.extend({addHooks:function(){ze(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){pt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(i){var l=Ko(i),d=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(i),this._startTime||(this._startTime=+new Date);var m=Math.max(d-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(p(this._performZoom,this),m),_n(i)},_performZoom:function(){var i=this._map,l=i.getZoom(),d=this._map.options.zoomSnap||0;i._stop();var m=this._delta/(this._map.options.wheelPxPerZoomLevel*4),E=4*Math.log(2/(1+Math.exp(-Math.abs(m))))/Math.LN2,P=d?Math.ceil(E/d)*d:E,j=i._limitZoom(l+(this._delta>0?P:-P))-l;this._delta=0,this._startTime=null,j&&(i.options.scrollWheelZoom==="center"?i.setZoom(l+j):i.setZoomAround(this._lastMousePos,l+j))}});Xe.addInitHook("addHandler","scrollWheelZoom",yt);var Yl=600;Xe.mergeOptions({tapHold:Ie.touchNative&&Ie.safari&&Ie.mobile,tapTolerance:15});var ia=un.extend({addHooks:function(){ze(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){pt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(i){if(clearTimeout(this._holdTimeout),i.touches.length===1){var l=i.touches[0];this._startPos=this._newPos=new te(l.clientX,l.clientY),this._holdTimeout=setTimeout(p(function(){this._cancel(),this._isTapValid()&&(ze(document,"touchend",wt),ze(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),Yl),ze(document,"touchend touchcancel contextmenu",this._cancel,this),ze(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function i(){pt(document,"touchend",wt),pt(document,"touchend touchcancel",i)},_cancel:function(){clearTimeout(this._holdTimeout),pt(document,"touchend touchcancel contextmenu",this._cancel,this),pt(document,"touchmove",this._onMove,this)},_onMove:function(i){var l=i.touches[0];this._newPos=new te(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(i,l){var d=new MouseEvent(i,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});d._simulated=!0,l.target.dispatchEvent(d)}});Xe.addInitHook("addHandler","tapHold",ia),Xe.mergeOptions({touchZoom:Ie.touch,bounceAtZoomLimits:!0});var no=un.extend({addHooks:function(){ve(this._map._container,"leaflet-touch-zoom"),ze(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ft(this._map._container,"leaflet-touch-zoom"),pt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(i){var l=this._map;if(!(!i.touches||i.touches.length!==2||l._animatingZoom||this._zooming)){var d=l.mouseEventToContainerPoint(i.touches[0]),m=l.mouseEventToContainerPoint(i.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(d.add(m)._divideBy(2))),this._startDist=d.distanceTo(m),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),ze(document,"touchmove",this._onTouchMove,this),ze(document,"touchend touchcancel",this._onTouchEnd,this),wt(i)}},_onTouchMove:function(i){if(!(!i.touches||i.touches.length!==2||!this._zooming)){var l=this._map,d=l.mouseEventToContainerPoint(i.touches[0]),m=l.mouseEventToContainerPoint(i.touches[1]),E=d.distanceTo(m)/this._startDist;if(this._zoom=l.getScaleZoom(E,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&E<1||this._zoom>l.getMaxZoom()&&E>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,E===1)return}else{var P=d._add(m)._divideBy(2)._subtract(this._centerPoint);if(E===1&&P.x===0&&P.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(P),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),V(this._animRequest);var j=p(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=D(j,this,!0),wt(i)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,V(this._animRequest),pt(document,"touchmove",this._onTouchMove,this),pt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Xe.addInitHook("addHandler","touchZoom",no),Xe.BoxZoom=to,Xe.DoubleClickZoom=ac,Xe.Drag=Zl,Xe.Keyboard=Ql,Xe.ScrollWheelZoom=yt,Xe.TapHold=ia,Xe.TouchZoom=no,t.Bounds=B,t.Browser=Ie,t.CRS=et,t.Canvas=Gl,t.Circle=Ba,t.CircleMarker=Ua,t.Class=ae,t.Control=tn,t.DivIcon=Za,t.DivOverlay=Lr,t.DomEvent=kr,t.DomUtil=ns,t.Draggable=vn,t.Evented=Fe,t.FeatureGroup=Yr,t.GeoJSON=Rr,t.GridLayer=Ai,t.Handler=un,t.Icon=ls,t.ImageOverlay=ki,t.LatLng=Ae,t.LatLngBounds=Me,t.Layer=ar,t.LayerGroup=Pi,t.LineUtil=On,t.Map=Xe,t.Marker=Jr,t.Mixin=Bs,t.Path=Ci,t.Point=te,t.PolyUtil=qs,t.Polygon=Xr,t.Polyline=Vn,t.Popup=Ka,t.PosAnimation=ss,t.Projection=Nr,t.Rectangle=oc,t.Renderer=Dr,t.SVG=us,t.SVGOverlay=Wl,t.TileLayer=bi,t.Tooltip=Js,t.Transformation=ui,t.Util=N,t.VideoOverlay=Hl,t.bind=p,t.bounds=ne,t.canvas=Kl,t.circle=ea,t.circleMarker=Xu,t.control=Mn,t.divIcon=rc,t.extend=a,t.featureGroup=Yu,t.geoJSON=ec,t.geoJson=lr,t.gridLayer=Xs,t.icon=Ju,t.imageOverlay=tc,t.latLng=we,t.latLngBounds=Ne,t.layerGroup=Xo,t.map=Dn,t.marker=rd,t.point=ie,t.polygon=sd,t.polyline=id,t.popup=Ys,t.rectangle=od,t.setOptions=Q,t.stamp=x,t.svg=Qa,t.svgOverlay=ql,t.tileLayer=$l,t.tooltip=na,t.transformation=Wr,t.version=o,t.videoOverlay=nc;var lc=window.L;t.noConflict=function(){return window.L=lc,this},window.L=t}))})(xu,xu.exports)),xu.exports}var Qu=dA();const Vw=Ky(Qu);function gm(r,e,t){return Object.freeze({instance:r,context:e,container:t})}function _m(r,e){return e==null?function(o,a){const c=ce.useRef();return c.current||(c.current=r(o,a)),c}:function(o,a){const c=ce.useRef();c.current||(c.current=r(o,a));const p=ce.useRef(o),{instance:_}=c.current;return ce.useEffect(function(){p.current!==o&&(e(_,o,p.current),p.current=o)},[_,o,a]),c}}function fA(r,e){ce.useEffect(function(){return(e.layerContainer??e.map).addLayer(r.instance),function(){var c;(c=e.layerContainer)==null||c.removeLayer(r.instance),e.map.removeLayer(r.instance)}},[e,r])}function jw(r){return function(t){const o=pm(),a=r(mm(t,o),o);return Lw(o.map,t.attribution),Ow(a.current,t.eventHandlers),fA(a.current,o),a}}function pA(r,e){const t=_m(r,e),o=jw(t);return aA(o)}function mA(r,e){const t=_m(r),o=cA(t,e);return lA(o)}function gA(r,e){const t=_m(r,e),o=jw(t);return uA(o)}function _A(r,e,t){const{opacity:o,zIndex:a}=e;o!=null&&o!==t.opacity&&r.setOpacity(o),a!=null&&a!==t.zIndex&&r.setZIndex(a)}function yA(){return pm().map}function lp(){return lp=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=t[o])}return r},lp.apply(this,arguments)}function vA({bounds:r,boundsOptions:e,center:t,children:o,className:a,id:c,placeholder:p,style:_,whenReady:x,zoom:I,...C},k){const[b]=ce.useState({className:a,id:c,style:_}),[q,W]=ce.useState(null);ce.useImperativeHandle(k,()=>(q==null?void 0:q.map)??null,[q]);const Q=ce.useCallback(de=>{if(de!==null&&q===null){const pe=new Qu.Map(de,C);t!=null&&I!=null?pe.setView(t,I):r!=null&&pe.fitBounds(r,e),x!=null&&pe.whenReady(x),W(sA(pe))}},[]);ce.useEffect(()=>()=>{q==null||q.map.remove()},[q]);const Y=q?Rf.createElement(Mw,{value:q},o):p??null;return Rf.createElement("div",lp({},b,{ref:Q}),Y)}const wA=ce.forwardRef(vA),xA=pA(function({position:e,...t},o){const a=new Qu.Marker(e,t);return gm(a,oA(o,{overlayContainer:a}))},function(e,t,o){t.position!==o.position&&e.setLatLng(t.position),t.icon!=null&&t.icon!==o.icon&&e.setIcon(t.icon),t.zIndexOffset!=null&&t.zIndexOffset!==o.zIndexOffset&&e.setZIndexOffset(t.zIndexOffset),t.opacity!=null&&t.opacity!==o.opacity&&e.setOpacity(t.opacity),e.dragging!=null&&t.draggable!==o.draggable&&(t.draggable===!0?e.dragging.enable():e.dragging.disable())}),EA=mA(function(e,t){const o=new Qu.Popup(e,t.overlayContainer);return gm(o,t)},function(e,t,{position:o},a){ce.useEffect(function(){const{instance:p}=e;function _(I){I.popup===p&&(p.update(),a(!0))}function x(I){I.popup===p&&a(!1)}return t.map.on({popupopen:_,popupclose:x}),t.overlayContainer==null?(o!=null&&p.setLatLng(o),p.openOn(t.map)):t.overlayContainer.bindPopup(p),function(){var C;t.map.off({popupopen:_,popupclose:x}),(C=t.overlayContainer)==null||C.unbindPopup(),t.map.removeLayer(p)}},[e,t,a,o])}),TA=gA(function({url:e,...t},o){const a=new Qu.TileLayer(e,mm(t,o));return gm(a,o)},function(e,t,o){_A(e,t,o);const{url:a}=t;a!=null&&a!==o.url&&e.setUrl(a)}),Fw={food:"#f97316",sightseeing:"#3b82f6",activity:"#22c55e",transport:"#6b7280",accommodation:"#a855f7",free:"#14b8a6"},zw={food:"",sightseeing:"",activity:"",transport:"",accommodation:"",free:""};function IA(r){const e=Fw[r]??"#6366f1",t=zw[r]??"";return Vw.divIcon({className:"",html:`<div style="background:${e};width:32px;height:32px;border-radius:50%;border:2.5px solid rgba(255,255,255,0.9);box-shadow:0 2px 8px rgba(0,0,0,.45);display:flex;align-items:center;justify-content:center;font-size:15px">${t}</div>`,iconSize:[32,32],iconAnchor:[16,16],popupAnchor:[0,-20]})}function SA({positions:r,fallback:e,posKey:t}){const o=yA();return ce.useEffect(()=>{r.length>1?o.fitBounds(Vw.latLngBounds(r),{padding:[50,50],animate:!0,duration:.7}):r.length===1?o.setView(r[0],14,{animate:!0,duration:.7}):e&&o.setView(e,12,{animate:!0,duration:.7})},[t,e==null?void 0:e[0],e==null?void 0:e[1]]),null}function PA({trip:r}){const[e,t]=ce.useState(null),[o,a]=ce.useState(null),[c,p]=ce.useState(!1),_=r.itinerary.some(W=>W.activities.some(Q=>Q.lat&&Q.lng));ce.useEffect(()=>{_||(p(!0),fetch(`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(r.destination)}&format=json&limit=1`,{headers:{"Accept-Language":"en"}}).then(W=>W.json()).then(W=>{W[0]&&a([parseFloat(W[0].lat),parseFloat(W[0].lon)])}).catch(()=>{}).finally(()=>p(!1)))},[r.destination,_]);const x=r.itinerary.flatMap(W=>W.activities.map(Q=>({...Q,dayId:W.id,dayDate:W.date,dayTitle:W.title}))),C=(e?x.filter(W=>W.dayId===e):x).filter(W=>W.lat&&W.lng),k=C.map(W=>[W.lat,W.lng]),b=k.map(W=>`${W[0]},${W[1]}`).join("|"),q=r.itinerary.length===0;return y.jsxs("div",{className:"space-y-4",children:[r.itinerary.length>0&&y.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-1 scrollbar-hide",children:[y.jsx("button",{onClick:()=>t(null),className:`shrink-0 px-3 py-1.5 rounded-full text-sm font-medium transition ${e===null?"bg-indigo-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:"All days"}),r.itinerary.map((W,Q)=>y.jsxs("button",{onClick:()=>t(W.id===e?null:W.id),className:`shrink-0 px-3 py-1.5 rounded-full text-sm font-medium transition ${e===W.id?"bg-indigo-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:["Day ",Q+1]},W.id))]}),y.jsxs("div",{className:"relative rounded-2xl overflow-hidden border border-gray-800",style:{height:"460px"},children:[c&&y.jsxs("div",{className:"absolute inset-0 bg-gray-900/80 z-[500] flex items-center justify-center gap-2",children:[y.jsx(Un,{className:"w-5 h-5 animate-spin text-indigo-400"}),y.jsxs("span",{className:"text-sm text-gray-400",children:["Locating ",r.destination,""]})]}),y.jsxs(wA,{center:[20,0],zoom:2,style:{height:"100%",width:"100%"},scrollWheelZoom:!0,children:[y.jsx(TA,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),y.jsx(SA,{positions:k,fallback:o,posKey:b}),C.map(W=>y.jsx(xA,{position:[W.lat,W.lng],icon:IA(W.category),children:y.jsx(EA,{children:y.jsxs("div",{className:"text-gray-800 text-sm",style:{minWidth:"180px"},children:[y.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[y.jsx("span",{children:zw[W.category]??""}),y.jsx("span",{className:"font-semibold",children:W.title})]}),y.jsxs("p",{className:"text-xs text-gray-500 mb-1",children:[W.dayDate,"  ",W.time]}),y.jsx("p",{className:"text-xs text-gray-600 leading-snug",children:W.description}),(W.estimatedCost??0)>0&&y.jsxs("p",{className:"text-xs text-gray-500 mt-1 font-medium",children:["~$",W.estimatedCost]})]})})},`${W.id}-${W.dayId}`))]})]}),q&&y.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-6 text-center",children:[y.jsx("span",{className:"text-3xl block mb-3",children:""}),y.jsx("h3",{className:"font-semibold text-gray-300 mb-1",children:"No itinerary yet"}),y.jsx("p",{className:"text-sm text-gray-500",children:"Generate an itinerary first  each activity will appear as a pin on the map."})]}),!q&&C.length===0&&!c&&y.jsxs("div",{className:"bg-amber-500/10 border border-amber-500/20 rounded-2xl p-4 text-center",children:[y.jsx("p",{className:"text-sm text-amber-300 font-medium",children:"No GPS coordinates in your itinerary"}),y.jsx("p",{className:"text-xs text-amber-400/70 mt-1",children:"Regenerate your itinerary  the AI will include location coordinates for each activity."})]}),C.length>0&&y.jsx("div",{className:"flex flex-wrap gap-x-4 gap-y-2",children:Object.entries(Fw).map(([W,Q])=>C.some(Y=>Y.category===W)?y.jsxs("div",{className:"flex items-center gap-1.5",children:[y.jsx("div",{className:"w-3 h-3 rounded-full shrink-0",style:{backgroundColor:Q}}),y.jsx("span",{className:"text-xs text-gray-500 capitalize",children:W})]},W):null)})]})}const CA=[{label:" Weather",query:"Current weather forecast and what to pack"},{label:" Flights",query:"Current flight prices and booking recommendations"},{label:" Hotels",query:"Best hotels and accommodation options with current prices"},{label:" Events",query:"Events, festivals and activities happening during my trip"},{label:" Restaurants",query:"Best local restaurants and must-try dishes"},{label:" Travel Tips",query:"Essential travel tips, visa requirements and local customs"}];function kA({trip:r,perplexityKey:e,hasSearchKey:t,onSettingsClick:o}){const[a,c]=ce.useState(""),[p,_]=ce.useState(""),[x,I]=ce.useState(!1),[C,k]=ce.useState(""),[b,q]=ce.useState(""),W=async Q=>{if(!(!Q.trim()||x)){I(!0),k(""),_(""),q(Q);try{const Y=await Hk(Q,r,e);_(Y)}catch(Y){k(Y instanceof Error?Y.message:"Search failed")}finally{I(!1)}}};return t?y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-5",children:[y.jsx("h3",{className:"font-semibold text-gray-200 mb-1",children:"Live Travel Search"}),y.jsxs("p",{className:"text-sm text-gray-500",children:["Real-time info for ",y.jsx("span",{className:"text-gray-300",children:r.destination}),"  powered by Perplexity Sonar"]})]}),y.jsx("div",{className:"flex flex-wrap gap-2",children:CA.map(Q=>y.jsx("button",{onClick:()=>{c(Q.query),W(Q.query)},disabled:x,className:`px-3 py-1.5 rounded-full text-sm font-medium transition disabled:opacity-50 ${b===Q.query&&(x||p)?"bg-indigo-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700 hover:text-gray-200"}`,children:Q.label},Q.label))}),y.jsxs("form",{onSubmit:Q=>{Q.preventDefault(),W(a)},className:"flex gap-2",children:[y.jsx("input",{value:a,onChange:Q=>c(Q.target.value),placeholder:`Search anything about ${r.destination}`,disabled:x,className:"flex-1 bg-gray-900 border border-gray-700 rounded-xl px-4 py-3 text-gray-100 placeholder-gray-600 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition disabled:opacity-50 text-sm"}),y.jsx("button",{type:"submit",disabled:!a.trim()||x,className:"px-4 py-3 bg-indigo-600 hover:bg-indigo-500 disabled:opacity-40 disabled:cursor-not-allowed rounded-xl transition shrink-0",children:x?y.jsx(Un,{className:"w-5 h-5 animate-spin"}):y.jsx(F_,{className:"w-5 h-5"})})]}),C&&y.jsx("div",{className:"text-sm text-red-300 bg-red-500/10 border border-red-500/20 rounded-xl px-4 py-3",children:C}),x&&y.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-8 flex flex-col items-center gap-3",children:[y.jsx(Un,{className:"w-8 h-8 animate-spin text-indigo-400"}),y.jsx("p",{className:"text-sm text-gray-500",children:"Searching the web for real-time info"})]}),p&&!x&&y.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-5",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-4 pb-3 border-b border-gray-800",children:[y.jsx("div",{className:"w-6 h-6 bg-indigo-500/20 rounded-lg flex items-center justify-center",children:y.jsx(F_,{className:"w-3.5 h-3.5 text-indigo-400"})}),y.jsx("span",{className:"text-sm font-medium text-gray-300",children:"Results"}),y.jsx("span",{className:"text-xs text-emerald-400 bg-emerald-500/10 px-2 py-0.5 rounded-full ml-auto",children:"Live"})]}),y.jsx("div",{className:"text-sm text-gray-300 leading-relaxed whitespace-pre-wrap",children:p})]})]}):y.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[y.jsx("div",{className:"w-16 h-16 bg-gray-800 border border-gray-700 rounded-2xl flex items-center justify-center mb-5",children:y.jsx(Is,{className:"w-7 h-7 text-gray-500"})}),y.jsx("h3",{className:"text-lg font-semibold text-gray-400 mb-2",children:"Travel Search unavailable"}),y.jsxs("p",{className:"text-gray-600 max-w-sm mb-6 leading-relaxed text-sm",children:["Add your Perplexity API key to search real-time travel info  flights, hotels, weather, events, and more for ",r.destination,"."]}),y.jsxs("button",{onClick:o,className:"flex items-center gap-2 px-5 py-2.5 bg-gray-800 hover:bg-gray-700 border border-gray-700 rounded-xl text-sm text-gray-300 transition",children:[y.jsx(ka,{className:"w-4 h-4"}),"Set up in Settings"]})]})}const Gy=[{id:"overview",label:"Overview",emoji:""},{id:"itinerary",label:"Itinerary",emoji:""},{id:"packing",label:"Packing",emoji:""},{id:"map",label:"Map",emoji:""},{id:"chat",label:"AI Chat",emoji:"",searchOnly:!0},{id:"search",label:"Search",emoji:"",searchOnly:!0}],AA={planning:"upcoming",upcoming:"completed",completed:"planning"},bA={planning:"bg-amber-500/20 border-amber-500/30 text-amber-300 hover:bg-amber-500/30",upcoming:"bg-blue-500/20 border-blue-500/30 text-blue-300 hover:bg-blue-500/30",completed:"bg-emerald-500/20 border-emerald-500/30 text-emerald-300 hover:bg-emerald-500/30"};function NA({trip:r,activeTab:e,onTabChange:t,onBack:o,onDelete:a,onGenerateItinerary:c,onGeneratePackingList:p,onUpdateTrip:_,getChatHistory:x,saveChatHistory:I,perplexityKey:C,hasGenerationKey:k,hasSearchKey:b,onSettingsClick:q}){const W=new Date(r.startDate+"T12:00:00"),Q=new Date(r.endDate+"T12:00:00"),Y=Math.ceil((Q.getTime()-W.getTime())/864e5)+1,de=()=>{confirm(`Delete "${r.name}"? This cannot be undone.`)&&a(r.id)},pe=()=>_({...r,status:AA[r.status]}),Ee=r.itinerary.reduce((D,V)=>D+V.activities.length,0),Ce=r.packingList.filter(D=>D.packed).length,Se=r.itinerary.flatMap(D=>D.activities).reduce((D,V)=>D+(V.estimatedCost||0),0),Le=Se*r.travelers,F=r.budget-Le,R=Math.min(100,r.budget>0?Le/r.budget*100:0),O=F<0,U=!k&&!b;return y.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-950 pb-16 md:pb-0",children:[y.jsxs("div",{className:`bg-gradient-to-br ${r.coverGradient} relative`,children:[y.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/20 via-transparent to-black/50"}),y.jsxs("div",{className:"relative max-w-5xl mx-auto px-4 md:px-6 pt-4 flex items-center justify-between",children:[y.jsx("button",{onClick:o,className:"p-2 text-white/70 hover:text-white hover:bg-white/10 rounded-lg transition",children:y.jsx(Bf,{className:"w-5 h-5"})}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsxs("button",{onClick:q,className:"relative p-2 text-white/50 hover:text-white hover:bg-white/10 rounded-lg transition",title:"API Settings",children:[y.jsx(ka,{className:"w-4 h-4"}),U&&y.jsx("span",{className:"absolute top-1.5 right-1.5 w-1.5 h-1.5 bg-amber-400 rounded-full"})]}),y.jsxs("button",{onClick:pe,className:`text-xs px-2.5 py-1.5 rounded-full font-medium border transition ${bA[r.status]}`,children:[y.jsx($I,{className:"w-3 h-3 inline mr-1"}),r.status]}),y.jsx("button",{onClick:de,className:"p-2 text-white/40 hover:text-red-300 hover:bg-red-500/20 rounded-lg transition",children:y.jsx(Fh,{className:"w-4 h-4"})})]})]}),y.jsx("div",{className:"relative max-w-5xl mx-auto px-4 md:px-6 pt-3 pb-4 md:pb-5",children:y.jsxs("div",{className:"flex items-start gap-3",children:[y.jsx("span",{className:"text-4xl md:text-5xl drop-shadow-lg shrink-0 mt-0.5",children:r.emoji}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsx("h1",{className:"text-xl md:text-2xl font-bold text-white leading-tight",children:r.name}),y.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5 text-white/70",children:[y.jsx(jh,{className:"w-3.5 h-3.5 shrink-0"}),y.jsx("span",{className:"text-sm truncate",children:r.destination})]}),y.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-white/60 overflow-x-auto scrollbar-hide",children:[y.jsxs("span",{className:"flex items-center gap-1 shrink-0",children:[y.jsx(xp,{className:"w-3.5 h-3.5"}),W.toLocaleDateString("en",{month:"short",day:"numeric"})," "," ",Q.toLocaleDateString("en",{month:"short",day:"numeric",year:"numeric"}),y.jsxs("span",{className:"text-white/30 ml-1",children:["(",Y,"d)"]})]}),y.jsxs("span",{className:"flex items-center gap-1 shrink-0",children:[y.jsx(Ip,{className:"w-3.5 h-3.5"}),r.travelers]}),y.jsxs("span",{className:"flex items-center gap-1 shrink-0",children:[y.jsx(Ep,{className:"w-3.5 h-3.5"}),r.currency," ",r.budget.toLocaleString()]})]})]})]})}),y.jsx("div",{className:"hidden md:block relative max-w-5xl mx-auto px-6 pb-0",children:y.jsx("div",{className:"flex gap-1 w-fit overflow-x-auto",children:Gy.map(D=>{const V=!!(D.searchOnly&&!b);return y.jsxs("button",{onClick:()=>!V&&t(D.id),disabled:V,className:`px-4 py-2.5 rounded-t-xl text-sm font-medium transition flex items-center gap-1.5 whitespace-nowrap ${V?"text-white/30 cursor-not-allowed":e===D.id?"bg-gray-950 text-white":"text-white/60 hover:text-white/90 hover:bg-white/10"}`,children:[y.jsx("span",{children:D.emoji}),D.label,V&&y.jsx(Is,{className:"w-3 h-3"})]},D.id)})})})]}),y.jsxs("div",{className:"flex-1 max-w-5xl mx-auto w-full px-4 md:px-6 py-5 md:py-6",children:[e==="overview"&&y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-5 md:p-6",children:[y.jsx("h3",{className:"font-semibold text-gray-200 mb-2",children:"About this trip"}),y.jsx("p",{className:"text-gray-400 leading-relaxed text-sm md:text-base",children:r.description})]}),y.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[{label:"Days",value:Y,suffix:""},{label:"Activities",value:Ee||"",suffix:""},{label:"Items packed",value:Ce||"",suffix:r.packingList.length>0?`/${r.packingList.length}`:""},{label:"Interests",value:r.interests.length,suffix:""}].map(({label:D,value:V,suffix:N})=>y.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-4 md:p-5 text-center",children:[y.jsxs("p",{className:"text-xl md:text-2xl font-bold text-indigo-400",children:[V,N&&y.jsx("span",{className:"text-sm text-gray-500",children:N})]}),y.jsx("p",{className:"text-xs text-gray-500 mt-1",children:D})]},D))}),y.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-5 md:p-6",children:[y.jsxs("div",{className:"flex items-center justify-between mb-4",children:[y.jsx("h3",{className:"font-semibold text-gray-200",children:"Provisional Budget"}),y.jsx("span",{className:`text-xs font-medium px-2.5 py-1 rounded-full border ${Le===0?"bg-gray-800 text-gray-500 border-gray-700":O?"bg-red-500/15 text-red-300 border-red-500/25":"bg-emerald-500/15 text-emerald-300 border-emerald-500/25"}`,children:Le===0?"No estimates yet":O?` ${r.currency}${Math.abs(F).toLocaleString()} over`:` ${r.currency}${F.toLocaleString()} left`})]}),y.jsx("div",{className:"grid grid-cols-3 gap-2 md:gap-3 mb-4 text-center",children:[{label:"Allocated",val:`${r.currency} ${r.budget.toLocaleString()}`,color:"text-gray-200"},{label:"Est. spend",val:`${r.currency} ${Le.toLocaleString()}`,color:Le===0?"text-gray-500":O?"text-red-400":"text-gray-200"},{label:"Remaining",val:Le===0?"":`${r.currency} ${F.toLocaleString()}`,color:Le===0?"text-gray-500":O?"text-red-400":"text-emerald-400"}].map(({label:D,val:V,color:N})=>y.jsxs("div",{className:"bg-gray-800/60 rounded-xl p-3",children:[y.jsx("p",{className:"text-xs text-gray-500 mb-1",children:D}),y.jsx("p",{className:`font-semibold text-sm ${N}`,children:V})]},D))}),y.jsx("div",{className:"h-2 bg-gray-800 rounded-full overflow-hidden",children:y.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${O?"bg-red-500":R>80?"bg-amber-500":"bg-emerald-500"}`,style:{width:`${R}%`}})}),y.jsx("p",{className:"text-xs text-gray-600 mt-2",children:Le===0?"Add cost estimates to activities to track spending.":`${r.currency}${Se.toLocaleString()} /person  ${r.travelers} traveler(s)`})]}),y.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-2xl p-5 md:p-6",children:[y.jsx("h3",{className:"font-semibold text-gray-200 mb-3",children:"Interests"}),y.jsx("div",{className:"flex flex-wrap gap-2",children:r.interests.map(D=>y.jsx("span",{className:"text-sm bg-indigo-500/15 text-indigo-300 border border-indigo-500/25 px-3 py-1 rounded-full",children:D},D))})]}),y.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[{tab:"itinerary",emoji:"",title:"Itinerary",desc:r.itinerary.length?`${Y} days planned`:"View & edit day-by-day",locked:!1},{tab:"packing",emoji:"",title:"Packing",desc:r.packingList.length?`${Ce}/${r.packingList.length} packed`:"View packing list",locked:!1},{tab:"chat",emoji:"",title:"AI Chat",desc:b?"Ask anything about your trip":"Requires Perplexity key",locked:!b},{tab:"search",emoji:"",title:"Search",desc:b?"Real-time flights, hotels, weather":"Requires Perplexity key",locked:!b}].map(({tab:D,emoji:V,title:N,desc:ae,locked:Oe})=>y.jsxs("button",{onClick:()=>!Oe&&t(D),disabled:Oe,className:`flex items-center gap-3 bg-gray-900 border rounded-2xl p-4 text-left transition group ${Oe?"border-gray-800 opacity-50 cursor-not-allowed":"border-gray-800 hover:border-gray-600"}`,children:[y.jsx("span",{className:`text-2xl ${Oe?"grayscale":""}`,children:V}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsxs("p",{className:`font-medium text-sm flex items-center gap-1.5 ${Oe?"text-gray-500":"text-gray-200 group-hover:text-white transition"}`,children:[N,Oe&&y.jsx(Is,{className:"w-3 h-3"})]}),y.jsx("p",{className:"text-xs text-gray-500 truncate",children:ae})]})]},D))})]}),e==="itinerary"&&y.jsx(Jk,{trip:r,onGenerate:c,onUpdate:_,hasAiKey:k,onSettingsClick:q}),e==="packing"&&y.jsx(eA,{trip:r,onGenerate:p,onUpdate:_,hasAiKey:k,onSettingsClick:q}),e==="map"&&y.jsx(PA,{trip:r}),e==="chat"&&y.jsx(nA,{trip:r,perplexityKey:C,hasAiKey:b,onSettingsClick:q,getChatHistory:x,saveChatHistory:I}),e==="search"&&y.jsx(kA,{trip:r,perplexityKey:C,hasSearchKey:b,onSettingsClick:q})]}),y.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 z-30 bg-gray-900/95 backdrop-blur-md border-t border-gray-800",children:y.jsx("div",{className:"flex items-center overflow-x-auto px-2 pt-1 pb-2 gap-1 scrollbar-hide",children:Gy.map(D=>{const V=!!(D.searchOnly&&!b);return y.jsxs("button",{onClick:()=>!V&&t(D.id),disabled:V,className:`flex flex-col items-center gap-0.5 shrink-0 min-w-[52px] py-1.5 px-1 rounded-xl transition ${V?"text-gray-700 cursor-not-allowed":e===D.id?"text-indigo-400":"text-gray-500"}`,children:[y.jsx("span",{className:`text-xl leading-none ${V?"grayscale opacity-40":""}`,children:D.emoji}),y.jsxs("span",{className:"text-[10px] font-medium flex items-center gap-0.5 whitespace-nowrap",children:[D.label,V&&y.jsx(Is,{className:"w-2.5 h-2.5"})]}),e===D.id&&!V&&y.jsx("span",{className:"w-1 h-1 bg-indigo-400 rounded-full"})]},D.id)})})})]})}function RA(){const[r,e]=ce.useState([]),[t,o]=ce.useState(!0),[a,c]=ce.useState(!1),p=ce.useRef(null);ce.useEffect(()=>(Uy(k=>{e(b=>[...b.slice(-49),k]),c(!0),setTimeout(()=>c(!1),2e3)}),()=>Uy(null)),[]),ce.useEffect(()=>{var k;t&&((k=p.current)==null||k.scrollIntoView({behavior:"smooth"}))},[r,t]);const _=r.filter(k=>k.status==="pending").length,x=r.length>0,I=k=>k==="pending"?y.jsx(Un,{className:"w-3.5 h-3.5 text-indigo-400 animate-spin shrink-0"}):k==="success"?y.jsx(jI,{className:"w-3.5 h-3.5 text-emerald-400 shrink-0"}):y.jsx(FI,{className:"w-3.5 h-3.5 text-red-400 shrink-0"}),C=k=>k==="pending"?"border-l-indigo-500":k==="success"?"border-l-emerald-500":"border-l-red-500";return y.jsxs("div",{className:`fixed z-40 rounded-2xl border border-gray-700 shadow-2xl shadow-black/60 overflow-hidden transition-all duration-200
        bottom-[72px] left-3 right-3
        md:bottom-4 md:left-auto md:right-4 md:w-80 ${a?"ring-1 ring-indigo-500/40":""}`,children:[y.jsxs("button",{onClick:()=>o(k=>!k),className:"w-full flex items-center justify-between px-4 py-3 bg-gray-900 hover:bg-gray-800 transition",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(RI,{className:"w-4 h-4 text-indigo-400"}),y.jsx("span",{className:"text-sm font-medium text-gray-200",children:"Activity"}),_>0&&y.jsxs("span",{className:"flex items-center gap-1 text-xs text-indigo-300 bg-indigo-500/20 px-2 py-0.5 rounded-full",children:[y.jsx(Un,{className:"w-2.5 h-2.5 animate-spin"}),_," running"]}),!t&&x&&_===0&&y.jsxs("span",{className:"text-xs text-gray-500",children:[r.length," events"]})]}),y.jsxs("div",{className:"flex items-center gap-1",children:[t&&x&&y.jsx("span",{onClick:k=>{k.stopPropagation(),e([])},className:"p-1 text-gray-600 hover:text-gray-400 rounded transition cursor-pointer",title:"Clear log",children:y.jsx(Fh,{className:"w-3.5 h-3.5"})}),t?y.jsx(MI,{className:"w-4 h-4 text-gray-400"}):y.jsx(OI,{className:"w-4 h-4 text-gray-400"})]})]}),t&&y.jsxs("div",{className:"bg-gray-950 max-h-64 overflow-y-auto",children:[r.length===0?y.jsx("div",{className:"px-4 py-6 text-center text-xs text-gray-600",children:"No activity yet. Start by creating a trip or generating content."}):y.jsx("div",{className:"divide-y divide-gray-800/50",children:r.map(k=>y.jsx("div",{className:`px-4 py-2.5 border-l-2 ${C(k.status)}`,children:y.jsxs("div",{className:"flex items-start gap-2",children:[y.jsx("div",{className:"mt-0.5",children:I(k.status)}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsx("p",{className:"text-xs text-gray-300 leading-snug",children:k.message}),k.detail&&y.jsx("p",{className:"text-xs text-red-400 mt-0.5 leading-snug",children:k.detail}),y.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:new Date(k.timestamp).toLocaleTimeString("en",{hour:"2-digit",minute:"2-digit",second:"2-digit"})})]})]})},k.id))}),y.jsx("div",{ref:p})]})]})}function LA(){return Math.random().toString(36).slice(2,11)}function DA(){const{user:r,loading:e}=Tk(),[t,o]=ce.useState([]),[a,c]=ce.useState("dashboard"),[p,_]=ce.useState(null),[x,I]=ce.useState("overview"),[C,k]=ce.useState(""),[b,q]=ce.useState(""),[W,Q]=ce.useState(!1);ce.useEffect(()=>{if(!r){o([]),k(""),q(""),c("dashboard"),_(null);return}let V=!1;return Promise.all([Sk(r.uid),Ak(r.uid)]).then(([N,ae])=>{V||(o(N),k(ae.perplexityKey),q(ae.anthropicKey))}),()=>{V=!0}},[r]);const Y=async V=>{k(V.perplexityKey),q(V.anthropicKey),r&&await bk(r.uid,V)},de=()=>m1(Rh),pe=async V=>{if(!(r!=null&&r.email))return;const N=Ca.credential(r.email,V);await u1(r,N),await Nk(r.uid),await g1(r)},Ee=async V=>{var Oe;const N=await Fk({...V,anthropicKey:b,perplexityKey:C}),ae={id:LA(),name:N.name,emoji:N.emoji,description:N.description,coverGradient:N.coverGradient,destination:V.destination,country:((Oe=V.destination.split(",").pop())==null?void 0:Oe.trim())??V.destination,startDate:V.startDate,endDate:V.endDate,travelers:V.travelers,budget:V.budget,currency:V.currency,interests:V.interests,itinerary:[],packingList:[],status:"planning",createdAt:new Date().toISOString()};return o(ge=>[...ge,ae]),_(ae),I("overview"),c("detail"),r&&await zy(r.uid,ae),ae},Ce=async V=>{o(N=>N.map(ae=>ae.id===V.id?V:ae)),_(V),r&&await zy(r.uid,V)},Se=async V=>{o(N=>N.filter(ae=>ae.id!==V)),c("dashboard"),_(null),r&&await Pk(r.uid,V)},Le=async V=>{const N=await zk(V,b,C),ae={...V,itinerary:N};return await Ce(ae),ae},F=async V=>{const N=await Uk(V,b,C),ae={...V,packingList:N};return await Ce(ae),ae},R=V=>r?Ck(r.uid,V):Promise.resolve([]),O=(V,N)=>r?kk(r.uid,V,N):Promise.resolve();if(e)return y.jsx("div",{className:"min-h-screen bg-gray-950 flex items-center justify-center",children:y.jsx(Un,{className:"w-8 h-8 text-indigo-400 animate-spin"})});if(!r)return y.jsx(qk,{});const U=!!(b||C),D=!!C;return y.jsxs("div",{className:"min-h-screen bg-gray-950 text-gray-100 font-sans",children:[y.jsx(RA,{}),W&&y.jsx($k,{onSave:Y,existing:{perplexityKey:C,anthropicKey:b},onClose:()=>Q(!1),onLogout:de,onDeleteAccount:pe}),a==="dashboard"&&y.jsx(Gk,{trips:t,onNewTrip:()=>c("wizard"),onSelectTrip:V=>{_(V),I("overview"),c("detail")},onSettingsClick:()=>Q(!0),hasAiKey:U}),a==="wizard"&&y.jsx(Zk,{onBack:()=>c("dashboard"),onCreate:Ee,hasAiKey:U,onSettingsClick:()=>Q(!0)}),a==="detail"&&p&&y.jsx(NA,{trip:p,activeTab:x,onTabChange:I,onBack:()=>c("dashboard"),onDelete:Se,onGenerateItinerary:Le,onGeneratePackingList:F,onUpdateTrip:Ce,getChatHistory:R,saveChatHistory:O,perplexityKey:C,hasGenerationKey:U,hasSearchKey:D,onSettingsClick:()=>Q(!0)})]})}Ax.createRoot(document.getElementById("root")).render(y.jsx(ce.StrictMode,{children:y.jsx(DA,{})}));
